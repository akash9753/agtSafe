/*
 jQuery v3.1.0 | (c) jQuery Foundation | jquery.org/license  jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/

//In this page sessionStorage.controlID is a custom unique id we added


//AGjs__changes the following two variables are custom storage
var allPdfComp = {}; sessionStorage
//AGjs__changes this one for get the startX for small circle
var startXValue = "";

var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.arrayIteratorImpl = function (b) {
    var f = 0;
    return function () {
        return f < b.length ? {
            done: !1,
            value: b[f++]
        } : {
                done: !0
            }
    }
};
$jscomp.arrayIterator = function (b) {
    return {
        next: $jscomp.arrayIteratorImpl(b)
    }
};
$jscomp.ASSUME_ES5 = !1;
$jscomp.ASSUME_NO_NATIVE_MAP = !1;
$jscomp.ASSUME_NO_NATIVE_SET = !1;
$jscomp.SIMPLE_FROUND_POLYFILL = !1;
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties ? Object.defineProperty : function (b, f, l) {
    b != Array.prototype && b != Object.prototype && (b[f] = l.value)
};
$jscomp.getGlobal = function (b) {
    return "undefined" != typeof window && window === b ? b : "undefined" != typeof global && null != global ? global : b
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
    $jscomp.initSymbol = function () { };
    $jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol)
};
$jscomp.Symbol = function () {
    var b = 0;
    return function (f) {
        return $jscomp.SYMBOL_PREFIX + (f || "") + b++
    }
}();
$jscomp.initSymbolIterator = function () {
    $jscomp.initSymbol();
    var b = $jscomp.global.Symbol.iterator;
    b || (b = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));
    "function" != typeof Array.prototype[b] && $jscomp.defineProperty(Array.prototype, b, {
        configurable: !0,
        writable: !0,
        value: function () {
            return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))
        }
    });
    $jscomp.initSymbolIterator = function () { }
};
$jscomp.initSymbolAsyncIterator = function () {
    $jscomp.initSymbol();
    var b = $jscomp.global.Symbol.asyncIterator;
    b || (b = $jscomp.global.Symbol.asyncIterator = $jscomp.global.Symbol("asyncIterator"));
    $jscomp.initSymbolAsyncIterator = function () { }
};
$jscomp.iteratorPrototype = function (b) {
    $jscomp.initSymbolIterator();
    b = {
        next: b
    };
    b[$jscomp.global.Symbol.iterator] = function () {
        return this
    };
    return b
};
$jscomp.findInternal = function (b, f, l) {
    b instanceof String && (b = String(b));
    for (var t = b.length, h = 0; h < t; h++) {
        var q = b[h];
        if (f.call(l, q, h, b)) return {
            i: h,
            v: q
        }
    }
    return {
        i: -1,
        v: void 0
    }
};
$jscomp.polyfill = function (b, f, l, t) {
    if (f) {
        l = $jscomp.global;
        b = b.split(".");
        for (t = 0; t < b.length - 1; t++) {
            var h = b[t];
            h in l || (l[h] = {});
            l = l[h]
        }
        b = b[b.length - 1];
        t = l[b];
        f = f(t);
        f != t && null != f && $jscomp.defineProperty(l, b, {
            configurable: !0,
            writable: !0,
            value: f
        })
    }
};
$jscomp.polyfill("Array.prototype.find", function (b) {
    return b ? b : function (b, l) {
        return $jscomp.findInternal(this, b, l).v
    }
}, "es6", "es3");
$jscomp.polyfill("Number.isFinite", function (b) {
    return b ? b : function (b) {
        return "number" !== typeof b ? !1 : !isNaN(b) && Infinity !== b && -Infinity !== b
    }
}, "es6", "es3");
$jscomp.polyfill("Number.isInteger", function (b) {
    return b ? b : function (b) {
        return Number.isFinite(b) ? b === Math.floor(b) : !1
    }
}, "es6", "es3");
$jscomp.checkStringArgs = function (b, f, l) {
    if (null == b) throw new TypeError("The 'this' value for String.prototype." + l + " must not be null or undefined");
    if (f instanceof RegExp) throw new TypeError("First argument to String.prototype." + l + " must not be a regular expression");
    return b + ""
};
$jscomp.polyfill("String.prototype.startsWith", function (b) {
    return b ? b : function (b, l) {
        var f = $jscomp.checkStringArgs(this, b, "startsWith");
        b += "";
        var h = f.length,
            q = b.length;
        l = Math.max(0, Math.min(l | 0, f.length));
        for (var c = 0; c < q && l < h;)
            if (f[l++] != b[c++]) return !1;
        return c >= q
    }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.fill", function (b) {
    return b ? b : function (b, l, t) {
        var h = this.length || 0;
        0 > l && (l = Math.max(0, h + l));
        if (null == t || t > h) t = h;
        t = Number(t);
        0 > t && (t = Math.max(0, h + t));
        for (l = Number(l || 0); l < t; l++) this[l] = b;
        return this
    }
}, "es6", "es3");
$jscomp.polyfill("Math.trunc", function (b) {
    return b ? b : function (b) {
        b = Number(b);
        if (isNaN(b) || Infinity === b || -Infinity === b || 0 === b) return b;
        var f = Math.floor(Math.abs(b));
        return 0 > b ? -f : f
    }
}, "es6", "es3");
$jscomp.polyfill("Object.is", function (b) {
    return b ? b : function (b, l) {
        return b === l ? 0 !== b || 1 / b === 1 / l : b !== b && l !== l
    }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.includes", function (b) {
    return b ? b : function (b, l) {
        var f = this;
        f instanceof String && (f = String(f));
        var h = f.length;
        l = l || 0;
        for (0 > l && (l = Math.max(l + h, 0)); l < h; l++) {
            var q = f[l];
            if (q === b || Object.is(q, b)) return !0
        }
        return !1
    }
}, "es7", "es3");
$jscomp.polyfill("String.prototype.includes", function (b) {
    return b ? b : function (b, l) {
        return -1 !== $jscomp.checkStringArgs(this, b, "includes").indexOf(b, l || 0)
    }
}, "es6", "es3");
$jscomp.iteratorFromArray = function (b, f) {
    $jscomp.initSymbolIterator();
    b instanceof String && (b += "");
    var l = 0,
        t = {
            next: function () {
                if (l < b.length) {
                    var h = l++;
                    return {
                        value: f(h, b[h]),
                        done: !1
                    }
                }
                t.next = function () {
                    return {
                        done: !0,
                        value: void 0
                    }
                };
                return t.next()
            }
        };
    t[Symbol.iterator] = function () {
        return t
    };
    return t
};
$jscomp.polyfill("Array.prototype.keys", function (b) {
    return b ? b : function () {
        return $jscomp.iteratorFromArray(this, function (b) {
            return b
        })
    }
}, "es6", "es3");
! function (b, f) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = b.document ? f(b, !0) : function (b) {
        if (!b.document) throw Error("jQuery requires a window with a document");
        return f(b)
    } : f(b)
}("undefined" != typeof window ? window : this, function (b, f) {
    function l(a, d) {
        d = d || J;
        var b = d.createElement("script");
        b.text = a;
        d.head.appendChild(b).parentNode.removeChild(b)
    }

    function t(a) {
        var d = !!a && "length" in a && a.length,
            b = n.type(a);
        return "function" !== b && !n.isWindow(a) && ("array" === b || 0 === d || "number" ==
            typeof d && 0 < d && d - 1 in a)
    }

    function h(a, d, b) {
        if (n.isFunction(d)) return n.grep(a, function (a, g) {
            return !!d.call(a, g, a) !== b
        });
        if (d.nodeType) return n.grep(a, function (a) {
            return a === d !== b
        });
        if ("string" == typeof d) {
            if (pb.test(d)) return n.filter(d, a, b);
            d = n.filter(d, a)
        }
        return n.grep(a, function (a) {
            return -1 < X.call(d, a) !== b && 1 === a.nodeType
        })
    }

    function q(a, d) {
        for (;
            (a = a[d]) && 1 !== a.nodeType;);
        return a
    }

    function c(a) {
        var d = {};
        return n.each(a.match(ja) || [], function (a, b) {
            d[b] = !0
        }), d
    }

    function e(a) {
        return a
    }

    function k(a) {
        throw a;
    }

    function z(a, d, b) {
        var g;
        try {
            a && n.isFunction(g = a.promise) ? g.call(a).done(d).fail(b) : a && n.isFunction(g = a.then) ? g.call(a, d, b) : d.call(void 0, a)
        } catch (Ua) {
            b.call(void 0, Ua)
        }
    }

    function E() {
        J.removeEventListener("DOMContentLoaded", E);
        b.removeEventListener("load", E);
        n.ready()
    }

    function N() {
        this.expando = n.expando + N.uid++
    }

    function M(a, d, b) {
        var g;
        if (void 0 === b && 1 === a.nodeType)
            if (g = "data-" + d.replace(qb, "-$&").toLowerCase(), b = a.getAttribute(g), "string" == typeof b) {
                try {
                    b = "true" === b || "false" !== b && ("null" === b ? null :
                        +b + "" === b ? +b : rb.test(b) ? JSON.parse(b) : b)
                } catch (Ua) { }
                aa.set(a, d, b)
            } else b = void 0;
        return b
    }

    function w(a, d, b, g) {
        var c, m = 1,
            x = 20,
            p = g ? function () {
                return g.cur()
            } : function () {
                return n.css(a, d, "")
            },
            r = p(),
            e = b && b[3] || (n.cssNumber[d] ? "" : "px"),
            K = (n.cssNumber[d] || "px" !== e && +r) && za.exec(n.css(a, d));
        if (K && K[3] !== e) {
            e = e || K[3];
            b = b || [];
            K = +r || 1;
            do m = m || ".5", K /= m, n.style(a, d, K + e); while (m !== (m = p() / r) && 1 !== m && --x)
        }
        return b && (K = +K || +r || 0, c = b[1] ? K + (b[1] + 1) * b[2] : +b[2], g && (g.unit = e, g.start = K, g.end = c)), c
    }

    function y(a, d) {
        for (var b,
            g, c = [], m = 0, x = a.length; m < x; m++)
            if (g = a[m], g.style)
                if (b = g.style.display, d) {
                    if ("none" === b && (c[m] = Q.get(g, "display") || null, c[m] || (g.style.display = "")), "" === g.style.display && Fa(g)) {
                        b = m;
                        var p = void 0;
                        var r = g.ownerDocument;
                        var e = g.nodeName;
                        r = (g = Va[e]) ? g : (p = r.body.appendChild(r.createElement(e)), g = n.css(p, "display"), p.parentNode.removeChild(p), "none" === g && (g = "block"), Va[e] = g, g);
                        c[b] = r
                    }
                } else "none" !== b && (c[m] = "none", Q.set(g, "display", b));
        for (m = 0; m < x; m++) null != c[m] && (a[m].style.display = c[m]);
        return a
    }

    function C(a,
        d) {
        var b = "undefined" != typeof a.getElementsByTagName ? a.getElementsByTagName(d || "*") : "undefined" != typeof a.querySelectorAll ? a.querySelectorAll(d || "*") : [];
        return void 0 === d || d && n.nodeName(a, d) ? n.merge([a], b) : b
    }

    function A(a, d) {
        for (var b = 0, g = a.length; b < g; b++) Q.set(a[b], "globalEval", !d || Q.get(d[b], "globalEval"))
    }

    function D(a, d, b, g, c) {
        for (var m, x, p, r, e = d.createDocumentFragment(), K = [], v = 0, k = a.length; v < k; v++)
            if (m = a[v], m || 0 === m)
                if ("object" === n.type(m)) n.merge(K, m.nodeType ? [m] : m);
                else if (ub.test(m)) {
                    x = x || e.appendChild(d.createElement("div"));
                    p = (Wa.exec(m) || ["", ""])[1].toLowerCase();
                    p = da[p] || da._default;
                    x.innerHTML = p[1] + n.htmlPrefilter(m) + p[2];
                    for (p = p[0]; p--;) x = x.lastChild;
                    n.merge(K, x.childNodes);
                    x = e.firstChild;
                    x.textContent = ""
                } else K.push(d.createTextNode(m));
        e.textContent = "";
        for (v = 0; m = K[v++];)
            if (g && -1 < n.inArray(m, g)) c && c.push(m);
            else if (r = n.contains(m.ownerDocument, m), x = C(e.appendChild(m), "script"), r && A(x), b)
                for (p = 0; m = x[p++];) Xa.test(m.type || "") && b.push(m);
        return e
    }

    function O() {
        return !0
    }

    function G() {
        return !1
    }

    function fa() {
        try {
            return J.activeElement
        } catch (x) { }
    }

    function T(a, d, b, g, c, m) {
        var x, p;
        if ("object" == typeof d) {
            "string" != typeof b && (g = g || b, b = void 0);
            for (p in d) T(a, p, b, g, d[p], m);
            return a
        }
        if (null == g && null == c ? (c = b, g = b = void 0) : null == c && ("string" == typeof b ? (c = g, g = void 0) : (c = g, g = b, b = void 0)), !1 === c) c = G;
        else if (!c) return a;
        return 1 === m && (x = c, c = function (a) {
            return n().off(a), x.apply(this, arguments)
        }, c.guid = x.guid || (x.guid = n.guid++)), a.each(function () {
            n.event.add(this, d, c, g, b)
        })
    }

    function a(a, d) {
        return n.nodeName(a, "table") && n.nodeName(11 !== d.nodeType ? d : d.firstChild,
            "tr") ? a.getElementsByTagName("tbody")[0] || a : a
    }

    function ba(a) {
        return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a
    }

    function R(a) {
        var d = vb.exec(a.type);
        return d ? a.type = d[1] : a.removeAttribute("type"), a
    }

    function d(a, d) {
        var b, g, c, m, x, p;
        if (1 === d.nodeType) {
            if (Q.hasData(a) && (b = Q.access(a), g = Q.set(d, b), p = b.events))
                for (c in delete g.handle, g.events = {}, p)
                    for (b = 0, g = p[c].length; b < g; b++) n.event.add(d, c, p[c][b]);
            aa.hasData(a) && (m = aa.access(a), x = n.extend({}, m), aa.set(d, x))
        }
    }

    function g(a, d, b, c) {
        d = Ga.apply([],
            d);
        var m, x, p, r = 0,
            e = a.length,
            K = e - 1,
            v = d[0],
            k = n.isFunction(v);
        if (k || 1 < e && "string" == typeof v && !W.checkClone && wb.test(v)) return a.each(function (m) {
            var x = a.eq(m);
            k && (d[0] = v.call(this, m, x.html()));
            g(x, d, b, c)
        });
        if (e && (m = D(d, a[0].ownerDocument, !1, a, c), x = m.firstChild, 1 === m.childNodes.length && (m = x), x || c)) {
            x = n.map(C(m, "script"), ba);
            for (p = x.length; r < e; r++) {
                var u = m;
                r !== K && (u = n.clone(u, !0, !0), p && n.merge(x, C(u, "script")));
                b.call(a[r], u, r)
            }
            if (p)
                for (m = x[x.length - 1].ownerDocument, n.map(x, R), r = 0; r < p; r++) u = x[r], Xa.test(u.type ||
                    "") && !Q.access(u, "globalEval") && n.contains(m, u) && (u.src ? n._evalUrl && n._evalUrl(u.src) : l(u.textContent.replace(xb, ""), m))
        }
        return a
    }

    function m(a, d, b) {
        for (var g = d ? n.filter(d, a) : a, c = 0; null != (d = g[c]); c++) b || 1 !== d.nodeType || n.cleanData(C(d)), d.parentNode && (b && n.contains(d.ownerDocument, d) && A(C(d, "script")), d.parentNode.removeChild(d));
        return a
    }

    function p(a, d, b) {
        var g, c, m, x, p = a.style;
        return b = b || Ha(a), b && (x = b.getPropertyValue(d) || b[d], "" !== x || n.contains(a.ownerDocument, a) || (x = n.style(a, d)), !W.pixelMarginRight() &&
            Ma.test(x) && Ya.test(d) && (g = p.width, c = p.minWidth, m = p.maxWidth, p.minWidth = p.maxWidth = p.width = x, x = b.width, p.width = g, p.minWidth = c, p.maxWidth = m)), void 0 !== x ? x + "" : x
    }

    function r(a, d) {
        return {
            get: function () {
                return a() ? void delete this.get : (this.get = d).apply(this, arguments)
            }
        }
    }

    function v(a) {
        if (a in Za) return a;
        for (var d = a[0].toUpperCase() + a.slice(1), b = $a.length; b--;)
            if (a = $a[b] + d, a in Za) return a
    }

    function u(a, d, b) {
        return (a = za.exec(d)) ? Math.max(0, a[2] - (b || 0)) + (a[3] || "px") : d
    }

    function S(a, d, b, g, c) {
        d = b === (g ? "border" :
            "content") ? 4 : "width" === d ? 1 : 0;
        for (var m = 0; 4 > d; d += 2) "margin" === b && (m += n.css(a, b + ta[d], !0, c)), g ? ("content" === b && (m -= n.css(a, "padding" + ta[d], !0, c)), "margin" !== b && (m -= n.css(a, "border" + ta[d] + "Width", !0, c))) : (m += n.css(a, "padding" + ta[d], !0, c), "padding" !== b && (m += n.css(a, "border" + ta[d] + "Width", !0, c)));
        return m
    }

    function I(a, d, b) {
        var g, c = !0,
            m = Ha(a),
            x = "border-box" === n.css(a, "boxSizing", !1, m);
        if (a.getClientRects().length && (g = a.getBoundingClientRect()[d]), 0 >= g || null == g) {
            if (g = p(a, d, m), (0 > g || null == g) && (g = a.style[d]),
                Ma.test(g)) return g;
            c = x && (W.boxSizingReliable() || g === a.style[d]);
            g = parseFloat(g) || 0
        }
        return g + S(a, d, b || (x ? "border" : "content"), c, m) + "px"
    }

    function U(a, d, b, g, c) {
        return new U.prototype.init(a, d, b, g, c)
    }

    function ea() {
        sa && (b.requestAnimationFrame(ea), n.fx.tick())
    }

    function ha() {
        return b.setTimeout(function () {
            na = void 0
        }), na = n.now()
    }

    function Z(a, d) {
        var b = 0,
            g = {
                height: a
            };
        for (d = d ? 1 : 0; 4 > b; b += 2 - d) {
            var c = ta[b];
            g["margin" + c] = g["padding" + c] = a
        }
        return d && (g.opacity = g.width = a), g
    }

    function H(a, d, b) {
        for (var g, c = (ka.tweeners[d] || []).concat(ka.tweeners["*"]), m = 0, x = c.length; m < x; m++)
            if (g = c[m].call(b, d, a)) return g
    }

    function P(a, d) {
        var b, g, c, m, x;
        for (b in a)
            if (g = n.camelCase(b), c = d[g], m = a[b], n.isArray(m) && (c = m[1], m = a[b] = m[0]), b !== g && (a[g] = m, delete a[b]), x = n.cssHooks[g], x && "expand" in x)
                for (b in m = x.expand(m), delete a[g], m) b in a || (a[b] = m[b], d[b] = c);
            else d[g] = c
    }

    function ka(a, d, b) {
        var g, c = 0,
            m = ka.prefilters.length,
            x = n.Deferred().always(function () {
                delete p.elem
            }),
            p = function () {
                if (g) return !1;
                var d = na || ha();
                d = Math.max(0, r.startTime + r.duration -
                    d);
                for (var b = 1 - (d / r.duration || 0), c = 0, m = r.tweens.length; c < m; c++) r.tweens[c].run(b);
                return x.notifyWith(a, [r, b, d]), 1 > b && m ? d : (x.resolveWith(a, [r]), !1)
            },
            r = x.promise({
                elem: a,
                props: n.extend({}, d),
                opts: n.extend(!0, {
                    specialEasing: {},
                    easing: n.easing._default
                }, b),
                originalProperties: d,
                originalOptions: b,
                startTime: na || ha(),
                duration: b.duration,
                tweens: [],
                createTween: function (d, b) {
                    d = n.Tween(a, r.opts, d, b, r.opts.specialEasing[d] || r.opts.easing);
                    return r.tweens.push(d), d
                },
                stop: function (d) {
                    var b = 0,
                        c = d ? r.tweens.length :
                            0;
                    if (g) return this;
                    for (g = !0; b < c; b++) r.tweens[b].run(1);
                    return d ? (x.notifyWith(a, [r, 1, 0]), x.resolveWith(a, [r, d])) : x.rejectWith(a, [r, d]), this
                }
            });
        b = r.props;
        for (P(b, r.opts.specialEasing); c < m; c++)
            if (d = ka.prefilters[c].call(r, a, b, r.opts)) return n.isFunction(d.stop) && (n._queueHooks(r.elem, r.opts.queue).stop = n.proxy(d.stop, d)), d;
        return n.map(b, H, r), n.isFunction(r.opts.start) && r.opts.start.call(a, r), n.fx.timer(n.extend(p, {
            elem: a,
            anim: r,
            queue: r.opts.queue
        })), r.progress(r.opts.progress).done(r.opts.done, r.opts.complete).fail(r.opts.fail).always(r.opts.always)
    }

    function la(a) {
        return a.getAttribute && a.getAttribute("class") || ""
    }

    function oa(a, d, b, g) {
        var c;
        if (n.isArray(d)) n.each(d, function (d, c) {
            b || yb.test(a) ? g(a, c) : oa(a + "[" + ("object" == typeof c && null != c ? d : "") + "]", c, b, g)
        });
        else if (b || "object" !== n.type(d)) g(a, d);
        else
            for (c in d) oa(a + "[" + c + "]", d[c], b, g)
    }

    function pa(a) {
        return function (d, b) {
            "string" != typeof d && (b = d, d = "*");
            var g = 0,
                c = d.toLowerCase().match(ja) || [];
            if (n.isFunction(b))
                for (; d = c[g++];) "+" === d[0] ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(b)) : (a[d] = a[d] || []).push(b)
        }
    }

    function Ia(a, d, b, g) {
        function c(p) {
            var r;
            return m[p] = !0, n.each(a[p] || [], function (a, p) {
                a = p(d, b, g);
                return "string" != typeof a || x || m[a] ? x ? !(r = a) : void 0 : (d.dataTypes.unshift(a), c(a), !1)
            }), r
        }
        var m = {},
            x = a === Na;
        return c(d.dataTypes[0]) || !m["*"] && c("*")
    }

    function Aa(a, d) {
        var b, g, c = n.ajaxSettings.flatOptions || {};
        for (b in d) void 0 !== d[b] && ((c[b] ? a : g || (g = {}))[b] = d[b]);
        return g && n.extend(!0, a, g), a
    }

    function Ja(a) {
        return n.isWindow(a) ? a : 9 === a.nodeType && a.defaultView
    }
    var F = [],
        J = b.document,
        xa = Object.getPrototypeOf,
        qa = F.slice,
        Ga = F.concat,
        va = F.push,
        X = F.indexOf,
        wa = {},
        Ba = wa.toString,
        B = wa.hasOwnProperty,
        Y = B.toString,
        L = Y.call(Object),
        W = {},
        n = function (a, d) {
            return new n.fn.init(a, d)
        },
        zb = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        Ab = /^-ms-/,
        Bb = /-([a-z])/g,
        Cb = function (a, d) {
            return d.toUpperCase()
        };
    $jscomp.initSymbol();
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    n.fn = n.prototype = {
        jquery: "3.1.0",
        constructor: n,
        length: 0,
        toArray: function () {
            return qa.call(this)
        },
        get: function (a) {
            return null !=
                a ? 0 > a ? this[a + this.length] : this[a] : qa.call(this)
        },
        pushStack: function (a) {
            a = n.merge(this.constructor(), a);
            return a.prevObject = this, a
        },
        each: function (a) {
            return n.each(this, a)
        },
        map: function (a) {
            return this.pushStack(n.map(this, function (d, b) {
                return a.call(d, b, d)
            }))
        },
        slice: function () {
            return this.pushStack(qa.apply(this, arguments))
        },
        first: function () {
            return this.eq(0)
        },
        last: function () {
            return this.eq(-1)
        },
        eq: function (a) {
            var d = this.length;
            a = +a + (0 > a ? d : 0);
            return this.pushStack(0 <= a && a < d ? [this[a]] : [])
        },
        end: function () {
            return this.prevObject ||
                this.constructor()
        },
        push: va,
        sort: F.sort,
        splice: F.splice
    };
    n.extend = n.fn.extend = function () {
        var a, d, b, g, c = arguments[0] || {},
            m = 1,
            p = arguments.length,
            r = !1;
        "boolean" == typeof c && (r = c, c = arguments[m] || {}, m++);
        "object" == typeof c || n.isFunction(c) || (c = {});
        for (m === p && (c = this, m--); m < p; m++)
            if (null != (a = arguments[m]))
                for (d in a) {
                    var e = c[d];
                    var v = a[d];
                    c !== v && (r && v && (n.isPlainObject(v) || (b = n.isArray(v))) ? (b ? (b = !1, g = e && n.isArray(e) ? e : []) : g = e && n.isPlainObject(e) ? e : {}, c[d] = n.extend(r, g, v)) : void 0 !== v && (c[d] = v))
                }
        return c
    };
    n.extend({
        expando: "jQuery" + ("3.1.0" + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function (a) {
            throw Error(a);
        },
        noop: function () { },
        isFunction: function (a) {
            return "function" === n.type(a)
        },
        isArray: Array.isArray,
        isWindow: function (a) {
            return null != a && a === a.window
        },
        isNumeric: function (a) {
            var d = n.type(a);
            return ("number" === d || "string" === d) && !isNaN(a - parseFloat(a))
        },
        isPlainObject: function (a) {
            var d, b;
            return !(!a || "[object Object]" !== Ba.call(a)) && (!(d = xa(a)) || (b = B.call(d, "constructor") && d.constructor, "function" ==
                typeof b && Y.call(b) === L))
        },
        isEmptyObject: function (a) {
            for (var d in a) return !1;
            return !0
        },
        type: function (a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? wa[Ba.call(a)] || "object" : typeof a
        },
        globalEval: function (a) {
            l(a)
        },
        camelCase: function (a) {
            return a.replace(Ab, "ms-").replace(Bb, Cb)
        },
        nodeName: function (a, d) {
            return a.nodeName && a.nodeName.toLowerCase() === d.toLowerCase()
        },
        each: function (a, d) {
            var b, g = 0;
            if (t(a))
                for (b = a.length; g < b && !1 !== d.call(a[g], g, a[g]); g++);
            else
                for (g in a)
                    if (!1 === d.call(a[g],
                        g, a[g])) break;
            return a
        },
        trim: function (a) {
            return null == a ? "" : (a + "").replace(zb, "")
        },
        makeArray: function (a, d) {
            d = d || [];
            return null != a && (t(Object(a)) ? n.merge(d, "string" == typeof a ? [a] : a) : va.call(d, a)), d
        },
        inArray: function (a, d, b) {
            return null == d ? -1 : X.call(d, a, b)
        },
        merge: function (a, d) {
            for (var b = +d.length, g = 0, c = a.length; g < b; g++) a[c++] = d[g];
            return a.length = c, a
        },
        grep: function (a, d, b) {
            for (var g = [], c = 0, m = a.length, p = !b; c < m; c++) b = !d(a[c], c), b !== p && g.push(a[c]);
            return g
        },
        map: function (a, d, b) {
            var g, c = 0,
                m = [];
            if (t(a))
                for (g =
                    a.length; c < g; c++) {
                    var p = d(a[c], c, b);
                    null != p && m.push(p)
                } else
                for (c in a) p = d(a[c], c, b), null != p && m.push(p);
            return Ga.apply([], m)
        },
        guid: 1,
        proxy: function (a, d) {
            var b, g, c;
            if ("string" == typeof d && (b = a[d], d = a, a = b), n.isFunction(a)) return g = qa.call(arguments, 2), c = function () {
                return a.apply(d || this, g.concat(qa.call(arguments)))
            }, c.guid = a.guid = a.guid || n.guid++ , c
        },
        now: Date.now,
        support: W
    });
    "function" == typeof Symbol && (n.fn[Symbol.iterator] = F[Symbol.iterator]);
    n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
        function (a, d) {
            wa["[object " + d + "]"] = d.toLowerCase()
        });
    var ia = function (a) {
        function d(a, d, b, g) {
            var c, m, p, x, r = d && d.ownerDocument,
                e = d ? d.nodeType : 9;
            if (b = b || [], "string" != typeof a || !a || 1 !== e && 9 !== e && 11 !== e) return b;
            if (!g && ((d ? d.ownerDocument || d : B) !== w && ia(d), d = d || w, G)) {
                if (11 !== e && (x = Aa.exec(a)))
                    if (c = x[1])
                        if (9 === e) {
                            if (!(m = d.getElementById(c))) return b;
                            if (m.id === c) return b.push(m), b
                        } else {
                            if (r && (m = r.getElementById(c)) && Z(d, m) && m.id === c) return b.push(m), b
                        }
                    else {
                        if (x[2]) return pa.apply(b, d.getElementsByTagName(a)),
                            b;
                        if ((c = x[3]) && ca.getElementsByClassName && d.getElementsByClassName) return pa.apply(b, d.getElementsByClassName(c)), b
                    }
                if (!(!ca.qsa || T[a + " "] || t && t.test(a))) {
                    if (1 !== e) {
                        r = d;
                        var v = a
                    } else if ("object" !== d.nodeName.toLowerCase()) {
                        (p = d.getAttribute("id")) ? p = p.replace(wa, Ba) : d.setAttribute("id", p = H);
                        m = na(a);
                        for (c = m.length; c--;) m[c] = "#" + p + " " + u(m[c]);
                        v = m.join(",");
                        r = va.test(a) && k(d.parentNode) || d
                    }
                    if (v) try {
                        return pa.apply(b, r.querySelectorAll(v)), b
                    } catch (kc) { } finally {
                            p === H && d.removeAttribute("id")
                        }
                }
            }
            return U(a.replace(la,
                "$1"), d, b, g)
        }

        function b() {
            function a(b, g) {
                return d.push(b + " ") > V.cacheLength && delete a[d.shift()], a[b + " "] = g
            }
            var d = [];
            return a
        }

        function g(a) {
            return a[H] = !0, a
        }

        function c(a) {
            var d = w.createElement("fieldset");
            try {
                return !!a(d)
            } catch (ic) {
                return !1
            } finally {
                d.parentNode && d.parentNode.removeChild(d)
            }
        }

        function m(a, d) {
            a = a.split("|");
            for (var b = a.length; b--;) V.attrHandle[a[b]] = d
        }

        function p(a, d) {
            var b = d && a,
                g = b && 1 === a.nodeType && 1 === d.nodeType && a.sourceIndex - d.sourceIndex;
            if (g) return g;
            if (b)
                for (; b = b.nextSibling;)
                    if (b ===
                        d) return -1;
            return a ? 1 : -1
        }

        function x(a) {
            return function (d) {
                return "input" === d.nodeName.toLowerCase() && d.type === a
            }
        }

        function r(a) {
            return function (d) {
                var b = d.nodeName.toLowerCase();
                return ("input" === b || "button" === b) && d.type === a
            }
        }

        function e(a) {
            return function (d) {
                return "label" in d && d.disabled === a || "form" in d && d.disabled === a || "form" in d && !1 === d.disabled && (d.isDisabled === a || d.isDisabled !== !a && ("label" in d || !ra(d)) !== a)
            }
        }

        function v(a) {
            return g(function (d) {
                return d = +d, g(function (b, g) {
                    for (var c, m = a([], b.length,
                        d), p = m.length; p--;) b[c = m[p]] && (b[c] = !(g[c] = b[c]))
                })
            })
        }

        function k(a) {
            return a && "undefined" != typeof a.getElementsByTagName && a
        }

        function n() { }

        function u(a) {
            for (var d = 0, b = a.length, g = ""; d < b; d++) g += a[d].value;
            return g
        }

        function h(a, d, b) {
            var g = d.dir,
                c = d.next,
                m = c || g,
                p = b && "parentNode" === m,
                x = fa++;
            return d.first ? function (d, b, c) {
                for (; d = d[g];)
                    if (1 === d.nodeType || p) return a(d, b, c)
            } : function (d, b, r) {
                var e, v, k, n = [C, x];
                if (r)
                    for (; d = d[g];) {
                        if ((1 === d.nodeType || p) && a(d, b, r)) return !0
                    } else
                    for (; d = d[g];)
                        if (1 === d.nodeType || p)
                            if (k =
                                d[H] || (d[H] = {}), v = k[d.uniqueID] || (k[d.uniqueID] = {}), c && c === d.nodeName.toLowerCase()) d = d[g] || d;
                            else {
                                if ((e = v[m]) && e[0] === C && e[1] === x) return n[2] = e[2];
                                if (v[m] = n, n[2] = a(d, b, r)) return !0
                            }
            }
        }

        function I(a) {
            return 1 < a.length ? function (d, b, g) {
                for (var c = a.length; c--;)
                    if (!a[c](d, b, g)) return !1;
                return !0
            } : a[0]
        }

        function S(a, d, b, g, c) {
            for (var m, p = [], x = 0, r = a.length, e = null != d; x < r; x++)(m = a[x]) && (b && !b(m, g, c) || (p.push(m), e && d.push(x)));
            return p
        }

        function z(a, b, c, m, p, x) {
            return m && !m[H] && (m = z(m)), p && !p[H] && (p = z(p, x)), g(function (g,
                x, r, e) {
                var v, k = [],
                    n = [],
                    K = x.length,
                    u;
                if (!(u = g)) {
                    u = b || "*";
                    for (var h = r.nodeType ? [r] : r, I = [], ua = 0, z = h.length; ua < z; ua++) d(u, h[ua], I);
                    u = I
                }
                u = !a || !g && b ? u : S(u, k, a, r, e);
                h = c ? p || (g ? a : K || m) ? [] : x : u;
                if (c && c(u, h, r, e), m) {
                    var ma = S(h, n);
                    m(ma, [], r, e);
                    for (r = ma.length; r--;)(v = ma[r]) && (h[n[r]] = !(u[n[r]] = v))
                }
                if (g) {
                    if (p || a) {
                        if (p) {
                            ma = [];
                            for (r = h.length; r--;)(v = h[r]) && ma.push(u[r] = v);
                            p(null, h = [], ma, e)
                        }
                        for (r = h.length; r--;)(v = h[r]) && -1 < (ma = p ? D(g, v) : k[r]) && (g[ma] = !(x[ma] = v))
                    }
                } else h = S(h === x ? h.splice(K, h.length) : h), p ? p(null, x, h,
                    e) : pa.apply(x, h)
            })
        }

        function E(a) {
            var d, b, g = a.length,
                c = V.relative[a[0].type];
            var m = c || V.relative[" "];
            for (var p = c ? 1 : 0, x = h(function (a) {
                return a === d
            }, m, !0), r = h(function (a) {
                return -1 < D(d, a)
            }, m, !0), e = [function (a, b, g) {
                a = !c && (g || b !== N) || ((d = b).nodeType ? x(a, b, g) : r(a, b, g));
                return d = null, a
            }]; p < g; p++)
                if (m = V.relative[a[p].type]) e = [h(I(e), m)];
                else {
                    if (m = V.filter[a[p].type].apply(null, a[p].matches), m[H]) {
                        for (b = ++p; b < g && !V.relative[a[b].type]; b++);
                        return z(1 < p && I(e), 1 < p && u(a.slice(0, p - 1).concat({
                            value: " " === a[p - 2].type ?
                                "*" : ""
                        })).replace(la, "$1"), m, p < b && E(a.slice(p, b)), b < g && E(a = a.slice(b)), b < g && u(a))
                    }
                    e.push(m)
                } return I(e)
        }

        function f(a, b) {
            var c = 0 < b.length,
                m = 0 < a.length,
                p = function (g, p, x, r, e) {
                    var v, k, n = 0,
                        K = "0",
                        u = g && [],
                        h = [],
                        I = N,
                        ua = g || m && V.find.TAG("*", e),
                        z = C += null == I ? 1 : Math.random() || .1,
                        ma = ua.length;
                    for (e && (N = p === w || p || e); K !== ma && null != (v = ua[K]); K++) {
                        if (m && v) {
                            var E = 0;
                            for (p || v.ownerDocument === w || (ia(v), x = !G); k = a[E++];)
                                if (k(v, p || w, x)) {
                                    r.push(v);
                                    break
                                } e && (C = z)
                        }
                        c && ((v = !k && v) && n-- , g && u.push(v))
                    }
                    if (n += K, c && K !== n) {
                        for (E = 0; k =
                            b[E++];) k(u, h, p, x);
                        if (g) {
                            if (0 < n)
                                for (; K--;) u[K] || h[K] || (h[K] = J.call(r));
                            h = S(h)
                        }
                        pa.apply(r, h);
                        e && !g && 0 < h.length && 1 < n + b.length && d.uniqueSort(r)
                    }
                    return e && (C = z, N = I), u
                };
            return c ? g(p) : p
        }
        var q, l, U, N, ea, M, w, y, G, t, P, ha, Z, H = "sizzle" + 1 * new Date,
            B = a.document,
            C = 0,
            fa = 0,
            A = b(),
            ka = b(),
            T = b(),
            F = function (a, d) {
                return a === d && (M = !0), 0
            },
            ba = {}.hasOwnProperty,
            oa = [],
            J = oa.pop,
            L = oa.push,
            pa = oa.push,
            W = oa.slice,
            D = function (a, d) {
                for (var b = 0, g = a.length; b < g; b++)
                    if (a[b] === d) return b;
                return -1
            },
            R = /[\x20\t\r\n\f]+/g,
            la = /^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
            Q = /^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
            qa = /^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,
            O = /=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,
            X = /:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
            Ga = /^(?:\\.|[\w-]|[^\x00-\xa0])+$/,
            xa = {
                ID: /^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
                CLASS: /^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,
                TAG: /^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,
                ATTR: /^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,
                PSEUDO: /^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
                CHILD: /^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
                bool: /^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,
                needsContext: /^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i
            },
            Ja = /^(?:input|select|textarea|button)$/i,
            Ia = /^h\d$/i,
            Y = /^[^{]+\{\s*\[native \w/,
            Aa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            va = /[+~]/,
            aa = /\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,
            da = function (a, d, b) {
                a = "0x" + d - 65536;
                return a !== a || b ? d : 0 > a ? String.fromCharCode(a + 65536) : String.fromCharCode(a >> 10 | 55296, 1023 & a | 56320)
            },
            wa = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,
            Ba = function (a, d) {
                return d ? "\x00" === a ? "\ufffd" : a.slice(0, -1) + "\\" + a.charCodeAt(a.length - 1).toString(16) + " " : "\\" + a
            },
            ja = function () {
                ia()
            },
            ra = h(function (a) {
                return !0 === a.disabled
            }, {
                    dir: "parentNode",
                    next: "legend"
                });
        try {
            pa.apply(oa =
                W.call(B.childNodes), B.childNodes), oa[B.childNodes.length].nodeType
        } catch (hc) {
            pa = {
                apply: oa.length ? function (a, d) {
                    L.apply(a, W.call(d))
                } : function (a, d) {
                    for (var b = a.length, g = 0; a[b++] = d[g++];);
                    a.length = b - 1
                }
            }
        }
        var ca = d.support = {};
        var ta = d.isXML = function (a) {
            a = a && (a.ownerDocument || a).documentElement;
            return !!a && "HTML" !== a.nodeName
        };
        var ia = d.setDocument = function (a) {
            var d, b;
            a = a ? a.ownerDocument || a : B;
            return a !== w && 9 === a.nodeType && a.documentElement ? (w = a, y = w.documentElement, G = !ta(w), B !== w && (b = w.defaultView) && b.top !==
                b && (b.addEventListener ? b.addEventListener("unload", ja, !1) : b.attachEvent && b.attachEvent("onunload", ja)), ca.attributes = c(function (a) {
                    return a.className = "i", !a.getAttribute("className")
                }), ca.getElementsByTagName = c(function (a) {
                    return a.appendChild(w.createComment("")), !a.getElementsByTagName("*").length
                }), ca.getElementsByClassName = Y.test(w.getElementsByClassName), ca.getById = c(function (a) {
                    return y.appendChild(a).id = H, !w.getElementsByName || !w.getElementsByName(H).length
                }), ca.getById ? (V.find.ID = function (a,
                    d) {
                    if ("undefined" != typeof d.getElementById && G) return (a = d.getElementById(a)) ? [a] : []
                }, V.filter.ID = function (a) {
                    var d = a.replace(aa, da);
                    return function (a) {
                        return a.getAttribute("id") === d
                    }
                }) : (delete V.find.ID, V.filter.ID = function (a) {
                    var d = a.replace(aa, da);
                    return function (a) {
                        return (a = "undefined" != typeof a.getAttributeNode && a.getAttributeNode("id")) && a.value === d
                    }
                }), V.find.TAG = ca.getElementsByTagName ? function (a, d) {
                    return "undefined" != typeof d.getElementsByTagName ? d.getElementsByTagName(a) : ca.qsa ? d.querySelectorAll(a) :
                        void 0
                } : function (a, d) {
                    var b = [],
                        g = 0;
                    d = d.getElementsByTagName(a);
                    if ("*" === a) {
                        for (; a = d[g++];) 1 === a.nodeType && b.push(a);
                        return b
                    }
                    return d
                }, V.find.CLASS = ca.getElementsByClassName && function (a, d) {
                    if ("undefined" != typeof d.getElementsByClassName && G) return d.getElementsByClassName(a)
                }, P = [], t = [], (ca.qsa = Y.test(w.querySelectorAll)) && (c(function (a) {
                    y.appendChild(a).innerHTML = "<a id='" + H + "'></a><select id='" + H + "-\r\\' msallowcapture=''><option selected=''></option></select>";
                    a.querySelectorAll("[msallowcapture^='']").length &&
                        t.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
                    a.querySelectorAll("[selected]").length || t.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
                    a.querySelectorAll("[id~=" + H + "-]").length || t.push("~=");
                    a.querySelectorAll(":checked").length || t.push(":checked");
                    a.querySelectorAll("a#" + H + "+*").length || t.push(".#.+[+~]")
                }), c(function (a) {
                    a.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                    var d = w.createElement("input");
                    d.setAttribute("type", "hidden");
                    a.appendChild(d).setAttribute("name", "D");
                    a.querySelectorAll("[name=d]").length && t.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");
                    2 !== a.querySelectorAll(":enabled").length && t.push(":enabled", ":disabled");
                    y.appendChild(a).disabled = !0;
                    2 !== a.querySelectorAll(":disabled").length && t.push(":enabled", ":disabled");
                    a.querySelectorAll("*,:x");
                    t.push(",.*:")
                })), (ca.matchesSelector = Y.test(ha = y.matches || y.webkitMatchesSelector || y.mozMatchesSelector || y.oMatchesSelector ||
                    y.msMatchesSelector)) && c(function (a) {
                        ca.disconnectedMatch = ha.call(a, "*");
                        ha.call(a, "[s!='']:x");
                        P.push("!=", ":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")
                    }), t = t.length && new RegExp(t.join("|")),
                P = P.length && new RegExp(P.join("|")), d = Y.test(y.compareDocumentPosition), Z = d || Y.test(y.contains) ? function (a, d) {
                    var b = 9 === a.nodeType ? a.documentElement : a;
                    d = d && d.parentNode;
                    return a === d || !(!d || 1 !== d.nodeType || !(b.contains ? b.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
                } : function (a, d) {
                    if (d)
                        for (; d = d.parentNode;)
                            if (d === a) return !0;
                    return !1
                }, F = d ? function (a, d) {
                    if (a === d) return M = !0, 0;
                    var b = !a.compareDocumentPosition - !d.compareDocumentPosition;
                    return b ? b : (b = (a.ownerDocument || a) === (d.ownerDocument ||
                        d) ? a.compareDocumentPosition(d) : 1, 1 & b || !ca.sortDetached && d.compareDocumentPosition(a) === b ? a === w || a.ownerDocument === B && Z(B, a) ? -1 : d === w || d.ownerDocument === B && Z(B, d) ? 1 : ea ? D(ea, a) - D(ea, d) : 0 : 4 & b ? -1 : 1)
                } : function (a, d) {
                    if (a === d) return M = !0, 0;
                    var b = 0,
                        g = a.parentNode,
                        c = d.parentNode,
                        m = [a],
                        x = [d];
                    if (!g || !c) return a === w ? -1 : d === w ? 1 : g ? -1 : c ? 1 : ea ? D(ea, a) - D(ea, d) : 0;
                    if (g === c) return p(a, d);
                    for (; a = a.parentNode;) m.unshift(a);
                    for (a = d; a = a.parentNode;) x.unshift(a);
                    for (; m[b] === x[b];) b++;
                    return b ? p(m[b], x[b]) : m[b] === B ? -1 : x[b] ===
                        B ? 1 : 0
                }, w) : w
        };
        d.matches = function (a, b) {
            return d(a, null, null, b)
        };
        d.matchesSelector = function (a, b) {
            if ((a.ownerDocument || a) !== w && ia(a), b = b.replace(O, "='$1']"), !(!ca.matchesSelector || !G || T[b + " "] || P && P.test(b) || t && t.test(b))) try {
                var g = ha.call(a, b);
                if (g || ca.disconnectedMatch || a.document && 11 !== a.document.nodeType) return g
            } catch (jc) { }
            return 0 < d(b, w, null, [a]).length
        };
        d.contains = function (a, d) {
            return (a.ownerDocument || a) !== w && ia(a), Z(a, d)
        };
        d.attr = function (a, d) {
            (a.ownerDocument || a) !== w && ia(a);
            var b = V.attrHandle[d.toLowerCase()];
            b = b && ba.call(V.attrHandle, d.toLowerCase()) ? b(a, d, !G) : void 0;
            return void 0 !== b ? b : ca.attributes || !G ? a.getAttribute(d) : (b = a.getAttributeNode(d)) && b.specified ? b.value : null
        };
        d.escape = function (a) {
            return (a + "").replace(wa, Ba)
        };
        d.error = function (a) {
            throw Error("Syntax error, unrecognized expression: " + a);
        };
        d.uniqueSort = function (a) {
            var d, b = [],
                g = 0,
                c = 0;
            if (M = !ca.detectDuplicates, ea = !ca.sortStable && a.slice(0), a.sort(F), M) {
                for (; d = a[c++];) d === a[c] && (g = b.push(c));
                for (; g--;) a.splice(b[g], 1)
            }
            return ea = null, a
        };
        var sa =
            d.getText = function (a) {
                var d, b = "",
                    g = 0;
                if (d = a.nodeType)
                    if (1 === d || 9 === d || 11 === d) {
                        if ("string" == typeof a.textContent) return a.textContent;
                        for (a = a.firstChild; a; a = a.nextSibling) b += sa(a)
                    } else {
                        if (3 === d || 4 === d) return a.nodeValue
                    }
                else
                    for (; d = a[g++];) b += sa(d);
                return b
            };
        var V = d.selectors = {
            cacheLength: 50,
            createPseudo: g,
            match: xa,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function (a) {
                    return a[1] =
                        a[1].replace(aa, da), a[3] = (a[3] || a[4] || a[5] || "").replace(aa, da), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                },
                CHILD: function (a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || d.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && d.error(a[0]), a
                },
                PSEUDO: function (a) {
                    var d, b = !a[6] && a[2];
                    return xa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : b && X.test(b) && (d = na(b, !0)) && (d = b.indexOf(")", b.length - d) - b.length) && (a[0] = a[0].slice(0,
                        d), a[2] = b.slice(0, d)), a.slice(0, 3))
                }
            },
            filter: {
                TAG: function (a) {
                    var d = a.replace(aa, da).toLowerCase();
                    return "*" === a ? function () {
                        return !0
                    } : function (a) {
                        return a.nodeName && a.nodeName.toLowerCase() === d
                    }
                },
                CLASS: function (a) {
                    var d = A[a + " "];
                    return d || (d = new RegExp("(^|[\\x20\\t\\r\\n\\f])" + a + "([\\x20\\t\\r\\n\\f]|$)"), A(a, function (a) {
                        return d.test("string" == typeof a.className && a.className || "undefined" != typeof a.getAttribute && a.getAttribute("class") || "")
                    }))
                },
                ATTR: function (a, b, g) {
                    return function (c) {
                        c = d.attr(c,
                            a);
                        return null == c ? "!=" === b : !b || (c += "", "=" === b ? c === g : "!=" === b ? c !== g : "^=" === b ? g && 0 === c.indexOf(g) : "*=" === b ? g && -1 < c.indexOf(g) : "$=" === b ? g && c.slice(-g.length) === g : "~=" === b ? -1 < (" " + c.replace(R, " ") + " ").indexOf(g) : "|=" === b && (c === g || c.slice(0, g.length + 1) === g + "-"))
                    }
                },
                CHILD: function (a, d, b, g, c) {
                    var m = "nth" !== a.slice(0, 3),
                        p = "last" !== a.slice(-4),
                        x = "of-type" === d;
                    return 1 === g && 0 === c ? function (a) {
                        return !!a.parentNode
                    } : function (d, b, r) {
                        var e, v;
                        b = m !== p ? "nextSibling" : "previousSibling";
                        var k = d.parentNode,
                            n = x && d.nodeName.toLowerCase();
                        r = !r && !x;
                        var K = !1;
                        if (k) {
                            if (m) {
                                for (; b;) {
                                    for (e = d; e = e[b];)
                                        if (x ? e.nodeName.toLowerCase() === n : 1 === e.nodeType) return !1;
                                    var u = b = "only" === a && !u && "nextSibling"
                                }
                                return !0
                            }
                            if (u = [p ? k.firstChild : k.lastChild], p && r) {
                                e = k;
                                var h = e[H] || (e[H] = {});
                                var I = h[e.uniqueID] || (h[e.uniqueID] = {});
                                var S = I[a] || [];
                                K = (v = S[0] === C && S[1]) && S[2];
                                for (e = v && k.childNodes[v]; e = ++v && e && e[b] || (K = v = 0) || u.pop();)
                                    if (1 === e.nodeType && ++K && e === d) {
                                        I[a] = [C, v, K];
                                        break
                                    }
                            } else if (r && (e = d, h = e[H] || (e[H] = {}), I = h[e.uniqueID] || (h[e.uniqueID] = {}), S = I[a] || [], v =
                                S[0] === C && S[1], K = v), !1 === K)
                                for (;
                                    (e = ++v && e && e[b] || (K = v = 0) || u.pop()) && ((x ? e.nodeName.toLowerCase() !== n : 1 !== e.nodeType) || !++K || (r && (h = e[H] || (e[H] = {}), I = h[e.uniqueID] || (h[e.uniqueID] = {}), I[a] = [C, K]), e !== d)););
                            return K -= c, K === g || 0 === K % g && 0 <= K / g
                        }
                    }
                },
                PSEUDO: function (a, b) {
                    var c, m = V.pseudos[a] || V.setFilters[a.toLowerCase()] || d.error("unsupported pseudo: " + a);
                    return m[H] ? m(b) : 1 < m.length ? (c = [a, a, "", b], V.setFilters.hasOwnProperty(a.toLowerCase()) ? g(function (a, d) {
                        for (var g, c = m(a, b), p = c.length; p--;) g = D(a, c[p]),
                            a[g] = !(d[g] = c[p])
                    }) : function (a) {
                        return m(a, 0, c)
                    }) : m
                }
            },
            pseudos: {
                not: g(function (a) {
                    var d = [],
                        b = [],
                        c = l(a.replace(la, "$1"));
                    return c[H] ? g(function (a, d, b, g) {
                        var m;
                        b = c(a, null, g, []);
                        for (g = a.length; g--;)(m = b[g]) && (a[g] = !(d[g] = m))
                    }) : function (a, g, m) {
                        return d[0] = a, c(d, null, m, b), d[0] = null, !b.pop()
                    }
                }),
                has: g(function (a) {
                    return function (b) {
                        return 0 < d(a, b).length
                    }
                }),
                contains: g(function (a) {
                    return a = a.replace(aa, da),
                        function (d) {
                            return -1 < (d.textContent || d.innerText || sa(d)).indexOf(a)
                        }
                }),
                lang: g(function (a) {
                    return Ga.test(a ||
                        "") || d.error("unsupported lang: " + a), a = a.replace(aa, da).toLowerCase(),
                        function (d) {
                            var b;
                            do
                                if (b = G ? d.lang : d.getAttribute("xml:lang") || d.getAttribute("lang")) return b = b.toLowerCase(), b === a || 0 === b.indexOf(a + "-"); while ((d = d.parentNode) && 1 === d.nodeType);
                            return !1
                        }
                }),
                target: function (d) {
                    var b = a.location && a.location.hash;
                    return b && b.slice(1) === d.id
                },
                root: function (a) {
                    return a === y
                },
                focus: function (a) {
                    return a === w.activeElement && (!w.hasFocus || w.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                enabled: e(!1),
                disabled: e(!0),
                checked: function (a) {
                    var d = a.nodeName.toLowerCase();
                    return "input" === d && !!a.checked || "option" === d && !!a.selected
                },
                selected: function (a) {
                    return a.parentNode && a.parentNode.selectedIndex, !0 === a.selected
                },
                empty: function (a) {
                    for (a = a.firstChild; a; a = a.nextSibling)
                        if (6 > a.nodeType) return !1;
                    return !0
                },
                parent: function (a) {
                    return !V.pseudos.empty(a)
                },
                header: function (a) {
                    return Ia.test(a.nodeName)
                },
                input: function (a) {
                    return Ja.test(a.nodeName)
                },
                button: function (a) {
                    var d = a.nodeName.toLowerCase();
                    return "input" === d && "button" ===
                        a.type || "button" === d
                },
                text: function (a) {
                    var d;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (d = a.getAttribute("type")) || "text" === d.toLowerCase())
                },
                first: v(function () {
                    return [0]
                }),
                last: v(function (a, d) {
                    return [d - 1]
                }),
                eq: v(function (a, d, b) {
                    return [0 > b ? b + d : b]
                }),
                even: v(function (a, d) {
                    for (var b = 0; b < d; b += 2) a.push(b);
                    return a
                }),
                odd: v(function (a, d) {
                    for (var b = 1; b < d; b += 2) a.push(b);
                    return a
                }),
                lt: v(function (a, d, b) {
                    for (d = 0 > b ? b + d : b; 0 <= --d;) a.push(d);
                    return a
                }),
                gt: v(function (a, d, b) {
                    for (b = 0 > b ? b + d : b; ++b <
                        d;) a.push(b);
                    return a
                })
            }
        };
        V.pseudos.nth = V.pseudos.eq;
        for (q in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) V.pseudos[q] = x(q);
        for (q in {
            submit: !0,
            reset: !0
        }) V.pseudos[q] = r(q);
        n.prototype = V.filters = V.pseudos;
        V.setFilters = new n;
        var na = d.tokenize = function (a, b) {
            var g, c, m, p, x;
            if (p = ka[a + " "]) return b ? 0 : p.slice(0);
            p = a;
            var r = [];
            for (x = V.preFilter; p;) {
                e && !(g = Q.exec(p)) || (g && (p = p.slice(g[0].length) || p), r.push(c = []));
                var e = !1;
                (g = qa.exec(p)) && (e = g.shift(), c.push({
                    value: e,
                    type: g[0].replace(la, " ")
                }), p = p.slice(e.length));
                for (m in V.filter) !(g = xa[m].exec(p)) || x[m] && !(g = x[m](g)) || (e = g.shift(), c.push({
                    value: e,
                    type: m,
                    matches: g
                }), p = p.slice(e.length));
                if (!e) break
            }
            return b ? p.length : p ? d.error(a) : ka(a, r).slice(0)
        };
        return l = d.compile = function (a, d) {
            var b, g = [],
                c = [],
                m = T[a + " "];
            if (!m) {
                d || (d = na(a));
                for (b = d.length; b--;) m = E(d[b]), m[H] ? g.push(m) : c.push(m);
                m = T(a, f(c, g));
                m.selector = a
            }
            return m
        }, U = d.select = function (a, d, b, g) {
            var c, m, p, x, r, e = "function" == typeof a && a,
                v = !g && na(a = e.selector || a);
            if (b = b || [], 1 === v.length) {
                if (m = v[0] = v[0].slice(0),
                    2 < m.length && "ID" === (p = m[0]).type && ca.getById && 9 === d.nodeType && G && V.relative[m[1].type]) {
                    if (d = (V.find.ID(p.matches[0].replace(aa, da), d) || [])[0], !d) return b;
                    e && (d = d.parentNode);
                    a = a.slice(m.shift().value.length)
                }
                for (c = xa.needsContext.test(a) ? 0 : m.length; c-- && (p = m[c], !V.relative[x = p.type]);)
                    if ((r = V.find[x]) && (g = r(p.matches[0].replace(aa, da), va.test(m[0].type) && k(d.parentNode) || d))) {
                        if (m.splice(c, 1), a = g.length && u(m), !a) return pa.apply(b, g), b;
                        break
                    }
            }
            return (e || l(a, v))(g, d, !G, b, !d || va.test(a) && k(d.parentNode) ||
                d), b
        }, ca.sortStable = H.split("").sort(F).join("") === H, ca.detectDuplicates = !!M, ia(), ca.sortDetached = c(function (a) {
            return 1 & a.compareDocumentPosition(w.createElement("fieldset"))
        }), c(function (a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
        }) || m("type|href|height|width", function (a, d, b) {
            if (!b) return a.getAttribute(d, "type" === d.toLowerCase() ? 1 : 2)
        }), ca.attributes && c(function (a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
        }) ||
            m("value", function (a, d, b) {
                if (!b && "input" === a.nodeName.toLowerCase()) return a.defaultValue
            }), c(function (a) {
                return null == a.getAttribute("disabled")
            }) || m("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", function (a, d, b) {
                var g;
                if (!b) return !0 === a[d] ? d.toLowerCase() : (g = a.getAttributeNode(d)) && g.specified ? g.value : null
            }), d
    }(b);
    n.find = ia;
    n.expr = ia.selectors;
    n.expr[":"] = n.expr.pseudos;
    n.uniqueSort = n.unique = ia.uniqueSort;
    n.text = ia.getText;
    n.isXMLDoc = ia.isXML;
    n.contains = ia.contains;
    n.escapeSelector = ia.escape;
    var ya = function (a, d, b) {
        for (var g = [], c = void 0 !== b;
            (a = a[d]) && 9 !== a.nodeType;)
            if (1 === a.nodeType) {
                if (c && n(a).is(b)) break;
                g.push(a)
            } return g
    },
        bb = function (a, d) {
            for (var b = []; a; a = a.nextSibling) 1 === a.nodeType && a !== d && b.push(a);
            return b
        },
        cb = n.expr.match.needsContext,
        db = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
        pb = /^.[^:#\[\.,]*$/;
    n.filter = function (a, d, b) {
        var g = d[0];
        return b && (a = ":not(" + a + ")"), 1 === d.length && 1 === g.nodeType ?
            n.find.matchesSelector(g, a) ? [g] : [] : n.find.matches(a, n.grep(d, function (a) {
                return 1 === a.nodeType
            }))
    };
    n.fn.extend({
        find: function (a) {
            var d, b = this.length,
                g = this;
            if ("string" != typeof a) return this.pushStack(n(a).filter(function () {
                for (d = 0; d < b; d++)
                    if (n.contains(g[d], this)) return !0
            }));
            var c = this.pushStack([]);
            for (d = 0; d < b; d++) n.find(a, g[d], c);
            return 1 < b ? n.uniqueSort(c) : c
        },
        filter: function (a) {
            return this.pushStack(h(this, a || [], !1))
        },
        not: function (a) {
            return this.pushStack(h(this, a || [], !0))
        },
        is: function (a) {
            return !!h(this,
                "string" == typeof a && cb.test(a) ? n(a) : a || [], !1).length
        }
    });
    var Eb = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
    (n.fn.init = function (a, d, b) {
        var g, c;
        if (!a) return this;
        if (b = b || Fb, "string" == typeof a) {
            if (g = "<" === a[0] && ">" === a[a.length - 1] && 3 <= a.length ? [null, a, null] : Eb.exec(a), !g || !g[1] && d) return !d || d.jquery ? (d || b).find(a) : this.constructor(d).find(a);
            if (g[1]) {
                if (d = d instanceof n ? d[0] : d, n.merge(this, n.parseHTML(g[1], d && d.nodeType ? d.ownerDocument || d : J, !0)), db.test(g[1]) && n.isPlainObject(d))
                    for (g in d) n.isFunction(this[g]) ?
                        this[g](d[g]) : this.attr(g, d[g]);
                return this
            }
            return c = J.getElementById(g[2]), c && (this[0] = c, this.length = 1), this
        }
        return a.nodeType ? (this[0] = a, this.length = 1, this) : n.isFunction(a) ? void 0 !== b.ready ? b.ready(a) : a(n) : n.makeArray(a, this)
    }).prototype = n.fn;
    var Fb = n(J);
    var Gb = /^(?:parents|prev(?:Until|All))/,
        Hb = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    n.fn.extend({
        has: function (a) {
            var d = n(a, this),
                b = d.length;
            return this.filter(function () {
                for (var a = 0; a < b; a++)
                    if (n.contains(this, d[a])) return !0
            })
        },
        closest: function (a,
            d) {
            var b, g = 0,
                c = this.length,
                m = [],
                p = "string" != typeof a && n(a);
            if (!cb.test(a))
                for (; g < c; g++)
                    for (b = this[g]; b && b !== d; b = b.parentNode)
                        if (11 > b.nodeType && (p ? -1 < p.index(b) : 1 === b.nodeType && n.find.matchesSelector(b, a))) {
                            m.push(b);
                            break
                        } return this.pushStack(1 < m.length ? n.uniqueSort(m) : m)
        },
        index: function (a) {
            return a ? "string" == typeof a ? X.call(n(a), this[0]) : X.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function (a, d) {
            return this.pushStack(n.uniqueSort(n.merge(this.get(),
                n(a, d))))
        },
        addBack: function (a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
        }
    });
    n.each({
        parent: function (a) {
            return (a = a.parentNode) && 11 !== a.nodeType ? a : null
        },
        parents: function (a) {
            return ya(a, "parentNode")
        },
        parentsUntil: function (a, d, b) {
            return ya(a, "parentNode", b)
        },
        next: function (a) {
            return q(a, "nextSibling")
        },
        prev: function (a) {
            return q(a, "previousSibling")
        },
        nextAll: function (a) {
            return ya(a, "nextSibling")
        },
        prevAll: function (a) {
            return ya(a, "previousSibling")
        },
        nextUntil: function (a, d, b) {
            return ya(a,
                "nextSibling", b)
        },
        prevUntil: function (a, d, b) {
            return ya(a, "previousSibling", b)
        },
        siblings: function (a) {
            return bb((a.parentNode || {}).firstChild, a)
        },
        children: function (a) {
            return bb(a.firstChild)
        },
        contents: function (a) {
            return a.contentDocument || n.merge([], a.childNodes)
        }
    }, function (a, d) {
        n.fn[a] = function (b, g) {
            var c = n.map(this, d, b);
            return "Until" !== a.slice(-5) && (g = b), g && "string" == typeof g && (c = n.filter(g, c)), 1 < this.length && (Hb[a] || n.uniqueSort(c), Gb.test(a) && c.reverse()), this.pushStack(c)
        }
    });
    var ja = /\S+/g;
    n.Callbacks =
        function (a) {
            a = "string" == typeof a ? c(a) : n.extend({}, a);
            var d, b, g, m, p = [],
                r = [],
                e = -1,
                x = function () {
                    m = a.once;
                    for (g = d = !0; r.length; e = -1)
                        for (b = r.shift(); ++e < p.length;) !1 === p[e].apply(b[0], b[1]) && a.stopOnFalse && (e = p.length, b = !1);
                    a.memory || (b = !1);
                    d = !1;
                    m && (p = b ? [] : "")
                },
                v = {
                    add: function () {
                        return p && (b && !d && (e = p.length - 1, r.push(b)), function tb(d) {
                            n.each(d, function (d, b) {
                                n.isFunction(b) ? a.unique && v.has(b) || p.push(b) : b && b.length && "string" !== n.type(b) && tb(b)
                            })
                        }(arguments), b && !d && x()), this
                    },
                    remove: function () {
                        return n.each(arguments,
                            function (a, d) {
                                for (var b; - 1 < (b = n.inArray(d, p, b));) p.splice(b, 1), b <= e && e--
                            }), this
                    },
                    has: function (a) {
                        return a ? -1 < n.inArray(a, p) : 0 < p.length
                    },
                    empty: function () {
                        return p && (p = []), this
                    },
                    disable: function () {
                        return m = r = [], p = b = "", this
                    },
                    disabled: function () {
                        return !p
                    },
                    lock: function () {
                        return m = r = [], b || d || (p = b = ""), this
                    },
                    locked: function () {
                        return !!m
                    },
                    fireWith: function (a, b) {
                        return m || (b = b || [], b = [a, b.slice ? b.slice() : b], r.push(b), d || x()), this
                    },
                    fire: function () {
                        return v.fireWith(this, arguments), this
                    },
                    fired: function () {
                        return !!g
                    }
                };
            return v
        };
    n.extend({
        Deferred: function (a) {
            var d = [
                ["notify", "progress", n.Callbacks("memory"), n.Callbacks("memory"), 2],
                ["resolve", "done", n.Callbacks("once memory"), n.Callbacks("once memory"), 0, "resolved"],
                ["reject", "fail", n.Callbacks("once memory"), n.Callbacks("once memory"), 1, "rejected"]
            ],
                g = "pending",
                c = {
                    state: function () {
                        return g
                    },
                    always: function () {
                        return m.done(arguments).fail(arguments), this
                    },
                    "catch": function (a) {
                        return c.then(null, a)
                    },
                    pipe: function () {
                        var a = arguments;
                        return n.Deferred(function (b) {
                            n.each(d,
                                function (d, g) {
                                    var c = n.isFunction(a[g[4]]) && a[g[4]];
                                    m[g[1]](function () {
                                        var a = c && c.apply(this, arguments);
                                        a && n.isFunction(a.promise) ? a.promise().progress(b.notify).done(b.resolve).fail(b.reject) : b[g[0] + "With"](this, c ? [a] : arguments)
                                    })
                                });
                            a = null
                        }).promise()
                    },
                    then: function (a, g, c) {
                        function m(a, d, g, c) {
                            return function () {
                                var r = this,
                                    x = arguments,
                                    v = function () {
                                        var b;
                                        if (!(a < p)) {
                                            if (b = g.apply(r, x), b === d.promise()) throw new TypeError("Thenable self-resolution");
                                            var v = b && ("object" == typeof b || "function" == typeof b) && b.then;
                                            n.isFunction(v) ? c ? v.call(b, m(p, d, e, c), m(p, d, k, c)) : (p++ , v.call(b, m(p, d, e, c), m(p, d, k, c), m(p, d, e, d.notifyWith))) : (g !== e && (r = void 0, x = [b]), (c || d.resolveWith)(r, x))
                                        }
                                    },
                                    u = c ? v : function () {
                                        try {
                                            v()
                                        } catch (ab) {
                                            n.Deferred.exceptionHook && n.Deferred.exceptionHook(ab, u.stackTrace), a + 1 >= p && (g !== k && (r = void 0, x = [ab]), d.rejectWith(r, x))
                                        }
                                    };
                                a ? u() : (n.Deferred.getStackHook && (u.stackTrace = n.Deferred.getStackHook()), b.setTimeout(u))
                            }
                        }
                        var p = 0;
                        return n.Deferred(function (b) {
                            d[0][3].add(m(0, b, n.isFunction(c) ? c : e, b.notifyWith));
                            d[1][3].add(m(0, b, n.isFunction(a) ? a : e));
                            d[2][3].add(m(0, b, n.isFunction(g) ? g : k))
                        }).promise()
                    },
                    promise: function (a) {
                        return null != a ? n.extend(a, c) : c
                    }
                },
                m = {};
            return n.each(d, function (a, b) {
                var p = b[2],
                    r = b[5];
                c[b[1]] = p.add;
                r && p.add(function () {
                    g = r
                }, d[3 - a][2].disable, d[0][2].lock);
                p.add(b[3].fire);
                m[b[0]] = function () {
                    return m[b[0] + "With"](this === m ? void 0 : this, arguments), this
                };
                m[b[0] + "With"] = p.fireWith
            }), c.promise(m), a && a.call(m, m), m
        },
        when: function (a) {
            var d = arguments.length,
                b = d,
                g = Array(b),
                c = qa.call(arguments),
                m = n.Deferred(),
                p = function (a) {
                    return function (b) {
                        g[a] = this;
                        c[a] = 1 < arguments.length ? qa.call(arguments) : b;
                        --d || m.resolveWith(g, c)
                    }
                };
            if (1 >= d && (z(a, m.done(p(b)).resolve, m.reject), "pending" === m.state() || n.isFunction(c[b] && c[b].then))) return m.then();
            for (; b--;) z(c[b], p(b), m.reject);
            return m.promise()
        }
    });
    var Ib = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
    n.Deferred.exceptionHook = function (a, d) {
        b.console && b.console.warn && a && Ib.test(a.name) && b.console.warn("jQuery.Deferred exception: " + a.message,
            a.stack, d)
    };
    n.readyException = function (a) {
        b.setTimeout(function () {
            throw a;
        })
    };
    var Pa = n.Deferred();
    n.fn.ready = function (a) {
        return Pa.then(a)["catch"](function (a) {
            n.readyException(a)
        }), this
    };
    n.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function (a) {
            a ? n.readyWait++ : n.ready(!0)
        },
        ready: function (a) {
            (!0 === a ? --n.readyWait : n.isReady) || (n.isReady = !0, !0 !== a && 0 < --n.readyWait || Pa.resolveWith(J, [n]))
        }
    });
    n.ready.then = Pa.then;
    "complete" === J.readyState || "loading" !== J.readyState && !J.documentElement.doScroll ? b.setTimeout(n.ready) :
        (J.addEventListener("DOMContentLoaded", E), b.addEventListener("load", E));
    var ra = function (a, d, b, g, c, m, p) {
        var r = 0,
            e = a.length,
            x = null == b;
        if ("object" === n.type(b))
            for (r in c = !0, b) ra(a, d, r, b[r], !0, m, p);
        else if (void 0 !== g && (c = !0, n.isFunction(g) || (p = !0), x && (p ? (d.call(a, g), d = null) : (x = d, d = function (a, d, b) {
            return x.call(n(a), b)
        })), d))
            for (; r < e; r++) d(a[r], b, p ? g : g.call(a[r], r, d(a[r], b)));
        return c ? a : x ? d.call(a) : e ? d(a[0], b) : m
    },
        Ka = function (a) {
            return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType
        };
    N.uid = 1;
    N.prototype = {
        cache: function (a) {
            var d =
                a[this.expando];
            return d || (d = {}, Ka(a) && (a.nodeType ? a[this.expando] = d : Object.defineProperty(a, this.expando, {
                value: d,
                configurable: !0
            }))), d
        },
        set: function (a, d, b) {
            var g;
            a = this.cache(a);
            if ("string" == typeof d) a[n.camelCase(d)] = b;
            else
                for (g in d) a[n.camelCase(g)] = d[g];
            return a
        },
        get: function (a, d) {
            return void 0 === d ? this.cache(a) : a[this.expando] && a[this.expando][n.camelCase(d)]
        },
        access: function (a, d, b) {
            return void 0 === d || d && "string" == typeof d && void 0 === b ? this.get(a, d) : (this.set(a, d, b), void 0 !== b ? b : d)
        },
        remove: function (a,
            d) {
            var b, g = a[this.expando];
            if (void 0 !== g) {
                if (void 0 !== d)
                    for (n.isArray(d) ? d = d.map(n.camelCase) : (d = n.camelCase(d), d = d in g ? [d] : d.match(ja) || []), b = d.length; b--;) delete g[d[b]];
                (void 0 === d || n.isEmptyObject(g)) && (a.nodeType ? a[this.expando] = void 0 : delete a[this.expando])
            }
        },
        hasData: function (a) {
            a = a[this.expando];
            return void 0 !== a && !n.isEmptyObject(a)
        }
    };
    var Q = new N,
        aa = new N,
        rb = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        qb = /[A-Z]/g;
    n.extend({
        hasData: function (a) {
            return aa.hasData(a) || Q.hasData(a)
        },
        data: function (a, d, b) {
            return aa.access(a,
                d, b)
        },
        removeData: function (a, d) {
            aa.remove(a, d)
        },
        _data: function (a, d, b) {
            return Q.access(a, d, b)
        },
        _removeData: function (a, d) {
            Q.remove(a, d)
        }
    });
    n.fn.extend({
        data: function (a, d) {
            var b, g, c, m = this[0],
                p = m && m.attributes;
            if (void 0 === a) {
                if (this.length && (c = aa.get(m), 1 === m.nodeType && !Q.get(m, "hasDataAttrs"))) {
                    for (b = p.length; b--;) p[b] && (g = p[b].name, 0 === g.indexOf("data-") && (g = n.camelCase(g.slice(5)), M(m, g, c[g])));
                    Q.set(m, "hasDataAttrs", !0)
                }
                return c
            }
            return "object" == typeof a ? this.each(function () {
                aa.set(this, a)
            }) : ra(this,
                function (d) {
                    var b;
                    if (m && void 0 === d) {
                        if ((b = aa.get(m, a), void 0 !== b) || (b = M(m, a), void 0 !== b)) return b
                    } else this.each(function () {
                        aa.set(this, a, d)
                    })
                }, null, d, 1 < arguments.length, null, !0)
        },
        removeData: function (a) {
            return this.each(function () {
                aa.remove(this, a)
            })
        }
    });
    n.extend({
        queue: function (a, d, b) {
            var g;
            if (a) return d = (d || "fx") + "queue", g = Q.get(a, d), b && (!g || n.isArray(b) ? g = Q.access(a, d, n.makeArray(b)) : g.push(b)), g || []
        },
        dequeue: function (a, d) {
            d = d || "fx";
            var b = n.queue(a, d),
                g = b.length,
                c = b.shift(),
                m = n._queueHooks(a, d),
                p = function () {
                    n.dequeue(a, d)
                };
            "inprogress" === c && (c = b.shift(), g--);
            c && ("fx" === d && b.unshift("inprogress"), delete m.stop, c.call(a, p, m));
            !g && m && m.empty.fire()
        },
        _queueHooks: function (a, d) {
            var b = d + "queueHooks";
            return Q.get(a, b) || Q.access(a, b, {
                empty: n.Callbacks("once memory").add(function () {
                    Q.remove(a, [d + "queue", b])
                })
            })
        }
    });
    n.fn.extend({
        queue: function (a, d) {
            var b = 2;
            return "string" != typeof a && (d = a, a = "fx", b--), arguments.length < b ? n.queue(this[0], a) : void 0 === d ? this : this.each(function () {
                var b = n.queue(this, a, d);
                n._queueHooks(this,
                    a);
                "fx" === a && "inprogress" !== b[0] && n.dequeue(this, a)
            })
        },
        dequeue: function (a) {
            return this.each(function () {
                n.dequeue(this, a)
            })
        },
        clearQueue: function (a) {
            return this.queue(a || "fx", [])
        },
        promise: function (a, d) {
            var b, g = 1,
                c = n.Deferred(),
                m = this,
                p = this.length,
                r = function () {
                    --g || c.resolveWith(m, [m])
                };
            "string" != typeof a && (d = a, a = void 0);
            for (a = a || "fx"; p--;)(b = Q.get(m[p], a + "queueHooks")) && b.empty && (g++ , b.empty.add(r));
            return r(), c.promise(d)
        }
    });
    var eb = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        za = new RegExp("^(?:([+-])=|)(" +
            eb + ")([a-z%]*)$", "i"),
        ta = ["Top", "Right", "Bottom", "Left"],
        Fa = function (a, d) {
            return a = d || a, "none" === a.style.display || "" === a.style.display && n.contains(a.ownerDocument, a) && "none" === n.css(a, "display")
        },
        fb = function (a, d, b, g) {
            var c, m = {};
            for (c in d) m[c] = a.style[c], a.style[c] = d[c];
            b = b.apply(a, g || []);
            for (c in d) a.style[c] = m[c];
            return b
        },
        Va = {};
    n.fn.extend({
        show: function () {
            return y(this, !0)
        },
        hide: function () {
            return y(this)
        },
        toggle: function (a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function () {
                Fa(this) ?
                    n(this).show() : n(this).hide()
            })
        }
    });
    var gb = /^(?:checkbox|radio)$/i,
        Wa = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
        Xa = /^$|\/(?:java|ecma)script/i,
        da = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    da.optgroup = da.option;
    da.tbody = da.tfoot = da.colgroup = da.caption = da.thead;
    da.th = da.td;
    var ub = /<|&#?\w+;/;
    ! function () {
        var a =
            J.createDocumentFragment().appendChild(J.createElement("div")),
            d = J.createElement("input");
        d.setAttribute("type", "radio");
        d.setAttribute("checked", "checked");
        d.setAttribute("name", "t");
        a.appendChild(d);
        W.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked;
        a.innerHTML = "<textarea>x</textarea>";
        W.noCloneChecked = !!a.cloneNode(!0).lastChild.defaultValue
    }();
    var La = J.documentElement,
        Jb = /^key/,
        Kb = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        hb = /^([^.]*)(?:\.(.+)|)/;
    n.event = {
        global: {},
        add: function (a,
            d, b, g, c) {
            var m, p, r, e, x, v, k, u;
            if (e = Q.get(a))
                for (b.handler && (m = b, b = m.handler, c = m.selector), c && n.find.matchesSelector(La, c), b.guid || (b.guid = n.guid++), (r = e.events) || (r = e.events = {}), (p = e.handle) || (p = e.handle = function (d) {
                    return "undefined" != typeof n && n.event.triggered !== d.type ? n.event.dispatch.apply(a, arguments) : void 0
                }), d = (d || "").match(ja) || [""], e = d.length; e--;) {
                    var h = hb.exec(d[e]) || [];
                    var I = u = h[1];
                    h = (h[2] || "").split(".").sort();
                    I && (v = n.event.special[I] || {}, I = (c ? v.delegateType : v.bindType) || I, v = n.event.special[I] || {}, x = n.extend({
                        type: I,
                        origType: u,
                        data: g,
                        handler: b,
                        guid: b.guid,
                        selector: c,
                        needsContext: c && n.expr.match.needsContext.test(c),
                        namespace: h.join(".")
                    }, m), (k = r[I]) || (k = r[I] = [], k.delegateCount = 0, v.setup && !1 !== v.setup.call(a, g, h, p) || a.addEventListener && a.addEventListener(I, p)), v.add && (v.add.call(a, x), x.handler.guid || (x.handler.guid = b.guid)), c ? k.splice(k.delegateCount++, 0, x) : k.push(x), n.event.global[I] = !0)
                }
        },
        remove: function (a, d, b, g, c) {
            var m, p, r, e, x, v, k, u, h = Q.hasData(a) && Q.get(a);
            if (h && (e = h.events)) {
                d = (d ||
                    "").match(ja) || [""];
                for (x = d.length; x--;)
                    if (r = hb.exec(d[x]) || [], v = u = r[1], k = (r[2] || "").split(".").sort(), v) {
                        var I = n.event.special[v] || {};
                        v = (g ? I.delegateType : I.bindType) || v;
                        var K = e[v] || [];
                        r = r[2] && new RegExp("(^|\\.)" + k.join("\\.(?:.*\\.|)") + "(\\.|$)");
                        for (p = m = K.length; m--;) {
                            var S = K[m];
                            !c && u !== S.origType || b && b.guid !== S.guid || r && !r.test(S.namespace) || g && g !== S.selector && ("**" !== g || !S.selector) || (K.splice(m, 1), S.selector && K.delegateCount-- , I.remove && I.remove.call(a, S))
                        }
                        p && !K.length && (I.teardown && !1 !== I.teardown.call(a,
                            k, h.handle) || n.removeEvent(a, v, h.handle), delete e[v])
                    } else
                        for (v in e) n.event.remove(a, v + d[x], b, g, !0);
                n.isEmptyObject(e) && Q.remove(a, "handle events")
            }
        },
        dispatch: function (a) {
            var d = n.event.fix(a),
                b, g, c, m, p = Array(arguments.length);
            var r = (Q.get(this, "events") || {})[d.type] || [];
            var e = n.event.special[d.type] || {};
            p[0] = d;
            for (b = 1; b < arguments.length; b++) p[b] = arguments[b];
            if (d.delegateTarget = this, !e.preDispatch || !1 !== e.preDispatch.call(this, d)) {
                var v = n.event.handlers.call(this, d, r);
                for (b = 0;
                    (c = v[b++]) && !d.isPropagationStopped();)
                    for (d.currentTarget =
                        c.elem, r = 0;
                        (m = c.handlers[r++]) && !d.isImmediatePropagationStopped();) d.rnamespace && !d.rnamespace.test(m.namespace) || (d.handleObj = m, d.data = m.data, g = ((n.event.special[m.origType] || {}).handle || m.handler).apply(c.elem, p), void 0 !== g && !1 === (d.result = g) && (d.preventDefault(), d.stopPropagation()));
                return e.postDispatch && e.postDispatch.call(this, d), d.result
            }
        },
        handlers: function (a, d) {
            var b, g = [],
                c = d.delegateCount,
                m = a.target;
            if (c && m.nodeType && ("click" !== a.type || isNaN(a.button) || 1 > a.button))
                for (; m !== this; m = m.parentNode ||
                    this)
                    if (1 === m.nodeType && (!0 !== m.disabled || "click" !== a.type)) {
                        var p = [];
                        for (b = 0; b < c; b++) {
                            var r = d[b];
                            var e = r.selector + " ";
                            void 0 === p[e] && (p[e] = r.needsContext ? -1 < n(e, this).index(m) : n.find(e, this, null, [m]).length);
                            p[e] && p.push(r)
                        }
                        p.length && g.push({
                            elem: m,
                            handlers: p
                        })
                    } return c < d.length && g.push({
                        elem: this,
                        handlers: d.slice(c)
                    }), g
        },
        addProp: function (a, d) {
            Object.defineProperty(n.Event.prototype, a, {
                enumerable: !0,
                configurable: !0,
                get: n.isFunction(d) ? function () {
                    if (this.originalEvent) return d(this.originalEvent)
                } : function () {
                    if (this.originalEvent) return this.originalEvent[a]
                },
                set: function (d) {
                    Object.defineProperty(this, a, {
                        enumerable: !0,
                        configurable: !0,
                        writable: !0,
                        value: d
                    })
                }
            })
        },
        fix: function (a) {
            return a[n.expando] ? a : new n.Event(a)
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function () {
                    if (this !== fa() && this.focus) return this.focus(), !1
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function () {
                    if (this === fa() && this.blur) return this.blur(), !1
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function () {
                    if ("checkbox" === this.type && this.click &&
                        n.nodeName(this, "input")) return this.click(), !1
                },
                _default: function (a) {
                    return n.nodeName(a.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function (a) {
                    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                }
            }
        }
    };
    n.removeEvent = function (a, d, b) {
        a.removeEventListener && a.removeEventListener(d, b)
    };
    n.Event = function (a, d) {
        return this instanceof n.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && !1 === a.returnValue ? O : G,
            this.target = a.target && 3 === a.target.nodeType ? a.target.parentNode : a.target, this.currentTarget = a.currentTarget, this.relatedTarget = a.relatedTarget) : this.type = a, d && n.extend(this, d), this.timeStamp = a && a.timeStamp || n.now(), void (this[n.expando] = !0)) : new n.Event(a, d)
    };
    n.Event.prototype = {
        constructor: n.Event,
        isDefaultPrevented: G,
        isPropagationStopped: G,
        isImmediatePropagationStopped: G,
        isSimulated: !1,
        preventDefault: function () {
            var a = this.originalEvent;
            this.isDefaultPrevented = O;
            a && !this.isSimulated && a.preventDefault()
        },
        stopPropagation: function () {
            var a = this.originalEvent;
            this.isPropagationStopped = O;
            a && !this.isSimulated && a.stopPropagation()
        },
        stopImmediatePropagation: function () {
            var a = this.originalEvent;
            this.isImmediatePropagationStopped = O;
            a && !this.isSimulated && a.stopImmediatePropagation();
            this.stopPropagation()
        }
    };
    n.each({
        altKey: !0,
        bubbles: !0,
        cancelable: !0,
        changedTouches: !0,
        ctrlKey: !0,
        detail: !0,
        eventPhase: !0,
        metaKey: !0,
        pageX: !0,
        pageY: !0,
        shiftKey: !0,
        view: !0,
        "char": !0,
        charCode: !0,
        key: !0,
        keyCode: !0,
        button: !0,
        buttons: !0,
        clientX: !0,
        clientY: !0,
        offsetX: !0,
        offsetY: !0,
        pointerId: !0,
        pointerType: !0,
        screenX: !0,
        screenY: !0,
        targetTouches: !0,
        toElement: !0,
        touches: !0,
        which: function (a) {
            var d = a.button;
            return null == a.which && Jb.test(a.type) ? null != a.charCode ? a.charCode : a.keyCode : !a.which && void 0 !== d && Kb.test(a.type) ? 1 & d ? 1 : 2 & d ? 3 : 4 & d ? 2 : 0 : a.which
        }
    }, n.event.addProp);
    n.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function (a, d) {
        n.event.special[a] = {
            delegateType: d,
            bindType: d,
            handle: function (a) {
                var b,
                    g = a.relatedTarget,
                    c = a.handleObj;
                return g && (g === this || n.contains(this, g)) || (a.type = c.origType, b = c.handler.apply(this, arguments), a.type = d), b
            }
        }
    });
    n.fn.extend({
        on: function (a, d, b, g) {
            return T(this, a, d, b, g)
        },
        one: function (a, d, b, g) {
            return T(this, a, d, b, g, 1)
        },
        off: function (a, d, b) {
            var g, c;
            if (a && a.preventDefault && a.handleObj) return g = a.handleObj, n(a.delegateTarget).off(g.namespace ? g.origType + "." + g.namespace : g.origType, g.selector, g.handler), this;
            if ("object" == typeof a) {
                for (c in a) this.off(c, d, a[c]);
                return this
            }
            return !1 !==
                d && "function" != typeof d || (b = d, d = void 0), !1 === b && (b = G), this.each(function () {
                    n.event.remove(this, a, b, d)
                })
        }
    });
    var Lb = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
        Mb = /<script|<style|<link/i,
        wb = /checked\s*(?:[^=]|=\s*.checked.)/i,
        vb = /^true\/(.*)/,
        xb = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    n.extend({
        htmlPrefilter: function (a) {
            return a.replace(Lb, "<$1></$2>")
        },
        clone: function (a, b, g) {
            var c, m = a.cloneNode(!0),
                p = n.contains(a.ownerDocument, a);
            if (!(W.noCloneChecked ||
                1 !== a.nodeType && 11 !== a.nodeType || n.isXMLDoc(a))) {
                var r = C(m);
                var e = C(a);
                var v = 0;
                for (c = e.length; v < c; v++) {
                    var x = e[v],
                        k = r[v],
                        u = k.nodeName.toLowerCase();
                    "input" === u && gb.test(x.type) ? k.checked = x.checked : "input" !== u && "textarea" !== u || (k.defaultValue = x.defaultValue)
                }
            }
            if (b)
                if (g)
                    for (e = e || C(a), r = r || C(m), v = 0, c = e.length; v < c; v++) d(e[v], r[v]);
                else d(a, m);
            return r = C(m, "script"), 0 < r.length && A(r, !p && C(a, "script")), m
        },
        cleanData: function (a) {
            for (var d, b, g, c = n.event.special, m = 0; void 0 !== (b = a[m]); m++)
                if (Ka(b)) {
                    if (d = b[Q.expando]) {
                        if (d.events)
                            for (g in d.events) c[g] ?
                                n.event.remove(b, g) : n.removeEvent(b, g, d.handle);
                        b[Q.expando] = void 0
                    }
                    b[aa.expando] && (b[aa.expando] = void 0)
                }
        }
    });
    n.fn.extend({
        detach: function (a) {
            return m(this, a, !0)
        },
        remove: function (a) {
            return m(this, a)
        },
        text: function (a) {
            return ra(this, function (a) {
                return void 0 === a ? n.text(this) : this.empty().each(function () {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = a)
                })
            }, null, a, arguments.length)
        },
        append: function () {
            return g(this, arguments, function (d) {
                1 !== this.nodeType && 11 !== this.nodeType &&
                    9 !== this.nodeType || a(this, d).appendChild(d)
            })
        },
        prepend: function () {
            return g(this, arguments, function (d) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = a(this, d);
                    b.insertBefore(d, b.firstChild)
                }
            })
        },
        before: function () {
            return g(this, arguments, function (a) {
                this.parentNode && this.parentNode.insertBefore(a, this)
            })
        },
        after: function () {
            return g(this, arguments, function (a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
            })
        },
        empty: function () {
            for (var a, d = 0; null != (a = this[d]); d++) 1 ===
                a.nodeType && (n.cleanData(C(a, !1)), a.textContent = "");
            return this
        },
        clone: function (a, d) {
            return a = null != a && a, d = null == d ? a : d, this.map(function () {
                return n.clone(this, a, d)
            })
        },
        html: function (a) {
            return ra(this, function (a) {
                var d = this[0] || {},
                    b = 0,
                    g = this.length;
                if (void 0 === a && 1 === d.nodeType) return d.innerHTML;
                if ("string" == typeof a && !Mb.test(a) && !da[(Wa.exec(a) || ["", ""])[1].toLowerCase()]) {
                    a = n.htmlPrefilter(a);
                    try {
                        for (; b < g; b++) d = this[b] || {}, 1 === d.nodeType && (n.cleanData(C(d, !1)), d.innerHTML = a);
                        d = 0
                    } catch (gc) { }
                }
                d &&
                    this.empty().append(a)
            }, null, a, arguments.length)
        },
        replaceWith: function () {
            var a = [];
            return g(this, arguments, function (d) {
                var b = this.parentNode;
                0 > n.inArray(this, a) && (n.cleanData(C(this)), b && b.replaceChild(d, this))
            }, a)
        }
    });
    n.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function (a, d) {
        n.fn[a] = function (a) {
            for (var b = [], g = n(a), c = g.length - 1, m = 0; m <= c; m++) a = m === c ? this : this.clone(!0), n(g[m])[d](a), va.apply(b, a.get());
            return this.pushStack(b)
        }
    });
    var Ya = /^margin/,
        Ma = new RegExp("^(" + eb + ")(?!px)[a-z%]+$", "i"),
        Ha = function (a) {
            var d = a.ownerDocument.defaultView;
            return d && d.opener || (d = b), d.getComputedStyle(a)
        };
    ! function () {
        function a() {
            if (r) {
                r.style.cssText = "box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
                r.innerHTML = "";
                La.appendChild(p);
                var a = b.getComputedStyle(r);
                d = "1%" !== a.top;
                m = "2px" === a.marginLeft;
                g = "4px" === a.width;
                r.style.marginRight = "50%";
                c = "4px" === a.marginRight;
                La.removeChild(p);
                r =
                    null
            }
        }
        var d, g, c, m, p = J.createElement("div"),
            r = J.createElement("div");
        r.style && (r.style.backgroundClip = "content-box", r.cloneNode(!0).style.backgroundClip = "", W.clearCloneStyle = "content-box" === r.style.backgroundClip, p.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", p.appendChild(r), n.extend(W, {
            pixelPosition: function () {
                return a(), d
            },
            boxSizingReliable: function () {
                return a(), g
            },
            pixelMarginRight: function () {
                return a(), c
            },
            reliableMarginLeft: function () {
                return a(),
                    m
            }
        }))
    }();
    var Nb = /^(none|table(?!-c[ea]).+)/,
        Ob = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        ib = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        $a = ["Webkit", "Moz", "ms"],
        Za = J.createElement("div").style;
    n.extend({
        cssHooks: {
            opacity: {
                get: function (a, d) {
                    if (d) return a = p(a, "opacity"), "" === a ? "1" : a
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function (a, d, b, g) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var c, m, p, r = n.camelCase(d),
                    e = a.style;
                return d = n.cssProps[r] || (n.cssProps[r] = v(r) || r), p = n.cssHooks[d] || n.cssHooks[r], void 0 === b ? p && "get" in p && void 0 !== (c = p.get(a, !1, g)) ? c : e[d] : (m = typeof b, "string" === m && (c = za.exec(b)) && c[1] && (b = w(a, d, c), m = "number"), null != b && b === b && ("number" === m && (b += c && c[3] || (n.cssNumber[r] ? "" : "px")), W.clearCloneStyle || "" !== b || 0 !== d.indexOf("background") || (e[d] = "inherit"), p && "set" in p && void 0 === (b = p.set(a, b, g)) ||
                    (e[d] = b)), void 0)
            }
        },
        css: function (a, d, b, g) {
            var c, m, r, e = n.camelCase(d);
            return d = n.cssProps[e] || (n.cssProps[e] = v(e) || e), r = n.cssHooks[d] || n.cssHooks[e], r && "get" in r && (c = r.get(a, !0, b)), void 0 === c && (c = p(a, d, g)), "normal" === c && d in ib && (c = ib[d]), "" === b || b ? (m = parseFloat(c), !0 === b || isFinite(m) ? m || 0 : c) : c
        }
    });
    n.each(["height", "width"], function (a, d) {
        n.cssHooks[d] = {
            get: function (a, b, g) {
                if (b) return !Nb.test(n.css(a, "display")) || a.getClientRects().length && a.getBoundingClientRect().width ? I(a, d, g) : fb(a, Ob, function () {
                    return I(a,
                        d, g)
                })
            },
            set: function (a, b, g) {
                var c, m = g && Ha(a);
                g = g && S(a, d, g, "border-box" === n.css(a, "boxSizing", !1, m), m);
                return g && (c = za.exec(b)) && "px" !== (c[3] || "px") && (a.style[d] = b, b = n.css(a, d)), u(a, b, g)
            }
        }
    });
    n.cssHooks.marginLeft = r(W.reliableMarginLeft, function (a, d) {
        if (d) return (parseFloat(p(a, "marginLeft")) || a.getBoundingClientRect().left - fb(a, {
            marginLeft: 0
        }, function () {
            return a.getBoundingClientRect().left
        })) + "px"
    });
    n.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function (a, d) {
        n.cssHooks[a + d] = {
            expand: function (b) {
                var g =
                    0,
                    c = {};
                for (b = "string" == typeof b ? b.split(" ") : [b]; 4 > g; g++) c[a + ta[g] + d] = b[g] || b[g - 2] || b[0];
                return c
            }
        };
        Ya.test(a) || (n.cssHooks[a + d].set = u)
    });
    n.fn.extend({
        css: function (a, d) {
            return ra(this, function (a, d, b) {
                var g, c = {},
                    m = 0;
                if (n.isArray(d)) {
                    b = Ha(a);
                    for (g = d.length; m < g; m++) c[d[m]] = n.css(a, d[m], !1, b);
                    return c
                }
                return void 0 !== b ? n.style(a, d, b) : n.css(a, d)
            }, a, d, 1 < arguments.length)
        }
    });
    n.Tween = U;
    U.prototype = {
        constructor: U,
        init: function (a, d, b, g, c, m) {
            this.elem = a;
            this.prop = b;
            this.easing = c || n.easing._default;
            this.options =
                d;
            this.start = this.now = this.cur();
            this.end = g;
            this.unit = m || (n.cssNumber[b] ? "" : "px")
        },
        cur: function () {
            var a = U.propHooks[this.prop];
            return a && a.get ? a.get(this) : U.propHooks._default.get(this)
        },
        run: function (a) {
            var d, b = U.propHooks[this.prop];
            return this.options.duration ? this.pos = d = n.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = d = a, this.now = (this.end - this.start) * d + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), b && b.set ? b.set(this) : U.propHooks._default.set(this),
                this
        }
    };
    U.prototype.init.prototype = U.prototype;
    U.propHooks = {
        _default: {
            get: function (a) {
                var d;
                return 1 !== a.elem.nodeType || null != a.elem[a.prop] && null == a.elem.style[a.prop] ? a.elem[a.prop] : (d = n.css(a.elem, a.prop, ""), d && "auto" !== d ? d : 0)
            },
            set: function (a) {
                n.fx.step[a.prop] ? n.fx.step[a.prop](a) : 1 !== a.elem.nodeType || null == a.elem.style[n.cssProps[a.prop]] && !n.cssHooks[a.prop] ? a.elem[a.prop] = a.now : n.style(a.elem, a.prop, a.now + a.unit)
            }
        }
    };
    U.propHooks.scrollTop = U.propHooks.scrollLeft = {
        set: function (a) {
            a.elem.nodeType &&
                a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    };
    n.easing = {
        linear: function (a) {
            return a
        },
        swing: function (a) {
            return .5 - Math.cos(a * Math.PI) / 2
        },
        _default: "swing"
    };
    n.fx = U.prototype.init;
    n.fx.step = {};
    var na, sa, Pb = /^(?:toggle|show|hide)$/,
        Qb = /queueHooks$/;
    n.Animation = n.extend(ka, {
        tweeners: {
            "*": [function (a, d) {
                var b = this.createTween(a, d);
                return w(b.elem, a, za.exec(d), b), b
            }]
        },
        tweener: function (a, d) {
            n.isFunction(a) ? (d = a, a = ["*"]) : a = a.match(ja);
            for (var b, g = 0, c = a.length; g < c; g++) b = a[g], ka.tweeners[b] = ka.tweeners[b] || [], ka.tweeners[b].unshift(d)
        },
        prefilters: [function (a, d, b) {
            var g, c, m, p, r, e, v, k, u = "width" in d || "height" in d,
                h = this,
                x = {},
                I = a.style,
                S = a.nodeType && Fa(a),
                z = Q.get(a, "fxshow");
            b.queue || (p = n._queueHooks(a, "fx"), null == p.unqueued && (p.unqueued = 0, r = p.empty.fire, p.empty.fire = function () {
                p.unqueued || r()
            }), p.unqueued++ , h.always(function () {
                h.always(function () {
                    p.unqueued--;
                    n.queue(a, "fx").length || p.empty.fire()
                })
            }));
            for (g in d)
                if (c = d[g], Pb.test(c)) {
                    if (delete d[g], m = m || "toggle" === c, c === (S ? "hide" : "show")) {
                        if ("show" !== c || !z || void 0 === z[g]) continue;
                        S = !0
                    }
                    x[g] = z && z[g] || n.style(a, g)
                } if (e = !n.isEmptyObject(d), e || !n.isEmptyObject(x))
                for (g in u && 1 === a.nodeType && (b.overflow = [I.overflow, I.overflowX, I.overflowY], v = z && z.display, null == v && (v = Q.get(a, "display")), k = n.css(a, "display"), "none" === k && (v ? k = v : (y([a], !0), v = a.style.display || v, k = n.css(a, "display"), y([a]))), ("inline" === k || "inline-block" === k && null != v) && "none" === n.css(a, "float") && (e || (h.done(function () {
                    I.display = v
                }), null == v && (k = I.display, v = "none" === k ? "" : k)), I.display = "inline-block")), b.overflow && (I.overflow =
                    "hidden", h.always(function () {
                        I.overflow = b.overflow[0];
                        I.overflowX = b.overflow[1];
                        I.overflowY = b.overflow[2]
                    })), e = !1, x) e || (z ? "hidden" in z && (S = z.hidden) : z = Q.access(a, "fxshow", {
                        display: v
                    }), m && (z.hidden = !S), S && y([a], !0), h.done(function () {
                        S || y([a]);
                        Q.remove(a, "fxshow");
                        for (g in x) n.style(a, g, x[g])
                    })), e = H(S ? z[g] : 0, g, h), g in z || (z[g] = e.start, S && (e.end = e.start, e.start = 0))
        }],
        prefilter: function (a, d) {
            d ? ka.prefilters.unshift(a) : ka.prefilters.push(a)
        }
    });
    n.speed = function (a, d, b) {
        var g = a && "object" == typeof a ? n.extend({},
            a) : {
                complete: b || !b && d || n.isFunction(a) && a,
                duration: a,
                easing: b && d || d && !n.isFunction(d) && d
            };
        return n.fx.off || J.hidden ? g.duration = 0 : g.duration = "number" == typeof g.duration ? g.duration : g.duration in n.fx.speeds ? n.fx.speeds[g.duration] : n.fx.speeds._default, null != g.queue && !0 !== g.queue || (g.queue = "fx"), g.old = g.complete, g.complete = function () {
            n.isFunction(g.old) && g.old.call(this);
            g.queue && n.dequeue(this, g.queue)
        }, g
    };
    n.fn.extend({
        fadeTo: function (a, d, b, g) {
            return this.filter(Fa).css("opacity", 0).show().end().animate({
                opacity: d
            },
                a, b, g)
        },
        animate: function (a, d, b, g) {
            var c = n.isEmptyObject(a),
                m = n.speed(d, b, g);
            d = function () {
                var d = ka(this, n.extend({}, a), m);
                (c || Q.get(this, "finish")) && d.stop(!0)
            };
            return d.finish = d, c || !1 === m.queue ? this.each(d) : this.queue(m.queue, d)
        },
        stop: function (a, d, b) {
            var g = function (a) {
                var d = a.stop;
                delete a.stop;
                d(b)
            };
            return "string" != typeof a && (b = d, d = a, a = void 0), d && !1 !== a && this.queue(a || "fx", []), this.each(function () {
                var d = !0,
                    c = null != a && a + "queueHooks",
                    m = n.timers,
                    p = Q.get(this);
                if (c) p[c] && p[c].stop && g(p[c]);
                else
                    for (c in p) p[c] &&
                        p[c].stop && Qb.test(c) && g(p[c]);
                for (c = m.length; c--;) m[c].elem !== this || null != a && m[c].queue !== a || (m[c].anim.stop(b), d = !1, m.splice(c, 1));
                !d && b || n.dequeue(this, a)
            })
        },
        finish: function (a) {
            return !1 !== a && (a = a || "fx"), this.each(function () {
                var d = Q.get(this),
                    b = d[a + "queue"];
                var g = d[a + "queueHooks"];
                var c = n.timers,
                    m = b ? b.length : 0;
                d.finish = !0;
                n.queue(this, a, []);
                g && g.stop && g.stop.call(this, !0);
                for (g = c.length; g--;) c[g].elem === this && c[g].queue === a && (c[g].anim.stop(!0), c.splice(g, 1));
                for (g = 0; g < m; g++) b[g] && b[g].finish &&
                    b[g].finish.call(this);
                delete d.finish
            })
        }
    });
    n.each(["toggle", "show", "hide"], function (a, d) {
        var b = n.fn[d];
        n.fn[d] = function (a, g, c) {
            return null == a || "boolean" == typeof a ? b.apply(this, arguments) : this.animate(Z(d, !0), a, g, c)
        }
    });
    n.each({
        slideDown: Z("show"),
        slideUp: Z("hide"),
        slideToggle: Z("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function (a, d) {
        n.fn[a] = function (a, b, g) {
            return this.animate(d, a, b, g)
        }
    });
    n.timers = [];
    n.fx.tick = function () {
        var a = 0,
            d = n.timers;
        for (na = n.now(); a <
            d.length; a++) {
            var b = d[a];
            b() || d[a] !== b || d.splice(a--, 1)
        }
        d.length || n.fx.stop();
        na = void 0
    };
    n.fx.timer = function (a) {
        n.timers.push(a);
        a() ? n.fx.start() : n.timers.pop()
    };
    n.fx.interval = 13;
    n.fx.start = function () {
        sa || (sa = b.requestAnimationFrame ? b.requestAnimationFrame(ea) : b.setInterval(n.fx.tick, n.fx.interval))
    };
    n.fx.stop = function () {
        b.cancelAnimationFrame ? b.cancelAnimationFrame(sa) : b.clearInterval(sa);
        sa = null
    };
    n.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    };
    n.fn.delay = function (a, d) {
        return a = n.fx ? n.fx.speeds[a] ||
            a : a, d = d || "fx", this.queue(d, function (d, g) {
                var c = b.setTimeout(d, a);
                g.stop = function () {
                    b.clearTimeout(c)
                }
            })
    };
    (function () {
        var a = J.createElement("input"),
            d = J.createElement("select").appendChild(J.createElement("option"));
        a.type = "checkbox";
        W.checkOn = "" !== a.value;
        W.optSelected = d.selected;
        a = J.createElement("input");
        a.value = "t";
        a.type = "radio";
        W.radioValue = "t" === a.value
    })();
    var Ca = n.expr.attrHandle;
    n.fn.extend({
        attr: function (a, d) {
            return ra(this, n.attr, a, d, 1 < arguments.length)
        },
        removeAttr: function (a) {
            return this.each(function () {
                n.removeAttr(this,
                    a)
            })
        }
    });
    n.extend({
        attr: function (a, d, b) {
            var g, c, m = a.nodeType;
            if (3 !== m && 8 !== m && 2 !== m) return "undefined" == typeof a.getAttribute ? n.prop(a, d, b) : (1 === m && n.isXMLDoc(a) || (c = n.attrHooks[d.toLowerCase()] || (n.expr.match.bool.test(d) ? Rb : void 0)), void 0 !== b ? null === b ? void n.removeAttr(a, d) : c && "set" in c && void 0 !== (g = c.set(a, b, d)) ? g : (a.setAttribute(d, b + ""), b) : c && "get" in c && null !== (g = c.get(a, d)) ? g : (g = n.find.attr(a, d), null == g ? void 0 : g))
        },
        attrHooks: {
            type: {
                set: function (a, d) {
                    if (!W.radioValue && "radio" === d && n.nodeName(a,
                        "input")) {
                        var b = a.value;
                        return a.setAttribute("type", d), b && (a.value = b), d
                    }
                }
            }
        },
        removeAttr: function (a, d) {
            var b = 0,
                g = d && d.match(ja);
            if (g && 1 === a.nodeType)
                for (; d = g[b++];) a.removeAttribute(d)
        }
    });
    var Rb = {
        set: function (a, d, b) {
            return !1 === d ? n.removeAttr(a, b) : a.setAttribute(b, b), b
        }
    };
    n.each(n.expr.match.bool.source.match(/\w+/g), function (a, d) {
        var b = Ca[d] || n.find.attr;
        Ca[d] = function (a, d, g) {
            var c, m, p = d.toLowerCase();
            return g || (m = Ca[p], Ca[p] = c, c = null != b(a, d, g) ? p : null, Ca[p] = m), c
        }
    });
    var Sb = /^(?:input|select|textarea|button)$/i,
        Tb = /^(?:a|area)$/i;
    n.fn.extend({
        prop: function (a, d) {
            return ra(this, n.prop, a, d, 1 < arguments.length)
        },
        removeProp: function (a) {
            return this.each(function () {
                delete this[n.propFix[a] || a]
            })
        }
    });
    n.extend({
        prop: function (a, d, b) {
            var g, c, m = a.nodeType;
            if (3 !== m && 8 !== m && 2 !== m) return 1 === m && n.isXMLDoc(a) || (d = n.propFix[d] || d, c = n.propHooks[d]), void 0 !== b ? c && "set" in c && void 0 !== (g = c.set(a, b, d)) ? g : a[d] = b : c && "get" in c && null !== (g = c.get(a, d)) ? g : a[d]
        },
        propHooks: {
            tabIndex: {
                get: function (a) {
                    var d = n.find.attr(a, "tabindex");
                    return d ?
                        parseInt(d, 10) : Sb.test(a.nodeName) || Tb.test(a.nodeName) && a.href ? 0 : -1
                }
            }
        },
        propFix: {
            "for": "htmlFor",
            "class": "className"
        }
    });
    W.optSelected || (n.propHooks.selected = {
        get: function (a) {
            a = a.parentNode;
            return a && a.parentNode && a.parentNode.selectedIndex, null
        },
        set: function (a) {
            a = a.parentNode;
            a && (a.selectedIndex, a.parentNode && a.parentNode.selectedIndex)
        }
    });
    n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "), function () {
        n.propFix[this.toLowerCase()] =
            this
    });
    var Qa = /[\t\r\n\f]/g;
    n.fn.extend({
        addClass: function (a) {
            var d, b, g, c, m, p, r = 0;
            if (n.isFunction(a)) return this.each(function (d) {
                n(this).addClass(a.call(this, d, la(this)))
            });
            if ("string" == typeof a && a)
                for (d = a.match(ja) || []; b = this[r++];)
                    if (c = la(b), g = 1 === b.nodeType && (" " + c + " ").replace(Qa, " ")) {
                        for (p = 0; m = d[p++];) 0 > g.indexOf(" " + m + " ") && (g += m + " ");
                        g = n.trim(g);
                        c !== g && b.setAttribute("class", g)
                    } return this
        },
        removeClass: function (a) {
            var d, b, g, c, m, p, r = 0;
            if (n.isFunction(a)) return this.each(function (d) {
                n(this).removeClass(a.call(this,
                    d, la(this)))
            });
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof a && a)
                for (d = a.match(ja) || []; b = this[r++];)
                    if (c = la(b), g = 1 === b.nodeType && (" " + c + " ").replace(Qa, " ")) {
                        for (p = 0; m = d[p++];)
                            for (; - 1 < g.indexOf(" " + m + " ");) g = g.replace(" " + m + " ", " ");
                        g = n.trim(g);
                        c !== g && b.setAttribute("class", g)
                    } return this
        },
        toggleClass: function (a, d) {
            var b = typeof a;
            return "boolean" == typeof d && "string" === b ? d ? this.addClass(a) : this.removeClass(a) : n.isFunction(a) ? this.each(function (b) {
                n(this).toggleClass(a.call(this,
                    b, la(this), d), d)
            }) : this.each(function () {
                var d, g;
                if ("string" === b) {
                    var c = 0;
                    var m = n(this);
                    for (g = a.match(ja) || []; d = g[c++];) m.hasClass(d) ? m.removeClass(d) : m.addClass(d)
                } else void 0 !== a && "boolean" !== b || (d = la(this), d && Q.set(this, "__className__", d), this.setAttribute && this.setAttribute("class", d || !1 === a ? "" : Q.get(this, "__className__") || ""))
            })
        },
        hasClass: function (a) {
            var d, b = 0;
            for (a = " " + a + " "; d = this[b++];)
                if (1 === d.nodeType && -1 < (" " + la(d) + " ").replace(Qa, " ").indexOf(a)) return !0;
            return !1
        }
    });
    var Ub = /\r/g,
        Vb = /[\x20\t\r\n\f]+/g;
    n.fn.extend({
        val: function (a) {
            var d, b, g, c = this[0];
            if (arguments.length) return g = n.isFunction(a), this.each(function (b) {
                var c;
                1 === this.nodeType && (c = g ? a.call(this, b, n(this).val()) : a, null == c ? c = "" : "number" == typeof c ? c += "" : n.isArray(c) && (c = n.map(c, function (a) {
                    return null == a ? "" : a + ""
                })), d = n.valHooks[this.type] || n.valHooks[this.nodeName.toLowerCase()], d && "set" in d && void 0 !== d.set(this, c, "value") || (this.value = c))
            });
            if (c) return d = n.valHooks[c.type] || n.valHooks[c.nodeName.toLowerCase()], d && "get" in d && void 0 !==
                (b = d.get(c, "value")) ? b : (b = c.value, "string" == typeof b ? b.replace(Ub, "") : null == b ? "" : b)
        }
    });
    n.extend({
        valHooks: {
            option: {
                get: function (a) {
                    var d = n.find.attr(a, "value");
                    return null != d ? d : n.trim(n.text(a)).replace(Vb, " ")
                }
            },
            select: {
                get: function (a) {
                    for (var d, b = a.options, g = a.selectedIndex, c = "select-one" === a.type, m = c ? null : [], p = c ? g + 1 : b.length, r = 0 > g ? p : c ? g : 0; r < p; r++)
                        if (d = b[r], !(!d.selected && r !== g || d.disabled || d.parentNode.disabled && n.nodeName(d.parentNode, "optgroup"))) {
                            if (a = n(d).val(), c) return a;
                            m.push(a)
                        } return m
                },
                set: function (a, d) {
                    for (var b, g = a.options, c = n.makeArray(d), m = g.length; m--;) d = g[m], (d.selected = -1 < n.inArray(n.valHooks.option.get(d), c)) && (b = !0);
                    return b || (a.selectedIndex = -1), c
                }
            }
        }
    });
    n.each(["radio", "checkbox"], function () {
        n.valHooks[this] = {
            set: function (a, d) {
                if (n.isArray(d)) return a.checked = -1 < n.inArray(n(a).val(), d)
            }
        };
        W.checkOn || (n.valHooks[this].get = function (a) {
            return null === a.getAttribute("value") ? "on" : a.value
        })
    });
    var jb = /^(?:focusinfocus|focusoutblur)$/;
    n.extend(n.event, {
        trigger: function (a, d, g, c) {
            var m,
                p, r, e, v, k = [g || J],
                u = B.call(a, "type") ? a.type : a;
            var h = B.call(a, "namespace") ? a.namespace.split(".") : [];
            if (m = p = g = g || J, 3 !== g.nodeType && 8 !== g.nodeType && !jb.test(u + n.event.triggered) && (-1 < u.indexOf(".") && (h = u.split("."), u = h.shift(), h.sort()), r = 0 > u.indexOf(":") && "on" + u, a = a[n.expando] ? a : new n.Event(u, "object" == typeof a && a), a.isTrigger = c ? 2 : 3, a.namespace = h.join("."), a.rnamespace = a.namespace ? new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, a.result = void 0, a.target || (a.target = g), d = null == d ? [a] : n.makeArray(d,
                [a]), v = n.event.special[u] || {}, c || !v.trigger || !1 !== v.trigger.apply(g, d))) {
                if (!c && !v.noBubble && !n.isWindow(g)) {
                    var I = v.delegateType || u;
                    for (jb.test(I + u) || (m = m.parentNode); m; m = m.parentNode) k.push(m), p = m;
                    p === (g.ownerDocument || J) && k.push(p.defaultView || p.parentWindow || b)
                }
                for (h = 0;
                    (m = k[h++]) && !a.isPropagationStopped();) a.type = 1 < h ? I : v.bindType || u, (e = (Q.get(m, "events") || {})[a.type] && Q.get(m, "handle")) && e.apply(m, d), (e = r && m[r]) && e.apply && Ka(m) && (a.result = e.apply(m, d), !1 === a.result && a.preventDefault());
                return a.type =
                    u, c || a.isDefaultPrevented() || v._default && !1 !== v._default.apply(k.pop(), d) || !Ka(g) || r && n.isFunction(g[u]) && !n.isWindow(g) && (p = g[r], p && (g[r] = null), n.event.triggered = u, g[u](), n.event.triggered = void 0, p && (g[r] = p)), a.result
            }
        },
        simulate: function (a, d, b) {
            a = n.extend(new n.Event, b, {
                type: a,
                isSimulated: !0
            });
            n.event.trigger(a, null, d)
        }
    });
    n.fn.extend({
        trigger: function (a, d) {
            return this.each(function () {
                n.event.trigger(a, d, this)
            })
        },
        triggerHandler: function (a, d) {
            var b = this[0];
            if (b) return n.event.trigger(a, d, b, !0)
        }
    });
    n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (a, d) {
        n.fn[d] = function (a, b) {
            return 0 < arguments.length ? this.on(d, null, a, b) : this.trigger(d)
        }
    });
    n.fn.extend({
        hover: function (a, d) {
            return this.mouseenter(a).mouseleave(d || a)
        }
    });
    W.focusin = "onfocusin" in b;
    W.focusin || n.each({
        focus: "focusin",
        blur: "focusout"
    }, function (a, d) {
        var b = function (a) {
            n.event.simulate(d,
                a.target, n.event.fix(a))
        };
        n.event.special[d] = {
            setup: function () {
                var g = this.ownerDocument || this,
                    c = Q.access(g, d);
                c || g.addEventListener(a, b, !0);
                Q.access(g, d, (c || 0) + 1)
            },
            teardown: function () {
                var g = this.ownerDocument || this,
                    c = Q.access(g, d) - 1;
                c ? Q.access(g, d, c) : (g.removeEventListener(a, b, !0), Q.remove(g, d))
            }
        }
    });
    var Da = b.location,
        kb = n.now(),
        Ra = /\?/;
    n.parseXML = function (a) {
        if (!a || "string" != typeof a) return null;
        try {
            var d = (new b.DOMParser).parseFromString(a, "text/xml")
        } catch (ua) {
            d = void 0
        }
        return d && !d.getElementsByTagName("parsererror").length ||
            n.error("Invalid XML: " + a), d
    };
    var yb = /\[\]$/,
        lb = /\r?\n/g,
        Wb = /^(?:submit|button|image|reset|file)$/i,
        Xb = /^(?:input|select|textarea|keygen)/i;
    n.param = function (a, d) {
        var b, g = [],
            c = function (a, d) {
                d = n.isFunction(d) ? d() : d;
                g[g.length] = encodeURIComponent(a) + "=" + encodeURIComponent(null == d ? "" : d)
            };
        if (n.isArray(a) || a.jquery && !n.isPlainObject(a)) n.each(a, function () {
            c(this.name, this.value)
        });
        else
            for (b in a) oa(b, a[b], d, c);
        return g.join("&")
    };
    n.fn.extend({
        serialize: function () {
            return n.param(this.serializeArray())
        },
        serializeArray: function () {
            return this.map(function () {
                var a = n.prop(this, "elements");
                return a ? n.makeArray(a) : this
            }).filter(function () {
                var a = this.type;
                return this.name && !n(this).is(":disabled") && Xb.test(this.nodeName) && !Wb.test(a) && (this.checked || !gb.test(a))
            }).map(function (a, d) {
                a = n(this).val();
                return null == a ? null : n.isArray(a) ? n.map(a, function (a) {
                    return {
                        name: d.name,
                        value: a.replace(lb, "\r\n")
                    }
                }) : {
                        name: d.name,
                        value: a.replace(lb, "\r\n")
                    }
            }).get()
        }
    });
    var Yb = /%20/g,
        Zb = /#.*$/,
        $b = /([?&])_=[^&]*/,
        ac = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        bc = /^(?:GET|HEAD)$/,
        cc = /^\/\//,
        mb = {},
        Na = {},
        nb = "*/".concat("*"),
        Sa = J.createElement("a");
    Sa.href = Da.href;
    n.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: Da.href,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Da.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": nb,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": JSON.parse,
                "text xml": n.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function (a, d) {
            return d ? Aa(Aa(a, n.ajaxSettings), d) : Aa(n.ajaxSettings, a)
        },
        ajaxPrefilter: pa(mb),
        ajaxTransport: pa(Na),
        ajax: function (a, d) {
            function g(a, d, g, p) {
                var v, k, f, x = d;
                if (!N) {
                    N = !0;
                    r && b.clearTimeout(r);
                    c = void 0;
                    m = p || "";
                    l.readyState = 0 < a ? 4 : 0;
                    p = 200 <= a && 300 > a || 304 === a;
                    if (g) {
                        var q = u;
                        for (var ea = l, w, M, y, G, t = q.contents, K = q.dataTypes;
                            "*" === K[0];) K.shift(), void 0 === w && (w = q.mimeType || ea.getResponseHeader("Content-Type"));
                        if (w)
                            for (M in t)
                                if (t[M] && t[M].test(w)) {
                                    K.unshift(M);
                                    break
                                } if (K[0] in g) y = K[0];
                        else {
                            for (M in g) {
                                if (!K[0] || q.converters[M + " " + K[0]]) {
                                    y = M;
                                    break
                                }
                                G || (G = M)
                            }
                            y = y || G
                        }
                        g = y ? (y !== K[0] && K.unshift(y), g[y]) : void 0;
                        q = g
                    }
                    a: {
                        g = u; w = q; M = l; y = p;
                        var H, P, ha; q = {}; ea = g.dataTypes.slice();
                        if (ea[1])
                            for (H in g.converters) q[H.toLowerCase()] = g.converters[H];
                        for (G = ea.shift(); G;)
                            if (g.responseFields[G] &&
                                (M[g.responseFields[G]] = w), !ha && y && g.dataFilter && (w = g.dataFilter(w, g.dataType)), ha = G, G = ea.shift())
                                if ("*" === G) G = ha;
                                else if ("*" !== ha && ha !== G) {
                                    if (H = q[ha + " " + G] || q["* " + G], !H)
                                        for (Z in q)
                                            if (P = Z.split(" "), P[1] === G && (H = q[ha + " " + P[0]] || q["* " + P[0]])) {
                                                !0 === H ? H = q[Z] : !0 !== q[Z] && (G = P[0], ea.unshift(P[1]));
                                                break
                                            } if (!0 !== H)
                                        if (H && g["throws"]) w = H(w);
                                        else try {
                                            w = H(w)
                                        } catch (Db) {
                                            var Z = {
                                                state: "parsererror",
                                                error: H ? Db : "No conversion from " + ha + " to " + G
                                            };
                                            break a
                                        }
                                }
                        Z = {
                            state: "success",
                            data: w
                        }
                    }
                    q = Z;
                    p ? (u.ifModified && (f = l.getResponseHeader("Last-Modified"),
                        f && (n.lastModified[U] = f), f = l.getResponseHeader("etag"), f && (n.etag[U] = f)), 204 === a || "HEAD" === u.type ? x = "nocontent" : 304 === a ? x = "notmodified" : (x = q.state, v = q.data, k = q.error, p = !k)) : (k = x, !a && x || (x = "error", 0 > a && (a = 0)));
                    l.status = a;
                    l.statusText = (d || x) + "";
                    p ? S.resolveWith(h, [v, x, l]) : S.rejectWith(h, [l, x, k]);
                    l.statusCode(E);
                    E = void 0;
                    e && I.trigger(p ? "ajaxSuccess" : "ajaxError", [l, u, p ? v : k]);
                    z.fireWith(h, [l, x]);
                    e && (I.trigger("ajaxComplete", [l, u]), --n.active || n.event.trigger("ajaxStop"))
                }
            }
            "object" == typeof a && (d = a, a = void 0);
            d = d || {};
            var c, m, p, r, e, v, k, u = n.ajaxSetup({}, d),
                h = u.context || u,
                I = u.context && (h.nodeType || h.jquery) ? n(h) : n.event,
                S = n.Deferred(),
                z = n.Callbacks("once memory"),
                E = u.statusCode || {},
                f = {},
                x = {},
                q = "canceled",
                l = {
                    readyState: 0,
                    getResponseHeader: function (a) {
                        var d;
                        if (N) {
                            if (!p)
                                for (p = {}; d = ac.exec(m);) p[d[1].toLowerCase()] = d[2];
                            d = p[a.toLowerCase()]
                        }
                        return null == d ? null : d
                    },
                    getAllResponseHeaders: function () {
                        return N ? m : null
                    },
                    setRequestHeader: function (a, d) {
                        return null == N && (a = x[a.toLowerCase()] = x[a.toLowerCase()] || a, f[a] = d),
                            this
                    },
                    overrideMimeType: function (a) {
                        return null == N && (u.mimeType = a), this
                    },
                    statusCode: function (a) {
                        var d;
                        if (a)
                            if (N) l.always(a[l.status]);
                            else
                                for (d in a) E[d] = [E[d], a[d]];
                        return this
                    },
                    abort: function (a) {
                        a = a || q;
                        return c && c.abort(a), g(0, a), this
                    }
                };
            if (S.promise(l), u.url = ((a || u.url || Da.href) + "").replace(cc, Da.protocol + "//"), u.type = d.method || d.type || u.method || u.type, u.dataTypes = (u.dataType || "*").toLowerCase().match(ja) || [""], null == u.crossDomain) {
                a = J.createElement("a");
                try {
                    a.href = u.url, a.href = a.href, u.crossDomain =
                        Sa.protocol + "//" + Sa.host != a.protocol + "//" + a.host
                } catch (Oa) {
                    u.crossDomain = !0
                }
            }
            if (u.data && u.processData && "string" != typeof u.data && (u.data = n.param(u.data, u.traditional)), Ia(mb, u, d, l), N) return l;
            (e = n.event && u.global) && 0 === n.active++ && n.event.trigger("ajaxStart");
            u.type = u.type.toUpperCase();
            u.hasContent = !bc.test(u.type);
            var U = u.url.replace(Zb, "");
            u.hasContent ? u.data && u.processData && 0 === (u.contentType || "").indexOf("application/x-www-form-urlencoded") && (u.data = u.data.replace(Yb, "+")) : (k = u.url.slice(U.length),
                u.data && (U += (Ra.test(U) ? "&" : "?") + u.data, delete u.data), !1 === u.cache && (U = U.replace($b, ""), k = (Ra.test(U) ? "&" : "?") + "_=" + kb++ + k), u.url = U + k);
            u.ifModified && (n.lastModified[U] && l.setRequestHeader("If-Modified-Since", n.lastModified[U]), n.etag[U] && l.setRequestHeader("If-None-Match", n.etag[U]));
            (u.data && u.hasContent && !1 !== u.contentType || d.contentType) && l.setRequestHeader("Content-Type", u.contentType);
            l.setRequestHeader("Accept", u.dataTypes[0] && u.accepts[u.dataTypes[0]] ? u.accepts[u.dataTypes[0]] + ("*" !== u.dataTypes[0] ?
                ", " + nb + "; q=0.01" : "") : u.accepts["*"]);
            for (v in u.headers) l.setRequestHeader(v, u.headers[v]);
            if (u.beforeSend && (!1 === u.beforeSend.call(h, l, u) || N)) return l.abort();
            if (q = "abort", z.add(u.complete), l.done(u.success), l.fail(u.error), c = Ia(Na, u, d, l)) {
                if (l.readyState = 1, e && I.trigger("ajaxSend", [l, u]), N) return l;
                u.async && 0 < u.timeout && (r = b.setTimeout(function () {
                    l.abort("timeout")
                }, u.timeout));
                try {
                    var N = !1;
                    c.send(f, g)
                } catch (Oa) {
                    if (N) throw Oa;
                    g(-1, Oa)
                }
            } else g(-1, "No Transport");
            return l
        },
        getJSON: function (a, d, b) {
            return n.get(a,
                d, b, "json")
        },
        getScript: function (a, d) {
            return n.get(a, void 0, d, "script")
        }
    });
    n.each(["get", "post"], function (a, d) {
        n[d] = function (a, b, g, c) {
            return n.isFunction(b) && (c = c || g, g = b, b = void 0), n.ajax(n.extend({
                url: a,
                type: d,
                dataType: c,
                data: b,
                success: g
            }, n.isPlainObject(a) && a))
        }
    });
    n._evalUrl = function (a) {
        return n.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            cache: !0,
            async: !1,
            global: !1,
            "throws": !0
        })
    };
    n.fn.extend({
        wrapAll: function (a) {
            var d;
            return this[0] && (n.isFunction(a) && (a = a.call(this[0])), d = n(a, this[0].ownerDocument).eq(0).clone(!0),
                this[0].parentNode && d.insertBefore(this[0]), d.map(function () {
                    for (var a = this; a.firstElementChild;) a = a.firstElementChild;
                    return a
                }).append(this)), this
        },
        wrapInner: function (a) {
            return n.isFunction(a) ? this.each(function (d) {
                n(this).wrapInner(a.call(this, d))
            }) : this.each(function () {
                var d = n(this),
                    b = d.contents();
                b.length ? b.wrapAll(a) : d.append(a)
            })
        },
        wrap: function (a) {
            var d = n.isFunction(a);
            return this.each(function (b) {
                n(this).wrapAll(d ? a.call(this, b) : a)
            })
        },
        unwrap: function (a) {
            return this.parent(a).not("body").each(function () {
                n(this).replaceWith(this.childNodes)
            }),
                this
        }
    });
    n.expr.pseudos.hidden = function (a) {
        return !n.expr.pseudos.visible(a)
    };
    n.expr.pseudos.visible = function (a) {
        return !!(a.offsetWidth || a.offsetHeight || a.getClientRects().length)
    };
    n.ajaxSettings.xhr = function () {
        try {
            return new b.XMLHttpRequest
        } catch (x) { }
    };
    var dc = {
        0: 200,
        1223: 204
    },
        Ea = n.ajaxSettings.xhr();
    W.cors = !!Ea && "withCredentials" in Ea;
    W.ajax = Ea = !!Ea;
    n.ajaxTransport(function (a) {
        var d, g;
        if (W.cors || Ea && !a.crossDomain) return {
            send: function (c, m) {
                var p, r = a.xhr();
                if (r.open(a.type, a.url, a.async, a.username,
                    a.password), a.xhrFields)
                    for (p in a.xhrFields) r[p] = a.xhrFields[p];
                a.mimeType && r.overrideMimeType && r.overrideMimeType(a.mimeType);
                a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                for (p in c) r.setRequestHeader(p, c[p]);
                d = function (a) {
                    return function () {
                        d && (d = g = r.onload = r.onerror = r.onabort = r.onreadystatechange = null, "abort" === a ? r.abort() : "error" === a ? "number" != typeof r.status ? m(0, "error") : m(r.status, r.statusText) : m(dc[r.status] || r.status, r.statusText, "text" !== (r.responseType ||
                            "text") || "string" != typeof r.responseText ? {
                                binary: r.response
                            } : {
                                text: r.responseText
                            }, r.getAllResponseHeaders()))
                    }
                };
                r.onload = d();
                g = r.onerror = d("error");
                void 0 !== r.onabort ? r.onabort = g : r.onreadystatechange = function () {
                    4 === r.readyState && b.setTimeout(function () {
                        d && g()
                    })
                };
                d = d("abort");
                try {
                    r.send(a.hasContent && a.data || null)
                } catch (sb) {
                    if (d) throw sb;
                }
            },
            abort: function () {
                d && d()
            }
        }
    });
    n.ajaxPrefilter(function (a) {
        a.crossDomain && (a.contents.script = !1)
    });
    n.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function (a) {
                return n.globalEval(a), a
            }
        }
    });
    n.ajaxPrefilter("script", function (a) {
        void 0 === a.cache && (a.cache = !1);
        a.crossDomain && (a.type = "GET")
    });
    n.ajaxTransport("script", function (a) {
        if (a.crossDomain) {
            var d, b;
            return {
                send: function (g, c) {
                    d = n("<script>").prop({
                        charset: a.scriptCharset,
                        src: a.url
                    }).on("load error", b = function (a) {
                        d.remove();
                        b = null;
                        a && c("error" === a.type ? 404 : 200, a.type)
                    });
                    J.head.appendChild(d[0])
                },
                abort: function () {
                    b && b()
                }
            }
        }
    });
    var ob = [],
        Ta = /(=)\?(?=&|$)|\?\?/;
    n.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function () {
            var a = ob.pop() || n.expando + "_" + kb++;
            return this[a] = !0, a
        }
    });
    n.ajaxPrefilter("json jsonp", function (a, d, g) {
        var c, m, p, r = !1 !== a.jsonp && (Ta.test(a.url) ? "url" : "string" == typeof a.data && 0 === (a.contentType || "").indexOf("application/x-www-form-urlencoded") && Ta.test(a.data) && "data");
        if (r || "jsonp" === a.dataTypes[0]) return c = a.jsonpCallback = n.isFunction(a.jsonpCallback) ? a.jsonpCallback() : a.jsonpCallback, r ? a[r] = a[r].replace(Ta,
            "$1" + c) : !1 !== a.jsonp && (a.url += (Ra.test(a.url) ? "&" : "?") + a.jsonp + "=" + c), a.converters["script json"] = function () {
                return p || n.error(c + " was not called"), p[0]
            }, a.dataTypes[0] = "json", m = b[c], b[c] = function () {
                p = arguments
            }, g.always(function () {
                void 0 === m ? n(b).removeProp(c) : b[c] = m;
                a[c] && (a.jsonpCallback = d.jsonpCallback, ob.push(c));
                p && n.isFunction(m) && m(p[0]);
                p = m = void 0
            }), "script"
    });
    W.createHTMLDocument = function () {
        var a = J.implementation.createHTMLDocument("").body;
        return a.innerHTML = "<form></form><form></form>",
            2 === a.childNodes.length
    }();
    n.parseHTML = function (a, d, b) {
        if ("string" != typeof a) return [];
        "boolean" == typeof d && (b = d, d = !1);
        var g, c, m;
        return d || (W.createHTMLDocument ? (d = J.implementation.createHTMLDocument(""), g = d.createElement("base"), g.href = J.location.href, d.head.appendChild(g)) : d = J), c = db.exec(a), m = !b && [], c ? [d.createElement(c[1])] : (c = D([a], d, m), m && m.length && n(m).remove(), n.merge([], c.childNodes))
    };
    n.fn.load = function (a, d, b) {
        var g, c, m, p = this,
            r = a.indexOf(" ");
        return -1 < r && (g = n.trim(a.slice(r)), a = a.slice(0,
            r)), n.isFunction(d) ? (b = d, d = void 0) : d && "object" == typeof d && (c = "POST"), 0 < p.length && n.ajax({
                url: a,
                type: c || "GET",
                dataType: "html",
                data: d
            }).done(function (a) {
                m = arguments;
                p.html(g ? n("<div>").append(n.parseHTML(a)).find(g) : a)
            }).always(b && function (a, d) {
                p.each(function () {
                    b.apply(this, m || [a.responseText, d, a])
                })
            }), this
    };
    n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, d) {
        n.fn[d] = function (a) {
            return this.on(d, a)
        }
    });
    n.expr.pseudos.animated = function (a) {
        return n.grep(n.timers,
            function (d) {
                return a === d.elem
            }).length
    };
    n.offset = {
        setOffset: function (a, d, b) {
            var g, c, m, p = n.css(a, "position"),
                r = n(a),
                e = {};
            "static" === p && (a.style.position = "relative");
            var v = r.offset();
            var u = n.css(a, "top");
            var k = n.css(a, "left");
            ("absolute" === p || "fixed" === p) && -1 < (u + k).indexOf("auto") ? (g = r.position(), m = g.top, c = g.left) : (m = parseFloat(u) || 0, c = parseFloat(k) || 0);
            n.isFunction(d) && (d = d.call(a, b, n.extend({}, v)));
            null != d.top && (e.top = d.top - v.top + m);
            null != d.left && (e.left = d.left - v.left + c);
            "using" in d ? d.using.call(a,
                e) : r.css(e)
        }
    };
    n.fn.extend({
        offset: function (a) {
            if (arguments.length) return void 0 === a ? this : this.each(function (d) {
                n.offset.setOffset(this, a, d)
            });
            var d, b, g, c, m = this[0];
            if (m) return m.getClientRects().length ? (g = m.getBoundingClientRect(), g.width || g.height ? (c = m.ownerDocument, b = Ja(c), d = c.documentElement, {
                top: g.top + b.pageYOffset - d.clientTop,
                left: g.left + b.pageXOffset - d.clientLeft
            }) : g) : {
                    top: 0,
                    left: 0
                }
        },
        position: function () {
            if (this[0]) {
                var a, d, b = this[0],
                    g = {
                        top: 0,
                        left: 0
                    };
                return "fixed" === n.css(b, "position") ? d = b.getBoundingClientRect() :
                    (a = this.offsetParent(), d = this.offset(), n.nodeName(a[0], "html") || (g = a.offset()), g = {
                        top: g.top + n.css(a[0], "borderTopWidth", !0),
                        left: g.left + n.css(a[0], "borderLeftWidth", !0)
                    }), {
                        top: d.top - g.top - n.css(b, "marginTop", !0),
                        left: d.left - g.left - n.css(b, "marginLeft", !0)
                    }
            }
        },
        offsetParent: function () {
            return this.map(function () {
                for (var a = this.offsetParent; a && "static" === n.css(a, "position");) a = a.offsetParent;
                return a || La
            })
        }
    });
    n.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function (a, d) {
        var b = "pageYOffset" ===
            d;
        n.fn[a] = function (g) {
            return ra(this, function (a, g, c) {
                var m = Ja(a);
                return void 0 === c ? m ? m[d] : a[g] : void (m ? m.scrollTo(b ? m.pageXOffset : c, b ? c : m.pageYOffset) : a[g] = c)
            }, a, g, arguments.length)
        }
    });
    n.each(["top", "left"], function (a, d) {
        n.cssHooks[d] = r(W.pixelPosition, function (a, b) {
            if (b) return b = p(a, d), Ma.test(b) ? n(a).position()[d] + "px" : b
        })
    });
    n.each({
        Height: "height",
        Width: "width"
    }, function (a, d) {
        n.each({
            padding: "inner" + a,
            content: d,
            "": "outer" + a
        }, function (b, g) {
            n.fn[g] = function (c, m) {
                var p = arguments.length && (b || "boolean" !=
                    typeof c),
                    r = b || (!0 === c || !0 === m ? "margin" : "border");
                return ra(this, function (d, b, c) {
                    var m;
                    return n.isWindow(d) ? 0 === g.indexOf("outer") ? d["inner" + a] : d.document.documentElement["client" + a] : 9 === d.nodeType ? (m = d.documentElement, Math.max(d.body["scroll" + a], m["scroll" + a], d.body["offset" + a], m["offset" + a], m["client" + a])) : void 0 === c ? n.css(d, b, r) : n.style(d, b, c, r)
                }, d, p ? c : void 0, p)
            }
        })
    });
    n.fn.extend({
        bind: function (a, d, b) {
            return this.on(a, null, d, b)
        },
        unbind: function (a, d) {
            return this.off(a, null, d)
        },
        delegate: function (a,
            d, b, g) {
            return this.on(d, a, b, g)
        },
        undelegate: function (a, d, b) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(d, a || "**", b)
        }
    });
    n.parseJSON = JSON.parse;
    "function" == typeof define && define.amd && define("jquery", [], function () {
        return n
    });
    var ec = b.jQuery,
        fc = b.$;
    return n.noConflict = function (a) {
        return b.$ === n && (b.$ = fc), a && b.jQuery === n && (b.jQuery = ec), n
    }, f || (b.jQuery = b.$ = n), n
});
var dvJQuery = jQuery.noConflict(!0),
    DocuViewarejQueryPlugins = {
        areRegistered: function () {
            return dvJQuery && dvJQuery.fn && dvJQuery.fn.HasDocuViewarePlugins ? !0 : !1
        },
        register: function () {
            DocuViewarejQueryPlugins.areRegistered() || (dvJQuery && dvJQuery.fn && dvJQuery.fn.jquery && 3 <= parseInt(dvJQuery.fn.jquery) && ("undefined" == typeof dvJQuery.migrateMute && (dvJQuery.migrateMute = !0), function (b, f) {
                function l(a) {
                    h[a] || (h[a] = !0, b.migrateWarnings.push(a))
                }

                function t(a, b, c, p) {
                    Object.defineProperty(a, b, {
                        configurable: !0,
                        enumerable: !0,
                        get: function () {
                            l(p);
                            return c
                        }
                    })
                }
                b.migrateVersion = "3.0.0";
                var h = {};
                b.migrateWarnings = [];
                void 0 === b.migrateTrace && (b.migrateTrace = !0);
                b.migrateReset = function () {
                    h = {};
                    b.migrateWarnings.length = 0
                };
                "BackCompat" === document.compatMode && l("jQuery is not compatible with Quirks Mode");
                var q = b.fn.init,
                    c = b.isNumeric,
                    e = b.find,
                    k = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
                    z = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;
                b.fn.init = function (a) {
                    var d = Array.prototype.slice.call(arguments);
                    "string" ===
                        typeof a && "#" === a && (l("jQuery( '#' ) is not a valid selector"), d[0] = []);
                    return q.apply(this, d)
                };
                b.fn.init.prototype = b.fn;
                b.find = function (a) {
                    var d = Array.prototype.slice.call(arguments);
                    if ("string" === typeof a && k.test(a)) try {
                        document.querySelector(a)
                    } catch (m) {
                        a = a.replace(z, function (a, d, b, g) {
                            return "[" + d + b + '"' + g + '"]'
                        });
                        try {
                            document.querySelector(a), l("Attribute selector with '#' must be quoted: " + d[0]), d[0] = a
                        } catch (p) {
                            l("Attribute selector with '#' was not fixed: " + d[0])
                        }
                    }
                    return e.apply(this, d)
                };
                for (var E in e) Object.prototype.hasOwnProperty.call(e,
                    E) && (b.find[E] = e[E]);
                b.fn.size = function () {
                    l("jQuery.fn.size() is deprecated; use the .length property");
                    return this.length
                };
                b.parseJSON = function () {
                    l("jQuery.parseJSON is deprecated; use JSON.parse");
                    return JSON.parse.apply(null, arguments)
                };
                b.isNumeric = function (a) {
                    var d = c(a),
                        m = a && a.toString();
                    a = !b.isArray(a) && 0 <= m - parseFloat(m) + 1;
                    d !== a && l("jQuery.isNumeric() should not be called on constructed objects");
                    return a
                };
                t(b, "unique", b.uniqueSort, "jQuery.unique is deprecated, use jQuery.uniqueSort");
                t(b.expr,
                    "filters", b.expr.pseudos, "jQuery.expr.filters is now jQuery.expr.pseudos");
                t(b.expr, ":", b.expr.pseudos, 'jQuery.expr[":"] is now jQuery.expr.pseudos');
                var N = b.ajax;
                b.ajax = function () {
                    var a = N.apply(this, arguments);
                    a.promise && (t(a, "success", a.done, "jQXHR.success is deprecated and removed"), t(a, "error", a.fail, "jQXHR.error is deprecated and removed"), t(a, "complete", a.always, "jQXHR.complete is deprecated and removed"));
                    return a
                };
                var M = b.fn.removeAttr,
                    w = b.fn.toggleClass,
                    y = /\S+/g;
                b.fn.removeAttr = function (a) {
                    var d =
                        this;
                    b.each(a.match(y), function (a, g) {
                        b.expr.match.bool.test(g) && (l("jQuery.fn.removeAttr no longer sets boolean properties: " + g), d.prop(g, !1))
                    });
                    return M.apply(this, arguments)
                };
                b.fn.toggleClass = function (a) {
                    if (void 0 !== a && "boolean" !== typeof a) return w.apply(this, arguments);
                    l("jQuery.fn.toggleClass( boolean ) is deprecated");
                    return this.each(function () {
                        var d = this.getAttribute && this.getAttribute("class") || "";
                        d && b.data(this, "__className__", d);
                        this.setAttribute && this.setAttribute("class", d || !1 === a ? "" :
                            b.data(this, "__className__") || "")
                    })
                };
                var C = !1;
                b.swap && b.each(["height", "width", "reliableMarginRight"], function (a, g) {
                    var d = b.cssHooks[g] && b.cssHooks[g].get;
                    d && (b.cssHooks[g].get = function () {
                        C = !0;
                        var a = d.apply(this, arguments);
                        C = !1;
                        return a
                    })
                });
                b.swap = function (a, b, c, p) {
                    var d, g = {};
                    C || l("jQuery.swap() is undocumented and deprecated");
                    for (d in b) g[d] = a.style[d], a.style[d] = b[d];
                    c = c.apply(a, p || []);
                    for (d in b) a.style[d] = g[d];
                    return c
                };
                var A = b.data;
                b.data = function (a, g, c) {
                    var d;
                    return g && g !== b.camelCase(g) &&
                        (d = b.hasData(a) && A.call(this, a)) && g in d ? (l("jQuery.data() always sets/gets camelCased names: " + g), 2 < arguments.length && (d[g] = c), d[g]) : A.apply(this, arguments)
                };
                var D = b.Tween.prototype.run;
                b.Tween.prototype.run = function (a) {
                    1 < b.easing[this.easing].length && (l('easing function "jQuery.easing.' + this.easing.toString() + '" should use only first argument'), b.easing[this.easing] = b.easing[this.easing].bind(b.easing, a, this.options.duration * a, 0, 1, this.options.duration));
                    D.apply(this, arguments)
                };
                var O = b.fn.load,
                    G = b.event.fix;
                b.event.props = [];
                b.event.fixHooks = {};
                b.event.fix = function (a) {
                    var d = a.type;
                    var c = this.fixHooks[d],
                        p = b.event.props;
                    if (p.length)
                        for (l("jQuery.event.props are deprecated and removed: " + p.join()); p.length;) b.event.addProp(p.pop());
                    if (c && !c._migrated_ && (c._migrated_ = !0, l("jQuery.event.fixHooks are deprecated and removed: " + d), (p = c.props) && p.length))
                        for (; p.length;) b.event.addProp(p.pop());
                    d = G.call(this, a);
                    return c && c.filter ? c.filter(d, a) : d
                };
                b.each(["load", "unload", "error"], function (a, g) {
                    b.fn[g] =
                        function () {
                            var a = Array.prototype.slice.call(arguments, 0);
                            if ("load" === g && "string" === typeof a[0]) return O.apply(this, a);
                            l("jQuery.fn." + g + "() is deprecated");
                            a.splice(0, 0, g);
                            if (arguments.length) return this.on.apply(this, a);
                            this.triggerHandler.apply(this, a);
                            return this
                        }
                });
                b(function () {
                    b(document).triggerHandler("ready")
                });
                b.event.special.ready = {
                    setup: function () {
                        this === document && l("'ready' event is deprecated")
                    }
                };
                b.fn.extend({
                    bind: function (a, b, c) {
                        l("jQuery.fn.bind() is deprecated");
                        return this.on(a, null,
                            b, c)
                    },
                    unbind: function (a, b) {
                        l("jQuery.fn.unbind() is deprecated");
                        return this.off(a, null, b)
                    },
                    delegate: function (a, b, c, p) {
                        l("jQuery.fn.delegate() is deprecated");
                        return this.on(b, a, c, p)
                    },
                    undelegate: function (a, b, c) {
                        l("jQuery.fn.undelegate() is deprecated");
                        return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
                    }
                });
                var fa = b.fn.offset;
                b.fn.offset = function () {
                    var a = this[0],
                        g = {
                            top: 0,
                            left: 0
                        };
                    return a && a.nodeType ? b.contains((a.ownerDocument || document).documentElement, a) ? fa.apply(this, arguments) : (l("jQuery.fn.offset() requires an element connected to a document"),
                        g) : (l("jQuery.fn.offset() requires a valid DOM element"), g)
                };
                var T = b.param;
                b.param = function (a, g) {
                    var d = b.ajaxSettings && b.ajaxSettings.traditional;
                    void 0 === g && d && (l("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"), g = d);
                    return T.call(this, a, g)
                };
                var a = b.fn.andSelf || b.fn.addBack;
                b.fn.andSelf = function () {
                    l("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");
                    return a.apply(this, arguments)
                };
                var ba = b.Deferred,
                    R = [
                        ["resolve", "done", b.Callbacks("once memory"), b.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", b.Callbacks("once memory"), b.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", b.Callbacks("memory"), b.Callbacks("memory")]
                    ];
                b.Deferred = function (a) {
                    var d = ba(),
                        c = d.promise();
                    d.pipe = c.pipe = function () {
                        var a = arguments;
                        l("deferred.pipe() is deprecated");
                        return b.Deferred(function (g) {
                            b.each(R, function (m, p) {
                                var r = b.isFunction(a[m]) && a[m];
                                d[p[1]](function () {
                                    var a = r && r.apply(this, arguments);
                                    if (a && b.isFunction(a.promise)) a.promise().done(g.resolve).fail(g.reject).progress(g.notify);
                                    else g[p[0] + "With"](this === c ? g.promise() : this, r ? [a] : arguments)
                                })
                            });
                            a = null
                        }).promise()
                    };
                    a && a.call(d, d);
                    return d
                }
            }(dvJQuery, window)), function (b) {
                function f(c, e) {
                    var k, h, E, f = c.nodeName.toLowerCase();
                    return "area" === f ? (k = c.parentNode, h = k.name, c.href && h && "map" === k.nodeName.toLowerCase() ? (E = b("img[usemap='#" + h + "']")[0], !!E && l(E)) : !1) : (/input|select|textarea|button|object/.test(f) ? !c.disabled : "a" === f ? c.href || e : e) && l(c)
                }

                function l(c) {
                    return b.expr.filters.visible(c) && !b(c).parents().addBack().filter(function () {
                        return "hidden" ===
                            b.css(this, "visibility")
                    }).length
                }
                b.dvUi = b.dvUi || {};
                b.extend(b.dvUi, {
                    version: "1.11.2",
                    keyCode: {
                        BACKSPACE: 8,
                        COMMA: 188,
                        DELETE: 46,
                        DOWN: 40,
                        END: 35,
                        ENTER: 13,
                        ESCAPE: 27,
                        HOME: 36,
                        LEFT: 37,
                        PAGE_DOWN: 34,
                        PAGE_UP: 33,
                        PERIOD: 190,
                        RIGHT: 39,
                        SPACE: 32,
                        TAB: 9,
                        UP: 38
                    }
                });
                b.fn.extend({
                    scrollParent: function (c) {
                        var e = this.css("position"),
                            k = "absolute" === e,
                            h = c ? /(auto|scroll|hidden)/ : /(auto|scroll)/;
                        c = this.parents().filter(function () {
                            var c = b(this);
                            return k && "static" === c.css("position") ? !1 : h.test(c.css("overflow") + c.css("overflow-y") +
                                c.css("overflow-x"))
                        }).eq(0);
                        return "fixed" !== e && c.length ? c : b(this[0].ownerDocument || document)
                    },
                    uniqueId: function () {
                        var b = 0;
                        return function () {
                            return this.each(function () {
                                this.id || (this.id = "dvUi-id-" + ++b)
                            })
                        }
                    }(),
                    removeUniqueId: function () {
                        return this.each(function () {
                            /^dvUi-id-\d+$/.test(this.id) && b(this).removeAttr("id")
                        })
                    }
                });
                b.extend(b.expr[":"], {
                    data: b.expr.createPseudo ? b.expr.createPseudo(function (c) {
                        return function (e) {
                            return !!b.data(e, c)
                        }
                    }) : function (c, e, k) {
                        return !!b.data(c, k[3])
                    },
                    focusable: function (c) {
                        return f(c,
                            !isNaN(b.attr(c, "tabindex")))
                    },
                    tabbable: function (c) {
                        var e = b.attr(c, "tabindex"),
                            k = isNaN(e);
                        return (k || 0 <= e) && f(c, !k)
                    }
                });
                b("<a>").outerWidth(1).jquery || b.each(["Width", "Height"], function (c, e) {
                    function k(c, e, k, z) {
                        return b.each(h, function () {
                            e -= parseFloat(b.css(c, "padding" + this)) || 0;
                            k && (e -= parseFloat(b.css(c, "border" + this + "Width")) || 0);
                            z && (e -= parseFloat(b.css(c, "margin" + this)) || 0)
                        }), e
                    }
                    var h = "Width" === e ? ["Left", "Right"] : ["Top", "Bottom"],
                        E = e.toLowerCase(),
                        f = {
                            innerWidth: b.fn.innerWidth,
                            innerHeight: b.fn.innerHeight,
                            outerWidth: b.fn.outerWidth,
                            outerHeight: b.fn.outerHeight
                        };
                    b.fn["inner" + e] = function (c) {
                        return void 0 === c ? f["inner" + e].call(this) : this.each(function () {
                            b(this).css(E, k(this, c) + "px")
                        })
                    };
                    b.fn["outer" + e] = function (c, h) {
                        return "number" != typeof c ? f["outer" + e].call(this, c) : this.each(function () {
                            b(this).css(E, k(this, c, !0, h) + "px")
                        })
                    }
                });
                b.fn.addBack || (b.fn.addBack = function (b) {
                    return this.add(null == b ? this.prevObject : this.prevObject.filter(b))
                });
                b("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (b.fn.removeData =
                    function (c) {
                        return function (e) {
                            return arguments.length ? c.call(this, b.camelCase(e)) : c.call(this)
                        }
                    }(b.fn.removeData));
                b.dvUi.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
                b.fn.extend({
                    focus: function (c) {
                        return function (e, k) {
                            return "number" == typeof e ? this.each(function () {
                                var c = this;
                                setTimeout(function () {
                                    b(c).focus();
                                    k && k.call(c)
                                }, e)
                            }) : c.apply(this, arguments)
                        }
                    }(b.fn.focus),
                    disableSelection: function () {
                        var b = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
                        return function () {
                            return this.bind(b +
                                ".dvUi-disableSelection",
                                function (b) {
                                    b.preventDefault()
                                })
                        }
                    }(),
                    enableSelection: function () {
                        return this.unbind(".dvUi-disableSelection")
                    },
                    zIndex: function (c) {
                        if (void 0 !== c) return this.css("zIndex", c);
                        if (this.length) {
                            var e, k;
                            for (c = b(this[0]); c.length && c[0] !== document;) {
                                if (e = c.css("position"), ("absolute" === e || "relative" === e || "fixed" === e) && (k = parseInt(c.css("zIndex"), 10), !isNaN(k) && 0 !== k)) return k;
                                c = c.parent()
                            }
                        }
                        return 0
                    }
                });
                b.dvUi.plugin = {
                    add: function (c, e, k) {
                        var h;
                        c = b.dvUi[c].prototype;
                        for (h in k) c.plugins[h] =
                            c.plugins[h] || [], c.plugins[h].push([e, k[h]])
                    },
                    call: function (b, e, k, h) {
                        if ((e = b.plugins[e]) && (h || b.element[0].parentNode && 11 !== b.element[0].parentNode.nodeType))
                            for (h = 0; e.length > h; h++) b.options[e[h][0]] && e[h][1].apply(b.element, k)
                    }
                };
                var t = 0,
                    h = Array.prototype.slice;
                b.cleanData = function (c) {
                    return function (e) {
                        var k, h, E;
                        for (E = 0; null != (h = e[E]); E++) try {
                            (k = b._data(h, "events")) && k.remove && b(h).triggerHandler("remove")
                        } catch (N) { }
                        c(e)
                    }
                }(b.cleanData);
                b.widget = function (c, e, k) {
                    var h, E, f, l, q = {},
                        y = c.split(".")[0];
                    return c = c.split(".")[1], h = y + "-" + c, k || (k = e, e = b.Widget), b.expr[":"][h.toLowerCase()] = function (c) {
                        return !!b.data(c, h)
                    }, b[y] = b[y] || {}, E = b[y][c], f = b[y][c] = function (b, c) {
                        return this._createWidget ? (arguments.length && this._createWidget(b, c), void 0) : new f(b, c)
                    }, b.extend(f, E, {
                        version: k.version,
                        _proto: b.extend({}, k),
                        _childConstructors: []
                    }), l = new e, l.options = b.widget.extend({}, l.options), b.each(k, function (c, k) {
                        return b.isFunction(k) ? (q[c] = function () {
                            var b = function () {
                                return e.prototype[c].apply(this, arguments)
                            },
                                h = function (b) {
                                    return e.prototype[c].apply(this, b)
                                };
                            return function () {
                                var c, e = this._super,
                                    z = this._superApply;
                                return this._super = b, this._superApply = h, c = k.apply(this, arguments), this._super = e, this._superApply = z, c
                            }
                        }(), void 0) : (q[c] = k, void 0)
                    }), f.prototype = b.widget.extend(l, {
                        widgetEventPrefix: E ? l.widgetEventPrefix || c : c
                    }, q, {
                            constructor: f,
                            namespace: y,
                            widgetName: c,
                            widgetFullName: h
                        }), E ? (b.each(E._childConstructors, function (c, e) {
                            c = e.prototype;
                            b.widget(c.namespace + "." + c.widgetName, f, e._proto)
                        }), delete E._childConstructors) :
                            e._childConstructors.push(f), b.widget.bridge(c, f), f
                };
                b.widget.extend = function (c) {
                    for (var e, k, z = h.call(arguments, 1), f = 0, l = z.length; l > f; f++)
                        for (e in z[f]) k = z[f][e], z[f].hasOwnProperty(e) && void 0 !== k && (c[e] = b.isPlainObject(k) ? b.isPlainObject(c[e]) ? b.widget.extend({}, c[e], k) : b.widget.extend({}, k) : k);
                    return c
                };
                b.widget.bridge = function (c, e) {
                    var k = e.prototype.widgetFullName || c;
                    b.fn[c] = function (z) {
                        var f = "string" == typeof z,
                            l = h.call(arguments, 1),
                            q = this;
                        return z = !f && l.length ? b.widget.extend.apply(null, [z].concat(l)) :
                            z, f ? this.each(function () {
                                var e, h = b.data(this, k);
                                return "instance" === z ? (q = h, !1) : h ? b.isFunction(h[z]) && "_" !== z.charAt(0) ? (e = h[z].apply(h, l), e !== h && void 0 !== e ? (q = e && e.jquery ? q.pushStack(e.get()) : e, !1) : void 0) : b.error("no such method '" + z + "' for " + c + " widget instance") : b.error("cannot call methods on " + c + " prior to initialization; attempted to call method '" + z + "'")
                            }) : this.each(function () {
                                var c = b.data(this, k);
                                c ? (c.option(z || {}), c._init && c._init()) : b.data(this, k, new e(z, this))
                            }), q
                    }
                };
                b.Widget = function () { };
                b.Widget._childConstructors = [];
                b.Widget.prototype = {
                    widgetName: "widget",
                    widgetEventPrefix: "",
                    defaultElement: "<div>",
                    options: {
                        disabled: !1,
                        create: null
                    },
                    _createWidget: function (c, e) {
                        e = b(e || this.defaultElement || this)[0];
                        this.element = b(e);
                        this.uuid = t++;
                        this.eventNamespace = "." + this.widgetName + this.uuid;
                        this.bindings = b();
                        this.hoverable = b();
                        this.focusable = b();
                        e !== this && (b.data(e, this.widgetFullName, this), this._on(!0, this.element, {
                            remove: function (b) {
                                b.target === e && this.destroy()
                            }
                        }), this.document = b(e.style ? e.ownerDocument :
                            e.document || e), this.window = b(this.document[0].defaultView || this.document[0].parentWindow));
                        this.options = b.widget.extend({}, this.options, this._getCreateOptions(), c);
                        this._create();
                        this._trigger("create", null, this._getCreateEventData());
                        this._init()
                    },
                    _getCreateOptions: b.noop,
                    _getCreateEventData: b.noop,
                    _create: b.noop,
                    _init: b.noop,
                    destroy: function () {
                        this._destroy();
                        this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));
                        this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName +
                            "-disabled dvUi-state-disabled");
                        this.bindings.unbind(this.eventNamespace);
                        this.hoverable.removeClass("dvUi-state-hover");
                        this.focusable.removeClass("dvUi-state-focus")
                    },
                    _destroy: b.noop,
                    widget: function () {
                        return this.element
                    },
                    option: function (c, e) {
                        var k, h, f = c;
                        if (0 === arguments.length) return b.widget.extend({}, this.options);
                        if ("string" == typeof c)
                            if (f = {}, k = c.split("."), c = k.shift(), k.length) {
                                var l = f[c] = b.widget.extend({}, this.options[c]);
                                for (h = 0; k.length - 1 > h; h++) l[k[h]] = l[k[h]] || {}, l = l[k[h]];
                                if (c = k.pop(),
                                    1 === arguments.length) return void 0 === l[c] ? null : l[c];
                                l[c] = e
                            } else {
                                if (1 === arguments.length) return void 0 === this.options[c] ? null : this.options[c];
                                f[c] = e
                            } return this._setOptions(f), this
                    },
                    _setOptions: function (b) {
                        for (var c in b) this._setOption(c, b[c]);
                        return this
                    },
                    _setOption: function (b, e) {
                        return this.options[b] = e, "disabled" === b && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!e), e && (this.hoverable.removeClass("dvUi-state-hover"), this.focusable.removeClass("dvUi-state-focus"))), this
                    },
                    enable: function () {
                        return this._setOptions({
                            disabled: !1
                        })
                    },
                    disable: function () {
                        return this._setOptions({
                            disabled: !0
                        })
                    },
                    _on: function (c, e, k) {
                        var h, f = this;
                        "boolean" != typeof c && (k = e, e = c, c = !1);
                        k ? (e = h = b(e), this.bindings = this.bindings.add(e)) : (k = e, e = this.element, h = this.widget());
                        b.each(k, function (k, z) {
                            function E() {
                                return c || !0 !== f.options.disabled && !b(this).hasClass("dvUi-state-disabled") ? ("string" == typeof z ? f[z] : z).apply(f, arguments) : void 0
                            }
                            "string" != typeof z && (E.guid = z.guid = z.guid || E.guid || b.guid++);
                            var l = k.match(/^([\w:-]*)\s*(.*)$/);
                            k = l[1] + f.eventNamespace;
                            (l =
                                l[2]) ? h.delegate(l, k, E) : e.bind(k, E)
                        })
                    },
                    _off: function (c, e) {
                        e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;
                        c.unbind(e).undelegate(e);
                        this.bindings = b(this.bindings.not(c).get());
                        this.focusable = b(this.focusable.not(c).get());
                        this.hoverable = b(this.hoverable.not(c).get())
                    },
                    _delay: function (b, e) {
                        var c = this;
                        return setTimeout(function () {
                            return ("string" == typeof b ? c[b] : b).apply(c, arguments)
                        }, e || 0)
                    },
                    _hoverable: function (c) {
                        this.hoverable = this.hoverable.add(c);
                        this._on(c, {
                            mouseenter: function (c) {
                                b(c.currentTarget).addClass("dvUi-state-hover")
                            },
                            mouseleave: function (c) {
                                b(c.currentTarget).removeClass("dvUi-state-hover")
                            }
                        })
                    },
                    _focusable: function (c) {
                        this.focusable = this.focusable.add(c);
                        this._on(c, {
                            focusin: function (c) {
                                b(c.currentTarget).addClass("dvUi-state-focus")
                            },
                            focusout: function (c) {
                                b(c.currentTarget).removeClass("dvUi-state-focus")
                            }
                        })
                    },
                    _trigger: function (c, e, k) {
                        var h, f = this.options[c];
                        if (k = k || {}, e = b.Event(e), e.type = (c === this.widgetEventPrefix ? c : this.widgetEventPrefix + c).toLowerCase(), e.target = this.element[0], c = e.originalEvent)
                            for (h in c) h in
                                e || (e[h] = c[h]);
                        return this.element.trigger(e, k), !(b.isFunction(f) && !1 === f.apply(this.element[0], [e].concat(k)) || e.isDefaultPrevented())
                    }
                };
                b.each({
                    show: "fadeIn",
                    hide: "fadeOut"
                }, function (c, e) {
                    b.Widget.prototype["_" + c] = function (k, h, f) {
                        "string" == typeof h && (h = {
                            effect: h
                        });
                        var z = h ? !0 === h || "number" == typeof h ? e : h.effect || e : c;
                        h = h || {};
                        "number" == typeof h && (h = {
                            duration: h
                        });
                        var E = !b.isEmptyObject(h);
                        h.complete = f;
                        h.delay && k.delay(h.delay);
                        E && b.effects && b.effects.effect[z] ? k[c](h) : z !== c && k[z] ? k[z](h.duration, h.easing,
                            f) : k.queue(function (e) {
                                b(this)[c]();
                                f && f.call(k[0]);
                                e()
                            })
                    }
                });
                b.widget;
                var q = !1;
                b(document).mouseup(function () {
                    q = !1
                });
                b.widget("dvUi.mouse", {
                    version: "1.11.2",
                    options: {
                        cancel: "input,textarea,button,select,option",
                        distance: 1,
                        delay: 0
                    },
                    _mouseInit: function () {
                        var c = this;
                        this.element.bind("mousedown." + this.widgetName, function (b) {
                            return c._mouseDown(b)
                        }).bind("click." + this.widgetName, function (e) {
                            return !0 === b.data(e.target, c.widgetName + ".preventClickEvent") ? (b.removeData(e.target, c.widgetName + ".preventClickEvent"),
                                e.stopImmediatePropagation(), !1) : void 0
                        });
                        this.started = !1
                    },
                    _mouseDestroy: function () {
                        this.element.unbind("." + this.widgetName);
                        this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
                    },
                    _mouseDown: function (c) {
                        if (!q) {
                            this._mouseMoved = !1;
                            this._mouseStarted && this._mouseUp(c);
                            this._mouseDownEvent = c;
                            var e = this,
                                k = 1 === c.which,
                                h = "string" == typeof this.options.cancel && c.target.nodeName ? b(c.target).closest(this.options.cancel).length :
                                    !1;
                            return k && !h && this._mouseCapture(c) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                                e.mouseDelayMet = !0
                            }, this.options.delay)), this._mouseDistanceMet(c) && this._mouseDelayMet(c) && (this._mouseStarted = !1 !== this._mouseStart(c), !this._mouseStarted) ? (c.preventDefault(), !0) : (!0 === b.data(c.target, this.widgetName + ".preventClickEvent") && b.removeData(c.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (b) {
                                return e._mouseMove(b)
                            },
                                this._mouseUpDelegate = function (b) {
                                    return e._mouseUp(b)
                                }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), c.preventDefault(), q = !0, !0)) : !0
                        }
                    },
                    _mouseMove: function (c) {
                        return this._mouseMoved && (b.dvUi.ie && (!document.documentMode || 9 > document.documentMode) && !c.button || !c.which) ? this._mouseUp(c) : ((c.which || c.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(c), c.preventDefault()) : (this._mouseDistanceMet(c) && this._mouseDelayMet(c) &&
                            (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, c), this._mouseStarted ? this._mouseDrag(c) : this._mouseUp(c)), !this._mouseStarted))
                    },
                    _mouseUp: function (c) {
                        return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, c.target === this._mouseDownEvent.target && b.data(c.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(c)), q = !1, !1
                    },
                    _mouseDistanceMet: function (b) {
                        return Math.max(Math.abs(this._mouseDownEvent.pageX -
                            b.pageX), Math.abs(this._mouseDownEvent.pageY - b.pageY)) >= this.options.distance
                    },
                    _mouseDelayMet: function () {
                        return this.mouseDelayMet
                    },
                    _mouseStart: function () { },
                    _mouseDrag: function () { },
                    _mouseStop: function () { },
                    _mouseCapture: function () {
                        return !0
                    }
                });
                (function () {
                    function c(b, c, e) {
                        return [parseFloat(b[0]) * (D.test(b[0]) ? c / 100 : 1), parseFloat(b[1]) * (D.test(b[1]) ? e / 100 : 1)]
                    }

                    function e(c) {
                        var e = c[0];
                        return 9 === e.nodeType ? {
                            width: c.width(),
                            height: c.height(),
                            offset: {
                                top: 0,
                                left: 0
                            }
                        } : b.isWindow(e) ? {
                            width: c.width(),
                            height: c.height(),
                            offset: {
                                top: c.scrollTop(),
                                left: c.scrollLeft()
                            }
                        } : e.preventDefault ? {
                            width: 0,
                            height: 0,
                            offset: {
                                top: e.pageY,
                                left: e.pageX
                            }
                        } : {
                                        width: c.outerWidth(),
                                        height: c.outerHeight(),
                                        offset: c.offset()
                                    }
                    }
                    b.dvUi = b.dvUi || {};
                    var k, h, f = Math.max,
                        l = Math.abs,
                        q = Math.round,
                        w = /left|center|right/,
                        y = /top|center|bottom/,
                        t = /[\+\-]\d+(\.[\d]+)?%?/,
                        A = /^\w+/,
                        D = /%$/,
                        O = b.fn.position;
                    b.position = {
                        scrollbarWidth: function () {
                            if (void 0 !== k) return k;
                            var c, e, h = b("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                                a = h.children()[0];
                            return b("body").append(h), c = a.offsetWidth, h.css("overflow", "scroll"), e = a.offsetWidth, c === e && (e = h[0].clientWidth), h.remove(), k = c - e
                        },
                        getScrollInfo: function (c) {
                            var e = c.isWindow || c.isDocument ? "" : c.element.css("overflow-x"),
                                k = c.isWindow || c.isDocument ? "" : c.element.css("overflow-y");
                            e = "scroll" === e || "auto" === e && c.width < c.element[0].scrollWidth;
                            return {
                                width: "scroll" === k || "auto" === k && c.height < c.element[0].scrollHeight ? b.position.scrollbarWidth() : 0,
                                height: e ? b.position.scrollbarWidth() : 0
                            }
                        },
                        getWithinInfo: function (c) {
                            c = b(c || window);
                            var e = b.isWindow(c[0]),
                                k = !!c[0] && 9 === c[0].nodeType;
                            return {
                                element: c,
                                isWindow: e,
                                isDocument: k,
                                offset: c.offset() || {
                                    left: 0,
                                    top: 0
                                },
                                scrollLeft: c.scrollLeft(),
                                scrollTop: c.scrollTop(),
                                width: e || k ? c.width() : c.outerWidth(),
                                height: e || k ? c.height() : c.outerHeight()
                            }
                        }
                    };
                    b.fn.position = function (k) {
                        if (!k || !k.of) return O.apply(this, arguments);
                        k = b.extend({}, k);
                        var z, E, a, N, M, d, g = b(k.of),
                            m = b.position.getWithinInfo(k.within),
                            p = b.position.getScrollInfo(m),
                            r = (k.collision || "flip").split(" "),
                            v = {};
                        return d = e(g), g[0].preventDefault && (k.at = "left top"), E = d.width, a = d.height, N = d.offset, M = b.extend({}, N), b.each(["my", "at"], function () {
                            var a = (k[this] || "").split(" ");
                            1 === a.length && (a = w.test(a[0]) ? a.concat(["center"]) : y.test(a[0]) ? ["center"].concat(a) : ["center", "center"]);
                            a[0] = w.test(a[0]) ? a[0] : "center";
                            a[1] = y.test(a[1]) ? a[1] : "center";
                            var d = t.exec(a[0]);
                            var b = t.exec(a[1]);
                            v[this] = [d ? d[0] : 0, b ? b[0] : 0];
                            k[this] = [A.exec(a[0])[0], A.exec(a[1])[0]]
                        }), 1 === r.length && (r[1] = r[0]), "right" === k.at[0] ? M.left += E :
                                "center" === k.at[0] && (M.left += E / 2), "bottom" === k.at[1] ? M.top += a : "center" === k.at[1] && (M.top += a / 2), z = c(v.at, E, a), M.left += z[0], M.top += z[1], this.each(function () {
                                    var d, e = b(this),
                                        I = e.outerWidth(),
                                        U = e.outerHeight(),
                                        ea = parseInt(b.css(this, "marginLeft"), 10) || 0,
                                        w = parseInt(b.css(this, "marginTop"), 10) || 0,
                                        t = I + ea + (parseInt(b.css(this, "marginRight"), 10) || 0) + p.width,
                                        y = U + w + (parseInt(b.css(this, "marginBottom"), 10) || 0) + p.height,
                                        P = b.extend({}, M),
                                        G = c(v.my, e.outerWidth(), e.outerHeight());
                                    "right" === k.my[0] ? P.left -= I : "center" ===
                                        k.my[0] && (P.left -= I / 2);
                                    "bottom" === k.my[1] ? P.top -= U : "center" === k.my[1] && (P.top -= U / 2);
                                    P.left += G[0];
                                    P.top += G[1];
                                    h || (P.left = q(P.left), P.top = q(P.top));
                                    var C = {
                                        marginLeft: ea,
                                        marginTop: w
                                    };
                                    b.each(["left", "top"], function (d, g) {
                                        b.dvUi.position[r[d]] && b.dvUi.position[r[d]][g](P, {
                                            targetWidth: E,
                                            targetHeight: a,
                                            elemWidth: I,
                                            elemHeight: U,
                                            collisionPosition: C,
                                            collisionWidth: t,
                                            collisionHeight: y,
                                            offset: [z[0] + G[0], z[1] + G[1]],
                                            my: k.my,
                                            at: k.at,
                                            within: m,
                                            elem: e
                                        })
                                    });
                                    k.using && (d = function (d) {
                                        var b = N.left - P.left,
                                            c = b + E - I,
                                            m = N.top -
                                                P.top,
                                            p = m + a - U,
                                            r = {
                                                target: {
                                                    element: g,
                                                    left: N.left,
                                                    top: N.top,
                                                    width: E,
                                                    height: a
                                                },
                                                element: {
                                                    element: e,
                                                    left: P.left,
                                                    top: P.top,
                                                    width: I,
                                                    height: U
                                                },
                                                horizontal: 0 > c ? "left" : 0 < b ? "right" : "center",
                                                vertical: 0 > p ? "top" : 0 < m ? "bottom" : "middle"
                                            };
                                        I > E && E > l(b + c) && (r.horizontal = "center");
                                        U > a && a > l(m + p) && (r.vertical = "middle");
                                        r.important = f(l(b), l(c)) > f(l(m), l(p)) ? "horizontal" : "vertical";
                                        k.using.call(this, d, r)
                                    });
                                    e.offset(b.extend(P, {
                                        using: d
                                    }))
                                })
                    };
                    b.dvUi.position = {
                        fit: {
                            left: function (b, c) {
                                var e, a = c.within,
                                    k = a.isWindow ? a.scrollLeft :
                                        a.offset.left;
                                a = a.width;
                                var h = b.left - c.collisionPosition.marginLeft,
                                    d = k - h,
                                    g = h + c.collisionWidth - a - k;
                                c.collisionWidth > a ? 0 < d && 0 >= g ? (e = b.left + d + c.collisionWidth - a - k, b.left += d - e) : b.left = 0 < g && 0 >= d ? k : d > g ? k + a - c.collisionWidth : k : 0 < d ? b.left += d : 0 < g ? b.left -= g : b.left = f(b.left - h, b.left)
                            },
                            top: function (b, c) {
                                var e, a = c.within;
                                a = a.isWindow ? a.scrollTop : a.offset.top;
                                var k = c.within.height,
                                    h = b.top - c.collisionPosition.marginTop,
                                    d = a - h,
                                    g = h + c.collisionHeight - k - a;
                                c.collisionHeight > k ? 0 < d && 0 >= g ? (e = b.top + d + c.collisionHeight - k -
                                    a, b.top += d - e) : b.top = 0 < g && 0 >= d ? a : d > g ? a + k - c.collisionHeight : a : 0 < d ? b.top += d : 0 < g ? b.top -= g : b.top = f(b.top - h, b.top)
                            }
                        },
                        flip: {
                            left: function (b, c) {
                                var e, a, k = c.within,
                                    h = k.offset.left + k.scrollLeft,
                                    d = k.width;
                                k = k.isWindow ? k.scrollLeft : k.offset.left;
                                var g = b.left - c.collisionPosition.marginLeft,
                                    m = g - k;
                                g = g + c.collisionWidth - d - k;
                                var p = "left" === c.my[0] ? -c.elemWidth : "right" === c.my[0] ? c.elemWidth : 0,
                                    r = "left" === c.at[0] ? c.targetWidth : "right" === c.at[0] ? -c.targetWidth : 0,
                                    v = -2 * c.offset[0];
                                0 > m ? (e = b.left + p + r + v + c.collisionWidth - d -
                                    h, (0 > e || l(m) > e) && (b.left += p + r + v)) : 0 < g && (a = b.left - c.collisionPosition.marginLeft + p + r + v - k, (0 < a || g > l(a)) && (b.left += p + r + v))
                            },
                            top: function (b, c) {
                                var e, a, k = c.within,
                                    h = k.offset.top + k.scrollTop,
                                    d = k.height;
                                k = k.isWindow ? k.scrollTop : k.offset.top;
                                var g = b.top - c.collisionPosition.marginTop,
                                    m = g - k;
                                g = g + c.collisionHeight - d - k;
                                var p = "top" === c.my[1] ? -c.elemHeight : "bottom" === c.my[1] ? c.elemHeight : 0,
                                    r = "top" === c.at[1] ? c.targetHeight : "bottom" === c.at[1] ? -c.targetHeight : 0,
                                    v = -2 * c.offset[1];
                                0 > m ? (a = b.top + p + r + v + c.collisionHeight -
                                    d - h, b.top + p + r + v > m && (0 > a || l(m) > a) && (b.top += p + r + v)) : 0 < g && (e = b.top - c.collisionPosition.marginTop + p + r + v - k, b.top + p + r + v > g && (0 < e || g > l(e)) && (b.top += p + r + v))
                            }
                        },
                        flipfit: {
                            left: function () {
                                b.dvUi.position.flip.left.apply(this, arguments);
                                b.dvUi.position.fit.left.apply(this, arguments)
                            },
                            top: function () {
                                b.dvUi.position.flip.top.apply(this, arguments);
                                b.dvUi.position.fit.top.apply(this, arguments)
                            }
                        }
                    };
                    (function () {
                        var c, e = document.getElementsByTagName("body")[0];
                        var k = document.createElement("div");
                        var a = document.createElement(e ?
                            "div" : "body");
                        var z = {
                            visibility: "hidden",
                            width: 0,
                            height: 0,
                            border: 0,
                            margin: 0,
                            background: "none"
                        };
                        e && b.extend(z, {
                            position: "absolute",
                            left: "-1000px",
                            top: "-1000px"
                        });
                        for (c in z) a.style[c] = z[c];
                        a.appendChild(k);
                        z = e || document.documentElement;
                        z.insertBefore(a, z.firstChild);
                        k.style.cssText = "position: absolute; left: 10.7432222px;";
                        k = b(k).offset().left;
                        h = 10 < k && 11 > k;
                        a.innerHTML = "";
                        z.removeChild(a)
                    })()
                })();
                b.dvUi.position;
                b.widget("dvUi.draggable", b.dvUi.mouse, {
                    version: "1.11.2",
                    widgetEventPrefix: "drag",
                    options: {
                        addClasses: !0,
                        appendTo: "parent",
                        axis: !1,
                        connectToSortable: !1,
                        containment: !1,
                        cursor: "auto",
                        cursorAt: !1,
                        grid: !1,
                        handle: !1,
                        helper: "original",
                        iframeFix: !1,
                        opacity: !1,
                        refreshPositions: !1,
                        revert: !1,
                        revertDuration: 500,
                        scope: "default",
                        scroll: !0,
                        scrollSensitivity: 20,
                        scrollSpeed: 20,
                        snap: !1,
                        snapMode: "both",
                        snapTolerance: 20,
                        stack: !1,
                        zIndex: !1,
                        drag: null,
                        start: null,
                        stop: null
                    },
                    _create: function () {
                        "original" === this.options.helper && this._setPositionRelative();
                        this.options.addClasses && this.element.addClass("dvUi-draggable");
                        this.options.disabled &&
                            this.element.addClass("dvUi-draggable-disabled");
                        this._setHandleClassName();
                        this._mouseInit()
                    },
                    _setOption: function (b, e) {
                        this._super(b, e);
                        "handle" === b && (this._removeHandleClassName(), this._setHandleClassName())
                    },
                    _destroy: function () {
                        return (this.helper || this.element).is(".dvUi-draggable-dragging") ? (this.destroyOnClear = !0, void 0) : (this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"), this._removeHandleClassName(), this._mouseDestroy(), void 0)
                    },
                    _mouseCapture: function (c) {
                        var e =
                            this.options;
                        return this._blurActiveElement(c), this.helper || e.disabled || 0 < b(c.target).closest(".dvUi-resizable-handle").length ? !1 : (this.handle = this._getHandle(c), this.handle ? (this._blockFrames(!0 === e.iframeFix ? "iframe" : e.iframeFix), !0) : !1)
                    },
                    _blockFrames: function (c) {
                        this.iframeBlocks = this.document.find(c).map(function () {
                            var c = b(this);
                            return b("<div>").css("position", "absolute").appendTo(c.parent()).outerWidth(c.outerWidth()).outerHeight(c.outerHeight()).offset(c.offset())[0]
                        })
                    },
                    _unblockFrames: function () {
                        this.iframeBlocks &&
                            (this.iframeBlocks.remove(), delete this.iframeBlocks)
                    },
                    _blurActiveElement: function (c) {
                        var e = this.document[0];
                        if (this.handleElement.is(c.target)) try {
                            e.activeElement && "body" !== e.activeElement.nodeName.toLowerCase() && b(e.activeElement).blur()
                        } catch (k) { }
                    },
                    _mouseStart: function (c) {
                        var e = this.options;
                        return this.helper = this._createHelper(c), this.helper.addClass("dvUi-draggable-dragging"), this._cacheHelperProportions(), b.dvUi.ddmanager && (b.dvUi.ddmanager.current = this), this._cacheMargins(), this.cssPosition =
                            this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = 0 < this.helper.parents().filter(function () {
                                return "fixed" === b(this).css("position")
                            }).length, this.positionAbs = this.element.offset(), this._refreshOffsets(c), this.originalPosition = this.position = this._generatePosition(c, !1), this.originalPageX = c.pageX, this.originalPageY = c.pageY, e.cursorAt && this._adjustOffsetFromHelper(e.cursorAt), this._setContainment(), !1 === this._trigger("start",
                                c) ? (this._clear(), !1) : (this._cacheHelperProportions(), b.dvUi.ddmanager && !e.dropBehaviour && b.dvUi.ddmanager.prepareOffsets(this, c), this._normalizeRightBottom(), this._mouseDrag(c, !0), b.dvUi.ddmanager && b.dvUi.ddmanager.dragStart(this, c), !0)
                    },
                    _refreshOffsets: function (b) {
                        this.offset = {
                            top: this.positionAbs.top - this.margins.top,
                            left: this.positionAbs.left - this.margins.left,
                            scroll: !1,
                            parent: this._getParentOffset(),
                            relative: this._getRelativeOffset()
                        };
                        this.offset.click = {
                            left: b.pageX - this.offset.left,
                            top: b.pageY -
                                this.offset.top
                        }
                    },
                    _mouseDrag: function (c, e) {
                        if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(c, !0), this.positionAbs = this._convertPositionTo("absolute"), !e) {
                            e = this._uiHash();
                            if (!1 === this._trigger("drag", c, e)) return this._mouseUp({}), !1;
                            this.position = e.position
                        }
                        return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", b.dvUi.ddmanager && b.dvUi.ddmanager.drag(this, c), !1
                    },
                    _mouseStop: function (c) {
                        var e =
                            this,
                            k = !1;
                        return b.dvUi.ddmanager && !this.options.dropBehaviour && (k = b.dvUi.ddmanager.drop(this, c)), this.dropped && (k = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !k || "valid" === this.options.revert && k || !0 === this.options.revert || b.isFunction(this.options.revert) && this.options.revert.call(this.element, k) ? b(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                            !1 !== e._trigger("stop", c) && e._clear()
                        }) : !1 !== this._trigger("stop", c) && this._clear(), !1
                    },
                    _mouseUp: function (c) {
                        return this._unblockFrames(), b.dvUi.ddmanager && b.dvUi.ddmanager.dragStop(this, c), this.handleElement.is(c.target) && this.element.focus(), b.dvUi.mouse.prototype._mouseUp.call(this, c)
                    },
                    cancel: function () {
                        return this.helper.is(".dvUi-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
                    },
                    _getHandle: function (c) {
                        return this.options.handle ? !!b(c.target).closest(this.element.find(this.options.handle)).length : !0
                    },
                    _setHandleClassName: function () {
                        this.handleElement = this.options.handle ?
                            this.element.find(this.options.handle) : this.element;
                        this.handleElement.addClass("dvUi-draggable-handle")
                    },
                    _removeHandleClassName: function () {
                        this.handleElement.removeClass("dvUi-draggable-handle")
                    },
                    _createHelper: function (c) {
                        var e = this.options,
                            k = b.isFunction(e.helper);
                        c = k ? b(e.helper.apply(this.element[0], [c])) : "clone" === e.helper ? this.element.clone().removeAttr("id") : this.element;
                        return c.parents("body").length || c.appendTo("parent" === e.appendTo ? this.element[0].parentNode : e.appendTo), k && c[0] === this.element[0] &&
                            this._setPositionRelative(), c[0] === this.element[0] || /(fixed|absolute)/.test(c.css("position")) || c.css("position", "absolute"), c
                    },
                    _setPositionRelative: function () {
                        /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
                    },
                    _adjustOffsetFromHelper: function (c) {
                        "string" == typeof c && (c = c.split(" "));
                        b.isArray(c) && (c = {
                            left: +c[0],
                            top: +c[1] || 0
                        });
                        "left" in c && (this.offset.click.left = c.left + this.margins.left);
                        "right" in c && (this.offset.click.left = this.helperProportions.width - c.right +
                            this.margins.left);
                        "top" in c && (this.offset.click.top = c.top + this.margins.top);
                        "bottom" in c && (this.offset.click.top = this.helperProportions.height - c.bottom + this.margins.top)
                    },
                    _isRootNode: function (b) {
                        return /(html|body)/i.test(b.tagName) || b === this.document[0]
                    },
                    _getParentOffset: function () {
                        var c = this.offsetParent.offset(),
                            e = this.document[0];
                        return "absolute" === this.cssPosition && this.scrollParent[0] !== e && b.contains(this.scrollParent[0], this.offsetParent[0]) && (c.left += this.scrollParent.scrollLeft(), c.top +=
                            this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (c = {
                                top: 0,
                                left: 0
                            }), {
                                top: c.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                                left: c.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                            }
                    },
                    _getRelativeOffset: function () {
                        if ("relative" !== this.cssPosition) return {
                            top: 0,
                            left: 0
                        };
                        var b = this.element.position(),
                            e = this._isRootNode(this.scrollParent[0]);
                        return {
                            top: b.top - (parseInt(this.helper.css("top"), 10) || 0) + (e ? 0 : this.scrollParent.scrollTop()),
                            left: b.left - (parseInt(this.helper.css("left"),
                                10) || 0) + (e ? 0 : this.scrollParent.scrollLeft())
                        }
                    },
                    _cacheMargins: function () {
                        this.margins = {
                            left: parseInt(this.element.css("marginLeft"), 10) || 0,
                            top: parseInt(this.element.css("marginTop"), 10) || 0,
                            right: parseInt(this.element.css("marginRight"), 10) || 0,
                            bottom: parseInt(this.element.css("marginBottom"), 10) || 0
                        }
                    },
                    _cacheHelperProportions: function () {
                        this.helperProportions = {
                            width: this.helper.outerWidth(),
                            height: this.helper.outerHeight()
                        }
                    },
                    _setContainment: function () {
                        var c, e, k, h = this.options,
                            f = this.document[0];
                        return this.relativeContainer =
                            null, h.containment ? "window" === h.containment ? (this.containment = [b(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, b(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, b(window).scrollLeft() + b(window).width() - this.helperProportions.width - this.margins.left, b(window).scrollTop() + (b(window).height() || f.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], void 0) : "document" === h.containment ? (this.containment = [0, 0, b(f).width() - this.helperProportions.width -
                                this.margins.left, (b(f).height() || f.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
                            ], void 0) : h.containment.constructor === Array ? (this.containment = h.containment, void 0) : ("parent" === h.containment && (h.containment = this.helper[0].parentNode), e = b(h.containment), k = e[0], k && (c = /(scroll|auto)/.test(e.css("overflow")), this.containment = [(parseInt(e.css("borderLeftWidth"), 10) || 0) + (parseInt(e.css("paddingLeft"), 10) || 0), (parseInt(e.css("borderTopWidth"), 10) || 0) + (parseInt(e.css("paddingTop"),
                                10) || 0), (c ? Math.max(k.scrollWidth, k.offsetWidth) : k.offsetWidth) - (parseInt(e.css("borderRightWidth"), 10) || 0) - (parseInt(e.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (c ? Math.max(k.scrollHeight, k.offsetHeight) : k.offsetHeight) - (parseInt(e.css("borderBottomWidth"), 10) || 0) - (parseInt(e.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = e), void 0) : (this.containment = null, void 0)
                    },
                    _convertPositionTo: function (b,
                        e) {
                        e || (e = this.position);
                        b = "absolute" === b ? 1 : -1;
                        var c = this._isRootNode(this.scrollParent[0]);
                        return {
                            top: e.top + this.offset.relative.top * b + this.offset.parent.top * b - ("fixed" === this.cssPosition ? -this.offset.scroll.top : c ? 0 : this.offset.scroll.top) * b,
                            left: e.left + this.offset.relative.left * b + this.offset.parent.left * b - ("fixed" === this.cssPosition ? -this.offset.scroll.left : c ? 0 : this.offset.scroll.left) * b
                        }
                    },
                    _generatePosition: function (b, e) {
                        var c, h, f, l, q = this.options,
                            w = this._isRootNode(this.scrollParent[0]),
                            t = b.pageX,
                            C = b.pageY;
                        return w && this.offset.scroll || (this.offset.scroll = {
                            top: this.scrollParent.scrollTop(),
                            left: this.scrollParent.scrollLeft()
                        }), e && (this.containment && (this.relativeContainer ? (h = this.relativeContainer.offset(), c = [this.containment[0] + h.left, this.containment[1] + h.top, this.containment[2] + h.left, this.containment[3] + h.top]) : c = this.containment, b.pageX - this.offset.click.left < c[0] && (t = c[0] + this.offset.click.left), b.pageY - this.offset.click.top < c[1] && (C = c[1] + this.offset.click.top), b.pageX - this.offset.click.left >
                            c[2] && (t = c[2] + this.offset.click.left), b.pageY - this.offset.click.top > c[3] && (C = c[3] + this.offset.click.top)), q.grid && (f = q.grid[1] ? this.originalPageY + Math.round((C - this.originalPageY) / q.grid[1]) * q.grid[1] : this.originalPageY, C = c ? f - this.offset.click.top >= c[1] || f - this.offset.click.top > c[3] ? f : f - this.offset.click.top >= c[1] ? f - q.grid[1] : f + q.grid[1] : f, l = q.grid[0] ? this.originalPageX + Math.round((t - this.originalPageX) / q.grid[0]) * q.grid[0] : this.originalPageX, t = c ? l - this.offset.click.left >= c[0] || l - this.offset.click.left >
                                c[2] ? l : l - this.offset.click.left >= c[0] ? l - q.grid[0] : l + q.grid[0] : l), "y" === q.axis && (t = this.originalPageX), "x" === q.axis && (C = this.originalPageY)), {
                                top: C - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : w ? 0 : this.offset.scroll.top),
                                left: t - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : w ? 0 : this.offset.scroll.left)
                            }
                    },
                    _clear: function () {
                        this.helper.removeClass("dvUi-draggable-dragging");
                        this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove();
                        this.helper = null;
                        this.cancelHelperRemoval = !1;
                        this.destroyOnClear && this.destroy()
                    },
                    _normalizeRightBottom: function () {
                        "y" !== this.options.axis && "auto" !== this.helper.css("right") && (this.helper.width(this.helper.width()), this.helper.css("right", "auto"));
                        "x" !== this.options.axis && "auto" !== this.helper.css("bottom") && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto"))
                    },
                    _trigger: function (c, e, k) {
                        return k =
                            k || this._uiHash(), b.dvUi.plugin.call(this, c, [e, k, this], !0), /^(drag|start|stop)/.test(c) && (this.positionAbs = this._convertPositionTo("absolute"), k.offset = this.positionAbs), b.Widget.prototype._trigger.call(this, c, e, k)
                    },
                    plugins: {},
                    _uiHash: function () {
                        return {
                            helper: this.helper,
                            position: this.position,
                            originalPosition: this.originalPosition,
                            offset: this.positionAbs
                        }
                    }
                });
                b.dvUi.plugin.add("draggable", "connectToSortable", {
                    start: function (c, e, k) {
                        var h = b.extend({}, e, {
                            item: k.element
                        });
                        k.sortables = [];
                        b(k.options.connectToSortable).each(function () {
                            var e =
                                b(this).sortable("instance");
                            e && !e.options.disabled && (k.sortables.push(e), e.refreshPositions(), e._trigger("activate", c, h))
                        })
                    },
                    stop: function (c, e, k) {
                        var h = b.extend({}, e, {
                            item: k.element
                        });
                        k.cancelHelperRemoval = !1;
                        b.each(k.sortables, function () {
                            this.isOver ? (this.isOver = 0, k.cancelHelperRemoval = !0, this.cancelHelperRemoval = !1, this._storedCSS = {
                                position: this.placeholder.css("position"),
                                top: this.placeholder.css("top"),
                                left: this.placeholder.css("left")
                            }, this._mouseStop(c), this.options.helper = this.options._helper) :
                                (this.cancelHelperRemoval = !0, this._trigger("deactivate", c, h))
                        })
                    },
                    drag: function (c, e, k) {
                        b.each(k.sortables, function () {
                            var h = !1,
                                f = this;
                            f.positionAbs = k.positionAbs;
                            f.helperProportions = k.helperProportions;
                            f.offset.click = k.offset.click;
                            f._intersectsWith(f.containerCache) && (h = !0, b.each(k.sortables, function () {
                                return this.positionAbs = k.positionAbs, this.helperProportions = k.helperProportions, this.offset.click = k.offset.click, this !== f && this._intersectsWith(this.containerCache) && b.contains(f.element[0], this.element[0]) &&
                                    (h = !1), h
                            }));
                            h ? (f.isOver || (f.isOver = 1, f.currentItem = e.helper.appendTo(f.element).data("dvUi-sortable-item", !0), f.options._helper = f.options.helper, f.options.helper = function () {
                                return e.helper[0]
                            }, c.target = f.currentItem[0], f._mouseCapture(c, !0), f._mouseStart(c, !0, !0), f.offset.click.top = k.offset.click.top, f.offset.click.left = k.offset.click.left, f.offset.parent.left -= k.offset.parent.left - f.offset.parent.left, f.offset.parent.top -= k.offset.parent.top - f.offset.parent.top, k._trigger("toSortable", c), k.dropped =
                                f.element, b.each(k.sortables, function () {
                                    this.refreshPositions()
                                }), k.currentItem = k.element, f.fromOutside = k), f.currentItem && (f._mouseDrag(c), e.position = f.position)) : f.isOver && (f.isOver = 0, f.cancelHelperRemoval = !0, f.options._revert = f.options.revert, f.options.revert = !1, f._trigger("out", c, f._uiHash(f)), f._mouseStop(c, !0), f.options.revert = f.options._revert, f.options.helper = f.options._helper, f.placeholder && f.placeholder.remove(), k._refreshOffsets(c), e.position = k._generatePosition(c, !0), k._trigger("fromSortable",
                                    c), k.dropped = !1, b.each(k.sortables, function () {
                                        this.refreshPositions()
                                    }))
                        })
                    }
                });
                b.dvUi.plugin.add("draggable", "cursor", {
                    start: function (c, e, k) {
                        c = b("body");
                        k = k.options;
                        c.css("cursor") && (k._cursor = c.css("cursor"));
                        c.css("cursor", k.cursor)
                    },
                    stop: function (c, e, k) {
                        c = k.options;
                        c._cursor && b("body").css("cursor", c._cursor)
                    }
                });
                b.dvUi.plugin.add("draggable", "opacity", {
                    start: function (c, e, k) {
                        c = b(e.helper);
                        k = k.options;
                        c.css("opacity") && (k._opacity = c.css("opacity"));
                        c.css("opacity", k.opacity)
                    },
                    stop: function (c, e, k) {
                        c =
                            k.options;
                        c._opacity && b(e.helper).css("opacity", c._opacity)
                    }
                });
                b.dvUi.plugin.add("draggable", "scroll", {
                    start: function (b, e, k) {
                        k.scrollParentNotHidden || (k.scrollParentNotHidden = k.helper.scrollParent(!1));
                        k.scrollParentNotHidden[0] !== k.document[0] && "HTML" !== k.scrollParentNotHidden[0].tagName && (k.overflowOffset = k.scrollParentNotHidden.offset())
                    },
                    drag: function (c, e, k) {
                        e = k.options;
                        var h = !1,
                            f = k.scrollParentNotHidden[0],
                            l = k.document[0];
                        f !== l && "HTML" !== f.tagName ? (e.axis && "x" === e.axis || (k.overflowOffset.top +
                            f.offsetHeight - c.pageY < e.scrollSensitivity ? f.scrollTop = h = f.scrollTop + e.scrollSpeed : c.pageY - k.overflowOffset.top < e.scrollSensitivity && (f.scrollTop = h = f.scrollTop - e.scrollSpeed)), e.axis && "y" === e.axis || (k.overflowOffset.left + f.offsetWidth - c.pageX < e.scrollSensitivity ? f.scrollLeft = h = f.scrollLeft + e.scrollSpeed : c.pageX - k.overflowOffset.left < e.scrollSensitivity && (f.scrollLeft = h = f.scrollLeft - e.scrollSpeed))) : (e.axis && "x" === e.axis || (c.pageY - b(l).scrollTop() < e.scrollSensitivity ? h = b(l).scrollTop(b(l).scrollTop() -
                                e.scrollSpeed) : b(window).height() - (c.pageY - b(l).scrollTop()) < e.scrollSensitivity && (h = b(l).scrollTop(b(l).scrollTop() + e.scrollSpeed))), e.axis && "y" === e.axis || (c.pageX - b(l).scrollLeft() < e.scrollSensitivity ? h = b(l).scrollLeft(b(l).scrollLeft() - e.scrollSpeed) : b(window).width() - (c.pageX - b(l).scrollLeft()) < e.scrollSensitivity && (h = b(l).scrollLeft(b(l).scrollLeft() + e.scrollSpeed))));
                        !1 !== h && b.dvUi.ddmanager && !e.dropBehaviour && b.dvUi.ddmanager.prepareOffsets(k, c)
                    }
                });
                b.dvUi.plugin.add("draggable", "snap", {
                    start: function (c,
                        e, k) {
                        c = k.options;
                        k.snapElements = [];
                        b(c.snap.constructor !== String ? c.snap.items || ":data(dvUi-draggable)" : c.snap).each(function () {
                            var c = b(this),
                                e = c.offset();
                            this !== k.element[0] && k.snapElements.push({
                                item: this,
                                width: c.outerWidth(),
                                height: c.outerHeight(),
                                top: e.top,
                                left: e.left
                            })
                        })
                    },
                    drag: function (c, e, k) {
                        var h, f, l, q, t, y, C = k.options,
                            A = C.snapTolerance,
                            D = e.offset.left,
                            O = D + k.helperProportions.width,
                            G = e.offset.top,
                            fa = G + k.helperProportions.height;
                        for (t = k.snapElements.length - 1; 0 <= t; t--) {
                            var T = k.snapElements[t].left -
                                k.margins.left;
                            var a = T + k.snapElements[t].width;
                            var ba = k.snapElements[t].top - k.margins.top;
                            var R = ba + k.snapElements[t].height;
                            T - A > O || D > a + A || ba - A > fa || G > R + A || !b.contains(k.snapElements[t].item.ownerDocument, k.snapElements[t].item) ? (k.snapElements[t].snapping && k.options.snap.release && k.options.snap.release.call(k.element, c, b.extend(k._uiHash(), {
                                snapItem: k.snapElements[t].item
                            })), k.snapElements[t].snapping = !1) : ("inner" !== C.snapMode && (h = A >= Math.abs(ba - fa), f = A >= Math.abs(R - G), l = A >= Math.abs(T - O), q = A >= Math.abs(a -
                                D), h && (e.position.top = k._convertPositionTo("relative", {
                                    top: ba - k.helperProportions.height,
                                    left: 0
                                }).top), f && (e.position.top = k._convertPositionTo("relative", {
                                    top: R,
                                    left: 0
                                }).top), l && (e.position.left = k._convertPositionTo("relative", {
                                    top: 0,
                                    left: T - k.helperProportions.width
                                }).left), q && (e.position.left = k._convertPositionTo("relative", {
                                    top: 0,
                                    left: a
                                }).left)), y = h || f || l || q, "outer" !== C.snapMode && (h = A >= Math.abs(ba - G), f = A >= Math.abs(R - fa), l = A >= Math.abs(T - D), q = A >= Math.abs(a - O), h && (e.position.top = k._convertPositionTo("relative", {
                                    top: ba,
                                    left: 0
                                }).top), f && (e.position.top = k._convertPositionTo("relative", {
                                    top: R - k.helperProportions.height,
                                    left: 0
                                }).top), l && (e.position.left = k._convertPositionTo("relative", {
                                    top: 0,
                                    left: T
                                }).left), q && (e.position.left = k._convertPositionTo("relative", {
                                    top: 0,
                                    left: a - k.helperProportions.width
                                }).left)), !k.snapElements[t].snapping && (h || f || l || q || y) && k.options.snap.snap && k.options.snap.snap.call(k.element, c, b.extend(k._uiHash(), {
                                    snapItem: k.snapElements[t].item
                                })), k.snapElements[t].snapping = h || f || l || q || y)
                        }
                    }
                });
                b.dvUi.plugin.add("draggable", "stack", {
                    start: function (c, e, k) {
                        var h;
                        c = b.makeArray(b(k.options.stack)).sort(function (c, e) {
                            return (parseInt(b(c).css("zIndex"), 10) || 0) - (parseInt(b(e).css("zIndex"), 10) || 0)
                        });
                        c.length && (h = parseInt(b(c[0]).css("zIndex"), 10) || 0, b(c).each(function (c) {
                            b(this).css("zIndex", h + c)
                        }), this.css("zIndex", h + c.length))
                    }
                });
                b.dvUi.plugin.add("draggable", "zIndex", {
                    start: function (c, e, k) {
                        c = b(e.helper);
                        k = k.options;
                        c.css("zIndex") && (k._zIndex = c.css("zIndex"));
                        c.css("zIndex", k.zIndex)
                    },
                    stop: function (c,
                        e, k) {
                        c = k.options;
                        c._zIndex && b(e.helper).css("zIndex", c._zIndex)
                    }
                });
                b.dvUi.draggable;
                b.widget("dvUi.droppable", {
                    version: "1.11.2",
                    widgetEventPrefix: "drop",
                    options: {
                        accept: "*",
                        activeClass: !1,
                        addClasses: !0,
                        greedy: !1,
                        hoverClass: !1,
                        scope: "default",
                        tolerance: "intersect",
                        activate: null,
                        deactivate: null,
                        drop: null,
                        out: null,
                        over: null
                    },
                    _create: function () {
                        var c, e = this.options,
                            k = e.accept;
                        this.isover = !1;
                        this.isout = !0;
                        this.accept = b.isFunction(k) ? k : function (b) {
                            return b.is(k)
                        };
                        this.proportions = function () {
                            return arguments.length ?
                                (c = arguments[0], void 0) : c ? c : c = {
                                    width: this.element[0].offsetWidth,
                                    height: this.element[0].offsetHeight
                                }
                        };
                        this._addToManager(e.scope);
                        e.addClasses && this.element.addClass("dvUi-droppable")
                    },
                    _addToManager: function (c) {
                        b.dvUi.ddmanager.droppables[c] = b.dvUi.ddmanager.droppables[c] || [];
                        b.dvUi.ddmanager.droppables[c].push(this)
                    },
                    _splice: function (b) {
                        for (var c = 0; b.length > c; c++) b[c] === this && b.splice(c, 1)
                    },
                    _destroy: function () {
                        this._splice(b.dvUi.ddmanager.droppables[this.options.scope]);
                        this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")
                    },
                    _setOption: function (c, e) {
                        "accept" === c ? this.accept = b.isFunction(e) ? e : function (b) {
                            return b.is(e)
                        } : "scope" === c && (this._splice(b.dvUi.ddmanager.droppables[this.options.scope]), this._addToManager(e));
                        this._super(c, e)
                    },
                    _activate: function (c) {
                        var e = b.dvUi.ddmanager.current;
                        this.options.activeClass && this.element.addClass(this.options.activeClass);
                        e && this._trigger("activate", c, this.ui(e))
                    },
                    _deactivate: function (c) {
                        var e = b.dvUi.ddmanager.current;
                        this.options.activeClass && this.element.removeClass(this.options.activeClass);
                        e && this._trigger("deactivate", c, this.ui(e))
                    },
                    _over: function (c) {
                        var e = b.dvUi.ddmanager.current;
                        e && (e.currentItem || e.element)[0] !== this.element[0] && this.accept.call(this.element[0], e.currentItem || e.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", c, this.ui(e)))
                    },
                    _out: function (c) {
                        var e = b.dvUi.ddmanager.current;
                        e && (e.currentItem || e.element)[0] !== this.element[0] && this.accept.call(this.element[0], e.currentItem || e.element) && (this.options.hoverClass &&
                            this.element.removeClass(this.options.hoverClass), this._trigger("out", c, this.ui(e)))
                    },
                    _drop: function (c, e) {
                        var k = e || b.dvUi.ddmanager.current,
                            h = !1;
                        return k && (k.currentItem || k.element)[0] !== this.element[0] ? (this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function () {
                            var e = b(this).droppable("instance");
                            return e.options.greedy && !e.options.disabled && e.options.scope === k.options.scope && e.accept.call(e.element[0], k.currentItem || k.element) && b.dvUi.intersect(k, b.extend(e, {
                                offset: e.element.offset()
                            }),
                                e.options.tolerance, c) ? (h = !0, !1) : void 0
                        }), h ? !1 : this.accept.call(this.element[0], k.currentItem || k.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", c, this.ui(k)), this.element) : !1) : !1
                    },
                    ui: function (b) {
                        return {
                            draggable: b.currentItem || b.element,
                            helper: b.helper,
                            position: b.position,
                            offset: b.positionAbs
                        }
                    }
                });
                b.dvUi.intersect = function () {
                    return function (b, e, k, h) {
                        if (!e.offset) return !1;
                        var c = (b.positionAbs || b.position.absolute).left + b.margins.left,
                            f = (b.positionAbs || b.position.absolute).top + b.margins.top,
                            l = c + b.helperProportions.width,
                            z = f + b.helperProportions.height,
                            q = e.offset.left,
                            t = e.offset.top,
                            A = q + e.proportions().width,
                            D = t + e.proportions().height;
                        switch (k) {
                            case "fit":
                                return c >= q && A >= l && f >= t && D >= z;
                            case "intersect":
                                return c + b.helperProportions.width / 2 > q && A > l - b.helperProportions.width / 2 && f + b.helperProportions.height / 2 > t && D > z - b.helperProportions.height / 2;
                            case "pointer":
                                b = h.pageY;
                                k = e.proportions().height;
                                if (t = b >= t && t + k > b) h = h.pageX, e = e.proportions().width, t = h >= q && q + e > h;
                                return t;
                            case "touch":
                                return (f >= t && D >= f || z >= t && D >= z || t > f && z > D) && (c >= q && A >= c || l >= q && A >= l || q > c && l > A);
                            default:
                                return !1
                        }
                    }
                }();
                b.dvUi.ddmanager = {
                    current: null,
                    droppables: {
                        "default": []
                    },
                    prepareOffsets: function (c, e) {
                        var k, h = b.dvUi.ddmanager.droppables[c.options.scope] || [],
                            f = e ? e.type : null,
                            l = (c.currentItem || c.element).find(":data(dvUi-droppable)").addBack();
                        var q = 0;
                        a: for (; h.length > q; q++)
                            if (!(h[q].options.disabled || c && !h[q].accept.call(h[q].element[0],
                                c.currentItem || c.element))) {
                                for (k = 0; l.length > k; k++)
                                    if (l[k] === h[q].element[0]) {
                                        h[q].proportions().height = 0;
                                        continue a
                                    } h[q].visible = "none" !== h[q].element.css("display");
                                h[q].visible && ("mousedown" === f && h[q]._activate.call(h[q], e), h[q].offset = h[q].element.offset(), h[q].proportions({
                                    width: h[q].element[0].offsetWidth,
                                    height: h[q].element[0].offsetHeight
                                }))
                            }
                    },
                    drop: function (c, e) {
                        var k = !1;
                        return b.each((b.dvUi.ddmanager.droppables[c.options.scope] || []).slice(), function () {
                            this.options && (!this.options.disabled &&
                                this.visible && b.dvUi.intersect(c, this, this.options.tolerance, e) && (k = this._drop.call(this, e) || k), !this.options.disabled && this.visible && this.accept.call(this.element[0], c.currentItem || c.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, e)))
                        }), k
                    },
                    dragStart: function (c, e) {
                        c.element.parentsUntil("body").bind("scroll.droppable", function () {
                            c.options.refreshPositions || b.dvUi.ddmanager.prepareOffsets(c, e)
                        })
                    },
                    drag: function (c, e) {
                        c.options.refreshPositions && b.dvUi.ddmanager.prepareOffsets(c, e);
                        b.each(b.dvUi.ddmanager.droppables[c.options.scope] || [], function () {
                            if (!this.options.disabled && !this.greedyChild && this.visible) {
                                var k, h, f, l = b.dvUi.intersect(c, this, this.options.tolerance, e);
                                (l = !l && this.isover ? "isout" : l && !this.isover ? "isover" : null) && (this.options.greedy && (h = this.options.scope, f = this.element.parents(":data(dvUi-droppable)").filter(function () {
                                    return b(this).droppable("instance").options.scope === h
                                }), f.length && (k = b(f[0]).droppable("instance"), k.greedyChild = "isover" === l)), k && "isover" ===
                                l && (k.isover = !1, k.isout = !0, k._out.call(k, e)), this[l] = !0, this["isout" === l ? "isover" : "isout"] = !1, this["isover" === l ? "_over" : "_out"].call(this, e), k && "isout" === l && (k.isout = !1, k.isover = !0, k._over.call(k, e)))
                            }
                        })
                    },
                    dragStop: function (c, e) {
                        c.element.parentsUntil("body").unbind("scroll.droppable");
                        c.options.refreshPositions || b.dvUi.ddmanager.prepareOffsets(c, e)
                    }
                };
                b.dvUi.droppable;
                b.widget("dvUi.resizable", b.dvUi.mouse, {
                    version: "1.11.2",
                    widgetEventPrefix: "resize",
                    options: {
                        alsoResize: !1,
                        animate: !1,
                        animateDuration: "slow",
                        animateEasing: "swing",
                        aspectRatio: !1,
                        autoHide: !1,
                        containment: !1,
                        ghost: !1,
                        grid: !1,
                        handles: "e,s,se",
                        helper: !1,
                        maxHeight: null,
                        maxWidth: null,
                        minHeight: 10,
                        minWidth: 10,
                        zIndex: 90,
                        resize: null,
                        start: null,
                        stop: null
                    },
                    _num: function (b) {
                        return parseInt(b, 10) || 0
                    },
                    _isNumber: function (b) {
                        return !isNaN(parseInt(b, 10))
                    },
                    _hasScroll: function (c, e) {
                        if ("hidden" === b(c).css("overflow")) return !1;
                        e = e && "left" === e ? "scrollLeft" : "scrollTop";
                        var k = !1;
                        return 0 < c[e] ? !0 : (c[e] = 1, k = 0 < c[e], c[e] = 0, k)
                    },
                    _create: function () {
                        var c, e = this,
                            k = this.options;
                        if (this.element.addClass("dvUi-resizable"), b.extend(this, {
                            _aspectRatio: !!k.aspectRatio,
                            aspectRatio: k.aspectRatio,
                            originalElement: this.element,
                            _proportionallyResizeElements: [],
                            _helper: k.helper || k.ghost || k.animate ? k.helper || "dvUi-resizable-helper" : null
                        }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(b("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({
                            position: this.element.css("position"),
                            width: this.element.outerWidth(),
                            height: this.element.outerHeight(),
                            top: this.element.css("top"),
                            left: this.element.css("left")
                        })), this.element = this.element.parent().data("dvUi-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({
                            marginLeft: this.originalElement.css("marginLeft"),
                            marginTop: this.originalElement.css("marginTop"),
                            marginRight: this.originalElement.css("marginRight"),
                            marginBottom: this.originalElement.css("marginBottom")
                        }), this.originalElement.css({
                            marginLeft: 0,
                            marginTop: 0,
                            marginRight: 0,
                            marginBottom: 0
                        }), this.originalResizeStyle =
                            this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                                position: "static",
                                zoom: 1,
                                display: "block"
                            })), this.originalElement.css({
                                margin: this.originalElement.css("margin")
                            }), this._proportionallyResize()), this.handles = k.handles || (b(".dvUi-resizable-handle", this.element).length ? {
                                n: ".dvUi-resizable-n",
                                e: ".dvUi-resizable-e",
                                s: ".dvUi-resizable-s",
                                w: ".dvUi-resizable-w",
                                se: ".dvUi-resizable-se",
                                sw: ".dvUi-resizable-sw",
                                ne: ".dvUi-resizable-ne",
                                nw: ".dvUi-resizable-nw"
                            } : "e,s,se"), this.handles.constructor === String) {
                            "all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw");
                            var h = this.handles.split(",");
                            this.handles = {};
                            for (c = 0; h.length > c; c++) {
                                var f = b.trim(h[c]);
                                var l = "dvUi-resizable-" + f;
                                var q = b("<div class='dvUi-resizable-handle " + l + "'></div>");
                                q.css({
                                    zIndex: k.zIndex
                                });
                                "se" === f && q.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se");
                                this.handles[f] = ".dvUi-resizable-" + f;
                                this.element.append(q)
                            }
                        }
                        this._renderAxis = function (c) {
                            var e, k, h, f;
                            c = c ||
                                this.element;
                            for (e in this.handles) this.handles[e].constructor === String && (this.handles[e] = this.element.children(this.handles[e]).first().show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (k = b(this.handles[e], this.element), f = /sw|ne|nw|se|n|s/.test(e) ? k.outerHeight() : k.outerWidth(), h = ["padding", /ne|nw|n/.test(e) ? "Top" : /se|sw|s/.test(e) ? "Bottom" : /^e$/.test(e) ? "Right" : "Left"].join(""), c.css(h, f), this._proportionallyResize()), b(this.handles[e]).length
                        };
                        this._renderAxis(this.element);
                        this._handles = b(".dvUi-resizable-handle", this.element).disableSelection();
                        this._handles.mouseover(function () {
                            e.resizing || (this.className && (q = this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)), e.axis = q && q[1] ? q[1] : "se")
                        });
                        k.autoHide && (this._handles.hide(), b(this.element).addClass("dvUi-resizable-autohide").mouseenter(function () {
                            k.disabled || (b(this).removeClass("dvUi-resizable-autohide"), e._handles.show())
                        }).mouseleave(function () {
                            k.disabled || e.resizing || (b(this).addClass("dvUi-resizable-autohide"),
                                e._handles.hide())
                        }));
                        this._mouseInit()
                    },
                    _destroy: function () {
                        this._mouseDestroy();
                        var c, e = function (c) {
                            b(c).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()
                        };
                        return this.elementIsWrapper && (e(this.element), c = this.element, this.originalElement.css({
                            position: c.css("position"),
                            width: c.outerWidth(),
                            height: c.outerHeight(),
                            top: c.css("top"),
                            left: c.css("left")
                        }).insertAfter(c),
                            c.remove()), this.originalElement.css("resize", this.originalResizeStyle), e(this.originalElement), this
                    },
                    _mouseCapture: function (c) {
                        var e, k = !1;
                        for (e in this.handles) {
                            var h = b(this.handles[e])[0];
                            (h === c.target || b.contains(h, c.target)) && (k = !0)
                        }
                        return !this.options.disabled && k
                    },
                    _mouseStart: function (c) {
                        var e, k, h, f = this.options,
                            l = this.element;
                        return this.resizing = !0, this._renderProxy(), e = this._num(this.helper.css("left")), k = this._num(this.helper.css("top")), f.containment && (e += b(f.containment).scrollLeft() ||
                            0, k += b(f.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                                left: e,
                                top: k
                            }, this.size = this._helper ? {
                                width: this.helper.width(),
                                height: this.helper.height()
                            } : {
                                    width: l.width(),
                                    height: l.height()
                                }, this.originalSize = this._helper ? {
                                    width: l.outerWidth(),
                                    height: l.outerHeight()
                                } : {
                                        width: l.width(),
                                        height: l.height()
                                    }, this.sizeDiff = {
                                        width: l.outerWidth() - l.width(),
                                        height: l.outerHeight() - l.height()
                                    }, this.originalPosition = {
                                        left: e,
                                        top: k
                                    }, this.originalMousePosition = {
                                        left: c.pageX,
                                        top: c.pageY
                                    }, this.aspectRatio =
                            "number" == typeof f.aspectRatio ? f.aspectRatio : this.originalSize.width / this.originalSize.height || 1, h = b(".dvUi-resizable-" + this.axis).css("cursor"), b("body").css("cursor", "auto" === h ? this.axis + "-resize" : h), l.addClass("dvUi-resizable-resizing"), this._propagate("start", c), !0
                    },
                    _mouseDrag: function (c) {
                        var e, k, h = this.originalMousePosition,
                            f = c.pageX - h.left || 0;
                        h = c.pageY - h.top || 0;
                        var l = this._change[this.axis];
                        return this._updatePrevProperties(), l ? (e = l.apply(this, [c, f, h]), this._updateVirtualBoundaries(c.shiftKey),
                            (this._aspectRatio || c.shiftKey) && (e = this._updateRatio(e, c)), e = this._respectSize(e, c), this._updateCache(e), this._propagate("resize", c), k = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), b.isEmptyObject(k) || (this._updatePrevProperties(), this._trigger("resize", c, this.ui()), this._applyChanges()), !1) : !1
                    },
                    _mouseStop: function (c) {
                        this.resizing = !1;
                        var e, h, f, l, q, t, w, y = this.options;
                        return this._helper && (e = this._proportionallyResizeElements, h = e.length &&
                            /textarea/i.test(e[0].nodeName), f = h && this._hasScroll(e[0], "left") ? 0 : this.sizeDiff.height, l = h ? 0 : this.sizeDiff.width, q = {
                                width: this.helper.width() - l,
                                height: this.helper.height() - f
                            }, t = parseInt(this.element.css("left"), 10) + (this.position.left - this.originalPosition.left) || null, w = parseInt(this.element.css("top"), 10) + (this.position.top - this.originalPosition.top) || null, y.animate || this.element.css(b.extend(q, {
                                top: w,
                                left: t
                            })), this.helper.height(this.size.height), this.helper.width(this.size.width), this._helper &&
                            !y.animate && this._proportionallyResize()), b("body").css("cursor", "auto"), this.element.removeClass("dvUi-resizable-resizing"), this._propagate("stop", c), this._helper && this.helper.remove(), !1
                    },
                    _updatePrevProperties: function () {
                        this.prevPosition = {
                            top: this.position.top,
                            left: this.position.left
                        };
                        this.prevSize = {
                            width: this.size.width,
                            height: this.size.height
                        }
                    },
                    _applyChanges: function () {
                        var b = {};
                        return this.position.top !== this.prevPosition.top && (b.top = this.position.top + "px"), this.position.left !== this.prevPosition.left &&
                            (b.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (b.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (b.height = this.size.height + "px"), this.helper.css(b), b
                    },
                    _updateVirtualBoundaries: function (b) {
                        var c, h, f, l;
                        var q = this.options;
                        q = {
                            minWidth: this._isNumber(q.minWidth) ? q.minWidth : 0,
                            maxWidth: this._isNumber(q.maxWidth) ? q.maxWidth : 1 / 0,
                            minHeight: this._isNumber(q.minHeight) ? q.minHeight : 0,
                            maxHeight: this._isNumber(q.maxHeight) ? q.maxHeight : 1 / 0
                        };
                        (this._aspectRatio || b) &&
                            (c = q.minHeight * this.aspectRatio, f = q.minWidth / this.aspectRatio, h = q.maxHeight * this.aspectRatio, l = q.maxWidth / this.aspectRatio, c > q.minWidth && (q.minWidth = c), f > q.minHeight && (q.minHeight = f), q.maxWidth > h && (q.maxWidth = h), q.maxHeight > l && (q.maxHeight = l));
                        this._vBoundaries = q
                    },
                    _updateCache: function (b) {
                        this.offset = this.helper.offset();
                        this._isNumber(b.left) && (this.position.left = b.left);
                        this._isNumber(b.top) && (this.position.top = b.top);
                        this._isNumber(b.height) && (this.size.height = b.height);
                        this._isNumber(b.width) &&
                            (this.size.width = b.width)
                    },
                    _updateRatio: function (b) {
                        var c = this.position,
                            h = this.size,
                            f = this.axis;
                        return this._isNumber(b.height) ? b.width = b.height * this.aspectRatio : this._isNumber(b.width) && (b.height = b.width / this.aspectRatio), "sw" === f && (b.left = c.left + (h.width - b.width), b.top = null), "nw" === f && (b.top = c.top + (h.height - b.height), b.left = c.left + (h.width - b.width)), b
                    },
                    _respectSize: function (b) {
                        var c = this._vBoundaries,
                            h = this.axis,
                            f = this._isNumber(b.width) && c.maxWidth && c.maxWidth < b.width,
                            l = this._isNumber(b.height) &&
                                c.maxHeight && c.maxHeight < b.height,
                            q = this._isNumber(b.width) && c.minWidth && c.minWidth > b.width,
                            t = this._isNumber(b.height) && c.minHeight && c.minHeight > b.height,
                            w = this.originalPosition.left + this.originalSize.width,
                            y = this.position.top + this.size.height,
                            C = /sw|nw|w/.test(h);
                        h = /nw|ne|n/.test(h);
                        return q && (b.width = c.minWidth), t && (b.height = c.minHeight), f && (b.width = c.maxWidth), l && (b.height = c.maxHeight), q && C && (b.left = w - c.minWidth), f && C && (b.left = w - c.maxWidth), t && h && (b.top = y - c.minHeight), l && h && (b.top = y - c.maxHeight),
                            b.width || b.height || b.left || !b.top ? b.width || b.height || b.top || !b.left || (b.left = null) : b.top = null, b
                    },
                    _getPaddingPlusBorderDimensions: function (b) {
                        var c = 0,
                            h = [],
                            f = [b.css("borderTopWidth"), b.css("borderRightWidth"), b.css("borderBottomWidth"), b.css("borderLeftWidth")];
                        for (b = [b.css("paddingTop"), b.css("paddingRight"), b.css("paddingBottom"), b.css("paddingLeft")]; 4 > c; c++) h[c] = parseInt(f[c], 10) || 0, h[c] += parseInt(b[c], 10) || 0;
                        return {
                            height: h[0] + h[2],
                            width: h[1] + h[3]
                        }
                    },
                    _proportionallyResize: function () {
                        if (this._proportionallyResizeElements.length)
                            for (var b,
                                e = 0, h = this.helper || this.element; this._proportionallyResizeElements.length > e; e++) b = this._proportionallyResizeElements[e], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(b)), b.css({
                                    height: h.height() - this.outerDimensions.height || 0,
                                    width: h.width() - this.outerDimensions.width || 0
                                })
                    },
                    _renderProxy: function () {
                        var c = this.options;
                        this.elementOffset = this.element.offset();
                        this._helper ? (this.helper = this.helper || b("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                            width: this.element.outerWidth() -
                                1,
                            height: this.element.outerHeight() - 1,
                            position: "absolute",
                            left: this.elementOffset.left + "px",
                            top: this.elementOffset.top + "px",
                            zIndex: ++c.zIndex
                        }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
                    },
                    _change: {
                        e: function (b, e) {
                            return {
                                width: this.originalSize.width + e
                            }
                        },
                        w: function (b, e) {
                            return {
                                left: this.originalPosition.left + e,
                                width: this.originalSize.width - e
                            }
                        },
                        n: function (b, e, h) {
                            return {
                                top: this.originalPosition.top + h,
                                height: this.originalSize.height - h
                            }
                        },
                        s: function (b, e, h) {
                            return {
                                height: this.originalSize.height +
                                    h
                            }
                        },
                        se: function (c, e, h) {
                            return b.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [c, e, h]))
                        },
                        sw: function (c, e, h) {
                            return b.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [c, e, h]))
                        },
                        ne: function (c, e, h) {
                            return b.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [c, e, h]))
                        },
                        nw: function (c, e, h) {
                            return b.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [c, e, h]))
                        }
                    },
                    _propagate: function (c, e) {
                        b.dvUi.plugin.call(this, c, [e, this.ui()]);
                        "resize" !== c && this._trigger(c, e, this.ui())
                    },
                    plugins: {},
                    ui: function () {
                        return {
                            originalElement: this.originalElement,
                            element: this.element,
                            helper: this.helper,
                            position: this.position,
                            size: this.size,
                            originalSize: this.originalSize,
                            originalPosition: this.originalPosition
                        }
                    }
                });
                b.dvUi.plugin.add("resizable", "animate", {
                    stop: function (c) {
                        var e = b(this).resizable("instance"),
                            h = e.options,
                            f = e._proportionallyResizeElements,
                            l = f.length && /textarea/i.test(f[0].nodeName),
                            q = l && e._hasScroll(f[0], "left") ? 0 : e.sizeDiff.height;
                        l = {
                            width: e.size.width - (l ? 0 : e.sizeDiff.width),
                            height: e.size.height - q
                        };
                        q = parseInt(e.element.css("left"), 10) + (e.position.left - e.originalPosition.left) || null;
                        var t = parseInt(e.element.css("top"), 10) + (e.position.top - e.originalPosition.top) || null;
                        e.element.animate(b.extend(l, t && q ? {
                            top: t,
                            left: q
                        } : {}), {
                                duration: h.animateDuration,
                                easing: h.animateEasing,
                                step: function () {
                                    var h = {
                                        width: parseInt(e.element.css("width"), 10),
                                        height: parseInt(e.element.css("height"), 10),
                                        top: parseInt(e.element.css("top"), 10),
                                        left: parseInt(e.element.css("left"),
                                            10)
                                    };
                                    f && f.length && b(f[0]).css({
                                        width: h.width,
                                        height: h.height
                                    });
                                    e._updateCache(h);
                                    e._propagate("resize", c)
                                }
                            })
                    }
                });
                b.dvUi.plugin.add("resizable", "containment", {
                    start: function () {
                        var c, e, h, f, l, q, t, w = b(this).resizable("instance"),
                            y = w.element,
                            C = w.options.containment;
                        (y = C instanceof b ? C.get(0) : /parent/.test(C) ? y.parent().get(0) : C) && (w.containerElement = b(y), /document/.test(C) || C === document ? (w.containerOffset = {
                            left: 0,
                            top: 0
                        }, w.containerPosition = {
                            left: 0,
                            top: 0
                        }, w.parentData = {
                            element: b(document),
                            left: 0,
                            top: 0,
                            width: b(document).width(),
                            height: b(document).height() || document.body.parentNode.scrollHeight
                        }) : (c = b(y), e = [], b(["Top", "Right", "Left", "Bottom"]).each(function (b, h) {
                            e[b] = w._num(c.css("padding" + h))
                        }), w.containerOffset = c.offset(), w.containerPosition = c.position(), w.containerSize = {
                            height: c.innerHeight() - e[3],
                            width: c.innerWidth() - e[1]
                        }, h = w.containerOffset, f = w.containerSize.height, l = w.containerSize.width, q = w._hasScroll(y, "left") ? y.scrollWidth : l, t = w._hasScroll(y) ? y.scrollHeight : f, w.parentData = {
                            element: y,
                            left: h.left,
                            top: h.top,
                            width: q,
                            height: t
                        }))
                    },
                    resize: function (c) {
                        var e = b(this).resizable("instance");
                        var h = e.options;
                        var f = e.containerOffset;
                        var l = e.position;
                        c = e._aspectRatio || c.shiftKey;
                        var q = {
                            top: 0,
                            left: 0
                        },
                            t = e.containerElement,
                            w = !0;
                        t[0] !== document && /static/.test(t.css("position")) && (q = f);
                        l.left < (e._helper ? f.left : 0) && (e.size.width += e._helper ? e.position.left - f.left : e.position.left - q.left, c && (e.size.height = e.size.width / e.aspectRatio, w = !1), e.position.left = h.helper ? f.left : 0);
                        l.top < (e._helper ? f.top : 0) && (e.size.height += e._helper ? e.position.top -
                            f.top : e.position.top, c && (e.size.width = e.size.height * e.aspectRatio, w = !1), e.position.top = e._helper ? f.top : 0);
                        h = e.containerElement.get(0) === e.element.parent().get(0);
                        l = /relative|absolute/.test(e.containerElement.css("position"));
                        h && l ? (e.offset.left = e.parentData.left + e.position.left, e.offset.top = e.parentData.top + e.position.top) : (e.offset.left = e.element.offset().left, e.offset.top = e.element.offset().top);
                        h = Math.abs(e.sizeDiff.width + (e._helper ? e.offset.left - q.left : e.offset.left - f.left));
                        f = Math.abs(e.sizeDiff.height +
                            (e._helper ? e.offset.top - q.top : e.offset.top - f.top));
                        h + e.size.width >= e.parentData.width && (e.size.width = e.parentData.width - h, c && (e.size.height = e.size.width / e.aspectRatio, w = !1));
                        f + e.size.height >= e.parentData.height && (e.size.height = e.parentData.height - f, c && (e.size.width = e.size.height * e.aspectRatio, w = !1));
                        w || (e.position.left = e.prevPosition.left, e.position.top = e.prevPosition.top, e.size.width = e.prevSize.width, e.size.height = e.prevSize.height)
                    },
                    stop: function () {
                        var c = b(this).resizable("instance"),
                            e = c.options,
                            h = c.containerOffset,
                            f = c.containerPosition,
                            l = c.containerElement,
                            q = b(c.helper),
                            t = q.offset(),
                            w = q.outerWidth() - c.sizeDiff.width;
                        q = q.outerHeight() - c.sizeDiff.height;
                        c._helper && !e.animate && /relative/.test(l.css("position")) && b(this).css({
                            left: t.left - f.left - h.left,
                            width: w,
                            height: q
                        });
                        c._helper && !e.animate && /static/.test(l.css("position")) && b(this).css({
                            left: t.left - f.left - h.left,
                            width: w,
                            height: q
                        })
                    }
                });
                b.dvUi.plugin.add("resizable", "alsoResize", {
                    start: function () {
                        var c = b(this).resizable("instance").options,
                            e =
                                function (c) {
                                    b(c).each(function () {
                                        var c = b(this);
                                        c.data("dvUi-resizable-alsoresize", {
                                            width: parseInt(c.width(), 10),
                                            height: parseInt(c.height(), 10),
                                            left: parseInt(c.css("left"), 10),
                                            top: parseInt(c.css("top"), 10)
                                        })
                                    })
                                };
                        "object" != typeof c.alsoResize || c.alsoResize.parentNode ? e(c.alsoResize) : c.alsoResize.length ? (c.alsoResize = c.alsoResize[0], e(c.alsoResize)) : b.each(c.alsoResize, function (b) {
                            e(b)
                        })
                    },
                    resize: function (c, e) {
                        c = b(this).resizable("instance");
                        var h = c.options,
                            f = c.originalSize,
                            l = c.originalPosition,
                            q = {
                                height: c.size.height -
                                    f.height || 0,
                                width: c.size.width - f.width || 0,
                                top: c.position.top - l.top || 0,
                                left: c.position.left - l.left || 0
                            },
                            t = function (c, h) {
                                b(c).each(function () {
                                    var c = b(this),
                                        k = b(this).data("dvUi-resizable-alsoresize"),
                                        f = {},
                                        l = h && h.length ? h : c.parents(e.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                                    b.each(l, function (b, c) {
                                        (b = (k[c] || 0) + (q[c] || 0)) && 0 <= b && (f[c] = b || null)
                                    });
                                    c.css(f)
                                })
                            };
                        "object" != typeof h.alsoResize || h.alsoResize.nodeType ? t(h.alsoResize) : b.each(h.alsoResize, function (b, c) {
                            t(b, c)
                        })
                    },
                    stop: function () {
                        b(this).removeData("resizable-alsoresize")
                    }
                });
                b.dvUi.plugin.add("resizable", "ghost", {
                    start: function () {
                        var c = b(this).resizable("instance"),
                            e = c.options,
                            h = c.size;
                        c.ghost = c.originalElement.clone();
                        c.ghost.css({
                            opacity: .25,
                            display: "block",
                            position: "relative",
                            height: h.height,
                            width: h.width,
                            margin: 0,
                            left: 0,
                            top: 0
                        }).addClass("dvUi-resizable-ghost").addClass("string" == typeof e.ghost ? e.ghost : "");
                        c.ghost.appendTo(c.helper)
                    },
                    resize: function () {
                        var c = b(this).resizable("instance");
                        c.ghost && c.ghost.css({
                            position: "relative",
                            height: c.size.height,
                            width: c.size.width
                        })
                    },
                    stop: function () {
                        var c = b(this).resizable("instance");
                        c.ghost && c.helper && c.helper.get(0).removeChild(c.ghost.get(0))
                    }
                });
                b.dvUi.plugin.add("resizable", "grid", {
                    resize: function () {
                        var c, e = b(this).resizable("instance"),
                            h = e.options,
                            f = e.size,
                            l = e.originalSize,
                            q = e.originalPosition,
                            t = e.axis,
                            w = "number" == typeof h.grid ? [h.grid, h.grid] : h.grid,
                            y = w[0] || 1,
                            C = w[1] || 1,
                            A = Math.round((f.width - l.width) / y) * y;
                        f = Math.round((f.height - l.height) / C) * C;
                        var D = l.width + A,
                            O = l.height + f,
                            G = h.maxWidth &&
                                D > h.maxWidth,
                            fa = h.maxHeight && O > h.maxHeight,
                            T = h.minWidth && h.minWidth > D,
                            a = h.minHeight && h.minHeight > O;
                        h.grid = w;
                        T && (D += y);
                        a && (O += C);
                        G && (D -= y);
                        fa && (O -= C);
                        /^(se|s|e)$/.test(t) ? (e.size.width = D, e.size.height = O) : /^(ne)$/.test(t) ? (e.size.width = D, e.size.height = O, e.position.top = q.top - f) : /^(sw)$/.test(t) ? (e.size.width = D, e.size.height = O, e.position.left = q.left - A) : ((0 >= O - C || 0 >= D - y) && (c = e._getPaddingPlusBorderDimensions(this)), 0 < O - C ? (e.size.height = O, e.position.top = q.top - f) : (O = C - c.height, e.size.height = O, e.position.top =
                            q.top + l.height - O), 0 < D - y ? (e.size.width = D, e.position.left = q.left - A) : (D = C - c.height, e.size.width = D, e.position.left = q.left + l.width - D))
                    }
                });
                b.dvUi.resizable;
                b.widget("dvUi.selectable", b.dvUi.mouse, {
                    version: "1.11.2",
                    options: {
                        appendTo: "body",
                        autoRefresh: !0,
                        distance: 0,
                        filter: "*",
                        tolerance: "touch",
                        selected: null,
                        selecting: null,
                        start: null,
                        stop: null,
                        unselected: null,
                        unselecting: null
                    },
                    _create: function () {
                        var c, e = this;
                        this.element.addClass("dvUi-selectable");
                        this.dragged = !1;
                        this.refresh = function () {
                            c = b(e.options.filter,
                                e.element[0]);
                            c.addClass("dvUi-selectee");
                            c.each(function () {
                                var c = b(this),
                                    e = c.offset();
                                b.data(this, "selectable-item", {
                                    element: this,
                                    $element: c,
                                    left: e.left,
                                    top: e.top,
                                    right: e.left + c.outerWidth(),
                                    bottom: e.top + c.outerHeight(),
                                    startselected: !1,
                                    selected: c.hasClass("dvUi-selected"),
                                    selecting: c.hasClass("dvUi-selecting"),
                                    unselecting: c.hasClass("dvUi-unselecting")
                                })
                            })
                        };
                        this.refresh();
                        this.selectees = c.addClass("dvUi-selectee");
                        this._mouseInit();
                        this.helper = b("<div class='dvUi-selectable-helper'></div>")
                    },
                    _destroy: function () {
                        this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");
                        this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");
                        this._mouseDestroy()
                    },
                    _mouseStart: function (c) {
                        var e = this,
                            h = this.options;
                        this.opos = [c.pageX, c.pageY];
                        this.options.disabled || (this.selectees = b(h.filter, this.element[0]), this._trigger("start", c), b(h.appendTo).append(this.helper), this.helper.css({
                            left: c.pageX,
                            top: c.pageY,
                            width: 0,
                            height: 0
                        }), h.autoRefresh && this.refresh(), this.selectees.filter(".dvUi-selected").each(function () {
                            var h = b.data(this, "selectable-item");
                            h.startselected = !0;
                            c.metaKey ||
                                c.ctrlKey || (h.$element.removeClass("dvUi-selected"), h.selected = !1, h.$element.addClass("dvUi-unselecting"), h.unselecting = !0, e._trigger("unselecting", c, {
                                    unselecting: h.element
                                }))
                        }), b(c.target).parents().addBack().each(function () {
                            var h, k = b.data(this, "selectable-item");
                            return k ? (h = !c.metaKey && !c.ctrlKey || !k.$element.hasClass("dvUi-selected"), k.$element.removeClass(h ? "dvUi-unselecting" : "dvUi-selected").addClass(h ? "dvUi-selecting" : "dvUi-unselecting"), k.unselecting = !h, k.selecting = h, k.selected = h, h ? e._trigger("selecting",
                                c, {
                                    selecting: k.element
                                }) : e._trigger("unselecting", c, {
                                    unselecting: k.element
                                }), !1) : void 0
                        }))
                    },
                    _mouseDrag: function (c) {
                        if (this.dragged = !0, !this.options.disabled) {
                            var e, h = this,
                                f = this.options,
                                l = this.opos[0],
                                q = this.opos[1],
                                t = c.pageX,
                                w = c.pageY;
                            return l > t && (e = t, t = l, l = e), q > w && (e = w, w = q, q = e), this.helper.css({
                                left: l,
                                top: q,
                                width: t - l,
                                height: w - q
                            }), this.selectees.each(function () {
                                var e = b.data(this, "selectable-item"),
                                    k = !1;
                                e && e.element !== h.element[0] && ("touch" === f.tolerance ? k = !(e.left > t || l > e.right || e.top > w || q > e.bottom) :
                                    "fit" === f.tolerance && (k = e.left > l && t > e.right && e.top > q && w > e.bottom), k ? (e.selected && (e.$element.removeClass("dvUi-selected"), e.selected = !1), e.unselecting && (e.$element.removeClass("dvUi-unselecting"), e.unselecting = !1), e.selecting || (e.$element.addClass("dvUi-selecting"), e.selecting = !0, h._trigger("selecting", c, {
                                        selecting: e.element
                                    }))) : (e.selecting && ((c.metaKey || c.ctrlKey) && e.startselected ? (e.$element.removeClass("dvUi-selecting"), e.selecting = !1, e.$element.addClass("dvUi-selected"), e.selected = !0) : (e.$element.removeClass("dvUi-selecting"),
                                        e.selecting = !1, e.startselected && (e.$element.addClass("dvUi-unselecting"), e.unselecting = !0), h._trigger("unselecting", c, {
                                            unselecting: e.element
                                        }))), e.selected && (c.metaKey || c.ctrlKey || e.startselected || (e.$element.removeClass("dvUi-selected"), e.selected = !1, e.$element.addClass("dvUi-unselecting"), e.unselecting = !0, h._trigger("unselecting", c, {
                                            unselecting: e.element
                                        })))))
                            }), !1
                        }
                    },
                    _mouseStop: function (c) {
                        var e = this;
                        return this.dragged = !1, b(".dvUi-unselecting", this.element[0]).each(function () {
                            var h = b.data(this,
                                "selectable-item");
                            h.$element.removeClass("dvUi-unselecting");
                            h.unselecting = !1;
                            h.startselected = !1;
                            e._trigger("unselected", c, {
                                unselected: h.element
                            })
                        }), b(".dvUi-selecting", this.element[0]).each(function () {
                            var h = b.data(this, "selectable-item");
                            h.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");
                            h.selecting = !1;
                            h.selected = !0;
                            h.startselected = !0;
                            e._trigger("selected", c, {
                                selected: h.element
                            })
                        }), this._trigger("stop", c), this.helper.remove(), !1
                    }
                });
                b.widget("dvUi.sortable", b.dvUi.mouse, {
                    version: "1.11.2",
                    widgetEventPrefix: "sort",
                    ready: !1,
                    options: {
                        appendTo: "parent",
                        axis: !1,
                        connectWith: !1,
                        containment: !1,
                        cursor: "auto",
                        cursorAt: !1,
                        dropOnEmpty: !0,
                        forcePlaceholderSize: !1,
                        forceHelperSize: !1,
                        grid: !1,
                        handle: !1,
                        helper: "original",
                        items: "> *",
                        opacity: !1,
                        placeholder: !1,
                        revert: !1,
                        scroll: !0,
                        scrollSensitivity: 20,
                        scrollSpeed: 20,
                        scope: "default",
                        tolerance: "intersect",
                        zIndex: 1E3,
                        activate: null,
                        beforeStop: null,
                        change: null,
                        deactivate: null,
                        out: null,
                        over: null,
                        receive: null,
                        remove: null,
                        sort: null,
                        start: null,
                        stop: null,
                        update: null
                    },
                    _isOverAxis: function (b, e, h) {
                        return b >= e && e + h > b
                    },
                    _isFloating: function (b) {
                        return /left|right/.test(b.css("float")) || /inline|table-cell/.test(b.css("display"))
                    },
                    _create: function () {
                        var b = this.options;
                        this.containerCache = {};
                        this.element.addClass("dvUi-sortable");
                        this.refresh();
                        this.floating = this.items.length ? "x" === b.axis || this._isFloating(this.items[0].item) : !1;
                        this.offset = this.element.offset();
                        this._mouseInit();
                        this._setHandleClassName();
                        this.ready = !0
                    },
                    _setOption: function (b, e) {
                        this._super(b, e);
                        "handle" ===
                            b && this._setHandleClassName()
                    },
                    _setHandleClassName: function () {
                        this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");
                        b.each(this.items, function () {
                            (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("dvUi-sortable-handle")
                        })
                    },
                    _destroy: function () {
                        this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");
                        this._mouseDestroy();
                        for (var b = this.items.length - 1; 0 <= b; b--) this.items[b].item.removeData(this.widgetName +
                            "-item");
                        return this
                    },
                    _mouseCapture: function (c, e) {
                        var h = null,
                            f = !1,
                            l = this;
                        return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(c), b(c.target).parents().each(function () {
                            return b.data(this, l.widgetName + "-item") === l ? (h = b(this), !1) : void 0
                        }), b.data(c.target, l.widgetName + "-item") === l && (h = b(c.target)), h ? !this.options.handle || e || (b(this.options.handle, h).find("*").addBack().each(function () {
                            this === c.target && (f = !0)
                        }), f) ? (this.currentItem = h, this._removeCurrentsFromItems(),
                            !0) : !1 : !1)
                    },
                    _mouseStart: function (c, e, h) {
                        var k;
                        e = this.options;
                        if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(c), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                            top: this.offset.top - this.margins.top,
                            left: this.offset.left - this.margins.left
                        }, b.extend(this.offset, {
                            click: {
                                left: c.pageX - this.offset.left,
                                top: c.pageY - this.offset.top
                            },
                            parent: this._getParentOffset(),
                            relative: this._getRelativeOffset()
                        }),
                            this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(c), this.originalPageX = c.pageX, this.originalPageY = c.pageY, e.cursorAt && this._adjustOffsetFromHelper(e.cursorAt), this.domPosition = {
                                prev: this.currentItem.prev()[0],
                                parent: this.currentItem.parent()[0]
                            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), e.containment && this._setContainment(), e.cursor && "auto" !== e.cursor && (k = this.document.find("body"),
                                this.storedCursor = k.css("cursor"), k.css("cursor", e.cursor), this.storedStylesheet = b("<style>*{ cursor: " + e.cursor + " !important; }</style>").appendTo(k)), e.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", e.opacity)), e.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", e.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()),
                            this._trigger("start", c, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !h)
                            for (h = this.containers.length - 1; 0 <= h; h--) this.containers[h]._trigger("activate", c, this._uiHash(this));
                        return b.dvUi.ddmanager && (b.dvUi.ddmanager.current = this), b.dvUi.ddmanager && !e.dropBehaviour && b.dvUi.ddmanager.prepareOffsets(this, c), this.dragging = !0, this.helper.addClass("dvUi-sortable-helper"), this._mouseDrag(c), !0
                    },
                    _mouseDrag: function (c) {
                        var e, h, f;
                        var l = this.options;
                        var q = !1;
                        this.position =
                            this._generatePosition(c);
                        this.positionAbs = this._convertPositionTo("absolute");
                        this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
                        this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - c.pageY < l.scrollSensitivity ? this.scrollParent[0].scrollTop = q = this.scrollParent[0].scrollTop + l.scrollSpeed : c.pageY - this.overflowOffset.top < l.scrollSensitivity && (this.scrollParent[0].scrollTop = q = this.scrollParent[0].scrollTop -
                            l.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - c.pageX < l.scrollSensitivity ? this.scrollParent[0].scrollLeft = q = this.scrollParent[0].scrollLeft + l.scrollSpeed : c.pageX - this.overflowOffset.left < l.scrollSensitivity && (this.scrollParent[0].scrollLeft = q = this.scrollParent[0].scrollLeft - l.scrollSpeed)) : (c.pageY - b(document).scrollTop() < l.scrollSensitivity ? q = b(document).scrollTop(b(document).scrollTop() - l.scrollSpeed) : b(window).height() - (c.pageY - b(document).scrollTop()) < l.scrollSensitivity &&
                                (q = b(document).scrollTop(b(document).scrollTop() + l.scrollSpeed)), c.pageX - b(document).scrollLeft() < l.scrollSensitivity ? q = b(document).scrollLeft(b(document).scrollLeft() - l.scrollSpeed) : b(window).width() - (c.pageX - b(document).scrollLeft()) < l.scrollSensitivity && (q = b(document).scrollLeft(b(document).scrollLeft() + l.scrollSpeed))), !1 !== q && b.dvUi.ddmanager && !l.dropBehaviour && b.dvUi.ddmanager.prepareOffsets(this, c));
                        this.positionAbs = this._convertPositionTo("absolute");
                        this.options.axis && "y" === this.options.axis ||
                            (this.helper[0].style.left = this.position.left + "px");
                        this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px");
                        for (l = this.items.length - 1; 0 <= l; l--)
                            if (e = this.items[l], h = e.item[0], f = this._intersectsWithPointer(e), f && e.instance === this.currentContainer && h !== this.currentItem[0] && this.placeholder[1 === f ? "next" : "prev"]()[0] !== h && !b.contains(this.placeholder[0], h) && ("semi-dynamic" === this.options.type ? !b.contains(this.element[0], h) : !0)) {
                                if (this.direction = 1 === f ? "down" : "up",
                                    "pointer" !== this.options.tolerance && !this._intersectsWithSides(e)) break;
                                this._rearrange(c, e);
                                this._trigger("change", c, this._uiHash());
                                break
                            } return this._contactContainers(c), b.dvUi.ddmanager && b.dvUi.ddmanager.drag(this, c), this._trigger("sort", c, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
                    },
                    _mouseStop: function (c, e) {
                        if (c) {
                            if (b.dvUi.ddmanager && !this.options.dropBehaviour && b.dvUi.ddmanager.drop(this, c), this.options.revert) {
                                var h = this;
                                e = this.placeholder.offset();
                                var f = this.options.axis,
                                    l = {};
                                f && "x" !== f || (l.left = e.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft));
                                f && "y" !== f || (l.top = e.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop));
                                this.reverting = !0;
                                b(this.helper).animate(l, parseInt(this.options.revert, 10) || 500, function () {
                                    h._clear(c)
                                })
                            } else this._clear(c, e);
                            return !1
                        }
                    },
                    cancel: function () {
                        if (this.dragging) {
                            this._mouseUp({
                                target: null
                            });
                            "original" === this.options.helper ?
                                this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper") : this.currentItem.show();
                            for (var c = this.containers.length - 1; 0 <= c; c--) this.containers[c]._trigger("deactivate", null, this._uiHash(this)), this.containers[c].containerCache.over && (this.containers[c]._trigger("out", null, this._uiHash(this)), this.containers[c].containerCache.over = 0)
                        }
                        return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper &&
                            this.helper && this.helper[0].parentNode && this.helper.remove(), b.extend(this, {
                                helper: null,
                                dragging: !1,
                                reverting: !1,
                                _noFinalSort: null
                            }), this.domPosition.prev ? b(this.domPosition.prev).after(this.currentItem) : b(this.domPosition.parent).prepend(this.currentItem)), this
                    },
                    serialize: function (c) {
                        var e = this._getItemsAsjQuery(c && c.connected),
                            h = [];
                        return c = c || {}, b(e).each(function () {
                            var e = (b(c.item || this).attr(c.attribute || "id") || "").match(c.expression || /(.+)[\-=_](.+)/);
                            e && h.push((c.key || e[1] + "[]") + "=" + (c.key &&
                                c.expression ? e[1] : e[2]))
                        }), !h.length && c.key && h.push(c.key + "="), h.join("&")
                    },
                    toArray: function (c) {
                        var e = this._getItemsAsjQuery(c && c.connected),
                            h = [];
                        return c = c || {}, e.each(function () {
                            h.push(b(c.item || this).attr(c.attribute || "id") || "")
                        }), h
                    },
                    _intersectsWith: function (b) {
                        var c = this.positionAbs.left,
                            h = c + this.helperProportions.width,
                            f = this.positionAbs.top,
                            l = f + this.helperProportions.height,
                            q = b.left,
                            t = q + b.width,
                            w = b.top,
                            y = w + b.height,
                            C = this.offset.click.top,
                            A = this.offset.click.left;
                        C = "x" === this.options.axis || f +
                            C > w && y > f + C;
                        A = "y" === this.options.axis || c + A > q && t > c + A;
                        return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > b[this.floating ? "width" : "height"] ? C && A : c + this.helperProportions.width / 2 > q && t > h - this.helperProportions.width / 2 && f + this.helperProportions.height / 2 > w && y > l - this.helperProportions.height / 2
                    },
                    _intersectsWithPointer: function (b) {
                        var c = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top +
                            this.offset.click.top, b.top, b.height);
                        b = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, b.left, b.width);
                        c = c && b;
                        b = this._getDragVerticalDirection();
                        var h = this._getDragHorizontalDirection();
                        return c ? this.floating ? h && "right" === h || "down" === b ? 2 : 1 : b && ("down" === b ? 2 : 1) : !1
                    },
                    _intersectsWithSides: function (b) {
                        var c = this._isOverAxis(this.positionAbs.top + this.offset.click.top, b.top + b.height / 2, b.height);
                        b = this._isOverAxis(this.positionAbs.left + this.offset.click.left, b.left +
                            b.width / 2, b.width);
                        var h = this._getDragVerticalDirection(),
                            f = this._getDragHorizontalDirection();
                        return this.floating && f ? "right" === f && b || "left" === f && !b : h && ("down" === h && c || "up" === h && !c)
                    },
                    _getDragVerticalDirection: function () {
                        var b = this.positionAbs.top - this.lastPositionAbs.top;
                        return 0 !== b && (0 < b ? "down" : "up")
                    },
                    _getDragHorizontalDirection: function () {
                        var b = this.positionAbs.left - this.lastPositionAbs.left;
                        return 0 !== b && (0 < b ? "right" : "left")
                    },
                    refresh: function (b) {
                        return this._refreshItems(b), this._setHandleClassName(),
                            this.refreshPositions(), this
                    },
                    _connectWith: function () {
                        var b = this.options;
                        return b.connectWith.constructor === String ? [b.connectWith] : b.connectWith
                    },
                    _getItemsAsjQuery: function (c) {
                        function e() {
                            l.push(this)
                        }
                        var h, f, l = [],
                            q = [],
                            t = this._connectWith();
                        if (t && c)
                            for (c = t.length - 1; 0 <= c; c--) {
                                var w = b(t[c]);
                                for (h = w.length - 1; 0 <= h; h--)(f = b.data(w[h], this.widgetFullName)) && f !== this && !f.options.disabled && q.push([b.isFunction(f.options.items) ? f.options.items.call(f.element) : b(f.options.items, f.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),
                                    f
                                ])
                            }
                        q.push([b.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                            options: this.options,
                            item: this.currentItem
                        }) : b(this.options.items, this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"), this]);
                        for (c = q.length - 1; 0 <= c; c--) q[c][0].each(e);
                        return b(l)
                    },
                    _removeCurrentsFromItems: function () {
                        var c = this.currentItem.find(":data(" + this.widgetName + "-item)");
                        this.items = b.grep(this.items, function (b) {
                            for (var e = 0; c.length > e; e++)
                                if (c[e] === b.item[0]) return !1;
                            return !0
                        })
                    },
                    _refreshItems: function (c) {
                        this.items = [];
                        this.containers = [this];
                        var e, h, f, l, q = this.items,
                            t = [
                                [b.isFunction(this.options.items) ? this.options.items.call(this.element[0], c, {
                                    item: this.currentItem
                                }) : b(this.options.items, this.element), this]
                            ];
                        if ((l = this._connectWith()) && this.ready)
                            for (e = l.length - 1; 0 <= e; e--) {
                                var w = b(l[e]);
                                for (h = w.length - 1; 0 <= h; h--)(f = b.data(w[h], this.widgetFullName)) && f !== this && !f.options.disabled && (t.push([b.isFunction(f.options.items) ? f.options.items.call(f.element[0], c, {
                                    item: this.currentItem
                                }) :
                                    b(f.options.items, f.element), f
                                ]), this.containers.push(f))
                            }
                        for (e = t.length - 1; 0 <= e; e--)
                            for (c = t[e][1], w = t[e][0], h = 0, l = w.length; l > h; h++) f = b(w[h]), f.data(this.widgetName + "-item", c), q.push({
                                item: f,
                                instance: c,
                                width: 0,
                                height: 0,
                                left: 0,
                                top: 0
                            })
                    },
                    refreshPositions: function (c) {
                        this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                        var e, h, f;
                        for (e = this.items.length - 1; 0 <= e; e--) {
                            var l = this.items[e];
                            l.instance !== this.currentContainer && this.currentContainer && l.item[0] !== this.currentItem[0] || (h =
                                this.options.toleranceElement ? b(this.options.toleranceElement, l.item) : l.item, c || (l.width = h.outerWidth(), l.height = h.outerHeight()), f = h.offset(), l.left = f.left, l.top = f.top)
                        }
                        if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                        else
                            for (e = this.containers.length - 1; 0 <= e; e--) f = this.containers[e].element.offset(), this.containers[e].containerCache.left = f.left, this.containers[e].containerCache.top = f.top, this.containers[e].containerCache.width = this.containers[e].element.outerWidth(),
                                this.containers[e].containerCache.height = this.containers[e].element.outerHeight();
                        return this
                    },
                    _createPlaceholder: function (c) {
                        c = c || this;
                        var e, h = c.options;
                        h.placeholder && h.placeholder.constructor !== String || (e = h.placeholder, h.placeholder = {
                            element: function () {
                                var h = c.currentItem[0].nodeName.toLowerCase(),
                                    f = b("<" + h + ">", c.document[0]).addClass(e || c.currentItem[0].className + " dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");
                                return "tr" === h ? c.currentItem.children().each(function () {
                                    b("<td>&#160;</td>",
                                        c.document[0]).attr("colspan", b(this).attr("colspan") || 1).appendTo(f)
                                }) : "img" === h && f.attr("src", c.currentItem.attr("src")), e || f.css("visibility", "hidden"), f
                            },
                            update: function (b, f) {
                                (!e || h.forcePlaceholderSize) && (f.height() || f.height(c.currentItem.innerHeight() - parseInt(c.currentItem.css("paddingTop") || 0, 10) - parseInt(c.currentItem.css("paddingBottom") || 0, 10)), f.width() || f.width(c.currentItem.innerWidth() - parseInt(c.currentItem.css("paddingLeft") || 0, 10) - parseInt(c.currentItem.css("paddingRight") || 0, 10)))
                            }
                        });
                        c.placeholder = b(h.placeholder.element.call(c.element, c.currentItem));
                        c.currentItem.after(c.placeholder);
                        h.placeholder.update(c, c.placeholder)
                    },
                    _contactContainers: function (c) {
                        var e, h, f, l, q, t = f = null;
                        for (e = this.containers.length - 1; 0 <= e; e--) b.contains(this.currentItem[0], this.containers[e].element[0]) || (this._intersectsWith(this.containers[e].containerCache) ? f && b.contains(this.containers[e].element[0], f.element[0]) || (f = this.containers[e], t = e) : this.containers[e].containerCache.over && (this.containers[e]._trigger("out",
                            c, this._uiHash(this)), this.containers[e].containerCache.over = 0));
                        if (f)
                            if (1 === this.containers.length) this.containers[t].containerCache.over || (this.containers[t]._trigger("over", c, this._uiHash(this)), this.containers[t].containerCache.over = 1);
                            else {
                                e = 1E4;
                                var w = null;
                                f = (h = f.floating || this._isFloating(this.currentItem)) ? "left" : "top";
                                var y = h ? "width" : "height";
                                var C = h ? "clientX" : "clientY";
                                for (h = this.items.length - 1; 0 <= h; h--) b.contains(this.containers[t].element[0], this.items[h].item[0]) && this.items[h].item[0] !==
                                    this.currentItem[0] && (l = this.items[h].item.offset()[f], q = !1, c[C] - l > this.items[h][y] / 2 && (q = !0), e > Math.abs(c[C] - l) && (e = Math.abs(c[C] - l), w = this.items[h], this.direction = q ? "up" : "down"));
                                if (w || this.options.dropOnEmpty) {
                                    if (this.currentContainer === this.containers[t]) return this.currentContainer.containerCache.over || (this.containers[t]._trigger("over", c, this._uiHash()), this.currentContainer.containerCache.over = 1), void 0;
                                    w ? this._rearrange(c, w, null, !0) : this._rearrange(c, null, this.containers[t].element, !0);
                                    this._trigger("change",
                                        c, this._uiHash());
                                    this.containers[t]._trigger("change", c, this._uiHash(this));
                                    this.currentContainer = this.containers[t];
                                    this.options.placeholder.update(this.currentContainer, this.placeholder);
                                    this.containers[t]._trigger("over", c, this._uiHash(this));
                                    this.containers[t].containerCache.over = 1
                                }
                            }
                    },
                    _createHelper: function (c) {
                        var e = this.options;
                        c = b.isFunction(e.helper) ? b(e.helper.apply(this.element[0], [c, this.currentItem])) : "clone" === e.helper ? this.currentItem.clone() : this.currentItem;
                        return c.parents("body").length ||
                            b("parent" !== e.appendTo ? e.appendTo : this.currentItem[0].parentNode)[0].appendChild(c[0]), c[0] === this.currentItem[0] && (this._storedCSS = {
                                width: this.currentItem[0].style.width,
                                height: this.currentItem[0].style.height,
                                position: this.currentItem.css("position"),
                                top: this.currentItem.css("top"),
                                left: this.currentItem.css("left")
                            }), (!c[0].style.width || e.forceHelperSize) && c.width(this.currentItem.width()), (!c[0].style.height || e.forceHelperSize) && c.height(this.currentItem.height()), c
                    },
                    _adjustOffsetFromHelper: function (c) {
                        "string" ==
                            typeof c && (c = c.split(" "));
                        b.isArray(c) && (c = {
                            left: +c[0],
                            top: +c[1] || 0
                        });
                        "left" in c && (this.offset.click.left = c.left + this.margins.left);
                        "right" in c && (this.offset.click.left = this.helperProportions.width - c.right + this.margins.left);
                        "top" in c && (this.offset.click.top = c.top + this.margins.top);
                        "bottom" in c && (this.offset.click.top = this.helperProportions.height - c.bottom + this.margins.top)
                    },
                    _getParentOffset: function () {
                        this.offsetParent = this.helper.offsetParent();
                        var c = this.offsetParent.offset();
                        return "absolute" ===
                            this.cssPosition && this.scrollParent[0] !== document && b.contains(this.scrollParent[0], this.offsetParent[0]) && (c.left += this.scrollParent.scrollLeft(), c.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && b.dvUi.ie) && (c = {
                                top: 0,
                                left: 0
                            }), {
                                top: c.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                                left: c.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                            }
                    },
                    _getRelativeOffset: function () {
                        if ("relative" ===
                            this.cssPosition) {
                            var b = this.currentItem.position();
                            return {
                                top: b.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                                left: b.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                            }
                        }
                        return {
                            top: 0,
                            left: 0
                        }
                    },
                    _cacheMargins: function () {
                        this.margins = {
                            left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                            top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                        }
                    },
                    _cacheHelperProportions: function () {
                        this.helperProportions = {
                            width: this.helper.outerWidth(),
                            height: this.helper.outerHeight()
                        }
                    },
                    _setContainment: function () {
                        var c, e, h, f = this.options;
                        "parent" === f.containment && (f.containment = this.helper[0].parentNode);
                        "document" !== f.containment && "window" !== f.containment || (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, b("document" === f.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (b("document" === f.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height -
                            this.margins.top
                        ]);
                        /^(document|window|parent)$/.test(f.containment) || (c = b(f.containment)[0], e = b(f.containment).offset(), h = "hidden" !== b(c).css("overflow"), this.containment = [e.left + (parseInt(b(c).css("borderLeftWidth"), 10) || 0) + (parseInt(b(c).css("paddingLeft"), 10) || 0) - this.margins.left, e.top + (parseInt(b(c).css("borderTopWidth"), 10) || 0) + (parseInt(b(c).css("paddingTop"), 10) || 0) - this.margins.top, e.left + (h ? Math.max(c.scrollWidth, c.offsetWidth) : c.offsetWidth) - (parseInt(b(c).css("borderLeftWidth"), 10) || 0) -
                            (parseInt(b(c).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, e.top + (h ? Math.max(c.scrollHeight, c.offsetHeight) : c.offsetHeight) - (parseInt(b(c).css("borderTopWidth"), 10) || 0) - (parseInt(b(c).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top
                        ])
                    },
                    _convertPositionTo: function (c, e) {
                        e || (e = this.position);
                        c = "absolute" === c ? 1 : -1;
                        var h = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && b.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent :
                            this.offsetParent,
                            f = /(html|body)/i.test(h[0].tagName);
                        return {
                            top: e.top + this.offset.relative.top * c + this.offset.parent.top * c - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : f ? 0 : h.scrollTop()) * c,
                            left: e.left + this.offset.relative.left * c + this.offset.parent.left * c - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : f ? 0 : h.scrollLeft()) * c
                        }
                    },
                    _generatePosition: function (c) {
                        var e, h, f = this.options,
                            l = c.pageX,
                            q = c.pageY,
                            t = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && b.contains(this.scrollParent[0],
                                this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                            w = /(html|body)/i.test(t[0].tagName);
                        return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (c.pageX - this.offset.click.left < this.containment[0] && (l = this.containment[0] + this.offset.click.left), c.pageY - this.offset.click.top < this.containment[1] && (q = this.containment[1] + this.offset.click.top), c.pageX -
                            this.offset.click.left > this.containment[2] && (l = this.containment[2] + this.offset.click.left), c.pageY - this.offset.click.top > this.containment[3] && (q = this.containment[3] + this.offset.click.top)), f.grid && (e = this.originalPageY + Math.round((q - this.originalPageY) / f.grid[1]) * f.grid[1], q = this.containment ? e - this.offset.click.top >= this.containment[1] && e - this.offset.click.top <= this.containment[3] ? e : e - this.offset.click.top >= this.containment[1] ? e - f.grid[1] : e + f.grid[1] : e, h = this.originalPageX + Math.round((l - this.originalPageX) /
                                f.grid[0]) * f.grid[0], l = this.containment ? h - this.offset.click.left >= this.containment[0] && h - this.offset.click.left <= this.containment[2] ? h : h - this.offset.click.left >= this.containment[0] ? h - f.grid[0] : h + f.grid[0] : h)), {
                                top: q - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : w ? 0 : t.scrollTop()),
                                left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() :
                                    w ? 0 : t.scrollLeft())
                            }
                    },
                    _rearrange: function (b, e, h, f) {
                        h ? h[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? e.item[0] : e.item[0].nextSibling);
                        var c = this.counter = this.counter ? ++this.counter : 1;
                        this._delay(function () {
                            c === this.counter && this.refreshPositions(!f)
                        })
                    },
                    _clear: function (b, e) {
                        function c(b, c, e) {
                            return function (h) {
                                e._trigger(b, h, c._uiHash(c))
                            }
                        }
                        this.reverting = !1;
                        var h, f = [];
                        if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem),
                            this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                            for (h in this._storedCSS) "auto" !== this._storedCSS[h] && "static" !== this._storedCSS[h] || (this._storedCSS[h] = "");
                            this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")
                        } else this.currentItem.show();
                        this.fromOutside && !e && f.push(function (b) {
                            this._trigger("receive", b, this._uiHash(this.fromOutside))
                        });
                        !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".dvUi-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] ||
                            e || f.push(function (b) {
                                this._trigger("update", b, this._uiHash())
                            });
                        this !== this.currentContainer && (e || (f.push(function (b) {
                            this._trigger("remove", b, this._uiHash())
                        }), f.push(function (b) {
                            return function (c) {
                                b._trigger("receive", c, this._uiHash(this))
                            }
                        }.call(this, this.currentContainer)), f.push(function (b) {
                            return function (c) {
                                b._trigger("update", c, this._uiHash(this))
                            }
                        }.call(this, this.currentContainer))));
                        for (h = this.containers.length - 1; 0 <= h; h--) e || f.push(c("deactivate", this, this.containers[h])), this.containers[h].containerCache.over &&
                            (f.push(c("out", this, this.containers[h])), this.containers[h].containerCache.over = 0);
                        if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, e || this._trigger("beforeStop", b, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval ||
                            (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !e) {
                            for (h = 0; f.length > h; h++) f[h].call(this, b);
                            this._trigger("stop", b, this._uiHash())
                        }
                        return this.fromOutside = !1, !this.cancelHelperRemoval
                    },
                    _trigger: function () {
                        !1 === b.Widget.prototype._trigger.apply(this, arguments) && this.cancel()
                    },
                    _uiHash: function (c) {
                        var e = c || this;
                        return {
                            helper: e.helper,
                            placeholder: e.placeholder || b([]),
                            position: e.position,
                            originalPosition: e.originalPosition,
                            offset: e.positionAbs,
                            item: e.currentItem,
                            sender: c ?
                                c.element : null
                        }
                    }
                })
            }(dvJQuery), dvJQuery && function (b) {
                var f = {
                    init: function (l) {
                        "string" === typeof l && (l = {
                            idMenu: l
                        });
                        l = b.extend(!0, {}, b.fn.dvContextMenu.defaults, l);
                        l.idMenu ? null === document.getElementById(l.idMenu) && b.error("The menu specified does not exist") : b.error("No menu specified");
                        f.destroy.call(this);
                        this.data("dv-context-menu", l);
                        var t = "dv-context-menu-" + l.idMenu;
                        b("html").on("contextmenu." + t + " click." + t, function () {
                            b("#" + l.idMenu).hide()
                        });
                        this.on("contextmenu." + t, function (h) {
                            h.preventDefault();
                            h.stopPropagation();
                            if (null == l.beforeShow || "function" !== typeof l.beforeShow || l.beforeShow()) h = {
                                x: h.clientX,
                                y: h.clientY
                            }, null != l.translateMouse && "function" === typeof l.translateMouse && l.translateMouse(h), b("#" + l.idMenu).css({
                                left: h.x + "px",
                                top: h.y + "px"
                            }), b("#" + l.idMenu).show()
                        });
                        return this
                    },
                    destroy: function () {
                        this.each(function () {
                            var f = b(this),
                                t = f.data("dv-context-menu");
                            void 0 !== t && (b("#" + t.idMenu).hide(), f.removeData("dv-context-menu").off(".dv-context-menu-" + t.idMenu))
                        });
                        b("html").off(".dv-context-menu");
                        return this
                    }
                };
                b.fn.dvContextMenu = function (l) {
                    if (f[l]) return f[l].apply(this, Array.prototype.slice.call(arguments, 1));
                    if ("object" !== typeof l && "string" !== typeof l && l) b.error("Method " + l + " does not exist on dvJQuery.dvContextMenu");
                    else return f.init.apply(this, arguments)
                };
                b.fn.dvContextMenu.defaults = {
                    idMenu: null,
                    translateMouse: null,
                    beforeShow: null
                }
            }(dvJQuery), dvJQuery && function (b) {
                function f(a, g) {
                    R();
                    var d = b('<div class="minicolors" />'),
                        c = b.minicolors.defaults,
                        r;
                    if (!a.data("minicolors-initialized")) {
                        g =
                            b.extend(!0, {}, c, g);
                        d.addClass("minicolors-theme-" + g.theme).toggleClass("minicolors-with-opacity", g.opacity);
                        void 0 !== g.position && b.each(g.position.split(" "), function () {
                            d.addClass("minicolors-position-" + this)
                        });
                        c = "rgb" === g.format ? g.opacity ? "25" : "20" : g.keywords ? "11" : "7";
                        a.addClass("minicolors-input").data("minicolors-initialized", !1).data("minicolors-settings", g).prop("size", c).wrap(d).after('<div class="minicolors-panel minicolors-slider-' + g.control + '"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');
                        g.inline || (a.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'), a.next(".minicolors-input-swatch").on("click", function (d) {
                            d.preventDefault();
                            a.focus()
                        }));
                        c = a.parent().find(".minicolors-panel");
                        c.on("selectstart", function () {
                            return !1
                        }).end();
                        if (g.swatches && 0 !== g.swatches.length)
                            for (c.addClass("minicolors-with-swatches"), c = b('<ul class="minicolors-swatches"></ul>').appendTo(c), r = 0; r < g.swatches.length; ++r) {
                                var e = g.swatches[r];
                                e = D(e) ? y(e, !0) : ba(w(e, !0));
                                b('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(c).data("swatch-color", g.swatches[r]).find(".minicolors-swatch-color").css({
                                    backgroundColor: fa(e),
                                    opacity: e.a
                                });
                                g.swatches[r] = e
                            }
                        g.inline && a.parent().addClass("minicolors-inline");
                        k(a, !1);
                        a.data("minicolors-initialized", !0)
                    }
                }

                function l(a) {
                    var d = a.parent();
                    a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
                    d.before(a).remove();
                    b([document]).off(".minicolors")
                }

                function t(a) {
                    var d = a.parent(),
                        b = d.find(".minicolors-panel"),
                        c = a.data("minicolors-settings");
                    !a.data("minicolors-initialized") || a.prop("disabled") || d.hasClass("minicolors-inline") || d.hasClass("minicolors-focus") || (h(), d.addClass("minicolors-focus"), b.stop(!0, !0).fadeIn(c.showSpeed, function () {
                        c.show && c.show.call(a.get(0))
                    }))
                }

                function h() {
                    b(".minicolors-focus").each(function () {
                        var a = b(this),
                            g = a.find(".minicolors-input"),
                            c = a.find(".minicolors-panel"),
                            p = g.data("minicolors-settings");
                        c.fadeOut(p.hideSpeed, function () {
                            p.hide && p.hide.call(g.get(0));
                            a.removeClass("minicolors-focus")
                        })
                    })
                }

                function q(a, b, m) {
                    var d = a.parents(".minicolors").find(".minicolors-input"),
                        g = d.data("minicolors-settings"),
                        e = a.find("[class$=-picker]"),
                        h = a.offset().left,
                        f = a.offset().top,
                        k = Math.round(b.pageX - h),
                        l = Math.round(b.pageY - f);
                    m = m ? g.animationSpeed : 0;
                    b.originalEvent.changedTouches && (k = b.originalEvent.changedTouches[0].pageX - h, l = b.originalEvent.changedTouches[0].pageY - f);
                    0 > k &&
                        (k = 0);
                    0 > l && (l = 0);
                    k > a.width() && (k = a.width());
                    l > a.height() && (l = a.height());
                    a.parent().is(".minicolors-slider-wheel") && e.parent().is(".minicolors-grid") && (h = 75 - k, f = 75 - l, b = Math.sqrt(h * h + f * f), h = Math.atan2(f, h), 0 > h && (h += 2 * Math.PI), 75 < b && (b = 75, k = 75 - 75 * Math.cos(h), l = 75 - 75 * Math.sin(h)), k = Math.round(k), l = Math.round(l));
                    a.is(".minicolors-grid") ? e.stop(!0).animate({
                        top: l + "px",
                        left: k + "px"
                    }, m, g.animationEasing, function () {
                        c(d, a)
                    }) : e.stop(!0).animate({
                        top: l + "px"
                    }, m, g.animationEasing, function () {
                        c(d, a)
                    })
                }

                function c(a,
                    b) {
                    function d(a, d) {
                        if (!a.length || !d) return null;
                        var b = a.offset().left;
                        var g = a.offset().top;
                        return {
                            x: b - d.offset().left + a.outerWidth() / 2,
                            y: g - d.offset().top + a.outerHeight() / 2
                        }
                    }
                    var g = a.val();
                    var c = a.attr("data-opacity");
                    var h = a.parent();
                    var u = a.data("minicolors-settings"),
                        f = h.find(".minicolors-input-swatch");
                    var k = h.find(".minicolors-grid");
                    var l = h.find(".minicolors-slider"),
                        q = h.find(".minicolors-opacity-slider");
                    var t = k.find("[class$=-picker]");
                    var w = l.find("[class$=-picker]"),
                        H = q.find("[class$=-picker]");
                    t = d(t, k);
                    w = d(w, l);
                    H = d(H, q);
                    if (b.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")) {
                        switch (u.control) {
                            case "wheel":
                                g = k.width() / 2 - t.x;
                                h = k.height() / 2 - t.y;
                                k = Math.sqrt(g * g + h * h);
                                g = Math.atan2(h, g);
                                0 > g && (g += 2 * Math.PI);
                                75 < k && (k = 75, t.x = 69 - 75 * Math.cos(g), t.y = 69 - 75 * Math.sin(g));
                                b = A(k / .75, 0, 100);
                                c = A(180 * g / Math.PI, 0, 360);
                                t = A(100 - Math.floor(w.y * (100 / l.height())), 0, 100);
                                g = T({
                                    h: c,
                                    s: b,
                                    b: t
                                });
                                l.css("backgroundColor", T({
                                    h: c,
                                    s: b,
                                    b: 100
                                }));
                                break;
                            case "saturation":
                                c = A(parseInt(t.x * (360 / k.width()), 10),
                                    0, 360);
                                b = A(100 - Math.floor(w.y * (100 / l.height())), 0, 100);
                                t = A(100 - Math.floor(t.y * (100 / k.height())), 0, 100);
                                g = T({
                                    h: c,
                                    s: b,
                                    b: t
                                });
                                l.css("backgroundColor", T({
                                    h: c,
                                    s: 100,
                                    b: t
                                }));
                                h.find(".minicolors-grid-inner").css("opacity", b / 100);
                                break;
                            case "brightness":
                                c = A(parseInt(t.x * (360 / k.width()), 10), 0, 360);
                                b = A(100 - Math.floor(t.y * (100 / k.height())), 0, 100);
                                t = A(100 - Math.floor(w.y * (100 / l.height())), 0, 100);
                                g = T({
                                    h: c,
                                    s: b,
                                    b: t
                                });
                                l.css("backgroundColor", T({
                                    h: c,
                                    s: b,
                                    b: 100
                                }));
                                h.find(".minicolors-grid-inner").css("opacity", 1 - t / 100);
                                break;
                            default:
                                c = A(360 - parseInt(w.y * (360 / l.height()), 10), 0, 360), b = A(Math.floor(t.x * (100 / k.width())), 0, 100), t = A(100 - Math.floor(t.y * (100 / k.height())), 0, 100), g = T({
                                    h: c,
                                    s: b,
                                    b: t
                                }), k.css("backgroundColor", T({
                                    h: c,
                                    s: 100,
                                    b: 100
                                }))
                        }
                        c = u.opacity ? parseFloat(1 - H.y / q.height()).toFixed(2) : 1;
                        e(a, g, c)
                    } else f.find("span").css({
                        backgroundColor: g,
                        opacity: c
                    }), z(a, g, c)
                }

                function e(a, b, c) {
                    var d = a.parent(),
                        g = a.data("minicolors-settings");
                    d = d.find(".minicolors-input-swatch");
                    g.opacity && a.attr("data-opacity", c);
                    if ("rgb" === g.format) {
                        b =
                            D(b) ? y(b, !0) : ba(w(b, !0));
                        c = "" === a.attr("data-opacity") ? 1 : A(parseFloat(a.attr("data-opacity")).toFixed(2), 0, 1);
                        if (isNaN(c) || !g.opacity) c = 1;
                        b = 1 >= a.minicolors("rgbObject").a && b && g.opacity ? "rgba(" + b.r + ", " + b.g + ", " + b.b + ", " + parseFloat(c) + ")" : "rgb(" + b.r + ", " + b.g + ", " + b.b + ")"
                    } else D(b) && (b = G(b)), b = M(b, g.letterCase);
                    a.val(b);
                    d.find("span").css({
                        backgroundColor: b,
                        opacity: c
                    });
                    z(a, b, c)
                }

                function k(d, g) {
                    var c;
                    var p = d.parent();
                    var e = d.data("minicolors-settings");
                    var h = p.find(".minicolors-input-swatch");
                    var u =
                        p.find(".minicolors-grid"),
                        f = p.find(".minicolors-slider"),
                        k = p.find(".minicolors-opacity-slider"),
                        l = u.find("[class$=-picker]"),
                        q = f.find("[class$=-picker]"),
                        t = k.find("[class$=-picker]");
                    if (D(d.val())) {
                        var Z = G(d.val());
                        (c = A(parseFloat(O(d.val())).toFixed(2), 0, 1)) && d.attr("data-opacity", c)
                    } else Z = M(w(d.val(), !0), e.letterCase);
                    Z || (Z = M(C(e.defaultValue, !0), e.letterCase));
                    c = a(Z);
                    var H = e.keywords ? b.map(e.keywords.split(","), function (a) {
                        return b.trim(a.toLowerCase())
                    }) : [];
                    H = "" !== d.val() && -1 < b.inArray(d.val().toLowerCase(),
                        H) ? M(d.val()) : D(d.val()) ? y(d.val()) : Z;
                    g || d.val(H);
                    if (e.opacity) {
                        var P = "" === d.attr("data-opacity") ? 1 : A(parseFloat(d.attr("data-opacity")).toFixed(2), 0, 1);
                        isNaN(P) && (P = 1);
                        d.attr("data-opacity", P);
                        h.find("span").css("opacity", P);
                        g = A(k.height() - k.height() * P, 0, k.height());
                        t.css("top", g + "px")
                    }
                    "transparent" === d.val().toLowerCase() && h.find("span").css("opacity", 0);
                    h.find("span").css("backgroundColor", Z);
                    switch (e.control) {
                        case "wheel":
                            p = A(Math.ceil(.75 * c.s), 0, u.height() / 2);
                            h = c.h * Math.PI / 180;
                            e = A(75 - Math.cos(h) *
                                p, 0, u.width());
                            g = A(75 - Math.sin(h) * p, 0, u.height());
                            l.css({
                                top: g + "px",
                                left: e + "px"
                            });
                            g = 150 - c.b / (100 / u.height());
                            "" === Z && (g = 0);
                            q.css("top", g + "px");
                            f.css("backgroundColor", T({
                                h: c.h,
                                s: c.s,
                                b: 100
                            }));
                            break;
                        case "saturation":
                            e = A(5 * c.h / 12, 0, 150);
                            g = A(u.height() - Math.ceil(c.b / (100 / u.height())), 0, u.height());
                            l.css({
                                top: g + "px",
                                left: e + "px"
                            });
                            g = A(f.height() - c.s * (f.height() / 100), 0, f.height());
                            q.css("top", g + "px");
                            f.css("backgroundColor", T({
                                h: c.h,
                                s: 100,
                                b: c.b
                            }));
                            p.find(".minicolors-grid-inner").css("opacity", c.s / 100);
                            break;
                        case "brightness":
                            e = A(5 * c.h / 12, 0, 150);
                            g = A(u.height() - Math.ceil(c.s / (100 / u.height())), 0, u.height());
                            l.css({
                                top: g + "px",
                                left: e + "px"
                            });
                            g = A(f.height() - c.b * (f.height() / 100), 0, f.height());
                            q.css("top", g + "px");
                            f.css("backgroundColor", T({
                                h: c.h,
                                s: c.s,
                                b: 100
                            }));
                            p.find(".minicolors-grid-inner").css("opacity", 1 - c.b / 100);
                            break;
                        default:
                            e = A(Math.ceil(c.s / (100 / u.width())), 0, u.width()), g = A(u.height() - Math.ceil(c.b / (100 / u.height())), 0, u.height()), l.css({
                                top: g + "px",
                                left: e + "px"
                            }), g = A(f.height() - c.h / (360 / f.height()),
                                0, f.height()), q.css("top", g + "px"), u.css("backgroundColor", T({
                                    h: c.h,
                                    s: 100,
                                    b: 100
                                }))
                    }
                    d.data("minicolors-initialized") && z(d, H, P)
                }

                function z(a, b, c) {
                    var d = a.data("minicolors-settings"),
                        g = a.data("minicolors-lastChange"),
                        m;
                    if (!g || g.value !== b || g.opacity !== c) {
                        a.data("minicolors-lastChange", {
                            value: b,
                            opacity: c
                        });
                        if (d.swatches && 0 !== d.swatches.length) {
                            g = D(b) ? y(b, !0) : ba(b);
                            var e = -1;
                            for (m = 0; m < d.swatches.length; ++m)
                                if (g.r === d.swatches[m].r && g.g === d.swatches[m].g && g.b === d.swatches[m].b && g.a === d.swatches[m].a) {
                                    e = m;
                                    break
                                } a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"); - 1 !== e && a.parent().find(".minicolors-swatches .minicolors-swatch").eq(m).addClass("selected")
                        }
                        d.change && (d.changeDelay ? (clearTimeout(a.data("minicolors-changeTimeout")), a.data("minicolors-changeTimeout", setTimeout(function () {
                            d.change.call(a.get(0), b, c)
                        }, d.changeDelay))) : d.change.call(a.get(0), b, c));
                        a.trigger("change").trigger("input")
                    }
                }

                function E(a) {
                    var d = b(a).attr("data-opacity");
                    D(b(a).val()) ? a = y(b(a).val(),
                        !0) : (a = w(b(a).val(), !0), a = ba(a));
                    if (!a) return null;
                    void 0 !== d && b.extend(a, {
                        a: parseFloat(d)
                    });
                    return a
                }

                function N(a, g) {
                    var d = b(a).attr("data-opacity");
                    D(b(a).val()) ? a = y(b(a).val(), !0) : (a = w(b(a).val(), !0), a = ba(a));
                    if (!a) return null;
                    void 0 === d && (d = 1);
                    return g ? "rgba(" + a.r + ", " + a.g + ", " + a.b + ", " + parseFloat(d) + ")" : "rgb(" + a.r + ", " + a.g + ", " + a.b + ")"
                }

                function M(a, b) {
                    return "uppercase" === b ? a.toUpperCase() : a.toLowerCase()
                }

                function w(a, b) {
                    a = a.replace(/^#/g, "");
                    if (!a.match(/^[A-F0-9]{3,6}/ig) || 3 !== a.length && 6 !==
                        a.length) return "";
                    3 === a.length && b && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
                    return "#" + a
                }

                function y(a, b) {
                    a = a.replace(/[^\d,.]/g, "").split(",");
                    a[0] = A(parseInt(a[0], 10), 0, 255);
                    a[1] = A(parseInt(a[1], 10), 0, 255);
                    a[2] = A(parseInt(a[2], 10), 0, 255);
                    a[3] && (a[3] = A(parseFloat(a[3], 10), 0, 1));
                    return b ? a[3] ? {
                        r: a[0],
                        g: a[1],
                        b: a[2],
                        a: a[3]
                    } : {
                            r: a[0],
                            g: a[1],
                            b: a[2]
                        } : "undefined" !== typeof a[3] && 1 >= a[3] ? "rgba(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")" : "rgb(" + a[0] + ", " + a[1] + ", " + a[2] + ")"
                }

                function C(a, b) {
                    return D(a) ? y(a) : w(a, b)
                }

                function A(a,
                    b, c) {
                    a < b && (a = b);
                    a > c && (a = c);
                    return a
                }

                function D(a) {
                    return (a = a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i)) && 4 === a.length ? !0 : !1
                }

                function O(a) {
                    return (a = a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i)) && 6 === a.length ? a[4] : "1"
                }

                function G(a) {
                    return (a = a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i)) && 4 === a.length ? "#" + ("0" + parseInt(a[1], 10).toString(16)).slice(-2) + ("0" +
                        parseInt(a[2], 10).toString(16)).slice(-2) + ("0" + parseInt(a[3], 10).toString(16)).slice(-2) : ""
                }

                function fa(a) {
                    var d = [a.r.toString(16), a.g.toString(16), a.b.toString(16)];
                    b.each(d, function (a, b) {
                        1 === b.length && (d[a] = "0" + b)
                    });
                    return "#" + d.join("")
                }

                function T(a) {
                    var d = fa,
                        b, c;
                    var e = Math.round(a.h);
                    var h = Math.round(255 * a.s / 100);
                    a = Math.round(255 * a.b / 100);
                    if (0 === h) e = b = c = a;
                    else {
                        h = (255 - h) * a / 255;
                        var f = e % 60 * (a - h) / 60;
                        360 === e && (e = 0);
                        60 > e ? (e = a, c = h, b = h + f) : 120 > e ? (b = a, c = h, e = a - f) : 180 > e ? (b = a, e = h, c = h + f) : 240 > e ? (c = a, e = h, b = a -
                            f) : 300 > e ? (c = a, b = h, e = h + f) : 360 > e ? (e = a, b = h, c = a - f) : c = b = e = 0
                    }
                    return d({
                        r: Math.round(e),
                        g: Math.round(b),
                        b: Math.round(c)
                    })
                }

                function a(a) {
                    a = ba(a);
                    var d = {
                        h: 0,
                        s: 0,
                        b: 0
                    },
                        b = Math.max(a.r, a.g, a.b),
                        c = b - Math.min(a.r, a.g, a.b);
                    d.b = b;
                    d.s = 0 !== b ? 255 * c / b : 0;
                    d.h = 0 !== d.s ? a.r === b ? (a.g - a.b) / c : a.g === b ? 2 + (a.b - a.r) / c : 4 + (a.r - a.g) / c : -1;
                    d.h *= 60;
                    0 > d.h && (d.h += 360);
                    d.s *= 100 / 255;
                    d.b *= 100 / 255;
                    0 === d.s && (d.h = 360);
                    return d
                }

                function ba(a) {
                    a = parseInt(-1 < a.indexOf("#") ? a.substring(1) : a, 16);
                    return {
                        r: a >> 16,
                        g: (a & 65280) >> 8,
                        b: a & 255
                    }
                }

                function R() {
                    b([document]).on("mousedown.minicolors touchstart.minicolors",
                        function (a) {
                            b(a.target).parents().add(a.target).hasClass("minicolors") || h()
                        }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider", function (a) {
                            var d = b(this);
                            a.preventDefault();
                            b(a.delegateTarget).data("minicolors-target", d);
                            q(d, a, !0)
                        }).on("mousemove.minicolors touchmove.minicolors", function (a) {
                            var d = b(a.delegateTarget).data("minicolors-target");
                            d && q(d, a)
                        }).on("mouseup.minicolors touchend.minicolors", function () {
                            b(this).removeData("minicolors-target")
                        }).on("click.minicolors",
                            ".minicolors-swatches li",
                            function (a) {
                                a.preventDefault();
                                var d = b(this);
                                a = d.parents(".minicolors").find(".minicolors-input");
                                d = d.data("swatch-color");
                                e(a, d, O(d));
                                k(a)
                            }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-input-swatch", function (a) {
                                var d = b(this).parent().find(".minicolors-input");
                                a.preventDefault();
                                t(d)
                            }).on("focus.minicolors", ".minicolors-input", function () {
                                var a = b(this);
                                a.data("minicolors-initialized") && t(a)
                            }).on("blur.minicolors", ".minicolors-input", function () {
                                var a = b(this),
                                    g = a.data("minicolors-settings");
                                if (a.data("minicolors-initialized")) {
                                    var c = g.keywords ? b.map(g.keywords.split(","), function (a) {
                                        return b.trim(a.toLowerCase())
                                    }) : [];
                                    if ("" !== a.val() && -1 < b.inArray(a.val().toLowerCase(), c)) var p = a.val();
                                    else c = D(a.val()) ? y(a.val(), !0) : (c = w(a.val(), !0)) ? ba(c) : null, p = null === c ? g.defaultValue : "rgb" === g.format ? g.opacity ? y("rgba(" + c.r + "," + c.g + "," + c.b + "," + a.attr("data-opacity") + ")") : y("rgb(" + c.r + "," + c.g + "," + c.b + ")") : fa(c);
                                    c = g.opacity ? a.attr("data-opacity") : 1;
                                    "transparent" === p.toLowerCase() &&
                                        (c = 0);
                                    a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity", c);
                                    a.val(p);
                                    "" === a.val() && a.val(C(g.defaultValue, !0));
                                    a.val(M(a.val(), g.letterCase))
                                }
                            }).on("keydown.minicolors", ".minicolors-input", function (a) {
                                var d = b(this);
                                if (d.data("minicolors-initialized")) switch (a.keyCode) {
                                    case 9:
                                        h();
                                        break;
                                    case 13:
                                    case 27:
                                        h(), d.blur()
                                }
                            }).on("keyup.minicolors", ".minicolors-input", function () {
                                var a = b(this);
                                a.data("minicolors-initialized") && k(a, !0)
                            }).on("paste.minicolors", ".minicolors-input", function () {
                                var a =
                                    b(this);
                                a.data("minicolors-initialized") && setTimeout(function () {
                                    k(a, !0)
                                }, 1)
                            })
                }
                b.minicolors = {
                    defaults: {
                        animationSpeed: 50,
                        animationEasing: "swing",
                        change: null,
                        changeDelay: 0,
                        control: "hue",
                        defaultValue: "",
                        format: "hex",
                        hide: null,
                        hideSpeed: 100,
                        inline: !1,
                        keywords: "",
                        letterCase: "lowercase",
                        opacity: !1,
                        position: "bottom left",
                        show: null,
                        showSpeed: 100,
                        theme: "default",
                        swatches: []
                    }
                };
                b.extend(b.fn, {
                    minicolors: function (a, g) {
                        switch (a) {
                            case "destroy":
                                return b(this).each(function () {
                                    l(b(this))
                                }), b(this);
                            case "hide":
                                return h(),
                                    b(this);
                            case "opacity":
                                if (void 0 === g) return b(this).attr("data-opacity");
                                b(this).each(function () {
                                    k(b(this).attr("data-opacity", g))
                                });
                                return b(this);
                            case "rgbObject":
                                return E(b(this), "rgbaObject" === a);
                            case "rgbString":
                            case "rgbaString":
                                return N(b(this), "rgbaString" === a);
                            case "settings":
                                if (void 0 === g) return b(this).data("minicolors-settings");
                                b(this).each(function () {
                                    var a = b(this).data("minicolors-settings") || {};
                                    l(b(this));
                                    b(this).minicolors(b.extend(!0, a, g))
                                });
                                return b(this);
                            case "show":
                                return t(b(this).eq(0)),
                                    b(this);
                            case "value":
                                if (void 0 === g) return b(this).val();
                                b(this).each(function () {
                                    "object" === typeof g && null !== g ? (g.opacity && b(this).attr("data-opacity", A(g.opacity, 0, 1)), g.color && b(this).val(g.color)) : b(this).val(g);
                                    k(b(this))
                                });
                                return b(this);
                            default:
                                return "create" !== a && (g = a), b(this).each(function () {
                                    f(b(this), g)
                                }), b(this)
                        }
                    }
                })
            }(dvJQuery), dvJQuery && function (b) {
                var f, l = function () {
                    var h = b(this);
                    setTimeout(function () {
                        h.find(":dvUi-dvButton").dvButton("refresh")
                    }, 1)
                },
                    t = function (h) {
                        var f = h.name,
                            c = h.form,
                            e = b([]);
                        f && (f = f.replace(/'/g, "\\'"), e = c ? b(c).find("[name='" + f + "'][type=radio]") : b("[name='" + f + "'][type=radio]", h.ownerDocument).filter(function () {
                            return !this.form
                        }));
                        return e
                    };
                b.widget("dvUi.dvButton", {
                    version: "1.11.2",
                    defaultElement: "<button>",
                    options: {
                        disabled: null,
                        text: !0,
                        label: null,
                        icons: {
                            primary: null,
                            secondary: null
                        },
                        setActive: null
                    },
                    _create: function () {
                        this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, l);
                        "boolean" !== typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled);
                        this._determineButtonType();
                        this.hasTitle = !!this.buttonElement.attr("title");
                        var h = this,
                            q = this.options,
                            c = "checkbox" === this.type || "radio" === this.type,
                            e = c ? "" : "dvUi-state-active";
                        null === q.label && (q.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html());
                        this._hoverable(this.buttonElement);
                        this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role", "button").bind("mouseenter" +
                            this.eventNamespace,
                            function () {
                                q.disabled || this === f && b(this).addClass("dvUi-state-active")
                            }).bind("mouseleave" + this.eventNamespace, function () {
                                q.disabled || b(this).removeClass(e)
                            }).bind("click" + this.eventNamespace, function (b) {
                                q.disabled && (b.preventDefault(), b.stopImmediatePropagation())
                            });
                        this._on({
                            focus: function () {
                                this.buttonElement.addClass("dvUi-state-focus")
                            },
                            blur: function () {
                                this.buttonElement.removeClass("dvUi-state-focus")
                            }
                        });
                        c && this.element.bind("change" + this.eventNamespace, function () {
                            h.refresh()
                        });
                        "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
                            if (q.disabled) return !1
                        }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
                            if (q.disabled) return !1;
                            b(this).addClass("dvUi-state-active");
                            h.buttonElement.attr("aria-pressed", "true");
                            var c = h.element[0];
                            t(c).not(c).map(function () {
                                return b(this).dvButton("widget")[0]
                            }).removeClass("dvUi-state-active").attr("aria-pressed", "false")
                        }) : (this.buttonElement.bind("mousedown" + this.eventNamespace,
                            function () {
                                if (q.disabled) return !1;
                                b(this).addClass("dvUi-state-active");
                                f = this;
                                h.document.one("mouseup", function () {
                                    f = null
                                })
                            }).bind("mouseup" + this.eventNamespace, function () {
                                if (q.disabled) return !1;
                                b(this).removeClass("dvUi-state-active")
                            }).bind("keydown" + this.eventNamespace, function (c) {
                                if (q.disabled) return !1;
                                c.keyCode !== b.dvUi.keyCode.SPACE && c.keyCode !== b.dvUi.keyCode.ENTER || b(this).addClass("dvUi-state-active")
                            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () {
                                b(this).removeClass("dvUi-state-active")
                            }),
                            this.buttonElement.is("a") && this.buttonElement.keyup(function (c) {
                                c.keyCode === b.dvUi.keyCode.SPACE && b(this).click()
                            }));
                        this._setOption("disabled", q.disabled);
                        this._resetButton()
                    },
                    _determineButtonType: function () {
                        this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button";
                        if ("checkbox" === this.type || "radio" === this.type) {
                            var b = this.element.parents().last();
                            var f = "label[for='" + this.element.attr("id") +
                                "']";
                            this.buttonElement = b.find(f);
                            this.buttonElement.length || (b = b.length ? b.siblings() : this.element.siblings(), this.buttonElement = b.filter(f), this.buttonElement.length || (this.buttonElement = b.find(f)));
                            this.element.addClass("dvUi-helper-hidden-accessible");
                            (b = this.element.is(":checked")) && this.buttonElement.addClass("dvUi-state-active");
                            this.buttonElement.prop("aria-pressed", b)
                        } else this.buttonElement = this.element
                    },
                    widget: function () {
                        return this.buttonElement
                    },
                    _destroy: function () {
                        this.element.removeClass("dvUi-helper-hidden-accessible");
                        this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());
                        this.hasTitle || this.buttonElement.removeAttr("title")
                    },
                    _setOption: function (b, f) {
                        this._super(b, f);
                        "disabled" === b ? (this.widget().toggleClass("dvUi-state-disabled",
                            !!f), this.element.prop("disabled", !!f), f && ("checkbox" === this.type || "radio" === this.type ? this.buttonElement.removeClass("dvUi-state-focus") : this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))) : this._resetButton()
                    },
                    refresh: function () {
                        var h = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("dvUi-button-disabled"),
                            f = this;
                        h !== this.options.disabled && this._setOption("disabled", h);
                        "radio" === this.type ? t(this.element[0]).each(function () {
                            b(this).is(":checked") ?
                                (b(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed", "true"), f._trigger("setActive")) : b(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed", "false")
                        }) : "checkbox" === this.type && (this.element.is(":checked") ? (this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed", "true"), f._trigger("setActive")) : this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed", "false"))
                    },
                    _resetButton: function () {
                        if ("input" === this.type) this.options.label &&
                            this.element.val(this.options.label);
                        else {
                            var h = this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),
                                f = b("<span></span>", this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(h.empty()).text(),
                                c = this.options.icons,
                                e = c.primary && c.secondary,
                                k = [];
                            c.primary || c.secondary ? (this.options.text && k.push("dvUi-button-text-icon" + (e ? "s" : c.primary ? "-primary" :
                                "-secondary")), c.primary && h.prepend("<span class='dvUi-button-icon-primary dvUi-icon " + c.primary + "'></span>"), c.secondary && h.append("<span class='dvUi-button-icon-secondary dvUi-icon " + c.secondary + "'></span>"), this.options.text || (k.push(e ? "dvUi-button-icons-only" : "dvUi-button-icon-only"), this.hasTitle || h.attr("title", b.trim(f)))) : k.push("dvUi-button-text-only");
                            h.addClass(k.join(" "))
                        }
                    }
                });
                b.widget("dvUi.dvButtonset", {
                    version: "1.11.2",
                    options: {
                        items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",
                        setActive: null
                    },
                    _create: function () {
                        this.element.addClass("dvUi-buttonset");
                        this.refresh()
                    },
                    _init: function () {
                        this.refresh()
                    },
                    _setOption: function (b, f) {
                        "disabled" === b && this.buttons.dvButton("option", b, f);
                        this._super(b, f)
                    },
                    refresh: function () {
                        var h = "rtl" === this.element.css("direction"),
                            f = this.element.find(this.options.items),
                            c = f.filter(":dvUi-dvButton");
                        f.not(":dvUi-dvButton").dvButton({
                            setActive: this.options.setActive
                        });
                        c.dvButton("refresh");
                        this.buttons = f.map(function () {
                            return b(this).dvButton("widget")[0]
                        }).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(h ?
                            "dvUi-corner-right" : "dvUi-corner-left").end().filter(":last").addClass(h ? "dvUi-corner-left" : "dvUi-corner-right").end().end()
                    },
                    _destroy: function () {
                        this.element.removeClass("dvUi-buttonset");
                        this.buttons.map(function () {
                            return b(this).dvButton("widget")[0]
                        }).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")
                    }
                });
                b.widget("dvUi.dvDialog", {
                    version: "1.11.2",
                    options: {
                        appendTo: "body",
                        autoOpen: !0,
                        buttons: [],
                        closeOnEscape: !0,
                        dialogClass: "",
                        draggable: !0,
                        hide: null,
                        height: "auto",
                        maxHeight: null,
                        maxWidth: null,
                        minHeight: 150,
                        minWidth: 150,
                        modal: !1,
                        position: {
                            my: "center",
                            at: "center",
                            of: window,
                            collision: "fit",
                            using: function (h) {
                                var f = b(this).css(h).offset().top;
                                0 > f && b(this).css("top", h.top - f)
                            }
                        },
                        resizable: !0,
                        show: null,
                        title: null,
                        width: 300,
                        beforeClose: null,
                        close: null,
                        drag: null,
                        dragStart: null,
                        dragStop: null,
                        focus: null,
                        open: null,
                        resize: null,
                        resizeStart: null,
                        resizeStop: null
                    },
                    sizeRelatedOptions: {
                        buttons: !0,
                        height: !0,
                        maxHeight: !0,
                        maxWidth: !0,
                        minHeight: !0,
                        minWidth: !0,
                        width: !0
                    },
                    resizableRelatedOptions: {
                        maxHeight: !0,
                        maxWidth: !0,
                        minHeight: !0,
                        minWidth: !0
                    },
                    _create: function () {
                        this.originalCss = {
                            display: this.element[0].style.display,
                            width: this.element[0].style.width,
                            minHeight: this.element[0].style.minHeight,
                            maxHeight: this.element[0].style.maxHeight,
                            height: this.element[0].style.height
                        };
                        this.originalPosition = {
                            parent: this.element.parent(),
                            index: this.element.parent().children().index(this.element)
                        };
                        this.originalTitle = this.element.attr("title");
                        this.options.title = this.options.title || this.originalTitle;
                        this._createWrapper();
                        this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);
                        this._createTitlebar();
                        this._createButtonPane();
                        this.options.draggable && b.fn.draggable && this._makeDraggable();
                        this.options.resizable && b.fn.resizable && this._makeResizable();
                        this._isOpen = !1;
                        this._trackFocus()
                    },
                    _init: function () {
                        this.options.autoOpen && this.open()
                    },
                    _appendTo: function () {
                        var h = this.options.appendTo;
                        return h && (h.jquery || h.nodeType) ? b(h) : this.document.find(h || "body").eq(0)
                    },
                    _destroy: function () {
                        var b = this.originalPosition;
                        this._destroyOverlay();
                        this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();
                        this.uiDialog.stop(!0, !0).remove();
                        this.originalTitle && this.element.attr("title", this.originalTitle);
                        var f = b.parent.children().eq(b.index);
                        f.length && f[0] !== this.element[0] ? f.before(this.element) : b.parent.append(this.element)
                    },
                    widget: function () {
                        return this.uiDialog
                    },
                    disable: b.noop,
                    enable: b.noop,
                    close: function (h) {
                        var f,
                            c = this;
                        if (this._isOpen && !1 !== this._trigger("beforeClose", h)) {
                            this._isOpen = !1;
                            this._focusedElement = null;
                            this._destroyOverlay();
                            this._untrackInstance();
                            if (!this.opener.filter(":focusable").focus().length) try {
                                (f = this.document[0].activeElement) && "body" !== f.nodeName.toLowerCase() && b(f).blur()
                            } catch (e) { }
                            this._hide(this.uiDialog, this.options.hide, function () {
                                c._trigger("close", h)
                            })
                        }
                    },
                    isOpen: function () {
                        return this._isOpen
                    },
                    moveToTop: function () {
                        this._moveToTop()
                    },
                    _moveToTop: function (h, f) {
                        var c = !1,
                            e = this.uiDialog.siblings(".dvUi-front:visible").map(function () {
                                return +b(this).css("z-index")
                            }).get();
                        e = Math.max.apply(null, e);
                        e >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", e + 1), c = !0);
                        c && !f && this._trigger("focus", h);
                        return c
                    },
                    open: function () {
                        var h = this;
                        this._isOpen ? this._moveToTop() && this._focusTabbable() : (this._isOpen = !0, this.opener = b(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1), this._show(this.uiDialog, this.options.show, function () {
                            h._focusTabbable();
                            h._trigger("focus")
                        }), this._makeFocusTarget(), this._trigger("open"))
                    },
                    refresh: function (b) {
                        b && (this._setOption("maxHeight", b), this._size());
                        this._position()
                    },
                    _focusTabbable: function () {
                        var b = this._focusedElement;
                        b || (b = this.element.find("[autofocus]"));
                        b.length || (b = this.element.find(":tabbable"));
                        b.length || (b = this.uiDialogButtonPane.find(":tabbable"));
                        b.length || (b = this.uiDialogTitlebarClose.filter(":tabbable"));
                        b.length || (b = this.uiDialog);
                        b.eq(0).focus()
                    },
                    _keepFocus: function (h) {
                        function f() {
                            var c = this.document[0].activeElement;
                            this.uiDialog[0] === c || b.contains(this.uiDialog[0], c) || this._focusTabbable()
                        }
                        h.preventDefault();
                        f.call(this);
                        this._delay(f)
                    },
                    _createWrapper: function () {
                        this.uiDialog = b("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front " + this.options.dialogClass).hide().attr({
                            tabIndex: -1,
                            role: "dialog"
                        }).appendTo(this._appendTo());
                        this._on(this.uiDialog, {
                            keydown: function (h) {
                                if (this.options.closeOnEscape && !h.isDefaultPrevented() && h.keyCode && h.keyCode === b.dvUi.keyCode.ESCAPE) h.preventDefault(),
                                    this.close(h);
                                else if (h.keyCode === b.dvUi.keyCode.TAB && !h.isDefaultPrevented()) {
                                    var f = this.uiDialog.find(":tabbable"),
                                        c = f.filter(":first"),
                                        e = f.filter(":last");
                                    h.target !== e[0] && h.target !== this.uiDialog[0] || h.shiftKey ? h.target !== c[0] && h.target !== this.uiDialog[0] || !h.shiftKey || (this._delay(function () {
                                        e.focus()
                                    }), h.preventDefault()) : (this._delay(function () {
                                        c.focus()
                                    }), h.preventDefault())
                                }
                            },
                            mousedown: function (b) {
                                this._moveToTop(b) && this._focusTabbable()
                            }
                        });
                        this.element.find("[aria-describedby]").length ||
                            this.uiDialog.attr({
                                "aria-describedby": this.element.uniqueId().attr("id")
                            })
                    },
                    _createTitlebar: function () {
                        this.uiDialogTitlebar = b("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);
                        this._on(this.uiDialogTitlebar, {
                            mousedown: function (h)
                            {
                                //AGjs__ changes remove highlight of the button when operation is done
                                $(".highlight").removeClass("button_active");
                                $(".highlight").css("fill", "rgb(100, 100, 100)");
                                allPdfComp.dom.updateButtons();
                                $("#comment_error").remove();
                                $("#author_error").remove();
                                dvJQuery(allPdfComp.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                                dvJQuery(allPdfComp.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");
                                dvJQuery(allPdfComp.dom.commentMessageInput).removeClass("annot_textArea");
                                dvJQuery(allPdfComp.dom.commentsAuthorInput).removeClass("annot_commentinput");

                              

                                // end of remove highlight of the button when operation is done
                                b(h.target).closest(".dvUi-dialog-titlebar-close") || this.uiDialog.focus()
                            }
                        });
                        this.uiDialogTitlebarClose = b('<div class="dvUi-button"><svg width="100%" height="100%" viewbox="0 0 512 512"><path d="M490.767,471.211L275.512,255.989L490.658,40.79c5.4-5.402,5.4-14.153,0-19.555c-5.402-5.401-14.152-5.401-19.556,0l-215.148,215.2L40.79,21.302c-5.402-5.402-14.153-5.402-19.555,0c-5.401,5.402-5.401,14.153,0,19.555l215.167,215.135L21.234,471.211c-5.401,5.401-5.401,14.152,0,19.556c5.402,5.4,14.153,5.4,19.555,0l215.169-215.221l215.252,215.221c5.402,5.4,14.152,5.4,19.556,0C496.167,485.363,496.167,476.612,490.767,471.211z"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
                        this._on(this.uiDialogTitlebarClose, {
                            click: function (b) {
                                b.preventDefault();
                                //For Bokmark
                                $($(this.element)[0]).find("#doingBookMoveOperation").length > 0 && Array.from($(".lidisable").removeClass("lidisable"));

                                this.close(b)
                            }
                        });
                        var h = b("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);
                        this._title(h);
                        this.uiDialog.attr({
                            "aria-labelledby": h.attr("id")
                        })
                    },
                    _title: function (b) {
                        this.options.title || b.html("&#160;");
                        b.text(this.options.title)
                    },
                    _createButtonPane: function () {
                        this.uiDialogButtonPane = b("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");
                        this.uiDialogButtonSpacer =
                            b("<div>").addClass("dvUi-dialog-spacer");
                        this.uiButtonSet = b("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);
                        this._createButtons()
                    },
                    _createButtons: function () {
                        var h = this,
                            f = this.options.buttons;
                        this.uiDialogButtonPane.remove();
                        this.uiDialogButtonSpacer.remove();
                        this.uiButtonSet.empty();
                        b.isEmptyObject(f) || b.isArray(f) && !f.length ? this.uiDialog.removeClass("dvUi-dialog-buttons") : (b.each(f, function (c, e) {
                            e = b.isFunction(e) ? {
                                click: e,
                                text: c
                            } : e;
                            e = b.extend({
                                type: "button"
                            }, e);
                            var f =
                                e.click;
                            e.click = function () {
                                f.apply(h.element[0], arguments)
                            };
                            c = {
                                icons: e.icons,
                                text: e.showText
                            };
                            delete e.icons;
                            delete e.showText;
                            b("<button></button>", e).dvButton(c).appendTo(h.uiButtonSet)
                        }), this.uiDialog.addClass("dvUi-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog), this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))
                    },
                    _makeDraggable: function () {
                        function h(b) {
                            return {
                                position: b.position,
                                offset: b.offset
                            }
                        }
                        var f = this,
                            c = this.options;
                        this.uiDialog.draggable({
                            cancel: ".dvUi-dialog-content, .dvUi-dialog-titlebar-close",
                            handle: ".dvUi-dialog-titlebar",
                            containment: "document",
                            start: function (c, k) {
                                b(this).addClass("dvUi-dialog-dragging");
                                f._blockFrames();
                                f._trigger("dragStart", c, h(k))
                            },
                            drag: function (b, c) {
                                f._trigger("drag", b, h(c))
                            },
                            stop: function (e, k) {
                                var l = k.offset.left - f.document.scrollLeft(),
                                    q = k.offset.top - f.document.scrollTop();
                                c.position = {
                                    my: "left top",
                                    at: "left" + (0 <= l ? "+" : "") + l + " top" + (0 <= q ? "+" : "") + q,
                                    of: f.window
                                };
                                b(this).removeClass("dvUi-dialog-dragging");
                                f._unblockFrames();
                                f._trigger("dragStop", e, h(k))
                            }
                        })
                    },
                    _makeResizable: function () {
                        function h(b) {
                            return {
                                originalPosition: b.originalPosition,
                                originalSize: b.originalSize,
                                position: b.position,
                                size: b.size
                            }
                        }
                        var f = this,
                            c = this.options,
                            e = c.resizable,
                            k = this.uiDialog.css("position");
                        e = "string" === typeof e ? e : "n,e,s,w,se,sw,ne,nw";
                        this.uiDialog.resizable({
                            cancel: ".dvUi-dialog-content",
                            containment: "document",
                            alsoResize: this.element,
                            maxWidth: c.maxWidth,
                            maxHeight: c.maxHeight,
                            minWidth: c.minWidth,
                            minHeight: this._minHeight(),
                            handles: e,
                            start: function (c, e) {
                                b(this).addClass("dvUi-dialog-resizing");
                                f._blockFrames();
                                f._trigger("resizeStart", c, h(e))
                            },
                            resize: function (b,
                                c) {
                                f._trigger("resize", b, h(c))
                            },
                            stop: function (e, k) {
                                var l = f.uiDialog.offset(),
                                    q = l.left - f.document.scrollLeft();
                                l = l.top - f.document.scrollTop();
                                c.height = f.uiDialog.height();
                                c.width = f.uiDialog.width();
                                c.position = {
                                    my: "left top",
                                    at: "left" + (0 <= q ? "+" : "") + q + " top" + (0 <= l ? "+" : "") + l,
                                    of: f.window
                                };
                                b(this).removeClass("dvUi-dialog-resizing");
                                f._unblockFrames();
                                f._trigger("resizeStop", e, h(k))
                            }
                        }).css("position", k)
                    },
                    _trackFocus: function () {
                        this._on(this.widget(), {
                            focusin: function (h) {
                                this._makeFocusTarget();
                                this._focusedElement =
                                    b(h.target)
                            }
                        })
                    },
                    _makeFocusTarget: function () {
                        this._untrackInstance();
                        this._trackingInstances().unshift(this)
                    },
                    _untrackInstance: function () {
                        var h = this._trackingInstances(),
                            f = b.inArray(this, h); - 1 !== f && h.splice(f, 1)
                    },
                    _trackingInstances: function () {
                        var b = this.document.data("dvUi-dvDialog-instances");
                        b || (b = [], this.document.data("dvUi-dvDialog-instances", b));
                        return b
                    },
                    _minHeight: function () {
                        var b = this.options;
                        return "auto" === b.height ? b.minHeight : Math.min(b.minHeight, b.height)
                    },
                    _position: function () {
                        var b = this.uiDialog.is(":visible");
                        b || this.uiDialog.show();
                        this.uiDialog.position(this.options.position);
                        b || this.uiDialog.hide()
                    },
                    _setOptions: function (h) {
                        var f = this,
                            c = !1,
                            e = {};
                        b.each(h, function (b, h) {
                            f._setOption(b, h);
                            b in f.sizeRelatedOptions && (c = !0);
                            b in f.resizableRelatedOptions && (e[b] = h)
                        });
                        c && (this._size(), this._position());
                        this.uiDialog.is(":data(dvUi-resizable)") && this.uiDialog.resizable("option", e)
                    },
                    _setOption: function (b, f) {
                        var c, e = this.uiDialog;
                        "dialogClass" === b && e.removeClass(this.options.dialogClass).addClass(f);
                        "disabled" !==
                            b && (this._super(b, f), "appendTo" === b && this.uiDialog.appendTo(this._appendTo()), "buttons" === b && this._createButtons(), "draggable" === b && ((c = e.is(":data(dvUi-draggable)")) && !f && e.draggable("destroy"), !c && f && this._makeDraggable()), "position" === b && this._position(), "resizable" === b && ((c = e.is(":data(dvUi-resizable)")) && !f && e.resizable("destroy"), c && "string" === typeof f && e.resizable("option", "handles", f), c || !1 === f || this._makeResizable()), "title" === b && this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))
                    },
                    _size: function () {
                        var b = this.options;
                        this.element.show().css({
                            width: "auto",
                            minHeight: 0,
                            maxHeight: "none",
                            height: 0
                        });
                        b.minWidth > b.width && (b.width = b.minWidth);
                        var f = this.uiDialog.css({
                            height: "auto",
                            width: b.width
                        }).outerHeight();
                        var c = Math.max(0, b.minHeight - f);
                        var e = "number" === typeof b.maxHeight ? Math.max(0, b.maxHeight - f) : "none";
                        "auto" === b.height ? this.element.css({
                            minHeight: c,
                            maxHeight: e,
                            height: "auto"
                        }) : this.element.height(Math.max(0, b.height - f));
                        this.uiDialog.is(":data(dvUi-resizable)") && this.uiDialog.resizable("option",
                            "minHeight", this._minHeight())
                    },
                    _blockFrames: function () {
                        this.iframeBlocks = this.document.find("iframe").map(function () {
                            var h = b(this);
                            return b("<div>").css({
                                position: "absolute",
                                width: h.outerWidth(),
                                height: h.outerHeight()
                            }).appendTo(h.parent()).offset(h.offset())[0]
                        })
                    },
                    _unblockFrames: function () {
                        this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
                    },
                    _allowInteraction: function (h) {
                        return b(h.target).closest(".dvUi-dialog").length ? !0 : !!b(h.target).closest(".dvUi-datepicker").length
                    },
                    _createOverlay: function () {
                        if (this.options.modal) {
                            var h = !0;
                            this._delay(function () {
                                h = !1
                            });
                            this.document.data("dvUi-dvDialog-overlays") || this._on(this.document, {
                                focusin: function (b) {
                                    h || this._allowInteraction(b) || (b.preventDefault(), this._trackingInstances()[0]._focusTabbable())
                                }
                            });
                            this.overlay = b("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());
                            this._on(this.overlay, {
                                mousedown: "_keepFocus"
                            });
                            this.document.data("dvUi-dvDialog-overlays", (this.document.data("dvUi-dvDialog-overlays") || 0) + 1)
                        }
                    },
                    _destroyOverlay: function () {
                        if (this.options.modal &&
                            this.overlay) {
                            var b = this.document.data("dvUi-dvDialog-overlays") - 1;
                            b ? this.document.data("dvUi-dvDialog-overlays", b) : this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");
                            this.overlay.remove();
                            this.overlay = null
                        }
                    }
                });
                b.widget("dvUi.dvMenu", {
                    version: "1.11.2",
                    defaultElement: "<ul>",
                    delay: 300,
                    options: {
                        icons: {
                            submenu: "dvUi-icon-carat-1-e"
                        },
                        items: "> *",
                        menus: "ul",
                        position: {
                            my: "left-1 top",
                            at: "right top"
                        },
                        role: "menu",
                        blur: null,
                        focus: null,
                        select: null
                    },
                    _create: function () {
                        this.activeMenu = this.element;
                        this.mouseHandled = !1;
                        this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons", !!this.element.find(".dvUi-icon").length).attr({
                            role: this.options.role,
                            tabIndex: 0
                        });
                        this.options.disabled && this.element.addClass("dvUi-state-disabled").attr("aria-disabled", "true");
                        this._on({
                            "mousedown .dvUi-menu-item": function (b) {
                                b.preventDefault()
                            },
                            "click .dvUi-menu-item": function (h) {
                                var f = b(h.target);
                                !this.mouseHandled && f.not(".dvUi-state-disabled").length && (this.select(h),
                                    h.isPropagationStopped() || (this.mouseHandled = !0), f.has(".dvUi-menu").length ? this.expand(h) : !this.element.is(":focus") && b(this.document[0].activeElement).closest(".dvUi-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".dvUi-menu").length && clearTimeout(this.timer)))
                            },
                            "mouseenter .dvUi-menu-item": function (h) {
                                if (!this.previousFilter) {
                                    var f = b(h.currentTarget);
                                    f.siblings(".dvUi-state-active").removeClass("dvUi-state-active");
                                    this.focus(h, f)
                                }
                            },
                            mouseleave: "collapseAll",
                            "mouseleave .dvUi-menu": "collapseAll",
                            focus: function (b, f) {
                                var c = this.active || this.element.find(this.options.items).eq(0);
                                f || this.focus(b, c)
                            },
                            blur: function (h) {
                                this._delay(function () {
                                    b.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(h)
                                })
                            },
                            keydown: "_keydown"
                        });
                        this.refresh();
                        this._on(this.document, {
                            click: function (b) {
                                this._closeOnDocumentClick(b) && this.collapseAll(b);
                                this.mouseHandled = !1
                            }
                        })
                    },
                    _destroy: function () {
                        this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
                        this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () {
                            var h = b(this);
                            h.data("dvUi-dvMenu-submenu-carat") && h.remove()
                        });
                        this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")
                    },
                    _keydown: function (h) {
                        var f = !0;
                        switch (h.keyCode) {
                            case b.dvUi.keyCode.PAGE_UP:
                                this.previousPage(h);
                                break;
                            case b.dvUi.keyCode.PAGE_DOWN:
                                this.nextPage(h);
                                break;
                            case b.dvUi.keyCode.HOME:
                                this._move("first", "first", h);
                                break;
                            case b.dvUi.keyCode.END:
                                this._move("last", "last", h);
                                break;
                            case b.dvUi.keyCode.UP:
                                this.previous(h);
                                break;
                            case b.dvUi.keyCode.DOWN:
                                this.next(h);
                                break;
                            case b.dvUi.keyCode.LEFT:
                                this.collapse(h);
                                break;
                            case b.dvUi.keyCode.RIGHT:
                                this.active && !this.active.is(".dvUi-state-disabled") && this.expand(h);
                                break;
                            case b.dvUi.keyCode.ENTER:
                            case b.dvUi.keyCode.SPACE:
                                this._activate(h);
                                break;
                            case b.dvUi.keyCode.ESCAPE:
                                this.collapse(h);
                                break;
                            default:
                                f = !1;
                                var c = this.previousFilter || "";
                                var e = String.fromCharCode(h.keyCode);
                                var k = !1;
                                clearTimeout(this.filterTimer);
                                e === c ? k = !0 : e = c + e;
                                c = this._filterMenuItems(e);
                                c = k && -1 !== c.index(this.active.next()) ? this.active.nextAll(".dvUi-menu-item") : c;
                                c.length || (e = String.fromCharCode(h.keyCode), c = this._filterMenuItems(e));
                                c.length ? (this.focus(h, c), this.previousFilter = e, this.filterTimer = this._delay(function () {
                                    delete this.previousFilter
                                }, 1E3)) : delete this.previousFilter
                        }
                        f && h.preventDefault()
                    },
                    _activate: function (b) {
                        this.active.is(".dvUi-state-disabled") ||
                            (this.active.is("[aria-haspopup='true']") ? this.expand(b) : this.select(b))
                    },
                    refresh: function () {
                        var h = this,
                            f = this.options.icons.submenu;
                        var c = this.element.find(this.options.menus);
                        this.element.toggleClass("dvUi-menu-icons", !!this.element.find(".dvUi-icon").length);
                        c.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({
                            role: this.options.role,
                            "aria-hidden": "true",
                            "aria-expanded": "false"
                        }).each(function () {
                            var c = b(this),
                                h = c.parent(),
                                l = b("<span>").addClass("dvUi-menu-icon dvUi-icon " +
                                    f).data("dvUi-dvMenu-submenu-carat", !0);
                            h.attr("aria-haspopup", "true").prepend(l);
                            c.attr("aria-labelledby", h.attr("id"))
                        });
                        c = c.add(this.element).find(this.options.items);
                        c.not(".dvUi-menu-item").each(function () {
                            var c = b(this);
                            h._isDivider(c) && c.addClass("dvUi-widget-content dvUi-menu-divider")
                        });
                        c.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({
                            tabIndex: -1,
                            role: this._itemRole()
                        });
                        c.filter(".dvUi-state-disabled").attr("aria-disabled", "true");
                        this.active && !b.contains(this.element[0],
                            this.active[0]) && this.blur()
                    },
                    _itemRole: function () {
                        return {
                            menu: "menuitem",
                            listbox: "option"
                        }[this.options.role]
                    },
                    _setOption: function (b, f) {
                        "icons" === b && this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(f.submenu);
                        "disabled" === b && this.element.toggleClass("dvUi-state-disabled", !!f).attr("aria-disabled", f);
                        this._super(b, f)
                    },
                    focus: function (b, f) {
                        this.blur(b, b && "focus" === b.type);
                        this._scrollIntoView(f);
                        this.active = f.first();
                        var c = this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
                        this.options.role && this.element.attr("aria-activedescendant", c.attr("id"));
                        this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");
                        b && "keydown" === b.type ? this._close() : this.timer = this._delay(function () {
                            this._close()
                        }, this.delay);
                        c = f.children(".dvUi-menu");
                        c.length && b && /^mouse/.test(b.type) && this._startOpening(c);
                        this.activeMenu = f.parent();
                        this._trigger("focus", b, {
                            item: f
                        })
                    },
                    _scrollIntoView: function (h) {
                        if (this._hasScroll()) {
                            var f = parseFloat(b.css(this.activeMenu[0], "borderTopWidth")) ||
                                0;
                            var c = parseFloat(b.css(this.activeMenu[0], "paddingTop")) || 0;
                            f = h.offset().top - this.activeMenu.offset().top - f - c;
                            c = this.activeMenu.scrollTop();
                            var e = this.activeMenu.height();
                            h = h.outerHeight();
                            0 > f ? this.activeMenu.scrollTop(c + f) : f + h > e && this.activeMenu.scrollTop(c + f - e + h)
                        }
                    },
                    blur: function (b, f) {
                        f || clearTimeout(this.timer);
                        this.active && (this.active.removeClass("dvUi-state-focus"), this.active = null, this._trigger("blur", b, {
                            item: this.active
                        }))
                    },
                    _startOpening: function (b) {
                        clearTimeout(this.timer);
                        "true" === b.attr("aria-hidden") &&
                            (this.timer = this._delay(function () {
                                this._close();
                                this._open(b)
                            }, this.delay))
                    },
                    _open: function (h) {
                        var f = b.extend({
                            of: this.active
                        }, this.options.position);
                        clearTimeout(this.timer);
                        this.element.find(".dvUi-menu").not(h.parents(".dvUi-menu")).hide().attr("aria-hidden", "true");
                        h.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(f)
                    },
                    collapseAll: function (h, f) {
                        clearTimeout(this.timer);
                        this.timer = this._delay(function () {
                            var c = f ? this.element : b(h && h.target).closest(this.element.find(".dvUi-menu"));
                            c.length || (c = this.element);
                            this._close(c);
                            this.blur(h);
                            this.activeMenu = c
                        }, this.delay)
                    },
                    _close: function (b) {
                        b || (b = this.active ? this.active.parent() : this.element);
                        b.find(".dvUi-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")
                    },
                    _closeOnDocumentClick: function (h) {
                        return !b(h.target).closest(".dvUi-menu").length
                    },
                    _isDivider: function (b) {
                        return !/[^\-\u2014\u2013\s]/.test(b.text())
                    },
                    collapse: function (b) {
                        var h =
                            this.active && this.active.parent().closest(".dvUi-menu-item", this.element);
                        h && h.length && (this._close(), this.focus(b, h))
                    },
                    expand: function (b) {
                        var h = this.active && this.active.children(".dvUi-menu ").find(this.options.items).first();
                        h && h.length && (this._open(h.parent()), this._delay(function () {
                            this.focus(b, h)
                        }))
                    },
                    next: function (b) {
                        this._move("next", "first", b)
                    },
                    previous: function (b) {
                        this._move("prev", "last", b)
                    },
                    isFirstItem: function () {
                        return this.active && !this.active.prevAll(".dvUi-menu-item").length
                    },
                    isLastItem: function () {
                        return this.active &&
                            !this.active.nextAll(".dvUi-menu-item").length
                    },
                    _move: function (b, f, c) {
                        var e;
                        this.active && (e = "first" === b || "last" === b ? this.active["first" === b ? "prevAll" : "nextAll"](".dvUi-menu-item").eq(-1) : this.active[b + "All"](".dvUi-menu-item").eq(0));
                        e && e.length && this.active || (e = this.activeMenu.find(this.options.items)[f]());
                        this.focus(c, e)
                    },
                    nextPage: function (h) {
                        var f;
                        if (!this.active) this.next(h);
                        else if (!this.isLastItem())
                            if (this._hasScroll()) {
                                var c = this.active.offset().top;
                                var e = this.element.height();
                                this.active.nextAll(".dvUi-menu-item").each(function () {
                                    f =
                                        b(this);
                                    return 0 > f.offset().top - c - e
                                });
                                this.focus(h, f)
                            } else this.focus(h, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())
                    },
                    previousPage: function (h) {
                        var f;
                        if (!this.active) this.next(h);
                        else if (!this.isFirstItem())
                            if (this._hasScroll()) {
                                var c = this.active.offset().top;
                                var e = this.element.height();
                                this.active.prevAll(".dvUi-menu-item").each(function () {
                                    f = b(this);
                                    return 0 < f.offset().top - c + e
                                });
                                this.focus(h, f)
                            } else this.focus(h, this.activeMenu.find(this.options.items).first())
                    },
                    _hasScroll: function () {
                        return this.element.outerHeight() <
                            this.element.prop("scrollHeight")
                    },
                    select: function (h) {
                        this.active = this.active || b(h.target).closest(".dvUi-menu-item");
                        var f = {
                            item: this.active
                        };
                        this.active.has(".dvUi-menu").length || this.collapseAll(h, !0);
                        this._trigger("select", h, f)
                    },
                    _filterMenuItems: function (h) {
                        h = h.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
                        var f = new RegExp("^" + h, "i");
                        return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function () {
                            return f.test(b.trim(b(this).text()))
                        })
                    }
                });
                b.widget("dvUi.dvSelectmenu", {
                    version: "1.11.2",
                    defaultElement: "<select>",
                    options: {
                        appendTo: null,
                        disabled: null,
                        icons: {
                            button: "dvUi-icon-triangle-1-s"
                        },
                        position: {
                            my: "left top",
                            at: "left bottom",
                            collision: "none"
                        },
                        width: null,
                        change: null,
                        close: null,
                        focus: null,
                        open: null,
                        select: null
                    },
                    _create: function () {
                        var b = this.element.uniqueId().attr("id");
                        this.ids = {
                            element: b,
                            button: b + "-button",
                            menu: b + "-menu"
                        };
                        this._drawButton();
                        this._drawMenu();
                        this.options.disabled && this.disable()
                    },
                    _drawButton: function () {
                        var h = this,
                            f = this.element.attr("tabindex");
                        this.label = b("label[for='" + this.ids.element + "']").attr("for", this.ids.button);
                        this._on(this.label, {
                            click: function (b) {
                                this.button.focus();
                                b.preventDefault()
                            }
                        });
                        this.element.hide();
                        this.button = b("<span>", {
                            "class": "dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",
                            tabindex: f || this.options.disabled ? -1 : 0,
                            id: this.ids.button,
                            role: "combobox",
                            "aria-expanded": "false",
                            "aria-autocomplete": "list",
                            "aria-owns": this.ids.menu,
                            "aria-haspopup": "true"
                        }).insertAfter(this.element);
                        b("<span>", {
                            "class": "dvUi-icon " +
                                this.options.icons.button
                        }).prependTo(this.button);
                        this.buttonText = b("<span>", {
                            "class": "dvUi-selectmenu-text"
                        }).appendTo(this.button);
                        this._setText(this.buttonText, this.element.find("option:selected").text());
                        this._resizeButton();
                        this._on(this.button, this._buttonEvents);
                        this.button.one("focusin", function () {
                            h.menuItems || h._refreshMenu()
                        });
                        this._hoverable(this.button);
                        this._focusable(this.button)
                    },
                    _drawMenu: function () {
                        var h = this;
                        this.menu = b("<ul>", {
                            "aria-hidden": "true",
                            "aria-labelledby": this.ids.button,
                            id: this.ids.menu
                        });
                        this.menuWrap = b("<div>", {
                            "class": "dvUi-selectmenu-menu dvUi-front"
                        }).append(this.menu).appendTo(this._appendTo());
                        this.menuInstance = this.menu.dvMenu({
                            role: "listbox",
                            select: function (b, c) {
                                b.preventDefault();
                                h._setSelection();
                                h._select(c.item.data("dvUi-dvSelectmenu-item"), b)
                            },
                            focus: function (b, c) {
                                c = c.item.data("dvUi-dvSelectmenu-item");
                                null != h.focusIndex && c.index !== h.focusIndex && (h._trigger("focus", b, {
                                    item: c
                                }), h.isOpen || h._select(c, b));
                                h.focusIndex = c.index;
                                h.button.attr("aria-activedescendant",
                                    h.menuItems.eq(c.index).attr("id"))
                            }
                        }).dvMenu("instance");
                        this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");
                        this.menuInstance._off(this.menu, "mouseleave");
                        this.menuInstance._closeOnDocumentClick = function () {
                            return !1
                        };
                        this.menuInstance._isDivider = function () {
                            return !1
                        }
                    },
                    refresh: function () {
                        this._refreshMenu();
                        this._setText(this.buttonText, this._getSelectedItem().text());
                        this.options.width || this._resizeButton()
                    },
                    _refreshMenu: function () {
                        this.menu.empty();
                        var b = this.element.find("option");
                        b.length && (this._parseOptions(b), this._renderMenu(this.menu, this.items), this.menuInstance.refresh(), this.menuItems = this.menu.find("li").not(".dvUi-selectmenu-optgroup"), b = this._getSelectedItem(), this.menuInstance.focus(null, b), this._setAria(b.data("dvUi-dvSelectmenu-item")), this._setOption("disabled", this.element.prop("disabled")))
                    },
                    open: function (b) {
                        this.options.disabled || (this.menuItems ? (this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"), this.menuInstance.focus(null, this._getSelectedItem())) :
                            this._refreshMenu(), this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger("open", b))
                    },
                    _position: function () {
                        this.menuWrap.position(b.extend({
                            of: this.button
                        }, this.options.position))
                    },
                    close: function (b) {
                        this.isOpen && (this.isOpen = !1, this._toggleAttr(), this.range = null, this._off(this.document), this._trigger("close", b))
                    },
                    widget: function () {
                        return this.button
                    },
                    menuWidget: function () {
                        return this.menu
                    },
                    _renderMenu: function (h, f) {
                        var c = this,
                            e = "";
                        b.each(f, function (f, l) {
                            l.optgroup !== e && (b("<li>", {
                                "class": "dvUi-selectmenu-optgroup dvUi-menu-divider" + (l.element.parent("optgroup").prop("disabled") ? " dvUi-state-disabled" : ""),
                                text: l.optgroup
                            }).appendTo(h), e = l.optgroup);
                            c._renderItemData(h, l)
                        })
                    },
                    _renderItemData: function (b, f) {
                        return this._renderItem(b, f).data("dvUi-dvSelectmenu-item", f)
                    },
                    _renderItem: function (h, f) {
                        var c = b("<li>", {
                            text: f.label
                        });
                        f.disabled && c.addClass("dvUi-state-disabled");
                        f.element.attr("data-class") && c.addClass("dv-SelectIcon").addClass(f.element.attr("data-class"));
                        return c.appendTo(h)
                    },
                    _setText: function (b, f) {
                        f ? b.text(f) : b.html("&#160;")
                    },
                    _move: function (b, f) {
                        var c = ".dvUi-menu-item";
                        if (this.isOpen) var e = this.menuItems.eq(this.focusIndex);
                        else e = this.menuItems.eq(this.element[0].selectedIndex), c += ":not(.dvUi-state-disabled)";
                        b = "first" === b || "last" === b ? e["first" === b ? "prevAll" : "nextAll"](c).eq(-1) : e[b + "All"](c).eq(0);
                        b.length && this.menuInstance.focus(f, b)
                    },
                    _getSelectedItem: function () {
                        return this.menuItems.eq(this.element[0].selectedIndex)
                    },
                    _toggle: function (b) {
                        this[this.isOpen ?
                            "close" : "open"](b)
                    },
                    _setSelection: function () {
                        if (this.range) {
                            if (window.getSelection) {
                                var b = window.getSelection();
                                b.removeAllRanges();
                                b.addRange(this.range)
                            } else this.range.select();
                            this.button.focus()
                        }
                    },
                    _documentClick: {
                        mousedown: function (h) {
                            this.isOpen && (b(h.target).closest(".dvUi-selectmenu-menu, #" + this.ids.button).length || this.close(h))
                        }
                    },
                    _buttonEvents: {
                        mousedown: function () {
                            if (window.getSelection) {
                                var b = window.getSelection();
                                b.rangeCount && (this.range = b.getRangeAt(0))
                            } else this.range = document.selection.createRange()
                        },
                        click: function (b) {
                            this._setSelection();
                            this._toggle(b)
                        },
                        keydown: function (h) {
                            var f = !0;
                            switch (h.keyCode) {
                                case b.dvUi.keyCode.TAB:
                                case b.dvUi.keyCode.ESCAPE:
                                    this.close(h);
                                    f = !1;
                                    break;
                                case b.dvUi.keyCode.ENTER:
                                    this.isOpen && this._selectFocusedItem(h);
                                    break;
                                case b.dvUi.keyCode.UP:
                                    h.altKey ? this._toggle(h) : this._move("prev", h);
                                    break;
                                case b.dvUi.keyCode.DOWN:
                                    h.altKey ? this._toggle(h) : this._move("next", h);
                                    break;
                                case b.dvUi.keyCode.SPACE:
                                    this.isOpen ? this._selectFocusedItem(h) : this._toggle(h);
                                    break;
                                case b.dvUi.keyCode.LEFT:
                                    this._move("prev",
                                        h);
                                    break;
                                case b.dvUi.keyCode.RIGHT:
                                    this._move("next", h);
                                    break;
                                case b.dvUi.keyCode.HOME:
                                case b.dvUi.keyCode.PAGE_UP:
                                    this._move("first", h);
                                    break;
                                case b.dvUi.keyCode.END:
                                case b.dvUi.keyCode.PAGE_DOWN:
                                    this._move("last", h);
                                    break;
                                default:
                                    this.menu.trigger(h), f = !1
                            }
                            f && h.preventDefault()
                        }
                    },
                    _selectFocusedItem: function (b) {
                        var h = this.menuItems.eq(this.focusIndex);
                        h.hasClass("dvUi-state-disabled") || this._select(h.data("dvUi-dvSelectmenu-item"), b)
                    },
                    _select: function (b, f) {
                        var c = this.element[0].selectedIndex;
                        this.element[0].selectedIndex =
                            b.index;
                        this._setText(this.buttonText, b.label);
                        this._setAria(b);
                        this._trigger("select", f, {
                            item: b
                        });
                        b.index !== c && this._trigger("change", f, {
                            item: b
                        });
                        this.close(f)
                    },
                    _setAria: function (b) {
                        b = this.menuItems.eq(b.index).attr("id");
                        this.button.attr({
                            "aria-labelledby": b,
                            "aria-activedescendant": b
                        });
                        this.menu.attr("aria-activedescendant", b)
                    },
                    _setOption: function (b, f) {
                        "icons" === b && this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(f.button);
                        this._super(b, f);
                        "appendTo" === b && this.menuWrap.appendTo(this._appendTo());
                        "disabled" === b && (this.menuInstance.option("disabled", f), this.button.toggleClass("dvUi-state-disabled", f).attr("aria-disabled", f), this.element.prop("disabled", f), f ? (this.button.attr("tabindex", -1), this.close()) : this.button.attr("tabindex", 0));
                        "width" === b && this._resizeButton()
                    },
                    _appendTo: function () {
                        var h = this.options.appendTo;
                        h && (h = h.jquery || h.nodeType ? b(h) : this.document.find(h).eq(0));
                        h && h[0] || (h = this.element.closest(".dvUi-front"));
                        h.length || (h = this.document[0].body);
                        return h
                    },
                    _toggleAttr: function () {
                        this.button.toggleClass("dvUi-corner-top",
                            this.isOpen).toggleClass("dvUi-corner-all", !this.isOpen).attr("aria-expanded", this.isOpen);
                        this.menuWrap.toggleClass("dvUi-selectmenu-open", this.isOpen);
                        this.menu.attr("aria-hidden", !this.isOpen)
                    },
                    _resizeButton: function () {
                        var b = this.options.width;
                        b || (b = this.element.show().outerWidth(), this.element.hide());
                        this.button.outerWidth(b)
                    },
                    _resizeMenu: function () {
                        this.menu.css("width", this.menu.css("width"))
                    },
                    _getCreateOptions: function () {
                        return {
                            disabled: this.element.prop("disabled")
                        }
                    },
                    _parseOptions: function (h) {
                        var f = [];
                        h.each(function (c, e) {
                            e = b(e);
                            var h = e.parent("optgroup");
                            f.push({
                                element: e,
                                index: c,
                                value: e.attr("value"),
                                label: e.text(),
                                optgroup: h.attr("label") || "",
                                disabled: h.prop("disabled") || e.prop("disabled")
                            })
                        });
                        this.items = f
                    },
                    _destroy: function () {
                        this.menuWrap.remove();
                        this.button.remove();
                        this.element.show();
                        this.element.removeUniqueId();
                        this.label.attr("for", this.ids.element)
                    }
                })
            }(dvJQuery), dvJQuery.fn.HasDocuViewarePlugins = !0)
        }
    },
    DocuViewareConstants = {
        MAX_PAGE_TRANSFER_RETRIES: 10,
        IE_MAX_SCROLL_TOP_LIMIT: 153E4,
        SERVER_SESSION_LOCK_TIMEOUT: 45E3
    },
    DocuViewareEncodingUtilities = {
        File: {
            New: function (b, f, l) {
                b = {
                    blob: new Blob([new Uint8Array(b)], {
                        type: f
                    }),
                    type: f,
                    lastModified: new Date(Date.now()),
                    fileName: l,
                    slice: function (b, h) {
                        return this.blob.slice(b, h)
                    }
                };
                b.size = b.blob.size;
                return b
            }
        },
        TypedArray: {
            Uint8Array: function (b) {
                return window.Uint8Array ? new window.Uint8Array(b) : new DocuViewareEncodingUtilities.TypedArray.TypedArray(b)
            },
            subarray: function (b, f) {
                return this.slice(b, f)
            },
            set_: function (b, f) {
                2 > arguments.length && (f =
                    0);
                for (var l = 0, t = b.length; l < t; ++l, ++f) this[f] = b[l] & 255
            },
            TypedArray: function (b) {
                if ("number" === typeof b) {
                    var f = Array(b);
                    for (var l = 0; l < b; ++l) f[l] = 0
                } else f = b.slice(0);
                f.subarray = DocuViewareEncodingUtilities.TypedArray.subarray;
                f.buffer = f;
                f.byteLength = f.length;
                f.set = DocuViewareEncodingUtilities.TypedArray.set_;
                "object" === typeof b && b.buffer && (f.buffer = b.buffer);
                return f
            }
        },
        base64: {
            PADCHAR: "=",
            ALPHA: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            getbyte64: function (b, f) {
                return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(b.charAt(f))
            },
            decode: function (b) {
                if (window.atob) return window.atob(b);
                b = "" + b;
                var f = DocuViewareEncodingUtilities.base64.getbyte64,
                    l, t = b.length;
                if (0 === t) return b;
                var h = 0;
                b.charAt(t - 1) === DocuViewareEncodingUtilities.base64.PADCHAR && (h = 1, b.charAt(t - 2) === DocuViewareEncodingUtilities.base64.PADCHAR && (h = 2), t -= 4);
                var q = [];
                for (l = 0; l < t; l += 4) {
                    var c = f(b, l) << 18 | f(b, l + 1) << 12 | f(b, l + 2) << 6 | f(b, l + 3);
                    q.push(String.fromCharCode(c >> 16, c >> 8 & 255, c & 255))
                }
                switch (h) {
                    case 1:
                        c = f(b, l) << 18 | f(b, l + 1) << 12 | f(b, l + 2) << 6;
                        q.push(String.fromCharCode(c >>
                            16, c >> 8 & 255));
                        break;
                    case 2:
                        c = f(b, l) << 18 | f(b, l + 1) << 12, q.push(String.fromCharCode(c >> 16))
                }
                return q.join("")
            },
            getbyte: function (b, f) {
                return b.charCodeAt(f)
            },
            encode: function (b) {
                if (window.btoa) return window.btoa(b);
                var f = DocuViewareEncodingUtilities.base64.PADCHAR,
                    l = DocuViewareEncodingUtilities.base64.ALPHA,
                    t = DocuViewareEncodingUtilities.base64.getbyte,
                    h, q = [];
                b = "" + b;
                var c = b.length - b.length % 3;
                if (0 === b.length) return b;
                for (h = 0; h < c; h += 3) {
                    var e = t(b, h) << 16 | t(b, h + 1) << 8 | t(b, h + 2);
                    q.push(l.charAt(e >> 18));
                    q.push(l.charAt(e >>
                        12 & 63));
                    q.push(l.charAt(e >> 6 & 63));
                    q.push(l.charAt(e & 63))
                }
                switch (b.length - c) {
                    case 1:
                        e = t(b, h) << 16;
                        q.push(l.charAt(e >> 18) + l.charAt(e >> 12 & 63) + f + f);
                        break;
                    case 2:
                        e = t(b, h) << 16 | t(b, h + 1) << 8, q.push(l.charAt(e >> 18) + l.charAt(e >> 12 & 63) + l.charAt(e >> 6 & 63) + f)
                }
                return q.join("")
            },
            base64toBlob: function (b, f, l) {
                f = f || "";
                b = DocuViewareEncodingUtilities.base64.decode(b);
                for (var t = b.length, h = Math.ceil(t / l), q = Array(h), c = 0; c < h; ++c) {
                    for (var e = c * l, k = Math.min(e + l, t), z = Array(k - e), E = 0; e < k; ++E, ++e) z[E] = b[e].charCodeAt(0);
                    q[c] = new DocuViewareEncodingUtilities.TypedArray.Uint8Array(z)
                }
                return new Blob(q, {
                    type: f
                })
            }
        }
    },
    DocuViewareUtilities = {
        addEvent: function (b, f, l) {
            b.attachEvent ? (b["e" + f + l] = l, b[f + l] = function () {
                b["e" + f + l](window.event)
            }, b.attachEvent("on" + f, b[f + l])) : b.addEventListener(f, l, !1)
        },
        removeEvent: function (b, f, l) {
            b.detachEvent ? (b.detachEvent("on" + f, b[f + l]), b[f + l] = null) : b.removeEventListener(f, l, !1)
        },
        getWindowsVersion: function () {
            var b = window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);
            return null != b ? 2 == b.length || 3 == b.length ? parseFloat(b[1]) : 0 : 0
        },
        getInternetExplorerVersion: function () {
            var b = -1;
            if ("Microsoft Internet Explorer" == navigator.appName) {
                var f = navigator.userAgent,
                    l = /MSIE ([0-9]{1,}[.0-9]{0,})/;
                null != l.exec(f) && (b = parseFloat(RegExp.$1))
            } else "Netscape" == navigator.appName && (f = navigator.userAgent, l = /Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/, null != l.exec(f) && (b = parseFloat(RegExp.$1)));
            return b
        },
        getScrollbarWidth: function () {
            var b = document.createElement("div");
            b.style.position = "absolute";
            b.style.top = "-1000px";
            b.style.left = "-1000px";
            b.style.width = "100px";
            b.style.height = "50px";
            b.style.overflow =
                "hidden";
            var f = document.createElement("div");
            f.style.width = "100%";
            f.style.height = "200px";
            b.appendChild(f);
            document.body.appendChild(b);
            var l = f.offsetWidth;
            b.style.overflow = "auto";
            b = f.offsetWidth;
            document.body.removeChild(document.body.lastChild);
            return l - b
        },
        getDevicePixelRatio: function () {
            var b = 1;
            void 0 !== window.screen.systemXDPI && void 0 !== window.screen.logicalXDPI && window.screen.systemXDPI > window.screen.logicalXDPI ? b = window.screen.systemXDPI / window.screen.logicalXDPI : void 0 !== window.devicePixelRatio &&
                (b = window.devicePixelRatio);
            return b
        },
        isValidURL: function (b) {
            return /^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(b)
        }
    },
    DocuViewareAnnotationsUtilities = {
        getAnnotationDefaultProperties: function (b) {
            switch (b) {
                case 0:
                    return {
                        type: 0,
                        borderWidth: .2, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#000000", fontName: "Arial", fontStyle: 1, foreColor: "#FF0000", opacity: 1, radiusFactor: .25, rotation: 0, stroke: !0, strokeColor: "#FF0000", text: "STAMP", autoCreate: !1
                    };
                case 1:
                    return {
                        type: 1, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#FFFFFF", opacity: 1, radiusFactor: 0, rotation: 0, squaredBox: !1, stroke: !0, strokeColor: "#000000", autoCreate: !1
                    };
                case 2:
                    return {
                        type: 2, fillColor: "#FFFF00", rotation: 0, squaredBox: !1, autoCreate: !1
                    };
                case 3:
                    return {
                        //AGjs__changes squaredBox for small circle 
                        type: 3, borderWidth: .04, squaredBox: !1,
                        dashCap: 0, dashStyle: 0, endCap: 0, opacity: 1, rotation: 0, startCap: 0, strokeColor: "#000000", autoCreate: !1
                    };
                case 4:
                    return {
                        type: 4, arrowFilled: !0, arrowHeight: 10, arrowWidth: 5, borderWidth: .04, dashCap: 0, dashStyle: 0, opacity: 1, rotation: 0, strokeColor: "#000000", autoCreate: !1
                    };
                case 5:
                    return {
                        type: 5, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#000000", opacity: 1, rotation: 0, stroke: !0, strokeColor: "#000000", autoCreate: !1
                    };
                case 6:
                    return {
                        //AGjs__changes squaredBox for fillColor and strokeColor changed to custom color #0000FF
                        type: 6, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#0000FF",
                        opacity: 1, rotation: 0, squaredBox: !1, stroke: 0, strokeColor: "#0000FF", autoCreate: !1
                    };
                case 7:
                    return {
                        type: 7, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#000000", opacity: 1, radiusFactor: 0, rotation: 0, stroke: !1, strokeColor: "#FFFFFF", autoCreate: !1
                    };
                case 8:
                    return {
                        type: 8, alignment: 0, autoSize: !1, borderWidth: .01, dashCap: 0, dashStyle: 0, fill: !0, fillColor: "#FFFFFF", fontName: "Arial", fontSize: 12, fontStyle: 0, foreColor: "#000000", lineAlignment: 0, opacity: 1, radiusFactor: 0, rotation: 0, stroke: !1, strokeColor: "#000000",
                        text: "Text", canEditText: !0, autoCreate: !1
                    };
                case 9:
                    return {
                        type: 9, alignment: 0, autoSize: !1, borderWidth: .01, dashCap: 0, dashStyle: 0, fill: !0, fillColor: "#FDFD32", fontName: "Arial", fontSize: 20, fontStyle: 1, foreColor: "#000000", lineAlignment: 0, opacity: 1, rotation: 0, stroke: !0, strokeColor: "#000000", text: "Text", canEditText: !0, autoCreate: !1
                    };
                case 10:
                    return {
                        type: 10, borderWidth: .04, dashStyle: 0, dashCap: 0, opacity: 1, rotation: 0, strokeColor: "#000000", autoCreate: !1
                    };
                case 11:
                    return {
                        type: 11, borderWidth: .2, rotation: 0, strokeColor: "#FFFF00",
                        autoCreate: !1
                    };
                case 12:
                    return {
                        type: 11, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#FF0000", opacity: 1, rotation: 0, stroke: !0, strokeColor: "#000000", autoCreate: !1
                    };
                case 13:
                    return {
                        type: 13, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !1, fillColor: "#000000", fontName: "Arial", fontStyle: 3, foreColor: "#0000FF", link: "", opacity: 1, radiusFactor: 0, rotation: 0, stroke: !1, strokeColor: "#000000", autoCreate: !1, text: ""
                    };
                case 14:
                    return {
                        type: 14, borderWidth: .04, dashCap: 0, dashStyle: 0, fill: !0, fillColor: "#FF0000", opacity: 1,
                        rotation: 0, stroke: !0, strokeColor: "#000000", autoCreate: !1
                    };
                case 15:
                    return {
                        type: 15, borderWidth: .04, dashCap: 0, dashStyle: 0, fontName: "Arial", fontSize: 12, fontStyle: 0, foreColor: "#000000", measurementUnit: 1, opacity: 1, rotation: 0, strokeColor: "#000000", scale: 1, autoCreate: !1
                    };
                case 16:
                    return {
                        type: 16, borderWidth: .04, dashCap: 0, dashStyle: 0, fontName: "Arial", fontSize: 12, fontStyle: 0, foreColor: "#000000", measurementUnit: 1, fill: !1, fillColor: "#000000", opacity: 1, rotation: 0, stroke: !0, strokeColor: "#000000", scale: 1, autoCreate: !1
                    };
                case 2048:
                    return {
                        type: 2048, allowReview: !0, allowAnswer: !0, reviewStatus: 0, fontName: "Arial", fontSize: 9, fontStyle: 0, foreColor: "#000000"
                    };
                default:
                    return null
            }
        },
        getAnnotationDefaultPropertiesDisplay: function (b) {
            switch (b) {
                case 0:
                    return "borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");
                case 1:
                    return "borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");
                case 2:
                    return ["fillColor",
                        "rotation", "squaredBox"
                    ];
                case 3:
                    return "borderWidth dashCap dashStyle endCap opacity rotation startCap strokeColor".split(" ");
                case 4:
                    return "arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");
                case 5:
                    return "borderWidth dashCap dashStyle fill fillColor opacity rotation strokeColor".split(" ");
                case 6:
                    return "borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox  strokeColor".split(" ");
                case 7:
                    return "borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");
                case 8:
                    return "alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");
                case 9:
                    return "alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");
                case 10:
                    return "borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");
                case 11:
                    return ["borderWidth", "rotation",
                        "strokeColor"
                    ];
                case 12:
                    return "borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");
                case 13:
                    return "borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");
                case 14:
                    return "borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");
                case 15:
                    return "borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");
                case 16:
                    return "borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");
                case 2048:
                    return "allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");
                default:
                    return null
            }
        }
    },
    JSON = JSON || {};
JSON.stringify = JSON.stringify || function (b) {
    var f = typeof b;
    if ("object" != f || null === b) return "string" == f && (b = '"' + b + '"'), String(b);
    var l, t = [],
        h = b && b.constructor == Array;
    for (l in b) {
        var q = b[l];
        f = typeof q;
        "string" == f ? q = '"' + q + '"' : "object" == f && null !== q && (q = JSON.stringify(q));
        t.push((h ? "" : '"' + l + '":') + String(q))
    }
    return (h ? "[" : "{") + String(t) + (h ? "]" : "}")
};
var DocuViewareAPI = {
    Constants: {
        SINGLE_COLUMN_MOBILE_MENU_WIDTH: 126,
        TWO_COLUMNS_MOBILE_MENU_WIDTH: 188
    },
    Status: {
        OK: 0,
        GenericError: 1,
        PasswordRequired: 27
    },
    Toolbar: {
        None: 0,
        Standard: 1,
        Mobile: 2
    },
    SearchPageSelection: {
        CurrentPage: 0,
        AllPages: 1
    },
    RotateFlipType: {
        Rotate90FlipNone: 1,
        Rotate180FlipNone: 2,
        Rotate270FlipNone: 3
    },
    LocalServiceStatus: {
        Ready: 0,
        NotFound: 1,
        WrongVersion: 2
    },
    TwainCapabilities: {
        ACAP_AUDIOFILEFORMAT: 4609,
        ACAP_XFERMECH: 4610,
        CAP_ALARMS: 4120,
        CAP_ALARMVOLUME: 4121,
        CAP_AUTHOR: 4096,
        CAP_AUTOFEED: 4103,
        CAP_AUTOMATICCAPTURE: 4122,
        CAP_AUTOMATICSENSEMEDIUM: 4155,
        CAP_AUTOSCAN: 4112,
        CAP_BATTERYMINUTES: 4146,
        CAP_BATTERYPERCENTAGE: 4147,
        CAP_CAMERAENABLED: 4150,
        CAP_CAMERAORDER: 4151,
        CAP_CAMERAPREVIEWUI: 4129,
        CAP_CAMERASIDE: 4148,
        CAP_CAPTION: 4097,
        CAP_CLEARBUFFERS: 4125,
        CAP_CLEARPAGE: 4104,
        CAP_CUSTOMBASE: 32768,
        CAP_CUSTOMDSDATA: 4117,
        CAP_CUSTOMINTERFACEGUID: 4156,
        CAP_DEVICEEVENT: 4130,
        CAP_DEVICEONLINE: 4111,
        CAP_DEVICETIMEDATE: 4127,
        CAP_DOUBLEFEEDDETECTION: 4159,
        CAP_DOUBLEFEEDDETECTIONLENGTH: 4160,
        CAP_DOUBLEFEEDDETECTIONRESPONSE: 4162,
        CAP_DOUBLEFEEDDETECTIONSENSITIVITY: 4161,
        CAP_DUPLEX: 4114,
        CAP_DUPLEXENABLED: 4115,
        CAP_ENABLEDSUIONLY: 4116,
        CAP_ENDORSER: 4118,
        CAP_EXTENDEDCAPS: 4102,
        CAP_FEEDERALIGNMENT: 4141,
        CAP_FEEDERENABLED: 4098,
        CAP_FEEDERLOADED: 4099,
        CAP_FEEDERORDER: 4142,
        CAP_FEEDERPOCKET: 4154,
        CAP_FEEDERPREP: 4153,
        CAP_FEEDPAGE: 4105,
        CAP_INDICATORS: 4107,
        CAP_INDICATORSMODE: 4164,
        CAP_JOBCONTROL: 4119,
        CAP_LANGUAGE: 4140,
        CAP_MAXBATCHBUFFERS: 4126,
        CAP_MICRENABLED: 4152,
        CAP_PAPERDETECTABLE: 4109,
        CAP_PAPERHANDLING: 4163,
        CAP_POWERSAVETIME: 4166,
        CAP_POWERSUPPLY: 4128,
        CAP_PRINTER: 4134,
        CAP_PRINTERCHARROTATION: 4167,
        CAP_PRINTERENABLED: 4135,
        CAP_PRINTERFONTSTYLE: 4168,
        CAP_PRINTERINDEX: 4136,
        CAP_PRINTERINDEXLEADCHAR: 4169,
        CAP_PRINTERINDEXMAXVALUE: 4170,
        CAP_PRINTERINDEXNUMDIGITS: 4171,
        CAP_PRINTERINDEXSTEP: 4172,
        CAP_PRINTERINDEXTRIGGER: 4173,
        CAP_PRINTERMODE: 4137,
        CAP_PRINTERSTRING: 4138,
        CAP_PRINTERSTRINGPREVIEW: 4174,
        CAP_PRINTERSUFFIX: 4139,
        CAP_PRINTERVERTICALOFFSET: 4165,
        CAP_REACQUIREALLOWED: 4144,
        CAP_REWINDPAGE: 4106,
        CAP_SEGMENTED: 4149,
        CAP_SERIALNUMBER: 4132,
        CAP_SUPPORTEDCAPS: 4101,
        CAP_SUPPORTEDCAPSEXT: 4108,
        CAP_SUPPORTEDCAPSSEGMENTUNIQUE: 4157,
        CAP_SUPPORTEDDATS: 4158,
        CAP_THUMBNAILSENABLED: 4113,
        CAP_TIMEBEFOREFIRSTCAPTURE: 4123,
        CAP_TIMEBETWEENCAPTURES: 4124,
        CAP_TIMEDATE: 4100,
        CAP_UICONTROLLABLE: 4110,
        CAP_XFERCOUNT: 1,
        ICAP_AUTOBRIGHT: 4352,
        ICAP_AUTODISCARDBLANKPAGES: 4404,
        ICAP_AUTOMATICBORDERDETECTION: 4432,
        ICAP_AUTOMATICCOLORENABLED: 4441,
        ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE: 4442,
        ICAP_AUTOMATICCROPUSESFRAME: 4439,
        ICAP_AUTOMATICDESKEW: 4433,
        ICAP_AUTOMATICLENGTHDETECTION: 4440,
        ICAP_AUTOMATICROTATE: 4434,
        ICAP_AUTOSIZE: 4438,
        ICAP_BARCODEDETECTIONENABLED: 4407,
        ICAP_BARCODEMAXRETRIES: 4412,
        ICAP_BARCODEMAXSEARCHPRIORITIES: 4409,
        ICAP_BARCODESEARCHMODE: 4411,
        ICAP_BARCODESEARCHPRIORITIES: 4410,
        ICAP_BARCODETIMEOUT: 4413,
        ICAP_BITDEPTH: 4395,
        ICAP_BITDEPTHREDUCTION: 4396,
        ICAP_BITORDER: 4380,
        ICAP_BITORDERCODES: 4390,
        ICAP_BRIGHTNESS: 4353,
        ICAP_CCITTKFACTOR: 4381,
        ICAP_COLORMANAGEMENTENABLED: 4443,
        ICAP_COMPRESSION: 256,
        ICAP_CONTRAST: 4355,
        ICAP_CUSTHALFTONE: 4356,
        ICAP_EXPOSURETIME: 4357,
        ICAP_EXTIMAGEINFO: 4399,
        ICAP_FEEDERTYPE: 4436,
        ICAP_FILMTYPE: 4447,
        ICAP_FILTER: 4358,
        ICAP_FLASHUSED: 4359,
        ICAP_FLASHUSED2: 4422,
        ICAP_FLIPROTATION: 4406,
        ICAP_FRAMES: 4372,
        ICAP_GAMMA: 4360,
        ICAP_HALFTONES: 4361,
        ICAP_HIGHLIGHT: 4362,
        ICAP_ICCPROFILE: 4437,
        ICAP_IMAGEDATASET: 4398,
        ICAP_IMAGEFILEFORMAT: 4364,
        ICAP_IMAGEFILTER: 4423,
        ICAP_IMAGEMERGE: 4444,
        ICAP_IMAGEMERGEHEIGHTTHRESHOLD: 4445,
        ICAP_JPEGPIXELTYPE: 4392,
        ICAP_JPEGQUALITY: 4435,
        ICAP_JPEGSUBSAMPLING: 4449,
        ICAP_LAMPSTATE: 4365,
        ICAP_LIGHTPATH: 4382,
        ICAP_LIGHTSOURCE: 4366,
        ICAP_MAXFRAMES: 4378,
        ICAP_MINIMUMHEIGHT: 4400,
        ICAP_MINIMUMWIDTH: 4401,
        ICAP_MIRROR: 4448,
        ICAP_NOISEFILTER: 4424,
        ICAP_ORIENTATION: 4368,
        ICAP_OVERSCAN: 4425,
        ICAP_PATCHCODEDETECTIONENABLED: 4415,
        ICAP_PATCHCODEMAXRETRIES: 4420,
        ICAP_PATCHCODEMAXSEARCHPRIORITIES: 4417,
        ICAP_PATCHCODESEARCHMODE: 4419,
        ICAP_PATCHCODESEARCHPRIORITIES: 4418,
        ICAP_PATCHCODETIMEOUT: 4421,
        ICAP_PHYSICALHEIGHT: 4370,
        ICAP_PHYSICALWIDTH: 4369,
        ICAP_PIXELFLAVOR: 4383,
        ICAP_PIXELFLAVORCODES: 4391,
        ICAP_PIXELTYPE: 257,
        ICAP_PLANARCHUNKY: 4384,
        ICAP_ROTATION: 4385,
        ICAP_SHADOW: 4371,
        ICAP_SUPPORTEDBARCODETYPES: 4408,
        ICAP_SUPPORTEDEXTIMAGEINFO: 4446,
        ICAP_SUPPORTEDPATCHCODETYPES: 4416,
        ICAP_SUPPORTEDSIZES: 4386,
        ICAP_THRESHOLD: 4387,
        ICAP_TILES: 4379,
        ICAP_TIMEFILL: 4394,
        ICAP_UNDEFINEDIMAGESIZE: 4397,
        ICAP_UNITS: 258,
        ICAP_XFERMECH: 259,
        ICAP_XNATIVERESOLUTION: 4374,
        ICAP_XRESOLUTION: 4376,
        ICAP_XSCALING: 4388,
        ICAP_YNATIVERESOLUTION: 4375,
        ICAP_YRESOLUTION: 4377,
        ICAP_YSCALING: 4389,
        ICAP_ZOOMFACTOR: 4414
    },
    GetSessionID: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ajax.sessionID : null
    },
    IsInitialized: function (b) {
        return (b = document.getElementById(b)) &&
            b.control
    },
    IsLoaded: function (b) {
        return (b = document.getElementById(b)) && b.control && !b.control.waitForInit && !b.control.hasPendingResize()
    },
    IsTwainSupportAvailable: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.IsTwainSupportAvailable() : !1
    },
    PostCustomServerAction: function (b, f, l, t, h, q) {
        return (b = document.getElementById(b)) && b.control ? b.control.PostCustomServerAction(f, l, t, h, q) : DocuViewareAPI.Status.GenericError
    },
    LoadFromByteArray: function (b, f, l, t, h, q) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.LoadFromByteArray(f, l, t, h, q) : DocuViewareAPI.Status.GenericError
    },
    LoadFromFile: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.LoadFromFile(f, l) : DocuViewareAPI.Status.GenericError
    },
    LoadFromUri: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.LoadFromUri(f, "", l, t) : DocuViewareAPI.Status.GenericError
    },
    LoadFromUriEx: function (b, f, l, t, h) {
        return (b = document.getElementById(b)) && b.control ? b.control.LoadFromUri(f, l, t, h) : DocuViewareAPI.Status.GenericError
    },
    ToggleLoadFromUriDialog: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ToggleLoadFromUriDialog() : DocuViewareAPI.Status.GenericError
    },
    Save: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.ToggleSaveDialog(f, l) : DocuViewareAPI.Status.GenericError
    },
    Print: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.TogglePrintDialog(f, l) : DocuViewareAPI.Status.GenericError
    },
    TwainAcquire: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ?
            b.control.TwainToggleAcquisitionDialog(f, l) : DocuViewareAPI.Status.GenericError
    },
    TwainSetConfig: function (b, f, l, t, h, q, c, e) {
        return (b = document.getElementById(b)) && b.control ? b.control.TwainSetConfig(f, l, t, h, q, c, e) : DocuViewareAPI.Status.GenericError
    },
    TwainDownloadServiceSetup: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.DownloadTwainServiceSetup() : DocuViewareAPI.Status.GenericError
    },
    TwainGetLocalServiceStatus: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.TwainGetLocalServiceStatus() :
            DocuViewareAPI.Status.GenericError
    },
    TwainGetSources: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetTwainSourceList() : DocuViewareAPI.Status.GenericError
    },
    TwainGetClientInfo: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.TwainGetClientInfo() : DocuViewareAPI.Status.GenericError
    },
    TwainAcquireToNewDocument: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.TwainAcquireToNewDocument(f) : DocuViewareAPI.Status.GenericError
    },
    TwainAcquireToCurrentDocument: function (b,
        f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.TwainAcquireToCurrentDocument(f, l) : DocuViewareAPI.Status.GenericError
    },
    GetDocumentType: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetDocumentType() : -1
    },
    GetDocumentName: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetDocumentName() : ""
    },
    GetPageCount: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetPageCount() : -1
    },
    GetDisplayedArea: function (b) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.GetDisplayedArea() : {
                left: 0,
                top: 0,
                width: 0,
                height: 0
            }
    },
    GetViewerScrollLeft: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetViewerScrollLeft() : -1
    },
    GetViewerScrollTop: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetViewerScrollTop() : -1
    },
    SetViewerScrollLeft: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetViewerScrollLeft(f) : DocuViewareAPI.Status.GenericError
    },
    SetViewerScrollTop: function (b, f) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.SetViewerScrollTop(f) : DocuViewareAPI.Status.GenericError
    },
    GetSelectionAreaCoordinates: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetSelectionAreaCoordinates() : {
            left: 0,
            top: 0,
            width: 0,
            height: 0
        }
    },
    SetSelectionAreaCoordinates: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetSelectionAreaCoordinates(f) : DocuViewareAPI.Status.GenericError
    },
    ClearSelectionArea: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ClearSelectionArea() :
            DocuViewareAPI.Status.GenericError
    },
    GetMouseMode: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetMouseMode() : DocuViewareAPI.Status.GenericError
    },
    SetMouseMode: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetMouseMode(f) : DocuViewareAPI.Status.GenericError
    },
    GetCurrentPage: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetCurrentPage() : -1
    },
    GetSelectedThumbnailItems: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetSelectedThumbnailItems() :
            null
    },
    SetThumbnailSelected: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetThumbnailSelected(f, l) : null
    },
    GetCurrentZoom: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetCurrentZoom() : -1
    },
    SetCurrentZoom: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetCurrentZoom(f) : DocuViewareAPI.Status.GenericError
    },
    SelectPage: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SelectPage(f) : DocuViewareAPI.Status.GenericError
    },
    ZoomIN: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.ZoomIN(1, f, l) : DocuViewareAPI.Status.GenericError
    },
    ZoomOUT: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.ZoomOUT(1, f, l) : DocuViewareAPI.Status.GenericError
    },
    ZoomRect: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.ZoomRect(f, l, t) : DocuViewareAPI.Status.GenericError
    },
    RotateView: function (b, f) {
        if ((b = document.getElementById(b)) && b.control) {
            var l = !1;
            "number" != typeof f ||
                f != this.RotateFlipType.Rotate90FlipNone && f != this.RotateFlipType.Rotate180FlipNone && f != this.RotateFlipType.Rotate270FlipNone || (l = !0);
            return l ? b.control.Rotate(f, 0) : DocuViewareAPI.Status.GenericError
        }
        return DocuViewareAPI.Status.GenericError
    },
    RotatePage: function (b, f) {
        if ((b = document.getElementById(b)) && b.control) {
            var l = !1;
            "number" != typeof f || f != this.RotateFlipType.Rotate90FlipNone && f != this.RotateFlipType.Rotate180FlipNone && f != this.RotateFlipType.Rotate270FlipNone || (l = !0);
            return l ? b.control.Rotate(f,
                1) : DocuViewareAPI.Status.GenericError
        }
        return DocuViewareAPI.Status.GenericError
    },
    ToggleSinglePageViewMode: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ToggleSinglePageViewMode() : DocuViewareAPI.Status.GenericError
    },
    SetZoomWidthViewer: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetZoomMode(3) : DocuViewareAPI.Status.GenericError
    },
    SetZoomFitViewer: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetZoomMode(2) : DocuViewareAPI.Status.GenericError
    },
    CloseDocument: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.CloseDocument() : DocuViewareAPI.Status.GenericError
    },
    SelectThumbnailSnapIn: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ShowThumbnailsSnapIn() : DocuViewareAPI.Status.GenericError
    },
    SelectBookmarksSnapIn: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ShowBookmarksSnapIn() : DocuViewareAPI.Status.GenericError
    },
    SelectSearchSnapIn: function (b) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.ShowSearchSnapIn() : DocuViewareAPI.Status.GenericError
    },
    SelectAnnotationsSnapIn: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ShowAnnotationsSnapIn() : DocuViewareAPI.Status.GenericError
    },
    SelectCommentsSnapIn: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ShowCommentsSnapIn() : DocuViewareAPI.Status.GenericError
    },
    SelectSnapIn: function (b, f) {
        return (b = document.getElementById(b)) && "" !== f ? b.control.SelectSnapIn(f, !1) : DocuViewareAPI.Status.GenericError
    },
    ShowSnapIn: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.ToggleSnapIn(f, !0) : DocuViewareAPI.Status.GenericError
    },
    HideSnapIn: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.ToggleSnapIn(f, !1) : DocuViewareAPI.Status.GenericError
    },
    CollapseSnapInPanel: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetSnapinsPanelVisibility(!1) : DocuViewareAPI.Status.GenericError
    },
    AddCustomSnapIn: function (b, f, l, t, h, q, c) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.AddCustomSnapIn(f, l, t, h, q, c) : DocuViewareAPI.Status.GenericError
    },
    GetSnapInPanelWidth: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetSnapInPanelWidth() : 0
    },
    SetSnapInPanelWidth: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetSnapInPanelWidth(f) : DocuViewareAPI.Status.GenericError
    },
    GetSelectedText: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetSelectedText() : ""
    },
    HighlightSelectedText: function (b, f) {
        return (b =
            document.getElementById(b)) && b.control ? b.control.HighlightSelectedText(f) : DocuViewareAPI.Status.GenericError
    },
    StrikeoutSelectedText: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.StrikeoutSelectedText(f) : DocuViewareAPI.Status.GenericError
    },
    UnderlineSelectedText: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.UnderlineSelectedText(f) : DocuViewareAPI.Status.GenericError
    },
    AddSelectedTextContextMenuItem: function (b, f, l) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.AddSelectedTextContextMenuItem(f, l) : DocuViewareAPI.Status.GenericError
    },
    AddAnnotationsActionButton: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotationsActionButton(f, l, t) : DocuViewareAPI.Status.GenericError
    },
    Search: function (b, f, l, t, h, q) {
        if ((b = document.getElementById(b)) && b.control) {
            var c = !1;
            "string" === typeof f && ("undefined" === typeof q && (q = !1), "boolean" == typeof l && "boolean" == typeof t && "boolean" == typeof q && ("number" != typeof h || h !== this.SearchPageSelection.AllPages &&
                h !== this.SearchPageSelection.CurrentPage || (c = !0)));
            return c ? b.control.Search(f, l, t, q, h) : DocuViewareAPI.Status.GenericError
        }
        return DocuViewareAPI.Status.GenericError
    },
    SetSearchSettings: function (b, f, l, t, h) {
        return (b = document.getElementById(b)) && b.control ? "boolean" == typeof f && "boolean" == typeof l && "boolean" == typeof t ? "number" != typeof h || h !== this.SearchPageSelection.AllPages && h !== this.SearchPageSelection.CurrentPage ? DocuViewareAPI.Status.GenericError : b.control.SetSearchSettings(f, l, t, h) : DocuViewareAPI.Status.GenericError :
            null
    },
    SearchNavigateToOccurrence: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? Number.isInteger(f) ? b.control.SearchNavigateToOccurrence(f) : DocuViewareAPI.Status.GenericError : null
    },
    GetSearchResultsCount: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetSearchResultsCount() : 0
    },
    GetCurrentSearchOccurrenceIdx: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetCurrentSearchOccurrenceIdx() : 0
    },
    ClearSearch: function (b) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.ClearSearch() : DocuViewareAPI.Status.GenericError
    },
    UpdateLayout: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.UpdateLayout() : DocuViewareAPI.Status.GenericError
    },
    ExitAnnotationDrawingMode: function (b) {
        return (b = document.getElementById(b)) && b.control ? b.control.ExitAnnotationDrawingMode() : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationSelectedStateChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationSelectedStateChanged(f) :
            DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationAdded: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationAdded(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationEdited: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationEdited(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationDeleted: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationDeleted(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnFormFieldChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnFormFieldChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnPageChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnPageChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnZoomChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnZoomChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnRotationChanged: function (b,
        f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnRotationChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnNewDocumentLoaded: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnNewDocumentLoaded(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnDocumentClosed: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnDocumentClosed(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnDocumentPrinted: function (b, f) {
        return (b =
            document.getElementById(b)) && b.control ? b.control.RegisterOnDocumentPrinted(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnDocumentSaved: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnDocumentSaved(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnTwainAcquisitionDialogAcquireButtonClick: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnTwainAcquisitionDialogCancelButtonClick: function (b,
        f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnThumbnailsOrderChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnThumbnailsOrderChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnTextSelected: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnTextSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAreaSelected: function (b,
        f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAreaSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnCommentAdded: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnCommentAdded(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnCommentEdited: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnCommentEdited(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnCommentDeleted: function (b, f) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.RegisterOnCommentDeleted(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnFullscreenModeChanged: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnFullscreenModeChanged(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnSearchInvoked: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnSearchInvoked(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationMouseEnter: function (b, f) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.RegisterOnAnnotationMouseEnter(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationMouseLeave: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationMouseLeave(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnTextAnnotated: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnTextAnnotated(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnThumbnailsSnapInSelected: function (b, f) {
        return (b = document.getElementById(b)) &&
            b.control ? b.control.RegisterOnThumbnailsSnapInSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnBookmarksSnapInSelected: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnBookmarksSnapInSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnSearchSnapInSelected: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnSearchSnapInSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnAnnotationsSnapInSelected: function (b, f) {
        return (b =
            document.getElementById(b)) && b.control ? b.control.RegisterOnAnnotationsSnapInSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnCommentsSnapInSelected: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnCommentsSnapInSelected(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnSnapInPanelResized: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnSnapInPanelResized(f) : DocuViewareAPI.Status.GenericError
    },
    RegisterOnSnapInPanelToggle: function (b,
        f) {
        return (b = document.getElementById(b)) && b.control ? b.control.RegisterOnSnapInPanelToggle(f) : DocuViewareAPI.Status.GenericError
    },
    AddRubberStampAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(0, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddRectangleAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(1, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddRectangleHighlighterAnnotInteractive: function (b,
        f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(2, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddLineAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(3, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddConnectedLineAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(5, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddLineArrowAnnotInteractive: function (b,
        f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(4, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddEllipseAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(6, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    //AGjs__changes 
    AddCustomCircleLineAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(6, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddTextAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(8, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddStickyNoteAnnotInteractive: function (b,
        f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(9, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddFreeHandAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(10, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddFreeHandHighLighterAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(11, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddLinkAnnotInteractive: function (b,
        f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(13, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddRulerAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(15, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddPolyRulerAnnotInteractive: function (b, f, l, t) {
        return (b = document.getElementById(b)) && b.control ? b.control.AddAnnotInteractive(16, f, l, t) : DocuViewareAPI.Status.GenericError
    },
    AddAnnot: function (b, f, l, t) {
        if ((b =
            document.getElementById(b)) && b.control) {
            if (Array.isArray(f)) return b.control.AddAnnot(f, !1, l, t);
            var h = [];
            h.push(f);
            return b.control.AddAnnot(h, !1, l, t)
        }
        return DocuViewareAPI.Status.GenericError
    },
    RemoveAnnotById: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.DeleteAnnotationById(f) : DocuViewareAPI.Status.GenericError
    },
    GetPageFormFields: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetPageFormFields(f) : DocuViewareAPI.Status.GenericError
    },
    UpdateFormFields: function (b,
        f, l, t) {
        if ((b = document.getElementById(b)) && b.control) {
            if (Array.isArray(f)) return b.control.UpdateFormFields(f, l, t);
            var h = [];
            h.push(f);
            return b.control.UpdateFormFields(h, l, t)
        }
        return DocuViewareAPI.Status.GenericError
    },
    EnableAnnotEditionOnDblClick: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.EnableAnnotEditionOnDblClick(f) : DocuViewareAPI.Status.GenericError
    },
    ResetAnnotAutoCreateProperty: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.ResetAnnotAutoCreate(f) :
            DocuViewareAPI.Status.GenericError
    },
    ResetAnnotToDefault: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.ResetAnnotToDefault(f) : DocuViewareAPI.Status.GenericError
    },
    SetAnnotPropertiesValues: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetAnnotPropertiesValues(f, l) : DocuViewareAPI.Status.GenericError
    },
    GetAnnotPropertiesValues: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.GetAnnotPropertiesValues(f) : DocuViewareAPI.Status.GenericError
    },
    SetAnnotPropertiesToDisplay: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetAnnotPropertiesToDisplay(f, l) : DocuViewareAPI.Status.GenericError
    },
    ResetAnnotPropertiesToDisplayDefault: function (b, f) {
        return (b = document.getElementById(b)) && b.control ? b.control.ResetAnnotPropertiesToDisplayDefault(f) : DocuViewareAPI.Status.GenericError
    },
    SetAnnotDefaultAuthor: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.SetAnnotDefaultAuthor(f, l) : DocuViewareAPI.Status.GenericError
    },
    EnsureAnnotVisibility: function (b, f, l) {
        return (b = document.getElementById(b)) && b.control ? b.control.EnsureAnnotationVisibility(f, l) : DocuViewareAPI.Status.GenericError
    }

},
    DOCUVIEWARE_JS_VERSION = 30019,
    DocuViewareProgressbar = function () {
        var b = {
            width: "100%",
            height: "4px",
            zIndex: 16777271
        },
            f = {
                width: 0,
                height: "100%",
                clear: "both",
                transition: "height .3s"
            };
        var l = function (b, c) {
            for (var e in c) b.style[e] = c[e];
            b.style.float = "left"
        };
        var t = function () {
            var b = this,
                c = this.width - this.here;
            .1 > c && -.1 < c ? (h.call(this, this.here),
                this.moving = !1, 100 == this.width && (this.el.style.height = 0, setTimeout(function () {
                    b.cont.el.removeChild(b.el)
                }, 300))) : (h.call(this, this.width - c / 4), setTimeout(function () {
                    b.go()
                }, 16))
        };
        var h = function (b) {
            this.width = b;
            this.el.style.width = this.width + "%"
        };
        var q = function () {
            var b = new c(this);
            this.bars.unshift(b)
        };
        var c = function (b) {
            this.el = document.createElement("div");
            this.el.style.backgroundColor = b.opts.bg;
            this.here = this.width = 0;
            this.moving = !1;
            this.cont = b;
            l(this.el, f);
            b.el.appendChild(this.el)
        };
        c.prototype.go =
            function (b) {
                b ? (this.here = b, this.moving || (this.moving = !0, t.call(this))) : this.moving && t.call(this)
            };
        var e = function (c) {
            c = this.opts = c || {};
            c.bg = c.bg || "#000";
            this.bars = [];
            var e = this.el = document.createElement("div");
            l(this.el, b);
            c.id && (e.id = c.id);
            e.style.position = c.target ? "absolute" : "fixed";
            c.target ? c.target.insertBefore(e, c.target.firstChild) : document.getElementsByTagName("body")[0].appendChild(e);
            q.call(this)
        };
        e.prototype.value = function () {
            return this.bars[0].here
        };
        e.prototype.go = function (b) {
            this.bars[0].go(b);
            100 == b && q.call(this)
        };
        return e
    }(),
    CreateDocuViewareCursorManager = function (b, f) {
        return {
            target: b,
            isIE: f,
            cursor: null,
            customCursorClass: null,
            setStdCursor: function (b) {
                b != this.cursor && (this.dropCurrentCursor(), this.cursor = b, this.target.style.cursor = this.cursor)
            },
            setCustomCursorClass: function (b) {
                this.isIE && (b += "IE");
                b != this.customCursorClass && (this.dropCurrentCursor(), this.customCursorClass = b, dvJQuery(this.target).addClass(this.customCursorClass))
            },
            dropCurrentCursor: function () {
                this.customCursorClass && (dvJQuery(this.target).removeClass(this.customCursorClass),
                    this.customCursorClass = null);
                null != this.cursor && (this.cursor = null, this.target.style.cursor = "")
            }
        }
    },
    CreateDocuViewareController = function (b, f, l, t, h, q, c, e, k, z, E, N, M, w, y, C, A, D, O, G, fa) {
        function T(a) {
            null != a.dom.openfile && DocuViewareUtilities.addEvent(a.dom.openfile, "change", function (d) {
                if (null != d.target.files && 0 != d.target.files.length) {
                    d = d.target.files[0];
                    var b = dvJQuery(a.dom.openfile);
                    b.val("");
                    b.replaceWith(b.clone());
                    T(a);
                    a.Internal.Files.uploadFile(d, 0)
                }
            }, !0)
        }
        if (b != DOCUVIEWARE_JS_VERSION) c = document.getElementById("main" +
            c), null != c && (c.style.visibility = "visible"), document.write("The version of the DocuVieware javascript used is incorrect. The JavaScript version version is: " + DOCUVIEWARE_JS_VERSION + ". The expected version is: " + b + ". Please refresh this page or contact the webmaster if the problem persists.");
        else {
            DocuViewarejQueryPlugins.register();
            var a = {
                viewerWidth: null,
                viewerHeight: null,
                waitForInit: !1,
                appControllerPath: l,
                useIdInRoot: t,
                uniqueID: c,
                maxUploadSize: e,
                packetSize: k,
                debug: z,
                isSecure: f,
                localization: eval("(" +
                    E + ")"),
                UIconfig: N,
                snapIns: eval("(" + M + ")"),
                attachedDebugger: y,
                disableAnnotationDrawingModePanel: C,
                twainServiceUri: A,
                twainServiceSupportedVersion: D,
                twainSourceConfig: JSON.parse(O),
                isWindows: -1 < navigator.platform.indexOf("Win"),
                windowsVersion: DocuViewareUtilities.getWindowsVersion(),
                isIOS: navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? !0 : !1,
                isSafari: 0 < Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
                isIE: -1 != DocuViewareUtilities.getInternetExplorerVersion(),
                isIE9: 9 == DocuViewareUtilities.getInternetExplorerVersion(),
                isIE10: 10 == DocuViewareUtilities.getInternetExplorerVersion(),
                isIE11: 11 == DocuViewareUtilities.getInternetExplorerVersion(),
                isIEorEdge: -1 != DocuViewareUtilities.getInternetExplorerVersion() || "Netscape" == navigator.appName && -1 < navigator.appVersion.indexOf("Edge"),
                isFirefox: "undefined" !== typeof InstallTrigger,
                fastMode: !0,
                log: function (a) {
                    this.debug && (dvJQuery("#logDebug" + this.uniqueID).val(dvJQuery("#logDebug" + this.uniqueID).val() + a + "\n"), dvJQuery("#logDebug" + this.uniqueID).scrollTop(dvJQuery("#logDebug" +
                        this.uniqueID)[0].scrollHeight), dvJQuery("#debugBar" + this.uniqueID).show())
                },
                Internal: {
                    Libs: {
                        pica: {
                            FILTER_INFO: [{
                                win: .5,
                                filter: function (a) {
                                    return -.5 <= a && .5 > a ? 1 : 0
                                }
                            }, {
                                win: 1,
                                filter: function (a) {
                                    if (-1 >= a || 1 <= a) return 0;
                                    if (-1.1920929E-7 < a && 1.1920929E-7 > a) return 1;
                                    a *= Math.PI;
                                    return Math.sin(a) / a * (.54 + .46 * Math.cos(a / 1))
                                }
                            }, {
                                win: 2,
                                filter: function (a) {
                                    if (-2 >= a || 2 <= a) return 0;
                                    if (-1.1920929E-7 < a && 1.1920929E-7 > a) return 1;
                                    a *= Math.PI;
                                    return Math.sin(a) / a * Math.sin(a / 2) / (a / 2)
                                }
                            }, {
                                win: 3,
                                filter: function (a) {
                                    if (-3 >= a || 3 <=
                                        a) return 0;
                                    if (-1.1920929E-7 < a && 1.1920929E-7 > a) return 1;
                                    a *= Math.PI;
                                    return Math.sin(a) / a * Math.sin(a / 3) / (a / 3)
                                }
                            }],
                            toFixedPoint: function (a) {
                                return Math.floor(16384 * a)
                            },
                            createFilters: function (a, b, c) {
                                var d = this.FILTER_INFO[a].filter,
                                    g = c / b,
                                    m = 1 / g;
                                g = Math.min(1, g);
                                a = this.FILTER_INFO[a].win / g;
                                var e, h, f = new Int16Array((Math.floor(2 * (a + 1)) + 2) * c),
                                    l = 0;
                                for (e = 0; e < c; e++) {
                                    var k = (e + .5) * m;
                                    var q = Math.max(0, Math.floor(k - a));
                                    var t = Math.min(b - 1, Math.ceil(k + a));
                                    var H = t - q + 1;
                                    var w = new Float32Array(H);
                                    H = new Int16Array(H);
                                    var z =
                                        0;
                                    var y = q;
                                    for (h = 0; y <= t; y++ , h++) {
                                        var A = d((y + .5 - k) * g);
                                        z += A;
                                        w[h] = A
                                    }
                                    for (h = k = 0; h < w.length; h++) t = this.toFixedPoint(w[h] / z), k += t, H[h] = t;
                                    H[c >> 1] += this.toFixedPoint(1) - k;
                                    for (w = 0; w < H.length && 0 === H[w];) w++;
                                    if (w < H.length) {
                                        for (z = H.length - 1; 0 < z && 0 === H[z];) z--;
                                        q += w;
                                        h = z - w + 1;
                                        f[l++] = q;
                                        f[l++] = h;
                                        f.set(H.subarray(w, z + 1), l);
                                        l += h
                                    } else f[l++] = 0, f[l++] = 0
                                }
                                return f
                            },
                            convolveHorizontally: function (a, b, c, p, e, h, f) {
                                var d, g, m, r, v, u, l = 0,
                                    k = 0;
                                for (v = 0; v < e; v++) {
                                    for (u = r = 0; u < h; u++) {
                                        var q = f[r++];
                                        var t = f[r++];
                                        var w = l + 4 * q | 0;
                                        for (q = d = g = m = 0; 0 <
                                            t; t--) {
                                            var z = f[r++];
                                            0 != z && (a && (m = m + z * b[w + 3] | 0), g = g + z * b[w + 2] | 0, d = d + z * b[w + 1] | 0, q = q + z * b[w] | 0);
                                            w = w + 4 | 0
                                        }
                                        c[k + 3] = a && 4169728 > m ? m + 8192 >> 14 : 255;
                                        c[k + 2] = 4169728 > g ? g + 8192 >> 14 : 255;
                                        c[k + 1] = 4169728 > d ? d + 8192 >> 14 : 255;
                                        c[k] = 4169728 > q ? q + 8192 >> 14 : 255;
                                        k = k + 4 * e | 0
                                    }
                                    k = 4 * (v + 1) | 0;
                                    l = (v + 1) * p * 4 | 0
                                }
                            },
                            convolveVertically: function (a, b, c, p, e, h, f) {
                                var d, g, m, r, v, u, l = 0,
                                    k = 0;
                                for (v = 0; v < e; v++) {
                                    for (u = r = 0; u < h; u++) {
                                        var q = f[r++];
                                        var t = f[r++];
                                        var w = l + 4 * q | 0;
                                        for (q = d = g = m = 0; 0 < t; t--) {
                                            var z = f[r++];
                                            0 != z && (a && (m = m + z * b[w + 3] | 0), g = g + z * b[w + 2] | 0, d = d + z * b[w + 1] | 0,
                                                q = q + z * b[w] | 0);
                                            w = w + 4 | 0
                                        }
                                        c[k + 3] = a && 4169728 > m ? m + 8192 >> 14 : 255;
                                        c[k + 2] = 4169728 > g ? g + 8192 >> 14 : 255;
                                        c[k + 1] = 4169728 > d ? d + 8192 >> 14 : 255;
                                        c[k] = 4169728 > q ? q + 8192 >> 14 : 255;
                                        k = k + 4 * e | 0
                                    }
                                    k = 4 * (v + 1) | 0;
                                    l = (v + 1) * p * 4 | 0
                                }
                            },
                            resize: function (a) {
                                var b = a.width,
                                    d = a.height,
                                    c = a.toWidth,
                                    e = a.toHeight,
                                    h = a.dest || new DocuViewareEncodingUtilities.TypedArray.Uint8Array(c * e * 4),
                                    f = "undefined" === typeof a.quality ? 3 : a.quality,
                                    l = a.alpha || !1;
                                if (1 > b || 1 > d || 1 > c || 1 > e) return [];
                                var k = this.createFilters(f, b, c);
                                f = this.createFilters(f, d, e);
                                var q = new DocuViewareEncodingUtilities.TypedArray.Uint8Array(c *
                                    d * 4);
                                this.convolveHorizontally(l, a.src, q, b, d, c, k);
                                this.convolveVertically(l, q, h, d, c, e, f);
                                return h
                            }
                        }
                    },
                    Capabilities: {
                        hasWebPSupport: function () {
                            var a = document.createElement("canvas");
                            return a.getContext && a.getContext("2d") ? 0 == a.toDataURL("image/webp").indexOf("data:image/webp") : !1
                        },
                        hasTiffSupport: function () {
                            return a.isIE
                        }
                    },
                    Utilities: {
                        normalizeRotation: function (a) {
                            a %= 360;
                            0 > a && (a += 360);
                            return a
                        },
                        rgb2hex: function (a, b, c) {
                            return "#" + (16777216 + (c | b << 8 | a << 16)).toString(16).slice(1)
                        },
                        color2Hex: function (a) {
                            return "#" ===
                                a.substr(0, 1) ? a : (a = a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i)) && 4 === a.length ? "#" + ("0" + parseInt(a[1], 10).toString(16)).slice(-2) + ("0" + parseInt(a[2], 10).toString(16)).slice(-2) + ("0" + parseInt(a[3], 10).toString(16)).slice(-2) : ""
                        },
                        color2Object: function (a) {
                            "#" === a.substr(0, 1) && (a = this.hex2Rgb(a));
                            return (a = a.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i)) && 5 === a.length ? {
                                r: parseInt(a[1]),
                                g: parseInt(a[2]),
                                b: parseInt(a[3]),
                                a: a[4] ?
                                    parseFloat(a[4]) : 1
                            } : null
                        },
                        hex2Rgb: function (a) {
                            return "#" !== a.substr(0, 1) ? "" : "rgb(" + (a >> 16) + "," + (a >> 8 & 255) + "," + (a & 255) + ")"
                        },
                        roundEx: function (a, b) {
                            b = Math.pow(10, b);
                            return Math.round(a * b) / b
                        },
                        pageRangeChecker: function (a, b) {
                            if ("" != b && "*" != b) {
                                b = b.split(";");
                                var d = /([0-9])/,
                                    g;
                                for (g in b) {
                                    var c = b[g].split("-");
                                    if (2 >= c.length)
                                        for (var e in c) {
                                            if (1 != d.test(c[e]) || 0 == parseInt(c[e]) || parseInt(c[e]) > a) return !1
                                        } else return !1
                                }
                            }
                            return !0
                        },
                        pageRangeToArrayConverter: function (b) {
                            var d = a.serverCtx.pageCount,
                                c = (b + "").replace(/\s+/g,
                                    ""),
                                p = [];
                            if ("*" == b || "" == b) {
                                for (c = 1; c <= d; c++) p.push(c);
                                return p
                            }
                            b = -1 != b.indexOf(";") ? ";" : ",";
                            c = c.split(b);
                            for (b = 0; b < c.length; b++) {
                                var e = c[b].split("-");
                                if (1 === e.length) p.push(parseInt(e[0], 10));
                                else if (2 === e.length) {
                                    var h = parseInt(e[0], 10);
                                    e = parseInt(e[1], 10);
                                    if (!(e < h))
                                        for (; h <= e; h++) p.push(h)
                                }
                            }
                            return p = p.filter(function (a, b, g) {
                                return g.indexOf(a) === b && 0 < a && a <= d
                            }).sort(function (a, b) {
                                return a - b
                            })
                        }
                    },
                    Thumbnails: {
                        lastUpdatedPageThumbnail: -1,
                        selectedItems: [],
                        THUMBNAIL_SHADOW_OFFSET: 3,
                        THUMBNAIL_SHADOW_BLUR: 6,
                        THUMBNAIL_SHADOW_COLOR: "gray",
                        getThumbnailPage: function (a) {
                            if (null != a) {
                                var b = a.getAttribute("data-pageNo");
                                if (b) return parseInt(b);
                                if (null != a.parentNode && a.parentNode.getAttribute("data-pageNo")) return parseInt(a.parentNode.getAttribute("data-pageNo"))
                            }
                            return 0
                        },
                        setThumbnailPageDest: function (a, b) {
                            return null != a ? (a.setAttribute("data-pageNo", b.toString()), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                        },
                        setThumbnailText: function (a, b) {
                            return null != a ? (a.children[1].innerHTML = "<p align=center style='margin: 0 0 0 0;'><font size='-3'>" +
                                b + "</font></p>", DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                        },
                        getThumbnailFromPageNo: function (b) {
                            b = dvJQuery(a.dom.thumbnailArea).children("[data-pageNo=" + b + "]");
                            return 0 < b.length ? b : null
                        },
                        getThumbnailAt: function (b, g) {
                            for (var d = a.dom.thumbnailArea.childElementCount, c = !1, e = 0; e < d; e++) {
                                var h = a.dom.thumbnailArea.children[e];
                                if (0 != a.Internal.Thumbnails.getThumbnailPage(h)) {
                                    var f = dvJQuery(h).position().top;
                                    if (f + dvJQuery(h).innerHeight() >= g && f <= g) {
                                        f = dvJQuery(h).position().left;
                                        if (f + dvJQuery(h).innerWidth() >=
                                            b && f <= b) return h;
                                        c |= 1
                                    } else if (c) break
                                }
                            }
                            return null
                        },
                        createThumbnail: function (b) {
                            var d = document.createElement("div");
                            a.Internal.Thumbnails.setThumbnailPageDest(d, b);
                            d.setAttribute("data-loaded", "false");
                            d.setAttribute("data-loading", "false");
                            d.setAttribute("data-moving", "false");
                            d.onmouseover = a.events.onThumbnailItemMouseOverHandler;
                            d.onmouseout = a.events.onThumbnailItemMouseOutHandler;
                            d.onclick = a.events.onThumbnailItemClickHandler;
                            var c = document.createElement("canvas");
                            c.className = "spinner-thumb";
                            c.width = a.dom.UIconfig.thumbnailWidth * DocuViewareUtilities.getDevicePixelRatio() + 2 * this.THUMBNAIL_SHADOW_OFFSET;
                            c.height = a.dom.UIconfig.thumbnailHeight * DocuViewareUtilities.getDevicePixelRatio() + 2 * this.THUMBNAIL_SHADOW_OFFSET;
                            c.style.width = a.dom.UIconfig.thumbnailWidth + 2 * this.THUMBNAIL_SHADOW_OFFSET + "px";
                            c.style.height = a.dom.UIconfig.thumbnailHeight + 2 * this.THUMBNAIL_SHADOW_OFFSET + "px";
                            d.appendChild(c);
                            c = document.createElement("div");
                            c.style.position = "relative";
                            d.appendChild(c);
                            a.Internal.Thumbnails.setThumbnailText(d,
                                b.toString());
                            return d
                        },
                        getSelectedThumbnails: function (b) {
                            var d = a.Internal.Thumbnails.selectedItems.slice();
                            b && d.sort(function (a, b) {
                                return a - b
                            });
                            return d
                        },
                        setThumbnailSelected: function (a, b) {
                            return b ? this.selectThumbnail(a) : this.unselectThumbnail(a)
                        },
                        selectThumbnail: function (b) {
                            if (1 > b || b > a.GetPageCount()) return DocuViewareAPI.Status.GenericError; - 1 == this.selectedItems.indexOf(b) && (this.selectedItems.push(b), a.dom.updateThumbStyle(b));
                            return DocuViewareAPI.Status.OK
                        },
                        unselectThumbnail: function (b) {
                            if (1 >
                                b || b > a.GetPageCount()) return DocuViewareAPI.Status.GenericError;
                            this.selectedItems && -1 < this.selectedItems.indexOf(b) && (this.selectedItems.splice(this.selectedItems.indexOf(b), 1), a.dom.updateThumbStyle(b));
                            return DocuViewareAPI.Status.OK
                        },
                        isThumbnailSelected: function (a) {
                            return this.selectedItems ? -1 < this.selectedItems.indexOf(a) : !1
                        },
                        toggleThumbnailSelection: function (b) {
                            return 1 > b || b > a.GetPageCount() ? DocuViewareAPI.Status.GenericError : this.isThumbnailSelected(b) ? this.unselectThumbnail(b) : this.selectThumbnail(b)
                        },
                        reinitThumbnailsSelection: function () {
                            var b = this.selectedItems;
                            this.selectedItems = [];
                            if (0 != b.length)
                                for (var g = 0; g < b.length; g++) a.dom.updateThumbStyle(b[g])
                        },
                        reinitThumbnails: function () {
                            a.Internal.Thumbnails.reinitThumbnailsSelection();
                            for (var b = a.dom.thumbnailArea.childElementCount, g = 0; g < b; g++) {
                                var c = a.dom.thumbnailArea.children[g];
                                a.Internal.Thumbnails.setThumbnailPageDest(c, g + 1);
                                a.Internal.Thumbnails.setThumbnailText(c, (g + 1).toString())
                            }
                        },
                        removeAllThumbnails: function () {
                            this.selectedItems = [];
                            if (a.dom.thumbnailArea)
                                for (; a.dom.thumbnailArea.hasChildNodes();) a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)
                        }
                    },
                    Files: {
                        MAX_UPLOAD_THREADS: 5,
                        uploadThreads: 0,
                        uploadState: 0,
                        uploading: !1,
                        uploadChunks: 0,
                        uploadFile: function (b, g) {
                            var d = b.size;
                            if (0 != d)
                                if (a.dom.maxUploadSize < d) {
                                    b = alert;
                                    g = a.Localize("error__upload_max_size");
                                    d = a.dom.maxUploadSize;
                                    var c = 1099511627776;
                                    d = 0 <= d && 1024 > d ? d + " B" : 1024 <= d && 1048576 > d ? (d / 1024).toFixed(2) + " KB" : 1048576 <= d && 1073741824 > d ? (d / 1048576).toFixed(2) + " MB" : 1073741824 <= d && d < c ? (d / 1073741824).toFixed(2) + " GB" : d >= c ? (d / c).toFixed(2) + " TB" : d + " B";
                                    b(g + d + ".")
                                } else {
                                    c = [];
                                    for (var e = 0, h = 0, f = a.dom.packetSize >
                                        d ? d : a.dom.packetSize; h < d;) e++ , c.push(b.slice(h, f)), h = f, f = h + a.dom.packetSize;
                                    h = 0;
                                    f = Date.now();
                                    for (a.debug && console.log("DocuVieware: uploadFile::creating packets"); h < e;) this.uploadChunk(f, b.name, c[h], e, h + 1, d, g), h++;
                                    a.debug && console.log("DocuVieware: uploadFile::" + e + " packets generated")
                                }
                        },
                        uploadChunk: function (b, g, c, p, e, h, f) {
                            function d(b, d) {
                                dvJQuery(a.dom.mainSpinner).show();
                                a.ajax.transferID = b;
                                a.Internal.Files.uploading = !0;
                                a.Internal.Files.uploadState = 0;
                                a.Internal.Files.uploadThreads = 0;
                                a.Internal.Files.uploadChunks =
                                    d;
                                a.dom.progressbar.go(0);
                                b = dvJQuery(a.dom.mainSpinnerContent);
                                b.children(b.children.length - 1).text(a.Localize("label__loading_progress"))
                            }
                            a.ajax.transferID != b && d(b, p);
                            if (1 == a.Internal.Files.uploading)
                                if (a.Internal.Files.uploadThreads >= a.Internal.Files.MAX_UPLOAD_THREADS) setTimeout(function () {
                                    a.Internal.Files.uploadChunk(b, g, c, p, e, h, f)
                                }, 10);
                                else {
                                    a.Internal.Files.uploadThreads++;
                                    var m = new FileReader;
                                    if (null == m.readAsBinaryString)
                                        if (a.isIE11) {
                                            m = URL.createObjectURL(c);
                                            var r = new XMLHttpRequest;
                                            r.open("get",
                                                m, !0);
                                            r.responseType = "arraybuffer";
                                            r.onload = function () {
                                                if (200 == this.status) {
                                                    for (var d = new Uint8Array(this.response), c = d.length, m = Array(c); c--;) m[c] = String.fromCharCode(d[c]);
                                                    d = window.btoa(m.join(""));
                                                    a.Internal.Files.transferChunk(b, g, d, p, e, h, f)
                                                }
                                            };
                                            r.send()
                                        } else m.onload = function (d) {
                                            d = new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);
                                            d = DocuViewareEncodingUtilities.base64.encode(function (a) {
                                                for (var b = a.length, d = Array(b); b--;) d[b] = String.fromCharCode(a[b]);
                                                return d.join("")
                                            }(d));
                                            a.Internal.Files.transferChunk(b,
                                                g, d, p, e, h, f)
                                        }, m.readAsArrayBuffer(c);
                                    else m.onload = function (d) {
                                        d = DocuViewareEncodingUtilities.base64.encode(d.target.result);
                                        a.Internal.Files.transferChunk(b, g, d, p, e, h, f)
                                    }, m.readAsBinaryString(c)
                                }
                        },
                        transferChunk: function (b, g, c, p, e, h, f, l) {
                            function d(b) {
                                a.Internal.Files.uploading = !1;
                                a.dom.progressbar.go(100);
                                dvJQuery(a.dom.mainSpinner).hide();
                                if (b) {
                                    if (a.callbacks.onFileOpenSuccess) a.callbacks.onFileOpenSuccess()
                                } else if (a.callbacks.onFileOpenError) a.callbacks.onFileOpenError()
                            }
                            b = JSON.stringify({
                                transferID: a.ajax.transferID,
                                sessionID: a.ajax.sessionID,
                                appendMode: f,
                                fileName: g,
                                fileSize: h,
                                data: c,
                                chunkCount: p,
                                chunkID: e,
                                password: l
                            });
                            var m = {
                                url: a.appControllerPath + "/loadfromfile" + (a.useIdInRoot ? "/1" : ""),
                                data: b,
                                async: !0,
                                beforeSend: function () {
                                    return a.Internal.Files.uploading
                                },
                                success: function (b) {
                                    a.Internal.Files.uploadThreads--;
                                    if (a.Internal.Files.uploading)
                                        if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK)
                                            if (b.isTransfering) {
                                                a.Internal.Files.uploadState += 100 / a.Internal.Files.uploadChunks;
                                                a.dom.progressbar.go(a.Internal.Files.uploadState);
                                                b = dvJQuery(a.dom.mainSpinnerContent);
                                                var g = parseFloat(Math.round(100 * a.Internal.Files.uploadState) / 100).toFixed(2);
                                                b.children(b.children.length - 1).text(a.Localize("label__loading_progress") + " (" + g + "%)")
                                            } else d(!0), a.ajax.SetNewServerCtx(b);
                                        else b && b.status != DocuViewareAPI.Status.OK && null != b.responseType && "DocuVieware" === b.responseType && b.allowRetry ? (console.log("DocuVieware: Failed to upload packet: " + e.toString() + ". Retrying..."), a.ajax.PostAjaxRequestForDocuViewareAction(m)) : (d(!1), a.ajax.HandleError(b))
                                },
                                error: function (b) {
                                    a.ajax.HandleError(b);
                                    d(!1);
                                    a.Internal.Files.uploadThreads--
                                }
                            };
                            a.ajax.PostAjaxRequestForDocuViewareAction(m)
                        }
                    },
                    Print: {
                        MAX_PRINTING_THREADS: 3,
                        printThreads: 0,
                        isPrinting: !1,
                        printPages: function (b, g, c, p, e, h) {
                            if (a.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                            a.isIE && a.IsFullScreenMode() && a.ToggleFullscreen();
                            if (g && !a.Internal.Utilities.pageRangeChecker(a.GetPageCount(), g)) return a.DisplayError(a.Localize("error__invalid_page_range")), DocuViewareAPI.Status.GenericError;
                            if ("0" == c)
                                if (a.Internal.Utilities.pageRangeToArrayConverter(g)) {
                                    c = function () {
                                        a.Internal.Print.isPrinting = !1;
                                        h && h()
                                    };
                                    var d = function (b, d) {
                                        if (a.Internal.Print.isPrinting && (r[b - 1] = d, f++ , p && p(f, m.length), f == m.length)) {
                                            var g = document.createElement("iframe");
                                            document.body.appendChild(g);
                                            g.contentWindow.document.open();
                                            g.contentWindow.document.write("<!doctype html>");
                                            a.isFirefox ? g.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>" + a.serverCtx.fileName + "</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>") :
                                                g.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>" + a.serverCtx.fileName + "</title><style media='print'>@page{size:auto;margin:10mm;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");
                                            for (b = 0; b < f; b++) 0 < b && g.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"), g.contentWindow.document.write(r[m[b] -
                                                1]), "function" == typeof CollectGarbage && CollectGarbage();
                                            g.contentWindow.document.write("</body></html>");
                                            g.contentWindow.document.close();
                                            setTimeout(function () {
                                                document.body.removeChild(g)
                                            }, 6E3);
                                            a.Internal.Print.isPrinting = !1;
                                            e && e();
                                            if (a.callbacks.onDocumentPrinted) a.callbacks.onDocumentPrinted()
                                        }
                                    },
                                        m = a.Internal.Utilities.pageRangeToArrayConverter(g),
                                        r = [],
                                        f = 0;
                                    a.Internal.Print.isPrinting = !0;
                                    for (g = 0; g < m.length; g++) this.getPageForPrint(b, m[g], m.length, d, c)
                                } else return DocuViewareAPI.Status.GenericError;
                            else if (window.open(a.appControllerPath + "/print" + (a.useIdInRoot ? "/1" : "") + "?sessionID=" + a.ajax.sessionID + "&pageRange=" + (g ? g : "*") + "&printAnnotations=" + b, "_blank"), e && e(), a.callbacks.onDocumentPrinted) a.callbacks.onDocumentPrinted();
                            return DocuViewareAPI.Status.OK
                        },
                        getPageForPrint: function (b, g, c, p, e) {
                            1 == a.Internal.Print.isPrinting && (a.Internal.Print.printThreads >= a.Internal.Print.MAX_PRINTING_THREADS ? setTimeout(function () {
                                a.Internal.Print.getPageForPrint(b, g, c, p, e)
                            }, 10) : (a.Internal.Print.printThreads++ ,
                                a.ajax.requestNo += 1, a.ajax.PostAjaxRequestForDocuViewareAction({
                                    url: a.appControllerPath + "/print" + (a.useIdInRoot ? "/1" : ""),
                                    async: !0,
                                    data: JSON.stringify({
                                        sessionID: a.ajax.sessionID,
                                        contextID: a.ajax.contextID,
                                        entries: [g],
                                        requestNo: a.ajax.requestNo,
                                        printAnnotations: b,
                                        isIE: a.isIE,
                                        pageCount: c
                                    }),
                                    success: function (b) {
                                        if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK && b.contextID == a.ajax.contextID)
                                            for (var d = 0; d < b.images.length; d++) {
                                                var g = null;
                                                if (b.images[d].getFromCache) {
                                                    var c =
                                                        a.cache.getPageObject(b.images[d].pageNo);
                                                    c && (g = c.bitmap, g.style.display = "block", g.style.maxWidth = "99.5%", g.style.maxHeight = "99.5%", g.style.margin = "0 auto", g.style.padding = "0", g.style.height = "auto", g.style.width = "auto", g = g.outerHTML)
                                                } else b.images[d].mime && b.images[d].data && (g = "<img src='data:" + b.images[d].mime + ";base64," + b.images[d].data + "' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>", b.images[d].setInCache && a.cache.cachePageBitmap(b.images[d].pageNo,
                                                    b.images[d].mime, b.images[d].data, b.images[d].scale, b.images[d].hasTransparency));
                                                p && p(b.images[d].pageNo, g)
                                            }
                                        "function" == typeof CollectGarbage && CollectGarbage()
                                    },
                                    error: function (b) {
                                        a.ajax.HandleError(b);
                                        e && e()
                                    },
                                    complete: function (b) {
                                        a.Internal.Print.printThreads--
                                    }
                                })))
                        }
                    },
                    Selection: {
                        getSelectionAreaCoordinates: function () {
                            var b = {
                                left: 0,
                                top: 0,
                                width: 0,
                                height: 0
                            };
                            if ((3 == a.events.mouseMode || 4 == a.events.mouseMode) && 0 < dvJQuery(a.dom.rselect).width() && dvJQuery(a.dom.rselect).height()) {
                                var g = a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
                                    c = a.dom.viewerArea.getBoundingClientRect(),
                                    e = a.dom.rselect.getBoundingClientRect();
                                c = {
                                    left: e.left - c.left - g.pageLeft + a.Internal.Coordinates.getViewerScrollLeft(),
                                    top: e.top - c.top - g.pageTop + a.Internal.Coordinates.getViewerScrollTop(),
                                    width: dvJQuery(a.dom.rselect).width(),
                                    height: dvJQuery(a.dom.rselect).height()
                                };
                                g = a.Internal.Matrix.scale(a.Internal.Matrix.invert(g.contentMatrix), 1 / 96, 1 / 96, !1);
                                a.Internal.Matrix.transformBBox(g, 0, c);
                                b.left = a.Internal.Utilities.roundEx(c.left, 7);
                                b.top = a.Internal.Utilities.roundEx(c.top,
                                    7);
                                b.width = a.Internal.Utilities.roundEx(c.width, 7);
                                b.height = a.Internal.Utilities.roundEx(c.height, 7)
                            }
                            return b
                        },
                        setSelectionAreaCoordinates: function (b) {
                            if (!a.serverCtx.documentLoaded || "object" !== typeof b || !b.left && 0 != b.left || !b.top && 0 != b.top || !b.width || !b.height) return DocuViewareAPI.Status.GenericError;
                            var d = a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
                                c = a.Internal.Matrix.scale(d.contentMatrix, 96, 96, !1);
                            a.Internal.Matrix.transformBBox(c, 0, b);
                            c = b.left + d.pageLeft;
                            var e = b.top + d.pageTop,
                                r = b.width;
                            b = b.height;
                            if (c < d.pageLeft || c + r > d.pageLeft + d.pageWidth || e < d.pageTop || e + b > d.pageTop + d.pageHeight) return DocuViewareAPI.Status.GenericError;
                            3 != a.events.mouseMode && 4 != a.events.mouseMode && a.SetMouseMode(3);
                            this.selectionArea.startNewSelectionBox(c, e, !0);
                            a.dom.rselect.style.height = b + "px";
                            a.dom.rselect.style.width = r + "px";
                            a.dom.rselect.height = b;
                            a.dom.rselect.width = r;
                            this.selectionArea.show();
                            return DocuViewareAPI.Status.OK
                        },
                        clearSelectionArea: function () {
                            this.selectionArea.reset()
                        },
                        selectionArea: {
                            isMoving: !1,
                            isSelected: !1,
                            isOver: !1,
                            resizingMode: -1,
                            lineMode: 0,
                            startX: 0,
                            startY: 0,
                            antOffset: 0,
                            dashList: [4, 4, 4, 4],
                            dashLength: 0,
                            init: function (b) {
                                a.dom.rselect = document.createElement("canvas");
                                a.dom.rselect.style.zIndex = 16777271;
                                a.dom.rselect.style.display = "block";
                                a.dom.rselect.style.position = "absolute";
                                a.dom.rselect.style.height = "0px";
                                a.dom.rselect.style.width = "0px";
                                a.dom.rselect.style.left = "0px";
                                a.dom.rselect.style.top = "0px";
                                a.dom.rselect.style.padding = "0px";
                                a.dom.rselect.style.margin = "0px";
                                a.dom.rselect.style.visibility =
                                    "hidden";
                                a.dom.rselect.onmouseup = function (b) {
                                    return a.Internal.Selection.selectionArea.mouseUp(b)
                                };
                                a.dom.rselect.onmousedown = function (b, d) {
                                    return a.Internal.Selection.selectionArea.mouseDown(b, d)
                                };
                                a.dom.rselect.onmouseenter = function (b, d) {
                                    return a.Internal.Selection.selectionArea.mouseEnter(b, d)
                                };
                                a.dom.rselect.onmousemove = function (b, d) {
                                    return a.Internal.Selection.selectionArea.mouseMove(b, d)
                                };
                                a.dom.rselect.onmouseleave = function (b, d) {
                                    return a.Internal.Selection.selectionArea.mouseLeave(b, d)
                                };
                                b.appendChild(a.dom.rselect)
                            },
                            reset: function () {
                                if (3 == a.events.mouseMode || 4 == a.events.mouseMode) this.isOver = this.isSelected = this.isMoving = !1, this.resizingMode = -1, a.dom.rselect.style.height = "0px", a.dom.rselect.style.width = "0px", a.dom.rselect.height = 0, a.dom.rselect.width = 0, this.hide()
                            },
                            show: function () {
                                a.dom.rselect && (a.dom.rselect.style.visibility = "visible")
                            },
                            hide: function () {
                                a.dom.rselect && (a.dom.rselect.style.visibility = "hidden")
                            },
                            getCornerHitTest: function (a, b, c, e) {
                                return a >= c.left - e && a <= c.left + e && b >= c.top - e && b <= c.top + e ? 0 : a >= c.right -
                                    e && a <= c.right + e && b >= c.top - e && b <= c.top + e ? 1 : a >= c.right - e && a <= c.right + e && b <= c.bottom + e && b >= c.bottom - e ? 2 : a >= c.left - e && a <= c.left + e && b <= c.bottom + e && b >= c.bottom - e ? 3 : a >= c.left - e && a <= c.left + e ? 4 : b >= c.top - e && b <= c.top + e ? 5 : a >= c.right - e && a <= c.right + e ? 6 : b <= c.bottom + e && b >= c.bottom - e ? 7 : -1
                            },
                            getGripSize: function (a) {
                                return 6 * (a ? 3 : 1)
                            },
                            getStartPosition: function () {
                                var b = a.Internal.Pages.getRenderingState(a.GetCurrentPage());
                                return {
                                    x: this.startX - b.pageLeft,
                                    y: this.startY - b.pageTop
                                }
                            },
                            getPageBounds: function () {
                                var b = a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
                                    g = a.dom.viewerArea.getBoundingClientRect(),
                                    c = a.dom.rselect.getBoundingClientRect();
                                return {
                                    left: c.left - g.left - b.pageLeft + a.Internal.Coordinates.getViewerScrollLeft(),
                                    top: c.top - g.top - b.pageTop + a.Internal.Coordinates.getViewerScrollTop(),
                                    width: c.width,
                                    height: c.height
                                }
                            },
                            setCursor: function (b) {
                                if (this.isSelected && this.isOver || this.isSelected && this.isMoving) {
                                    if (this.isMoving) b = this.resizingMode;
                                    else {
                                        b = this.getGripSize(b);
                                        var d = a.dom.rselect.getBoundingClientRect();
                                        b = this.getCornerHitTest(a.events.mouseX,
                                            a.events.mouseY, d, b)
                                    }
                                    switch (b) {
                                        case 0:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");
                                            break;
                                        case 1:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");
                                            break;
                                        case 2:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");
                                            break;
                                        case 3:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");
                                            break;
                                        case 4:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");
                                            break;
                                        case 5:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");
                                            break;
                                        case 6:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");
                                            break;
                                        case 7:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");
                                            break;
                                        default:
                                            a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")
                                    }
                                } else this.isOver && !this.isDrawing ? a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll") : a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")
                            },
                            setSelectionRectangleStyle: function (b) {
                                a.dom.rselect && (b ? (a.dom.rselect.style.backgroundColor = a.dom.UIconfig.activeSelectedBackgroundColor, a.dom.rselect.style.borderStyle = "none", a.dom.rselect.style.borderWidth = "0px") : (a.dom.rselect.style.backgroundColor = "rgba(0,0,255,0.2)", a.dom.rselect.style.borderStyle =
                                    "solid", a.dom.rselect.style.borderColor = "red", a.dom.rselect.style.borderWidth = "1px"))
                            },
                            setLineMode: function (a) {
                                this.lineMode = a
                            },
                            startNewAnnotBox: function (b, g) {
                                this.stopDrawingAnts();
                                this.startX = b;
                                this.startY = g;
                                a.dom.rselect.style.left = b + "px";
                                a.dom.rselect.style.top = g + "px";
                                a.dom.rselect.style.height = "1px";
                                a.dom.rselect.style.width = "1px";
                                a.dom.rselect.height = dvJQuery(a.dom.rselect).height();
                                a.dom.rselect.width = dvJQuery(a.dom.rselect).width();
                                a.dom.rselect.getContext("2d").clearRect(0, 0, a.dom.rselect.width,
                                    a.dom.rselect.height);
                                this.show();
                                this.isDrawing = !0
                            },
                            startNewSelectionBox: function (b, g, c) {
                                this.stopDrawingAnts();
                                this.isSelected = !1;
                                this.startX = b;
                                this.startY = g;
                                a.dom.rselect.style.left = b + "px";
                                a.dom.rselect.style.top = g + "px";
                                a.dom.rselect.style.height = "0px";
                                a.dom.rselect.style.width = "0px";
                                //AGjs__changes when we select new area previous area contextmenu hided by the following line
                                dvJQuery(allPdfComp.dom.annotationsActionButtons).find("div").hide(); dvJQuery(allPdfComp.dom.annotationsActionButtons).hide();
                                a.dom.rselect.height = dvJQuery(a.dom.rselect).height();
                                a.dom.rselect.width = dvJQuery(a.dom.rselect).width();
                                a.dom.rselect.getContext("2d").clearRect(0, 0, a.dom.rselect.width, a.dom.rselect.height);
                                for (b = this.dashLength =
                                    this.antOffset = 0; b < this.dashList.length; b++) this.dashLength += this.dashList[b];
                                this.drawingAnts();
                                c || (this.isDrawing = !0)
                            },
                            drawingAnts: function () {
                                a.Internal.Selection.selectionArea.antOffset++;
                                a.Internal.Selection.selectionArea.antOffset > a.Internal.Selection.selectionArea.dashLength && (a.Internal.Selection.selectionArea.antOffset = 0);
                                a.Internal.Selection.selectionArea.draw();
                                a.Internal.Selection.selectionArea.drawingAntsOn = setTimeout(a.Internal.Selection.selectionArea.drawingAnts, 20)
                            },
                            stopDrawingAnts: function () {
                                this.drawingAntsOn &&
                                    (clearTimeout(this.drawingAntsOn), this.drawingAntsOn = null)
                            },
                            draw: function () {
                                if (3 == a.events.mouseMode || 4 == a.events.mouseMode) {
                                    var b = a.dom.rselect.getContext("2d");
                                    b.clearRect(0, 0, a.dom.rselect.width, a.dom.rselect.height);
                                    b.lineWidth = "1";
                                    b.strokeStyle = a.dom.UIconfig.activeSelectedColor;
                                    b.setLineDash ? (b.setLineDash(this.dashList), b.lineDashOffset = -this.antOffset, b.strokeRect(0, 0, a.dom.rselect.width, a.dom.rselect.height)) : (b.beginPath(), this.drawDashedLine(b, 0, 0, a.dom.rselect.width, 0, this.dashList, this.antOffset),
                                        this.drawDashedLine(b, a.dom.rselect.width, 0, a.dom.rselect.width, a.dom.rselect.height, this.dashList, this.antOffset), this.drawDashedLine(b, a.dom.rselect.width, a.dom.rselect.height, 0, a.dom.rselect.height, this.dashList, this.antOffset), this.drawDashedLine(b, 0, a.dom.rselect.height, 0, 0, this.dashList, this.antOffset), b.closePath(), b.stroke())
                                }
                            },
                            drawDashedLine: function (a, b, c, e, r, h, f) {
                                var d = h.length,
                                    g = 0;
                                for (R = 0; R < d; R++) g += parseInt(h[R]);
                                e -= b;
                                r -= c;
                                var m = e ? r / e : 1E15;
                                f = g * (1 - f / g);
                                f = Math.sqrt(f * f / (1 + m * m));
                                if (0 > e ||
                                    0 > r) f = -f;
                                b -= f;
                                e += f;
                                c -= m * f;
                                r += m * f;
                                a.moveTo(b, c);
                                f = Math.sqrt(e * e + r * r);
                                g = 0;
                                for (var p = !0; .1 <= f;) {
                                    var v = h[g++ % d];
                                    v > f && (v = f);
                                    var u = Math.sqrt(v * v / (1 + m * m));
                                    if (0 > e || 0 > r) u = -u;
                                    b += u;
                                    c += m * u;
                                    a[p ? "lineTo" : "moveTo"](b, c);
                                    f -= v;
                                    p = !p
                                }
                            },
                            mouseUp: function (b)
                            {
                                //AGjschanges
                                return new Promise((resolve, reject) => {
                                    if (a.events.mouseMode === 1 && a.Internal.Annotations.currentAnnotProperties.type === 8 &&
                                        a.Internal.Annotations.selected.length === 0) {
                                        getTextForPredict(a, resolve, reject)
                                    }
                                    else {
                                        resolve();
                                    }
                                }).then((result) =>
                                {
                                var currentType = (a.Internal.Annotations.currentAnnotProperties != null) ? a.Internal.Annotations.currentAnnotProperties.type : null;
                                var propps = a.Internal.Annotations.currentAnnotProperties;
                                if (PasteWithCtrlKey) return this.isDrawing = !1, this.hide();
                                if (1 == a.events.mouseMode && this.isDrawing) return this.isDrawing = !1, this.hide(),
                                    //if type == 6 and squaredBox true means small circle no need to ask pop up like other annotation 
                                    (propps.type == 6 && propps.squaredBox && !propps.copyannot) ? a.Internal.Annotations.addCustomCircleWithLine(propps) :
                                        //if we doing copy annot  means no need to ask pop up like other annotation directle we can call addAnnotInteractive() function
                                        (propps.copyannot) ? a.Internal.Annotations.addMultipleAnnotInteractive() :
                                            (currentType == 8 || currentType == 3 || currentType == 6 || currentType == 1) ?
                                                (a.Internal.Annotations.showAnnotationPropertiesUI(a.Internal.Annotations.currentAnnotProperties, null, null, customSelection), addAutoComplete()) :
                                                a.Internal.Annotations.addAnnotInteractive(), !0;
                                if (4 == a.events.mouseMode && this.isDrawing) return b = a.GetSelectionAreaCoordinates(), this.reset(), this.isDrawing = !1, a.ZoomRect(b), !0;
                                    if (3 == a.events.mouseMode && this.isDrawing)
                                    {
                                    this.isDrawing = !1;
                                    if (0 == dvJQuery(a.dom.rselect).width() && 0 == dvJQuery(a.dom.rselect).height()) this.hide();
                                    else if (this.isSelected = !0, a.callbacks.onAreaSelected) a.callbacks.onAreaSelected();
                                    return !0
                                }
                                    return 3 == a.events.mouseMode && this.isMoving ? (this.isMoving = !1, 0 == dvJQuery(a.dom.rselect).width() && 0 == dvJQuery(a.dom.rselect).height() &&
                                        this.hide(), -1 != this.resizingMode && (this.resizingMode = -1, this.setCursor()), !0) : !1;
                                }).catch(e => {
                                    console.log(e);
                                });
                               
                            },
                            mouseDown: function (b, g) {
                                a.events.mouseX = b.clientX;
                                a.events.mouseY = b.clientY;
                                a.events.mouseDownClientX = b.clientX;
                                a.events.mouseDownClientY = b.clientY;
                                this.isSelected = this.isMoving = !0;
                                g = this.getGripSize(g);
                                var d = a.dom.rselect.getBoundingClientRect();
                                this.resizingMode = this.getCornerHitTest(b.clientX, b.clientY, d, g);
                                b.stopImmediatePropagation();
                                b.preventDefault();
                                return !1
                            },
                            mouseMove: function (b, g) {
                                this.setCursor(g);
                                if (1 ==
                                    a.events.mouseMode) {
                                    var d = a.dom.viewerArea.getBoundingClientRect();
                                    g = b.clientX - a.events.mouseDownX + a.Internal.Coordinates.getViewerScrollLeft();
                                    var c = b.clientY - a.events.mouseDownY + a.Internal.Coordinates.getViewerScrollTop();
                                    a.dom.rselect.style.width = Math.abs(g) + "px";
                                    a.dom.rselect.style.height = Math.abs(c) + "px";
                                    a.dom.rselect.width = Math.abs(g);
                                    a.dom.rselect.height = Math.abs(c);
                                    a.dom.rselect.style.left = 0 > g ? b.clientX - d.left + a.Internal.Coordinates.getViewerScrollLeft() + "px" : a.events.mouseDownX - d.left + "px";
                                    a.dom.rselect.style.top = 0 > c ? b.clientY - d.top + a.Internal.Coordinates.getViewerScrollTop() + "px" : a.events.mouseDownY - d.top + "px";
                                    1 == this.lineMode && (b = a.dom.rselect.getContext("2d"), b.lineWidth = 96 * a.Internal.Annotations.currentAnnotProperties.borderWidth * a.GetCurrentZoom(), b.strokeStyle = a.Internal.Annotations.currentAnnotProperties.strokeColor, b.clearRect(0, 0, a.dom.rselect.width, a.dom.rselect.height), b.beginPath(), b.moveTo(0 < g ? 0 : a.dom.rselect.width, 0 < c ? 0 : a.dom.rselect.height), b.lineTo(0 > g ? 0 : a.dom.rselect.width,
                                        0 > c ? 0 : a.dom.rselect.height), b.stroke());
                                    return !0
                                }
                                if ((3 == a.events.mouseMode || 4 == a.events.mouseMode) && this.isDrawing) {
                                    d = a.dom.viewerArea.getBoundingClientRect();
                                    var e = b.pageX - d.left + a.Internal.Coordinates.getViewerScrollLeft(),
                                        f = b.pageY - d.top + a.Internal.Coordinates.getViewerScrollTop(),
                                        h = this.startX,
                                        l = this.startY + a.Internal.Coordinates.getViewerScrollTop(),
                                        k = a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
                                        q = null;
                                    h >= k.pageLeft && h <= k.pageLeft + k.pageWidth ? q = this.startX + d.left : h < k.pageLeft ? q = d.left +
                                        k.pageLeft : h > k.pageLeft + k.pageWidth && (q = d.left + k.pageLeft + k.pageWidth);
                                    var t = null;
                                    l >= a.Internal.Coordinates.getViewerScrollTop() + k.pageTop && l <= a.Internal.Coordinates.getViewerScrollTop() + k.pageTop + k.pageHeight ? t = this.startY + d.top : l < a.Internal.Coordinates.getViewerScrollTop() + k.pageTop ? t = d.top + k.pageTop : l > a.Internal.Coordinates.getViewerScrollTop() + k.pageTop + k.pageHeight && (t = d.top + k.pageTop + k.pageHeight);
                                    q && t && (g = b.clientX - q + a.Internal.Coordinates.getViewerScrollLeft(), c = b.clientY - t + a.Internal.Coordinates.getViewerScrollTop(),
                                        e <= k.pageLeft + k.pageWidth ? a.dom.rselect.style.width = e >= k.pageLeft ? Math.abs(g) + "px" : dvJQuery(a.dom.rselect).position().left + dvJQuery(a.dom.rselect).width() - k.pageLeft + "px" : h <= a.Internal.Coordinates.getViewerScrollLeft() + k.pageLeft + k.pageWidth ? a.dom.rselect.style.width = k.pageLeft + k.pageWidth - dvJQuery(a.dom.rselect).position().left + "px" : a.dom.rselect.style.width = "0px", f <= k.pageTop + k.pageHeight ? a.dom.rselect.style.height = f >= k.pageTop ? Math.abs(c) + "px" : dvJQuery(a.dom.rselect).position().top + dvJQuery(a.dom.rselect).height() -
                                            k.pageTop + "px" : l <= a.Internal.Coordinates.getViewerScrollTop() + k.pageTop + k.pageHeight ? a.dom.rselect.style.height = k.pageTop + k.pageHeight - dvJQuery(a.dom.rselect).position().top + "px" : a.dom.rselect.style.height = "0px", a.dom.rselect.style.left = 0 > g ? e >= k.pageLeft ? b.clientX - d.left + a.Internal.Coordinates.getViewerScrollLeft() + "px" : k.pageLeft + "px" : q - d.left + "px", a.dom.rselect.style.top = 0 > c ? f >= k.pageTop ? b.clientY - d.top + a.Internal.Coordinates.getViewerScrollTop() + "px" : k.pageTop + "px" : t - d.top + "px");
                                    a.dom.rselect.width =
                                        dvJQuery(a.dom.rselect).width();
                                    a.dom.rselect.height = dvJQuery(a.dom.rselect).height();
                                    0 < dvJQuery(a.dom.rselect).width() && 0 < dvJQuery(a.dom.rselect).height() && this.show();
                                    return !0
                                }
                                if ((3 == a.events.mouseMode || 4 == a.events.mouseMode) && this.isMoving) {
                                    k = a.Internal.Pages.getRenderingState(a.GetCurrentPage());
                                    d = a.dom.viewerArea.getBoundingClientRect();
                                    e = a.dom.rselect.getBoundingClientRect();
                                    if (-1 != this.resizingMode && 8 != this.resizingMode) {
                                        f = b.pageX - d.left + a.Internal.Coordinates.getViewerScrollLeft();
                                        d = b.pageY -
                                            d.top + a.Internal.Coordinates.getViewerScrollTop();
                                        g = b.clientX - e.left;
                                        c = b.clientY - e.top;
                                        switch (this.resizingMode) {
                                            case 0:
                                                0 < dvJQuery(a.dom.rselect).width() - g && (f < k.pageLeft ? (dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + (dvJQuery(a.dom.rselect).position().left - k.pageLeft)), a.dom.rselect.style.left = k.pageLeft + "px") : (a.dom.rselect.style.left = f + "px", dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() - g)));
                                                0 < dvJQuery(a.dom.rselect).height() - c && (d < k.pageTop ? (dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() +
                                                    (dvJQuery(a.dom.rselect).position().top - k.pageTop)), a.dom.rselect.style.top = k.pageTop + "px") : (a.dom.rselect.style.top = d + "px", dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() - c)));
                                                break;
                                            case 1:
                                                g = b.clientX - e.right;
                                                0 < dvJQuery(a.dom.rselect).width() + g && (f > k.pageLeft + k.pageWidth ? dvJQuery(a.dom.rselect).width(k.pageLeft + k.pageWidth - dvJQuery(a.dom.rselect).position().left) : dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + g));
                                                0 < dvJQuery(a.dom.rselect).height() - c && (d < k.pageTop ? (dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() +
                                                    (dvJQuery(a.dom.rselect).position().top - k.pageTop)), a.dom.rselect.style.top = k.pageTop + "px") : (a.dom.rselect.style.top = d + "px", dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() - c)));
                                                break;
                                            case 2:
                                                g = b.clientX - e.right;
                                                0 < dvJQuery(a.dom.rselect).width() + g && (f > k.pageLeft + k.pageWidth ? dvJQuery(a.dom.rselect).width(k.pageLeft + k.pageWidth - dvJQuery(a.dom.rselect).position().left) : dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + g));
                                                c = b.clientY - e.bottom;
                                                0 < dvJQuery(a.dom.rselect).height() +
                                                    c && (d > k.pageTop + k.pageHeight ? dvJQuery(a.dom.rselect).height(k.pageTop + k.pageHeight - dvJQuery(a.dom.rselect).position().top) : dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() + c));
                                                break;
                                            case 3:
                                                0 < dvJQuery(a.dom.rselect).width() - g && (f < k.pageLeft ? (dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + (dvJQuery(a.dom.rselect).position().left - k.pageLeft)), a.dom.rselect.style.left = k.pageLeft + "px") : (a.dom.rselect.style.left = f + "px", dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() -
                                                    g)));
                                                c = b.clientY - e.bottom;
                                                0 < dvJQuery(a.dom.rselect).height() + c && (d > k.pageTop + k.pageHeight ? dvJQuery(a.dom.rselect).height(k.pageTop + k.pageHeight - dvJQuery(a.dom.rselect).position().top) : dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() + c));
                                                break;
                                            case 4:
                                                0 < dvJQuery(a.dom.rselect).width() - g && (f < k.pageLeft ? (dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + (dvJQuery(a.dom.rselect).position().left - k.pageLeft)), a.dom.rselect.style.left = k.pageLeft + "px") : (a.dom.rselect.style.left =
                                                    f + "px", dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() - g)));
                                                break;
                                            case 5:
                                                0 < dvJQuery(a.dom.rselect).height() - c && (d < k.pageTop ? (dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() + (dvJQuery(a.dom.rselect).position().top - k.pageTop)), a.dom.rselect.style.top = k.pageTop + "px") : (a.dom.rselect.style.top = d + "px", dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() - c)));
                                                break;
                                            case 6:
                                                g = b.clientX - e.right;
                                                0 < dvJQuery(a.dom.rselect).width() + g && (f > k.pageLeft + k.pageWidth ? dvJQuery(a.dom.rselect).width(k.pageLeft +
                                                    k.pageWidth - dvJQuery(a.dom.rselect).position().left) : dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width() + g));
                                                break;
                                            case 7:
                                                c = b.clientY - e.bottom, 0 < dvJQuery(a.dom.rselect).height() + c && (d > k.pageTop + k.pageHeight ? dvJQuery(a.dom.rselect).height(k.pageTop + k.pageHeight - dvJQuery(a.dom.rselect).position().top) : dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height() + c))
                                        }
                                        a.dom.rselect.width = dvJQuery(a.dom.rselect).width();
                                        a.dom.rselect.height = dvJQuery(a.dom.rselect).height()
                                    } else g = b.clientX -
                                        a.events.mouseDownClientX, c = b.clientY - a.events.mouseDownClientY, dvJQuery(a.dom.rselect).position().left + g >= k.pageLeft && dvJQuery(a.dom.rselect).position().left + g + dvJQuery(a.dom.rselect).width() <= k.pageLeft + k.pageWidth ? (a.dom.rselect.style.left = dvJQuery(a.dom.rselect).position().left + g + "px", a.events.mouseDownClientX += g) : dvJQuery(a.dom.rselect).position().left + g <= k.pageLeft ? a.dom.rselect.style.left = k.pageLeft + "px" : dvJQuery(a.dom.rselect).position().left + g + dvJQuery(a.dom.rselect).width() >= k.pageLeft +
                                            k.pageWidth && (a.dom.rselect.style.left = k.pageLeft + k.pageWidth - dvJQuery(a.dom.rselect).width() + "px"), dvJQuery(a.dom.rselect).position().top + c >= k.pageTop && dvJQuery(a.dom.rselect).position().top + c + dvJQuery(a.dom.rselect).height() <= k.pageTop + k.pageHeight ? (a.dom.rselect.style.top = dvJQuery(a.dom.rselect).position().top + c + "px", a.events.mouseDownClientY += c) : dvJQuery(a.dom.rselect).position().top + c <= k.pageTop ? a.dom.rselect.style.top = k.pageTop + "px" : dvJQuery(a.dom.rselect).position().top + c + dvJQuery(a.dom.rselect).height() >=
                                                k.pageTop + k.pageHeight && (a.dom.rselect.style.top = k.pageTop + k.pageHeight - dvJQuery(a.dom.rselect).height() + "px");
                                    return !0
                                }
                                return !1
                            },
                            mouseEnter: function (a, b) {
                                return this.isOver = !0
                            },
                            mouseLeave: function (a, b) {
                                this.isOver = !1;
                                return !0
                            }
                        }
                    },
                    Pages: {
                        getPage: function (b) {
                            if (null != a.cache.Pages)
                                for (var d = 0; d < a.cache.Pages.length; d++)
                                    if (a.cache.Pages[d].pageNo == b) return a.cache.Pages[d];
                            return null
                        },
                        selectByDestination: function (b) {
                            return a.ajax.PostBaseRequest({
                                url: a.appControllerPath + "/rundestination" + (a.useIdInRoot ?
                                    "/1" : ""),
                                data: {
                                    destinationName: b
                                },
                                success: function (b) {
                                    a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1, !0);
                                    a.dom.updateSelectedPageFader(0, a.GetCurrentPage())
                                }
                            }, !1)
                        },
                        getVisiblePageNumbers: function () {
                            var b = a.Internal.Coordinates.getViewerScrollTop(),
                                c = b + dvJQuery(a.dom.viewerArea).innerHeight();
                            return this.getVisiblePageNumbersEx(b, c)
                        },
                        getVisiblePageNumbersEx: function (b, c) {
                            var d = [];
                            if (0 == a.dom.viewerArea.offsetWidth || 0 == a.dom.viewerArea.offsetHeight) return d;
                            if (b > c) {
                                var g =
                                    b;
                                b = c;
                                c = g
                            }
                            g = !1;
                            for (var e = 0; e < a.cache.canvas.length; e++) {
                                var f = a.cache.canvas[e].pageNo,
                                    h = a.cache.canvas[e].canvas.length,
                                    k = parseFloat(a.cache.canvas[e].canvas[0].tile.style.top);
                                h = parseFloat(a.cache.canvas[e].canvas[h - 1].tile.style.top) + parseFloat(a.cache.canvas[e].canvas[h - 1].tile.style.height);
                                if (a.Internal.Coordinates.hasVerticalIntersection(k, h, b, c)) d.push(f), g = !0;
                                else if (g) break
                            }
                            0 < d.length && d.sort(function (a, b) {
                                return a - b
                            });
                            return d
                        },
                        getText: function (b) {
                            return (b = a.Internal.Pages.getPage(b)) ?
                                b.text : null
                        },
                        getPageWidth: function (b) {
                            return (b = a.Internal.Pages.getPage(b)) ? b.width : 0
                        },
                        getPageHeight: function (b) {
                            return (b = a.Internal.Pages.getPage(b)) ? b.height : 0
                        },
                        isPageVisible: function (b) {
                            var d = a.cache.getPageCanvas(b);
                            if (d) {
                                b = a.Internal.Coordinates.getViewerScrollTop();
                                var c = b + dvJQuery(a.dom.viewerArea).innerHeight(),
                                    e = d.canvas.length,
                                    r = parseFloat(d.canvas[0].tile.style.top);
                                d = parseFloat(d.canvas[e - 1].tile.style.top) + parseFloat(d.canvas[e - 1].tile.style.height);
                                if (a.Internal.Coordinates.hasVerticalIntersection(r,
                                    d, b, c)) return !0
                            }
                            return !1
                        },
                        isPageRendered: function (b) {
                            return (b = a.Internal.Pages.getPage(b)) ? b.drawn || b.drawing : !1
                        },
                        getRenderRotation: function (b) {
                            return (b = a.Internal.Pages.getPage(b)) ? b.renderRotation : 0
                        },
                        getRenderingState: function (b) {
                            for (var d, c, e, r, f, h, k, l = 0; l < a.cache.canvas.length; l++)
                                if (a.cache.canvas[l].pageNo == b) {
                                    d = a.cache.canvas[l].left;
                                    c = a.cache.canvas[l].top;
                                    e = a.cache.canvas[l].right - d;
                                    r = a.cache.canvas[l].bottom - c;
                                    break
                                } if (b = a.Internal.Pages.getPage(b)) f = b.contentMatrix, h = b.matrix, k = b.zoom;
                            return {
                                pageLeft: d,
                                pageTop: c,
                                pageWidth: e,
                                pageHeight: r,
                                zoom: k,
                                matrix: h,
                                contentMatrix: f
                            }
                        },
                        pageView: function (b, c, m) {
                            function d() {
                                if (null != a.ajax.pendingPageViewRequests)
                                    for (var b = 0; b < g.length; b++)
                                        for (var d = g[b], c = 0; c < a.ajax.pendingPageViewRequests.length; c++)
                                            if (a.ajax.pendingPageViewRequests[c] == d) {
                                                a.ajax.pendingPageViewRequests.splice(c, 1);
                                                break
                                            }
                            }
                            if (!a.serverCtx.documentLoaded || !a.cache.canvas) return 0;
                            for (var g = [], e = 0; e < b.length; e++) {
                                var f = b[e],
                                    h = !1,
                                    k = a.Internal.Pages.getPage(f);
                                k && (k.drawn || k.drawing ||
                                    k.renderStatus != DocuViewareAPI.Status.OK && !m) && (h = !0);
                                if (!h) {
                                    h = !1;
                                    if (null != a.ajax.pendingPageViewRequests)
                                        for (k = 0; k < a.ajax.pendingPageViewRequests.length; k++)
                                            if (a.ajax.pendingPageViewRequests[k] == f) {
                                                h = !0;
                                                break
                                            } h || (null == a.ajax.pendingPageViewRequests && (a.ajax.pendingPageViewRequests = []), a.ajax.pendingPageViewRequests.push(f), g.push(f))
                                }
                            }
                            0 < g.length && (c && a.DisplayPendingActionNotification(), a.ajax.pageViewRequestNo += 1, a.ajax.PostAjaxRequestForDocuViewareAction({
                                url: a.appControllerPath + "/pageview" + (a.useIdInRoot ?
                                    "/1" : ""),
                                async: !0,
                                data: JSON.stringify({
                                    sessionID: a.ajax.sessionID,
                                    contextID: a.ajax.contextID,
                                    zoom: a.serverCtx.zoom,
                                    forceReload: m,
                                    entries: g,
                                    requestNo: a.ajax.pageViewRequestNo
                                }),
                                success: function (b) {
                                    c && a.HidePendingActionNotification();
                                    d();
                                    if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK && b.contextID == a.ajax.contextID) {
                                        var g = !0,
                                            m = !1,
                                            e = !1;
                                        b.checkZoom ? a.serverCtx.zoom != b.zoom && (a.debug && console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: " +
                                            a.serverCtx.zoom + ". response zoom: " + b.zoom + "."), e = !0, g = !1) : a.serverCtx.zoom != b.zoom && (a.debug && console.log("DocuVieware pageview: prevent for page drawing because of zoom inconsistency"), g = !1);
                                        g && a.serverCtx.viewRotation != b.viewRotation && (a.debug && console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: " + a.serverCtx.viewRotation + ". Content view rotation: " + b.viewRotation), m = !0);
                                        a.serverCtx.page = b.images;
                                        a.UpdateUI(!1, !0, g, !1, e, m)
                                    }
                                },
                                error: function (b) {
                                    a.ajax.HandleError(b);
                                    a.debug && console.log("DocuVieware pageview error");
                                    d()
                                }
                            }));
                            return g.length
                        }
                    },
                    Coordinates: {
                        getViewerScrollLeft: function () {
                            return a.dom.viewerArea.scrollLeft
                        },
                        getViewerScrollTop: function () {
                            return a.dom.viewerArea.scrollTop
                        },
                        setViewerScrollLeft: function (b) {
                            a.dom.viewerArea.scrollLeft = b;
                            return DocuViewareAPI.Status.OK
                        },
                        setViewerScrollTop: function (b) {
                            a.dom.viewerArea.scrollTop = b;
                            return DocuViewareAPI.Status.OK
                        },
                        clientToDocument: function (b, c, m, e) {
                            b = a.Internal.Pages.getRenderingState(b);
                            var d = a.dom.viewerArea.getBoundingClientRect();
                            c = {
                                x: c - d.left - b.pageLeft + a.Internal.Coordinates.getViewerScrollLeft(),
                                y: m - d.top - b.pageTop + a.Internal.Coordinates.getViewerScrollTop()
                            };
                            e = 1 == e ? 1 / 96 : 1;
                            e = a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix), e, e, !1);
                            a.Internal.Matrix.transformPoint(e, c);
                            return c
                        },
                        documentToViewer: function (b, c, m) {
                            b = a.Internal.Pages.getRenderingState(b);
                            c = {
                                x: c,
                                y: m
                            };
                            a.Internal.Matrix.transformPoint(b.contentMatrix, c);
                            c.x += b.pageLeft;
                            c.y += b.pageTop;
                            return c
                        },
                        documentToViewerBox: function (b, c) {
                            b = a.Internal.Pages.getRenderingState(b);
                            a.Internal.Matrix.transformBBox(b.contentMatrix, 0, c);
                            c.left += b.pageLeft;
                            c.top += b.pageTop
                        },
                        hasVerticalIntersection: function (a, b, c, e) {
                            return Math.min(b, e) >= Math.max(a, c)
                        },
                        hasIntersection: function (a, b, c, e, r, f, h, k) {
                            return Math.min(c, h) >= Math.max(a, r) && Math.min(e, k) >= Math.max(b, f)
                        },
                        newRectangle: function (a, b, c, e) {
                            return {
                                Left: a,
                                Top: b,
                                Right: a + c,
                                Bottom: b + e,
                                Width: c,
                                Height: e
                            }
                        },
                        rectUnion: function (a, b, c, e, r, f, h, k) {
                            a = Math.min(a, r);
                            b = Math.min(b, f);
                            return this.newRectangle(a, b, Math.max(c, h) - a, Math.max(e, k) - b)
                        }
                    },
                    Rotations: {
                        getRotateFlipTypeAngle: function (a) {
                            switch (a) {
                                case 1:
                                    return 90;
                                case 2:
                                    return 180;
                                case 3:
                                    return 270
                            }
                            return 0
                        }
                    },
                    Text: {
                        _selectedText: null,
                        clearSelection: function () {
                            this._selectedText = null
                        },
                        anyWordHitTest: function (b, c, m) {
                            var d = a.Internal.Pages.getVisiblePageNumbers();
                            if (null != d)
                                for (var g = 0; g < d.length; g++)
                                    if (a.Internal.Pages.isPageRendered(d[g])) {
                                        var e = a.Internal.Coordinates.clientToDocument(d[g], b, c, 0),
                                            f = a.Internal.Pages.getText(d[g]);
                                        if (null != f) {
                                            var h = e.x * f.scale;
                                            e = e.y * f.scale;
                                            for (var k = f.textBlock.words,
                                                l = k.length, q = 0; q < l; q++)
                                                if (k[q].BBox.Left - m <= h && k[q].BBox.Right + m >= h && k[q].BBox.Top - m <= e && k[q].BBox.Bottom + m >= e) return {
                                                    page: d[g],
                                                    textRotate: f.textBlock.Rotation
                                                }
                                        }
                                    } return null
                        },
                        getSelectedText: function () {
                            return this._selectedText
                        },
                        getSelectedTextCoordinatesOnDocument: function () {
                            var b = [];
                            if (0 < a.dom.SelectedTextRegions._cache.length)
                                for (var c = 0; c < a.dom.SelectedTextRegions._cache.length; c++) {
                                    var m = a.Internal.Pages.getRenderingState(a.dom.SelectedTextRegions._cache[c].pageNo),
                                        e = {
                                            left: a.dom.SelectedTextRegions._cache[c].offsetLeft -
                                                m.pageLeft,
                                            top: a.dom.SelectedTextRegions._cache[c].offsetTop - m.pageTop,
                                            width: a.dom.SelectedTextRegions._cache[c].offsetWidth,
                                            height: a.dom.SelectedTextRegions._cache[c].offsetHeight
                                        };
                                    m = a.Internal.Matrix.scale(a.Internal.Matrix.invert(m.contentMatrix), 1 / 96, 1 / 96, !1);
                                    a.Internal.Matrix.transformBBox(m, 0, e);
                                    e = {
                                        pageNo: a.dom.SelectedTextRegions._cache[c].pageNo,
                                        left: a.Internal.Utilities.roundEx(e.left, 7),
                                        top: a.Internal.Utilities.roundEx(e.top, 7),
                                        height: a.Internal.Utilities.roundEx(e.height, 7),
                                        width: a.Internal.Utilities.roundEx(e.width,
                                            7)
                                    };
                                    b.push(e)
                                }
                            return b
                        },
                        getSelectedTextAreas: function () {
                            var b = a.Internal.Text.getSelectedTextCoordinatesOnDocument(),
                                c = [];
                            if (0 < b.length)
                                for (var m = 0; m < b.length; m++) c.push({
                                    pageNo: b[m].pageNo,
                                    coordinates: {
                                        left: b[m].left,
                                        top: b[m].top,
                                        height: b[m].height,
                                        width: b[m].width
                                    }
                                });
                            return c
                        },
                        captureSelectedText: function (b, c, m, e, f, h) {
                            function d(a, b, d) {
                                var c = a._selectedText.length;
                                0 < c && (d ? a._selectedText += "\r\n" : " " != a._selectedText[c - 1] && "\t" != a._selectedText[c - 1] && " " != b[0] && "\t" != b[0] && (a._selectedText += " "))
                            }
                            this._selectedText = "";
                            var g = [],
                                p = a.dom.viewerArea.getBoundingClientRect();
                            p = a.Internal.Coordinates.getViewerScrollTop() - p.top;
                            p = a.Internal.Pages.getVisiblePageNumbersEx(c + p, e + p);
                            if (null != p)
                                for (var r = -1 == G && -1 == J && -1 == F && -1 == D, k = !0, v = 1 == p.length, l = -1, q = -1, t = 0; t < p.length; t++) {
                                    var w = 0 == t,
                                        z = t == p.length - 1,
                                        y = p[t];
                                    if (a.Internal.Pages.isPageRendered(y)) {
                                        var A = [],
                                            C = a.Internal.Pages.getText(y);
                                        if (null != C) {
                                            var E = h;
                                            0 != C.textBlock.Rotation && (E = !0);
                                            J = a.Internal.Coordinates.clientToDocument(y, b, c, 0);
                                            D = a.Internal.Coordinates.clientToDocument(y,
                                                m, e, 0);
                                            var G = J.x * C.scale,
                                                F = J.y * C.scale,
                                                J = D.x * C.scale,
                                                D = D.y * C.scale;
                                            if (F > D) {
                                                var M = G;
                                                G = J;
                                                J = M;
                                                M = F;
                                                F = D;
                                                D = M
                                            }
                                            F = a.Internal.Coordinates.newRectangle(Math.min(G, J), Math.min(F, D), Math.abs(G - J), Math.abs(F - D));
                                            F.Right = F.Left + F.Width;
                                            F.Bottom = F.Top + F.Height;
                                            D = C.textBlock.words;
                                            M = D.length;
                                            for (var N = -1, T = 0, X = !1, O = null, R = 0; R <= M - 1; R++) {
                                                var B = D[R];
                                                if (E) {
                                                    if (a.Internal.Coordinates.hasIntersection(F.Left, F.Top, F.Right, F.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom)) {
                                                        null != O ? (X = O.LineNo == B.LineNo, L = !X) : L = X = !1;
                                                        if (X) {
                                                            var Y = A[A.length - 1];
                                                            A[A.length - 1] = a.Internal.Coordinates.rectUnion(Y.Left, Y.Top, Y.Right, Y.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom)
                                                        } else A.push(a.Internal.Coordinates.newRectangle(B.BBox.Left, B.BBox.Top, B.BBox.Width, B.BBox.Height));
                                                        d(this, B.Content, L);
                                                        this._selectedText += B.Content;
                                                        X = !0;
                                                        O = B
                                                    }
                                                } else {
                                                    var L = T != B.LineNo;
                                                    L && (T = B.LineNo, X = !1, N = -1);
                                                    if (r || !w || -1 != l && l != B.LineNo || -1 != N) {
                                                        if (r) N = B.LineNo;
                                                        else if (-1 == N || -1 != N && B.LineNo != N && -1 == q) N = B.BBox.Bottom < F.Bottom ? B.LineNo : -1;
                                                        if (-1 !=
                                                            N) L ? A.push(a.Internal.Coordinates.newRectangle(B.BBox.Left, B.BBox.Top, B.BBox.Width, B.BBox.Height)) : (Y = A[A.length - 1], A[A.length - 1] = a.Internal.Coordinates.rectUnion(Y.Left, Y.Top, Y.Right, Y.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom)), d(this, B.Content, L), this._selectedText += B.Content;
                                                        else if (-1 == q || q == B.LineNo) {
                                                            if (B.BBox.Top < F.Bottom)
                                                                if (B.BBox.Right < J) X ? (Y = A[A.length - 1], A[A.length - 1] = a.Internal.Coordinates.rectUnion(Y.Left, Y.Top, Y.Right, Y.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom)) :
                                                                    A.push(a.Internal.Coordinates.newRectangle(B.BBox.Left, B.BBox.Top, B.BBox.Width, B.BBox.Height)), d(this, B.Content, L), this._selectedText += B.Content, X = !0;
                                                                else {
                                                                    if (a.Internal.Coordinates.hasIntersection(F.Left, F.Top, F.Right, F.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom))
                                                                        for (d(this, B.Content, L), L = 0; L <= B.GlyphBoxes.length - 1; L++) B.GlyphBoxes[L].x + B.GlyphBoxes[L].width < J && (X ? (X = A[A.length - 1], A[A.length - 1] = a.Internal.Coordinates.rectUnion(X.Left, X.Top, X.Right, X.Bottom, B.GlyphBoxes[L].x, B.GlyphBoxes[L].y,
                                                                            B.GlyphBoxes[L].x + B.GlyphBoxes[L].width, B.GlyphBoxes[L].y + B.GlyphBoxes[L].height)) : A.push(a.Internal.Coordinates.newRectangle(B.GlyphBoxes[L].x, B.GlyphBoxes[L].y, B.GlyphBoxes[L].width, B.GlyphBoxes[L].height)), X = !0, this._selectedText += B.GlyphBoxes[L].glyph);
                                                                    break
                                                                }
                                                            else break; - 1 == q && z && (q = B.LineNo)
                                                        } else break
                                                    } else if (a.Internal.Coordinates.hasIntersection(F.Left, F.Top, F.Right, F.Bottom, B.BBox.Left, B.BBox.Top, B.BBox.Right, B.BBox.Bottom)) {
                                                        if (k && 1 == p.length) {
                                                            for (k = R; k < M;) {
                                                                if (D[k].LineNo != T) {
                                                                    v = D[k].BBox.Top >
                                                                        F.Bottom;
                                                                    break
                                                                }
                                                                k += 1
                                                            }
                                                            k = !1
                                                        }
                                                        d(this, B.Content, L);
                                                        for (L = 0; L <= B.GlyphBoxes.length - 1; L++) {
                                                            Y = f;
                                                            if (v)
                                                                if (X) {
                                                                    var W = B.GlyphBoxes[L].x + B.GlyphBoxes[L].width;
                                                                    Y |= a.Internal.Coordinates.hasIntersection(F.Left, F.Top, F.Right, F.Bottom, B.GlyphBoxes[L].x, B.GlyphBoxes[L].y, B.GlyphBoxes[L].x + B.GlyphBoxes[L].width, B.GlyphBoxes[L].y + B.GlyphBoxes[L].height) && W < F.Right
                                                                } else Y |= a.Internal.Coordinates.hasIntersection(F.Left, F.Top, F.Right, F.Bottom, B.GlyphBoxes[L].x, B.GlyphBoxes[L].y, B.GlyphBoxes[L].x + B.GlyphBoxes[L].width, B.GlyphBoxes[L].y +
                                                                    B.GlyphBoxes[L].height);
                                                            else if (W = B.GlyphBoxes[L].x + B.GlyphBoxes[L].width, -1 != N || W > G) Y = !0, -1 == l && (l = B.LineNo, N = B.BBox.Bottom < F.Bottom ? B.LineNo : -1);
                                                            Y && (X ? (X = A[A.length - 1], A[A.length - 1] = a.Internal.Coordinates.rectUnion(X.Left, X.Top, X.Right, X.Bottom, B.GlyphBoxes[L].x, B.GlyphBoxes[L].y, B.GlyphBoxes[L].x + B.GlyphBoxes[L].width, B.GlyphBoxes[L].y + B.GlyphBoxes[L].height)) : A.push(a.Internal.Coordinates.newRectangle(B.GlyphBoxes[L].x, B.GlyphBoxes[L].y, B.GlyphBoxes[L].width, B.GlyphBoxes[L].height)), this._selectedText +=
                                                                B.GlyphBoxes[L].glyph, X = !0)
                                                        }
                                                    }
                                                }
                                            }
                                            g.push({
                                                regions: A,
                                                pageNo: y,
                                                scale: C.scale
                                            })
                                        }
                                    }
                                }
                            return g
                        }
                    },
                    Matrix: {
                        transformPoint: function (a, b) {
                            var d = a.b * b.x + a.d * b.y + a.f;
                            b.x = a.a * b.x + a.c * b.y + a.e;
                            b.y = d
                        },
                        equal: function (a, b) {
                            return a.a === b.a && a.b === b.b && a.c === b.c && a.d === b.d && a.e === b.e && a.f === b.f
                        },
                        combine: function (a, b) {
                            return {
                                a: a.a * b.a + a.b * b.c,
                                b: a.a * b.b + a.b * b.d,
                                c: a.c * b.a + a.d * b.c,
                                d: a.c * b.b + a.d * b.d,
                                e: a.e * b.a + a.f * b.c + b.e,
                                f: a.e * b.b + a.f * b.d + b.f
                            }
                        },
                        invert: function (a) {
                            var b = 1 / (a.a * a.d - a.b * a.c);
                            b = {
                                a: a.d * b,
                                b: -a.b * b,
                                c: -a.c * b,
                                d: a.a *
                                    b
                            };
                            b.e = -a.e * b.a - a.f * b.c;
                            b.f = -a.e * b.b - a.f * b.d;
                            return b
                        },
                        translate: function (a, b, c) {
                            return this.combine(a, {
                                a: 1,
                                b: 0,
                                c: 0,
                                d: 1,
                                e: b,
                                f: c
                            })
                        },
                        isRotatedOrFlipped: function (a) {
                            return 0 != a.b || 0 != a.c || 0 > a.a || 0 > a.d
                        },
                        scale: function (a, b, c, e) {
                            return e ? this.combine({
                                a: b,
                                b: 0,
                                c: 0,
                                d: c,
                                e: 0,
                                f: 0
                            }, a) : this.combine(a, {
                                a: b,
                                b: 0,
                                c: 0,
                                d: c,
                                e: 0,
                                f: 0
                            })
                        },
                        rotateAt: function (a, b, c, e, f) {
                            b = Math.PI * b / 180;
                            b = {
                                a: Math.cos(b),
                                b: Math.sin(b),
                                c: -Math.sin(b),
                                d: Math.cos(b),
                                e: c,
                                f: e
                            };
                            if (f) return c = this.combine({
                                a: 1,
                                b: 0,
                                c: 0,
                                d: 1,
                                e: -c,
                                f: -e
                            }, b), this.combine(c,
                                a);
                            a = this.combine(a, {
                                a: 1,
                                b: 0,
                                c: 0,
                                d: 1,
                                e: -c,
                                f: -e
                            });
                            return this.combine(a, b)
                        },
                        transformBBox: function (a, b, c, e) {
                            var d = 0 == b ? a : null == e ? this.rotateAt(a, b, c.left + c.width / 2, c.top + c.height / 2, !0) : this.rotateAt(a, b, e.x, e.y, !0);
                            a = {
                                x: c.left,
                                y: c.top
                            };
                            b = {
                                x: c.left + c.width,
                                y: c.top
                            };
                            e = {
                                x: c.left + c.width,
                                y: c.top + c.height
                            };
                            var g = {
                                x: c.left,
                                y: c.top + c.height
                            };
                            this.transformPoint(d, a);
                            this.transformPoint(d, b);
                            this.transformPoint(d, e);
                            this.transformPoint(d, g);
                            d = Math.min(a.x, b.x, e.x, g.x);
                            var m = Math.max(a.x, b.x, e.x, g.x),
                                p = Math.min(a.y,
                                    b.y, e.y, g.y);
                            a = Math.max(a.y, b.y, e.y, g.y);
                            c.left = d;
                            c.top = p;
                            c.width = m - d;
                            c.height = a - p
                        }
                    },
                    Search: {
                        _currentOccurence: null,
                        _occurences: null,
                        _firstResult: null,
                        clearResults: function () {
                            this._currentOccurence = this._occurences = this._firstResult = null;
                            if (a.dom.searchResults && a.dom.searchResults.hasChildNodes())
                                for (var b = a.dom.searchResults.children.length - 1; 0 <= b; b--) a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);
                            a.dom.SelectedTextRegions.clear(2)
                        },
                        addResults: function (b, c) {
                            this.clearResults();
                            this._occurences = c;
                            a.dom.SelectedTextRegions.clear(2);
                            this.occurences = c;
                            var d = null != c ? c.length : 0;
                            if (0 < d)
                                for (var g = 1, e, f = 0, h = 0; h < d; h++) {
                                    var k = document.createElement("div");
                                    //AGjs__changes for unique id declaration
                                    k.id = sessionStorage.controlID + "searchResultItem" + h;
                                    k.setAttribute("data-idx", h);
                                    0 == h ? this._firstResult = k : c[h].page != e && (g = 1);
                                    e = c[h].page;
                                    k.pageOccurence = g++;
                                    k.className = "searchResultItem";
                                    var l = c[h].context.content,
                                        q = c[h].context.resultStart,
                                        t = c[h].context.resultLen;
                                    k.innerHTML = l.substr(0, q) + '<strong style="color:' + a.dom.UIconfig.activeSelectedColor +
                                        ';">' + l.substr(q, t) + "</strong>" + l.substr(q + t);
                                    k.pageNo = c[h].page;
                                    k.wordLeft = c[h].left;
                                    k.wordTop = c[h].top;
                                    k.wordWidth = c[h].width;
                                    k.wordHeight = c[h].height;
                                    k.searchedValue = b;
                                    a.dom.searchArea && (k.onmouseenter = this.resultOnMouseEnterHandler, k.onmouseleave = this.resultOnMouseLeaveHandler, k.onclick = this.resultOnClickHandler);
                                    a.dom.searchArea && f != e && (l = document.createElement("div"), l.className = "searchResultItemPage", l.style.backgroundColor = a.dom.UIconfig.panelDarkerBackColor, l.innerHTML = a.Localize("label_page") +
                                        " " + e, f = e, a.dom.searchResults.appendChild(l));
                                    a.dom.searchArea && a.dom.searchResults.appendChild(k)
                                }
                        },
                        highlightResults: function (b) {
                            a.dom.SelectedTextRegions.clear(2, b);
                            if (null != this._occurences) {
                                var d = this._occurences.length;
                                if (0 < d)
                                    for (var c = 1, e = 0; e < d; e++)
                                        if (this._occurences[e].page == b) {
                                            var h = {
                                                left: 96 * this._occurences[e].left,
                                                top: 96 * this._occurences[e].top,
                                                width: 96 * this._occurences[e].width,
                                                height: 96 * this._occurences[e].height
                                            };
                                            a.Internal.Coordinates.documentToViewerBox(this._occurences[e].page, h);
                                            null != this._currentOccurence && this._currentOccurence.pageNo == b && this._currentOccurence.pageOccurence == c ? a.dom.SelectedTextRegions.addNew(this._occurences[e].page, h.left, h.top, h.width, h.height, "rgba(0,200,0,0.3)", "rgba(255,0,0,1)", 2) : a.dom.SelectedTextRegions.addNew(this._occurences[e].page, h.left, h.top, h.width, h.height, "rgba(0,200,0,0.3)", null, 2);
                                            c++
                                        }
                            }
                        },
                        navigateToFirstResult: function () {
                            this._firstResult && (this.navigateToResult(this._firstResult), a.dom.searchResults.parentElement.scrollTop = 0)
                        },
                        resultOnClickHandler: function (b) {
                            a.Internal.Search.navigateToResult(b.currentTarget)
                        },
                        resultOnMouseEnterHandler: function (b) {
                            b.target.style.borderColor = a.dom.UIconfig.activeSelectedColor
                        },
                        resultOnMouseLeaveHandler: function (b) {
                            b.target.style.borderLeftColor = "transparent";
                            b.target.style.borderRightColor = "transparent";
                            b.target.style.borderTopColor = "transparent";
                            b.target.style.borderBottomColor = a.dom.UIconfig.miscBorderColor
                        },
                        navigateToResult: function (b) {
                            a.Internal.Search._currentOccurence = b;
                            a.dom.searchArea && (dvJQuery(a.dom.searchResults).find(".searchResultItem").each(function (b) {
                                dvJQuery(this).removeClass("active");
                                dvJQuery(this).css("border-left-color", "transparent");
                                dvJQuery(this).css("border-right-color", "transparent");
                                dvJQuery(this).css("border-top-color", "transparent");
                                dvJQuery(this).css("border-bottom-color", a.dom.UIconfig.miscBorderColor);
                                dvJQuery(this).css("background-color", "transparent")
                            }), b.style.borderColor = "transparent", b.style.backgroundColor = a.dom.UIconfig.activeSelectedBackgroundColor, dvJQuery(b).addClass("active"), a.Internal.Search.scrollContainerToItem(b));
                            a.SelectPageEx(b.pageNo, !0, !0, !0,
                                !1, !0,
                                function () {
                                    a.EnsurePageRegionVisibility(b.pageNo, b.wordLeft, b.wordTop, b.wordWidth, b.wordHeight)
                                })
                        },
                        scrollContainerToItem: function (b) {
                            var d = a.dom.searchResultsContainer.getBoundingClientRect(),
                                c = a.dom.searchResultsContainer.clientHeight;
                            b = b.getBoundingClientRect();
                            b.top >= d.top && b.top <= d.top + c || (a.dom.searchResultsContainer.scrollTop = b.top + a.dom.searchResultsContainer.scrollTop - d.top)
                        }
                    },
                    FormFields: {
                        existFormField: function (b) {
                            if (!b.control) return !1;
                            if (a.dom.viewerArea.hasChildNodes())
                                for (var d =
                                    a.dom.viewerArea.children.length - 1; 0 <= d; d--)
                                    if (a.dom.viewerArea.children[d] === b.control) return !0;
                            return !1
                        },
                        removePageFormFields: function (b) {
                            if (null != a.cache.FormFields)
                                for (var d = 0; d < a.cache.FormFields.length; d++) {
                                    var c = a.cache.FormFields[d];
                                    c.formFieldApp.pageNo == b && (this.removeFormField(c), a.cache.FormFields.splice(d, 1), d--)
                                }
                        },
                        removeAll: function (b) {
                            if (null != a.cache.FormFields) {
                                for (b = 0; b < a.cache.FormFields.length; b++) this.removeFormField(a.cache.FormFields[b]);
                                a.cache.FormFields = null
                            }
                        },
                        removeFormField: function (b) {
                            b.control &&
                                b.control.parentNode == a.dom.viewerArea && a.dom.viewerArea.removeChild(b.control);
                            if (b.children)
                                for (var d = 0; d < b.children.length; d++) this.removeFormField(b.children[d])
                        },
                        removeFormFieldFromCache: function (b) {
                            if (null != a.cache.FormFields)
                                for (var d = 0; d < a.cache.FormFields.length; d++) a.cache.FormFields[d].formFieldApp.id === b && (a.cache.FormFields.splice(d, 1), d--)
                        },
                        newController: function (b) {
                            var d = {};
                            d.formFieldApp = b;
                            d.updateNo = 0;
                            d.pendingUpdate = 0;
                            d.stopEditing = function () {
                                this.isEditing() && this.isModified() &&
                                    this.updateFormField(null)
                            };
                            d.updateFormField = function (b) {
                                if (a.hasPendingAction(!0, !0)) return DocuViewareAPI.Status.GenericError;
                                var d = {};
                                d.properties = this.formFieldApp.properties;
                                d.sessionID = a.ajax.sessionID;
                                d.contextID = a.ajax.contextID;
                                d.pageNo = this.formFieldApp.pageNo;
                                d.id = this.formFieldApp.id;
                                b && (dvJQuery.extend(!0, d.properties, b), d.rotation = b.rotation);
                                this.updateNo += 1;
                                this.pendingUpdate += 1;
                                d.updateNo = this.updateNo;
                                var c = this;
                                0 !== d.properties.parentId && 3 === d.properties.type && (d.id = d.properties.parentId,
                                    d.properties.id = d.properties.parentId, d.properties.parentId = 0);
                                a.ajax.PostAjaxRequestForDocuViewareAction({
                                    url: a.appControllerPath + "/formfieldupdate" + (a.useIdInRoot ? "/1" : ""),
                                    async: !0,
                                    data: JSON.stringify(d),
                                    success: function (b) {
                                        --c.pendingUpdate;
                                        if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.formFieldApp) {
                                            if (c.isEditing() || b.updateNo != c.updateNo || (c.formFieldApp = b.formFieldApp, c.render(), a.updateThumbnails([c.formFieldApp.pageNo])), a.callbacks.onFormFieldChanged) a.callbacks.onFormFieldChanged({
                                                id: b.formFieldApp.id,
                                                pageNo: b.formFieldApp.pageNo
                                            })
                                        } else a.ajax.HandleError(b)
                                    },
                                    error: function (b) {
                                        a.ajax.HandleError(b);
                                        --c.pendingUpdate
                                    }
                                });
                                return DocuViewareAPI.Status.OK
                            };
                            d.isEditing = function () {
                                return document.activeElement == this.control
                            };
                            d.hasPendingUpdate = function () {
                                return 0 < this.pendingUpdate
                            };
                            d.isModified = function () {
                                var a = !1;
                                switch (this.formFieldApp.properties.type) {
                                    case 2:
                                        a = this.formFieldApp.properties.isChecked != this.control.checked;
                                        break;
                                    case 4:
                                        a = this.formFieldApp.properties.value != this.control.value;
                                        break;
                                    case 3:
                                        a = !0;
                                        break;
                                    case 7:
                                        a = this.formFieldApp.properties.value != this.control.options[this.control.selectedIndex].value;
                                        break;
                                    case 8:
                                        a = this.formFieldApp.properties.value != this.control.options[this.control.selectedIndex].value
                                }
                                return a
                            };
                            d.blur = function () {
                                this.control.style.backgroundColor = "#CCD7FF";
                                this.isModified() && (this.setCurrentValue(), this.updateFormField(null))
                            };
                            d.focus = function () {
                                this.control.style.backgroundColor = this.formFieldApp.properties.backgroundColor
                            };
                            d.setCurrentValue = function () {
                                switch (this.formFieldApp.properties.type) {
                                    case 2:
                                        this.formFieldApp.properties.isChecked =
                                            this.control.checked;
                                        break;
                                    case 4:
                                        this.formFieldApp.properties.value = this.control.value;
                                        break;
                                    case 3:
                                        //AGjs__changes for unique id declaration
                                        this.formFieldApp.properties.value = dvJQuery('input[name="' + sessionStorage.controlID + "_formfield_" + this.formFieldApp.properties.parentId + '"]:checked').val();
                                        break;
                                    case 7:
                                        this.formFieldApp.properties.value = this.control.options[this.control.selectedIndex].value;
                                        break;
                                    case 8:
                                        this.formFieldApp.properties.value = this.control.options[this.control.selectedIndex].value
                                }
                            };
                            d.render = function () {
                                if (this.children)
                                    for (var b = 0; b <
                                        this.children.length; b++) this.children[b].render();
                                if (this.control) {
                                    b = {
                                        left: this.formFieldApp.properties.left,
                                        top: this.formFieldApp.properties.top,
                                        width: this.formFieldApp.properties.width,
                                        height: this.formFieldApp.properties.height
                                    };
                                    var d = a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);
                                    b.left *= 96;
                                    b.top *= 96;
                                    b.width *= 96;
                                    b.height *= 96;
                                    var c = a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),
                                        g = 0;
                                    switch (c) {
                                        case 2:
                                            g = 180;
                                            break;
                                        case 3:
                                            g = 270;
                                            break;
                                        case 1:
                                            g = 90
                                    }
                                    a.Internal.Matrix.transformBBox(d.contentMatrix,
                                        -g, b);
                                    b.left += d.pageLeft;
                                    b.top += d.pageTop;
                                    this.control.style.left = b.left + "px";
                                    this.control.style.top = b.top + "px";
                                    this.control.style.display = 0 == this.formFieldApp.properties.visibility || 0 == this.formFieldApp.properties.visibility ? "block" : "none";
                                    this.control.style.position = "absolute";
                                    this.control.style.padding = "0px";
                                    this.control.style.margin = "0px";
                                    this.control.style.outline = "0";
                                    this.control.style.backgroundColor = "#CCD7FF";
                                    0 != this.formFieldApp.properties.fontSize && (this.control.style.fontSize = this.formFieldApp.properties.fontSize *
                                        a.GetCurrentZoom() + "pt");
                                    this.control.style.color = this.formFieldApp.properties.fontColor;
                                    this.formFieldApp.properties.fontFamily && (this.control.style.fontFamily = '"' + this.formFieldApp.properties.fontFamily + '"');
                                    switch (this.formFieldApp.properties.fontStyle) {
                                        case 0:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 1:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "bold";
                                            this.control.style.textDecoration =
                                                "none";
                                            break;
                                        case 2:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 3:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "bold";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 4:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "underline";
                                            break;
                                        case 5:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "bold";
                                            this.control.style.textDecoration =
                                                "underline";
                                            break;
                                        case 6:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "underline";
                                            break;
                                        case 7:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "bold";
                                            this.control.style.textDecoration = "underline";
                                            break;
                                        case 8:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "line-through";
                                            break;
                                        case 9:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight =
                                                "bold";
                                            this.control.style.textDecoration = "line-through";
                                            break;
                                        case 10:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "line-through";
                                            break;
                                        case 11:
                                            this.control.style.fontStyle = "italic";
                                            this.control.style.fontWeight = "bold";
                                            this.control.style.textDecoration = "line-through";
                                            break;
                                        case 12:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 13:
                                            this.control.style.fontStyle =
                                                "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 14:
                                            this.control.style.fontStyle = "normal";
                                            this.control.style.fontWeight = "normal";
                                            this.control.style.textDecoration = "none";
                                            break;
                                        case 15:
                                            this.control.style.fontStyle = "normal", this.control.style.fontWeight = "normal", this.control.style.textDecoration = "none"
                                    }
                                    if (2 != this.formFieldApp.properties.type && 3 != this.formFieldApp.properties.type) {
                                        switch (this.formFieldApp.properties.borderStyle) {
                                            case 0:
                                                this.control.style.borderStyle =
                                                    "solid";
                                                break;
                                            case 1:
                                                this.control.style.borderStyle = "dashed";
                                                break;
                                            case 2:
                                                this.control.style.borderStyle = "outset";
                                                break;
                                            case 3:
                                                this.control.style.borderStyle = "inset";
                                                break;
                                            case 4:
                                                this.control.style.borderStyle = "none";
                                                this.control.style.borderBottomStyle = "solid";
                                                break;
                                            default:
                                                this.control.style.borderStyle = "none"
                                        }
                                        this.control.style.borderWidth = 96 * this.formFieldApp.properties.borderWidth * a.GetCurrentZoom() + "px";
                                        this.control.style.borderColor = this.formFieldApp.properties.borderColor
                                    }
                                    3 === this.formFieldApp.properties.type &&
                                        "checkbox" === this.formFieldApp.properties.appearance && (this.control.style["-webkit-appearance"] = "checkbox", this.control.style["-moz-appearance"] = "checkbox", this.control.style["-ms-appearance"] = "checkbox", this.control.style["-o-appearance"] = "checkbox", this.control.style.appearance = "checkbox");
                                    this.control.alt = this.formFieldApp.properties.title;
                                    switch (this.formFieldApp.properties.textAlignment) {
                                        case 0:
                                            this.control.style.textAlign = "left";
                                            break;
                                        case 1:
                                            this.control.style.textAlign = "center";
                                            break;
                                        case 2:
                                            this.control.style.textAlign =
                                                "right"
                                    }
                                    this.control.disabled = this.formFieldApp.properties.readOnly;
                                    d = (this.control.style.borderLeftWidth ? parseFloat(this.control.style.borderLeftWidth.replace("px", "")) : 0) + (this.control.style.borderRightWidth ? parseFloat(this.control.style.borderRightWidth.replace("px", "")) : 0);
                                    var e = (this.control.style.borderLeftWidth ? parseFloat(this.control.style.borderTopWidth.replace("px", "")) : 0) + (this.control.style.borderBottomWidth ? parseFloat(this.control.style.borderRightWidth.replace("px", "")) : 0);
                                    this.control.style.width =
                                        b.width - d + "px";
                                    this.control.style.height = b.height - e + "px";
                                    this.control.style.transform = 0 != g ? "rotate(" + g + "deg)" : "none";
                                    this.control.style.cursor = 4 != this.formFieldApp.properties.type || 1 != c && 3 != c && 5 != c && 7 != c ? "auto" : "vertical-text"
                                }
                            };
                            switch (b.properties.type) {
                                case 2:
                                    d.control = document.createElement("input");
                                    d.control.type = "checkbox";
                                    d.control.checked = b.properties.isChecked;
                                    break;
                                case 4:
                                    b.properties.isMultiline ? d.control = document.createElement("textarea") : (d.control = document.createElement("input"), d.control.type =
                                        b.properties.password ? "password" : "text");
                                    d.control.value = b.properties.value;
                                    b.properties.maxLength && 0 < b.properties.maxLength && (d.control.maxLength = b.properties.maxLength);
                                    break;
                                case 3:
                                    if (b.properties.children) {
                                        d.children = [];
                                        for (var c = 0; c < b.properties.children.length; c++) {
                                            var e = this.newController(b.properties.children[c]);
                                            e.control && e.formFieldApp.properties.value == b.properties.value && (e.control.checked = !0);
                                            d.children.push(e)
                                        }
                                    } else d.control = document.createElement("input"), d.control.type = "radio", d.control.value =
                                        b.properties.value;
                                    break;
                                case 7:
                                    d.control = document.createElement("select");
                                    d.control.size = b.properties.items.length;
                                    b.properties.isMultiSelect && (d.control.multiple = !0);
                                    if (null != b.properties.items)
                                        for (c = 0; c < b.properties.items.length; c++) e = document.createElement("option"), e.text = b.properties.items[c].Value, e.value = b.properties.items[c].Key, b.properties.value == e.value && (e.selected = !0), d.control.appendChild(e);
                                    break;
                                case 8:
                                    if (d.control = document.createElement("select"), null != b.properties.items)
                                        for (c = 0; c <
                                            b.properties.items.length; c++) e = document.createElement("option"), e.text = b.properties.items[c].Value, e.value = b.properties.items[c].Key, b.properties.value == e.value && (e.selected = !0), d.control.appendChild(e)
                            }
                            //AGjs__changes for unique id declaration
                            d.control && (d.control.style.display = "none", d.control.owner = d, d.control.name = 0 == b.properties.parentId ? sessionStorage.controlID + "_formfield_" + b.properties.id : sessionStorage.controlID + "_formfield_" + b.properties.parentId, d.control.id = sessionStorage.controlID + "_formfield_" + b.properties.id, d.control.classList.add("dvFormField"), d.control.style.zIndex =
                                16E6, d.control.onblur = function (a) {
                                    this.owner.blur()
                                }, d.control.onfocus = function (a) {
                                    this.owner.focus()
                                });
                            null == a.cache.FormFields ? a.cache.FormFields = [d] : a.cache.FormFields.push(d);
                            d.control && a.dom.viewerArea.appendChild(d.control);
                            return d
                        }
                    },
                    Twain: {
                        Status: {
                            OK: 0,
                            WARNING: 1,
                            ERROR: 2,
                            BAD_VERSION: 3,
                            NOT_RESPONDING: 4
                        },
                        updateStatusBar: function (b, c) {
                            c = c ? c : "";
                            switch (b) {
                                case a.Internal.Twain.Status.OK:
                                    a.dom.twainAcquisitionStatusBarMessage.style.border = "1px solid #3c763d";
                                    a.dom.twainAcquisitionStatusBarMessage.style.color =
                                        "#3c763d";
                                    break;
                                case a.Internal.Twain.Status.WARNING:
                                    a.dom.twainAcquisitionStatusBarMessage.style.border = "1px solid #cc5500";
                                    a.dom.twainAcquisitionStatusBarMessage.style.color = "#cc5500";
                                    break;
                                case a.Internal.Twain.Status.ERROR:
                                case a.Internal.Twain.Status.BAD_VERSION:
                                case a.Internal.Twain.Status.NOT_RESPONDING:
                                    a.dom.twainAcquisitionStatusBarMessage.style.border = "1px solid #a94442";
                                    a.dom.twainAcquisitionStatusBarMessage.style.color = "#a94442";
                                    break;
                                default:
                                    a.dom.twainAcquisitionStatusBarMessage.style.border =
                                        "1px solid transparent", a.dom.twainAcquisitionStatusBarMessage.style.color = "#000000"
                                //AGjs__changes for unique id declaration
                            }!b || b != a.Internal.Twain.Status.BAD_VERSION && b != a.Internal.Twain.Status.NOT_RESPONDING || (c = c + "<br>" + a.Localize("_twain_connector_donwload") + '<a href="#" onclick="var e = document.getElementById(\'' + sessionStorage.controlID + "'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">" + a.Localize("_twain_connector_donwload_here") + "</a>");
                            a.dom.twainAcquisitionStatusBarMessage.innerHTML = c
                        },
                        updateTwainAcquisitionDialogMessageBox: function (b,
                            c) {
                            c = c ? c : "";
                            switch (b) {
                                case a.Internal.Twain.Status.OK:
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("border", "1px solid #3c763d");
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("color", "#3c763d");
                                    break;
                                case a.Internal.Twain.Status.WARNING:
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("border", "1px solid #cc5500");
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" +
                                        sessionStorage.controlID).css("color", "#cc5500");
                                    break;
                                case a.Internal.Twain.Status.ERROR:
                                case a.Internal.Twain.Status.BAD_VERSION:
                                case a.Internal.Twain.Status.NOT_RESPONDING:
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("border", "1px solid #a94442");
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("color", "#a94442");
                                    break;
                                default:
                                    //AGjs__changes for unique id declaration
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("border", "1px solid transparent"),
                                        //AGjs__changes for unique id declaration
                                        dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" + sessionStorage.controlID).css("color", "#000000")
                                //AGjs__changes for unique id declaration
                            }!b || b != a.Internal.Twain.Status.BAD_VERSION && b != a.Internal.Twain.Status.NOT_RESPONDING || (c = c + "<br>" + a.Localize("_twain_connector_donwload") + '<a href="#" onclick="var e = document.getElementById(\'' + sessionStorage.controlID + "'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">" + a.Localize("_twain_connector_donwload_here") + "</a>");
                            //AGjs__changes for unique id declaration
                            dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage" +
                                sessionStorage.controlID).html(c)
                        },
                        acquire: function (b, c, e) {
                            if (!b || !c) return DocuViewareAPI.Status.GenericError;
                            b = {
                                url: a.twainServiceUri + "TWAINAcquire2/",
                                timeout: 999999999,
                                data: JSON.stringify({
                                    source: {
                                        sourceName: b,
                                        sourceConfig: a.twainSourceConfig
                                    }
                                }),
                                success: function (b) {
                                    (b = b.TwainAcquire2Result) && b.status === DocuViewareAPI.Status.OK ? c(b) : (e && e(b), b.responseType = "DocuVieware", a.ajax.HandleError(b))
                                },
                                error: function () {
                                    var b = {
                                        status: DocuViewareAPI.Status.GenericError,
                                        message: a.Localize("_twain_connector_unavailable"),
                                        throwError: !1
                                    };
                                    e && e(b);
                                    a.ajax.HandleError(b)
                                }
                            };
                            a.ajax.PostAjaxRequestForCrossDomainApp(b);
                            return DocuViewareAPI.Status.OK
                        }
                    },
                    DigiSign: {
                        signatureMode: !1,
                        defaultTextSignatureAppearance: {
                            fontName: 1,
                            fontSize: 14,
                            fontLineWidth: .1,
                            verticalAlignment: 0,
                            horizontalAlignment: 1,
                            fontColor: "#FF0000"
                        },
                        currentSignatureData: null,
                        initializePropertiesUI: function () {
                            dvJQuery(a.dom.digisignInfoNameInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignInfoReasonInput).css({
                                border: "1px solid " +
                                    a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignInfoLocationInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignInfoContactInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignInfoRequired).css({
                                color: a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignCertNameSelect).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignCertPasswordInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignTimestampServerInput).css({
                                border: "1px solid " +
                                    a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignTimestampLoginInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignTimestampPasswordInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignAppearanceTextInput).css({
                                border: "1px solid " + a.dom.UIconfig.strokeColor
                            });
                            dvJQuery(a.dom.digisignAppearanceImageInputFile).css({
                                border: "none"
                            });
                            //AGjs__changes for unique id declaration
                            dvJQuery("#digisign_certificate_name" + sessionStorage.controlID + "-button").css({
                                border: "1px solid " + a.dom.UIconfig.miscBorderColor
                            })
                        },
                        resetPropertiesToDefault: function () {
                            dvJQuery(a.dom.digisignInfoNameInput).val("");
                            dvJQuery(a.dom.digisignInfoReasonInput).val("");
                            dvJQuery(a.dom.digisignInfoLocationInput).val("");
                            dvJQuery(a.dom.digisignInfoContactInput).val("");
                            //AGjs__changes for unique id declaration
                            dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "][value='pad']").prop("checked", !0);
                            dvJQuery(a.dom.digisignAppearanceTextInput).val("");
                            dvJQuery(a.dom.digisignAppearanceImageInputFile).val("");
                            dvJQuery(a.dom.digisignCertNameSelect).val("");
                            dvJQuery(a.dom.digisignCertPasswordInput).val("");
                            //AGjs__changes for unique id declaration
                            dvJQuery("input[name=digisign_timestamp" + sessionStorage.controlID + "][value='none']").prop("checked", !0);
                            dvJQuery(a.dom.digisignTimestampServerInput).val("");
                            dvJQuery(a.dom.digisignTimestampLoginInput).val("");
                            dvJQuery(a.dom.digisignTimestampPasswordInput).val("")
                        },
                        propertiesInputChecks: function (b) {
                            var d = !1;
                            1 === b || 2 === b ? (0 === dvJQuery(a.dom.digisignInfoNameInput).val().length && 0 === dvJQuery(a.dom.digisignInfoReasonInput).val().length && 0 === dvJQuery(a.dom.digisignInfoLocationInput).val().length && 0 === dvJQuery(a.dom.digisignInfoContactInput).val().length &&
                                (dvJQuery(a.dom.digisignInfoNameInput).css({
                                    border: "1px solid red"
                                }), dvJQuery(a.dom.digisignInfoReasonInput).css({
                                    border: "1px solid red"
                                }), dvJQuery(a.dom.digisignInfoLocationInput).css({
                                    border: "1px solid red"
                                }), dvJQuery(a.dom.digisignInfoContactInput).css({
                                    border: "1px solid red"
                                }), dvJQuery(a.dom.digisignInfoRequired).css({
                                    color: "red"
                                }),
                                    //AGjs__changes for unique id declaration
                                    a.dom.digisignInfoNameInput.focus(), d = !0), null == dvJQuery(a.dom.digisignCertNameSelect).val() && (dvJQuery("#digisign_certificate_name" + sessionStorage.controlID + "-button").css({
                                        border: "1px solid red"
                                    }),
                                        a.dom.digisignCertNameSelect.focus(), d = !0), 0 === dvJQuery(a.dom.digisignCertPasswordInput).val().length && (dvJQuery(a.dom.digisignCertPasswordInput).css({
                                            border: "1px solid red"
                                        }),
                                            //AGjs__changes for unique id declaration
                                            a.dom.digisignCertPasswordInput.focus(), d = !0), "timestamp" === dvJQuery("input[name=digisign_timestamp" + sessionStorage.controlID + "]:checked").val() && (0 === dvJQuery(a.dom.digisignTimestampServerInput).val().length && (dvJQuery(a.dom.digisignTimestampServerInput).css({
                                                border: "1px solid red"
                                            }), a.dom.digisignTimestampServerInput.focus(), d = !0), 0 ===
                                            dvJQuery(a.dom.digisignTimestampLoginInput).val().length && (dvJQuery(a.dom.digisignTimestampLoginInput).css({
                                                border: "1px solid red"
                                            }), a.dom.digisignTimestampLoginInput.focus(), d = !0), 0 === dvJQuery(a.dom.digisignTimestampPasswordInput).val().length && (dvJQuery(a.dom.digisignTimestampPasswordInput).css({
                                                border: "1px solid red"
                                            }),
                                                //AGjs__changes for unique id declaration
                                                a.dom.digisignTimestampPasswordInput.focus(), d = !0))) : "text" === dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "]:checked").val() && 0 === dvJQuery(a.dom.digisignAppearanceTextInput).val().length ?
                                    (dvJQuery(a.dom.digisignAppearanceTextInput).css({
                                        border: "1px solid red"
                                    }),
                                        //AGjs__changes for unique id declaration
                                        a.dom.digisignAppearanceTextInput.focus(), d = !0) : "image" === dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "]:checked").val() && 0 === a.dom.digisignAppearanceImageInputFile.files.length && (dvJQuery(a.dom.digisignAppearanceImageInputFile).css({
                                            border: "1px solid red"
                                        }), a.dom.digisignAppearanceImageInputFile.focus(), d = !0);
                            return d ? !1 : !0
                        },
                        beginAddSignatureInteractive: function () {
                            a.Internal.DigiSign.signatureMode = !0;
                            a.SetMouseMode(1);
                            a.Internal.Selection.selectionArea.setLineMode(0);
                            a.events.ownMouseEvents = !0;
                            return DocuViewareAPI.Status.OK
                        },
                        stopAddSignatureInteractive: function () {
                            a.Internal.DigiSign.signatureMode = !1;
                            null != a.Internal.DigiSign.currentSignatureData && (a.Internal.DigiSign.currentSignatureData = null, a.SetMouseMode(0), a.events.ownMouseEvents = !1);
                            a.Internal.DigiSign.resetPropertiesToDefault()
                        },
                        addSignatureInteractive: function (b) {
                            a.SetMouseMode(0);
                            a.events.ownMouseEvents = !1;
                            if (!b) {
                                var d = a.Internal.Pages.getRenderingState(a.GetCurrentPage());
                                b = a.Internal.Selection.selectionArea.getPageBounds();
                                d = a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix), 1 / 96, 1 / 96, !1);
                                a.Internal.Matrix.transformBBox(d, 0, b);
                                a.Internal.DigiSign.currentSignatureData.signatureLeft = a.Internal.Utilities.roundEx(b.left, 7);
                                a.Internal.DigiSign.currentSignatureData.signatureTop = a.Internal.Utilities.roundEx(b.top, 7);
                                a.Internal.DigiSign.currentSignatureData.signatureWidth = a.Internal.Utilities.roundEx(b.width, 7);
                                a.Internal.DigiSign.currentSignatureData.signatureHeight =
                                    a.Internal.Utilities.roundEx(b.height, 7);
                                "text" === a.Internal.DigiSign.currentSignatureData.signatureAppearanceType && (a.Internal.DigiSign.currentSignatureData.signatureFontName = a.Internal.DigiSign.defaultTextSignatureAppearance.fontName, a.Internal.DigiSign.currentSignatureData.signatureFontSize = a.Internal.DigiSign.defaultTextSignatureAppearance.fontSize, a.Internal.DigiSign.currentSignatureData.signatureFontLineWidth = a.Internal.DigiSign.defaultTextSignatureAppearance.fontLineWidth, a.Internal.DigiSign.currentSignatureData.signatureVerticalAlignment =
                                    a.Internal.DigiSign.defaultTextSignatureAppearance.verticalAlignment, a.Internal.DigiSign.currentSignatureData.signatureHorizontalAlignment = a.Internal.DigiSign.defaultTextSignatureAppearance.horizontalAlignment, a.Internal.DigiSign.currentSignatureData.signatureFontColor = a.Internal.DigiSign.defaultTextSignatureAppearance.fontColor)
                            }
                            console.log(a.Internal.DigiSign.currentSignatureData);
                            a.ajax.PostBaseRequest({
                                url: a.appControllerPath + "/digisign" + (a.useIdInRoot ? "/1" : ""),
                                data: a.Internal.DigiSign.currentSignatureData,
                                success: function (a) {
                                    console.log(a)
                                }
                            }, !1);
                            a.Internal.DigiSign.stopAddSignatureInteractive()
                        },
                        showSignaturePadUI: function () {
                            a.DisplayDialogForm(dvJQuery(a.dom.signaturePadDialogForm), a.Localize("_label_digisign_pad_title"), function () { }, function () {
                                dvJQuery(a.dom.commentDialogModalOverlay).show()
                            }, function () {
                                dvJQuery(a.dom.commentDialogModalOverlay).hide()
                            }, [{
                                text: a.Localize("_label_button_pad_cancel"),
                                click: function () {
                                    dvJQuery(a.dom.signaturePadDialogForm).dvDialog("close")
                                }
                            }, {
                                text: a.Localize("_label_button_pad_add"),
                                "class": "btn-valid",
                                click: function () {
                                    a.Internal.DigiSign.currentSignatureData.signatureImageData = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAABZCAMAAABG4DUYAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAJCQkSEgkSEhISG1IbUhIbUhtbW1IbW1tbZFtkW1tkZFtkZGRkbaRtpGRtraRtra22ra22tq22tra/9ra///a////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfI9e6gAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAAJcEhZcwAAFiQAABYkAZsVxhQAAAARdEVYdEF1dGhvcgBQaWNhc2EgMy4w5bQBJgAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4yMfEgaZUAAAg0SURBVGhD1ZoPe6MoEMZ7Sz3mIhtt3Ob7f9PeO8OAqKBoubb3PvtsMDH6Y5x/kL58nJSz1hjSg+/QSWLqOiPS42/QKWJrybjp+Xy+0/chnyAmAI/AFRmn7365qokdkX1TXKj/NiPXEluyTmFF7ocTO7LE/jvr/rOJ4RALA0M/28YAXhoY+tHERPSunLMapbcLEz8mJlp7BMu2KXvO9Dqq1hExklrMwYkme9cTPicyg46qdUBcAH46qyd8UhfK/T4xgDcxJ2pVpVsTF4EnalSkGxMDeJskRK2cwl3oW3eIeyIF3KiVU1wIvB1iWFj5Npro/I2y6i7MvEzcl1zCO0WTdYhtSbwNung8EdOa88l/LdeSmOxD+YKcCbXPvcopg/klr9d1JfBKxI7uihdljBq53ZIJLaGOTihP3PebXmL2kqE2tR1OjDodnFGeeJsm3oKFmV3POpA7LA/dlejNEmeizsT2orp6GHNwJlY2OjqjHHGm+5k7Tp8oanSYCNB46+iMMsRu2xC72Utcre/RkYlB3MjGWyce51VTvYmPmxy6tPTaEmf6tdmJn9VmwepbRyU5OzYhdjQoXFTiJUN1m/laYeI2xFufSJx4qve844UgjU2Ic4ltfqc+uCvqop1aEDvqFS7oPXFiZBE971Apcf5Lg322ICarcEFTMoVHvU8kwFTYbnZ9C+JN7UBSjV1yfWJLqwdZTDNHhgifWhArndcE68zvnKlQcXuZZJTbbUbATCeuGLUg7mnRFI+mS4BPOPHsFGiq+SVnS8NPTcdntCBemth11uCyKsSknrWj0K6ZUMq1Zc8QS878bLe5zGxwQJt0bFU+Ybz/RhPrILehL2Xpygp3SezpRGhTbFwnnQOeWwp9zS01JMavbNQkxH2aKMTCcQZjETi9Z/AJCk4RvpUxMeoHrutq7LBSQmwTE6OPQR7Vg+e9CGzS1anxYTavPfR1yBAPHV/4SkKeidFKCR4LvTbZCDwUK4fBg9AhA/sxpiqvCC7/mptvL+a5kpBn4plQLRxKx2ZXIR4aS/P6fQYOgRc+ys1X+8FPEXcxzMjebjb2P269fnwl9QRr3dyTw9xynjMUfFu9Odu3a8ysYxIedTSJSEwRERbu57zWr58piPxFuWcP1x86mFtGxga3DeDZINBVzSL0euCeIQ5x13fswwF4s5Qw9m9/TceIen3MUIcYBKfQl+gUnidEp798DD1HnfxIr4c7CsSu06UHA1MARvOzqnSEj/1lxbu9G2OGuvnAnwXb6t2jU6BHQVpHHQV0sA+HHt7sOJfik5qCEohD3DkEXRcqx9jZ1TVg8slvofqtX7GYDz8eigXVpk7Bo1PAR8UQE+5h+vfpMQ6Of53vEMCS/vULBwrEWi1wsVsEdta+PRcPChfHjfnKOJH/5w9xQ/4MQ/lTES7J/EYAnb/PYYVTWB2qjPylBqJ3nKYBD66ONxLf/fRHzJY67eGRLx7PuRxA8vS9U3hDgx4neMcRGrzCpqiWkTh4tZe090wNH8A6b/oz4NmOMHOY37GU2GcKAMfaPOF54UUjReT3TGQKYR58+3CCB2ZS6S+UIeubvcH1xUiTGXt4hL5fIyWWivyQoPMNHEzHvhHrF6Rjbhr6aJPtxg/7DRP7iSxNHCSBh8yN/w162lqHEAVifBmJATYWYKzyxehYhMTHBfPLK7+TuspK7BSS+Lzy3ZmveA9jEIUnHEIUiHEJUOLrWIXIZfiSqYljYsY7O8CMOKdknwK3CtkTkZd/CDsKxHemg+siHDg6/BX5L8X859HCHGxJM7EVTb37uOnXdNG0kdbXESm4rvNOFL2CU4+EcOSFT8RHtuh49jaoevuGT0PVKJx5k+T/joeKVHPWyDHymJefqP/zMBFKkdoordU4U0c5keMdcSUuwVjeFXmgLmPMlvLvVkqJwTHJYjlZi47GxjunT273KdIoH8v3ilWBo+Y+B0Z1rnAsJSY7jtL5zcTIE2qrE+E86J4w/1f+7Qtu16Oy6hHuqYOCBufu+KdHnpjsHdWDRzMxNw5y+yTDHQqOJSCI2EW1XMoMaZ4vagAnSw9VntjcRsWKKxGJ4d8wxBlgEGtK4cDwo6042jaFJxFT9rNRVxJiQ0NwKlJi9gmIb3wCGMTh7LVpEhlb+FkMj5+lRwUxMWIgYjld3oVETP4X3Rpxn7tn2qhtqCnqAasXiLGQm9OQ88m9vvljgdUYpuV9r8NnsjpjcDe4QP3mEIhxhWT/S8oHEpseHqonyy25n6CUoIOb40HoCN7aw2FP/lXXCzx3Ufw5V441kQxhCYHpJk+DC7wOS9KK4ZD96XbmQQa9oHtc3ASlpAoY3YWxq0UgaI5cAtfvDCybzvOcXjZWwRuHTszG3bINFRbmp1C1AC0KxDqKOrqto1fzj45TAWa3D4MXcOdyooJm5StIvXq4ffYJ9FjvUXE/GNmEbp8ybdQpYvaFvMPcDTrs/J7tgIlo7W6iemJeApbui/SNnIhEp8dRDo5wPciyqiTmdUfxxp73+bzZJK97297a/AltqhpiXhuXowVz8WsArGzjpJC+qG9Pyzom5hSgw4wirxDLWygOrT0h1QGxrP50nBH6xrjGeo4duTvbtk1OKGmH2Gf7PWPZ9BfLiYvgf2jboB3ivw5qbtyzhUZp33ZPb6U9r9iNHDK/lXYaOU8Pw2HX1kbHkZdVdGCswPUHkNL+T2tdI9ZfHRh3dvQfTAwDA/fBu3OJH5QX+211gZi3jXhzbvWLw7mF1nWdJ/4le3Nbe9YsA1rogo0LOfcHExf0vyMevijwWtr4SwLv4+Nfb7y4sNx6yf4AAAAASUVORK5CYII=";
                                    a.Internal.DigiSign.beginAddSignatureInteractive();
                                    dvJQuery(a.dom.signaturePadDialogForm).dvDialog("close")
                                }
                            }])
                        },
                        showSignaturePropertiesUI: function () {
                            //AGjs__changes for unique id declaration
                            var b = dvJQuery("input[name=digisign_signature_type" + sessionStorage.controlID + "]:checked").val();
                            if (b) {
                                var c = parseInt(b);
                                a.DisplayDialogForm(dvJQuery(a.dom.digisignDialogForm), a.Localize("_label_digisign_dialog_title"), function () {
                                    dvJQuery(a.dom.digisignCertNameSelect).empty();
                                    a.ajax.PostBaseRequest({
                                        url: a.appControllerPath + "/getavailablecertificates" + (a.useIdInRoot ?
                                            "/1" : ""),
                                        data: null,
                                        success: function (b) {
                                            b = JSON.parse(b);
                                            for (var d = 0; d < b.certificates.length; d++) {
                                                var c = document.createElement("option");
                                                c.text = b.certificates[d];
                                                a.dom.digisignCertNameSelect.add(c)
                                            }
                                        }
                                    }, !0)
                                }, function () {
                                    a.Internal.DigiSign.initializePropertiesUI();
                                    0 === c ? (dvJQuery(a.dom.digisignInfoFieldSet).hide(), dvJQuery(a.dom.digisignAppearanceInvisible).hide(), dvJQuery(a.dom.digisignCertificateFieldset).hide(), dvJQuery(a.dom.digisignTimestampFieldset).hide()) : 1 === c ? (dvJQuery(a.dom.digisignInfoFieldSet).show(),
                                        dvJQuery(a.dom.digisignAppearanceInvisible).show(), dvJQuery(a.dom.digisignCertificateFieldset).show(), dvJQuery(a.dom.digisignTimestampFieldset).show(), dvJQuery(a.dom.digisignCertificationLevelFieldSet).hide()) : 2 === c ? (dvJQuery(a.dom.digisignInfoFieldSet).show(), dvJQuery(a.dom.digisignAppearanceInvisible).show(), dvJQuery(a.dom.digisignCertificateFieldset).show(), dvJQuery(a.dom.digisignTimestampFieldset).show(), dvJQuery(a.dom.digisignCertificationLevelFieldSet).show()) : dvJQuery(a.dom.digisignDialogForm).dvDialog("close");
                                    dvJQuery(a.dom.digisignDialogForm).dvDialog("option", "position", {
                                        my: "center",
                                        at: "center",
                                        of: dvJQuery(a.dom.mainArea)
                                    })
                                }, null, [{
                                    text: a.Localize("_label_button_digisign_cancel"),
                                    click: function () {
                                        dvJQuery(a.dom.digisignDialogForm).dvDialog("close")
                                    }
                                }, {
                                    text: a.Localize("_label_button_digisign_apply"),
                                    "class": "btn-valid",
                                    click: function () {
                                        a.Internal.DigiSign.initializePropertiesUI();
                                        if (a.Internal.DigiSign.propertiesInputChecks(c)) {
                                            var b = null,
                                                d = function () {
                                                    //AGjs__changes for unique id declaration
                                                    a.Internal.DigiSign.currentSignatureData = {
                                                        signatureType: c,
                                                        signatureInfoName: dvJQuery(a.dom.digisignInfoNameInput).val(),
                                                        signatureInfoReason: dvJQuery(a.dom.digisignInfoReasonInput).val(),
                                                        signatureInfoLocation: dvJQuery(a.dom.digisignInfoLocationInput).val(),
                                                        signatureInfoContactInfo: dvJQuery(a.dom.digisignInfoContactInput).val(),
                                                        certificateDisplayName: dvJQuery(a.dom.digisignCertNameSelect).val(),
                                                        certificatePassword: dvJQuery(a.dom.digisignCertPasswordInput).val(),
                                                        certificationLevel: parseInt(dvJQuery(a.dom.digisignCertLevelSelect).val()),
                                                        signatureAppearanceType: dvJQuery("input[name=digisign_appearance" +
                                                            sessionStorage.controlID + "]:checked").val(),
                                                        signatureImageData: b,
                                                        signatureText: dvJQuery(a.dom.digisignAppearanceTextInput).val(),
                                                        includeTimestamp: "timestamp" === dvJQuery("input[name=digisign_timestamp" + sessionStorage.controlID + "]:checked").val(),
                                                        timestampServer: dvJQuery(a.dom.digisignTimestampServerInput).val(),
                                                        timestampUsername: dvJQuery(a.dom.digisignTimestampLoginInput).val(),
                                                        timestampPassword: dvJQuery(a.dom.digisignTimestampPasswordInput).val()
                                                    };
                                                    "pad" === dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "]:checked").val() ?
                                                        a.Internal.DigiSign.showSignaturePadUI() : "none" === dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "]:checked").val() ? a.Internal.DigiSign.addSignatureInteractive(!0) : a.Internal.DigiSign.beginAddSignatureInteractive()
                                                },
                                                g = !1;
                                            if ("image" === dvJQuery("input[name=digisign_appearance" + sessionStorage.controlID + "]:checked").val() && a.dom.digisignAppearanceImageInputFile.files && a.dom.digisignAppearanceImageInputFile.files[0])
                                                if (2097152 < a.dom.digisignAppearanceImageInputFile.files[0].size) alert(a.Localize("label_digisign_image_file_toobig"));
                                                else {
                                                    var e = "",
                                                        h = function () {
                                                            !0 === g ? (b = e, d()) : setTimeout(h, 100)
                                                        };
                                                    h();
                                                    var f = new FileReader;
                                                    f.onloadend = function (a) {
                                                        e = a.target.result;
                                                        g = !0
                                                    };
                                                    f.readAsDataURL(a.dom.digisignAppearanceImageInputFile.files[0]);
                                                    dvJQuery(a.dom.digisignDialogForm).dvDialog("close")
                                                }
                                            else d(), dvJQuery(a.dom.digisignDialogForm).dvDialog("close")
                                        }
                                    }
                                }])
                            }
                        },
                        parseCertificateDN: function (b) {
                            var d = document.createElement("ul");
                            d.setAttribute("class", "dv-signature-certinfo");
                            b = b.split(",");
                            for (var c = 0; c < b.length; c++) {
                                var e = document.createElement("li");
                                b[c].startsWith("CN=") ? e.textContent = a.Localize("label_digisign_certificate_cn") + b[c].split("=")[1].trim() : b[c].startsWith("O=") ? e.textContent = a.Localize("label_digisign_certificate_o") + b[c].split("=")[1].trim() : b[c].startsWith("OU=") ? e.textContent = a.Localize("label_digisign_certificate_ou") + b[c].split("=")[1].trim() : b[c].startsWith("L=") ? e.textContent = a.Localize("label_digisign_certificate_l") + b[c].split("=")[1].trim() : b[c].startsWith("ST=") ? e.textContent = a.Localize("label_digisign_certificate_st") +
                                    b[c].split("=")[1].trim() : b[c].startsWith("C=") && (e.textContent = a.Localize("label_digisign_certificate_c") + b[c].split("=")[1].trim());
                                d.appendChild(e)
                            }
                            return d
                        },
                        generateSignaturesMarkup: function (b) {
                            for (var d = 0; d < b.length; d++) {
                                var c = document.createElement("div");
                                c.setAttribute("class", "dv-signature-wrapper");
                                var e = document.createElement("div");
                                b[d].CertificateValid && b[d].DocumentValid ? (e.setAttribute("class", "dv-signature-header signature-status-valid"), e.setAttribute("title", a.Localize("label_digisign_signature_valid"))) :
                                    (e.setAttribute("class", "dv-signature-header signature-status-invalid"), e.setAttribute("title", a.Localize("label_digisign_signature_invalid")));
                                var h = document.createElement("span");
                                h.textContent = a.Localize("label_digisign_signed_by") + b[d].CertificateFriendlyName;
                                e.appendChild(h);
                                c.appendChild(e);
                                e = document.createElement("div");
                                e.setAttribute("class", "dv-signature-content");
                                h = document.createElement("ul");
                                var f = document.createElement("li");
                                0 === b[d].SignatureLevel ? f.textContent = a.Localize("label_digisign_signature_standard") :
                                    1 === b[d].SignatureLevel ? f.textContent = a.Localize("label_digisign_signature_nochanges") : 2 === b[d].SignatureLevel ? f.textContent = a.Localize("label_digisign_signature_fromfill") : 3 === b[d].SignatureLevel && (f.textContent = a.Localize("label_digisign_signature_comment"));
                                h.appendChild(f);
                                f = document.createElement("li");
                                var k = new Date(b[d].SigningTime);
                                f.textContent = a.Localize("label_digisign_signature_signed_on") + k;
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_signature_name") +
                                    b[d].SignatureName;
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_signature_reason") + b[d].SignatureReason;
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_signature_location") + b[d].SignatureLocation;
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_signature_contact") + b[d].SignatureContactInfo;
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_certificate_issuer");
                                k = a.Internal.DigiSign.parseCertificateDN(b[d].CertificateIssuer);
                                f.appendChild(k);
                                h.appendChild(f);
                                f = document.createElement("li");
                                f.textContent = a.Localize("label_digisign_certificate_subject");
                                k = a.Internal.DigiSign.parseCertificateDN(b[d].CertificateSubject);
                                f.appendChild(k);
                                h.appendChild(f);
                                f = document.createElement("li");
                                k = new Date(b[d].CertificateNotBefore);
                                var l = new Date(b[d].CertificateNotAfter);
                                f.textContent = a.Localize("label_digisign_certificate_from") + k + a.Localize("label_digisign_certificate_to") +
                                    l;
                                h.appendChild(f);
                                e.appendChild(h);
                                c.appendChild(e);
                                e = document.createElement("div");
                                e.setAttribute("class", "dv-signature-options");
                                h = document.createElement("div");
                                h.setAttribute("class", "dv-signature-options-left");
                                f = document.createElement("span");
                                b[d].CertificateValid ? (f.setAttribute("class", "dv-signature-certificate-valid"), f.setAttribute("title", a.Localize("label_digisign_certificate_valid"))) : (f.setAttribute("class", "dv-signature-certificate-invalid"), f.setAttribute("title", a.Localize("label_digisign_certificate_invalid")));
                                f.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16"><path d="M13 5c0-0.791-0.613-1.439-1.39-1.495 0.509-0.589 0.485-1.481-0.075-2.040s-1.451-0.584-2.040-0.075c-0.057-0.777-0.704-1.389-1.496-1.389s-1.439 0.613-1.495 1.389c-0.589-0.509-1.481-0.484-2.040 0.075s-0.584 1.451-0.075 2.040c-0.777 0.057-1.389 0.704-1.389 1.495s0.613 1.439 1.389 1.495c-0.509 0.589-0.485 1.481 0.075 2.040 0.415 0.415 1.014 0.536 1.536 0.362v6.603l2-2 2 2v-6.603c0.522 0.174 1.12 0.054 1.536-0.362 0.559-0.559 0.584-1.451 0.075-2.040 0.777-0.057 1.39-0.704 1.39-1.496zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3c1.657 0 3 1.343 3 3s-1.343 3-3 3z"></path></svg>';
                                f.setAttribute("style", "margin-right:15px");
                                h.appendChild(f);
                                f = document.createElement("span");
                                b[d].DocumentValid ? (f.setAttribute("class", "dv-signature-document-valid"), f.setAttribute("title", a.Localize("label_digisign_document_valid"))) : (f.setAttribute("class", "dv-signature-document-invalid"), f.setAttribute("title", a.Localize("label_digisign_document_invalid")));
                                f.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16"><path d="M11 4h3.627c-0.078-0.126-0.172-0.266-0.286-0.421-0.347-0.473-0.831-1.027-1.362-1.558s-1.085-1.015-1.558-1.362c-0.155-0.114-0.295-0.208-0.421-0.286v3.627z"></path><path d="M10 4.5v-4.5h-7.75c-0.689 0-1.25 0.561-1.25 1.25v13.5c0 0.689 0.561 1.25 1.25 1.25h11.5c0.689 0 1.25-0.561 1.25-1.25v-9.75h-4.5c-0.276 0-0.5-0.224-0.5-0.5z"></path></svg>';
                                h.appendChild(f);
                                e.appendChild(h);
                                h = document.createElement("div");
                                h.setAttribute("class", "dv-signature-options-right");
                                f = document.createElement("span");
                                f.addEventListener("mouseover", function () {
                                    dvJQuery(this).css("cursor", "pointer")
                                });
                                f.addEventListener("mouseout", function () {
                                    dvJQuery(this).css("cursor", "default")
                                });
                                f.addEventListener("click", function (a) {
                                    a.stopPropagation();
                                    a = dvJQuery(this).parent().parent().parent().find(".dv-signature-content");
                                    a.is(":visible") ? (a.slideUp(250), dvJQuery(this).html('<svg width="16" height="16" viewBox="0 0 16 16"><path d="M2 5h-2v-4c0-0.552 0.448-1 1-1h4v2h-3v3z"></path><path d="M16 5h-2v-3h-3v-2h4c0.552 0 1 0.448 1 1v4z"></path><path d="M15 16h-4v-2h3v-3h2v4c0 0.552-0.448 1-1 1z"></path><path d="M5 16h-4c-0.552 0-1-0.448-1-1v-4h2v3h3v2z"></path></svg>')) :
                                        (a.slideDown(250), dvJQuery(this).html('<svg width="16" height="16" viewBox="0 0 16 16"><path d="M3 0h2v4c0 0.552-0.448 1-1 1h-4v-2h3v-3z"></path><path d="M11 0h2v3h3v2h-4c-0.552 0-1-0.448-1-1v-4z"></path><path d="M12 11h4v2h-3v3h-2v-4c0-0.552 0.448-1 1-1z"></path><path d="M0 11h4c0.552 0 1 0.448 1 1v4h-2v-3h-3v-2z"></path></svg>'))
                                });
                                f.setAttribute("class", "dv-signature-toggle");
                                f.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16"><path d="M2 5h-2v-4c0-0.552 0.448-1 1-1h4v2h-3v3z"></path><path d="M16 5h-2v-3h-3v-2h4c0.552 0 1 0.448 1 1v4z"></path><path d="M15 16h-4v-2h3v-3h2v4c0 0.552-0.448 1-1 1z"></path><path d="M5 16h-4c-0.552 0-1-0.448-1-1v-4h2v3h3v2z"></path></svg>';
                                f.setAttribute("style", "fill:" + a.dom.UIconfig.strokeColor + ";");
                                f.setAttribute("title", a.Localize("label_digisign_collapse"));
                                h.appendChild(f);
                                e.appendChild(h);
                                c.appendChild(e);
                                a.dom.signaturesContainer.appendChild(c)
                            }
                        }
                    },
                    Annotations: {
                        DEFAULT_GRIP_SIZE: 6,
                        CANVAS_PADDING: 19,
                        currentAnnotProperties: null,
                        currentAnnotPageNo: 0,
                        selected: [],
                        cached: [],
                        mouseOverAnnot: !1,
                        annotEdit: null,
                        defaultAuthor: null,
                        defaultProperties: {
                            0: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),
                            1: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),
                            2: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),
                            3: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),
                            4: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),
                            5: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),
                            6: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),
                            7: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),
                            8: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),
                            9: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),
                            10: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),
                            11: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),
                            12: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),
                            13: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),
                            14: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),
                            15: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),
                            16: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),
                            2048: DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)
                        },
                        defaultPropertiesDisplay: {
                            0: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),
                            1: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),
                            2: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),
                            3: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),
                            4: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),
                            5: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),
                            6: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),
                            7: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),
                            8: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),
                            9: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),
                            10: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),
                            11: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),
                            12: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),
                            13: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),
                            14: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),
                            15: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),
                            16: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),
                            2048: DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)
                        },
                        setDefaultPropertiesValues: function (a, b) {
                            this.defaultProperties[a] = this.mergeAnnotationProperties(a, b)
                        },
                        setDefaultPropertiesToDisplay: function (a, b) {
                            this.defaultPropertiesDisplay[a] = b
                        },
                        setDefaultAuthor: function (a) {
                            this.defaultAuthor =
                                a
                        },
                        getAnnotPropertiesValues: function (b) {
                            b = a.Internal.Annotations.defaultProperties[b];
                            delete b.autoCreate;
                            delete b.left;
                            delete b.top;
                            delete b.width;
                            delete b.height;
                            delete b.startX;
                            delete b.startY;
                            return b
                        },
                        getAnnotationTitleFromType: function (b) {
                            var d = "";
                            switch (b) {
                                case 0:
                                    d = a.Localize("_label_rubber_stamp_properties");
                                    break;
                                case 1:
                                    d = a.Localize("_label_rectangle_properties");
                                    break;
                                case 2:
                                    d = a.Localize("_label_rectangle_highlighter_properties");
                                    break;
                                case 3:
                                    d = a.Localize("_label_line_properties");
                                    break;
                                case 4:
                                    d = a.Localize("_label_line_arrow_properties");
                                    break;
                                case 5:
                                    d = a.Localize("_label_connected_line_properties");
                                    break;
                                case 6:
                                    d = a.Localize("_label_ellipse_properties");
                                    break;
                                case 7:
                                    d = a.Localize("_label_embedded_image_properties");
                                    break;
                                case 8:
                                    d = a.Localize("_label_text_properties");
                                    break;
                                case 9:
                                    d = a.Localize("_label_stickynote_properties");
                                    break;
                                case 10:
                                    d = a.Localize("_label_freehand_properties");
                                    break;
                                case 11:
                                    d = a.Localize("_label_freehand_highlighter_properties");
                                    break;
                                case 12:
                                    d = a.Localize("_label_freehand_polygon_properties");
                                    break;
                                case 13:
                                    d = a.Localize("_label_link_properties");
                                    break;
                                case 14:
                                    d = a.Localize("_label_polygon_properties");
                                    break;
                                case 15:
                                    d = a.Localize("_label_ruler_properties");
                                    break;
                                case 16:
                                    d = a.Localize("_label_polyruler_properties")
                            }
                            return d
                        },
                        editSelectedAnnotation: function () {
                            //AGjs__changes for we can Edit single annotaion at a time 
                            // that validation if
                            if (allPdfComp.Internal.Annotations.selected.length == 1) {
                                var b = a.dom.selectedAnnotation;
                                if (null != a.dom.selectedAnnotation && a.dom.selectedAnnotation.annotApp.canEdit) {
                                    a.EditAnnotInteractive(b, this.defaultPropertiesDisplay[b.annotApp.properties.type])
                                }
                            }
                        },
                        getAllFirstAnnotationComments: function (b) {
                            for (var d = [], c = 0; c < a.cache.AnnotsComments.length; c++) {
                                var e = !1,
                                    f = a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[c].annotApp.id);
                                if (null != f) {
                                    for (var h = 0; h < d.length; h++)
                                        if (d[h].comment.annotApp.id === f.annotApp.id) {
                                            e = !0;
                                            break
                                        } e || d.push({
                                            comment: f
                                        })
                                }
                            }
                            null != b && b(d);
                            return d
                        },
                        getFirstAnnotationCommentOfAnnotationFromId: function (b, c) {
                            if (null != b && "" != b && (c = a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy), null != c))
                                for (var d = 0; d < c.length; d++)
                                    if (c[d].comment.annotApp.properties.previousGuid ===
                                        b) return c[d];
                            return null
                        },
                        getAnnotationCommentFromId: function (b) {
                            if (null != b && "" != b)
                                for (var d = 0; d < a.cache.AnnotsComments.length; d++)
                                    if (a.cache.AnnotsComments[d].annotApp.id === b) return a.cache.AnnotsComments[d];
                            return null
                        },
                        getFirstAnnotationCommentOfDiscussion: function (b) {
                            b = a.Internal.Annotations.getAnnotationCommentFromId(b);
                            if (null != b) {
                                for (; ;) {
                                    var d = a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
                                    if (null != d) b = d;
                                    else break
                                }
                                return b
                            }
                            return null
                        },
                        getFirstAnnotationCommentAnswerOfDiscussion: function (b) {
                            b =
                                a.Internal.Annotations.getAnnotationCommentFromId(b);
                            return null != b && (b = a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id), null != b) ? a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid) : null
                        },
                        getLastAnnotationCommentAnswerOfDiscussion: function (b) {
                            b = a.Internal.Annotations.getAnnotationCommentFromId(b);
                            if (null != b) {
                                for (; ;) {
                                    var d = a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);
                                    if (null != d) b = d;
                                    else break
                                }
                                return b
                            }
                            return null
                        },
                        getAnnotationCommentOwnerAnnotApp: function (b, c) {
                            if (null == b || 2048 != b.properties.type) return null;
                            if (c)
                                for (; ;)
                                    if (c = a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b, !1), null != c)
                                        if (2048 == c.properties.type) b = c;
                                        else return c;
                                    else break;
                            if (null != a.cache.AnnotsComments)
                                for (c = 0; c < a.cache.AnnotsComments.length; c++) {
                                    var d = a.cache.AnnotsComments[c];
                                    if (d.annotApp.id == b.properties.previousGuid) return d.annotApp
                                }
                            if (null != a.cache.Annots)
                                for (c = 0; c < a.cache.Annots.length; c++)
                                    if (d = a.cache.Annots[c], d.annotApp.id ==
                                        b.properties.previousGuid) return d.annotApp;
                            return null
                        },
                        deleteAnnotationComment: function (b, c) {
                            for (var d = !1, g = 0; g < a.cache.AnnotsComments.length; g++)
                                if (a.cache.AnnotsComments[g].annotApp.id === b) {
                                    b = a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.nextGuid);
                                    d = a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.previousGuid);
                                    null == b ? null != d && (d.annotApp.properties.nextGuid = null) : null != d ? (d.annotApp.properties.nextGuid =
                                        b.annotApp.id, b.annotApp.properties.previousGuid = d.annotApp.id) : b.annotApp.properties.previousGuid = null;
                                    a.cache.AnnotsComments.splice(g, 1);
                                    d = !0;
                                    break
                                } return d ? (c && a.refreshCommentsPanel(), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                        },
                        scrollToSelectedAnnotationCommentVisibility: function (b) {
                            var d = dvJQuery(a.dom.commentsContainer),
                                c = d.innerHeight(),
                                //AGjs__changes for unique id declaration
                                e = dvJQuery("#dvcomment-" + b + "-" + sessionStorage.controlID);
                            b = e.position().top;
                            e = e.children(".dvcomment-header").outerHeight() + e.children(".dvcomment-content").children(".dvcomment-message").outerHeight();
                            0 > b ? d.animate({
                                scrollTop: d.scrollTop() + b
                            }, 600) : b > c && d.animate({
                                scrollTop: d.scrollTop() + (e + (b - c))
                            }, 600)
                        },
                        resetAnnotationCommentSelection: function () {
                            var b = a.Internal.Annotations.getSelectedAnnotationComment();
                            b && dvJQuery(b).removeClass("dvcomment-selected");
                            //AGjs__changes for unique id declaration
                            dvJQuery(a.dom.commentsArea).find("#commentsContainer" + sessionStorage.controlID).children(".dvcomment").children().each(function () {
                                dvJQuery(this).find(".dvcomment-header").css({
                                    border: "",
                                    "padding-left": "",
                                    "padding-top": "",
                                    "padding-bottom": "",
                                    "padding-right": ""
                                });
                                dvJQuery(this).find(".dvcomment-message").css({
                                    "border-bottom": "",
                                    "border-left": "",
                                    "border-right": "",
                                    "padding-left": "",
                                    "padding-right": "",
                                    "padding-bottom": ""
                                });
                                dvJQuery(this).children(".dvcomment-content").children(".dvanswer").each(function () {
                                    dvJQuery(this).find(".dvcomment-header").css({
                                        border: "",
                                        "padding-left": "",
                                        "padding-top": "",
                                        "padding-bottom": "",
                                        "padding-right": ""
                                    });
                                    dvJQuery(this).find(".dvcomment-message").css({
                                        "border-bottom": "",
                                        "border-left": "",
                                        "border-right": "",
                                        "padding-left": "",
                                        "padding-right": "",
                                        "padding-bottom": ""
                                    })
                                })
                            })
                        },
                        getSelectedAnnotationComment: function () {
                            //AGjs__changes for unique id 
                            return dvJQuery(a.dom.commentsArea).find("#commentsContainer" + sessionStorage.controlID).find(".dvcomment-selected")
                        },
                        selectAnnotationCommentById: function (b, c) {
                            var d = a.Internal.Annotations.getSelectedAnnotationComment();
                            //AGjs__changes for unique id declaration
                            dvJQuery(d).attr("id") !== "dvcomment-" + b + "-" + sessionStorage.controlID && (a.Internal.Annotations.resetAnnotationCommentSelection(), d = document.getElementById("dvcomment-" + b + "-" + sessionStorage.controlID), dvJQuery(d).addClass("dvcomment-selected"), dvJQuery(d).children(".dvcomment-header").css({
                                border: "3px solid " +
                                    a.dom.UIconfig.headerColor,
                                "padding-left": "7px",
                                "padding-top": "7px",
                                "padding-bottom": "7px",
                                "padding-right": "7px"
                            }), dvJQuery(d).children(".dvcomment-content").children(".dvcomment-message").css({
                                "border-bottom": "3px solid " + a.dom.UIconfig.headerColor,
                                "border-left": "3px solid " + a.dom.UIconfig.headerColor,
                                "border-right": "3px solid " + a.dom.UIconfig.headerColor,
                                "padding-left": "8px",
                                "padding-right": "8px",
                                "padding-bottom": "8px"
                            }));
                            c && a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b)
                        },
                        removeSelectedAnnotation: function (tempData) {
                            null != a.dom.selectedAnnotation && a.dom.selectedAnnotation.annotApp.canDelete && a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm), a.Localize("_title_confirm_annotation_removal"), null, function () {
                                dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_annotation_removal"))
                            }, null, [{
                                text: a.Localize("_label_no"),
                                click: function () {

                                    dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")
                                }
                            }, {
                                text: a.Localize("_label_yes"),
                                "class": "btn-valid",
                                click: function () {
                                    if (tempData != undefined ? tempData.type == 3 : false) {
                                        fnTest({ id: allPdfComp.Internal.Annotations.selected[0].annotApp.id, delete: true });
                                    } else {
                                        null != a.dom.selectedAnnotation && a.DeleteAnnotationById(a.dom.selectedAnnotation.annotApp.id);
                                    }
                                    dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")
                                }
                            }])
                        },
                        stopAnnotInteractiveAdd: function () {
                            null != this.currentAnnotProperties && (this.currentAnnotProperties = null, this.currentAnnotPageNo = 0, a.events.pathPoints = null, a.events.isDrawingPath = !1, a.SetMouseMode(0), a.events.ownMouseEvents = !1)
                        },
                        beginAddAnnotInteractive: function (b, c) {
                            if (a.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                            this.unselectAll();
                            if (null != a.cache.Annots)
                                for (var d = 0; d < a.cache.Annots.length; d++) a.cache.Annots[d].updateCursor(!0);
                            this.currentAnnotProperties = b;
                            this.currentAnnotPageNo = c;
                            //AGjs__Forcopyandpaste for type 3
                            5 == b.type || 10 == b.type || 11 == b.type || 16 == b.type ? a.SetMouseMode(2) : (a.SetMouseMode(1),/* 3 == b.type ||*/ 4 == b.type || 15 == b.type ? a.Internal.Selection.selectionArea.setLineMode(1) : a.Internal.Selection.selectionArea.setLineMode(0));
                            a.events.ownMouseEvents = !0;
                            return DocuViewareAPI.Status.OK
                        },

                        //AGjs__for multiple copy and paste of annotation
                        addMultipleAnnotInteractive: function () {
                            //AGjs__changes for unique id declaration
                            DocuViewareAPI.SetMouseMode(controlID, 0);
                            var e = document.getElementById(sessionStorage.controlID);
                            let selectedAnnot = JSON.parse(customSelectedAnnotation);
                            let data = [];
                            selectedAnnot.forEach(function (key, index) {
                                this.currentAnnotProperties = key.annotApp.properties;
                                if ((key.annotApp.canRotate && key.annotApp.properties.type == 3) ||
                                    (!key.annotApp.properties.squaredBox && key.annotApp.properties.type == 6) ||
                                    (key.annotApp.properties.type != 3 && key.annotApp.properties.type != 6 && key.annotApp.properties.type != 8)) {
                                    this.currentAnnotPageNo = c;

                                    a.events.ownMouseEvents = !1;
                                    //AGjs__changes for unique id declaration
                                    var b = DocuViewareAPI.GetCurrentPage(sessionStorage.controlID),
                                        c = a.Internal.Pages.getRenderingState(b),

                                        d = a.Internal.Selection.selectionArea.getPageBounds(),

                                        e = a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix), 1 / 96, 1 / 96, !1);
                                    if (index >= 1) {
                                        d.top = d.top + (30 * (index - 1));
                                        d.left = d.left + (index * 10);
                                    }
                                    a.Internal.Matrix.transformBBox(e, 0, d);
                                    this.currentAnnotProperties.left = a.Internal.Utilities.roundEx(d.left, 7);
                                    this.currentAnnotProperties.top = a.Internal.Utilities.roundEx(d.top, 7);

                                    d = a.Internal.Selection.selectionArea.getStartPosition();
                                    if (index >= 1) {
                                        d.y = d.y + (30 * (index - 1));
                                        d.x = d.x + (index * 10);
                                    }
                                    a.Internal.Matrix.transformPoint(e, d);

                                    if (this.currentAnnotProperties.squaredBox && 6 == this.currentAnnotProperties.type) {
                                        this.currentAnnotProperties.width = 0.1;
                                        this.currentAnnotProperties.height = 0.1;
                                    }

                                    if (5 == this.currentAnnotProperties.type || 10 == this.currentAnnotProperties.type || 11 == this.currentAnnotProperties.type || 16 == this.currentAnnotProperties.type)
                                        for (this.currentAnnotProperties.startX = -1, this.currentAnnotProperties.startY = -1, this.currentAnnotProperties.pathData = [], d = 0; d < a.events.pathPoints.length; d++)
                                            if (131072 != a.events.pathPoints[d].x && 131072 != a.events.pathPoints[d].x) {
                                                var f = {
                                                    x: a.events.pathPoints[d].x -
                                                        c.pageLeft,
                                                    y: a.events.pathPoints[d].y - c.pageTop
                                                };
                                                a.Internal.Matrix.transformPoint(e, f);
                                                this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(f.x, 7));
                                                this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(f.y, 7))
                                            } else this.currentAnnotProperties.pathData.push(131072), this.currentAnnotProperties.pathData.push(131072);
                                    else this.currentAnnotProperties.startX = a.Internal.Utilities.roundEx(d.x, 7), this.currentAnnotProperties.startY = a.Internal.Utilities.roundEx(d.y, 7);
                                    c = a.Internal.Annotations.defaultAuthor;
                                    e = null;
                                    null != c && (e = {
                                        author: c
                                    });
                                    this.currentAnnotProperties.parentID = key.annotApp.id;
                                    data.push({ extProperties: e, properties: this.currentAnnotProperties, pageNo: b })
                                }
                            });
                            if (data.length > 0) {
                                a.ajax.CustomPostBaseRequest({
                                url: a.appControllerPath + "/newannotation" + (a.useIdInRoot ? "/1" : ""),
                                data: {
                                    annots: data
                                },
                                success: function (b) {

                                    if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots) {
                                        for (var d = 0; d < b.annots.length; d++) {
                                            var c = a.Internal.Pages.getRenderingState(b.annots[d].annotApp.pageNo),

                                                c = a.Internal.Annotations.newController(b.annots[d].annotApp, c.pageLeft, c.pageTop, c.contentMatrix);
                                            if (b.annots[d].annotApp.properties.type == 8 || (b.annots[d].annotApp.properties.type == 6 && b.annots[d].annotApp.properties.squaredBox)) {
                                                if (a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                                    id: b.annots[d].annotApp.id,
                                                    a: a,
                                                    b: b,
                                                    c: c,
                                                    pageNo: b.annots[d].annotApp.pageNo,
                                                    getAnotTextJsonData: b.annots[d],
                                                    parentID: data[d].properties.parentID,
                                                    action: "CopyPaste"
                                                })
                                            }
                                            else {
                                                a.dom.singlePageView && b.annots[d].annotApp.pageNo !=
                                                    a.GetCurrentPage() || c.render();
                                                a.updateThumbnails([b.annots[d].annotApp.pageNo]);
                                                if (a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                                    id: b.annots[d].annotApp.id,
                                                    pageNo: b.annots[d].annotApp.pageNo,
                                                })
                                            }
                                        }

                                    } else a.ajax.HandleError(b)
                                }, complete: function () {

                                }
                            }, !1)
                            }
                        },
                        addAnnotInteractive: function (b, c) {
                            if (b != undefined) {
                                this.currentAnnotProperties = b;
                                this.currentAnnotPageNo = c;
                            }
                            if (!PasteWithCtrlKey) {
                                a.SetMouseMode(0);
                            }
                            a.events.ownMouseEvents = !1;
                            //AGjs__changes for unique id declaration
                            var b = DocuViewareAPI.GetCurrentPage(sessionStorage.controlID),
                                c = a.Internal.Pages.getRenderingState(b),
                                e = a.Internal.Selection.selectionArea.getPageBounds(),
                                f = a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix), 1 / 96, 1 / 96, !1);
                            a.Internal.Matrix.transformBBox(f, 0, e);
                            this.currentAnnotProperties.left = a.Internal.Utilities.roundEx(e.left, 7);
                            this.currentAnnotProperties.top = a.Internal.Utilities.roundEx(e.top, 7);
                            if (!this.currentAnnotProperties.copyannot) {
                                this.currentAnnotProperties.width = a.Internal.Utilities.roundEx(e.width, 7);
                                if (this.currentAnnotProperties.type === 3 && this.currentAnnotProperties.squaredBox) {
                                    this.currentAnnotProperties.height = a.Internal.Utilities.roundEx(e.height, 7) > 0.5 ? a.Internal.Utilities.roundEx(e.height, 7) : 0.5;
                                    this.currentAnnotProperties.width = this.currentAnnotProperties.width > 0.5 ? this.currentAnnotProperties.width : 0.5;
                                    console.log(this.currentAnnotProperties)
                                } else {
                                    this.currentAnnotProperties.height = a.Internal.Utilities.roundEx(e.height, 7);
                                }
                            }

                            e = a.Internal.Selection.selectionArea.getStartPosition();
                            a.Internal.Matrix.transformPoint(f, e);
                            //AGjs__changes for small circle 
                            if (this.currentAnnotProperties.squaredBox && 6 == this.currentAnnotProperties.type) {
                                this.currentAnnotProperties.width = 0.1;
                                this.currentAnnotProperties.height = 0.1;
                            }
                            if (5 == this.currentAnnotProperties.type || 10 == this.currentAnnotProperties.type || 11 == this.currentAnnotProperties.type || 16 == this.currentAnnotProperties.type)
                                for (this.currentAnnotProperties.startX = -1, this.currentAnnotProperties.startY = -1, this.currentAnnotProperties.pathData = [], e = 0; e < a.events.pathPoints.length; e++)
                                    if (131072 != a.events.pathPoints[e].x && 131072 != a.events.pathPoints[e].x) {
                                        var h = {
                                            x: a.events.pathPoints[e].x -
                                                c.pageLeft,
                                            y: a.events.pathPoints[e].y - c.pageTop
                                        };
                                        a.Internal.Matrix.transformPoint(f, h);
                                        this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(h.x, 7));
                                        this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(h.y, 7))
                                    } else this.currentAnnotProperties.pathData.push(131072), this.currentAnnotProperties.pathData.push(131072);
                            //AGjs__changes for small circle with line need startX
                            else this.currentAnnotProperties.startX = a.Internal.Utilities.roundEx(e.x, 7), startXValue = a.Internal.Utilities.roundEx(e.x, 7), this.currentAnnotProperties.startY = a.Internal.Utilities.roundEx(e.y, 7);
                            c = a.Internal.Annotations.defaultAuthor;
                            f = null;
                            null != c && (f = {
                                author: c
                            });
                            //AGjs__changes custom declaration
                            allPdfComp.temp = this.currentAnnotProperties;
                            a.ajax.PostBaseRequest({
                                url: a.appControllerPath + "/newannotation" + (a.useIdInRoot ? "/1" : ""),
                                data: {
                                    annots: [{
                                        extProperties: f,
                                        properties: this.currentAnnotProperties,
                                        pageNo: b
                                    }]
                                },
                                success: function (b)
                                {
                                    //AGjs__ changes remove highlight of the button when operation is done
                                    $(".highlight").removeClass("button_active");
                                    $(".highlight").css("fill", "rgb(100, 100, 100)");
                                    allPdfComp.dom.updateButtons();
                                    // end of remove highlight of the button when operation is done

                                    if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots) {

                                        for (var d = 0; d < b.annots.length; d++) {
                                            var c = a.Internal.Pages.getRenderingState(b.annots[d].annotApp.pageNo);
                                            c = a.Internal.Annotations.newController(b.annots[d].annotApp, c.pageLeft, c.pageTop, c.contentMatrix);
                                            customEllipseVar = 0;

                                            //AGjs__changes save the text annot to database 
                                            let MappingCheckBox = $("#annot_Mapcheck_input" + sessionStorage.controlID);
                                            let MappingCheckBoxValue = MappingCheckBox ? MappingCheckBox.prop("checked") : false;
                                            if (b.annots[d].annotApp.properties.type == 8 && MappingCheckBoxValue)
                                            {
                                                if (a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                                    id: b.annots[d].annotApp.id,
                                                    a: a,
                                                    b: b,
                                                    c: c,
                                                    pageNo: b.annots[d].annotApp.pageNo,
                                                    getAnotTextJsonData: b.annots[d]
                                                })

                                            }
                                            else
                                            {
                                                a.dom.singlePageView &&
                                                    b.annots[d].annotApp.pageNo != a.GetCurrentPage() || c.render();
                                                a.updateThumbnails([b.annots[d].annotApp.pageNo]);
                                                if (a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                                    id: b.annots[d].annotApp.id,
                                                    pageNo: b.annots[d].annotApp.pageNo
                                                })
                                                //AGjs__changes custom for draw small circle after line created

                                                if (b.annots[d].annotApp.properties.type == 3 && allPdfComp.temp.squaredBox) {

                                                    let tempStore = JSON.stringify(DocuViewareAPI.GetAnnotPropertiesValues(sessionStorage.controlID, 6));
                                                    tempStore = JSON.parse(tempStore);
                                                    let rect = b.annots[d].annotApp.rect;
                                                    tempStore.left = startXValue - 0.05;
                                                    tempStore.fillColor = b.annots[d].annotApp.properties.strokeColor;
                                                    tempStore.top = a.cache.Annots[a.cache.Annots.length - 1].annotbaserect.top - 0.05;
                                                    a.Internal.Annotations.addCustomCircleWithLine(tempStore, false, b.annots[d].id, { x: startXValue, coords: rect });
                                                }
                                                var message = document.getElementById(sessionStorage.controlID);
                                                message.control.Pop("Annotation created successfully", "Update");
                                            }
                                        }
                                    } else a.ajax.HandleError(b)
                                }
                            }, !1)
                        },


                        //AGjs__changes addCustomCircleWithLine
                        addCustomCircleWithLine: function (tempParseProp, update, parentID, coords = {}) {

                            a.SetMouseMode(0);
                            a.events.ownMouseEvents = !1;
                            let data = [];
                            var b = DocuViewareAPI.GetCurrentPage(sessionStorage.controlID);

                            let pos = (y, dataCoords) => {
                                let tempPos = "";
                                if (toFixedCustom(dataCoords.coords.Left, 2) === toFixedCustom(dataCoords.x, 2))
                                {
                                    tempPos = "0";
                                } else {
                                    tempPos = "1";
                                }
                                if (toFixedCustom(y, 2) == toFixedCustom(dataCoords.coords.Top,2) &&
                                    toFixedCustom(y, 2) !== toFixedCustom((dataCoords.coords.Top && dataCoords.coords.Height),2)
                                )
                                 {
                                    tempPos += "0";

                                } else {
                                    tempPos += "1";
                                }
                                return tempPos;
                            }
                            let positionofcircle = "";


                            if (!update) {
                                c = a.Internal.Pages.getRenderingState(b),
                                    e = a.Internal.Selection.selectionArea.getPageBounds(),
                                    f = a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix), 1 / 96, 1 / 96, !1);
                                a.Internal.Matrix.transformBBox(f, 0, e);

                                e = a.Internal.Selection.selectionArea.getStartPosition();
                                a.Internal.Matrix.transformPoint(f, e);
                                if (Object.keys(coords).length > 0) {
                                    console.log("top y");

                                    console.log("y" + a.Internal.Utilities.roundEx(e.y, 7));
                                    console.log(coords);
                                    console.log("left x");
                                    positionofcircle = pos(a.Internal.Utilities.roundEx(e.y, 7), coords);
                                    let tempDatas = validationForCircleShouldBe(JSON.stringify({ Subject: positionofcircle }), { bbox: coords.coords });
                                    tempParseProp.left = tempDatas.Left - 0.05;
                                    tempParseProp.top = tempDatas.Top - 0.05;
                                }
                                else {

                                    tempParseProp.top = a.Internal.Utilities.roundEx(e.y, 7) - 0.05;
                                    tempParseProp.left = a.Internal.Utilities.roundEx(e.x, 7) - 0.05;
                                }
                            }


                            tempParseProp.width = 0.1;
                            tempParseProp.height = 0.1;
                            tempParseProp.type = 6;
                            tempParseProp.fill = true;
                            tempParseProp.squaredBox = true;
                            data.push({ extProperties: null, properties: tempParseProp, pageNo: b });

                            a.ajax.PostBaseRequest({
                                url: a.appControllerPath + "/newannotation" + (a.useIdInRoot ? "/1" : ""),
                                data: {
                                    annots: data
                                },
                                success: function (b) {
                                    $(".highlight").removeClass("button_active");
                                    $(".highlight").css("fill", "rgb(100, 100, 100)");
                                    allPdfComp.dom.updateButtons();
                                    if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots) {

                                        for (var d = 0; d < b.annots.length; d++) {
                                            var c = a.Internal.Pages.getRenderingState(b.annots[d].annotApp.pageNo);
                                            c = a.Internal.Annotations.newController(b.annots[d].annotApp, c.pageLeft, c.pageTop, c.contentMatrix);
                                            a.dom.singlePageView &&
                                                b.annots[d].annotApp.pageNo != a.GetCurrentPage() || c.render();
                                            a.updateThumbnails([b.annots[d].annotApp.pageNo]);
                                            if (a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                                id: b.annots[d].annotApp.id,
                                                pageNo: b.annots[d].annotApp.pageNo,
                                                parentID: parentID,
                                                circlePosition: update ? tempParseProp.subject : positionofcircle,
                                                type: b.annots[d].annotApp.properties.type
                                            })

                                        }
                                    } else a.ajax.HandleError(b);

                                    //if (update) {
                                    //DocuViewareAPI.PostCustomServerAction(controlID, true, "DeleteOldCircleWhenMove", update , function (response) {
                                    //    });
                                    //    }
                                }
                            }, !1)
                        },
                        setAnnotationsComments: function (b) {
                            a.cache.AnnotsComments = b
                        },
                        addAnnotationComment: function (b) {
                            if (null != b && (null == a.cache.AnnotsComments ? a.cache.AnnotsComments = [b] : a.cache.AnnotsComments.push(b), null != b.annotApp.properties.previousGuid &&
                                "" != b.annotApp.properties.previousGuid)) {
                                var d = a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
                                null != d && (d.annotApp.properties.nextGuid = b.annotApp.id)
                            }
                        },
                        addAnnotation: function (b) {
                            null == a.cache.Annots ? a.cache.Annots = [b] : a.cache.Annots.push(b)
                        },
                        getAnnotationFromCanvas: function (b) {
                            if (null != a.cache.Annots)
                                for (var d = 0; d < a.cache.Annots.length; d++) {
                                    var c = a.cache.Annots[d];
                                    if (c.canvas === b) return c
                                }
                            return null
                        },
                        removePageAnnots: function (b) {
                            this.unselectAll(b);
                            if (null !=
                                a.cache.Annots)
                                for (var d = 0; d < a.cache.Annots.length; d++) {
                                    var c = a.cache.Annots[d];
                                    c.annotApp.pageNo == b && (c.canvas.parentNode == a.dom.viewerArea && a.dom.viewerArea.removeChild(c.canvas), a.cache.Annots.splice(d, 1), d--)
                                }
                        },
                        removeAll: function () {
                            this.unselectAll();
                            a.cache.Annots = null
                        },
                        unselectAll: function (b) {
                            if (!b || null != a.dom.selectedAnnotation && a.dom.selectedAnnotation.annotApp.pageNo == b) null != a.dom.annotationsActionButtons && dvJQuery(a.dom.annotationsActionButtons).hide(), a.dom.selectedAnnotation = null;
                            for (var d =
                                this.selected.length - 1; 0 <= d; d--) b && this.selected[d].annotApp.pageNo != b || this.selected[d].setSelectState(!1)
                        },
                        selectById: function (b) {
                            a.Internal.Annotations.unselectAll();
                            if (null != a.cache.Annots)
                                for (var d = 0; d < a.cache.Annots.length; d++) {
                                    var c = a.cache.Annots[d];
                                    if (c.annotApp.id === b) {
                                        c.setSelectState(!0);
                                        break
                                    }
                                }
                        },
                        subrender: function (b, c, e) {
                            for (var d = 0, g = b; g < e.annotApp.commands.length; g++) switch (e.annotApp.commands[g]) {
                                case 0:
                                    c.save();
                                    break;
                                case 1:
                                    c.restore();
                                    break;
                                case 2:
                                    c.transform(e.annotApp.args[g][0],
                                        e.annotApp.args[g][1], e.annotApp.args[g][2], e.annotApp.args[g][3], e.annotApp.args[g][4], e.annotApp.args[g][5]);
                                    break;
                                case 3:
                                    c.fillStyle = "rgba(" + e.annotApp.args[g][1] + "," + e.annotApp.args[g][2] + "," + e.annotApp.args[g][3] + "," + e.annotApp.args[g][0] / 255 + ")";
                                    break;
                                case 4:
                                    c.beginPath();
                                    c.moveTo(e.annotApp.args[g][0], e.annotApp.args[g][1]);
                                    c.lineTo(e.annotApp.args[g][0] + e.annotApp.args[g][2], e.annotApp.args[g][1]);
                                    c.lineTo(e.annotApp.args[g][0] + e.annotApp.args[g][2], e.annotApp.args[g][1] + e.annotApp.args[g][3]);
                                    c.lineTo(e.annotApp.args[g][0], e.annotApp.args[g][1] + e.annotApp.args[g][3]);
                                    c.closePath();
                                    c.clip();
                                    break;
                                case 5:
                                    c.globalAlpha = .5;
                                    break;
                                case 6:
                                    c.globalAlpha = e.annotApp.args[g][0] / 255;
                                    break;
                                case 7:
                                    for (var m = DocuViewareEncodingUtilities.base64.decode(e.annotApp.data[g]), f = m.length, h = new DocuViewareEncodingUtilities.TypedArray.Uint8Array(f), k = 0; k < f; k++) h[k] = m.charCodeAt(k);
                                    m = e.annotApp.args[g].length / 2;
                                    f = [{
                                        x: 0,
                                        y: 0
                                    }, {
                                        x: 0,
                                        y: 0
                                    }, {
                                        x: 0,
                                        y: 0
                                    }];
                                    var l = 0;
                                    c.beginPath();
                                    for (k = 0; k < m; k++) {
                                        var q = 128 <= h[k];
                                        q && (h[k] -=
                                            128);
                                        switch (h[k]) {
                                            case 0:
                                                c.moveTo(e.annotApp.args[g][2 * k], e.annotApp.args[g][2 * k + 1]);
                                                l = 0;
                                                break;
                                            case 1:
                                                c.lineTo(e.annotApp.args[g][2 * k], e.annotApp.args[g][2 * k + 1]);
                                                l = 0;
                                                break;
                                            case 3:
                                                f[l].x = e.annotApp.args[g][2 * k], f[l].y = e.annotApp.args[g][2 * k + 1], l += 1, 3 == l && (c.bezierCurveTo(f[0].x, f[0].y, f[1].x, f[1].y, f[2].x, f[2].y), l = 0)
                                        }
                                        q && c.closePath()
                                    }
                                    c.fill();
                                    break;
                                case 8:
                                    var t = e.annotApp.args[g][0],
                                        w = e.annotApp.args[g][1],
                                        H = e.annotApp.args[g][2],
                                        z = e.annotApp.args[g][3];
                                    d++;
                                    if (0 == b && e.cachedImages.length >= d) c.drawImage(e.cachedImages[d -
                                        1], t, w, H, z);
                                    else {
                                        var A = new Image;
                                        A.onload = function () {
                                            c.drawImage(A, t, w, H, z);
                                            a.Internal.Annotations.subrender(g + 1, c, e)
                                        };
                                        A.src = "data:image/png;base64," + e.annotApp.data[g];
                                        e.cachedImages.push(A);
                                        return
                                    }
                            }
                            c.restore();
                            e.isSelected && (c.save(), c.strokeStyle = "rgba(153, 209, 255, 0.5)", c.beginPath(), c.moveTo(e.canvas.width - this.CANVAS_PADDING, this.CANVAS_PADDING), c.lineTo(this.CANVAS_PADDING, this.CANVAS_PADDING), c.lineTo(this.CANVAS_PADDING, e.canvas.height - this.CANVAS_PADDING), c.stroke(), c.beginPath(), c.moveTo(this.CANVAS_PADDING,
                                e.canvas.height - this.CANVAS_PADDING), c.lineTo(e.canvas.width - this.CANVAS_PADDING, e.canvas.height - this.CANVAS_PADDING), c.lineTo(e.canvas.width - this.CANVAS_PADDING, this.CANVAS_PADDING), c.stroke(), c.restore(), c.save(), c.globalCompositeOperation = "destination-over", c.fillStyle = "rgba(204, 232, 255, 0.2)", c.fillRect(this.CANVAS_PADDING + 1, this.CANVAS_PADDING + 1, e.canvas.width - 2 * (1 + this.CANVAS_PADDING), e.canvas.height - 2 * (1 + this.CANVAS_PADDING)), c.restore(), c.save(), c.lineWidth = 1, c.strokeStyle = "rgba(100, 100, 100, 1.0)",
                                b = e.annotrectNew.width + 2, d = e.annotrectNew.height + 2, c.setLineDash([5, 2]), c.translate(e.canvas.width / 2, e.canvas.height / 2), c.rotate(e.annotApp.rotation * Math.PI / 180), c.strokeRect(-b / 2, -d / 2, b, d), e.annotApp.canResize && !e.annotApp.properties.autoSize && (c.fillRect(-b / 2 - e.gripSize / 2, -d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(-e.gripSize / 2, -d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(b / 2 - e.gripSize / 2, -d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(b / 2 - e.gripSize / 2, -e.gripSize / 2, e.gripSize,
                                    e.gripSize), c.fillRect(b / 2 - e.gripSize / 2, d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(-e.gripSize / 2, d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(-b / 2 - e.gripSize / 2, d / 2 - e.gripSize / 2, e.gripSize, e.gripSize), c.fillRect(-b / 2 - e.gripSize / 2, -e.gripSize / 2, e.gripSize, e.gripSize)), e.annotApp.canRotate && (b = e.gripSize / 2, c.beginPath(), c.arc(0, 0, b, 0, 2 * Math.PI, !1), c.fill()), c.restore());
                            c = null
                        },
                        newController: function (b, c, e, f) {
                            var d = {
                                cachedImages: []
                            };
                            d.annotApp = b;
                            d.updateNo = 0;
                            d.pendingUpdate = 0;
                            d.isMoving = !1;
                            d.isRotating = !1;
                            d.resizingMode = -1;
                            d.isSelected = !1;
                            d.stopMoving = function () {
                                this.isMoving && (this.isMoving = !1)
                            };
                            d.stopResizing = function () {
                                -1 != this.resizingMode && (this.resizingMode = -1)
                            };
                            d.stopRotating = function () {
                                this.isRotating && (this.isRotating = !1)
                            };

                            //AGjs__changes variable declartion to store this 
                            //we have to move the line, for that first we have to delete old circle.
                            //when after delete the dependency work data will gone thats the reason we save this data to current variable
                            d.stopEditing = function () {
                                let moving = false;
                                if (this.isMoving || this.isRotating || this.resizingMode) {
                                    moving = "Moving";
                                }
                                this.isEditing() && (this.stopMoving(), this.stopResizing(), this.stopRotating(), this.isModified() && this.updateAnnotation(!1, null, moving))

                            };
                            d.hasPendingUpdate = function () {
                                return 0 < this.pendingUpdate
                            };
                            d.isEditing = function () {
                                return this.isRotating ||
                                    this.isMoving || -1 != this.resizingMode
                            };
                            d.setSelectState = function (b, d) {
                                if (b != this.isSelected) {
                                    if (b) this.gripSize = a.Internal.Annotations.DEFAULT_GRIP_SIZE * (d ? 3 : 1), this.canvas.bakzIndex = this.canvas.style.zIndex, this.canvas.style.zIndex = 16777270, this.canvas.tabIndex = 1, a.Internal.Annotations.selected.push(this);
                                    else
                                        for (this.canvas.style.zIndex = this.canvas.bakzIndex, this.canvas.removeAttribute("tabindex"), this.stopEditing(), d = a.Internal.Annotations.selected.length - 1; 0 <= d; d--)
                                            if (a.Internal.Annotations.selected[d] ===
                                                this) {
                                                a.Internal.Annotations.selected.splice(d, 1);
                                                break
                                            } this.isSelected = b;
                                    this.render(!1, b);
                                    if (a.callbacks.onAnnotationSelectedStateChanged) a.callbacks.onAnnotationSelectedStateChanged({
                                        id: this.annotApp.id,
                                        state: b
                                    })
                                }
                            };
                            d.editPointsHitTest = function (b, d, c) {
                                if (a.serverCtx.annotationEditorMode && this.annotApp.canMove && this.annotApp.canSelect && this.annotApp.pageNo == a.GetCurrentPage()) {
                                    var g = this.canvas.getBoundingClientRect();
                                    g = {
                                        x: g.left + (g.width - this.annotbox.width) / 2,
                                        y: g.top + (g.height - this.annotbox.height) /
                                            2
                                    };
                                    var e = {
                                        x: g.x + this.annotbox.width,
                                        y: g.y
                                    },
                                        m = {
                                            x: g.x,
                                            y: g.y + this.annotbox.height
                                        },
                                        f = {
                                            x: e.x,
                                            y: m.y
                                        },
                                        h = g.x + (e.x - g.x) / 2,
                                        p = g.y + (m.y - g.y) / 2,
                                        r = a.Internal.Matrix.rotateAt({
                                            a: 1,
                                            b: 0,
                                            c: 0,
                                            d: 1,
                                            e: 0,
                                            f: 0
                                        }, this.annotApp.rotation, h, p, !0);
                                    a.Internal.Matrix.transformPoint(r, g);
                                    a.Internal.Matrix.transformPoint(r, e);
                                    a.Internal.Matrix.transformPoint(r, f);
                                    a.Internal.Matrix.transformPoint(r, m);
                                    r = (g.x + e.x) / 2;
                                    var k = (g.y + e.y) / 2,
                                        l = (e.x + f.x) / 2,
                                        v = (e.y + f.y) / 2,
                                        u = (f.x + m.x) / 2,
                                        q = (f.y + m.y) / 2,
                                        t = (m.x + g.x) / 2,
                                        S = (m.y + g.y) / 2;
                                    if (b >= t - c && b <= t +
                                        c && d >= S - c && d <= S + c) return 0;
                                    if (b >= g.x - c && b <= g.x + c && d >= g.y - c && d <= g.y + c) return 1;
                                    if (b >= r - c && b <= r + c && d >= k - c && d <= k + c) return 2;
                                    if (b >= e.x - c && b <= e.x + c && d >= e.y - c && d <= e.y + c) return 3;
                                    if (b >= l - c && b <= l + c && d >= v - c && d <= v + c) return 4;
                                    if (b >= f.x - c && b <= f.x + c && d >= f.y - c && d <= f.y + c) return 5;
                                    if (b >= u - c && b <= u + c && d >= q - c && d <= q + c) return 6;
                                    if (b >= m.x - c && b <= m.x + c && d >= m.y - c && d <= m.y + c) return 7;
                                    if (b >= h - c && b <= h + c && d <= p + c && d >= p - c) return 8
                                }
                                return -1
                            };
                            d.isModified = function () {
                                return this.rotationinit != this.annotApp.rotation || this.annotrect.left !=
                                    this.annotrectNew.left || this.annotrect.top != this.annotrectNew.top || this.annotrect.width != this.annotrectNew.width || this.annotrect.height != this.annotrectNew.height
                            };
                            d.addWidth = function (a, b) {
                                this.annotrectNew.width += a;
                                this.annotApp.squaredBox && (this.annotrectNew.height += a);
                                b && this.render(!1)
                            };
                            d.addHeight = function (a, b) {
                                this.annotrectNew.height += a;
                                this.annotApp.squaredBox && (this.annotrectNew.width += a);
                                b && this.render(!1)
                            };
                            d.updateCursor = function (b) {
                                if (!this.isEditing())
                                    if (this.annotApp.canSelect && !b && a.serverCtx.annotationEditorMode)
                                        if (this.annotApp.pageNo !=
                                            a.GetCurrentPage()) this.cursorMgr.setStdCursor("not-allowed");
                                        else {
                                            b = this.editPointsHitTest(a.events.mouseX, a.events.mouseY, a.Internal.Annotations.DEFAULT_GRIP_SIZE);
                                            if (this.isSelected) {
                                                0 <= b && 7 >= b && (b += Math.trunc((this.annotApp.rotation + 22.5) / 45), b %= 8);
                                                if (this.annotApp.canResize && !this.annotApp.properties.autoSize) {
                                                    if (0 == b) {
                                                        this.cursorMgr.setStdCursor("w-resize");
                                                        return
                                                    }
                                                    if (1 == b) {
                                                        this.cursorMgr.setStdCursor("nw-resize");
                                                        return
                                                    }
                                                    if (2 == b) {
                                                        this.cursorMgr.setStdCursor("n-resize");
                                                        return
                                                    }
                                                    if (3 == b) {
                                                        this.cursorMgr.setStdCursor("ne-resize");
                                                        return
                                                    }
                                                    if (4 == b) {
                                                        this.cursorMgr.setStdCursor("w-resize");
                                                        return
                                                    }
                                                    if (5 == b) {
                                                        this.cursorMgr.setStdCursor("nwse-resize");
                                                        return
                                                    }
                                                    if (6 == b) {
                                                        this.cursorMgr.setStdCursor("n-resize");
                                                        return
                                                    }
                                                    if (7 == b) {
                                                        this.cursorMgr.setStdCursor("nesw-resize");
                                                        return
                                                    }
                                                }
                                                if (this.annotApp.canRotate && 8 == b) {
                                                    this.cursorMgr.setCustomCursorClass("rotateCursor");
                                                    return
                                                }
                                            }
                                            this.annotApp.canMove ? this.cursorMgr.setStdCursor("all-scroll") : this.cursorMgr.setStdCursor("default")
                                        }
                                    else this.cursorMgr.setStdCursor("")
                            };
                            d.render = function (b, d) {
                                var c =
                                    this.annotrectNew.width / this.annotrect.width,
                                    g = this.annotrectNew.height / this.annotrect.height,
                                    e = {
                                        left: this.annotbox.left + this.pageLeft + (this.annotrectNew.left - this.annotrect.left),
                                        top: this.annotbox.top + this.pageTop + (this.annotrectNew.top - this.annotrect.top),
                                        width: this.annotbox.width * c,
                                        height: this.annotbox.height * g
                                    };
                                0 != this.annotApp.rotation && (1 != c || 1 != g ? a.Internal.Matrix.transformBBox({
                                    a: 1,
                                    b: 0,
                                    c: 0,
                                    d: 1,
                                    e: 0,
                                    f: 0
                                }, this.annotApp.rotation, e, {
                                        x: this.annotbox.left + this.pageLeft + this.annotbox.width / 2,
                                        y: this.annotbox.top +
                                            this.pageTop + this.annotbox.height / 2
                                    }) : a.Internal.Matrix.transformBBox({
                                        a: 1,
                                        b: 0,
                                        c: 0,
                                        d: 1,
                                        e: 0,
                                        f: 0
                                    }, this.annotApp.rotation, e));
                                var m = Math.round(e.left - a.Internal.Annotations.CANVAS_PADDING),
                                    f = Math.round(e.top - a.Internal.Annotations.CANVAS_PADDING),
                                    h = Math.round(e.width + 2 * a.Internal.Annotations.CANVAS_PADDING),
                                    p = Math.round(e.height + 2 * a.Internal.Annotations.CANVAS_PADDING);
                                this.canvas.style.left = m + "px";
                                this.canvas.style.top = f + "px";
                                if (this.isSelected) {
                                    //AGjs__changes unique id
                                    if (null != a.dom.annotationsActionButtons) {
                                        null != a.dom.commentsArea ?
                                            (this.annotApp.canEdit && this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                sessionStorage.controlID).show()), this.annotApp.canEdit && !this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                    sessionStorage.controlID).hide()), !this.annotApp.canEdit && this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                        sessionStorage.controlID).show()), this.annotApp.canEdit || this.annotApp.canDelete || (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                            sessionStorage.controlID).hide())) : (this.annotApp.canEdit && this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                                sessionStorage.controlID).show()), this.annotApp.canEdit && !this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).show(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                                    sessionStorage.controlID).hide()), !this.annotApp.canEdit && this.annotApp.canDelete && (dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2" + sessionStorage.controlID).hide(), dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton" +
                                                                        sessionStorage.controlID).show()));
                                        //AGjs_changes for customCopy annot
                                        if (this.annotApp.canRotate && this.annotApp.properties && this.annotApp.properties.type != 8) {
                                            $("#AddCopyAnnot" + sessionStorage.controlID).show();
                                        }
                                        else {
                                            $("#AddCopyAnnot" + sessionStorage.controlID).hide();

                                        } dvJQuery(a.dom.annotationsActionButtons).show();
                                        var r = dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationActionButtonsSplitter']:visible").length,
                                            k = dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationAction']:visible").length - r;
                                        dvJQuery(a.dom.annotationsActionButtons).width(17 * r + 17 * k);
                                        0 === k && 0 === r ? dvJQuery(a.dom.annotationsActionButtons).hide() : (dvJQuery(a.dom.annotationsActionButtons).css("left", m + h - dvJQuery(a.dom.annotationsActionButtons).outerWidth() -
                                            a.Internal.Annotations.CANVAS_PADDING + "px"), dvJQuery(a.dom.annotationsActionButtons).css("top", f + p + "px"));
                                        //AGjs__changes  hide the custom created element
                                        $(".booklink").hide();
                                        $(".internalLinkContext").hide();
                                    }
                                    d && (a.dom.selectedAnnotation = this)
                                }
                                b || (this.canvas.width != h &&
                                    (this.canvas.width = h),
                                    this.canvas.height != p &&
                                    (this.canvas.height = p),
                                    b = this.canvas.getContext("2d"),
                                    b.clearRect(0, 0, this.canvas.width, this.canvas.height),
                                    b.save(),
                                    d = this.annotmat,
                                    d = a.Internal.Matrix.translate(d, -this.annotbox.left, -this.annotbox.top),
                                    d = a.Internal.Matrix.scale(d, c, g, !1),
                                    0 != this.annotApp.rotation &&
                                    (d = a.Internal.Matrix.rotateAt(d, this.annotApp.rotation, this.annotbox.width / 2 * c, this.annotbox.height / 2 * g, !1),
                                        d = a.Internal.Matrix.translate(d, (e.width - this.annotbox.width * c) / 2, (e.height - this.annotbox.height * g) / 2)),
                                    d = a.Internal.Matrix.translate(d, a.Internal.Annotations.CANVAS_PADDING, a.Internal.Annotations.CANVAS_PADDING),
                                    b.transform(d.a, d.b, d.c, d.d, d.e, d.f), a.dom.UIconfig.annotsDropShadow &&
                                    this.annotApp.supportShadow &&
                                    (b.shadowOffsetX = 2, b.shadowOffsetY = 2, b.shadowBlur = 4, b.shadowColor = "rgba(100, 100, 100, 0.6)"),
                                    a.Internal.Annotations.subrender(0, b, this))
                            };
                            d.canvas = document.createElement("canvas");
                            d.canvas.style.display = "block";
                            d.canvas.style.position = "absolute";
                            d.canvas.style.padding = "0px";
                            d.canvas.style.margin = "0px";
                            d.canvas.style.outline = "0";
                            d.canvas.style.zIndex = 16E6 + d.annotApp.zorder;
                            d.cursorMgr = CreateDocuViewareCursorManager(d.canvas, a.isIEorEdge);
                            var current = "";

                            //AGjs__changes adding extra param to find is moving or manual popup update
                            d.updateAnnotation = function (b, d, moving = false) {
                                allPdfComp.selected = JSON.stringify(allPdfComp.Internal.Annotations.selected[0]);
                                //AGjs__changes store this data to current variable
                                current = this;

                                var c = {
                                    x: current.annotrectNew.left + current.annotrectNew.width / 2,
                                    y: current.annotrectNew.top + current.annotrectNew.height /
                                        2
                                },
                                    g = {
                                        x: current.annotrectNew.width,
                                        y: current.annotrectNew.height
                                    };
                                if (0 != current.annotApp.rotation && (current.annotrectNew.width != current.annotrect.width || current.annotrectNew.height != current.annotrect.height)) {
                                    var e = a.Internal.Matrix.rotateAt({
                                        a: 1,
                                        b: 0,
                                        c: 0,
                                        d: 1,
                                        e: 0,
                                        f: 0
                                    }, current.annotApp.rotation, current.annotrect.left + current.annotrect.width / 2, current.annotrect.top + current.annotrect.height / 2, !0);
                                    a.Internal.Matrix.transformPoint(e, c)
                                }
                                e = a.Internal.Matrix.scale(a.Internal.Matrix.invert({
                                    a: current.annotmat.a,
                                    b: current.annotmat.b,
                                    c: current.annotmat.c,
                                    d: current.annotmat.d,
                                    e: 0,
                                    f: 0
                                }), 1 / 96, 1 / 96, !1);
                                var m = a.Internal.Matrix.scale(a.Internal.Matrix.invert({
                                    a: current.annotmat.a,
                                    b: current.annotmat.b,
                                    c: current.annotmat.c,
                                    d: current.annotmat.d,
                                    e: current.annotmat.e,
                                    f: current.annotmat.f
                                }), 1 / 96, 1 / 96, !1);
                                a.Internal.Matrix.transformPoint(m, c);
                                a.Internal.Matrix.transformPoint(e, g);
                                current.updateNo += 1;
                                current.pendingUpdate += 1;
                                //AGjs__changes
                                var f = {
                                    properties: current.annotApp.properties,
                                    "delete": b,
                                    pageNo: current.annotApp.pageNo,
                                    id: current.annotApp.id,
                                    rotation: current.annotApp.rotation,
                                    left: a.Internal.Utilities.roundEx(c.x,
                                        7),
                                    top: a.Internal.Utilities.roundEx(c.y, 7),
                                    width: a.Internal.Utilities.roundEx(Math.abs(g.x), 7),
                                    height: a.Internal.Utilities.roundEx(Math.abs(g.y), 7),
                                    updateNo: current.updateNo
                                };



                                d && (dvJQuery.extend(!0, f.properties, d), f.rotation = d.rotation);
                                //AGjs__changes
                                var h = current;

                                a.ajax.PostAjaxRequestForDocuViewareAction({
                                    url: a.appControllerPath + "/annotupdate" + (a.useIdInRoot ? "/1" : ""),
                                    async: !b,
                                    data: JSON.stringify({
                                        annot: f,
                                        sessionID: a.ajax.sessionID,
                                        contextID: a.ajax.contextID
                                    }),
                                    success: function (d) {
                                        --h.pendingUpdate;
                                        //AGjs__changes
                                        if ((d = "string" ===
                                            typeof d ? eval("(" + d + ")") : d) && null != d.annots) {
                                            for (var c = 0; c < d.annots.length; c++) {
                                                if (b) {
                                                    if (null != d.annots[c].deletedAnnotsCommentId)
                                                        for (var g = d.annots[c].deletedAnnotsCommentId.length, e = 0; e < g; e++) a.Internal.Annotations.deleteAnnotationComment(d.annots[c].deletedAnnotsCommentId[e], e == g - 1);
                                                    null != a.dom.annotationsActionButtons && dvJQuery(a.dom.annotationsActionButtons).hide();
                                                    a.updateThumbnails([d.annots[c].pageNo]);
                                                    if (null != a.cache.Annots)
                                                        for (e = 0; e < a.cache.Annots.length; e++) g = a.cache.Annots[e], g.annotApp.pageNo ===
                                                            d.annots[c].pageNo && (g.annotApp.id === d.annots[c].id ? (a.dom.viewerArea.removeChild(g.canvas), a.cache.Annots.splice(e, 1), e--) : g.annotApp.idx > f.idx && g.annotApp.idx--);
                                                    //AGjs__changes
                                                    if (a.callbacks.onAnnotationDeleted) a.callbacks.onAnnotationDeleted({
                                                        id: d.annots[c].id,
                                                        pageNo: d.annots[c].pageNo,
                                                        type: h.annotApp.properties.type,
                                                        delete: f.delete
                                                    })
                                                } else {

                                                    if (h.annotApp.properties.type == 8) {
                                                        
                                                        //For Moving
                                                        if (moving === "Moving")
                                                        {
                                                            if (a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                                id: h.annotApp.id,
                                                                a: a,
                                                                b: d.annots[c],
                                                                c: h,
                                                                pageNo: h.annotApp.pageNo,
                                                                getAnotTextJsonData: d.annots[c],
                                                                action: moving
                                                            })

                                                            if (h.isEditing() || d.annots[c].updateNo != h.updateNo || (h.annotApp = d.annots[c].annotApp, h.reset(), h.render(), a.updateThumbnails([d.annots[c].pageNo])), a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                                id: d.annots[c].id,
                                                                pageNo: d.annots[c].pageNo,
                                                            });

                                                            return;
                                                        }

                                                        let MappingCheckBox = $("#annot_Mapcheck_input" + sessionStorage.controlID);
                                                        let MappingCheckBoxValue = MappingCheckBox ? MappingCheckBox.prop("checked") : false;
                                                        if (window.isHaveMapping && moving != "Moving" && MappingCheckBoxValue) {
                                                            if (a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                                id: h.annotApp.id,
                                                                a: a,
                                                                b: d.annots[c],
                                                                c: h,
                                                                pageNo: h.annotApp.pageNo,
                                                                getAnotTextJsonData: d.annots[c],
                                                                action: moving
                                                            })
                                                            return;
                                                        } else if (window.isHaveMapping && !MappingCheckBoxValue)
                                                        {
                                                            //If user uncheck the Add to Mapping checkbox
                                                            //AG_js we have to delete this mapping record in database
                                                            const currentAnno = d.annots[c];
                                                            new Promise((resolve, reject) =>
                                                            {
                                                               
                                                                window.fnToDeleteAnnot({ type: 8, id: d.annots[c].id }, resolve, reject);
                                                            }).then(() =>
                                                            {
                                                                if (h.isEditing() || currentAnno.updateNo != h.updateNo || (h.annotApp = currentAnno.annotApp, h.reset(), h.render(), a.updateThumbnails([currentAnno.pageNo])), a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                                    id: currentAnno.id,
                                                                    pageNo: currentAnno.pageNo,
                                                                });

                                                                var message = document.getElementById(sessionStorage.controlID);
                                                                message.control.Pop("Annotation updated successfully", "Update");
                                                                return;
                                                                    
                                                            }).catch((e) => {

                                                                var message = document.getElementById(sessionStorage.controlID);
                                                                console.log("Annotation not updated successfully");

                                                            });
                                                        } 

                                                         if (h.isEditing() || d.annots[c].updateNo != h.updateNo || (h.annotApp = d.annots[c].annotApp, h.reset(), h.render(), a.updateThumbnails([d.annots[c].pageNo])), a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                            id: d.annots[c].id,
                                                            pageNo: d.annots[c].pageNo,
                                                        })
                                                        
                                                    }
                                                    //AGjs__changes
                                                    else if (h.isEditing() || d.annots[c].updateNo != h.updateNo || (h.annotApp = d.annots[c].annotApp, h.reset(), h.render(), a.updateThumbnails([d.annots[c].pageNo])), a.callbacks.onAnnotationEdited) a.callbacks.onAnnotationEdited({
                                                        id: d.annots[c].id,
                                                        pageNo: d.annots[c].pageNo,
                                                    })


                                                }
                                                //AGjs__changes
                                                if (!f.delete) {
                                                    if (d.annots[c].annotApp.properties.type == 3 && !d.annots[c].annotApp.canRotate) {
                                                        var data = d.annots[c].annotApp;
                                                        let selected = JSON.parse(allPdfComp.selected);

                                                        DocuViewareAPI.PostCustomServerAction(controlID, true, "DeleteOldCircleWhenMove", { currentPage: DocuViewareAPI.GetCurrentPage(sessionStorage.controlID), value: h.annotApp.id, left: selected.annotbaserect.left, top: selected.annotbaserect.top, height: selected.annotbaserect.height, width: selected.annotbaserect.width, isUpdate: false }, function (response) {

                                                            let tempResult = validationForCircleShouldBe(JSON.stringify(response), data);
                                                            h.left = tempResult.Left;
                                                            h.top = tempResult.Top;

                                                            let tempUpdateStore = JSON.stringify(DocuViewareAPI.GetAnnotPropertiesValues(sessionStorage.controlID, 6));
                                                            tempUpdateStore = JSON.parse(tempUpdateStore);
                                                            tempUpdateStore.left = h.left - 0.05;
                                                            tempUpdateStore.top = h.top - 0.05;
                                                            tempUpdateStore.fillColor = h.annotApp.properties.strokeColor;
                                                            tempUpdateStore.subject = response.Subject;
                                                            allPdfComp.Internal.Annotations.addCustomCircleWithLine(tempUpdateStore, true, h.annotApp.id);
                                                        });
                                                    }
                                                }
                                            }
                                        }
                                        else a.ajax.HandleError(d);
                                    },
                                    error: function (b) {
                                        a.ajax.HandleError(b);
                                        --h.pendingUpdate
                                    }
                                });
                                return DocuViewareAPI.Status.OK
                            };
                            a.serverCtx.annotationEditorMode && (d.canvas.ontouchstart = function (a) {
                                1 == a.changedTouches.length && (this.mousedown(a.changedTouches[0], !0), a.preventDefault())
                            }, d.canvas.ontouchmove = function (a) {
                                1 == a.changedTouches.length && (this.mousemove(a.changedTouches[0]), a.preventDefault())
                            }, d.canvas.ontouchend = function (a) {
                                1 == a.changedTouches.length && (this.mouseup(a.changedTouches[0]),
                                    a.preventDefault())
                            }, d.canvas.onmousedown = function (a) {
                                //AGjs__changes
                                let studyDetails = JSON.parse(sessionStorage.getItem("studyDetails"));
                                let userDetails = JSON.parse(sessionStorage.getItem("userProfile"));
                                let locked = JSON.parse(sessionStorage.projectStudyLockStatus);
                                //workflowActivityStatusID =3 means  Annotation Inprogress
                                //workflowActivityStatusID =3 means  Annotation Review
                                //adminType User admin
                                //ADMIN ,Annotation Inprogress & Review only can annotate only we can annotate
                                if (window.annotationPermission()) {
                                    this.mousedown(a);
                                }
                            }, d.canvas.onmousemove = function (a) {
                                this.mousemove(a)
                            }, d.canvas.onmouseup = function (a) {
                                this.mouseup(a)
                            }, d.canvas.onmouseenter = function (a) {
                                this.mouseenter(a)
                            }, d.canvas.onmouseleave = function (a) {
                                this.mouseleave(a)
                            }, d.canvas.onkeyup = function (a) {
                                this.keyup(a)
                            }, d.canvas.ondblclick = function (a) {
                                this.dblClick(a)
                            }, d.canvas.mouseenter = function (b) {
                                a.Internal.Annotations.mouseOverAnnot = !0;
                                a.callbacks.onAnnotationMouseEnter && (b = a.Internal.Annotations.getAnnotationFromCanvas(this),
                                    a.callbacks.onAnnotationMouseEnter({
                                        id: b.annotApp.id
                                    }))
                            }, d.canvas.mouseleave = function (b) {
                                a.Internal.Annotations.mouseOverAnnot = !1;
                                a.callbacks.onAnnotationMouseLeave && (b = a.Internal.Annotations.getAnnotationFromCanvas(this), a.callbacks.onAnnotationMouseLeave({
                                    id: b.annotApp.id
                                }))
                            }, d.canvas.mouseup = function (b) {
                                a.events.mouseup(b)
                            }, d.canvas.mousedown = function (b, c) {
                                //AGjs__changes when we click the annot have to clear already copied data
                                PasteWithCtrlKey = false;
                                if (a.events.ownMouseEvents) a.events.mousedown(b);
                                else {
                                    var d = a.Internal.Annotations.getAnnotationFromCanvas(this),
                                        g = d.annotApp.pageNo != a.GetCurrentPage();
                                    if (!g) {
                                        //AGjs__changes  for multiple select purpose 
                                        if (d.annotApp.canSelect) {
                                            (b.ctrlKey || b.shiftKey) ? "" : a.Internal.Annotations.unselectAll();
                                            //a.Internal.Annotations.unselectAll();
                                            PasteWithCtrlKey = false;
                                            d.setSelectState(!0, c);
                                            var e = d.editPointsHitTest(b.clientX, b.clientY, a.Internal.Annotations.DEFAULT_GRIP_SIZE * (c ? 3 : 1));
                                            d.annotApp.canResize && !d.annotApp.properties.autoSize && -1 != e && 8 != e ? d.resizingMode =
                                                e : d.annotApp.canRotate && 8 == e ? d.isRotating = !0 : d.annotApp.canMove && (d.isMoving = !0)
                                        }
                                    }
                                    a.events.mouseX = b.clientX;
                                    a.events.mouseY = b.clientY;
                                    d.updateCursor();
                                    g && 3 != a.events.mouseMode && 4 != a.events.mouseMode && a.events.mousedown(b)
                                }
                            }, d.canvas.mousemove = function (b) {
                                a.events.ownMouseEvents ? a.events.mousemove(b) : (a.events.mousemove(b), a.Internal.Annotations.getAnnotationFromCanvas(this).updateCursor())
                            }, d.canvas.keyup = function (b) {
                                //AGjs__changes copy by ctrl+c so validate the keycode if we press ctrl+c have to go to fnCopyAnnotTest() function
                                (b.ctrlKey) ? (67 == b.keyCode ? fnCopyAnnotTest() : "") : 13 == b.keyCode ? a.Internal.Annotations.editSelectedAnnotation() : 46 == b.keyCode && a.Internal.Annotations.removeSelectedAnnotation()
                            }, d.canvas.keydown = function (b) {
                                console.log(b.keyCode)
                            },
                                d.canvas.dblClick = function (b) {
                                    a.dom.enableAnnotEditionOnDblClick && a.Internal.Annotations.editSelectedAnnotation()
                                });
                            d.updatePageInfo = function (a, b, d) {
                                this.annotmat = d;
                                this.pageLeft = a;
                                this.pageTop = b;
                                this.reset()
                            };
                            d.reset = function () {
                                this.rotationinit = this.annotApp.rotation;
                                this.annotbaserect = {
                                    left: this.annotApp.rect.Left,
                                    top: this.annotApp.rect.Top,
                                    width: this.annotApp.rect.Right - this.annotApp.rect.Left,
                                    height: this.annotApp.rect.Bottom - this.annotApp.rect.Top
                                };
                                this.annotbox = {
                                    left: this.annotApp.bbox.Left,
                                    top: this.annotApp.bbox.Top,
                                    width: this.annotApp.bbox.Right - this.annotApp.bbox.Left,
                                    height: this.annotApp.bbox.Bottom - this.annotApp.bbox.Top
                                };
                                this.annotrect = {
                                    left: this.annotbaserect.left,
                                    top: this.annotbaserect.top,
                                    width: this.annotbaserect.width,
                                    height: this.annotbaserect.height
                                };
                                a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat, 96, 96, !0), 0, this.annotrect);
                                a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat, 96, 96, !0), 0, this.annotbox);
                                this.annotrectNew = {
                                    left: this.annotrect.left,
                                    top: this.annotrect.top,
                                    width: this.annotrect.width,
                                    height: this.annotrect.height
                                };
                                var b = Math.min(this.annotrect.left, this.annotbox.left),
                                    d = Math.min(this.annotrect.top, this.annotbox.top),
                                    c = Math.max(this.annotrect.top + this.annotrect.height, this.annotbox.top + this.annotbox.height),
                                    g = Math.max(this.annotrect.left + this.annotrect.width, this.annotbox.left + this.annotbox.width);
                                this.annotbox.left = b;
                                this.annotbox.top = d;
                                this.annotbox.width = g - b;
                                this.annotbox.height = c - d
                            };
                            a.Internal.Annotations.addAnnotation(d);
                            d.updatePageInfo(c,
                                e, f);
                            b.visible && (a.serverCtx.annotationEditorMode || (dvJQuery(d.canvas).mouseenter(function () {
                                if (a.callbacks.onAnnotationMouseEnter) {
                                    var b = a.Internal.Annotations.getAnnotationFromCanvas(this);
                                    a.callbacks.onAnnotationMouseEnter({
                                        id: b.annotApp.id
                                    })
                                }
                            }), dvJQuery(d.canvas).mouseleave(function () {
                                if (a.callbacks.onAnnotationMouseLeave) {
                                    var b = a.Internal.Annotations.getAnnotationFromCanvas(this);
                                    a.callbacks.onAnnotationMouseLeave({
                                        id: b.annotApp.id
                                    })
                                }
                            }), 13 === d.annotApp.properties.type && (dvJQuery(d.canvas).hover(function () {
                                dvJQuery(this).css("cursor",
                                    "pointer")
                            }), dvJQuery(d.canvas).on("click", function (b) {
                                b.preventDefault();
                                b = d.annotApp.properties.link;
                                DocuViewareUtilities.isValidURL(b) ? window.open(b, "_blank") : "page:" === b.substring(0, 5) && (b = b.split(":")[1], isNaN(b) || isNaN(parseInt(b, 10)) || b <= a.serverCtx.pageCount && a.SelectPage(b))
                            }))), a.dom.viewerArea.appendChild(d.canvas));
                            return d
                        },
                        mergeAnnotationProperties: function (a, b) {
                            var d = dvJQuery.extend(!0, {}, this.defaultProperties[a]);
                            "object" === typeof b && dvJQuery.each(b, function (a, b) {
                                a in d && (d[a] = b)
                            });
                            return d
                        },
                        //AGjs__changes uniqueid
                        showAnnotationPropertiesUI: function (b, c, e, f, custom) {
                            a.Internal.Annotations.annotEdit = e;
                            dvJQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();
                            dvJQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation" + sessionStorage.controlID).hide();
                            dvJQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled", !1);
                            dvJQuery.each(b, function (d, g) {
                                switch (d) {
                                    case "fill":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input" + sessionStorage.controlID +
                                            "']").prop("checked", g).trigger("change");
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("fill")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "fillColor":
                                        d = 1;
                                        g.includes("rgba") && (d = g.replace(/^.*,(.+)\)/, "$1"),
                                            d = parseFloat(d).toFixed(2));
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input" + sessionStorage.controlID + "']").attr("data-opacity", d);
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input" + sessionStorage.controlID + "']").val(a.Internal.Utilities.color2Hex(g));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("fillColor")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "dashCap":
                                        dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select" + sessionStorage.controlID + "'][value='" + g + "']:radio").prop("checked", !0);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("dashCap")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap" +
                                            sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "dashStyle":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select" + sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("dashStyle")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_style" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "stroke":
                                        //dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input" + sessionStorage.controlID + "']").prop("checked", g).trigger("change");
                                        //if (!f || f && Array.isArray(f) && -1 != f.indexOf("stroke")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke" + sessionStorage.controlID).css("display", "inline-block"),
                                        //    dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control" + sessionStorage.controlID).css("display", "inline-block");
                                        if (b.type != 6 && b.type != 1) {
                                            var strokeCheckbox = dvJQuery("#annot_strokeCheck" + sessionStorage.controlID);
                                            strokeCheckbox.css("display", "inline-block");
                                            document.getElementById("annot_strokeCheck_input" + sessionStorage.controlID).checked = b.stroke;
                                        }
                                        break;
                                    case "strokeColor":
                                        d = 1;
                                        g.includes("rgba") && (d = g.replace(/^.*,(.+)\)/, "$1"), d = parseFloat(d).toFixed(2));
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input" + sessionStorage.controlID + "']").attr("data-opacity", d);
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input" + sessionStorage.controlID + "']").val(a.Internal.Utilities.color2Hex(g));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("strokeColor")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "borderWidth":
                                        0 == b.type || 11 == b.type ? (dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input" + sessionStorage.controlID + "']").val(Number((96 * g).toFixed(2).replace(".00", ""))), dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label" +
                                            sessionStorage.controlID + " label").html(a.Localize("label_annotation_property_border_width"))) : (d = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select" + sessionStorage.controlID + "']").find("option[value='" + Number((9600 * g).toFixed(2).replace(".00", "")) + "']").val()) || 0, dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select" + sessionStorage.controlID + "']").find("option[value='" + d + "']").prop("selected", !0).trigger("change"), 0 == d && dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input" +
                                                sessionStorage.controlID + "']").val(Number((96 * g).toFixed(2).replace(".00", ""))), dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label" + sessionStorage.controlID + " label").html("&nbsp;"));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("borderWidth")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), 0 == b.type || 11 == b.type ? (dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom" + sessionStorage.controlID).css("display", "inline-block"),
                                            dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width" + sessionStorage.controlID).hide()) : dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "opacity":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input" + sessionStorage.controlID + "']").val(Number((100 * g).toFixed(2).replace(".00", "")));
                                        (!f || f && Array.isArray(f) && -1 != f.indexOf("opacity")) && dvJQuery(a.dom.annotationDialogForm).find("#annotation_opacity" + sessionStorage.controlID).css("display",
                                            "inline-block");
                                        break;
                                    case "link":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input" + sessionStorage.controlID + "']").val(g);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("link")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_link" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "radiusFactor":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input" +
                                            sessionStorage.controlID + "']").val(Number((100 * g).toFixed(2).replace(".00", "")));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("radiusFactor")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "rotation":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input" + sessionStorage.controlID + "']").val(Number(g.toFixed(2).replace(".00",
                                            "")));
                                        (!f || f && Array.isArray(f) && -1 != f.indexOf("rotation")) && dvJQuery(a.dom.annotationDialogForm).find("#annotation_rotation" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "squaredBox":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input" + sessionStorage.controlID + "']").prop("checked", g).trigger("change");
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("squaredBox")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" + sessionStorage.controlID).css("display", "inline-block"),
                                            dvJQuery(a.dom.annotationDialogForm).find("#annotation_squared_box" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "text":
                                        dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input" + sessionStorage.controlID + "']").val(g);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("text")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control" + sessionStorage.controlID).css("display", "inline-block");
                                        b.canEditText || 8 != b.type && 9 != b.type || dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input" + sessionStorage.controlID + "']").prop("disabled", !0);
                                        break;
                                    case "fontName":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select" + sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        a.setDialogAnnotationFontNamePropertiesPreview();
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("fontName")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control" + sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "fontStyle":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select" + sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        a.setDialogAnnotationFontStylePropertiesPreview();
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("fontStyle")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control" + sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "foreColor":
                                        d = 1;
                                        g.includes("rgba") && (d = g.replace(/^.*,(.+)\)/, "$1"), d = parseFloat(d).toFixed(2));
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input" + sessionStorage.controlID + "']").attr("data-opacity", d);
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input" + sessionStorage.controlID + "']").val(a.Internal.Utilities.color2Hex(g));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("foreColor")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control" + sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "alignment":
                                        dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select" + sessionStorage.controlID + "'][value='" + g + "']:radio").prop("checked", !0);
                                        a.setDialogAnnotationAlignmentPropertiesPreview();
                                        if (!f || f &&
                                            Array.isArray(f) && -1 != f.indexOf("alignment")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control" + sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "autoSize":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input" + sessionStorage.controlID + "']").prop("checked", g).trigger("change");
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("autoSize")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "fontSize":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input" + sessionStorage.controlID + "']").val(Number(g.toFixed(2).replace(".00", "")));
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("fontSize")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control" +
                                            sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "lineAlignment":
                                        dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select" + sessionStorage.controlID + "'][value='" + g + "']:radio").prop("checked", !0);
                                        a.setDialogAnnotationAlignmentPropertiesPreview();
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("lineAlignment")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control" +
                                            sessionStorage.controlID).css("display", "table-cell");
                                        break;
                                    case "arrowFilled":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input" + sessionStorage.controlID + "']").prop("checked", g).trigger("change");
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("arrowFilled")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "arrowHeight":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input" +
                                            sessionStorage.controlID + "']").val(g);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("arrowHeight")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset" + sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "arrowWidth":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input" + sessionStorage.controlID + "']").val(g);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("arrowWidth")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "endCap":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select" + sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        (!f || f && Array.isArray(f) && -1 != f.indexOf("endCap")) && dvJQuery(a.dom.annotationDialogForm).find("#annotation_end_cap" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "startCap":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select" +
                                            sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        (!f || f && Array.isArray(f) && -1 != f.indexOf("startCap")) && dvJQuery(a.dom.annotationDialogForm).find("#annotation_start_cap" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "measurementUnit":
                                        dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select" + sessionStorage.controlID + "']").find("option[value='" + g + "']").prop("selected", !0);
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("measurementUnit")) dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset" +
                                            sessionStorage.controlID).css("display", "inline-block"), dvJQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "scale":
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input" + sessionStorage.controlID + "']").val(Number(g.toFixed(2).replace(".00", "")));
                                        (!f || f && Array.isArray(f) && -1 != f.indexOf("scale")) && dvJQuery(a.dom.annotationDialogForm).find("#annotation_scale" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "autoCreate":
                                        c || (dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input" +
                                            sessionStorage.controlID + "']").prop("checked", g).trigger("change"), f || dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation" + sessionStorage.controlID).css("display", "inline-block"));
                                        break;
                                    //AGjs__changes For custom fields added when open @TextAnnot dialogue
                                    case "annotText":
                                        if (typeof g == 'undefined') {
                                            g = b["text"];
                                        }
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_text_input" +
                                            sessionStorage.controlID + "']").val(g);

                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("annotText")) dvJQuery(a.dom.annotationDialogForm).find("#annot_text" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "annot_foreColor":
                                        if (typeof g == 'undefined') {
                                            var color = b["foreColor"];
                                            if (color.indexOf("#") >= 0) {
                                                g = color;
                                            } else {
                                                g = rgb2hex(color);
                                            }

                                        }
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_foreColor_input" +
                                            sessionStorage.controlID + "']").val(g.toLowerCase());
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("annot_foreColor")) dvJQuery(a.dom.annotationDialogForm).find("#annot_foreColor" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "annot_fillColor":
                                        if (typeof g == 'undefined') {
                                            var color = b["fillColor"];
                                            if (color.indexOf("#") >= 0) {
                                                g = color;
                                            } else {
                                                g = rgb2hex(color);
                                            }
                                        }
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_fillColor_input" +
                                            sessionStorage.controlID + "']").val(g.toLowerCase());
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("annot_fillColor")) dvJQuery(a.dom.annotationDialogForm).find("#annot_fillColor" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                    case "annot_strokeColor":
                                        if (typeof g == 'undefined') {
                                            var color = b["strokeColor"];
                                            if (color.indexOf("#") >= 0) {
                                                g = color;
                                            } else {
                                                g = rgb2hex(color);
                                            }
                                        }
                                        dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_strokeColor_input" +
                                            sessionStorage.controlID + "']").val(g.toLowerCase());
                                        if (!f || f && Array.isArray(f) && -1 != f.indexOf("annot_strokeColor")) dvJQuery(a.dom.annotationDialogForm).find("#annot_strokeColor" + sessionStorage.controlID).css("display", "inline-block");
                                        break;
                                }

                            });
                           
                            a.DisplayDialogForm(dvJQuery(a.dom.annotationDialogForm), a.Internal.Annotations.getAnnotationTitleFromType(b.type), function () {
                                dvJQuery("input[name='annotation_alignment_select" + sessionStorage.controlID + "']:radio").change(function () {
                                    a.setDialogAnnotationAlignmentPropertiesPreview()
                                });
                                dvJQuery("input[name='annotation_line_alignment_select" + sessionStorage.controlID +
                                    "']:radio").change(function () {
                                        a.setDialogAnnotationLineAlignmentPropertiesPreview()
                                    });
                                dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height", dvJQuery(a.dom.annotationDialogFormTextInput).height())
                            }, null, null, [{
                                text: a.Localize("_label_button_annotation_cancel"),
                                "class": "ant-btn-danger",
                                click: function () {
                                    dvJQuery(a.dom.annotationDialogForm).dvDialog("close");
                                    //AGjs__changes bact to normal mouse mode when we cancel the text annot pop
                                    DocuViewareAPI.SetMouseMode(controlID, 0);
                                    //AGjs__ changes remove highlight of the button when operation is done
                                    $(".highlight").removeClass("button_active");
                                    $(".highlight").css("fill", "rgb(100, 100, 100)");
                                    $("#annot_text_input" + controlID).css("border-color", "rgb(100, 100, 100)");
                                    $("#var_text_errormessage_span" + controlID).text("");
                                    $('#annotTextParentSpan' + controlID).hide();
                                    window.isHaveMapping = false;
                                    window.predictText = "";

                                    allPdfComp.dom.updateButtons();

                                    // end of remove highlight of the button when operation is done
                                }
                            },
                            //AGjs__changes new Predict button
                            {
                                text: "Predict",
                                "class": (window.predictText && window.predictText !== "" && (a.Internal.Annotations && a.Internal.Annotations.currentAnnotProperties.type == 8)) ? "ant-btn-predict" : "ant-btn-predict hiddenPredict",
                                "id": "annot_PredictText_btn",
                                click: function () {
                                    //Predict function
                                    fnPredict(a);
                                }
                            },
                            {
                                text: c ? "Save" : a.Localize("_label_button_annotation_add"),
                                "class": "ant-btn-pdfsave",
                                click: function () {
                                    new Promise((resolve, reject) => {
                                        if (b.type === 8) {
                                            fnValidateWhenAddUpdate(resolve);
                                        } else {
                                            resolve();
                                        }
                                    }).then(() => {
                                        dvJQuery.each(b,
                                            function (d, c) {
                                                //AGjs__changes unique id (sessionStorage.controlID ) added
                                                switch (d) {
                                                    case "fill":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input" + sessionStorage.controlID + "']").is(":checked");
                                                        break;
                                                    case "fillColor":
                                                        b[d] = dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input" + sessionStorage.controlID + "']")).minicolors("rgbaString");
                                                        break;
                                                    case "dashCap":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select" + sessionStorage.controlID + "']:checked").val());
                                                        break;
                                                    case "dashStyle":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select" +
                                                            sessionStorage.controlID + "']").find("option:selected").val());
                                                        break;
                                                    case "stroke":
                                                        //b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input" + sessionStorage.controlID + "']").is(":checked");
                                                        if (b.type == 6 || b.type == 1) {
                                                            b[d] = b.stroke;
                                                        } else {
                                                            b[d] = $("#annot_strokeCheck_input" + sessionStorage.controlID).prop("checked");

                                                        }

                                                        break;
                                                    case "strokeColor":
                                                        b[d] = dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input" + sessionStorage.controlID + "']")).minicolors("rgbaString");
                                                        break;
                                                    case "borderWidth":
                                                        b[d] = parseFloat(100 * dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input" + sessionStorage.controlID + "']").val()) /
                                                            96 / 100 || 0;
                                                        break;
                                                    case "opacity":
                                                        b[d] = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input" + sessionStorage.controlID + "']").val() / 100);
                                                        break;
                                                    case "link":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input" + sessionStorage.controlID + "']").val();
                                                        break;
                                                    case "radiusFactor":
                                                        b[d] = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input" + sessionStorage.controlID + "']").val() / 100);
                                                        break;
                                                    case "rotation":
                                                        b[d] = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input" +
                                                            sessionStorage.controlID + "']").val()) || 0;
                                                        break;
                                                    case "squaredBox":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input" + sessionStorage.controlID + "']").is(":checked");
                                                        break;
                                                    case "text":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input" + sessionStorage.controlID + "']").val();
                                                        break;
                                                    case "fontName":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select" + sessionStorage.controlID + "']").find("option:selected").val();
                                                        break;
                                                    case "fontStyle":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select" +
                                                            sessionStorage.controlID + "']").find("option:selected").val());
                                                        break;
                                                    case "foreColor":
                                                        b[d] = dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input" + sessionStorage.controlID + "']")).minicolors("rgbaString");
                                                        break;
                                                    case "alignment":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select" + sessionStorage.controlID + "']:checked").val());
                                                        break;
                                                    case "autoSize":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input" + sessionStorage.controlID + "']").is(":checked");
                                                        break;
                                                    case "fontSize":
                                                        b[d] = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input" + sessionStorage.controlID + "']").val()) || parseFloat(b[d]);
                                                        break;
                                                    case "lineAlignment":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select" + sessionStorage.controlID + "']:checked").val());
                                                        break;
                                                    case "arrowFilled":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input" + sessionStorage.controlID + "']").is(":checked");
                                                        break;
                                                    case "arrowHeight":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input" +
                                                            sessionStorage.controlID + "']").val()) || 0;
                                                        break;
                                                    case "arrowWidth":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input" + sessionStorage.controlID + "']").val()) || 0;
                                                        break;
                                                    case "endCap":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select" + sessionStorage.controlID + "']").find("option:selected").val());
                                                        break;
                                                    case "startCap":
                                                        b[d] = parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select" + sessionStorage.controlID + "']").find("option:selected").val());
                                                        break;
                                                    case "measurementUnit":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select" + sessionStorage.controlID + "']").find("option:selected").val();
                                                        break;
                                                    case "scale":
                                                        b[d] = parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input" + sessionStorage.controlID + "']").val()) || 1;
                                                        break;
                                                    case "autoCreate":
                                                        b[d] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input" + sessionStorage.controlID + "']").is(":checked");
                                                        break;
                                                    //AGjs__changes For set fields  when click ok @TextAnnot dialogue
                                                    case "annotText":
                                                        {
                                                            let text = dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_text_input" + sessionStorage.controlID + "']").val();
                                                            b["text"] = (text === "") ? "Test" : text;
                                                        }
                                                        break;
                                                    case "annot_foreColor":
                                                        b["foreColor"] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_foreColor_input" + sessionStorage.controlID + "']").val().toUpperCase();
                                                        break;
                                                    case "annot_fillColor":
                                                        b["fillColor"] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_fillColor_input" + sessionStorage.controlID + "']").val().toUpperCase();
                                                        break;
                                                    case "annot_strokeColor":
                                                        b["strokeColor"] = dvJQuery(a.dom.annotationDialogForm).find("input[name='annot_strokeColor_input" + sessionStorage.controlID + "']").val().toUpperCase();
                                                        break;
                                                }

                                            });
                                        $('#annotTextParentSpan' + controlID).hide();

                                        dvJQuery(a.dom.annotationDialogForm).dvDialog("close");
                                        //AGjs__changes  b.type == 6 && b.squaredBox means small circle no need to show pop directly we can draw when area selected
                                        return c ? a.Internal.Annotations.annotEdit.updateAnnotation(!1, b) : (b.type == 6 && b.squaredBox) ? a.Internal.Annotations.addCustomCircleWithLine(b) : ((b.type == 8 || b.type == 6 || b.type == 3 || b.type == 1) ? a.Internal.Annotations.addAnnotInteractive(b, a.GetCurrentPage()) : a.Internal.Annotations.beginAddAnnotInteractive(b, a.GetCurrentPage()))
                                    }).catch((e) => console.log(e))
                                }
                                }]);
                            if (a.Internal.Annotations.currentAnnotProperties != null)
                            {
                                    //AGjs__changes hide show custom element (text annot link checkbox)
                                if (a.Internal.Annotations.currentAnnotProperties.type === 8)
                                {
                                    when_open_TextAnnot_popup(custom);
                                 }
                                else
                                {
                                        let annot_SrcText = dvJQuery("#annot_SrcText" + sessionStorage.controlID);
                                        $("#annot_SrcText" + sessionStorage.controlID).val("");
                                        annot_SrcText.css("display", "none");
                                        $("#annot_Mapcheck" + sessionStorage.controlID).hide();
                                        $("#annot_PredictText" + sessionStorage.controlID).hide()

                                        //var strokeCheckbox = dvJQuery("#annot_strokeCheck" + sessionStorage.controlID);
                                        //strokeCheckbox.css("display", "none");
                                }
                            }
                            //AGjs_Edit Text Annottation
                            if (custom == "Edit" && b.type === 8) {
                                fnToSetUpTextAnnot(b.type);
                            } 
                            return DocuViewareAPI.Status.GenericError;
                        }
                    }
                },
                getConfig: function () {
                    return {
                        devicePixelRatio: DocuViewareUtilities.getDevicePixelRatio(),
                        viewerWidth: this.dom.viewerContainer.offsetWidth,
                        viewerHeight: this.dom.viewerContainer.offsetHeight,
                        scrollBarWidth: this.dom.sbWidth,
                        hasWebPSupport: this.Internal.Capabilities.hasWebPSupport(),
                        hasTiffSupport: this.Internal.Capabilities.hasTiffSupport()
                    }
                },
                hasPendingResize: function () {
                    return null != a.NewViewerSizeTimeout
                },
                hasPendingAction: function (b, c, e) {
                    if (b && this.serverCtx && 0 == this.serverCtx.documentLoaded) return e || this.DisplayError(this.Localize("error__no_document_loaded")), !0;
                    if (1 == this.Internal.Files.uploading) return e || this.DisplayError(this.Localize("label__uploading_document")), !0;
                    if (1 == this.ajax.downloading) return e || this.DisplayError(this.Localize("label__downloading_document")), !0;
                    if (0 < this.ajax.pendingRequestes) return !0;
                    if (this.waitForInit) return e ||
                        this.DisplayError(this.Localize("label__initializing")), !0;
                    if (!c && null != a.cache.Annots)
                        for (b = 0; b < a.cache.Annots.length; b++)
                            if (a.cache.Annots[b].hasPendingUpdate()) return e || this.DisplayError(this.Localize("transferring_data")), !0;
                    return !1
                },
                Localize: function (a) {
                    var b = JSON.parse(this.localization);
                    if (b && 0 < b.length)
                        for (var d = 0; d < b.length; d++)
                            if (a == b[d].id) return b[d].message;
                    return a
                },
                DisplayError: function (b) {
                    this.ShowMessage({
                        text: b,
                        backgroundColor: a.dom.UIconfig.headerColor,
                        icon: 16,
                        delay: 5E3
                    })
                },
                ShowMessage: function (b) {
                    var d =
                        dvJQuery(this.dom.infoDiv);
                    d.css("background-color", b.backgroundColor ? b.backgroundColor : a.dom.UIconfig.headerColor);
                    var c = dvJQuery(this.dom.infoMessage);
                    c.css("font-size", b.fontSize ? b.fontSize : "130%");
                    c.css("font-weight", b.fontWeight ? b.fontWeight : "normal");
                    c.css("color", b.fontColor ? b.fontColor : "#FFFFFF");
                    c.css("text-decoration", b.textDecoration ? b.textDecoration : "none");
                    c.css("text-transform", b.textTransform ? b.textTransform : "none");
                    c.css("height", b.messageBoxHeight ? b.messageBoxHeight : a.dom.UIconfig.defaultMessageBoxHeight);
                    b.isHtmlText ? c.html(b.text) : c.text(b.text);
                    d.find(".message_icon").hide();
                    switch (b.icon) {
                        case 0:
                            b.customIcon && d.find(".message_icon_custom").html(b.customIcon).css("display", "inline-block");
                            break;
                        case 16:
                            d.find(".message_icon_error").css("display", "inline-block");
                            break;
                        case 32:
                            d.find(".message_icon_question").css("display", "inline-block");
                            break;
                        case 48:
                            d.find(".message_icon_warning").css("display", "inline-block");
                            break;
                        case 64:
                            d.find(".message_icon_info").css("display", "inline-block");
                            break;
                        case 128:
                            d.find(".message_icon_ok").css("display",
                                "inline-block")
                    }
                    d.finish().slideDown(b.slideDown ? b.slideDown : 300).delay(b.delay ? b.delay : 2500).slideUp(b.slideUp ? b.slideUp : 300)
                },
                DisplayPendingActionNotification: function () {
                    a.ajax.pendingRequestesWithIndicator++;
                    1 == a.ajax.pendingRequestesWithIndicator && dvJQuery(this.dom.pendingActionDiv).show()
                },
                HidePendingActionNotification: function () {
                    a.ajax.pendingRequestesWithIndicator--;
                    0 == a.ajax.pendingRequestesWithIndicator && dvJQuery(this.dom.pendingActionDiv).hide()
                },
                DisplayDialogForm: function (b, c, e, f, h, k) {
                    b.dvDialog({
                        dialogClass: "dv-main",
                        appendTo: dvJQuery(a.dom.mainArea),
                        minWidth: 510 + a.dom.sbWidth,
                        maxHeight: dvJQuery(a.dom.controlArea).height(),
                        position: {
                            my: "center",
                            at: "center",
                            of: dvJQuery(a.dom.mainArea)
                        },
                        title: c,
                        resizable: !1,
                        draggable: !0,
                        create: function (b, d) {
                            null != e && "function" == typeof e && e();
                            dvJQuery(this).css("overflow-x", "hidden");
                            dvJQuery(this).css("overflow-y", "auto");
                            dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color", a.dom.UIconfig.headerColor);
                            dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",
                                a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).parent().css("color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().css("border", "1px solid " + a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find('input[type="text"]').css("color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find("select").css("border-color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find("select").css("color",
                                a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find(".dvUi-widget-content").css("color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find(".dvUi-widget-content a").css("color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color", a.dom.UIconfig.headerColor);
                            dvJQuery(this).parent().find(".dvUi-widget-header a").css("color", a.dom.UIconfig.strokeColor);
                            dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right",
                                "1px solid " + a.dom.UIconfig.miscBorderColor)
                        },
                        open: function (b, d) {
                            var c = this;
                            null != f && "function" == typeof f && f();
                            dvJQuery(this).parent().find(".dv-jquerySelect").each(function (a) {
                                dvJQuery(this).dvSelectmenu({
                                    change: function () {
                                        dvJQuery(this).trigger("change")
                                    }
                                });
                                dvJQuery(this).hasClass("dv-jquerySelectOverflow") && dvJQuery(this).dvSelectmenu("menuWidget").addClass("overflow")
                            });
                            dvJQuery(this).parent().find(".dv-jqueryRadio").each(function (b) {
                                dvJQuery(this).dvButtonset({
                                    setActive: function () {
                                        dvJQuery(c).parent().find(".dvUi-button").css("border",
                                            "1px solid transparent");
                                        dvJQuery(c).parent().find(".dvUi-state-active").css("border", "1px solid " + a.dom.UIconfig.miscBorderColor)
                                    }
                                })
                            });
                            dvJQuery(this).parent().find(".dvUi-selectmenu-button").css("border", "1px solid " + a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border", "1px solid " + a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).parent().find(".dv-color").each(function () {
                                dvJQuery(this).minicolors({
                                    control: "hue",
                                    defaultValue: dvJQuery(this).val(),
                                    inline: !1,
                                    letterCase: "uppercase",
                                    opacity: !0,
                                    position: "bottom left"
                                })
                            });
                            dvJQuery(this).parent().find(".minicolors-swatch").css("border-right", "1px solid " + a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).parent().find(".btn-valid").css("background-color", a.dom.UIconfig.activeSelectedColor);
                            dvJQuery(this).parent().find(".btn-valid").hover(function () {
                                dvJQuery(this).css("background-color", a.dom.UIconfig.activeSelectedColorHover)
                            }, function () {
                                dvJQuery(this).css("background-color", a.dom.UIconfig.activeSelectedColor)
                            });
                            var g = -1;
                            dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function () {
                                g++
                            });
                            if (-1 < g)
                                for (b = 0; b <= g; b++) b === g ? dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq(" + b + ")").focus() : dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq(" + b + ")").blur();
                            dvJQuery(a.dom.modalOverlayArea).show()
                        },
                        close: function (b, d) {
                            null != h && "function" == typeof h && h();
                            dvJQuery(a.dom.modalOverlayArea).hide();
                            dvJQuery(this).parent().find(".dv-jquerySelect").each(function (a) {
                                dvJQuery(this).dvSelectmenu("destroy")
                            });
                            dvJQuery(this).parent().find(".dv-jqueryRadio").each(function (a) {
                                dvJQuery(this).dvButtonset("destroy")
                            });
                            dvJQuery(this).parent().find(".dv-color").each(function () {
                                dvJQuery(this).minicolors("destroy")
                            })
                        },
                        buttons: k
                    }).parent().draggable("option", "containment", dvJQuery(a.dom.mainArea))
                },
                l10n: null,
                cache: {
                    Annots: null,
                    AnnotsComments: null,
                    Pages: null,
                    canvas: null,
                    emptyCanvas: function () {
                        a.dom.SelectedTextRegions.clear();
                        if (a.dom.viewerArea.hasChildNodes())
                            for (var b = a.dom.viewerArea.children.length - 1; 0 <= b; b--) a.dom.viewerArea.removeChild(a.dom.viewerArea.children[b]);
                        if (null != this.Pages)
                            for (b = 0; b < this.Pages.length; b++) this.Pages[b].drawn = !1
                    },
                    getPageCanvas: function (a) {
                        if (null != this.canvas)
                            for (var b = 0; b < this.canvas.length; b++)
                                if (this.canvas[b].pageNo == a) return this.canvas[b];
                        return null
                    },
                    getPageObject: function (a) {
                        if (null != this.Pages)
                            for (var b = 0; b < this.Pages.length; b++)
                                if (this.Pages[b].pageNo == a) return this.Pages[b];
                        return null
                    },
                    clearCachedPages: function () {
                        this.Pages = null;
                        a.ajax.pendingPageViewRequests = null;
                        "function" == typeof CollectGarbage && CollectGarbage()
                    },
                    clearCachedBitmap: function () {
                        if (null !=
                            this.Pages)
                            for (var b = 0; b < this.Pages.length; b++) this.Pages[b].bitmap = null, this.Pages[b].drawn = !1;
                        a.ajax.pendingPageViewRequests = null;
                        "function" == typeof CollectGarbage && CollectGarbage()
                    },
                    clearBitmap: function (a) {
                        if (null !== this.Pages)
                            for (var b = 0; b < this.Pages.length; b++)
                                if (this.Pages[b].pageNo === a) {
                                    this.Pages[b].bitmap = null;
                                    break
                                }
                    },
                    clearPage: function (b) {
                        if (null !== this.Pages)
                            for (var d = 0; d < this.Pages.length; d++)
                                if (this.Pages[d].pageNo === b) {
                                    this.Pages[d].bitmap = null;
                                    this.Pages[d].drawn = !1;
                                    break
                                } d = this.getPageCanvas(b);
                        if (null != d)
                            for (var c = 0; c < d.canvas.length; c++) {
                                var e = d.canvas[c].tile;
                                null != e && (e.style.backgroundColor = "white", e.getContext("2d").clearRect(0, 0, e.width, e.height))
                            }
                        a.Internal.Annotations.removePageAnnots(b);
                        a.Internal.FormFields.removePageFormFields(b);
                        a.dom.thumbnailArea && (b = a.Internal.Thumbnails.getThumbnailFromPageNo(b), null != b && (b.attr("data-loaded", "false"), b.attr("data-loading", "false")))
                    },
                    cachePage: function (a) {
                        null == this.Pages && (this.Pages = []);
                        this.Pages.push(a)
                    },
                    cachePageBitmap: function (a,
                        b, c, e, f) {
                        var d = new Image;
                        d.src = "data:" + b + ";base64," + c;
                        if (null != this.Pages)
                            for (b = 0; b < this.Pages.length; b++)
                                if (this.Pages[b].pageNo == a) {
                                    this.Pages[b].drawn = !1;
                                    this.attachImageToPage(this.Pages[b], d, e, f);
                                    return
                                } a = {
                                    pageNo: a,
                                    drawn: !1
                                };
                        this.attachImageToPage(a, d, e, f);
                        this.cachePage(a)
                    },
                    attachImageToPage: function (a, b, c, e) {
                        a.bitmap = b;
                        a.scale = c;
                        a.hasTransparency = e
                    }
                },
                ajax: {
                    sessionID: h,
                    requestNo: 0,
                    pageViewRequestNo: 0,
                    thumbnailRequestNo: 0,
                    transferID: 0,
                    downloading: !1,
                    pendingRequestes: 0,
                    pendingPageViewRequests: null,
                    pendingRequestesWithIndicator: 0,
                    latestSelectedPage: 0,
                    contextID: q,
                    customHeaders: fa,
                    hasPendingPageViewRequestes: function () {
                        return null != this.pendingPageViewRequests && 0 < this.pendingPageViewRequests.length
                    },
                    SetNewServerCtx: function (b, c, e) {
                        var d = a.GetCurrentPage(),
                            g = a.GetCurrentZoom(),
                            f = a.ajax.contextID,
                            h = a.serverCtx.documentLoaded;

                        null == b ? (a.resetServerCtx(), a.ajax.contextID = "") : (a.serverCtx = b, a.ajax.contextID = b.contextID);
                        var m = null;
                        //AGjs__changes For delete last link purpose reloaad document
                        if ((b.result) ? b.result.reloadDocument : false) {
                            var m = null != b && b.documentLoaded && f != a.ajax.contextID || null != b && !b.reloadDocument;
                        }
                        else {
                            var m = null != b && b.documentLoaded && f != a.ajax.contextID || null != b && b.reloadDocument;

                        }
                        f = h && a.ajax.contextID != f;
                        h = a.dom.selectedSnapin;
                        if (m || f) a.cache.Pages = null;
                        (f || a.serverCtx.reloadDocument) && a.ClearUI();
                        if (f && (m || (null != a.dom.pageNavBox && (a.dom.pageNavBox.style.width = "36px"), null != a.dom.pageNavBoxMobile && (a.dom.pageNavBoxMobile.style.width = "36px"), a.dom.UIconfig.collapseSnapinOnDocumentClosed && a.SetSnapinsPanelVisibility(!1)), a.callbacks.onDocumentClosed)) a.callbacks.onDocumentClosed();
                        a.UpdateUI(m, e, null != b, f);
                        m && a.IsSnapinsPanelVisible() && (null == a.dom.selectedSnapin || a.SelectSnapIn(h,
                            !0) != DocuViewareAPI.Status.OK) && a.SelectFirstAvailableSnapin(null);
                        //AGjs__changes For delete last link purpose reloaad document
                        b = true;
                        if (m || b) a.Internal.Annotations.unselectAll(), a.dom.pageCountBox && a.dom.pageNavBox && (a.dom.pageCountBox.innerHTML = a.GetPageCount(), a.dom.pageNavBox.value = a.GetCurrentPage()), a.dom.pageCountBoxMobile && a.dom.pageNavBoxMobile && (a.dom.pageCountBoxMobile.innerHTML = a.GetPageCount(), a.dom.pageNavBoxMobile.value = a.GetCurrentPage());
                        if (!c) {
                            if (m && (a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()), a.callbacks.onNewDocumentLoaded)) a.callbacks.onNewDocumentLoaded();
                            if (b && a.callbacks.onPageChanged) a.callbacks.onPageChanged();
                            if (g != a.GetCurrentZoom() && a.callbacks.onZoomChanged) a.callbacks.onZoomChanged()
                        }
                        null != a.dom.zoomInButton && (a.GetCurrentZoom() >= a.serverCtx.zoomMax ? (a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton), a.dom.zoomInButton.disabled = !0) : (a.dom.zoomInButton.disabled = !1, a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton)));
                        null != a.dom.zoomOutButton && (a.GetCurrentZoom() <= a.serverCtx.zoomMin ? (a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton),
                            a.dom.zoomOutButton.disabled = !0) : (a.dom.zoomOutButton.disabled = !1, a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton)))
                    },
                    PostCustomServerAction: function (b, c, e, f, h) {
                        if (a.waitForInit) return setTimeout(function () {
                            a.ajax.PostCustomServerAction(b, c, e, f, h)
                        }, 100), DocuViewareAPI.Status.OK;
                        if (a.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                        var d = {
                            url: a.appControllerPath + "/customaction" + (a.useIdInRoot ? "/1" : ""),
                            data: {
                                actionName: c,
                                args: e,
                                clientConfiguration: a.getConfig()
                            },
                            success: function (b) {
                                "string" ===
                                    typeof b && (b = eval("(" + b + ")"));
                                a.ajax.HandleServerContextResponse(b, !1, !0);
                                f && f(b.result)
                            },
                            error: function () {
                                h && h()
                            }
                        };
                        return a.ajax.PostBaseRequest(d, !b, !0)
                    },
                    PostAjaxRequestForCrossDomainApp: function (a) {
                        a.cache = !1;
                        a.processData = !1;
                        null !== this.customHeaders && 0 !== this.customHeaders.trim().length && (a.headers = this.customHeaders);
                        a.timeout || (a.timeout = DocuViewareConstants.SERVER_SESSION_LOCK_TIMEOUT + 1E4);
                        a.crossDomain = !0;
                        a.type = "POST";
                        a.contentType = "application/json";
                        a.dataType = "json";
                        dvJQuery.ajax(a)
                    },
                    PostAjaxRequestForDocuViewareAction: function (a) {
                        null === a.error && alert("Please specify an error object!");
                        a.cache = !1;
                        a.processData = !1;
                        null !== this.customHeaders && 0 !== this.customHeaders.trim().length && (a.headers = this.customHeaders);
                        a.timeout || (a.timeout = DocuViewareConstants.SERVER_SESSION_LOCK_TIMEOUT + 1E4);
                        a.type = "POST";
                        a.contentType = "application/json";
                        a.dataType = "json";
                        dvJQuery.ajax(a)
                    },
                    CustomPostBaseRequest: function (b, c, d) {
                        null != b.beforeStart && b.beforeStart();
                        this.pendingRequestes += 1;
                        this.requestNo += 1;
                        null == b.data && (b.data = {});
                        b.data.vScrollbarVal = a.Internal.Coordinates.getViewerScrollTop();
                        b.data.vScrollbarMax = a.serverCtx.vScrollbarMax;
                        b.data.hScrollbarVal = a.Internal.Coordinates.getViewerScrollLeft();
                        b.data.hScrollbarMax = a.serverCtx.hScrollbarMax;
                        b.data.sessionID = this.sessionID;
                        b.data.contextID = this.contextID;
                        b.data.requestNo = this.requestNo;
                        a.DisplayPendingActionNotification();
                        a.ajax.PostAjaxRequestForDocuViewareAction({
                            url: b.url,
                            async: !c,
                            data: JSON.stringify(b.data),
                            success: function (c) {
                                --a.ajax.pendingRequestes;
                                a.HidePendingActionNotification();
                                //AGjs__changes For unique id declaration(sessionStorage.controlID)
                                if (DocuViewareAPI.GetMouseMode(sessionStorage.controlID) != 1) {
                                    a.ExitAnnotationDrawingMode();
                                }
                                b.success && b.success(c)
                            },
                            error: function (c) {
                                a.ajax.HandleError(c);
                                --a.ajax.pendingRequestes;
                                null != b.error && b.error()
                            },
                            complete: function (c) {
                                b.complete && b.complete()
                            }
                        });
                        return DocuViewareAPI.Status.OK
                    },
                    PostBaseRequest: function (b, c, e) {
                        if (!e && a.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                        null != b.beforeStart &&
                            b.beforeStart();
                        this.pendingRequestes += 1;
                        this.requestNo += 1;
                        null == b.data && (b.data = {});
                        b.data.vScrollbarVal = a.Internal.Coordinates.getViewerScrollTop();
                        b.data.vScrollbarMax = a.serverCtx.vScrollbarMax;
                        b.data.hScrollbarVal = a.Internal.Coordinates.getViewerScrollLeft();
                        b.data.hScrollbarMax = a.serverCtx.hScrollbarMax;
                        b.data.sessionID = this.sessionID;
                        b.data.contextID = this.contextID;
                        b.data.requestNo = this.requestNo;
                        a.DisplayPendingActionNotification();
                        a.ajax.PostAjaxRequestForDocuViewareAction({
                            url: b.url,
                            async: !c,
                            data: JSON.stringify(b.data),
                            success: function (d) {
                                --a.ajax.pendingRequestes;
                                a.HidePendingActionNotification();

                                //AGjs__changes comment the follwing code to copy the page annot and we can paste that annot to which page you want
                                //if we uncomment the following line we can only copy and paste that page itself

                                //a.ExitAnnotationDrawingMode();

                                b.success && b.success(d)
                            },
                            error: function (d) {
                                a.ajax.HandleError(d);
                                --a.ajax.pendingRequestes;
                                null != b.error && b.error()
                            }
                        });
                        return DocuViewareAPI.Status.OK
                    },
                    HandleError: function (b) {
                        if (b) {
                            if (null != b.responseType && "DocuVieware" == b.responseType) {
                                var d = "";
                                null != b.action && "" != b.action && (d += b.action + ": ");
                                d += b.message;
                                console.log("DocuVieware: " + d);
                                b.throwError && a.DisplayError(d)
                            } else null !=
                                b.readyState && null != b.statusText && (d = "DocuVieware XMLHttpRequest error." + ("\nStatus: " + b.status + "."), d += "\nReadyState: ", d = 0 == b.readyState ? d + "uninitialized." : 1 == b.readyState ? d + "loading." : 2 == b.readyState ? d + "loaded." : 3 == b.readyState ? d + "interactive." : 4 == b.readyState ? d + "completed." : d + (b.readyState + "."), d += "\nDescription: " + b.statusText + ".", null != b.responseText && "" != b.responseText && (d += "\nResponse text: " + b.responseText), "timeout" != b.statusText && null != b.status && "0" == b.status && null != b.readyState && 0 == b.readyState ?
                                    a.debug && console.log(d) : (console.log(d), a.debug && alert(d))), dvJQuery(a.dom.mainSpinner).hide(), a.HidePendingActionNotification();
                            b.resetClientUI && a.ClearUI();
                            if (1 == b.reloadServerContext) a.events.onLoad(!0)
                        }
                    },
                    HandleServerContextResponse: function (b, c, e, f) {
                        if (b && b.status == DocuViewareAPI.Status.OK) {
                            var d = a.GetCurrentPage();
                            b.message && a.ShowMessage(b.message);
                            if (b.contextID < a.ajax.contextID) return;
                            a.ajax.SetNewServerCtx(b, f, c);
                            !e || d == a.GetCurrentPage() && a.GetCurrentPage() == a.GetLastPageNoRequest() || (a.ajax.latestSelectedPage =
                                a.GetCurrentPage(), a.EnsureCurrentPageVisibility());
                            return !0
                        }
                        a.ajax.HandleError(b);
                        return !1
                    }
                },
                callbacks: {
                    onFileOpenSuccess: null,
                    onFileOpenError: null,
                    onURIOpenSuccess: null,
                    onURIOpenError: null,
                    onPageChanged: null,
                    onRotationChanged: null,
                    onAnnotationSelectedStateChanged: null,
                    onAnnotationAdded: null,
                    onAnnotationEdited: null,
                    onAnnotationDeleted: null,
                    onAnnotationMouseEnter: null,
                    onAnnotationMouseLeave: null,
                    onCommentAdded: null,
                    onCommentEdited: null,
                    onCommentDeleted: null,
                    onFormFieldChanged: null,
                    onZoomChanged: null,
                    onNewDocumentLoaded: null,
                    onDocumentClosed: null,
                    onDocumentPrinted: null,
                    onDocumentSaved: null,
                    onTwainAcquisitionDialogAcquireButtonClick: null,
                    onTwainAcquisitionDialogCancelButtonClick: null,
                    onThumbnailsOrderChanged: null,
                    onTextSelected: null,
                    onTextAnnotated: null,
                    onAreaSelected: null,
                    onFullscreenModeChanged: null,
                    onThumbnailsSnapInSelected: null,
                    onBookmarksSnapInSelected: null,
                    onSearchSnapInSelected: null,
                    onAnnotationsSnapInSelected: null,
                    onCommentsSnapInSelected: null,
                    onSnapInPanelResized: null,
                    onSnapInPanelToggle: null
                },
                serverCtx: {},
                dom: {
                    visibleToolbar: DocuViewareAPI.Toolbar.None,
                    enableAnnotEditionOnDblClick: !0,
                    selectedAnnotation: null,
                    selectedSnapin: null,
                    isLoadFromUriDialogVisible: !1,
                    sbWidth: DocuViewareUtilities.getScrollbarWidth(),
                    toolbarLogo: document.getElementById("docuViewareLogo" + c),
                    mobileToolbarArea: document.getElementById("mobileToolbar" + c),
                    mobileToolbarTop: document.getElementById("mobileToolbarTop" + c),
                    mobileToolbarContainer: document.getElementById("mobileToolbarContainer" + c),
                    subMenuZoomModeMobile: document.getElementById("subMenuZoomModeMobile" +
                        c),
                    subMenuMouseModeMobile: document.getElementById("subMenuMouseModeMobile" + c),
                    pageNavBoxMobile: document.getElementById("pageNavBoxMobile" + c),
                    pageCountBoxMobile: document.getElementById("pageCountBoxMobile" + c),
                    openFromFileButtonMobile: document.getElementById("openFromFileButtonMobile" + c),
                    twainAcquisitionButtonMobile: document.getElementById("twainAcquisitionButtonMobile" + c),
                    fullscreenButtonMobile: document.getElementById("fullscreenButtonMobile" + c),
                    singlePageModeButtonMobile: document.getElementById("singlePageModeButtonMobile" +
                        c),
                    panMouseModeButtonMobile: document.getElementById("panMouseModeButtonMobile" + c),
                    selectMouseModeButtonMobile: document.getElementById("selectMouseModeButtonMobile" + c),
                    zoomAreaMouseModeButtonMobile: document.getElementById("zoomAreaMouseModeButtonMobile" + c),
                    openfile: document.getElementById("openfile" + c),
                    twainAcquisitionButton: document.getElementById("twainAcquisitionButton" + c),
                    openFromFileButton: document.getElementById("openFromFileButton" + c),
                    zoomInButton: document.getElementById("zoomInButton" + c),
                    zoomOutButton: document.getElementById("zoomOutButton" +
                        c),
                    zoomModeButton: document.getElementById("zoomModeButton" + c),
                    mouseModeButton: document.getElementById("mouseModeButton" + c),
                    subMenuZoomMode: document.getElementById("subMenuZoomMode" + c),
                    subMenuMouseMode: document.getElementById("subMenuMouseMode" + c),
                    pendingActionDiv: document.getElementById("pendingActionDiv" + c),
                    openFromUriArea: document.getElementById("openuri" + c),
                    openFromUriButton: document.getElementById("openFromUriButton" + c),
                    singlePageModeButton: document.getElementById("singlePageModeButton" + c),
                    fullscreenButton: document.getElementById("fullscreenButton" +
                        c),
                    panMouseModeButton: document.getElementById("panMouseModeButton" + c),
                    selectMouseModeButton: document.getElementById("selectMouseModeButton" + c),
                    zoomAreaMouseModeButton: document.getElementById("zoomAreaMouseModeButton" + c),
                    infoDiv: document.getElementById("infoDiv" + c),
                    infoMessage: document.getElementById("infoMessage" + c),
                    addressBar: document.getElementById("openuriinput" + c),
                    mainArea: document.getElementById("main" + c),
                    mainSpinner: document.getElementById("mainSpinner" + c),
                    mainSpinnerContent: document.getElementById("mainSpinnerContent" +
                        c),
                    leftSideArea: document.getElementById("leftside" + c),
                    leftSideResizeBar: document.getElementById("leftSideResizeBar" + c),
                    snapinButtonStrip: document.getElementById("snapinButtonStrip" + c),
                    leftsideContainer: document.getElementById("leftsideContainer" + c),
                    leftSideContainerPanelsArea: document.getElementById("leftsideContainerPanels" + c),
                    snapinsHeader: document.getElementById("snapinsHeader" + c),
                    snapinTabControl: document.getElementById("leftsidePanels" + c),
                    snapinsHeaderLabel: document.getElementById("snapinsHeaderLabel" +
                        c),
                    thumbnailArea: document.getElementById("thumbnailsPanel" + c),
                    commentsArea: document.getElementById("commentsPanel" + c),
                    commentsAuthorInput: document.getElementById("commentAuthorInput" + c),
                    commentsSearchArea: document.getElementById("commentsContainer" + c),
                    commentsSearchValueInput: document.getElementById("commentsSearchValueInput" + c),
                    commentsSearchClearResultsButton: document.getElementById("commentsSearchClearResultsButton" + c),
                    commentsSortBySelect: document.getElementById("commentsSortBySelect" + c),
                    commentsSearchActionContainerOverlayDisable: document.getElementById("commentsSearchActionContainerOverlayDisable" +
                        c),
                    commentsSortBySelectContainer: document.getElementById("commentsSortBySelectContainer" + c),
                    commentsContainer: document.getElementById("commentsContainer" + c),
                    commentAnswerBox: document.getElementById("commentAnswerBox" + c),
                    commentContentBox: document.getElementById("commentContentBox" + c),
                    commentStatusBox: document.getElementById("commentStatusBox" + c),
                    commentMessageInput: document.getElementById("commentMessageInput" + c),
                    commentAnswerInput: document.getElementById("commentAnswerInput" + c),
                    commentStatusSelect: document.getElementById("commentStatusSelect" +
                        c),
                    commentsCollapseExpandAllButton: document.getElementById("commentsCollapseExpandAllButton" + c),
                    bookmarksArea: document.getElementById("bookmarksPanel" + c),
                    bookmarksTree: document.getElementById("bookmarksTree" + c),
                    searchArea: document.getElementById("searchPanel" + c),
                    searchPanelForm: document.getElementById("searchPanelForm" + c),
                    searchValueInput: document.getElementById("searchValueInput" + c),
                    searchCaseSensitiveInput: document.getElementById("searchCaseSensitiveInput" + c),
                    searchAnyWordInput: document.getElementById("searchAnyWordInput" +
                        c),
                    searchPageSelect: document.getElementsByName("searchPageSelect" + c),
                    searchWholeWordInput: document.getElementById("searchWholeWordInput" + c),
                    searchResultsContainer: document.getElementById("searchResultsContainer" + c),
                    searchClearResultsButton: document.getElementById("searchClearResultsButton" + c),
                    annotationsArea: document.getElementById("annotationsPanel" + c),
                    searchResults: document.getElementById("searchResults" + c),
                    viewerContainer: document.getElementById("viewerContainer" + c),
                    viewerArea: document.getElementById("viewer" +
                        c),
                    controlArea: document.getElementById("control" + c),
                    toolBarArea: document.getElementById("toolbar" + c),
                    pageNavBox: document.getElementById("pageNavBox" + c),
                    pageCountBox: document.getElementById("pageCountBox" + c),
                    passwordDialogForm: document.getElementById("password_dialog" + c),
                    passwordDialogLabel: document.getElementById("password_label" + c),
                    passwordDialogInput: document.getElementById("password_input" + c),
                    annotationsActionButtons: document.getElementById("annotationActionButtons" + c),
                    annotationDialogFormTextInput: document.getElementById("annotation_text_input" +
                        c),
                    annotationDialogFormFontSizeInput: document.getElementById("annotation_font_size_input" + c),
                    annotationDialogFormForeColorInput: document.getElementById("annotation_fore_color_input" + c),
                    annotationDialogFormFontNameSelect: document.querySelectorAll("select[name='annotation_font_name_select" + c + "']"),
                    annotationDialogFormAlignmentSelect: document.querySelectorAll("input[name='annotation_alignment_select" + c + "']"),
                    annotationDialogFormFontStyleSelect: document.querySelectorAll("select[name='annotation_font_style_select" +
                        c + "']"),
                    annotationDialogFormContainer: document.getElementById("annotationDialogFormContainer" + c),
                    annotationDialogForm: document.getElementById("annotationDialogForm" + c),
                    annotationActionRemoveConfirm: document.getElementById("annotationActionRemoveConfirm" + c),
                    //AGjs__changes custom pop added
                    annotationPopMessage: document.getElementById("annotationRemoveConfirmMessage" + c),
                    annotationPop: document.getElementById("annotationActionRemoveConfirm" + c),
                    annotationRemoveConfirmMessage: document.getElementById("annotationRemoveConfirmMessage" + c),
                    digisignDialogFormContainer: document.getElementById("digisignDialogFormContainer" + c),
                    digisignDialogForm: document.getElementById("digisignDialogForm" + c),
                    digisignInfoFieldSet: document.getElementById("digisignInfoFieldset" +
                        c),
                    digisignInfoNameInput: document.getElementById("digisign_info_name" + c),
                    digisignInfoReasonInput: document.getElementById("digisign_info_reason" + c),
                    digisignInfoLocationInput: document.getElementById("digisign_info_location" + c),
                    digisignInfoContactInput: document.getElementById("digisign_info_contact" + c),
                    digisignInfoRequired: document.getElementById("digisignInfoRequired" + c),
                    digisignAppearanceRadio: document.getElementById("digisign_appearance" + c),
                    digisignAppearanceImageInputFile: document.getElementById("digisign_appearance_file" +
                        c),
                    digisignAppearanceTextInput: document.getElementById("digisign_appearance_text" + c),
                    digisignAppearanceInvisible: document.getElementById("digisign_appearance_invisible" + c),
                    digisignCertificateFieldset: document.getElementById("digisignCertificateFieldset" + c),
                    digisignCertNameSelect: document.getElementById("digisign_certificate_name" + c),
                    digisignCertPasswordInput: document.getElementById("digisign_certificate_password" + c),
                    digisignCertLevelSelect: document.getElementById("digisign_certification_level" + c),
                    digisignCertificationLevelFieldSet: document.getElementById("digisignCertificationLevelFieldSet" + c),
                    digisignTimestampFieldset: document.getElementById("digisignTimestampFieldset" + c),
                    digisignTimestampRadio: document.getElementById("digisign_timestamp" + c),
                    digisignTimestampServerInput: document.getElementById("digisign_timestamp_server" + c),
                    digisignTimestampLoginInput: document.getElementById("digisign_timestamp_login" + c),
                    digisignTimestampPasswordInput: document.getElementById("digisign_timestamp_password" +
                        c),
                    digisignActionRemoveConfirm: document.getElementById("digisignActionRemoveConfirm" + c),
                    digisignRemoveConfirmMessage: document.getElementById("digisignRemoveConfirmMessage" + c),
                    signaturePadDialogForm: document.getElementById("signaturePadDialogForm" + c),
                    signaturePad: document.getElementById("signaturePad" + c),
                    signaturesContainer: document.getElementById("signaturesContainer" + c),
                    drawingModeArea: document.getElementById("drawingMode" + c),
                    modalOverlayArea: document.getElementById("modalOverlayDiv" + c),
                    commentDialogModalOverlay: document.getElementById("commentDialogModalOverlayDiv" +
                        c),
                    saveDialog: document.getElementById("saveDialog" + c),
                    twainAcquisitionDialog: document.getElementById("twainAcquisitionDialog" + c),
                    twainAcquisitionDialogPanel: document.getElementById("twainAcquisitionDialogPanel" + c),
                    twainAcquisitionDialogAcquireButton: document.getElementById("twainAcquisitionDialogAcquireButton" + c),
                    twainAcquisitionDestinationAppendDocBox: document.getElementById("twainAcquisitionDestinationAppendDocBox" + c),
                    commentDialog: document.getElementById("commentDialog" + c),
                    printDialog: document.getElementById("printDialog" +
                        c),
                    printPageRangeInput: document.getElementById("printPageRangeInput" + c),
                    printProgressbarDiv: document.getElementById("printProgressbarDiv" + c),
                    printDialogPrintButton: document.getElementById("printDialogPrintButton" + c),
                    copyDialog: document.getElementById("copyDialog" + c),
                    copyTextInput: document.getElementById("copy_text_input" + c),
                    viewerContextMenu: document.getElementById("viewerContextMenu" + c),
                    faderArea: document.getElementById("label-fader__" + c),
                    maxUploadSize: e,
                    packetSize: k,
                    UIconfig: eval("(" + N + ")"),
                    singlePageView: null,
                    thumbnailSelectBox: null,
                    thumbnailSelectBoxOrigin: {
                        left: 0,
                        top: 0
                    },
                    //AGjs__change contextmenu for link right click
                    checkLinkAt: function (b, c, data) {
                        if (0 == a.Internal.Annotations.selected.length && !a.Internal.Annotations.mouseOverAnnot) {
                            var d = a.Internal.Pages.getVisiblePageNumbers();
                            if (null != d)
                                for (var g = 0; g < d.length; g++) {
                                    var e = d[g];
                                    if (a.Internal.Pages.isPageRendered(e)) {
                                        var f = a.cache.getPageObject(e);
                                        if (null != f && null != f.links) {
                                            e = a.Internal.Pages.getRenderingState(e);
                                            for (var h = 0; h < f.links.length; h++) {
                                                var k = {
                                                    left: 96 * f.links[h].x,
                                                    top: 96 * f.links[h].y,
                                                    width: 96 *
                                                        f.links[h].width,
                                                    height: 96 * f.links[h].height
                                                };
                                                a.Internal.Matrix.transformBBox(e.contentMatrix, 0, k);
                                                k.left += e.pageLeft;
                                                k.top += e.pageTop;
                                                var l = a.dom.viewerArea.getBoundingClientRect(),
                                                    q = b - l.left + a.Internal.Coordinates.getViewerScrollLeft();
                                                l = c - l.top + a.Internal.Coordinates.getViewerScrollTop();
                                                if (q >= k.left && q <= k.left + k.width && l >= k.top && l <= k.top + k.height) {
                                                    //AGjs__change contextmenu for link right click
                                                    if (data) {
                                                        if (!JSON.parse(sessionStorage.projectStudyLockStatus)) {
                                                            fnShowDeleteEditContextMenuForInternalLink(data.left, data.top, h);
                                                        }
                                                    }
                                                    return a.dom.rlink.style.height = k.height + "px", a.dom.rlink.style.width = k.width + "px", a.dom.rlink.style.left = k.left + "px", a.dom.rlink.style.top = k.top + "px",
                                                        a.events.overLink = f.links[h], !0
                                                }


                                            }
                                        }
                                    }
                                }
                        }
                        return !1
                    },
                    handleLinkRectVisibility: function () {
                        a.events.overLink ? "none" == a.dom.rlink.style.display && (a.dom.rlink.style.display = "block", a.events.setCursor()) : "block" == a.dom.rlink.style.display && (a.dom.rlink.style.display = "none", a.events.setCursor())
                    },
                    adjustPageNavBoxWidthForMaxPages: function (b) {
                        null != a.dom.pageNavBox && (a.dom.pageNavBox.style.width = (12 * b.toString().length).toString() + "px")
                    },
                    updateSelectedPageFader: function (b, c) {
                        if (0 != a.dom.viewerArea.offsetWidth &&
                            0 != a.dom.viewerArea.offsetHeight) {
                            var d = dvJQuery(a.dom.faderArea),
                                g = a.Localize("_label__fader_page");
                            g = g.replace("#", c);
                            g = g.replace("@", a.serverCtx.pageCount);
                            d.find("div:first-child").text() != g && (d.find("div:first-child").text(g), c = 100, g = g.length, 15 < g && (c = 100 / 15 * g), d.width() != c && d.width(c), d.finish().animate({
                                opacity: 1
                            }, {
                                    duration: b,
                                    start: function () {
                                        d.css("z-index", 16777270)
                                    }
                                }).delay(1E3).animate({
                                    opacity: 0
                                }, {
                                        duration: 800,
                                        complete: function () {
                                            d.css("z-index", "")
                                        }
                                    }))
                        }
                    },
                    ensureSelectedThumbnailVisibility: function (b) {
                        if (a.serverCtx.documentLoaded &&
                            a.dom.thumbnailArea) {
                            var d = document.getElementById(a.FindSnapIn("thumbnails").snapInID),
                                c = a.GetLastPageNoRequest();
                            c = a.Internal.Thumbnails.getThumbnailFromPageNo(c);
                            null != c && (c = d.scrollTop + Math.floor(c.position().top), c != d.scrollTop ? d.scrollTop = c : b && a.showVisibleThumbnails())
                        }
                    },
                    updateThumbsStyle: function (b, c) {
                        if (c) {
                            if (a.dom.thumbnailArea)
                                for (a.Internal.Thumbnails.lastUpdatedPageThumbnail = a.GetLastPageNoRequest(), c = 0; c < a.dom.thumbnailArea.childElementCount; c++) {
                                    var d = a.dom.thumbnailArea.children[c],
                                        g = dvJQuery(d);
                                    d = a.Internal.Thumbnails.getThumbnailPage(d);
                                    0 != d && this.resetThumbStyle(g, d == a.GetLastPageNoRequest())
                                }
                        } else a.Internal.Thumbnails.lastUpdatedPageThumbnail != a.GetLastPageNoRequest() && (0 < a.Internal.Thumbnails.lastUpdatedPageThumbnail && a.dom.thumbnailArea && this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail), 0 < a.GetLastPageNoRequest() && a.dom.thumbnailArea && this.updateThumbStyle(a.GetLastPageNoRequest()), a.Internal.Thumbnails.lastUpdatedPageThumbnail = a.GetLastPageNoRequest());
                        b && this.ensureSelectedThumbnailVisibility(!1)
                    },
                    resetThumbStyle: function (b, c) {
                        b.css({
                            display: "inline-block",
                            "border-style": c ? "dotted" : "solid",
                            "border-width": "1px",
                            margin: "8px 8px 8px 8px",
                            padding: "5px 5px 0px 5px",
                            "text-align": "center",
                            position: "relative",
                            "border-color": c ? a.dom.UIconfig.strokeColor : "transparent",
                            "background-color": "transparent"
                        })
                    },
                    updateThumbStyle: function (b) {
                        if (a.dom.thumbnailArea) {
                            var d = a.Internal.Thumbnails.getThumbnailFromPageNo(b);
                            if (null != d) {
                                var c = d[0].getAttribute("mouse-over");
                                c = null != c && "true" === c;
                                var e = a.Internal.Thumbnails.isThumbnailSelected(b);
                                b = b == a.GetLastPageNoRequest();
                                d.css({
                                    "border-color": c ? a.dom.UIconfig.activeSelectedColor : b ? a.dom.UIconfig.strokeColor : "transparent",
                                    "border-style": c ? "solid" : "dotted",
                                    "background-color": e ? a.dom.UIconfig.activeSelectedBackgroundColor : "transparent"
                                })
                            }
                        }
                    },
                    updateHoverBordersOnDisableToggle: function (a) {
                        a.style.border = "1px solid transparent"
                    },
                    updateSinglePageModeButton: function () {
                        var b = a.dom.singlePageModeButton ? dvJQuery(a.dom.singlePageModeButton) :
                            null,
                            c = a.dom.singlePageModeButtonMobile ? dvJQuery(a.dom.singlePageModeButtonMobile) : null;
                        this.singlePageView ? (b && b.removeClass("button_active"), c && c.removeClass("button_active")) : (b && b.addClass("button_active"), c && c.addClass("button_active"));
                        this.updateButtons()
                    },
                    udpateMouseModeButtons: function (b) {
                        var d = a.dom.panMouseModeButton ? dvJQuery(a.dom.panMouseModeButton) : null,
                            c = a.dom.selectMouseModeButton ? dvJQuery(a.dom.selectMouseModeButton) : null,
                            e = a.dom.zoomAreaMouseModeButton ? dvJQuery(a.dom.zoomAreaMouseModeButton) :
                                null,
                            f = a.dom.panMouseModeButtonMobile ? dvJQuery(a.dom.panMouseModeButtonMobile) : null,
                            h = a.dom.selectMouseModeButtonMobile ? dvJQuery(a.dom.selectMouseModeButtonMobile) : null,
                            k = a.dom.zoomAreaMouseModeButtonMobile ? dvJQuery(a.dom.zoomAreaMouseModeButtonMobile) : null;
                        d && d.removeClass("button_active");
                        c && c.removeClass("button_active");
                        e && e.removeClass("button_active");
                        f && f.removeClass("button_active");
                        h && h.removeClass("button_active");
                        k && k.removeClass("button_active");
                        switch (b) {
                            case 0:
                            case 1:
                                d && d.addClass("button_active");
                                f && f.addClass("button_active");
                                break;
                            case 3:
                                c && c.addClass("button_active");
                                h && h.addClass("button_active");
                                break;
                            case 4:
                                e && e.addClass("button_active"), k && k.addClass("button_active")
                        }
                    },
                    updateButtons: function () {
                        dvJQuery(a.dom.mainArea).find(".dv-button").each(function (b) {
                            dvJQuery(this).css("background-color", "transparent");
                            dvJQuery(this).css("border", "1px solid transparent");
                            dvJQuery(this).css("background-image", "none");
                            dvJQuery(this).css("fill", a.dom.UIconfig.strokeColor)
                        });
                        dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function (b) {
                            dvJQuery(this).css("border",
                                "1px solid " + a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).css("background-image", "-moz-linear-gradient(top, " + a.dom.UIconfig.buttonActiveGradientColorStart + "," + a.dom.UIconfig.buttonActiveGradientColorEnd + ")");
                            dvJQuery(this).css("background-image", "-webkit-linear-gradient(top, " + a.dom.UIconfig.buttonActiveGradientColorStart + "," + a.dom.UIconfig.buttonActiveGradientColorEnd + ")");
                            dvJQuery(this).css("background-image", "-ms-linear-gradient(top, " + a.dom.UIconfig.buttonActiveGradientColorStart + " 0%," + a.dom.UIconfig.buttonActiveGradientColorEnd +
                                " 100%)");
                            dvJQuery(this).css("background-image", "-o-linear-gradient(top, " + a.dom.UIconfig.buttonActiveGradientColorStart + "," + a.dom.UIconfig.buttonActiveGradientColorEnd + ")");
                            dvJQuery(this).css("background-image", "linear-gradient(to bottom, " + a.dom.UIconfig.buttonActiveGradientColorStart + "," + a.dom.UIconfig.buttonActiveGradientColorEnd + ")");
                            dvJQuery(this).css("background-repeat", "repeat-x");
                            dvJQuery(this).css("fill", a.dom.UIconfig.activeSelectedColor)
                        });
                        dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function (b) {
                            dvJQuery(this).css("border",
                                "1px solid");
                            dvJQuery(this).css("-webkit-border-radius", "2px");
                            dvJQuery(this).css("-moz-border-radius", "2px");
                            dvJQuery(this).css("border-radius", "2px");
                            dvJQuery(this).css("border-color", a.dom.UIconfig.miscBorderColor);
                            dvJQuery(this).css("background-color", "transparent");
                            dvJQuery(this).css("background-image", "none")
                        })
                    },
                    autoSelectToolbar: function () {
                        if (a.dom.mobileToolbarArea && 0 !== dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length) {
                            var b = 0;
                            dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function () {
                                b +=
                                    dvJQuery(this).outerWidth()
                            });
                            var c = dvJQuery(a.dom.mainArea).width();
                            dvJQuery(a.dom.toolbarLogo) && (c -= dvJQuery(a.dom.toolbarLogo).width());
                            b > c ? (dvJQuery(a.dom.toolBarArea).css({
                                position: "absolute",
                                left: "-300%"
                            }), dvJQuery(a.dom.mobileToolbarArea).css("display", "block"), dvJQuery(a.dom.mobileToolbarTop).css("display", "block"), a.dom.visibleToolbar = DocuViewareAPI.Toolbar.Mobile) : (dvJQuery(a.dom.mobileToolbarArea).css("display", "none"), dvJQuery(a.dom.mobileToolbarTop).css("display", "none"), dvJQuery(a.dom.toolBarArea).css({
                                position: "relative",
                                left: ""
                            }), a.dom.visibleToolbar = DocuViewareAPI.Toolbar.Standard)
                        } else a.dom.visibleToolbar = a.dom.UIconfig.docuViewareLiteMode ? DocuViewareAPI.Toolbar.Standard : DocuViewareAPI.Toolbar.None
                    },
                    resizeControlArea: function () {
                        a.dom.autoSelectToolbar();
                        var b = a.dom.mainArea.offsetHeight;
                        a.dom.visibleToolbar === DocuViewareAPI.Toolbar.Mobile ? b -= dvJQuery(a.dom.mobileToolbarTop).height() + a.dom.mobileToolbarArea.clientHeight : a.dom.visibleToolbar === DocuViewareAPI.Toolbar.Standard && (b -= a.dom.toolBarArea.offsetHeight);
                        b !== a.dom.controlArea.offsetHeight && (a.dom.controlArea.style.height = b + "px");
                        a.dom.mobileToolbarContainer && a.dom.resizeMobileToolbarMenu()
                    },
                    resizeMobileToolbarMenu: function () {
                        var b = 0;
                        dvJQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function () {
                            b += dvJQuery(this).height();
                            b += parseInt(dvJQuery(this).css("padding-top"), 10);
                            b += parseInt(dvJQuery(this).css("padding-bottom"), 10);
                            b += parseInt(dvJQuery(this).css("border-top"), 10);
                            b += parseInt(dvJQuery(this).css("border-bottom"), 10);
                            b += parseInt(dvJQuery(this).css("margin-top"),
                                10);
                            b += parseInt(dvJQuery(this).css("margin-bottom"), 10)
                        });
                        b >= dvJQuery(a.dom.controlArea).height() ? dvJQuery(a.dom.mobileToolbarContainer).width() === DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH && dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH) : dvJQuery(a.dom.mobileToolbarContainer).width() === DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH && dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)
                    },
                    SelectedTextRegions: {
                        _cache: [],
                        count: function (a) {
                            if (a) {
                                for (var b = 0, d = 0; d < this._cache.length; d++) this._cache[d].category == a && b++;
                                return b
                            }
                            return this._cache.length
                        },
                        addNew: function (b, c, e, f, h, k, l, q, t) {
                            var d = document.createElement("div");
                            d.category = q;
                            d.pageNo = b;
                            d.style.display = "block";
                            d.style.position = "absolute";
                            d.style.padding = "0px";
                            d.style.margin = "0px";
                            d.style.outline = "0";
                            d.style.left = c + "px";
                            d.style.top = e + "px";
                            d.style.width = f + "px";
                            d.style.height = h + "px";
                            d.style.backgroundColor = k;
                            l && (d.style.borderColor =
                                l, d.style.borderWidth = "1px", d.style.borderStyle = "solid");
                            a.events.forwardMouseEventsToViewer(d);
                            t ? t.appendChild(d) : a.dom.viewerArea.appendChild(d);
                            this._cache.push(d)
                        },
                        clear: function (b, c) {
                            if (0 < this._cache.length)
                                if (b || c)
                                    for (var d = 0; d < this._cache.length; d++) b && this._cache[d].category != b || c && this._cache[d].pageNo != c || (a.dom.viewerArea.removeChild(this._cache[d]), this._cache.splice(d--, 1));
                                else {
                                    for (d = 0; d < this._cache.length; d++) a.dom.viewerArea.removeChild(this._cache[d]);
                                    this._cache = []
                                }
                        }
                    },
                    createBookmarkNode: function (b,
                        c) {
                        if (c) {
                            var d = document.createElement("li");
                            d.bookmarkID = c.bookmarkID;
                            if (c.hasChildren) {
                                d.className = "hasChildren";
                                var g = document.createElement("div");
                                g.className = "hitarea collapsed";
                                g.bookmarkID = c.bookmarkID;
                                g.onclick = a.events.onBookmarkTogglerClickHandler;
                                g.onmouseover = a.events.onBookmarkItemMouseOverHandler;
                                g.onmouseout = a.events.onBookmarkItemMouseOutHandler;
                                dvJQuery(d).append(g)
                            }
                            g = document.createElement("span");
                            g.action = c.action;
                            g.onmouseover = a.events.onBookmarkItemMouseOverHandler;
                            g.onmouseout =
                                a.events.onBookmarkItemMouseOutHandler;
                            c.action && -1 < c.action.indexOf("PdfPageDest") && (g.className = "internal");
                            g.onclick = a.events.onBookmarkItemClickHandler;
                            g.innerHTML = c.text;
                            c.foreColor && (g.style.color = c.foreColor);
                            if (1 == c.textAttribute || 3 == c.textAttribute) g.style.fontStyle = "italic";
                            if (2 == c.textAttribute || 3 == c.textAttribute) g.style.fontWeight = "bold";
                            dvJQuery(d).append(g);
                            c.hasChildren && dvJQuery(d).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');
                            b.append(d)
                        }
                    },
                    setBookmarkOverStyle: function (a,
                        b) {
                        dvJQuery(a).parent().find("span:first").css("text-decoration", b ? "underline" : "none")
                    },
                    selectBookmark: function (b) {
                        this.resetBookmarkStyle();
                        //AGjs__change for bookmark
                        dvJQuery(b).css("background-color", a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected");
                        if ($("#doingBookMoveOperation").length == 1) {
                            $("#doingBookMoveOperation").attr("data", b.action.replace("PdfPageDest:", "").trim());
                            $("#doingBookMoveOperation").text(b.innerText);
                        }
                    },
                    resetBookmarkStyle: function () {
                        a.dom.bookmarksTree && dvJQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color", "transparent")
                    },
                    createCommentItem: function (b, c) {
                        if (b && b.annotApp.visible) {
                            var d = document.createElement("div");
                            d.className = "dvcomment";
                            var g = document.createElement("div");
                            g.className = "dvcomment-wrapper";
                            //AGjs__change for unique id (sessionStorage.controlID)
                            g.id = "dvcomment-" + b.annotApp.id + "-" + sessionStorage.controlID;
                            var e = this.generateCommentHeaderMarkup(b);
                            g.appendChild(e);
                            b = this.generateCommentContentMarkup(b);
                            if (null != c)
                                for (e = 0; e < c.length; e++) {
                                    var f = c[e];
                                    if (f.annotApp.visible) {
                                        var h = document.createElement("div");
                                        h.className = "dvcomment-wrapper dvanswer";
                                        //AGjs__change for unique id (sessionStorage.controlID)
                                        h.id = "dvcomment-" + f.annotApp.id + "-" + sessionStorage.controlID;
                                        var k = this.generateCommentHeaderMarkup(f);
                                        f = this.generateCommentContentMarkup(f);
                                        h.appendChild(k);
                                        h.appendChild(f);
                                        b.appendChild(h)
                                    }
                                }
                            g.appendChild(b);
                            d.appendChild(g);
                            //AGjs__change for unique id (sessionStorage.controlID)
                            dvJQuery(a.dom.commentsArea).find("#commentsContainer" + sessionStorage.controlID).append(d)
                        }
                    },
                    generateCommentHeaderMarkup: function (b) {
                        var d = document.createElement("div");
                        d.className = "dvcomment-header";
                        d.addEventListener("click", function (d) {
                            d.stopPropagation();
                            //AGjs__change for unique id (sessionStorage.controlID)
                            (d = document.getElementById(sessionStorage.controlID)) && d.control.CommentHeader_Click(b.annotApp.id)
                        });
                        b.annotApp.canEdit && d.addEventListener("dblclick", function (d) {
                            d.stopPropagation();
                            //AGjs__change for unique id (sessionStorage.controlID)
                            (d = document.getElementById(sessionStorage.controlID)) && d.control.CommentProperties_Click(b.annotApp.id)
                        });
                        d.addEventListener("mouseover", function () {
                            dvJQuery(this).css("cursor", "pointer")
                        });
                        d.addEventListener("mouseout", function () {
                            dvJQuery(this).css("cursor", "default")
                        });
                        switch (b.annotApp.properties.reviewStatus) {
                            case 0:
                                d.className += " status-none";
                                break;
                            case 1:
                                d.className += " status-approved";
                                break;
                            case 2:
                                d.className += " status-canceled";
                                break;
                            case 3:
                                d.className += " status-finished";
                                break;
                            case 4:
                                d.className += " status-rejected"
                        }
                        var c =
                            document.createElement("div");
                        c.className = "dvcomment-user";
                        var e = document.createElement("span");
                        e.className = "dvtoggle";
                        c.appendChild(e);
                        e = document.createElement("span");
                        e.innerText = b.annotApp.author;
                        c.appendChild(e);
                        e = document.createElement("div");
                        e.className = "dvcomment-date";
                        var f = document.createElement("span");
                        f.innerText = b.annotApp.creationTime.split("T")[0] + " " + b.annotApp.creationTime.split("T")[1].split(".")[0];
                        e.appendChild(f);
                        d.appendChild(c);
                        d.appendChild(e);
                        return d
                    },
                    generateCommentContentMarkup: function (b) {
                        var d =
                            document.createElement("div");
                        d.className = "dvcomment-content";
                        d.addEventListener("click", function (d) {
                            d.stopPropagation();
                            //AGjs__change for unique id (sessionStorage.controlID)
                            (d = document.getElementById(sessionStorage.controlID)) && d.control.CommentHeader_Click(b.annotApp.id)
                        });
                        b.annotApp.canEdit && d.addEventListener("dblclick", function (d) {
                            d.stopPropagation();
                            //AGjs__change for unique id (sessionStorage.controlID)
                            (d = document.getElementById(sessionStorage.controlID)) && d.control.CommentProperties_Click(b.annotApp.id)
                        });
                        d.addEventListener("mouseover", function () {
                            dvJQuery(this).css("cursor", "pointer")
                        });
                        d.addEventListener("mouseout", function () {
                            dvJQuery(this).css("cursor",
                                "default")
                        });
                        var c = document.createElement("div");
                        c.className = "dvcomment-message";
                        b.annotApp.properties.fill && null != b.annotApp.properties.fillColor && (c.style.backgroundColor = b.annotApp.properties.fillColor);
                        var e = document.createElement("p");
                        e.style.color = b.annotApp.properties.foreColor;
                        e.style.fontFamily = b.annotApp.properties.fontName;
                        switch (b.annotApp.properties.fontStyle) {
                            case 0:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "none";
                                break;
                            case 1:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "none";
                                break;
                            case 2:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "none";
                                break;
                            case 3:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "none";
                                break;
                            case 4:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "underline";
                                break;
                            case 5:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "underline";
                                break;
                            case 6:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight =
                                    "normal";
                                e.style.textDecoration = "underline";
                                break;
                            case 7:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "underline";
                                break;
                            case 8:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "line-through";
                                break;
                            case 9:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "line-through";
                                break;
                            case 10:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "line-through";
                                break;
                            case 11:
                                e.style.fontStyle = "italic";
                                e.style.fontWeight = "bold";
                                e.style.textDecoration = "line-through";
                                break;
                            case 12:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "none";
                                break;
                            case 13:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "none";
                                break;
                            case 14:
                                e.style.fontStyle = "normal";
                                e.style.fontWeight = "normal";
                                e.style.textDecoration = "none";
                                break;
                            case 15:
                                e.style.fontStyle = "normal", e.style.fontWeight = "normal", e.style.textDecoration = "none"
                        }
                        e.style.fontSize = b.annotApp.properties.fontSize +
                            "pt";
                        e.innerText = b.annotApp.properties.text;
                        c.appendChild(e);
                        e = document.createElement("div");
                        e.className = "dvcomment-options";
                        e.style.borderTop = "1px solid" + a.dom.UIconfig.strokeColor;
                        e.style.paddingTop = "10px";
                        e.style.height = "20px";
                        e.style.lineHeight = "18px";
                        e.style.display = "inline-block";
                        e.style.width = "100%";
                        e.style.fill = a.dom.UIconfig.strokeColor;
                        var f = document.createElement("div");
                        f.style.height = "20px";
                        f.style.width = "16px";
                        f.style.display = "inline-block";
                        f.style.float = "left";
                        f.style.marginRight = "5px";
                        switch (b.ownerAnnotType) {
                            case 0:
                                f.title = a.Localize("annotation_rubberstamp");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M502.17,471.293C498.894,479.536,491.698,485,482.614,485H29.392c-9.074,0-16.275-5.452-19.557-13.681l-1.611,11.991C6.007,499.252,15.508,512,29.392,512h453.223c13.883,0,23.357-12.748,21.168-28.689L502.17,471.293z"></path><path d="M29.392,459h453.223c13.883,0,23.357-13.272,21.168-29.215L485.65,293.901C483.802,280.073,472.189,268,459.705,268H312.91c-9.316-21.166-19.587-46.501-19.587-78.786c0-65.296,33.704-94.909,33.704-124.417c0-34.522-30.432-62.552-71.975-64.558c-41.648,2.006-74.72,30.035-74.72,64.558c0,29.507,32.359,59.12,32.359,124.417c0,32.285-9.665,57.621-18.431,78.786H52.3c-12.484,0-24.07,12.073-25.918,25.901L8.224,429.785C6.007,445.728,15.508,459,29.392,459z"></path></g></svg>';
                                break;
                            case 1:
                                f.title = a.Localize("annotation_rectangle");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M500.984,475H12.015C5.58,475,1,470.943,1,464.485V45.368C1,38.955,5.58,32,12.015,32h488.97C507.42,32,512,38.955,512,45.368v419.117C512,470.943,507.42,475,500.984,475z M23,451h467V56H23V451z"></path></svg>';
                                break;
                            case 2:
                                f.title = a.Localize("annotation_highlighter");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><g><rect y="460" width="511" height="22"></rect><path d="M171.273,360.939l66.635,66.652l31.584-31.587l38.585,37.878l147.65-50.41l-77.51-96.199l32.437-32.439l-66.608-66.643l22.511-22.507L253.862,29.357L236.748,43.5l99.789,120.753l-187.28,187.29L38.114,236.169L21,250.333l126.696,134.18L171.273,360.939z M379.246,254.834L237.909,396.184l-50.928-50.948l141.364-141.343L379.246,254.834z"></path></g></svg>';
                                break;
                            case 3:
                                f.title = a.Localize("annotation_line");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M18.027,508.886c-3.465,0-6.93-1.322-9.574-3.968c-5.29-5.289-5.29-13.858,0-19.147L484.646,9.604c5.289-5.29,13.858-5.29,19.147,0c5.289,5.289,5.289,13.858,0,19.148L27.601,504.918C24.956,507.563,21.491,508.886,18.027,508.886z"></path></svg>';
                                break;
                            case 4:
                                f.title = a.Localize("annotation_arrow");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M505.772,5.964L274.419,56.371l74.596,85.702L6.272,484.867c-5.689,5.689-5.689,14.906,0,20.596c2.844,2.845,6.571,4.267,10.297,4.267c3.726,0,7.453-1.422,10.297-4.267l341.316-341.369l70.939,81.502L505.772,5.964z"></path></svg>';
                                break;
                            case 5:
                                f.title = a.Localize("annotation_connectedline");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><polygon points="423.454,318 239,85.713 239,1 145,1 145,95 162.2,95 67.761,414 17,414 17,509 112,509 112,414 100.812,414 195.267,95 208.079,95 398,337.304 398,414 494,414 494,318 "></polygon></svg>';
                                break;
                            case 6:
                                f.title = a.Localize("annotation_ellipse");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M256,475C114.579,475-0.474,375.635-0.474,253.5S114.579,32,256,32c141.42,0,256.475,99.365,256.475,221.5S397.42,475,256,475z M256,55.315c-128.567,0-233.158,88.914-233.158,198.185c0,109.293,104.591,198.185,233.158,198.185c128.555,0,233.157-88.892,233.157-198.185C489.156,144.229,384.555,55.315,256,55.315z"></path></svg>';
                                break;
                            case 7:
                                f.title = a.Localize("annotation_image");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><g><path d="M2.1,16c-0.2,0-0.4-0.2-0.4-0.4V4c0-0.1,0-0.2,0.1-0.3l3.6-3.7C5.4,0,5.5,0,5.6,0h8.3 c0.2,0,0.4,0.2,0.4,0.4v15.2c0,0.2-0.2,0.4-0.4,0.4H2.1z M13.5,15.2V0.8H5.8L2.4,4.2l0,11H13.5z"/></g><g><path d="M2.3,4.4C2.1,4.4,2,4.3,2,4.1c0-0.2,0.2-0.4,0.4-0.4h3.1v-3c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4v3.4\tc0,0.2-0.2,0.4-0.4,0.4H2.3z"/></g></g><g><path d="M11.8,13.8H4.2c-0.1,0-0.3-0.1-0.3-0.3V6.2C4,6,4.1,5.9,4.2,5.9h7.5C11.9,5.9,12,6,12,6.2v7.4\tC12,13.7,11.9,13.8,11.8,13.8z M4.5,13.3h7V6.4h-7V13.3z"/></g><g><path d="M10.6,12.2C10.6,12.2,10.6,12.2,10.6,12.2H5.3c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.1,0-0.3,0.1-0.4l1.4-1.5 C6.6,10,6.8,10,6.9,10l0.8,0.4L8.9,9C9,8.9,9.1,8.9,9.2,8.9c0.1,0,0.2,0.1,0.3,0.2l1.4,2.6c0,0.1,0.1,0.1,0.1,0.2 C10.9,12,10.8,12.2,10.6,12.2z M6.1,11.5H10L9.1,9.8L8.1,11c-0.1,0.1-0.3,0.1-0.4,0.1l-0.8-0.4L6.1,11.5z"/></g><g><path d="M6.4,9.7c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S7.1,9.7,6.4,9.7z M6.4,8 C6.1,8,5.9,8.2,5.9,8.5C5.9,8.8,6.1,9,6.4,9s0.5-0.2,0.5-0.5C6.9,8.2,6.7,8,6.4,8z"/></g></g></svg>';
                                break;
                            case 8:
                                f.title = a.Localize("annotation_text");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M43.419,109l-2.444,88h30.453l3.074-27.874c0.604-4.992,1.576-9.444,2.995-13.384c1.394-3.995,3.521-7.271,6.385-10.003c2.864-2.732,6.595-4.948,11.14-6.418c4.573-1.472,10.221-2.32,17-2.32H149v241.824c0,6.463-0.991,11.612-2.174,15.448c-1.182,3.836-2.992,6.727-5.041,8.829c-2.075,2.049-4.596,3.343-7.38,3.973c-2.811,0.683-5.99,0.926-9.378,0.926H107v24h155v-24h-18.951c-3.258,0-6.252-0.243-9.063-0.926c-2.785-0.63-5.256-1.961-7.384-4.009c-2.128-2.103-3.721-4.976-4.903-8.812c-1.182-3.836-1.698-8.967-1.698-15.43V137h36.056c6.751,0,12.428,0.865,16.973,2.337c4.572,1.471,8.275,3.638,11.142,6.371c2.889,2.733,5.018,6.075,6.41,10.069c1.392,3.94,2.391,8.342,2.968,13.333L296.86,197h30.215l-2.208-88H43.419z"></path><polygon points="471,28 471,0 416.925,0 389.875,0 336,0 336,28 390,28 390,485 336,485 336,512 471,512 471,485 417,485 417,28 \t"></polygon></g></svg>';
                                break;
                            case 9:
                                f.title = a.Localize("annotation_stickynote");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><g><g><path d="M469.819,482.76c-0.163-0.056-0.352,0-0.541,0H43.514c-4.457,0-8.656-2.167-11.256-5.8c-55.361-76.884-28.135-152.522-1.788-225.654c24.992-69.462,48.614-135.05,1.788-200.095c-3.047-4.227-3.468-9.78-1.084-14.413c2.371-4.633,7.138-7.558,12.34-7.558h425.765c4.444,0,8.668,2.14,11.269,5.77c55.348,76.884,28.121,152.523,1.787,225.669c-24.706,68.581-48.004,133.383-3.573,197.589c3.033,2.547,4.931,6.339,4.931,10.619C483.691,476.529,477.487,482.76,469.819,482.76z M50.801,455.018h393.552c-36.519-69.354-11.947-137.568,11.867-203.711c24.272-67.403,47.245-131.176,5.771-194.326H68.438c36.505,69.327,11.948,137.542-11.88,203.699C32.298,328.068,9.338,391.842,50.801,455.018z"></path></g></g><g><path d="M156.769,256.182c-6.678,0-12.571-4.821-13.681-11.649c-1.232-7.559,3.901-14.684,11.459-15.903c43.698-7.125,109.436-5.336,162.288-3.901c28.148,0.732,59.953,1.653,68.245-0.027c5.038-3.007,11.593-2.574,16.253,1.49c5.744,5.065,6.338,13.817,1.247,19.587c-7.206,8.208-18.587,8.534-86.503,6.664c-51.635-1.408-115.963-3.115-157.061,3.55C158.258,256.128,157.513,256.182,156.769,256.182z"></path></g><g><path d="M156.769,187.371c-6.678,0-12.557-4.823-13.681-11.623c-1.232-7.558,3.901-14.71,11.459-15.93c43.711-7.152,109.504-5.363,162.343-3.927c28.147,0.758,59.926,1.652,68.19-0.027c5.038-3.008,11.593-2.575,16.253,1.49c5.744,5.066,6.338,13.815,1.247,19.587c-7.206,8.236-18.531,8.561-86.449,6.664c-51.675-1.354-115.977-3.142-157.114,3.576C158.258,187.316,157.513,187.371,156.769,187.371z"></path></g><g><path d="M121.306,334.896c-6.678,0-12.557-4.822-13.681-11.65c-1.233-7.531,3.901-14.683,11.459-15.93c43.752-7.152,109.583-5.31,162.452-3.9c28.119,0.812,59.816,1.625,68.054,0c5.039-3.034,11.648-2.602,16.254,1.516c5.742,5.039,6.312,13.817,1.246,19.561c-7.205,8.181-18.638,8.398-86.312,6.665c-51.703-1.409-116.044-3.197-157.223,3.521C122.795,334.842,122.051,334.896,121.306,334.896z"></path></g></svg>';
                                break;
                            case 10:
                                f.title = a.Localize("annotation_freehand");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M499.492,181.467c-11.96,44.414-34.563,117.339-89.42,65.275c-34.057-32.322-42.199-91.157-80.909-117.183c-73.542-49.445-91.639,63.943-102.845,115.369c-3.438,16.144-8.056,72.668-23.494,85.512c-25.722,21.399-39.179-22.3-49.779-43.835c-17.208-34.958-52.154-79.916-97.267-55.696C-6.626,264.413,16.887,361.838,0.465,415.423C17.113,386.214,22.62,255.181,75.526,255.69c33.803-3.687,41.408,45.87,50.069,68.527c20.406,53.379,83.937,75.822,116.963,24.443c34.052-52.975,24.004-126.769,51.01-182.784c11.182-23.193,70.538,81.331,79.993,90.828c23.427,22.811,63.715,51.87,96.841,28.584c42.556-29.914,32.615-97.03,42.144-140.822C507.233,156.46,502.883,168.794,499.492,181.467C496.096,194.08,502.778,168.854,499.492,181.467z M203.761,328.545l-0.014,0.027C203.998,328.008,204.119,327.738,203.761,328.545zM202.883,330.527l-0.015,0.046C202.837,330.637,202.848,330.609,202.883,330.527z M297.399,158.402C298.163,158.724,296.701,158.864,297.399,158.402C297.498,158.444,297.2,158.534,297.399,158.402z M297.736,158.915C297.252,159.131,297.667,158.945,297.736,158.915C297.662,158.948,297.688,158.936,297.736,158.915z M299.317,158.358C298.857,158.425,300.358,157.938,299.317,158.358C299.294,158.361,300.867,157.733,299.317,158.358z M301.544,160.298l0.002,0.002C301.514,160.271,301.506,160.264,301.544,160.298z"></path></svg>';
                                break;
                            case 11:
                                f.title = a.Localize("annotation_freehandhighlighter");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M472.685,400.812c-2.421,2.721-6.351,6.44-11.314,10.836c-9.825,9.039-25.58,20.031-45.521,30.845c-39.815,21.707-98.25,41.07-158.094,46.855c-29.812,3.23-59.989,2.698-87.392-1.899c-27.469-4.519-51.906-13.823-70.315-26.18c-18.498-12.204-31.01-26.869-37.717-38.372c-3.786-5.53-5.918-10.382-7.65-13.591c-1.676-3.243-2.576-4.974-2.576-4.974s0.488,1.876,1.41,5.407c1.088,3.464,1.832,8.971,4.874,15.178c2.443,6.506,6.473,13.911,11.714,22.193c5.596,7.995,12.602,16.811,22.039,24.539c18.375,16.099,44.756,28.923,74.279,35.44c29.5,6.973,61.921,7.815,93.607,4.862c63.566-6.306,124.054-30.643,162.682-58.424c9.838-6.662,18.12-13.855,25.037-20.573c6.983-6.64,12.602-12.846,16.876-18.331c4.485-5.318,7.173-9.925,9.038-13.068c1.898-3.108,2.909-4.773,2.909-4.773S475.217,398.181,472.685,400.812z"></path><path d="M181.89,338.128l68.226,68.226l31.801-31.802l40.035,38.241l151.154-51.584l-79.351-98.495l33.208-33.208l-67.064-69.36l21.908-21.905L266.448-1.324l-17.521,14.478l102.17,123.62L159.36,328.499L49.557,211.623l-17.521,14.5l125.726,136.129L181.89,338.128z M394.809,229.506L250.116,374.199l-52.148-52.146L342.692,177.35L394.809,229.506z"></path></g></svg>';
                                break;
                            case 12:
                                f.title = a.Localize("annotation_freehandpolygon");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%"><g><path d="M3.4,16c-0.2,0-0.3-0.1-0.4-0.2l-3-5.6C-0.1,10,0,9.7,0.2,9.6l4-2.8l0-6.4c0-0.2,0.1-0.3,0.2-0.4 C4.5,0,4.6,0,4.7,0c0.1,0,0.1,0,0.2,0.1l10.9,6.1C16,6.2,16,6.4,16,6.7l-2.9,9C13,15.9,12.8,16,12.7,16H3.4z M12.3,15.1L15,6.7l-10-5.5l0,5.9C5,7.2,5,7.4,4.9,7.4L1,10.1l2.7,5H12.3z"/></g></svg>';
                                break;
                            case 13:
                                f.title = a.Localize("annotation_link");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><path d="M6,10.3c-0.1,0.1-0.4,0.1-0.5,0c-0.1-0.1-0.1-0.4,0-0.5l4-4c0.1-0.1,0.4-0.1,0.5,0c0.1,0.1,0.1,0.4,0,0.5 L6,10.3z"/></g><g><path d="M13,7.6c-1,1-2.4,1.2-3.6,0.6C9.3,8.2,9.2,8.1,9.2,8c0-0.1,0-0.2,0-0.3c0,0,0-0.1,0.1-0.1 c0.1-0.1,0.3-0.1,0.4-0.1c0.9,0.5,2.1,0.3,2.8-0.5l2.1-2.1c1-1,1-2.5,0-3.5l-0.2-0.2c-1-1-2.5-1-3.5,0L8.9,3.5 C8.2,4.2,8,5.2,8.3,6.2c0.1,0.1,0,0.3-0.1,0.4c0,0-0.1,0.1-0.1,0.1C8,6.7,7.8,6.6,7.7,6.4C7.2,5.3,7.5,3.9,8.4,3l2.1-2.1 c1.2-1.2,3.2-1.2,4.5,0l0.2,0.2c1.2,1.2,1.2,3.2,0,4.5L13,7.6z"/></g><g><path d="M5.6,15.1c-1.2,1.2-3.2,1.2-4.5,0l-0.2-0.2c-1.2-1.2-1.2-3.2,0-4.5L3,8.4c0.9-0.9,2.3-1.2,3.5-0.7 C6.6,7.8,6.7,8,6.6,8.2c0,0,0,0.1-0.1,0.1C6.5,8.4,6.3,8.4,6.2,8.3C5.2,8,4.2,8.2,3.5,8.9l-2.1,2.1c-1,1-1,2.5,0,3.5l0.2,0.2 c1,1,2.5,1,3.5,0l2.1-2.1c0.7-0.7,0.9-1.9,0.5-2.8c-0.1-0.1,0-0.3,0.1-0.4c0,0,0.1-0.1,0.1-0.1c0.1,0,0.2,0,0.3,0 c0.1,0,0.2,0.1,0.2,0.2c0.6,1.2,0.3,2.7-0.6,3.6L5.6,15.1z"/></g></g></svg>';
                                break;
                            case 14:
                                f.title = a.Localize("annotation_polygon");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%"><path d="M4.2,15.2c-0.2,0-0.3-0.1-0.3-0.2L0.1,8.2C0,8.1,0,7.9,0.1,7.8L3.9,1c0.1-0.1,0.2-0.2,0.3-0.2h7.6 c0.1,0,0.3,0.1,0.3,0.2l3.8,6.8c0.1,0.1,0.1,0.3,0,0.4L12.1,15c-0.1,0.1-0.2,0.2-0.3,0.2H4.2z M11.6,14.6L15.1,8l-3.6-6.6H4.4L0.9,8 l3.6,6.6H11.6z"/></svg>';
                                break;
                            case 15:
                                f.title = a.Localize("annotation_ruler");
                                f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M210.091,479.958 M499.701,177.36c4.492-4.675,4.693-12.183,0.004-16.689L344.134,11.188 c-4.69-4.506-15.696-7.381-20.188-2.708l-7.533,7.842L197.22,140.381L33.748,310.516l-21.75,22.641l-7.971,8.295l11.851,11.387 l147.033,141.279l8.538,8.202c4.689,4.508,11.782,4.424,16.305-0.285 M209.507,479.395 M180.333,157.957L99.611,241.97 L49.96,293.643 M179.123,477.244L40.627,344.169l13.848-14.415l15.874-16.52l16.169,15.536l17.576,16.888l16.874,16.212 l16.873,16.214l16.886-17.578l-16.872-16.213l-16.873-16.211l-17.577-16.888l-16.168-15.536l15.537-16.17l16.168,15.537 l17.578,16.888l16.873,16.212l16.888-17.577l-16.874-16.212l-17.577-16.887l-16.169-15.537l16.213-16.873l16.168,15.537 l17.577,16.888l16.873,16.212l16.212-16.873l-50.619-48.636l16.212-16.873l67.491,64.849l16.887-17.575l-67.491-64.85l15.535-16.169 l50.62,48.636l16.888-17.575l-50.618-48.637l16.211-16.874l50.618,48.637l16.213-16.873l-50.618-48.637l16.212-16.873l67.491,64.849 l16.888-17.575l-67.49-64.849l15.534-16.171l50.619,48.638l16.889-17.577l-50.619-48.637l20.903-21.766l138.499,133.077 L356.444,292.697l-16.889,17.576l-64.848,67.49l-65.525,68.195l-16.212,16.872L179.123,477.244z M356.089,326.837 M226.304,463.085"></path> path d="M798.922,450.447 M797.895,20.84c-0.002-6.649-5.19-12.344-11.861-12.34L568.746,8.593 c-6.672,0.003-12.854,5.703-12.851,12.351l0.005,11.154l0.084,176.454l0.104,242l0.017,32.201l0.005,11.799l12.856-0.007 l205.143-0.088l12.144-0.006c6.672-0.002,11.855-5.106,11.852-11.803 M798.089,450.447 M555.994,233.552l0.053,119.499l0.031,73.501  M774.099,470.458l-193,0.083l-0.011-20.501l-0.01-23.5l23-0.009l25-0.011l24-0.012l24.001-0.009l-0.013-25l-24,0.01l-23.999,0.011 l-25.001,0.012l-22.998,0.009l-0.01-23l22.999-0.009l25.001-0.012l23.999-0.011l-0.011-25.001l-24,0.012l-25,0.012l-23,0.009 l-0.01-24.001l22.999-0.008l25-0.012l24-0.011l-0.01-24l-72,0.031l-0.011-24l96-0.042l-0.011-25l-96,0.042l-0.01-23l72-0.031 l-0.011-25l-72,0.03l-0.012-24l72.001-0.031l-0.01-24l-72.001,0.031l-0.01-24l96-0.042l-0.01-25l-96,0.041l-0.011-23l72.001-0.03 l-0.013-25l-71.999,0.031l-0.021-30.953l193.001-0.084l0.083,175.454l0.011,25l0.041,96l0.041,97l0.011,24L774.099,470.458z  M797.995,233.448 M798.911,426.446"/&gt;</svg>';
                                break;
                            case 16:
                                f.title = a.Localize("annotation_polyruler"), f.innerHTML = '<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M497.429,220H461V15.345C461,8.696,455.814,3,449.143,3H231.856C225.185,3,219,8.696,219,15.345V26.5V220H14.571C7.899,220,2,225.982,2,232.631V244.5v205.416V462h12.571H219v36.202V510h12.856H437h12.143c6.672,0,11.857-5.102,11.857-11.798V462h24h12.429c6.672,0,11.571-5.388,11.571-12.084V232.631C509,225.982,504.101,220,497.429,220z M195,438v-73h-24v73h-24v-97h-25v97H99v-73H74v73H26V245h193v119.5V438H195z M437,486H244v-24.5V438h23h25h24h24v-25h-24h-24h-25h-23v-23h23h25h24v-25h-24h-25h-23v-24h23h25h24v-24h-72v-24h96v-25h-96v-23h72v-25h-72v-24h72v-24h-72v-24h96v-25h-96v-23h72V75h-72V27h193v192.5v25v96v97v24V486zM485,438h-24V245h24V438z"></path></svg>'
                        }
                        e.appendChild(f);
                        f = document.createElement("div");
                        f.style.fontSize = "smaller";
                        f.style.lineHeight = "20px";
                        f.style.display = "inline-block";
                        f.innerText = a.Localize("label_page") + " " + b.annotApp.pageNo;
                        e.appendChild(f);
                        b.annotApp.canEdit && (f = document.createElement("div"), f.title = a.Localize("annotation_action_edit"), f.style.height = "20px", f.style.width = "16px", f.style.marginLeft = "15px", f.style.display = "inline-block", f.style.float = "right", f.addEventListener("click", function () {
                            //AGjs__change for unique id (sessionStorage.controlID)
                            var d = document.getElementById(sessionStorage.controlID);
                            d && d.control.CommentProperties_Click(b.annotApp.id)
                        }),
                            f.addEventListener("mouseover", function () {
                                dvJQuery(this).css("cursor", "pointer");
                                dvJQuery(this).css("fill", a.dom.UIconfig.hoverColor)
                            }), f.addEventListener("mouseout", function () {
                                dvJQuery(this).css("cursor", "default");
                                dvJQuery(this).css("fill", a.dom.UIconfig.strokeColor)
                            }), f.innerHTML = "<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z'></path></svg>",
                            e.appendChild(f));
                        f = a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id === b.annotApp.id;
                        var h = a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id === b.annotApp.id;
                        (f || h) && b.annotApp.properties.allowAnswer && (f = document.createElement("div"), f.title = a.Localize("label_comment_answer"), f.style.height = "20px", f.style.width = "16px", f.style.display = "inline-block", f.style.float = "right", f.addEventListener("click", function () {
                            //AGjs__change for unique id (sessionStorage.controlID)
                            var d = document.getElementById(sessionStorage.controlID);
                            d && (h ? d.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id) : d.control.CommentAnswer_Click(b.annotApp.id))
                        }), f.addEventListener("mouseover", function () {
                            dvJQuery(this).css("cursor", "pointer");
                            dvJQuery(this).css("fill", a.dom.UIconfig.hoverColor)
                        }), f.addEventListener("mouseout", function () {
                            dvJQuery(this).css("cursor", "default");
                            dvJQuery(this).css("fill", a.dom.UIconfig.strokeColor)
                        }), f.innerHTML = "<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M7 12.119v3.881l-6-6 6-6v3.966c6.98 0.164 6.681-4.747 4.904-7.966 4.386 4.741 3.455 12.337-4.904 12.119z'></path></svg>",
                            e.appendChild(f));
                        f = document.createElement("div");
                        f.style.height = "20px";
                        f.style.width = "16px";
                        f.style.display = "inline-block";
                        f.style.marginRight = "15px";
                        f.style.float = "right";
                        if (0 !== b.annotApp.properties.reviewStatus) switch (b.annotApp.properties.reviewStatus) {
                            case 1:
                                f.title = a.Localize("label_comment_status_approved");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-approved"><path d="M8,16c4.4,0,8-3.6,8-8s-3.6-8-8-8S0,3.6,0,8S3.6,16,8,16z M8,1.5c3.6,0,6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S1.5,11.6,1.5,8\tS4.4,1.5,8,1.5z"/><path d="M6.8,11h3.6c0.3,0,0.6-0.2,0.7-0.5l1.2-2.8c0-0.1,0.1-0.2,0.1-0.3V6.6l0,0l0,0c0-0.4-0.4-0.8-0.8-0.8H9.1 L9.4,4l0-0.1c0-0.2-0.1-0.3-0.2-0.4L8.9,3L6.2,5.6C6.1,5.8,6,6,6,6.2v4C6,10.6,6.4,11,6.8,11z M5.2,11V6.2H3.6V11H5.2z"/></svg>';
                                break;
                            case 2:
                                f.title = a.Localize("label_comment_status_canceled");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-canceled"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><polygon points="10.6,4 8,6.6 5.4,4 4,5.4 6.6,8 4,10.6 5.4,12 8,9.4 10.6,12 12,10.6 9.4,8 12,5.4 "/></svg>';
                                break;
                            case 3:
                                f.title = a.Localize("label_comment_status_finished");
                                f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-finished"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><g transform="translate(256 352)"><path d="M-244.9-347.5l-4.2,4.2l-2-2l-1.4,1.4l3.4,3.4l5.7-5.7L-244.9-347.5z"/></g></svg>';
                                break;
                            case 4:
                                f.title = a.Localize("label_comment_status_rejected"), f.innerHTML = '<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-rejected"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><path d="M9.2,5H5.6C5.3,5,5,5.2,4.9,5.5L3.7,8.3c0,0.1-0.1,0.2-0.1,0.3v0.8l0,0l0,0c0,0.4,0.4,0.8,0.8,0.8h2.5 L6.6,12l0,0.1c0,0.2,0.1,0.3,0.2,0.4L7.1,13l2.6-2.6C9.9,10.2,10,10,10,9.8v-4C10,5.4,9.6,5,9.2,5z M10.8,5v4.8h1.6V5H10.8z"/></svg>'
                        }
                        e.appendChild(f);
                        c.appendChild(e);
                        d.appendChild(c);
                        return d
                    },
                    sidePanelResized: function () {
                        if (a.callbacks.onSnapInPanelResized) a.callbacks.onSnapInPanelResized(dvJQuery(a.dom.leftSideArea).width())
                    },
                    sidePanelToggled: function (b) {
                        if (a.callbacks.onSnapInPanelToggle) a.callbacks.onSnapInPanelToggle(b)
                    }
                },
                events: {
                    ownMouseEvents: !1,
                    overLink: null,
                    overPageText: null,
                    overAnnotEditable: !1,
                    mouseMode: 0,
                    mouseX: 0,
                    mouseY: 0,
                    mouseDownX: 0,
                    mouseDownY: 0,
                    mouseDownViewerScrollLeft: 0,
                    mouseDownViewerScrollTop: 0,
                    mouseDownClientX: 0,
                    mouseDownClientY: 0,
                    isDrawingPath: !1,
                    isMouseDown: !1,
                    pathPoints: null,
                    isPanning: !1,
                    canPan: !1,
                    isResizingUI: !1,
                    isSelectingText: !1,
                    isDragMultipleSelecting: !1,
                    onNewViewerSize: function () {
                        a.NewViewerSizeTimeout && (clearTimeout(a.NewViewerSizeTimeout), a.NewViewerSizeTimeout = null);
                        a.dom.resizeControlArea();
                        a.dom.searchArea && dvJQuery(a.dom.searchArea.parentElement).hasClass("active") && (a.dom.searchResultsContainer.style.height = dvJQuery(a.dom.searchArea).outerHeight(!0) - dvJQuery(a.dom.searchPanelForm).outerHeight(!0) + "px");
                        var b = {
                            sessionID: a.ajax.sessionID,
                            reuseSessionContext: !0,
                            clientConfiguration: a.getConfig(),
                            newViewerSize: !0
                        };
                        if (a.viewerWidth != b.clientConfiguration.viewerWidth || a.viewerHeight != b.clientConfiguration.viewerHeight) a.NewViewerSizeTimeout = setTimeout(function () {
                            if (a.hasPendingAction(!1, !1, !0)) a.events.onNewViewerSize();
                            else a.viewerWidth = b.clientConfiguration.viewerWidth, a.viewerHeight = b.clientConfiguration.viewerHeight, a.ajax.PostBaseRequest({
                                url: a.appControllerPath + "/init" + (a.useIdInRoot ? "/1" : ""),
                                data: b,
                                success: function (b) {
                                    (b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK && (a.ajax.SetNewServerCtx(b), a.showVisibleThumbnails());
                                    a.NewViewerSizeTimeout = null
                                },
                                error: function () {
                                    a.NewViewerSizeTimeout = null
                                }
                            }, !1, !0)
                        }, 300)
                    },
                    onLoad: function (b) {
                        if (a.isSafari || a.isIOS || a.isIE10 || a.isIE9) null != a.dom.fullscreenButton && dvJQuery(a.dom.fullscreenButton).remove(), null != a.dom.fullscreenButtonMobile && dvJQuery(a.dom.fullscreenButtonMobile).remove();
                        a.IsTwainSupportAvailable() || (null != a.dom.twainAcquisitionButton &&
                            dvJQuery(a.dom.twainAcquisitionButton).remove(), null != a.dom.twainAcquisitionButtonMobile && dvJQuery(a.dom.twainAcquisitionButtonMobile).remove());
                        !a.isIE || a.isIE10 || a.isIE11 || (null != a.dom.openFromFileButton && dvJQuery(a.dom.openFromFileButton).remove(), null != a.dom.openFromFileButtonMobile && dvJQuery(a.dom.openFromFileButtonMobile).remove());
                        a.isIE && !a.isIE11 && null != a.dom.snapinTabControl && (a.dom.snapinTabControl.style.position = "static");
                        a.dom.resizeControlArea();
                        a.viewerWidth = a.dom.viewerContainer.offsetWidth;
                        a.viewerHeight = a.dom.viewerContainer.offsetHeight;
                        a.dom.mainArea.style.visibility = "visible";
                        1 == b ? (a.waitForInit = !0, b = {
                            sessionID: a.ajax.sessionID,
                            contextID: a.ajax.contextID,
                            clientConfiguration: a.getConfig(),
                            reuseSessionContext: !1,
                            newViewerSize: !1
                        }, a.DisplayPendingActionNotification(), a.ajax.PostAjaxRequestForDocuViewareAction({
                            url: a.appControllerPath + "/init" + (a.useIdInRoot ? "/1" : ""),
                            async: !0,
                            data: JSON.stringify(b),
                            success: function (b) {
                                a.waitForInit = !1;
                                a.HidePendingActionNotification();
                                (b = "string" ===
                                    typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK && (a.ajax.SetNewServerCtx(b), b.documentLoaded && !a.dom.singlePageView && (b = a.GetCurrentPage(), a.Internal.Pages.isPageVisible(b) || a.EnsureCurrentPageVisibility()))
                            },
                            error: function (b) {
                                a.ajax.HandleError(b)
                            }
                        })) : 2 == b && a.LoadFromUri("", "");
                        a.SetMouseMode(0)
                    },
                    onResize: function (e) {
                        if (colorpick == 0) {
                            a.events.onNewViewerSize();
                            dvJQuery(a.dom.mainArea).find(" .dvUi-dialog:visible").find(".dvUi-dialog-content").dvDialog("refresh", dvJQuery(a.dom.controlArea).height())
                        } else {
                            colorpick = 0;
                        }

                    },
                    forwardMouseEventsToViewer: function (b) {
                        b.onmouseup = function (b) {
                            a.events.mouseup(b)
                        };
                        b.onmousedown = function (b) {
                            a.events.mousedown(b)
                        };
                        b.onmousemove = function (b) {
                            a.events.mousemove(b)
                        };
                        b.onmouseleave = function (b) {
                            a.events.mouseleave(b)
                        };
                        b.onmouseenter = function (b) {
                            a.events.mouseenter(b)
                        };
                        b.ondblclick = function (b) {
                            ////AGjs__changes when we press double click have to clear already copyied annot
                            PasteWithCtrlKey = false;
                            a.ExitAnnotationDrawingMode();
                            a.events.dblclick(b)
                        };
                        b.ontouchstart = function (b) {
                            1 == b.changedTouches.length && a.events.mousedown(b.changedTouches[0], !0)
                        };
                        b.ontouchmove = function (b) {
                            1 == b.changedTouches.length && a.events.mousemove(b.changedTouches[0],
                                !0) && b.preventDefault()
                        };
                        b.ontouchend = function (b) {
                            1 == b.changedTouches.length && (a.events.mouseup(b.changedTouches[0]), b.preventDefault())
                        }
                    },
                    dblclick: function (b) {
                        a.ExitAnnotationDrawingMode();
                        if (this.overPageText && 0 == a.dom.SelectedTextRegions.count(1) && (b = a.Internal.Text.captureSelectedText(this.mouseDownClientX, this.mouseDownClientY, this.mouseDownClientX, this.mouseDownClientY, !0, !1)) && 0 < b.length) {
                            for (var d = 0; d < b.length; d++)
                                for (var c = 0; c < b[d].regions.length; c++) {
                                    var e = {
                                        left: b[d].regions[c].Left / b[d].scale,
                                        top: b[d].regions[c].Top / b[d].scale,
                                        width: b[d].regions[c].Width / b[d].scale,
                                        height: b[d].regions[c].Height / b[d].scale
                                    };
                                    a.Internal.Coordinates.documentToViewerBox(b[d].pageNo, e);
                                    a.dom.SelectedTextRegions.addNew(b[d].pageNo, e.left, e.top, e.width, e.height, "rgba(0,0,201,0.3)", null, 1)
                                }
                            a.callbacks.onTextSelected && (b = a.Internal.Text.getSelectedTextAreas(), a.callbacks.onTextSelected(b))
                        }
                    },
                    mousedown: function (b, c) {
                        //AGjs__change for link context menu when right click
                        if (3 != b.which || this.overLink) {
                            this.isMouseDown = !0;
                            this.mouseX = b.clientX;
                            this.mouseY = b.clientY;
                            this.mouseDownViewerScrollLeft =
                                a.Internal.Coordinates.getViewerScrollLeft();
                            this.mouseDownViewerScrollTop = a.Internal.Coordinates.getViewerScrollTop();
                            this.mouseDownX = b.clientX + this.mouseDownViewerScrollLeft;
                            this.mouseDownY = b.clientY + this.mouseDownViewerScrollTop;
                            this.mouseDownClientX = b.clientX;
                            this.mouseDownClientY = b.clientY;
                            var d = a.dom.viewerArea.getBoundingClientRect();
                            if (1 == this.mouseMode) a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX - d.left, this.mouseDownY - d.top);
                            else if (2 == this.mouseMode) {
                                b = {
                                    x: b.clientX +
                                        a.Internal.Coordinates.getViewerScrollLeft() - d.left,
                                    y: b.clientY + a.Internal.Coordinates.getViewerScrollTop() - d.top
                                };
                                if (5 == a.Internal.Annotations.currentAnnotProperties.type || 16 == a.Internal.Annotations.currentAnnotProperties.type || a.dom.UIconfig.freeHandContinuousDrawingMode && 10 == a.Internal.Annotations.currentAnnotProperties.type)
                                    if (!a.disableAnnotationDrawingModePanel || a.isIOS) a.dom.drawingModeArea.style.display = "block", a.dom.modalOverlayArea.style.display = "block", a.dom.viewerArea.style.overflow = "hidden";
                                null == this.pathPoints ? (c = a.Internal.Pages.getRenderingState(a.GetCurrentPage()), a.dom.freehandCan.style.left = c.pageLeft + "px", a.dom.freehandCan.style.top = c.pageTop + "px", a.dom.freehandCan.width = c.pageWidth, a.dom.freehandCan.height = c.pageHeight, a.dom.freehandCan.getContext("2d").clearRect(0, 0, a.dom.freehandCan.width, a.dom.freehandCan.height), a.dom.freehandCan.style.display = "block", this.pathPoints = [b]) : (5 != a.Internal.Annotations.currentAnnotProperties.type && 16 != a.Internal.Annotations.currentAnnotProperties.type &&
                                    this.pathPoints.push({
                                        x: 131072,
                                        y: 131072
                                    }), this.pathPoints.push(b));
                                this.isDrawingPath = !0
                            } else if (3 == this.mouseMode || 4 == this.mouseMode) a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX - d.left, this.mouseDownY - d.top);
                            else {
                                a.Internal.Annotations.unselectAll();
                                a.Internal.Text.clearSelection();
                                a.dom.SelectedTextRegions.clear(1);
                                if (!c && (this.overPageText = a.Internal.Text.anyWordHitTest(b.clientX, b.clientY, 5), null != this.overPageText)) {
                                    this.isSelectingText = !0;
                                    this.setCursor();
                                    return
                                }
                                //AGjs__change for link context menu when right click
                                if (this.overLink && b.which == 3) {
                                    var linkContextLeft = this.mouseDownX - d.left;
                                    var linkContextTop = this.mouseDownY - d.top;
                                    a.dom.checkLinkAt(b.clientX, b.clientY, { left: this.mouseDownX - d.left, top: this.mouseDownY - d.top, right: true });
                                } else {
                                    this.overLink ||
                                        (1 == this.canPan && (this.isPanning = !0, a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")), c && (this.overLink = !1, a.dom.checkLinkAt(b.clientX, b.clientY)), a.dom.handleLinkRectVisibility())
                                }
                            }
                        }
                    },
                    mouseup: function (b)
                    {
                        //AGjs__change for link context menu when right click
                      
                            var d = this.isSelectingText;
                            this.isPanning = this.isSelectingText = this.isMouseDown = !1;
                            if (d && 0 < a.dom.SelectedTextRegions.count(1)) this.setCursor(), a.callbacks.onTextSelected && (b = a.Internal.Text.getSelectedTextAreas(), a.callbacks.onTextSelected(b));
                            else if (this.overLink) 3 != b.which &&
                                (b = this.overLink.destPage, d = this.overLink.destUri, this.overLink = null, a.dom.handleLinkRectVisibility(), "unknown" !== d && 0 === b ? window.open(d, "_blank") : a.SelectPageEx(b, !0, !0, !0, !1), this.setCursor());
                            else if (1 != this.mouseMode && 3 != this.mouseMode && 4 != this.mouseMode || !a.Internal.Selection.selectionArea.mouseUp(b))
                                if (2 == this.mouseMode && this.isDrawingPath) a.dom.UIconfig.freeHandContinuousDrawingMode && 10 == a.Internal.Annotations.currentAnnotProperties.type || 5 == a.Internal.Annotations.currentAnnotProperties.type ||
                                    16 == a.Internal.Annotations.currentAnnotProperties.type || (a.dom.freehandCan.style.display = "none", this.isDrawingPath = !1, a.Internal.Annotations.addAnnotInteractive());
                                else if (0 < a.Internal.Annotations.selected.length)
                                    for (b = a.Internal.Annotations.selected.length - 1; 0 <= b; b--) a.Internal.Annotations.selected[b].stopEditing(), a.Internal.Annotations.selected[b].updateCursor();
                                else this.overPageText || 0 == this.mouseMode && 1 == this.canPan && a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")
                       
                    },
                    mousemove: function (b,
                        c) {
                        if (this.isSelectingText) {
                            a.dom.SelectedTextRegions.clear(1);
                            var d = this.mouseDownViewerScrollLeft - a.Internal.Coordinates.getViewerScrollLeft(),
                                e = this.mouseDownViewerScrollTop - a.Internal.Coordinates.getViewerScrollTop();
                            if ((this.mouseDownClientX + d != b.clientX || this.mouseDownClientY + e != b.clientY) && (b = a.Internal.Text.captureSelectedText(this.mouseDownClientX + d, this.mouseDownClientY + e, b.clientX, b.clientY, !1, b.altKey)) && 0 < b.length) {
                                c = document.createDocumentFragment();
                                for (d = 0; d < b.length; d++)
                                    for (var g =
                                        0; g < b[d].regions.length; g++) e = {
                                            left: b[d].regions[g].Left / b[d].scale,
                                            top: b[d].regions[g].Top / b[d].scale,
                                            width: b[d].regions[g].Width / b[d].scale,
                                            height: b[d].regions[g].Height / b[d].scale
                                        }, a.Internal.Coordinates.documentToViewerBox(b[d].pageNo, e), a.dom.SelectedTextRegions.addNew(b[d].pageNo, e.left, e.top, e.width, e.height, "rgba(0,0,201,0.3)", null, 1, c);
                                a.dom.viewerArea.appendChild(c)
                            }
                        } else {
                            var f = !1;
                            this.overPageText = null;
                            if (1 == this.mouseMode || 3 == this.mouseMode || 4 == this.mouseMode) f = a.Internal.Selection.selectionArea.mouseMove(b,
                                c);
                            if (2 == this.mouseMode && this.isDrawingPath) {
                                g = a.dom.viewerArea.getBoundingClientRect();
                                f = 5 == a.Internal.Annotations.currentAnnotProperties.type || 16 == a.Internal.Annotations.currentAnnotProperties.type;
                                var h = {
                                    x: b.clientX + a.Internal.Coordinates.getViewerScrollLeft() - g.left,
                                    y: b.clientY + a.Internal.Coordinates.getViewerScrollTop() - g.top
                                };
                                g = !1;
                                if (this.isMouseDown && !f) {
                                    e = g = !0;
                                    d = this.pathPoints.length;
                                    if (1 < d) {
                                        e = this.pathPoints[d - 2];
                                        var k = this.pathPoints[d - 1];
                                        e = 1.5 <= Math.sqrt(Math.abs((e.y - k.y) * (e.x - h.x) - (e.y -
                                            h.y) * (e.x - k.x)))
                                    }
                                    e ? this.pathPoints.push(h) : this.pathPoints[d - 1] = h
                                } else f && (g = !0);
                                if (g) {
                                    e = parseFloat(a.dom.freehandCan.style.top);
                                    d = parseFloat(a.dom.freehandCan.style.left);
                                    k = a.dom.freehandCan.getContext("2d");
                                    k.clearRect(0, 0, a.dom.freehandCan.width, a.dom.freehandCan.height);
                                    k.lineWidth = 96 * a.Internal.Annotations.currentAnnotProperties.borderWidth * a.GetCurrentZoom();
                                    k.strokeStyle = a.Internal.Annotations.currentAnnotProperties.strokeColor;
                                    k.globalAlpha = 11 == a.Internal.Annotations.currentAnnotProperties.type ?
                                        .5 : a.Internal.Annotations.currentAnnotProperties.opacity;
                                    k.beginPath();
                                    f || (k.lineJoin = "round", k.lineCap = "round");
                                    for (g = 0; g < this.pathPoints.length; g++) 131072 == this.pathPoints[g].x && 131072 == this.pathPoints[g].y ? (k.stroke(), k.beginPath(), f || (k.lineJoin = "round", k.lineCap = "round")) : k.lineTo(this.pathPoints[g].x - d, this.pathPoints[g].y - e);
                                    f && k.lineTo(h.x - d, h.y - e);
                                    k.stroke()
                                }
                                f = !0
                            }
                            if (!f && 0 < a.Internal.Annotations.selected.length)
                                for (d = b.clientX - this.mouseX, e = b.clientY - this.mouseY, g = a.Internal.Annotations.selected.length -
                                    1; 0 <= g; g--) {
                                    h = a.Internal.Annotations.selected[g];
                                    f |= h.isEditing();
                                    if (h.isMoving) h.annotrectNew.left += d, h.annotrectNew.top += e, h.render(!0);
                                    else if (h.isRotating) h.annotApp.rotation = a.Internal.Utilities.normalizeRotation(h.annotApp.rotation + d), h.render(!1);
                                    else if (-1 != h.resizingMode) {
                                        var l = -h.annotApp.rotation * Math.PI / 180;
                                        k = Math.cos(l);
                                        l = Math.sin(l);
                                        var q = d;
                                        d = d * k - e * l;
                                        e = q * l + e * k;
                                        switch (h.resizingMode) {
                                            case 0:
                                                0 < h.annotrectNew.width - d && (h.annotrectNew.left += d, h.addWidth(-d));
                                                h.render(!1);
                                                break;
                                            case 1:
                                                0 <
                                                    h.annotrectNew.width - d && (h.annotrectNew.left += d, h.addWidth(-d));
                                                0 < h.annotrectNew.height - e && (h.annotrectNew.top += e, h.addHeight(-e));
                                                h.render(!1);
                                                break;
                                            case 2:
                                                0 < h.annotrectNew.height - e && (h.annotrectNew.top += e, h.addHeight(-e));
                                                h.render(!1);
                                                break;
                                            case 3:
                                                0 < h.annotrectNew.width + d && h.addWidth(d);
                                                0 < h.annotrectNew.height - e && (h.annotrectNew.top += e, h.addHeight(-e));
                                                h.render(!1);
                                                break;
                                            case 4:
                                                0 < h.annotrectNew.width + d && h.addWidth(d);
                                                h.render(!1);
                                                break;
                                            case 5:
                                                0 < h.annotrectNew.width + d && h.addWidth(d);
                                                0 < h.annotrectNew.height +
                                                    e && h.addHeight(e);
                                                h.render(!1);
                                                break;
                                            case 6:
                                                0 < h.annotrectNew.height + e && h.addHeight(e);
                                                h.render(!1);
                                                break;
                                            case 7:
                                                0 < h.annotrectNew.width - d && (h.annotrectNew.left += d, h.addWidth(-d)), 0 < h.annotrectNew.height + e && h.addHeight(e), h.render(!1)
                                        }
                                    }
                                    h.updateCursor()
                                }
                            f || 0 != this.mouseMode || c || 1 != this.canPan || 1 != this.isPanning || (f = !0, a.serverCtx.hScrollbarVisible && dvJQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft - (b.clientX - this.mouseDownClientX)), a.serverCtx.vScrollbarVisible && dvJQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop -
                                (b.clientY - this.mouseDownClientY)));
                            this.overLink = !1;
                            3 != this.mouseMode && 4 != this.mouseMode && (f || (a.dom.checkLinkAt(b.clientX, b.clientY) || (this.overPageText = a.Internal.Text.anyWordHitTest(b.clientX, b.clientY, 5)), this.setCursor()), a.dom.handleLinkRectVisibility());
                            this.mouseX = b.clientX;
                            this.mouseY = b.clientY;
                            return f
                        }
                    },
                    mouseleave: function (b) {
                        this.isResizingUI || this.isSelectingText || (this.isPanning = !1, 0 == this.mouseMode && a.dom.viewerArea.cursorMgr.setStdCursor("default"), this.overLink = null, a.dom.handleLinkRectVisibility())
                    },
                    mouseenter: function (a) {
                        this.isResizingUI || this.isSelectingText || this.setCursor()
                    },
                    setCursor: function () {
                        if (this.isResizingUI) a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");
                        else switch (this.mouseMode) {
                            case 0:
                                if (null != this.overPageText) {
                                    var b = a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),
                                        c = a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate);
                                    b += c;
                                    360 < b && (b -= 360);
                                    90 == b || 270 == b ? a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text") :
                                        a.dom.viewerArea.cursorMgr.setStdCursor("text");
                                    break
                                }
                                if (this.overLink) {
                                    a.dom.viewerArea.cursorMgr.setStdCursor("pointer");
                                    break
                                }
                                1 == this.canPan ? 1 == !this.isPanning && a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor") : a.dom.viewerArea.cursorMgr.setStdCursor("default");
                                break;
                            case 1:
                                a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");
                                break;
                            case 2:
                                a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");
                                break;
                            case 3:
                            case 4:
                                a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")
                        }
                    },
                    onSnapInButtonMouseEnter: function (b) {
                        dvJQuery(b).hasClass("active") ||
                            (b.style.backgroundColor = a.dom.UIconfig.snapInButtonBorderBottom, b.style.borderTopColor = a.dom.UIconfig.snapInButtonBorderBottom, b.style.cursor = "pointer")
                    },
                    onSnapInButtonMouseLeave: function (b) {
                        dvJQuery(b).hasClass("active") || (b.style.backgroundColor = a.dom.UIconfig.headerColor, b.style.borderTopColor = a.dom.UIconfig.snapInButtonBorderTop, b.style.cursor = "default")
                    },
                    onThumbnailAreaMouseDownHandler: function (b) {
                        if (b.target == document.getElementById(a.FindSnapIn("thumbnails").snapInID) || b.target == a.dom.thumbnailArea) {
                            var d =
                                document.getElementById(a.FindSnapIn("thumbnails").snapInID);
                            d = dvJQuery(d).offset().left + dvJQuery(d).width() - a.dom.sbWidth;
                            b.pageX > d || (b.ctrlKey || (a.Internal.Thumbnails.reinitThumbnailsSelection(), a.dom.updateThumbsStyle(!1, !0)), a.dom.thumbnailSelectBox && (a.dom.thumbnailSelectBoxOrigin.left = b.pageX - dvJQuery(a.dom.thumbnailArea).offset().left + a.dom.thumbnailArea.scrollLeft, a.dom.thumbnailSelectBoxOrigin.top = b.pageY - dvJQuery(a.dom.thumbnailArea).offset().top + a.dom.thumbnailArea.scrollTop, b = {
                                display: "block",
                                left: a.dom.thumbnailSelectBoxOrigin.left + "px",
                                top: a.dom.thumbnailSelectBoxOrigin.top + "px",
                                width: "1px",
                                height: "1px"
                            }, a.dom.thumbnailSelectBox.addClass("active").css(b), a.events.isDragMultipleSelecting = !0))
                        }
                    },
                    onThumbnailAreaMouseMoveHandler: function (b) {
                        if (a.dom.thumbnailSelectBox.is(".active")) {
                            var d = b.pageX - dvJQuery(a.dom.thumbnailArea).offset().left + a.dom.thumbnailArea.scrollLeft,
                                c = b.pageY - dvJQuery(a.dom.thumbnailArea).offset().top + a.dom.thumbnailArea.scrollTop,
                                e = d,
                                f = c,
                                h = a.dom.thumbnailSelectBoxOrigin.left -
                                    e,
                                k = a.dom.thumbnailSelectBoxOrigin.top - f;
                            d > a.dom.thumbnailSelectBoxOrigin.left && (e = a.dom.thumbnailSelectBoxOrigin.left, h = d - a.dom.thumbnailSelectBoxOrigin.left);
                            c > a.dom.thumbnailSelectBoxOrigin.top && (f = a.dom.thumbnailSelectBoxOrigin.top, k = c - a.dom.thumbnailSelectBoxOrigin.top);
                            a.dom.thumbnailSelectBox.css({
                                left: e + "px",
                                top: f + "px",
                                width: h + "px",
                                height: k + "px"
                            });
                            d = a.getVisibleThumbnails(!1);
                            h = dvJQuery(a.dom.thumbnailSelectBox).position();
                            c = h.left;
                            e = h.top;
                            f = h.left + dvJQuery(a.dom.thumbnailSelectBox).width();
                            h = h.top + dvJQuery(a.dom.thumbnailSelectBox).height();
                            for (k = 0; k < d.length; k++) {
                                var l = dvJQuery(a.dom.thumbnailArea.children[d[k] - 1]),
                                    q = l.position(),
                                    t = q.left,
                                    w = q.top,
                                    z = q.left + l.width();
                                q = q.top + l.height();
                                (l = a.Internal.Thumbnails.getThumbnailPage(l.get(0))) && (a.Internal.Coordinates.hasIntersection(c, e, f, h, t, w, z, q) ? a.Internal.Thumbnails.selectThumbnail(l) : b.ctrlKey || a.Internal.Thumbnails.unselectThumbnail(l))
                            }
                            d = document.getElementById(a.FindSnapIn("thumbnails").snapInID);
                            b.pageY + 20 > dvJQuery(d).offset().top +
                                dvJQuery(d).height() && (d.scrollTop += 20);
                            b.pageY - 20 < dvJQuery(d).offset().top && (d.scrollTop -= 20);
                            b.preventDefault()
                        }
                    },
                    onThumbnailAreaMouseUpHandler: function (b) {
                        a.dom.thumbnailSelectBox.is(".active") && (a.dom.thumbnailSelectBox.removeClass("active").css("display", "none"), a.events.isDragMultipleSelecting = !1);
                        b.preventDefault()
                    },
                    onThumbnailItemClickHandler: function (b) {
                        if (!a.events.isResizingUI && (b.stopImmediatePropagation(), b && b.target)) {
                            var d = a.Internal.Thumbnails.getThumbnailPage(b.target);
                            d && a.serverCtx.documentLoaded &&
                                0 < d && d <= a.serverCtx.pageCount && (a.dom.UIconfig.enableMultipleThumbnailSelection && b.ctrlKey ? a.Internal.Thumbnails.toggleThumbnailSelection(d) : 0 == a.dom.viewerArea.offsetWidth || 0 == a.dom.viewerArea.offsetHeight ? (a.ajax.latestSelectedPage = d, a.dom.updateThumbsStyle(!1, !1)) : a.SelectPageEx(d, !1, !0, !0, !0))
                        }
                    },
                    onThumbnailItemMouseOverHandler: function (b) {
                        !a.events.isResizingUI && !a.events.isDragMultipleSelecting && b && b.target && (b = a.Internal.Thumbnails.getThumbnailPage(b.target)) && (a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over",
                            "true"), a.dom.updateThumbStyle(b))
                    },
                    onThumbnailItemMouseOutHandler: function (b) {
                        !a.events.isResizingUI && !a.events.isDragMultipleSelecting && b && b.target && (b = a.Internal.Thumbnails.getThumbnailPage(b.target)) && (a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over", "false"), a.dom.updateThumbStyle(b))
                    },
                    onBookmarkItemClickHandler: function (b) {
                        !a.events.isResizingUI && b && b.target && (a.dom.selectBookmark(b.target), b.target.action && (-1 < b.target.action.indexOf("PdfPageDest") ? a.Internal.Pages.selectByDestination(b.target.action) :
                            -1 < b.target.action.indexOf("uri") && window.open(b.target.action.replace("uri:", "").trim(), "_blank")))
                    },
                    onBookmarkItemMouseOverHandler: function (b) {
                        a.events.isResizingUI || (b.stopPropagation(), b && b.currentTarget && a.dom.setBookmarkOverStyle(b.currentTarget, !0))
                    },
                    onBookmarkItemMouseOutHandler: function (b) {
                        a.events.isResizingUI || b && b.currentTarget && a.dom.setBookmarkOverStyle(b.currentTarget, !1)
                    },
                    onBookmarkTogglerClickHandler: function (b) {
                        if (!a.events.isResizingUI && b && b.target) {
                            var d = dvJQuery(b.target).parent().find("ul");
                            dvJQuery(b.target).hasClass("collapsed") ? (dvJQuery(b.target).removeClass("collapsed").addClass("expanded"), d.show(), 0 != dvJQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length && b.target.bookmarkID && (b = {
                                url: a.appControllerPath + "/bookmarks" + (a.useIdInRoot ? "/1" : ""),
                                data: JSON.stringify({
                                    sessionID: a.ajax.sessionID,
                                    contextID: a.ajax.contextID,
                                    bookmarkID: b.target.bookmarkID
                                }),
                                success: function (b) {
                                    if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK &&
                                        (d.empty(), b.bookmarks))
                                        for (var c = 0; c < b.bookmarks.length; c++) a.dom.createBookmarkNode(d, b.bookmarks[c])
                                },
                                error: function (b) {
                                    a.ajax.HandleError(b)
                                }
                            }, a.ajax.PostAjaxRequestForDocuViewareAction(b, !1, !0))) : (dvJQuery(b.target).removeClass("expanded").addClass("collapsed"), d.hide())
                        }
                    }
                },
                doNextPageViewProcess: function () {
                    if (!this.serverCtx.documentLoaded || !this.cache.canvas) return DocuViewareAPI.Status.GenericError;
                    var b = 0;
                    this.serverCtx.singlePageView || (b = this.showVisiblePages(a.GetCurrentPage()));
                    if (0 != this.serverCtx.pagePreload) {
                        var c =
                            this.serverCtx.minPagesPreloadPerRequest,
                            e = this.serverCtx.maxPagesForAllPagesPreloadingMode,
                            f = [];
                        if (0 == b && 1 == (this.serverCtx.pagePreload & 1)) {
                            var h = this.Internal.Pages.getVisiblePageNumbers();
                            if (0 < h.length) {
                                var k = h[h.length - 1] + 1,
                                    l = h[0] - 1,
                                    q = 0 == l,
                                    t = k == this.serverCtx.pageCount + 1;
                                if (null != a.cache.Pages)
                                    for (h = 0; h < a.cache.Pages.length && (0 == q && a.cache.Pages[h].pageNo == l ? (a.cache.Pages[h].bitmap || a.cache.Pages[h].renderStatus == DocuViewareAPI.Status.OK && f.push(l), q = !0) : a.cache.Pages[h].pageNo == k && (a.cache.Pages[h].bitmap ||
                                        a.cache.Pages[h].renderStatus == DocuViewareAPI.Status.OK && f.push(k), t = !0), !q || !t); h++);
                                q || f.push(l);
                                t || f.push(k)
                            }
                        }
                        if (f.length < c && 2 == (this.serverCtx.pagePreload & 2) && e >= this.serverCtx.pageCount)
                            for (e = 1; e <= this.serverCtx.pageCount && (k = !1, (h = a.Internal.Pages.getPage(e)) && (h.bitmap || h.renderStatus != DocuViewareAPI.Status.OK) && (k = !0), k || (f.push(e), f.length != c)); e++);
                        0 < f.length && (b = this.Internal.Pages.pageView(f, !1, !1))
                    }
                    if (0 == b && !this.serverCtx.singlePageView && null != a.cache.Pages && !a.serverCtx.enableSmoothing)
                        for (h =
                            c = 0; h < a.cache.Pages.length && (!a.cache.Pages[h].bitmap || a.cache.Pages[h].drawing || a.cache.Pages[h].drawn || (a.DrawPage(a.cache.Pages[h]), c++ , 10 != c)); h++);
                    return b
                },
                showVisiblePages: function (a) {
                    var b = this.Internal.Pages.getVisiblePageNumbers();
                    if (null != a)
                        for (var d = 0; d < b.length; d++)
                            if (b[d] == a) {
                                b.splice(d, 1);
                                break
                            } return this.Internal.Pages.pageView(b, !0, !1)
                },
                showVisibleThumbnails: function () {
                    this.Internal.Files.uploading || this.ajax.downloading || a.events.isResizingUI || this.dom.thumbnailArea && 1 == this.serverCtx.documentLoaded &&
                        this.updateThumbnails(a.getVisibleThumbnails(!0))
                },
                getVisibleThumbnails: function (b) {
                    var d = this.dom.thumbnailArea,
                        c = this.dom.thumbnailArea.scrollLeft,
                        e = this.dom.thumbnailArea.scrollTop,
                        f = c + dvJQuery(d).innerWidth();
                    d = e + dvJQuery(d).innerHeight();
                    for (var h = this.dom.thumbnailArea.childElementCount, k = [], l = !1, q = 0; q < h; q++) {
                        var t = this.dom.thumbnailArea.children[q];
                        if (0 != a.Internal.Thumbnails.getThumbnailPage(t)) {
                            var w = dvJQuery(t).position().left,
                                z = dvJQuery(t).position().top,
                                A = w + dvJQuery(t).innerWidth(),
                                H =
                                    z + dvJQuery(t).innerHeight();
                            if (a.Internal.Coordinates.hasIntersection(c, e, f, d, w, z, A, H)) b ? "false" == t.getAttribute("data-moving") && "false" == t.getAttribute("data-loaded") && "false" == t.getAttribute("data-loading") && k.push(q + 1) : k.push(q + 1), l = !0;
                            else if (l) break
                        }
                    }
                    return k
                },
                sortCommentsBy: function (b) {
                    var d = function (a, b, d, c) {
                        var e = function (a, b) {
                            if (b) {
                                b = b.split(".");
                                for (var d = 0, c = b.length - 1; d < c; d++) a = a[b[d]];
                                return a[b[c]]
                            }
                            return a
                        },
                            g = function (b) {
                                return d ? d(e(b, a)) : e(b, a)
                            };
                        return function (a, d) {
                            var e = g(a),
                                f =
                                    g(d);
                            return (e < f ? -1 : e > f ? 1 : "function" === typeof c ? c(a, d) : 0) * [1, -1][+!!b]
                        }
                    };
                    switch (dvJQuery(a.dom.commentsSortBySelect).find("option:selected").val()) {
                        case "page":
                            b.sort(d("comment.annotApp.pageNo", !1, null, d("comment.annotApp.zorder", !1, parseFloat)));
                            break;
                        case "author":
                            b.sort(d("comment.annotApp.author", !1, function (a) {
                                return a.toUpperCase()
                            }));
                            break;
                        case "date":
                            b.sort(d("comment.annotApp.creationTime", !1, function (a) {
                                return new Date(a)
                            }))
                    }
                },
                refreshCommentsPanel: function () {
                    0 < a.cache.AnnotsComments.length ?
                        (dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display", "none"), dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity", "1")) : (dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display", "block"), dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity", "0.5"));
                    //AGjs__change for unique id
                    dvJQuery(a.dom.commentsArea).find("#commentsContainer" + sessionStorage.controlID).empty();
                    for (var b = a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy), c = 0; c < b.length; c++)
                        for (var e = a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[c].comment.annotApp.id); null !=
                            e;) null == b[c].answers ? b[c].answers = [e] : b[c].answers.push(e), e = a.Internal.Annotations.getAnnotationCommentFromId(e.annotApp.properties.nextGuid);
                    for (c = 0; c < b.length; c++) a.dom.createCommentItem(b[c].comment, b[c].answers);
                    dvJQuery(function () {
                        dvJQuery(".dvtoggle").click(function (a) {
                            a.stopPropagation();
                            dvJQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();
                            dvJQuery(this).toggleClass("dvcolapsed")
                        })
                    });
                    a.SetSnapInVisibility("comments", !0)
                },
                updateThumbnails: function (b, c) {
                    if (0 !=
                        b.length && a.dom.thumbnailArea && a.dom.thumbnailArea.children) {
                        if (c) {
                            for (var d = 0; d < b.length; d++) {
                                var e = a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]);
                                if (null == e || null != e && ("false" == e.attr("data-loaded") || "true" == e.attr("data-loading"))) b.splice(d, 1), d--
                            }
                            if (0 == b.length) return
                        }
                        for (d = 0; d < b.length; d++) e = a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]), null != e && e.attr("data-loading", "true");
                        var g = function () {
                            if (a.dom.thumbnailArea && a.dom.thumbnailArea.children)
                                for (var d = 0; d < b.length; d++) {
                                    var c = a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]);
                                    null != c && (c.attr("data-loaded", "false"), c.attr("data-loading", "false"))
                                }
                        };
                        a.debug && console.log("DocuVieware: showing visible thumbnails: " + JSON.stringify(b) + "onlyIfLoaded " + (c ? "true" : "false"));
                        this.ajax.thumbnailRequestNo += 1;
                        a.ajax.PostAjaxRequestForDocuViewareAction({
                            url: a.appControllerPath + "/thumbnails" + (a.useIdInRoot ? "/1" : ""),
                            async: !0,
                            data: JSON.stringify({
                                sessionID: this.ajax.sessionID,
                                contextID: this.ajax.contextID,
                                entries: b,
                                requestNo: this.ajax.thumbnailRequestNo
                            }),
                            success: function (b) {
                                if ((b = "string" ===
                                    typeof b ? eval("(" + b + ")") : b) && b.status == DocuViewareAPI.Status.OK) {
                                    if (b.contextID == a.ajax.contextID && a.dom.thumbnailArea && (b = b.images) && 0 < b.length) {
                                        for (var d = 0; d < b.length; d++) {
                                            var c = a.Internal.Thumbnails.getThumbnailFromPageNo(b[d].pageNo);
                                            if (null != c) {
                                                c.attr("data-loaded", "true");
                                                c.attr("data-loading", "false");
                                                c = c.children("canvas");
                                                c.removeClass("spinner-thumb");
                                                c.css("backgroundColor", "rgba(0,0,0,0)");
                                                var e = new Image;
                                                e.owner = c.get(0);
                                                e.setAttribute("data-pageNo", b[d].pageNo);
                                                e.src = "data:" + b[d].mime +
                                                    ";base64," + b[d].data;
                                                var f = b[d].scale;
                                                e.onload = function () {
                                                    var b = this.owner.getContext("2d");
                                                    b.clearRect(0, 0, this.owner.width, this.owner.height);
                                                    b.save();
                                                    1 == f ? (b.mozImageSmoothingEnabled = !1, b.msImageSmoothingEnabled = !1, b.imageSmoothingEnabled = !1) : b.transform(1 / f, 0, 0, 1 / f, 0, 0);
                                                    b.shadowColor = a.Internal.Thumbnails.THUMBNAIL_SHADOW_COLOR;
                                                    b.shadowBlur = a.Internal.Thumbnails.THUMBNAIL_SHADOW_BLUR;
                                                    b.shadowOffsetX = a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;
                                                    b.shadowOffsetY = a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;
                                                    if (a.isIE9) {
                                                        var d = this;
                                                        window.setTimeout(function () {
                                                            b.drawImage(d, 0, 0);
                                                            b.restore();
                                                            b = null
                                                        }, 100)
                                                    } else b.drawImage(this, 0, 0), b.restore(), b = null
                                                }
                                            }
                                        }
                                        a.dom.updateThumbsStyle(!1, !1)
                                    }
                                } else g()
                            },
                            error: function (b) {
                                a.ajax.HandleError(b);
                                g()
                            }
                        })
                    }
                },
                ResetScrollConfig: function () {
                    a.isIOS && (a.dom.viewerArea.style.overflow = "auto");
                    a.serverCtx.vScrollbarVisible && a.serverCtx.hScrollbarVisible ? a.isIOS || (a.dom.viewerArea.style.overflow = "auto", a.dom.viewerArea.style.overflowY = "scroll", a.dom.viewerArea.style.overflowX = "scroll") :
                        a.serverCtx.vScrollbarVisible ? a.isIOS || (a.dom.viewerArea.style.overflowX = "hidden", a.dom.viewerArea.style.overflowY = "scroll") : a.serverCtx.hScrollbarVisible ? a.isIOS || (a.dom.viewerArea.style.overflowY = "hidden", a.dom.viewerArea.style.overflowX = "scroll") : a.isIOS || (a.dom.viewerArea.style.overflowY = "hidden", a.dom.viewerArea.style.overflowX = "hidden")
                },
                ClearUI: function () {
                    a.cache.emptyCanvas();
                    a.Internal.Thumbnails.removeAllThumbnails();
                    a.dom.bookmarksArea && dvJQuery(a.dom.bookmarksTree).empty();
                    a.Internal.Text.clearSelection();
                    a.ClearSearch();
                    a.Internal.FormFields.removeAll();
                    a.Internal.Annotations.removeAll()
                },
                UpdateUI: function (b, c, e, f, h, k) {
                    function d() {
                        var b = a.isIOS ? 1024 : 2048;
                        a.cache.canvas = [];
                        var d = a.dom.viewerArea.offsetHeight,
                            c = a.dom.viewerArea.offsetWidth;
                        a.serverCtx.vScrollbarVisible && (c -= a.dom.sbWidth);
                        a.serverCtx.hScrollbarVisible && (d -= a.dom.sbWidth);
                        for (var e = document.createDocumentFragment(), g = 0; g < a.serverCtx.pageCanvasSize.length; g++) {
                            var f = a.serverCtx.pageCanvasSize[g].OffsetX,
                                h = a.serverCtx.pageCanvasSize[g].OffsetY,
                                m = a.serverCtx.pageCanvasSize[g].Width + f,
                                k = a.serverCtx.pageCanvasSize[g].Height + h;
                            k > d && (d = k);
                            m > c && (c = m);
                            var p = [],
                                l = Math.ceil(a.serverCtx.pageCanvasSize[g].Width / b),
                                r = Math.ceil(a.serverCtx.pageCanvasSize[g].Height / b),
                                q = a.serverCtx.pageCanvasSize[g].Width * a.serverCtx.pageCanvasSize[g].Height > b * b,
                                t = DocuViewareUtilities.getDevicePixelRatio();
                            if (q && (1 < l || 1 < r))
                                for (var u = q = 0, v = 0; v < r; v++) {
                                    u += b;
                                    u - 1 > a.serverCtx.pageCanvasSize[g].Height && (u = a.serverCtx.pageCanvasSize[g].Height - 1);
                                    for (var w = u - q, S = 0, z = 0, I = 0; I <
                                        l; I++) {
                                        z += b;
                                        z - 1 > a.serverCtx.pageCanvasSize[g].Width && (z = a.serverCtx.pageCanvasSize[g].Width - 1);
                                        var A = z - S,
                                            y = document.createElement("canvas");
                                        y.width = A * t;
                                        y.height = w * t;
                                        y.style.width = A + "px";
                                        y.style.height = w + "px";
                                        y.style.display = "block";
                                        y.style.position = "absolute";
                                        y.style.left = f + S + "px";
                                        y.style.top = h + q + "px";
                                        y.style.padding = "0px";
                                        y.style.margin = "0px";
                                        y.style.backgroundColor = "white";
                                        e.appendChild(y);
                                        p.push({
                                            tile: y,
                                            tx: -(S * t),
                                            ty: -(q * t)
                                        });
                                        S += A
                                    }
                                    q += w
                                } else y = document.createElement("canvas"), y.width = Math.ceil(a.serverCtx.pageCanvasSize[g].Width *
                                    t), y.height = Math.ceil(a.serverCtx.pageCanvasSize[g].Height * t), y.style.width = Math.ceil(a.serverCtx.pageCanvasSize[g].Width) + "px", y.style.height = Math.ceil(a.serverCtx.pageCanvasSize[g].Height) + "px", y.style.display = "block", y.style.position = "absolute", y.style.left = f + "px", y.style.top = h + "px", y.style.padding = "0px", y.style.margin = "0px", y.style.backgroundColor = "white", e.appendChild(y), p.push({
                                        tile: y,
                                        tx: 0,
                                        ty: 0
                                    });
                            a.cache.canvas.push({
                                canvas: p,
                                top: h,
                                left: f,
                                right: m,
                                bottom: k,
                                pageNo: a.serverCtx.pageCanvasSize[g].PageNo
                            })
                        }
                        a.dom.viewerArea.appendChild(e);
                        a.serverCtx.pageCanvasSize = null;
                        b = document.createElement("div");
                        b.style.display = "block";
                        b.style.position = "absolute";
                        b.style.height = d + "px";
                        b.style.width = c + "px";
                        b.style.left = "0px";
                        b.style.top = "0px";
                        b.style.padding = "0px";
                        b.style.margin = "0px";
                        a.isIE && (b.style.backgroundColor = "rgba(255,255,255,0.01)");
                        a.events.forwardMouseEventsToViewer(b);
                        a.dom.viewerArea.appendChild(b);
                        !a.dom.singlePageView && 1 < a.GetPageCount() && (a.dom.pageBoundsDiv = document.createElement("div"), a.dom.pageBoundsDiv.style.display = "block",
                            a.dom.pageBoundsDiv.style.position = "absolute", a.dom.pageBoundsDiv.style.padding = "0px", a.dom.pageBoundsDiv.style.margin = "0px", a.dom.pageBoundsDiv.style.display = "none", a.dom.pageBoundsDiv.style.borderStyle = "solid", a.dom.pageBoundsDiv.style.borderColor = a.dom.UIconfig.strokeColor, a.dom.pageBoundsDiv.style.borderWidth = "2px", b.appendChild(a.dom.pageBoundsDiv));
                        a.Internal.Selection.selectionArea.init(b);
                        a.SetMouseMode(a.events.mouseMode);
                        a.dom.rlink = document.createElement("canvas");
                        a.dom.rlink.style.zIndex =
                            16E6 - 1;
                        a.dom.rlink.style.position = "absolute";
                        a.dom.rlink.style.height = "0px";
                        a.dom.rlink.style.width = "0px";
                        a.dom.rlink.style.left = "0px";
                        a.dom.rlink.style.top = "0px";
                        a.dom.rlink.style.padding = "0px";
                        a.dom.rlink.style.margin = "0px";
                        a.dom.rlink.style.borderStyle = "solid";
                        a.dom.rlink.style.borderColor = "red";
                        a.dom.rlink.style.borderWidth = "1px";
                        a.dom.rlink.style.display = "none";
                        b.appendChild(a.dom.rlink);
                        a.dom.freehandCan || (a.dom.freehandCan = document.createElement("canvas"));
                        a.dom.freehandCan.style.position =
                            "absolute";
                        a.dom.freehandCan.style.padding = "0px";
                        a.dom.freehandCan.style.margin = "0px";
                        a.dom.freehandCan.style.display = "none";
                        a.dom.freehandCan.style.zIndex = 16777271;
                        a.dom.freehandCan.onmouseup = function (b) {
                            a.events.mouseup(b)
                        };
                        a.dom.freehandCan.onmousedown = function (b) {
                            a.events.mousedown(b)
                        };

                        a.dom.freehandCan.onmousemove = function (b) {
                            a.events.mousemove(b)
                        };
                        a.dom.freehandCan.onmouseleave = function (b) {
                            a.events.mouseleave(b)
                        };
                        a.dom.freehandCan.onmouseenter = function (b) {
                            a.events.mouseenter(b)
                        };
                        a.dom.freehandCan.ondblclick =
                            function (b) {
                                a.events.dblclick(b)
                            };
                        a.dom.freehandCan.ontouchstart = function (b) {
                            1 == b.changedTouches.length && a.events.mousedown(b.changedTouches[0])
                        };
                        a.dom.freehandCan.ontouchmove = function (b) {
                            1 == b.changedTouches.length && (b.preventDefault(), a.events.mousemove(b.changedTouches[0], !0))
                        };
                        a.dom.freehandCan.ontouchend = function (b) {
                            1 == b.changedTouches.length && a.events.mouseup(b.changedTouches[0])
                        };
                        a.dom.viewerArea.appendChild(a.dom.freehandCan);
                        null != a.dom.annotationsActionButtons && a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons);
                        a.serverCtx.vScrollbarVisible ? dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth - a.dom.sbWidth) : dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth)
                    }
                    var g = null != a.serverCtx && a.serverCtx.documentLoaded;
                    b && (this.ajax.latestSelectedPage = this.serverCtx.selectedPage);
                    this.dom.singlePageView != this.serverCtx.singlePageView && (this.dom.singlePageView = this.serverCtx.singlePageView, this.dom.updateSinglePageModeButton());
                    h || !a.serverCtx.clearCachedBitmap && !a.serverCtx.clearCachedPages || (a.serverCtx.clearCachedPages ?
                        (a.debug && console.log("DocuVieware: Cached pages removed. zoom: " + a.serverCtx.zoom), a.cache.clearCachedPages()) : a.serverCtx.clearCachedBitmap && (a.debug && console.log("DocuVieware: Cached bitmap removed. zoom: " + a.serverCtx.zoom), a.cache.clearCachedBitmap()), a.serverCtx.clearCachedBitmap = !1, a.serverCtx.clearCachedPages = !1);
                    if (g) {
                        null != a.serverCtx.pageCanvasSize && (a.cache.emptyCanvas(), d());
                        if (a.serverCtx.pagesReset) {
                            for (var m = 0; m < a.serverCtx.pagesReset.length; m++) a.cache.clearPage(a.serverCtx.pagesReset[m]);
                            a.serverCtx.pagesReset = null
                        }
                        c || (a.debug && console.log("DocuVieware: Setting scrollbar values of page: " + a.GetCurrentPage() + " / " + a.GetLastPageNoRequest()), this.ResetScrollConfig(), a.serverCtx.vScrollbarVisible && a.serverCtx.hScrollbarVisible ? (a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal), a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal)) : a.serverCtx.vScrollbarVisible ? a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal) : a.serverCtx.hScrollbarVisible &&
                            a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal), a.events.canPan = a.serverCtx.vScrollbarVisible || a.serverCtx.hScrollbarVisible);
                        null != a.serverCtx.annotsComments && a.dom.commentsArea && (a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments), a.refreshCommentsPanel());
                        if (null != a.serverCtx.page)
                            for (m = 0; m < a.serverCtx.page.length; m++) {
                                var l = !1;
                                c = a.serverCtx.page[m].pageNo;
                                var p = a.Internal.Pages.getPage(c);
                                p && (l = !0, !h && a.serverCtx.page[m].data && (p.bitmap = null));
                                l || (p = {
                                    pageNo: c,
                                    drawn: !1,
                                    drawing: !1
                                }, a.cache.cachePage(p));
                                p.renderStatus = a.serverCtx.page[m].renderStatus;
                                h || (k || (p.renderRotation = a.serverCtx.page[m].renderRotation, p.viewRotation = a.serverCtx.page[m].viewRotation, p.drawn && !a.Internal.Matrix.equal(p.matrix, a.serverCtx.page[m].matrix) && (p.drawn = !1), p.matrix = a.serverCtx.page[m].matrix, p.contentMatrix = a.serverCtx.page[m].contentMatrix, p.zoom = a.serverCtx.page[m].zoom), p.width = a.serverCtx.page[m].width, p.height = a.serverCtx.page[m].height);
                                if (a.serverCtx.page[m].formFields &&
                                    (l = a.serverCtx.page[m].formFields, l.firstAccess && a.Internal.FormFields.removePageFormFields(p.pageNo), l.formFieldsApp))
                                    for (var r = 0; r < l.formFieldsApp.length; r++) a.Internal.FormFields.newController(l.formFieldsApp[r]);
                                if (a.serverCtx.page[m].annots && (l = a.serverCtx.page[m].annots, l.firstAccess && a.Internal.Annotations.removePageAnnots(p.pageNo), l.annotsApp)) {
                                    r = a.cache.getPageCanvas(p.pageNo);
                                    for (var q = 0; q < l.annotsApp.length; q++) a.Internal.Annotations.newController(l.annotsApp[q], null != r ? r.left : 0, null !=
                                        r ? r.top : 0, p.contentMatrix)
                                }
                                a.serverCtx.page[m].text && (p.text = a.serverCtx.page[m].text);
                                a.serverCtx.page[m].links && (p.links = a.serverCtx.page[m].links);
                                h || (a.serverCtx.page[m].data ? (l = new Image, l.src = "data:" + a.serverCtx.page[m].mime + ";base64," + a.serverCtx.page[m].data, a.cache.attachImageToPage(p, l, a.serverCtx.page[m].scale, a.serverCtx.page[m].hasTransparency), p.drawn = !1, l.setAttribute("data-pageNo", c), e && (p.drawing = !0, l.onload = function (b) {
                                    b = parseInt(this.getAttribute("data-pageNo"));
                                    a.DrawPage(a.cache.getPageObject(b))
                                })) :
                                    e && (null != p.bitmap ? a.Internal.Pages.isPageVisible(p.pageNo) && (p.drawing = !0, a.DrawPage(p)) : (a.debug && console.log("DocuVieware: draw page request without attached bitmap " + c + ". render status: " + p.renderStatus), p.renderStatus == DocuViewareAPI.Status.OK && (p.renderStatus = DocuViewareAPI.Status.GenericError))), a.serverCtx.page[m].updateThumbnail && a.updateThumbnails([c], !0));
                                a.serverCtx.page[m] = null;
                                null == p.bitmap && (p.TransferRetries || (p.TransferRetries = 0), p.TransferRetries++ < DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES &&
                                    (a.debug && console.log("DocuVieware: new page content received without attached bitmap " + c + ". Total retries: " + parseFloat(p.TransferRetries)), a.Internal.Pages.pageView([p.pageNo], !1, !0)))
                            }
                    }
                    if (b) {
                        if (0 < a.serverCtx.pageCount && a.dom.thumbnailArea) {
                            m = document.createDocumentFragment();
                            for (e = 0; e < a.serverCtx.pageCount; e++) m.appendChild(a.Internal.Thumbnails.createThumbnail(e + 1));
                            a.dom.thumbnailArea.appendChild(m);
                            a.dom.updateThumbsStyle(!0, !0)
                        }
                        if (null != a.serverCtx.bookmarks && a.dom.bookmarksArea) {
                            for (m = 0; m <
                                a.serverCtx.bookmarks.length; m++) e = a.serverCtx.bookmarks[m], a.dom.createBookmarkNode(dvJQuery(a.dom.bookmarksTree), e);
                            a.SetSnapInVisibility("bookmarks", !0)
                        }
                    }
                    if (!g || b || f) a.SetSnapInVisibility("annotations", g && a.serverCtx.annotationEditorMode), a.SetSnapInVisibility("comments", g && a.serverCtx.annotationEditorMode), a.SetSnapInVisibility("thumbnails", g), a.SetSnapInVisibility("bookmarks", g && 0 < dvJQuery(a.dom.bookmarksTree).children().length), a.SetSnapInVisibility("search", g && a.serverCtx.enableTextSearch),
                        a.serverCtx.enableDigiSign && a.SetSnapInVisibility("digisign", g && a.serverCtx.enableDigiSign && 3 === a.serverCtx.documentType);
                    a.dom.leftSideArea && (a.isIE9 || a.isIE10) && dvJQuery(a.dom.leftSideContainerPanelsArea).height(dvJQuery(a.dom.controlArea).height() - dvJQuery(a.dom.snapinsHeader).height());
                    g && (a.isIEorEdge && !a.serverCtx.singlePageView && a.serverCtx.vScrollbarMax > DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT ? a.ToggleSinglePageViewMode() : (a.showVisibleThumbnails(), a.doNextPageViewProcess()))
                },
                DrawPage: function (b) {
                    if (null !==
                        b && null !== b.matrix) {
                        var d = a.cache.getPageCanvas(b.pageNo);
                        b.drawing = !1;
                        if (null !== d) {
                            if (!a.dom.singlePageView && 1 < a.GetPageCount() && a.GetCurrentPage() === b.pageNo) {
                                var c = parseFloat(a.dom.pageBoundsDiv.style.borderWidth),
                                    e = a.Internal.Pages.getRenderingState(b.pageNo);
                                a.dom.pageBoundsDiv.style.left = e.pageLeft + "px";
                                a.dom.pageBoundsDiv.style.top = e.pageTop + "px";
                                a.dom.pageBoundsDiv.style.width = e.pageWidth - 2 * c + "px";
                                a.dom.pageBoundsDiv.style.height = e.pageHeight - 2 * c + "px";
                                a.dom.pageBoundsDiv.style.display = "block"
                            }
                            if (!b.drawn) {
                                a.debug &&
                                    console.log("DocuVieware: drawing page: " + b.pageNo + ". mat: " + JSON.stringify(b.matrix));
                                var f = null;
                                c = b.matrix;
                                e = DocuViewareUtilities.getDevicePixelRatio();
                                1 !== e && a.Internal.Matrix.isRotatedOrFlipped(c) && (c = a.Internal.Matrix.combine({
                                    a: 1 / e,
                                    b: 0,
                                    c: 0,
                                    d: 1 / e,
                                    e: 0,
                                    f: 0
                                }, c), c = a.Internal.Matrix.combine(c, {
                                    a: e,
                                    b: 0,
                                    c: 0,
                                    d: e,
                                    e: 0,
                                    f: 0
                                }));
                                e = b.scale;
                                1 !== e && (c = a.Internal.Matrix.combine({
                                    a: 1 / e,
                                    b: 0,
                                    c: 0,
                                    d: 1 / e,
                                    e: 0,
                                    f: 0
                                }, c));
                                var h = Math.abs(c.a) + Math.abs(c.c),
                                    k = Math.abs(c.b) + Math.abs(c.d);
                                try {
                                    var l = a.serverCtx.enableSmoothing ?
                                        .15 >= Math.min(h, k) ? 3 : .5 >= Math.min(h, k) ? 2 : 1 : 1;
                                    if (1 !== l) {
                                        var q = b.bitmap.width,
                                            t = b.bitmap.height;
                                        if (a.attachedDebugger && a.isIE)
                                            if (9437184 > b.bitmap.width * b.bitmap.height)
                                                if (c = {
                                                    a: c.a * Math.pow(2, l - 1),
                                                    b: c.b * Math.pow(2, l - 1),
                                                    c: c.c * Math.pow(2, l - 1),
                                                    d: c.d * Math.pow(2, l - 1),
                                                    e: c.e,
                                                    f: c.f
                                                }, b.hasTransparency)
                                                    if (2 == l) y = document.createElement("canvas"), y.width = q / 2, y.height = t / 2, A = y.getContext("2d"), A.drawImage(b.bitmap, 0, 0, q / 2, t / 2), A = null, f = y;
                                                    else {
                                                        y = document.createElement("canvas");
                                                        y.width = q / 2;
                                                        y.height = t / 2;
                                                        A = y.getContext("2d");
                                                        A.drawImage(b.bitmap, 0, 0, q / 2, t / 2);
                                                        A = null;
                                                        var w = document.createElement("canvas");
                                                        w.width = q / 4;
                                                        w.height = t / 4;
                                                        var z = w.getContext("2d");
                                                        z.drawImage(y, 0, 0, q / 4, t / 4);
                                                        z = null;
                                                        f = w
                                                    }
                                                else {
                                                    var y = document.createElement("canvas");
                                                    y.width = q / 2;
                                                    y.height = t / 2;
                                                    for (var A = y.getContext("2d"), C = 0; C < l - 1; C++) A.drawImage(0 == C ? b.bitmap : y, 0, 0, q / Math.pow(2, C + 1), t / Math.pow(2, C + 1));
                                                    f = y
                                                } else f = b.bitmap;
                                        else {
                                            var D = document.createElement("canvas");
                                            D.width = q;
                                            D.height = t;
                                            var E = D.getContext("2d");
                                            E.mozImageSmoothingEnabled = !1;
                                            E.msImageSmoothingEnabled = !1;
                                            E.imageSmoothingEnabled = !1;
                                            E.drawImage(b.bitmap, 0, 0, q, t);
                                            var G = document.createElement("canvas");
                                            G.width = Math.ceil(q * h);
                                            G.height = Math.ceil(t * k);
                                            var M = G.getContext("2d"),
                                                N = M.getImageData(0, 0, G.width, G.height);
                                            c = a.Internal.Matrix.combine({
                                                a: 1 / h,
                                                b: 0,
                                                c: 0,
                                                d: 1 / k,
                                                e: 0,
                                                f: 0
                                            }, c);
                                            var T = E.getImageData(0, 0, D.width, D.height).data;
                                            E = null;
                                            a.Internal.Libs.pica.resize({
                                                src: T,
                                                dest: N.data,
                                                width: D.width,
                                                height: D.height,
                                                toWidth: G.width,
                                                toHeight: G.height,
                                                alpha: b.hasTransparency,
                                                quality: l - 2
                                            });
                                            M.putImageData(N, 0, 0);
                                            T = D =
                                                M = N = null;
                                            f = G
                                        }
                                    } else f = b.bitmap;
                                    if (f) {
                                        for (C = 0; C < d.canvas.length; C++) {
                                            var O = d.canvas[C].tile;
                                            if (null !== O) {
                                                O.style.backgroundColor = "transparent";
                                                var F = O.getContext("2d");
                                                if (null === F) console.log("Can not obtain 2d context for the tile " + (C + 1).toString() + "\r\nTile count: " + d.canvas.length.toString());
                                                else if (F.save(), F.clearRect(0, 0, O.width, O.height), F.mozImageSmoothingEnabled = a.serverCtx.enableSmoothing, F.msImageSmoothingEnabled = a.serverCtx.enableSmoothing, F.imageSmoothingEnabled = a.serverCtx.enableSmoothing,
                                                    1 === c.a && 0 === c.b && 0 === c.c && 1 === c.d && 0 === c.e + d.canvas[C].tx && 0 === c.f + d.canvas[C].ty || F.transform(c.a, c.b, c.c, c.d, c.e + d.canvas[C].tx, c.f + d.canvas[C].ty), a.isIE9) window.setTimeout(function () {
                                                        if (9437184 < f.width * f.height) {
                                                            var a = Math.round(f.width / 2),
                                                                b = Math.round(f.height / 2),
                                                                d = 1 / h,
                                                                c = 1 / k;
                                                            F.drawImage(f, 0, 0, a, b, 0, 0, a, b);
                                                            F.drawImage(f, a, 0, a, b, a - d, 0, a, b);
                                                            F.drawImage(f, 0, b, a, b, 0, b - c, a, b);
                                                            F.drawImage(f, a, b, a, b, a - d, b - c, a, b)
                                                        } else F.drawImage(f, 0, 0);
                                                        F.restore();
                                                        F = null
                                                    }, 100);
                                                else {
                                                    if (9437184 <= f.width * f.height) {
                                                        var J =
                                                            Math.round(f.width / 2),
                                                            R = Math.round(f.height / 2);
                                                        q = 1 / h;
                                                        t = 1 / k;
                                                        F.drawImage(f, 0, 0, J, R, 0, 0, J, R);
                                                        F.drawImage(f, J, 0, J, R, J - q, 0, J, R);
                                                        F.drawImage(f, 0, R, J, R, 0, R - t, J, R);
                                                        F.drawImage(f, J, R, J, R, J - q, R - t, J, R)
                                                    } else F.drawImage(f, 0, 0);
                                                    F.restore();
                                                    F = null
                                                }
                                            }
                                        }
                                        b.drawn = !0
                                    }
                                } catch (qa) {
                                    alert("DocuVieware page drawing exception: " + qa.message + "\r\nDownscales: " + l.toString())
                                }
                            }
                            if (null != a.cache.FormFields)
                                for (C = 0; C < a.cache.FormFields.length; C++) l = a.cache.FormFields[C], l.control && l.formFieldApp.pageNo == b.pageNo && (a.Internal.FormFields.existFormField(l) ||
                                    a.dom.viewerArea.appendChild(l.control), l.render());
                            if (null != a.cache.Annots)
                                for (C = 0; C < a.cache.Annots.length; C++)
                                    if (l = a.cache.Annots[C], l.annotApp.pageNo == b.pageNo && (l.updatePageInfo(d.left, d.top, b.contentMatrix), l.annotApp.visible)) {
                                        O = !0;
                                        if (a.dom.viewerArea.hasChildNodes())
                                            for (J = a.dom.viewerArea.children.length - 1; 0 <= J; J--)
                                                if (a.dom.viewerArea.children[J] === l.canvas) {
                                                    O = !1;
                                                    break
                                                } O && a.dom.viewerArea.appendChild(l.canvas);
                                        l.render()
                                    } a.Internal.Search.highlightResults(b.pageNo)
                        }
                    }
                },
                resetServerCtx: function () {
                    this.serverCtx = {
                        zoomMode: 0,
                        zoom: 0,
                        documentLoaded: !1,
                        pageCount: 0,
                        selectedPage: 0,
                        imageCanvasSize: null,
                        enableSmoothing: !1,
                        hScrollbarVal: 0,
                        hScrollbarMax: 0,
                        hScrollbarVisible: !1,
                        vScrollbarVal: 0,
                        vScrollbarMax: 0,
                        vScrollbarVisible: !1,
                        image: null
                    }
                },
                setDialogAnnotationFontNamePropertiesPreview: function () {
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family", dvJQuery(a.dom.annotationDialogFormFontNameSelect).find("option:selected").val());
                    this.setDialogAnnotationLineAlignmentPropertiesPreview()
                },
                setDialogAnnotationFontSizePropertiesPreview: function () {
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size",
                        dvJQuery(a.dom.annotationDialogFormFontSizeInput).val() + "px");
                    this.setDialogAnnotationLineAlignmentPropertiesPreview()
                },
                setDialogAnnotationFontColorPropertiesPreview: function () { },
                setDialogAnnotationFontStylePropertiesPreview: function () {
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration", "none");
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style", "normal");
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight", "normal");
                    switch (parseInt(dvJQuery(a.dom.annotationDialogFormFontStyleSelect).find("option:selected").val())) {
                        case 0:
                            dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
                                "none");
                            break;
                        case 1:
                            dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight", "bold");
                            break;
                        case 2:
                            dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style", "italic");
                            break;
                        case 4:
                            dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration", "underline");
                            break;
                        case 8:
                            dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration", "line-through")
                    }
                },
                setDialogAnnotationAlignmentPropertiesPreview: function () {
                    switch (parseInt(dvJQuery(a.dom.annotationDialogFormAlignmentSelect).filter(":checked").val())) {
                        case 0:
                            var b =
                                "left";
                            break;
                        case 1:
                            b = "center";
                            break;
                        case 2:
                            b = "right";
                            break;
                        default:
                            b = "left"
                    }
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align", b)
                },
                setDialogAnnotationLineAlignmentPropertiesPreview: function () {
                    var b = dvJQuery("<div>");
                    b.css("width", dvJQuery(a.dom.annotationDialogFormTextInput).width());
                    b.css("font-size", dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size"));
                    b.css("font-family", dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family"));
                    b.css("font-weight", dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight"));
                    b.css("text-decoration", dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration"));
                    b.css("text-align", dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align"));
                    b.css("display", "none");
                    var c = dvJQuery(a.dom.annotationDialogFormTextInput).val();
                    b.html((c + "").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, "$1<br />$2"));
                    dvJQuery(a.dom.annotationDialogForm).append(b);
                    //AGjs__change for unique id
                    switch (parseInt(dvJQuery("[name='annotation_line_alignment_select" + sessionStorage.controlID + "']:checked").val())) {
                        case 0:
                            c = 0;
                            break;
                        case 1:
                            c =
                                Math.max(0, (dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height") - b.height()) / 2);
                            break;
                        case 2:
                            c = Math.max(0, dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height") - b.height() - 1);
                            break;
                        default:
                            c = 0
                    }
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("height", dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height") - c + "px");
                    dvJQuery(a.dom.annotationDialogFormTextInput).css("padding-top", c + "px");
                    b.remove()
                },
                inputControl: function (a, b, c, e) {
                    var d = a.val().split(""),
                        g = "",
                        f = "";
                    if ("int" == b) h = /^([0-9])$/, m = /^([0-9][0-9]*)$/;
                    else if ("float" == b) var h = /(^\d+$)|(^\d+\.\d+$)|[,\.]/,
                        m = /^([0-9][0-9]*[,\.]?\d{0,3})$/;
                    for (var k in d) 1 == h.test(d[k]) && "" != d[k] && (f += "" + d[k].replace(",", "."), 1 == m.test(f) && (g += "" + d[k].replace(",", ".")));
                    "undefined" !== typeof c && null !== c && g < c && (g = c);
                    "undefined" !== typeof e && null !== e && g > e && (g = e);
                    a.val(g)
                },
                inputPageRangeControl: function (a) {
                    var b = a.value.split(""),
                        d = /^([0-9|;-])$/,
                        c = "",
                        e;
                    for (e in b) 1 == d.test(b[e]) && (c += b[e]);
                    a.value = c
                },
                ToggleSinglePageViewMode_Click: function () {
                    this.ToggleSinglePageViewMode()
                },
                pageRangeSelection: function (b, c) {
                    switch (parseInt(b)) {
                        case 0:
                            c.value = "1-" + a.GetPageCount();
                            c.disabled = !0;
                            break;
                        case 1:
                            c.value = a.GetCurrentPage();
                            c.disabled = !0;
                            break;
                        case 2:
                            c.disabled = !1
                    }
                },
                SelectFirstPage_Click: function () {
                    this.serverCtx.documentLoaded && (this.dom.updateSelectedPageFader(0, 1), this.EnsurePageVisibility(1), a.SelectPage(1))
                },
                SelectNextPage_Click: function () {
                    if (this.serverCtx.documentLoaded) {
                        this.selectNextPageTimeout && (clearTimeout(this.selectNextPageTimeout), this.selectNextPageTimeout = null);
                        this.selectNextPageActions ? this.selectNextPageActions++ : this.selectNextPageActions = 1;
                        var b = Math.min(this.GetLastPageNoRequest() + this.selectNextPageActions, this.serverCtx.pageCount);
                        this.dom.updateSelectedPageFader(0, b);
                        this.EnsurePageVisibility(b);
                        this.selectNextPageTimeout = setTimeout(function () {
                            a.GetLastPageNoRequest() + 1 <= a.serverCtx.pageCount && a.SelectPageEx(b, !0, !1, !0, !0);
                            a.selectNextPageActions = 0
                        }, 300)
                    }
                },
                SelectPreviousPage_Click: function () {
                    if (this.serverCtx.documentLoaded) {
                        this.selectPreviousPageTimeout &&
                            (clearTimeout(this.selectPreviousPageTimeout), this.selectPreviousPageTimeout = null);
                        this.selectPreviousPageActions ? this.selectPreviousPageActions++ : this.selectPreviousPageActions = 1;
                        var b = Math.max(this.GetLastPageNoRequest() - this.selectPreviousPageActions, 1);
                        this.dom.updateSelectedPageFader(0, b);
                        this.EnsurePageVisibility(b);
                        this.selectPreviousPageTimeout = setTimeout(function () {
                            1 < a.GetLastPageNoRequest() && a.SelectPageEx(b, !0, !1, !0, !0);
                            a.selectPreviousPageActions = 0
                        }, 300)
                    }
                },
                SelectLastPage_Click: function () {
                    this.serverCtx.documentLoaded &&
                        (this.dom.updateSelectedPageFader(0, a.serverCtx.pageCount), this.EnsurePageVisibility(a.serverCtx.pageCount), a.SelectPage(a.serverCtx.pageCount))
                },
                ToggleMobileToolbar_Click: function () {
                    a.dom.mobileToolbarContainer && dvJQuery(a.dom.mobileToolbarContainer).slideToggle("fast")
                },
                ZoomMode_Click: function () {
                    a.dom.subMenuZoomMode && (a.dom.subMenuMouseMode && dvJQuery(a.dom.subMenuMouseMode).hide(), dvJQuery(a.dom.subMenuZoomMode).show().position({
                        my: "left top",
                        at: "left bottom",
                        of: dvJQuery(a.dom.zoomModeButton)
                    }),
                        dvJQuery(document).on("click", function () {
                            dvJQuery(a.dom.subMenuZoomMode).hide()
                        }));
                    //AGjs__change for unique id
                    a.dom.mobileToolbarContainer && a.dom.subMenuZoomModeMobile && (dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile" + sessionStorage.controlID).addClass("button_active"), dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile" + sessionStorage.controlID).removeClass("button_active"), "-60px" === dvJQuery(a.dom.mobileToolbarContainer).css("margin-right") ? (dvJQuery(a.dom.subMenuZoomModeMobile).show(), dvJQuery(a.dom.subMenuMouseModeMobile).hide(),
                        dvJQuery(a.dom.mobileToolbarContainer).css("margin-right", "")) : "none" !== dvJQuery(a.dom.subMenuZoomModeMobile).css("display") ? (dvJQuery(a.dom.mobileToolbarContainer).css("margin-right", "-60px"), dvJQuery(a.dom.subMenuZoomModeMobile).hide(), dvJQuery(a.dom.subMenuMouseModeMobile).hide(), dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile" + sessionStorage.controlID).removeClass("button_active"), dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile" + sessionStorage.controlID).removeClass("button_active")) :
                            (dvJQuery(a.dom.subMenuZoomModeMobile).show(), dvJQuery(a.dom.subMenuMouseModeMobile).hide()), a.dom.updateButtons())
                },
                MouseMode_Click: function () {
                    a.dom.subMenuMouseMode && (a.dom.subMenuZoomMode && dvJQuery(a.dom.subMenuZoomMode).hide(), dvJQuery(a.dom.subMenuMouseMode).show().position({
                        my: "left top",
                        at: "left bottom",
                        of: dvJQuery(a.dom.mouseModeButton)
                    }), dvJQuery(document).on("click", function () {
                        dvJQuery(a.dom.subMenuMouseMode).hide()
                    }));
                    //AGjs__change for unique id
                    a.dom.mobileToolbarContainer && a.dom.subMenuMouseModeMobile && (dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile" +
                        sessionStorage.controlID).addClass("button_active"), dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile" + sessionStorage.controlID).removeClass("button_active"), "-60px" === dvJQuery(a.dom.mobileToolbarContainer).css("margin-right") ? (dvJQuery(a.dom.subMenuMouseModeMobile).show(), dvJQuery(a.dom.subMenuZoomModeMobile).hide(), dvJQuery(a.dom.mobileToolbarContainer).css("margin-right", "")) : "none" !== dvJQuery(a.dom.subMenuMouseModeMobile).css("display") ? (dvJQuery(a.dom.mobileToolbarContainer).css("margin-right", "-60px"),
                            dvJQuery(a.dom.subMenuZoomModeMobile).hide(), dvJQuery(a.dom.subMenuMouseModeMobile).hide(), dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile" + sessionStorage.controlID).removeClass("button_active"), dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile" + sessionStorage.controlID).removeClass("button_active")) : (dvJQuery(a.dom.subMenuMouseModeMobile).show(), dvJQuery(a.dom.subMenuZoomModeMobile).hide()), a.dom.updateButtons())
                },
                ZoomIN_Click: function (b) {
                    this.zoomInTimeout && (clearTimeout(this.zoomInTimeout),
                        this.zoomInTimeout = null);
                    this.zoomInActions ? this.zoomInActions++ : this.zoomInActions = 1;
                    this.zoomInTimeout = setTimeout(function () {
                        a.ZoomIN(a.zoomInActions);
                        a.zoomInActions = 0
                    }, 300)
                },
                ZoomOUT_Click: function (b) {
                    this.zoomOutTimeout && (clearTimeout(this.zoomOutTimeout), this.zoomOutTimeout = null);
                    this.zoomOutActions ? this.zoomOutActions++ : this.zoomOutActions = 1;
                    this.zoomOutTimeout = setTimeout(function () {
                        a.ZoomOUT(a.zoomOutActions);
                        a.zoomOutActions = 0
                    }, 300)
                },
                Rotate90_Click: function () {
                    this.rotate90Timeout && (clearTimeout(this.rotate90Timeout),
                        this.rotate90Timeout = null);
                    this.rotate90Actions ? this.rotate90Actions++ : this.rotate90Actions = 1;
                    this.rotate90Timeout = setTimeout(function () {
                        var b = a.rotate90Actions % 4;
                        0 != b % 4 && a.Rotate(b % 4, -1);
                        a.rotate90Actions = 0
                    }, 300)
                },
                Rotate270_Click: function () {
                    this.rotate270Timeout && (clearTimeout(this.rotate270Timeout), this.rotate270Timeout = null);
                    this.rotate270Actions ? this.rotate270Actions++ : this.rotate270Actions = 1;
                    this.rotate270Timeout = setTimeout(function () {
                        var b = a.rotate270Actions % 4;
                        0 != b % 4 && a.Rotate(4 - b % 4, -1);
                        a.rotate270Actions =
                            0
                    }, 300)
                },
                Print_Click: function () {
                    this.TogglePrintDialog(null, null)
                },
                LoadFromFile_Click: function () {
                    this.LoadFromFile(null, null)
                },
                LoadFromUriDialog_Click: function () {
                    this.ToggleLoadFromUriDialog()
                },
                SaveDialog_Click: function () {
                    this.ToggleSaveDialog(null, null)
                },
                TwainAcquisitionDialog_Click: function () {
                    this.TwainToggleAcquisitionDialog(null, null)
                },
                CopyDialog_Click: function (a) {
                    a.preventDefault();
                    this.CopySelectedTextToClipboard()
                },
                HighlightContextMenu_Click: function (a) {
                    a.preventDefault();
                    this.HighlightSelectedText()
                },
                StrikeoutContextMenu_Click: function (a) {
                    a.preventDefault();
                    this.StrikeoutSelectedText()
                },
                UnderlineContextMenu_Click: function (a) {
                    a.preventDefault();
                    this.UnderlineSelectedText()
                },
                LoadFromUri_Click: function () {
                    this.LoadFromUri(dvJQuery(this.dom.addressBar).val(), "", null, null)
                },
                ExitDrawingMode_Click: function () {
                    this.ExitAnnotationDrawingMode()
                },
                AnnotationActionEditButton_Click: function () {
                    this.Internal.Annotations.editSelectedAnnotation()
                },
                AnnotationActionRemoveButton_Click: function () {
                    let tempData = this.Internal.Annotations.selected[0].annotApp.properties;
                    //AGjs__change for delete when line delete have to delete circle too
                    this.Internal.Annotations.removeSelectedAnnotation(tempData);
                },
                AnnotationActionCommentButton_Click: function () {
                    this.ToggleCommentDialog("comment")
                },
                //Copy and paste by ctrl+c and ctrl+v
                CopyWithCtrlKey: function () {
                    this.dom.selectedAnnotation.annotApp.properties.copyannot = true;

                    this.AddAnnotInteractive(this.dom.selectedAnnotation.annotApp.properties.type, this.dom.selectedAnnotation.annotApp.properties, true, "", true);
                },
                //AGjs__changes fn for to CopyAnnotation
                CustomCopyAnnotationButton_Click: function () {

                    if (this.Internal.Annotations.selected.length > 1) {
                        //PasteWithCtrlKey = true;
                        customSelectedAnnotation = JSON.stringify(this.Internal.Annotations.selected);
                        tempObject = this;
                        this.CopyWithCtrlKey();
                    }
                    else {
                        customSelectedAnnotation = JSON.stringify(this.Internal.Annotations.selected);
                        this.dom.selectedAnnotation.annotApp.properties.copyannot = true;
                        this.AddAnnotInteractive(this.dom.selectedAnnotation.annotApp.properties.type, this.dom.selectedAnnotation.annotApp.properties, true, "");
                    }
                },
                CommentAnswer_Click: function (a) {
                    this.ToggleCommentDialog("answer", a)
                },
                CommentProperties_Click: function (a) {
                    this.ToggleCommentDialog("edit", a)
                },
                ZoomWidth_Click: function () {
                    this.SetZoomMode(3)
                },
                ZoomFit_Click: function () {
                    this.SetZoomMode(2)
                },
                Fullscreen_Click: function () {
                    this.ToggleFullscreen()
                },
                PanMouseMode_Click: function () {
                    this.SetMouseMode(0)
                },
                SelectMouseMode_Click: function () {
                    this.SetMouseMode(3)
                },
                MarqueeZoomMouseMode_Click: function () {
                    this.SetMouseMode(4)
                },
                AddRubberStampAnnot_Click: function () {
                    this.AddAnnotInteractive(0)
                },
                AddRectangleAnnot_Click: function () {
                    this.AddAnnotInteractive(1)
                },
                AddRectangleHighlighterAnnot_Click: function () {
                    this.AddAnnotInteractive(2)
                },
                AddLineAnnot_Click: function () {
                    this.AddAnnotInteractive(3)
                },
                AddConnectedLineAnnot_Click: function () {
                    this.AddAnnotInteractive(5)
                },
                AddLineArrowAnnot_Click: function () {
                    this.AddAnnotInteractive(4)
                },
                AddEllipseAnnot_Click: function () {
                    this.AddAnnotInteractive(6)
                },
                AddTextAnnot_Click: function () {
                    this.AddAnnotInteractive(8)
                },
                AddStickyNoteAnnot_Click: function () {
                    this.AddAnnotInteractive(9)
                },
                AddFreeHandAnnot_Click: function () {
                    this.AddAnnotInteractive(10)
                },
                AddFreeHandHighlighterAnnot_Click: function () {
                    this.AddAnnotInteractive(11)
                },
                AddLinkAnnot_Click: function () {
                    this.AddAnnotInteractive(13)
                },
                AddRulerAnnot_Click: function () {
                    this.AddAnnotInteractive(15)
                },
                AddPolyRulerAnnot_Click: function () {
                    this.AddAnnotInteractive(16)
                },
                ClosePanelButton_Click: function () {
                    this.SetSnapinsPanelVisibility(!1)
                },
                SearchSubmit_Click: function () {
                    var a = this.dom.searchValueInput.value,
                        b = this.dom.searchWholeWordInput.checked,
                        c = this.dom.searchCaseSensitiveInput.checked,
                        e = this.dom.searchAnyWordInput.checked,
                        f = dvJQuery(this.dom.searchPageSelect).filter(":checked").val();
                    this.SubmitSearch(a, b, c, e, f)
                },
                TwainAcquisitionSubmit_Click: function () {
                    if (a.callbacks.onTwainAcquisitionDialogAcquireButtonClick) a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();
                    var b = dvJQuery(this.dom.twainAcquisitionSourceNameSelect).find("option:selected").val();
                    //AGjs__change for unique id
                    0 == dvJQuery(a.dom.twainAcquisitionPanelForm).find("input[name='twainAcquisitionDestinationInput" +
                        sessionStorage.controlID + "']:checked").val() ? this.TwainAcquireToNewDocument(b) : this.TwainAcquireToCurrentDocument(b, dvJQuery(a.dom.twainAcquisitionPanelForm).find("select[name='twainAcquisitionDestinationAppendSelect" + sessionStorage.controlID + "']").find("option:selected").val())
                },
                DownloadTwainServiceSetup_Click: function () {
                    this.DownloadTwainServiceSetup();
                    dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")
                },
                SearchClearResult_Click: function () {
                    this.ClearSearch()
                },
                CommentHeader_Click: function (b) {
                    a.Internal.Annotations.selectAnnotationCommentById(b,
                        !1);
                    if (null != a.cache.AnnotsComments)
                        for (var d = 0; d < a.cache.AnnotsComments.length; d++) {
                            var c = a.cache.AnnotsComments[d];
                            if (c.annotApp.id === b) {
                                var e = c.annotApp.pageNo;
                                a.SelectPage(e, function () {
                                    var b = a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(c.annotApp, !0);
                                    null != b && (b.visible && a.Internal.Annotations.selectById(b.id), a.EnsurePageRegionVisibility(e, b.bbox.Left, b.bbox.Top, b.bbox.Width, b.bbox.Height))
                                });
                                break
                            }
                        }
                },
                CommentsSearchClearResult_Click: function () {
                    this.CommentsClearSearch()
                },
                CommentsSearchSubmit_Click: function () {
                    this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)
                },
                CommentsExpandCollapseAll_Click: function () {
                    this.CommentsExpandCollapseAll()
                },
                CommentsSortBySelect_Change: function () {
                    this.refreshCommentsPanel()
                },
                DigiSignSubmit_Click: function () {
                    a.Internal.DigiSign.showSignaturePropertiesUI()
                },
                DigiSignSnapIn_RefreshSignatures: function () {
                    var b = {
                        url: a.appControllerPath + "/getsignatures" + (a.useIdInRoot ? "/1" : ""),
                        data: JSON.stringify({
                            sessionID: a.ajax.sessionID,
                            contextID: a.ajax.contextID
                        }),
                        success: function (b) {
                            if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && b.status === DocuViewareAPI.Status.OK) {
                                if (a.dom.signaturesContainer &&
                                    a.dom.signaturesContainer.hasChildNodes())
                                    for (var d = a.dom.signaturesContainer.children.length - 1; 0 <= d; d--) a.dom.signaturesContainer.removeChild(a.dom.signaturesContainer.children[d]);
                                b.signatures && a.Internal.DigiSign.generateSignaturesMarkup(b.signatures)
                            }
                        },
                        error: function (b) {
                            a.ajax.HandleError(b)
                        }
                    };
                    a.ajax.PostAjaxRequestForDocuViewareAction(b, !1, !0)
                },
                SnapInButton_Click: function (a) {
                    this.SelectSnapIn(a, !1)
                },
                IsTwainSupportAvailable: function () {
                    return this.isWindows && 5.1 < this.windowsVersion
                },
                ToggleSinglePageViewMode: function () {
                    return this.ajax.PostBaseRequest({
                        url: a.appControllerPath +
                            "/singlepageviewmode" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            enabled: this.serverCtx.singlePageView
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1)
                        }
                    }, !0)
                },
                RegisterOnAnnotationSelectedStateChanged: function (a) {
                    this.callbacks.onAnnotationSelectedStateChanged = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationAdded: function (a) {
                    this.callbacks.onAnnotationAdded = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationEdited: function (a) {
                    this.callbacks.onAnnotationEdited =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationDeleted: function (a) {
                    this.callbacks.onAnnotationDeleted = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnCommentAdded: function (a) {
                    this.callbacks.onCommentAdded = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnCommentEdited: function (a) {
                    this.callbacks.onCommentEdited = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnCommentDeleted: function (a) {
                    this.callbacks.onCommentDeleted = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnFormFieldChanged: function (a) {
                    this.callbacks.onFormFieldChanged =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnPageChanged: function (a) {
                    this.callbacks.onPageChanged = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnZoomChanged: function (a) {
                    this.callbacks.onZoomChanged = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnRotationChanged: function (a) {
                    this.callbacks.onRotationChanged = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnNewDocumentLoaded: function (a) {
                    this.callbacks.onNewDocumentLoaded = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnDocumentClosed: function (a) {
                    this.callbacks.onDocumentClosed =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnDocumentPrinted: function (a) {
                    this.callbacks.onDocumentPrinted = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnDocumentSaved: function (a) {
                    this.callbacks.onDocumentSaved = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnTwainAcquisitionDialogAcquireButtonClick: function (a) {
                    this.callbacks.onTwainAcquisitionDialogAcquireButtonClick = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnTwainAcquisitionDialogCancelButtonClick: function (a) {
                    this.callbacks.onTwainAcquisitionDialogCancelButtonClick =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnThumbnailsOrderChanged: function (a) {
                    this.callbacks.onThumbnailsOrderChanged = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnTextSelected: function (a) {
                    this.callbacks.onTextSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnTextAnnotated: function (a) {
                    this.callbacks.onTextAnnotated = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAreaSelected: function (a) {
                    this.callbacks.onAreaSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnFullscreenModeChanged: function (a) {
                    this.callbacks.onFullscreenModeChanged =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnSearchInvoked: function (a) {
                    this.callbacks.onSearchInvoked = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationMouseEnter: function (a) {
                    this.callbacks.onAnnotationMouseEnter = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationMouseLeave: function (a) {
                    this.callbacks.onAnnotationMouseLeave = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnThumbnailsSnapInSelected: function (a) {
                    this.callbacks.onThumbnailsSnapInSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnBookmarksSnapInSelected: function (a) {
                    this.callbacks.onBookmarksSnapInSelected =
                        a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnSearchSnapInSelected: function (a) {
                    this.callbacks.onSearchSnapInSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnAnnotationsSnapInSelected: function (a) {
                    this.callbacks.onAnnotationsSnapInSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnCommentsSnapInSelected: function (a) {
                    this.callbacks.onCommentsSnapInSelected = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnSnapInPanelResized: function (a) {
                    this.callbacks.onSnapInPanelResized = a;
                    return DocuViewareAPI.Status.OK
                },
                RegisterOnSnapInPanelToggle: function (a) {
                    this.callbacks.onSnapInPanelToggle = a;
                    return DocuViewareAPI.Status.OK
                },
                PostCustomServerAction: function (a, b, c, e, f) {
                    return this.ajax.PostCustomServerAction(a, b, c, e, f)
                },
                LoadFromByteArray: function (b, c, e, f, h) {
                    if (this.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                    this.callbacks.onFileOpenError = h;
                    this.callbacks.onFileOpenSuccess = f;
                    a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b, c, e), 0);
                    return DocuViewareAPI.Status.OK
                },
                LoadFromFile: function (a,
                    b) {
                    if (this.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                    this.SetLoadFromUriDialogVisibility(!1);
                    this.callbacks.onFileOpenError = b;
                    this.callbacks.onFileOpenSuccess = a;
                    dvJQuery(this.dom.openfile).click();
                    return DocuViewareAPI.Status.OK
                },
                GetDocumentType: function () {
                    return this.serverCtx ? this.serverCtx.documentType : 0
                },
                GetDocumentFormat: function () {
                    return this.serverCtx ? this.serverCtx.documentFormat : 0
                },
                GetDocumentName: function () {
                    return this.serverCtx ? this.serverCtx.fileName : ""
                },
                GetPageCount: function () {
                    return this.serverCtx ?
                        this.serverCtx.pageCount : 0
                },
                GetCurrentPage: function () {
                    return this.serverCtx ? this.serverCtx.selectedPage : 0
                },
                GetLastPageNoRequest: function () {
                    return this.ajax.latestSelectedPage
                },
                GetDisplayedArea: function () {
                    if (this.serverCtx) {
                        var b = a.dom.viewerArea.getBoundingClientRect(),
                            c = this.GetCurrentPage(),
                            e = a.Internal.Pages.getPageWidth(c),
                            f = a.Internal.Pages.getPageHeight(c),
                            h = this.Internal.Coordinates.clientToDocument(c, b.left, b.top, 1),
                            k = this.Internal.Coordinates.clientToDocument(c, b.left + b.width, b.top, 1),
                            l =
                                this.Internal.Coordinates.clientToDocument(c, b.left + b.width, b.top + b.height, 1);
                        b = this.Internal.Coordinates.clientToDocument(c, b.left, b.top + b.height, 1);
                        c = Math.max(Math.min(h.x, Math.min(k.x, Math.min(l.x, b.x))), 0);
                        var q = Math.max(Math.min(h.y, Math.min(k.y, Math.min(l.y, b.y))), 0);
                        return {
                            left: c,
                            top: q,
                            width: Math.min(Math.max(h.x, Math.max(k.x, Math.max(l.x, b.x))), e) - c,
                            height: Math.min(Math.max(h.y, Math.max(k.y, Math.max(l.y, b.y))), f) - q
                        }
                    }
                    return {
                        left: 0,
                        top: 0,
                        width: 0,
                        height: 0
                    }
                },
                GetSelectionAreaCoordinates: function () {
                    return this.serverCtx ?
                        this.Internal.Selection.getSelectionAreaCoordinates() : {
                            left: 0,
                            top: 0,
                            width: 0,
                            height: 0
                        }
                },
                SetSelectionAreaCoordinates: function (a) {
                    return this.serverCtx ? this.Internal.Selection.setSelectionAreaCoordinates(a) : DocuViewareAPI.Status.GenericError
                },
                GetViewerScrollLeft: function () {
                    return this.Internal.Coordinates.getViewerScrollLeft()
                },
                GetViewerScrollTop: function () {
                    return this.Internal.Coordinates.getViewerScrollTop()
                },
                SetViewerScrollLeft: function (a) {
                    return this.Internal.Coordinates.setViewerScrollLeft(a)
                },
                SetViewerScrollTop: function (a) {
                    return this.Internal.Coordinates.setViewerScrollTop(a)
                },
                ClearSelectionArea: function () {
                    return this.serverCtx ? (this.Internal.Selection.clearSelectionArea(), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                },
                GetSelectedThumbnailItems: function () {
                    return this.serverCtx ? this.Internal.Thumbnails.getSelectedThumbnails(!0) : null
                },
                SetThumbnailSelected: function (a, b) {
                    return this.serverCtx ? this.Internal.Thumbnails.setThumbnailSelected(a, b) : DocuViewareAPI.Status.GenericError
                },
                GetCurrentZoom: function () {
                    return this.serverCtx ? this.serverCtx.zoom : 0
                },
                SetCurrentZoom: function (b) {
                    return a.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/zoomset" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            zoom: b
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1)
                        }
                    }, !1)
                },
                GetCurrentViewRotation: function () {
                    return this.serverCtx ? this.serverCtx.viewRotation : 0
                },
                GetCurrentPageRotation: function () {
                    return this.serverCtx ? this.serverCtx.pageRotation : 0
                },
                GetCurrentPageRenderRotation: function () {
                    return this.serverCtx ?
                        this.serverCtx.renderRotation : 0
                },
                ToggleLoadFromUriDialog: function () {
                    if (this.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                    this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible);
                    return DocuViewareAPI.Status.OK
                },
                ToggleSaveDialog: function (b, c) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    a.DisplayDialogForm(dvJQuery(a.dom.saveDialog), a.Localize("_title_save_dialog"), null, function () {
                        //AGjs__change for unique id
                        dvJQuery("[name='savePageRangeInput" + sessionStorage.controlID + "']").val("");
                        var b = a.GetSelectedThumbnailItems();
                        1 == b.length && b[0] === a.GetCurrentPage() ? dvJQuery("[name='inputSelectedPages" + sessionStorage.controlID + "'][value=1]:radio").prop("checked", !0).trigger("change") : 0 < b.length ? (dvJQuery("[name='inputSelectedPages" + sessionStorage.controlID + "'][value=2]:radio").prop("checked", !0).trigger("change"), dvJQuery("[name='savePageRangeInput" + sessionStorage.controlID + "']").val(b.join())) : dvJQuery("[name='inputSelectedPages" + sessionStorage.controlID + "'][value=0]:radio").prop("checked", !0).trigger("change");
                        dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input" +
                            sessionStorage.controlID + "']").val(a.serverCtx.fileName)
                    }, null, [{
                        text: a.Localize("_label_cancel"),
                        click: function () {
                            dvJQuery(a.dom.saveDialog).dvDialog("close")
                        }
                    }, {
                        text: a.Localize("_label_save"),
                        "class": "btn-valid",
                        click: function () {
                            //AGjs__change for unique id
                            var d = dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input" + sessionStorage.controlID + "']").val(),
                                e = dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select" + sessionStorage.controlID + "']").find("option:selected").val(),
                                g = dvJQuery(a.dom.saveDialog).find("input[name='savePageRangeInput" + sessionStorage.controlID +
                                    "']").val();
                            a.Save(d, e, g, b, c) == DocuViewareAPI.Status.OK && dvJQuery(a.dom.saveDialog).dvDialog("close")
                        }
                    }]);
                    this.dom.updateButtons();
                    return DocuViewareAPI.Status.OK
                },
                TwainToggleAcquisitionDialog: function (b, c) {
                    if (this.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                    a.DisplayDialogForm(dvJQuery(a.dom.twainAcquisitionDialog), a.Localize("button__twain_acquisition"), null, function () {
                        a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();
                        dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox" +
                            sessionStorage.controlID).css("opacity", .3).hide();
                        dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled", !0);
                        dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");
                        var b = function (b) {
                            a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(b.twainStatus, b.message);
                            dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox" + sessionStorage.controlID).css("opacity", 1).show();
                            dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",
                                !0);
                            dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")
                        };
                        a.GetTwainAcquisitionServiceInfo(function (d) {
                            parseInt(d.ServiceVersionResult) >= a.twainServiceSupportedVersion ? a.GetTwainAcquisitionSources(function (b) {
                                if (b.GetTwainSourcesResult && b.GetTwainSourcesResult.sources.length) {
                                    dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled", !1);
                                    dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",
                                        1);
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect" + sessionStorage.controlID).find("option").remove().end();
                                    if (b.GetTwainSourcesResult.sources && 0 < b.GetTwainSourcesResult.sources.length) {
                                        for (var d = 0; d < b.GetTwainSourcesResult.sources.length; d++) {
                                            var c = dvJQuery("<option>");
                                            c.attr("value", b.GetTwainSourcesResult.sources[d].sourceName);
                                            c.html(b.GetTwainSourcesResult.sources[d].sourceName);
                                            (!b.GetTwainSourcesResult.defaultSource && 1 == d || b.GetTwainSourcesResult.defaultSource && b.GetTwainSourcesResult.defaultSource ==
                                                b.GetTwainSourcesResult.sources[d].sourceName) && c.prop("selected", !0);
                                            dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect" + sessionStorage.controlID).append(c)
                                        }
                                        dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect" + sessionStorage.controlID).dvSelectmenu && dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect" + sessionStorage.controlID).dvSelectmenu("destroy");
                                        dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect" + sessionStorage.controlID).dvSelectmenu()
                                    }
                                    a.serverCtx.enablePageAppending ?
                                        dvJQuery("[name='inputTwainAcquisitionDestination" + sessionStorage.controlID + "'][value=1]:radio").prop("checked", !0).trigger("change") : (dvJQuery("[name='inputTwainAcquisitionDestination" + sessionStorage.controlID + "'][value=0]:radio").prop("checked", !0).trigger("change"), dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("*").prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity", .3));
                                    dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox" + sessionStorage.controlID).css("opacity",
                                        1).hide();
                                    dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled", !1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")
                                } else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING, a.Localize("_twain_connector_no_sources")), dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox" + sessionStorage.controlID).css("opacity", 1).show(), dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")
                            },
                                b) : (d = a.Localize("_twain_connector_bad_version"), a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION, d), dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled", !0), dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox" + sessionStorage.controlID).css("opacity", 1).show(), dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))
                        }, b) != DocuViewareAPI.Status.OK && dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")
                    },
                        null, [{
                            text: a.Localize("_label_cancel"),
                            click: function () {
                                if (a.callbacks.onTwainAcquisitionDialogCancelButtonClick) a.callbacks.onTwainAcquisitionDialogCancelButtonClick();
                                dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")
                            }
                        }, {
                            id: "twainAcquisitionDialogAcquireButton" + sessionStorage.controlID,
                            text: a.Localize("button__twain_acquire"),
                            "class": "btn-valid",
                            click: function () {
                                var b = dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect" + sessionStorage.controlID + "']").find("option:selected").val();
                                0 == dvJQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination" + sessionStorage.controlID + "']:checked").val() ? a.TwainAcquireToNewDocument(b) == DocuViewareAPI.Status.OK && dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close") : a.TwainAcquireToCurrentDocument(b, dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect" + sessionStorage.controlID + "']").find("option:selected").val()) == DocuViewareAPI.Status.OK && dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")
                            }
                        }]);
                    this.dom.updateButtons();
                    return DocuViewareAPI.Status.OK
                },
                TwainAcquireToNewDocument: function (b) {
                    return a.Internal.Twain.acquire(b, function (b) {
                        a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData, "image/tiff", b.fileName), 0)
                    })
                },
                TwainAcquireToCurrentDocument: function (b, c) {
                    return !c || 0 > c || 3 < c || !a.serverCtx.enablePageAppending ? DocuViewareAPI.Status.GenericError : a.Internal.Twain.acquire(b, function (b) {
                        a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData, "image/tiff",
                            b.fileName), c)
                    })
                },
                TwainSetConfig: function (b, c, e, f, h, k, l) {
                    "boolean" === typeof b && (a.twainSourceConfig.enableCustomConfiguration = b);
                    "boolean" === typeof c && (a.twainSourceConfig.selectFeeder = c);
                    Number.isInteger(e) && (a.twainSourceConfig.resolution = e);
                    Number.isInteger(f) && (a.twainSourceConfig.bitDepth = f);
                    "boolean" === typeof h && (a.twainSourceConfig.enableDuplex = h);
                    "boolean" === typeof k && (a.twainSourceConfig.hideUI = k);
                    if (l)
                        if (Array.isArray(l)) {
                            b = [];
                            for (c = 0; c < l.length; c++) l[c].hasOwnProperty("capability") && l[c].hasOwnProperty("value") &&
                                Number.isInteger(l[c].capability) && "string" === typeof l[c].value && b.push(l[c]);
                            a.twainSourceConfig.extConfig = 0 !== b.length ? b : null
                        } else a.twainSourceConfig.extConfig = null;
                    else a.twainSourceConfig.extConfig = null;
                    return DocuViewareAPI.Status.OK
                },
                ToggleCommentDialog: function (b, c) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    "comment" === b ? a.DisplayDialogForm(dvJQuery(a.dom.commentDialog), a.Localize("_title_comment_dialog"), null, function () {
                        var b = JSON.parse(sessionStorage.userProfile).userName;
                        dvJQuery(a.dom.commentsAuthorInput).val(b);
                        dvJQuery(a.dom.commentsAuthorInput).attr("disabled",true);

                        dvJQuery(a.dom.commentAnswerBox).hide();
                        dvJQuery(a.dom.commentContentBox).show();
                        dvJQuery(a.dom.commentStatusBox).hide();
                        //AG_js changes
                        //not all null comment creation
                        //AG_js changes
                        //not all null comment creation
                        $("#comment_error").remove();
                        $("#author_error").remove();
                        dvJQuery(a.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                        dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");
          

                        dvJQuery(a.dom.commentMessageInput).removeClass("annot_textArea").addClass("annot_textArea");
                        dvJQuery(a.dom.commentsAuthorInput).removeClass("annot_textArea").addClass("annot_commentinput");
                        //End
                        dvJQuery(a.dom.commentMessageInput).val("").focus()
                    }, null, [{
                        id: "commentDialogCancelButton" + sessionStorage.controlID,
                        text: a.Localize("_label_cancel"),
                        click: function () {
                            //AG_js changes
                            //not all null comment creation
                            $("#comment_error").remove();
                            $("#author_error").remove();
                            dvJQuery(a.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                            dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");
                            dvJQuery(a.dom.commentMessageInput).removeClass("annot_textArea");
                            dvJQuery(a.dom.commentsAuthorInput).removeClass("annot_commentinput");

                            //end
                            dvJQuery(a.dom.commentDialog).dvDialog("close")
                        }
                    }, {
                        id: "commentDialogPublishButton" + sessionStorage.controlID,
                        text: a.Localize("_label_publish"),
                        "class": "btn-valid",
                            click: function ()
                            {
                            var authorVal = dvJQuery(a.dom.commentsAuthorInput).val();
                            var commentVal = dvJQuery(a.dom.commentMessageInput).val();
                            if (authorVal && authorVal != "" && commentVal && commentVal != "")
                            {
                                var b = dvJQuery(a.dom.commentsAuthorInput).val(),
                                    d = a.Internal.Annotations.defaultProperties[2048];
                                d.previousGuid = a.dom.selectedAnnotation.annotApp.id;
                                d.text = dvJQuery(a.dom.commentMessageInput).val();

                                a.ajax.PostBaseRequest({
                                    url: a.appControllerPath + "/newannotationcomment" + (a.useIdInRoot ? "/1" : ""),
                                    data: {
                                        annots: [{
                                            extProperties: {
                                                author: b
                                            },
                                            properties: d,
                                            ownerAnnotType: a.dom.selectedAnnotation.annotApp.properties.type,
                                            pageNo: a.dom.selectedAnnotation.annotApp.pageNo
                                        }]
                                    },
                                    success: function (b) {
                                        if ((b =
                                            "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annotApp && b.annotApp.status === DocuViewareAPI.Status.OK) {
                                            if (a.Internal.Annotations.addAnnotationComment(b), a.refreshCommentsPanel(), a.SelectSnapIn("comments", !0), a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id, !0), a.callbacks.onCommentAdded) a.callbacks.onCommentAdded({
                                                id: b.annotApp.id,
                                                pageNo: b.annotApp.pageNo
                                            })
                                        } else a.ajax.HandleError(b)
                                    }
                                }, !1);
                                dvJQuery(a.dom.commentDialog).dvDialog("close");
                            }
                             //AG_js changes
                            //not all null comment creation
                            else
                            {
                                if (commentVal === "" || commentVal === null)
                                {
                                    dvJQuery(a.dom.commentMessageInput).css("border", "1px solid red");
                                    $("#comment_error").remove();
                                    dvJQuery(a.dom.commentMessageInput).after('<div id="comment_error">Message should not be empty.</div>');
                                }
                                if (authorVal === "" || authorVal === null)
                                {
                                    dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid red");
                                    $("#author_error").remove();
                                    dvJQuery(a.dom.commentsAuthorInput).after('<div  id="author_error">Author should not be empty.</div>');
                                }
                            }    
                            //End
                        }
                    }]) : "edit" === b ? a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),
                        a.Localize("_title_comment_dialog_edit"), null,
                        function () {
                            dvJQuery(a.dom.commentAnswerBox).hide();
                            dvJQuery(a.dom.commentContentBox).show();
                            dvJQuery(a.dom.commentStatusBox).show();
                            //AG_js changes
                            //not all null comment creation
                            $("#comment_error").remove();
                            $("#author_error").remove();
                            dvJQuery(a.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                            dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");


                            dvJQuery(a.dom.commentMessageInput).removeClass("annot_textArea").addClass("annot_textArea");
                            dvJQuery(a.dom.commentsAuthorInput).removeClass("annot_textArea").addClass("annot_commentinput");
                        //End
                            for (var b = 0; b < a.cache.AnnotsComments.length; b++) {
                                var d = a.cache.AnnotsComments[b];
                                if (d.annotApp.id === c) {
                                    dvJQuery(a.dom.commentMessageInput).val(d.annotApp.properties.text);
                                    dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect" + sessionStorage.controlID + "']").find("option[value='" + d.annotApp.properties.reviewStatus + "']").prop("selected",
                                        !0);
                                    dvJQuery(a.dom.commentsAuthorInput).val(d.annotApp.author);
                                    d.annotApp.properties.allowReview ? dvJQuery(a.dom.commentStatusSelect).attr("disabled", !1) : dvJQuery(a.dom.commentStatusSelect).attr("disabled", !0);
                                    d.annotApp.canDelete ? dvJQuery(":button:contains('" + a.Localize("_label_delete") + "')").prop("disabled", !1).removeClass("ui-state-disabled") : dvJQuery(":button:contains('" + a.Localize("_label_delete") + "')").prop("disabled", !0).addClass("ui-state-disabled");
                                    break
                                }
                            }
                            dvJQuery(a.dom.commentMessageInput).focus()
                        },
                        null, [{
                            id: "commentDialogCancelButton" + sessionStorage.controlID,
                            text: a.Localize("_label_cancel"),
                            click: function () {
                                $("#comment_error").remove();
                                $("#author_error").remove();
                                dvJQuery(a.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                                dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");
                                dvJQuery(a.dom.commentMessageInput).removeClass("annot_textArea");
                                dvJQuery(a.dom.commentsAuthorInput).removeClass("annot_commentinput");
                                dvJQuery(a.dom.commentDialog).dvDialog("close");
                            }
                        }, {
                            id: "commentDialogDeleteButton" + sessionStorage.controlID,
                            text: a.Localize("_label_delete"),
                            click: function () {
                                a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm), a.Localize("_title_confirm_comment_removal"), null, function () {
                                    dvJQuery(a.dom.commentDialogModalOverlay).show();
                                    dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_comment_removal"))
                                },
                                    function () {
                                        dvJQuery(a.dom.commentDialogModalOverlay).hide()
                                    }, [{
                                        text: a.Localize("_label_no"),
                                        click: function () {
                                            dvJQuery(a.dom.commentDialogModalOverlay).hide();
                                            dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");
                                            dvJQuery(a.dom.modalOverlayArea).show()
                                        }
                                    }, {
                                        text: a.Localize("_label_yes"),
                                        "class": "btn-valid",
                                        click: function () {
                                            if (null != a.cache.AnnotsComments)
                                                for (var b = a.GetCurrentPage(), d = 0; d < a.cache.AnnotsComments.length; d++)
                                                    if (a.cache.AnnotsComments[d].annotApp.pageNo === b && a.cache.AnnotsComments[d].annotApp.id ===
                                                        c) {
                                                        a.ajax.PostAjaxRequestForDocuViewareAction({
                                                            url: a.appControllerPath + "/annotupdate" + (a.useIdInRoot ? "/1" : ""),
                                                            async: !0,
                                                            data: JSON.stringify({
                                                                annot: {
                                                                    properties: a.cache.AnnotsComments[d].annotApp.properties,
                                                                    "delete": !0,
                                                                    pageNo: a.cache.AnnotsComments[d].annotApp.pageNo,
                                                                    id: a.cache.AnnotsComments[d].annotApp.id
                                                                },
                                                                sessionID: a.ajax.sessionID,
                                                                contextID: a.ajax.contextID
                                                            }),
                                                            success: function (b) {
                                                                if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots)
                                                                    for (var d = 0; d < b.annots.length; d++) {
                                                                        if (null != b.annots[d].deletedAnnotsCommentId)
                                                                            for (var e =
                                                                                0; e < b.annots[d].deletedAnnotsCommentId.length; e++) a.Internal.Annotations.deleteAnnotationComment(b.annots[d].deletedAnnotsCommentId[e], !1);
                                                                        a.Internal.Annotations.deleteAnnotationComment(c, !0);
                                                                        if (a.callbacks.onCommentDeleted) a.callbacks.onCommentDeleted({
                                                                            id: b.annots[d].id,
                                                                            pageNo: b.annots[d].pageNo
                                                                        })
                                                                    } else a.ajax.HandleError(b)
                                                            },
                                                            error: function (b) {
                                                                a.ajax.HandleError(b)
                                                            }
                                                        });
                                                        break
                                                    } dvJQuery(a.dom.commentDialogModalOverlay).hide();
                                            dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");
                                            dvJQuery(a.dom.commentDialog).dvDialog("close")
                                        }
                                    }])
                            }
                        },
                        {
                            id: "commentDialogPublishButton" + sessionStorage.controlID,
                            text: a.Localize("_label_save"),
                            "class": "btn-valid",
                            click: function ()
                            {
                                var authorVal = dvJQuery(a.dom.commentsAuthorInput).val();
                                var commentVal = dvJQuery(a.dom.commentMessageInput).val();
                                if (authorVal && authorVal != "" && commentVal && commentVal != "") {
                                var b = dvJQuery(a.dom.commentMessageInput).val(),
                                    d = dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect" + sessionStorage.controlID + "']").find("option:selected").val(),
                                    e = dvJQuery(a.dom.commentsAuthorInput).val();
                                if (null != a.cache.AnnotsComments) {
                                    for (var g = a.GetCurrentPage(), f = null, h = 0; h < a.cache.AnnotsComments.length; h++)
                                        if (a.cache.AnnotsComments[h].annotApp.pageNo === g && a.cache.AnnotsComments[h].annotApp.id ===
                                            c) {
                                            f = a.cache.AnnotsComments[h].annotApp.properties;
                                            f.text = b;
                                            f.reviewStatus = parseInt(d);
                                            break;
                                        } a.ajax.PostAjaxRequestForDocuViewareAction({
                                            url: a.appControllerPath + "/annotupdate" + (a.useIdInRoot ? "/1" : ""),
                                            async: !0,
                                            data: JSON.stringify({
                                                annot: {
                                                    extProperties: {
                                                        author: e
                                                    },
                                                    properties: f,
                                                    pageNo: g,
                                                    id: c
                                                },
                                                sessionID: a.ajax.sessionID,
                                                contextID: a.ajax.contextID
                                            }),
                                            success: function (b) {
                                                if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots)
                                                    for (var d = 0; d < b.annots.length; d++) {
                                                        for (var e = 0; e < a.cache.AnnotsComments.length; e++)
                                                            if (a.cache.AnnotsComments[e].annotApp.pageNo ===
                                                                g && a.cache.AnnotsComments[e].annotApp.id === c) {
                                                                a.cache.AnnotsComments[e].annotApp = b.annots[d].annotApp;
                                                                break
                                                            } a.refreshCommentsPanel();
                                                        a.Internal.Annotations.selectAnnotationCommentById(b.annots[d].annotApp.id, !0);
                                                        if (a.callbacks.onCommentEdited) a.callbacks.onCommentEdited({
                                                            id: b.annots[d].annotApp.id,
                                                            pageNo: b.annots[d].annotApp.pageNo
                                                        })
                                                    } else a.ajax.HandleError(b)
                                            },
                                            error: function (b) {
                                                a.ajax.HandleError(b)
                                            }
                                        })
                                }
                                dvJQuery(a.dom.commentDialog).dvDialog("close")
                            }
                                //AG_js changes
                            //not all null comment creation
                            else
                            {
                                    if(commentVal === "" || commentVal === null)
                                {
                        dvJQuery(a.dom.commentMessageInput).css("border", "1px solid red");
                        $("#comment_error").remove();
                        dvJQuery(a.dom.commentMessageInput).after('<div id="comment_error">Message should not be empty.</div>');
                    }
                    if (authorVal === "" || authorVal === null) {
                        dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid red");
                        $("#author_error").remove();
                        dvJQuery(a.dom.commentsAuthorInput).after('<div  id="author_error">Author should not be empty.</div>');
                    }
                }
                            //End
                            }
                        }
                        ]) : "answer" === b && a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),
                            a.Localize("_title_comment_dialog_answer"), null,
                            function () {
                                var b = JSON.parse(sessionStorage.userProfile).userName;

                                dvJQuery(a.dom.commentsAuthorInput).val(b);
                                dvJQuery(a.dom.commentContentBox).hide();
                                dvJQuery(a.dom.commentAnswerBox).show();
                                dvJQuery(a.dom.commentStatusBox).hide();
                                dvJQuery(a.dom.commentAnswerInput).val("").focus()
                            }, null, [{
                                id: "commentDialogCancelButton" + sessionStorage.controlID,
                                text: a.Localize("_label_cancel"),
                                click: function () {
                                    dvJQuery(a.dom.commentDialog).dvDialog("close")
                                }
                            },
                            {
                                id: "commentDialogPublishButton" + sessionStorage.controlID,
                                text: a.Localize("_label_publish"),
                                "class": "btn-valid",
                                click: function () {
                                    for (var b = 1, d = -1, e = 0; e < a.cache.AnnotsComments.length; e++) a.cache.AnnotsComments[e].annotApp.id === c && (b = a.cache.AnnotsComments[e].annotApp.pageNo, d = a.cache.AnnotsComments[e].ownerAnnotType);
                                    e = dvJQuery(a.dom.commentsAuthorInput).val();
                                    var g = a.Internal.Annotations.defaultProperties[2048];
                                    g.text = dvJQuery(a.dom.commentAnswerInput).val();
                                    g.pageNo = b;
                                    g.previousGuid = c;
                                    a.ajax.PostBaseRequest({
                                        url: a.appControllerPath +
                                            "/newannotationcomment" + (a.useIdInRoot ? "/1" : ""),
                                        data: {
                                            annots: [{
                                                extProperties: {
                                                    author: e
                                                },
                                                properties: g,
                                                ownerAnnotType: d,
                                                pageNo: b
                                            }]
                                        },
                                        success: function (b) {
                                            if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annotApp && b.annotApp.status === DocuViewareAPI.Status.OK) {
                                                if (a.Internal.Annotations.addAnnotationComment(b), a.refreshCommentsPanel(), a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id, !0), a.callbacks.onCommentAdded) a.callbacks.onCommentAdded({
                                                    id: b.annotApp.id,
                                                    pageNo: b.annotApp.pageNo
                                                })
                                            } else a.ajax.HandleError(b)
                                        }
                                    },
                                        !1);
                                    dvJQuery(a.dom.commentDialog).dvDialog("close")
                                }
                            }
                            ]);
                    return DocuViewareAPI.Status.OK
                },
                TogglePrintDialog: function (b, c) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    a.DisplayDialogForm(dvJQuery(a.dom.printDialog), a.Localize("_title_print_dialog"), null, function () {
                        dvJQuery("[name='printPageRangeInput" + sessionStorage.controlID + "']").val("");
                        var b = a.GetSelectedThumbnailItems();
                        1 == b.length && b[0] === a.GetCurrentPage() ? dvJQuery("[name='inputPrintSelectedPages" + sessionStorage.controlID + "'][value=1]:radio").prop("checked",
                            !0).trigger("change") : 0 < b.length ? (dvJQuery("[name='inputPrintSelectedPages" + sessionStorage.controlID + "'][value=2]:radio").prop("checked", !0).trigger("change"), dvJQuery("[name='printPageRangeInput" + sessionStorage.controlID + "']").val(b.join())) : dvJQuery("[name='inputPrintSelectedPages" + sessionStorage.controlID + "'][value=0]:radio").prop("checked", !0).trigger("change")
                    }, null, [{
                        id: "printDialogCancelButton" + sessionStorage.controlID,
                        text: a.Localize("_label_cancel"),
                        click: function () {
                            if (a.Internal.Print.isPrinting) {
                                a.Internal.Print.isPrinting = !1;
                                dvJQuery(a.dom.printProgressbarDiv).remove();
                                var b = document.getElementById("printProgressionText" + sessionStorage.controlID);
                                b.parentNode.removeChild(b)
                            }
                            dvJQuery(a.dom.printDialog).dvDialog("close")
                        }
                    }, {
                        id: "printDialogPrintButton" + sessionStorage.controlID,
                        text: a.Localize("_label_print"),
                        "class": "btn-valid",
                        click: function () {
                            var d = dvJQuery(a.dom.printDialog).find("select[name='print_content_select" + sessionStorage.controlID + "']").find("option:selected").val(),
                                e = dvJQuery(a.dom.printDialog).find("select[name='print_destination_select" + sessionStorage.controlID + "']").find("option:selected").val(),
                                g = a.dom.printPageRangeInput.value;
                            dvJQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText" + sessionStorage.controlID + "'></div>");
                            dvJQuery(a.dom.printDialogPrintButton).prop("disabled", !0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");
                            var f = dvJQuery("<div>").css({
                                width: "100%"
                            }).attr("id", "printProgressbarDiv" + sessionStorage.controlID).append("<div>");
                            f.insertBefore(a.dom.printDialog);
                            var h = new DocuViewareProgressbar({
                                bg: "#acf",
                                target: f.get(0),
                                id: "printProgressbar" + sessionStorage.controlID
                            });
                            h.go(0);
                            a.Internal.Print.printPages(0 == d, g, e, function (b,
                                d) {
                                document.getElementById("printProgressionText" + sessionStorage.controlID).innerHTML = a.Localize("label_printing_progess").replace("#", b).replace("@", d);
                                h.go(100 * b / d)
                            }, function () {
                                f.remove();
                                var d = document.getElementById("printProgressionText" + sessionStorage.controlID);
                                d.parentNode.removeChild(d);
                                dvJQuery(a.dom.printDialogPrintButton).prop("disabled", !1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");
                                dvJQuery(a.dom.printDialog).dvDialog("close");
                                b && b()
                            }, function () {
                                f.remove();
                                var b = document.getElementById("printProgressionText" +
                                    sessionStorage.controlID);
                                b.parentNode.removeChild(b);
                                dvJQuery(a.dom.printDialogPrintButton).prop("disabled", !1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");
                                dvJQuery(a.dom.printDialog).dvDialog("close");
                                c && c()
                            }) != DocuViewareAPI.Status.OK && (f.remove(), d = document.getElementById("printProgressionText" + sessionStorage.controlID), d.parentNode.removeChild(d), dvJQuery(a.dom.printDialogPrintButton).prop("disabled", !1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))
                        }
                    }]);
                    this.dom.updateButtons();
                    return DocuViewareAPI.Status.OK
                },
                CopySelectedTextToClipboard: function () {
                    var b = this.GetSelectedText();
                    if (null != b && "" != b) {
                        var c = dvJQuery("<textarea>");
                        c.css({
                            position: "absolute",
                            left: "-1000px",
                            top: "-1000px"
                        });
                        c.addClass("dvTemporaryTextToCopy" + sessionStorage.controlID);
                        c.text(b);
                        dvJQuery(a.dom.mainArea).append(c);
                        document.querySelector(".dvTemporaryTextToCopy" + sessionStorage.controlID).select();
                        try {
                            var e = document.execCommand("copy");
                            c.remove();
                            if (!e) throw "failed";
                        } catch (p) {
                            a.dom.copyTextInput.value = b, a.DisplayDialogForm(dvJQuery(a.dom.copyDialog),
                                a.Localize("_title_copy_dialog"), null,
                                function () {
                                    a.dom.copyTextInput.focus()
                                }, null, [{
                                    text: a.Localize("_label_close"),
                                    "class": "btn-valid",
                                    click: function () {
                                        dvJQuery(a.dom.copyDialog).dvDialog("close")
                                    }
                                }])
                        }
                        this.dom.updateButtons();
                        return DocuViewareAPI.Status.OK
                    }
                },
                HighlightSelectedText: function (a) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    var b = this.Internal.Text.getSelectedTextCoordinatesOnDocument();
                    if (0 < b.length) {
                        for (var d = [], c = 0; c < b.length; c++) d.push({
                            type: 2,
                            pageNo: b[c].pageNo,
                            coordinates: {
                                left: b[c].left,
                                top: b[c].top,
                                height: b[c].height,
                                width: b[c].width
                            },
                            appearance: {
                                fillColor: null != a ? a : "#FFFF00",
                                rotation: 0,
                                squaredBox: !1
                            },
                            common: {
                                canResize: !1,
                                canMove: !1,
                                canRotate: !1,
                                canSelect: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canEdit: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canDelete: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                tag: ""
                            }
                        });
                        this.AddAnnot(d, !0, null, null, "highlight");
                        this.Internal.Text.clearSelection();
                        this.dom.SelectedTextRegions.clear(1);
                        return DocuViewareAPI.Status.OK
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                StrikeoutSelectedText: function (a) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    var b = this.Internal.Text.getSelectedTextCoordinatesOnDocument();
                    if (0 < b.length) {
                        for (var d = [], c = 0; c < b.length; c++) d.push({
                            type: 3,
                            pageNo: b[c].pageNo,
                            coordinates: {
                                left: b[c].left,
                                top: b[c].top + b[c].height / 2,
                                height: .001,
                                width: b[c].width
                            },
                            appearance: {
                                borderWidth: .02,
                                dashCap: 0,
                                dashStyle: 0,
                                endCap: 0,
                                opacity: 1,
                                rotation: 0,
                                startCap: 0,
                                strokeColor: null != a ? a : "#FF0000"
                            },
                            common: {
                                canResize: !1,
                                canMove: !1,
                                canRotate: !1,
                                canSelect: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canEdit: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canDelete: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                tag: ""
                            }
                        });
                        this.AddAnnot(d, !0, null, null, "strikeout");
                        this.Internal.Text.clearSelection();
                        this.dom.SelectedTextRegions.clear(1);
                        return DocuViewareAPI.Status.OK
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                UnderlineSelectedText: function (a) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    var b = this.Internal.Text.getSelectedTextCoordinatesOnDocument();
                    if (0 < b.length) {
                        for (var d = [], c = 0; c < b.length; c++) d.push({
                            type: 3,
                            pageNo: b[c].pageNo,
                            coordinates: {
                                left: b[c].left,
                                top: b[c].top + b[c].height,
                                height: .001,
                                width: b[c].width
                            },
                            appearance: {
                                borderWidth: .02,
                                dashCap: 0,
                                dashStyle: 0,
                                endCap: 0,
                                opacity: 1,
                                rotation: 0,
                                startCap: 0,
                                strokeColor: null != a ? a : "#FF0000"
                            },
                            common: {
                                canResize: !1,
                                canMove: !1,
                                canRotate: !1,
                                canSelect: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canEdit: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                canDelete: this.dom.UIconfig.enableSelectedTextAnnotationEdition,
                                tag: ""
                            }
                        });
                        this.AddAnnot(d, !0, null, null, "underline");
                        this.Internal.Text.clearSelection();
                        this.dom.SelectedTextRegions.clear(1);
                        return DocuViewareAPI.Status.OK
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                GetSelectedText: function () {
                    return a.Internal.Text.getSelectedText()
                },
                AddSelectedTextContextMenuItem: function (b, c) {
                    if (b && "function" === typeof c && this.dom.viewerContextMenu) {
                        var d = document.createElement("a");
                        d.href = "#";
                        d.className = "list-group-item";
                        d.innerText = b;
                        d.style.color = this.dom.UIconfig.strokeColor;
                        d.addEventListener("click", function () {
                            var b = a.Internal.Text.getSelectedTextAreas();
                            c(b);
                            a.Internal.Text.clearSelection();
                            a.dom.SelectedTextRegions.clear(1)
                        });
                        this.dom.viewerContextMenu.firstChild.appendChild(d);
                        return DocuViewareAPI.Status.OK
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                AddAnnotationsActionButton: function (b, c, e) {
                    if (b && c && "function" === typeof e && this.dom.annotationsActionButtons) {
                        var d = 0,
                            g = document.createElement("div"),
                            f = dvJQuery("div[id^='annotationActionButtonsSplitter']").length +
                                1;
                        g.id = "annotationActionButtonsSplitter" + f + this.uniqueID;
                        g.style.fill = this.dom.UIconfig.strokeColor;
                        g.style.height = "16px";
                        g.style.width = "1px";
                        g.style.marginLeft = "8px";
                        g.style.marginRight = "8px";
                        g.style.float = "left";
                        g.style.borderRight = "solid";
                        g.style.borderRightWidth = "1px";
                        g.style.borderRightColor = this.UIconfig.strokeColor;
                        d += dvJQuery(g).outerWidth() + 2;
                        this.dom.annotationsActionButtons.appendChild(g);
                        d = document.createElement("div");
                        f = dvJQuery("div[id^='annotationActionCustomButtons']").length + 1;
                        d.id =
                            "annotationActionCustom" + f + this.uniqueID;
                        d.title = b;
                        d.style.fill = this.dom.UIconfig.strokeColor;
                        d.style.height = "16px";
                        d.style.width = "16px";
                        d.style.float = "left";
                        d.innerHTML = c;
                        d.addEventListener("mouseenter", function () {
                            dvJQuery(this).css("cursor", "pointer");
                            dvJQuery(this).css("fill", a.dom.UIconfig.hoverColor)
                        });
                        d.addEventListener("mouseleave", function () {
                            dvJQuery(this).css("cursor", "default");
                            dvJQuery(this).css("fill", a.dom.UIconfig.strokeColor)
                        });
                        d.addEventListener("click", function () {
                            e({
                                id: a.dom.selectedAnnotation.annotApp.id
                            })
                        });
                        this.dom.annotationsActionButtons.appendChild(d);
                        this.Internal.Annotations.unselectAll();
                        return DocuViewareAPI.Status.OK
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                ShowThumbnailsSnapIn: function () {
                    return this.dom.thumbnailArea ? this.SelectSnapIn("thumbnails", !1) : DocuViewareAPI.Status.GenericError
                },
                ShowBookmarksSnapIn: function () {
                    return this.dom.bookmarksArea ? this.SelectSnapIn("bookmarks", !1) : DocuViewareAPI.Status.GenericError
                },
                ShowSearchSnapIn: function () {
                    if (this.dom.searchArea) {
                        var b = this.SelectSnapIn("search",
                            !1);
                        b == DocuViewareAPI.Status.OK && (a.dom.searchResultsContainer.style.height = dvJQuery(a.dom.searchArea).outerHeight(!0) - dvJQuery(a.dom.searchPanelForm).outerHeight(!0) + "px", dvJQuery(this.dom.searchValueInput).focus());
                        return b
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                ShowAnnotationsSnapIn: function () {
                    return this.dom.annotationsArea ? this.SelectSnapIn("annotations", !1) : DocuViewareAPI.Status.GenericError
                },
                ShowCommentsSnapIn: function () {
                    return this.dom.commentsArea ? this.SelectSnapIn("comments", !1) : DocuViewareAPI.Status.GenericError
                },
                IsSnapinsPanelVisible: function () {
                    return this.dom.leftSideArea ? "none" != this.dom.leftSideContainerPanelsArea.style.display : !1
                },
                SetSnapinsPanelVisibility: function (b, c, e) {
                    if (!this.dom.leftSideArea) return DocuViewareAPI.Status.GenericError;
                    var d = this.dom.leftSideContainerPanelsArea.style.display;
                    if (b) {
                        if (!this.IsSnapinsPanelVisible() || c) c && (c = Math.max(c, dvJQuery(a.dom.leftsideContainer).width() - dvJQuery(a.dom.leftSideContainerPanelsArea).width())), dvJQuery(a.dom.leftSideArea).animate({
                            width: c ? c : a.dom.leftSideArea.oldWidth
                        },
                            100, "linear",
                            function () {
                                dvJQuery(a.dom.leftsideContainer).css("width", "");
                                dvJQuery(a.dom.leftSideContainerPanelsArea).show(0, function () {
                                    if (d != a.dom.leftSideContainerPanelsArea.style.display || e) a.events.onNewViewerSize(), a.dom.ensureSelectedThumbnailVisibility(!1)
                                });
                                dvJQuery(a.dom.leftSideArea).resizable("enable");
                                c ? a.dom.sidePanelResized() : a.dom.sidePanelToggled(!1)
                            })
                    } else this.IsSnapinsPanelVisible() && (this.UnselectSelectedSnapin(), a.dom.leftSideArea.oldWidth = c ? c + "px" : a.dom.leftSideArea.style.width,
                        dvJQuery(a.dom.leftSideArea).animate({
                            width: dvJQuery(a.dom.leftsideContainer).width() - dvJQuery(a.dom.leftSideContainerPanelsArea).width()
                        }, 100, "linear", function () {
                            dvJQuery(a.dom.leftsideContainer).css("width", dvJQuery(a.dom.leftsideContainer).width() - dvJQuery(a.dom.leftSideContainerPanelsArea).width());
                            dvJQuery(a.dom.leftSideContainerPanelsArea).hide(0, function () {
                                if (d != a.dom.leftSideContainerPanelsArea.style.display || e) a.events.onNewViewerSize()
                            });
                            dvJQuery(a.dom.leftSideArea).resizable("disable");
                            a.dom.sidePanelToggled(!0)
                        }));
                    return DocuViewareAPI.Status.OK
                },
                GetSnapInPanelWidth: function () {
                    return this.IsSnapinsPanelVisible() ? parseInt(a.dom.leftSideArea.style.width.replace("px", "")) : 0
                },
                SetSnapInPanelWidth: function (b) {
                    return this.dom.leftSideArea && b === parseInt(b) ? null == a.dom.selectedSnapin ? (a.dom.leftSideArea.oldWidth = Math.max(b, dvJQuery(a.dom.leftsideContainer).width() - dvJQuery(a.dom.leftSideContainerPanelsArea).width()), this.SelectFirstAvailableSnapin()) : this.SetSnapinsPanelVisibility(!0, b,
                        !0) : DocuViewareAPI.Status.GenericError
                },
                AddCustomSnapIn: function (b, c, e, f, h, k) {
                    function d(a) {
                        return "object" === typeof HTMLElement ? a instanceof HTMLElement : a && "object" === typeof a && null !== a && 1 === a.nodeType && "string" === typeof a.nodeName
                    }
                    if (!this.dom.leftSideArea) return DocuViewareAPI.Status.GenericError;
                    var g = document.createElement("div");
                    g.id = sessionStorage.controlID + "_snapin_button_" + b;
                    g.className = "leftsidebutton";
                    g.title = c;
                    g.style.display = !0 === h ? "block" : "none";
                    g.style.borderTop = "1px solid " + a.UIconfig.snapInButtonBorderTop;
                    d(e) ? g.innerHTML = e.outerHTML : g.innerHTML = e;
                    g.addEventListener("click", function () {
                        a.SnapInButton_Click(b)
                    });
                    g.addEventListener("mouseenter", function () {
                        a.events.onSnapInButtonMouseEnter(this)
                    });
                    g.addEventListener("mouseleave", function () {
                        a.events.onSnapInButtonMouseLeave(this)
                    });
                    document.getElementById("snapinButtonStrip" + sessionStorage.controlID).appendChild(g);
                    e = document.createElement("div");
                    e.id = sessionStorage.controlID + "_snapin_panel_" + b;
                    e.className = "panel";
                    d(f) ? e.innerHTML = f.outerHTML : e.innerHTML = f;
                    document.getElementById("leftsidePanels" +
                        sessionStorage.controlID).appendChild(e);
                    a.snapIns.push({
                        snapInID: sessionStorage.controlID + "_snapin_panel_" + b,
                        buttonID: sessionStorage.controlID + "_snapin_button_" + b,
                        name: b,
                        label: c,
                        onSelection: null == k ? null : k
                    });
                    return DocuViewareAPI.Status.OK
                },
                FindSnapIn: function (b) {
                    if (null != a.snapIns)
                        for (var c = 0; c < a.snapIns.length; c++)
                            if (a.snapIns[c].name == b) return a.snapIns[c];
                    return null
                },
                ToggleSnapIn: function (b, c) {
                    return (b = a.FindSnapIn(b)) ? (c ? dvJQuery("#" + b.buttonID).show() : (dvJQuery("#" + b.buttonID).hide(), !0 === a.IsSnapinsPanelVisible() && 0 !== a.SelectFirstAvailableSnapin() &&
                        a.SetSnapinsPanelVisibility(!1)), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                },
                UnselectSelectedSnapin: function () {
                    if (this.dom.selectedSnapin) {
                        var a = this.FindSnapIn(this.dom.selectedSnapin);
                        if (a) {
                            var b = document.getElementById(a.snapInID);
                            a = document.getElementById(a.buttonID);
                            if (b && a) return this.dom.selectedSnapin = null, null != this.dom.snapinsHeaderLabel && (this.dom.snapinsHeaderLabel.innerHTML = ""), dvJQuery(b).removeClass("active"), dvJQuery(a).removeClass("active"), a.style.fill = "", a.style.backgroundColor =
                                "", a.style.borderBottomColor = this.dom.UIconfig.snapInButtonBorderBottom, a.style.borderTopColor = this.dom.UIconfig.snapInButtonBorderTop, DocuViewareAPI.Status.OK
                        }
                        this.dom.selectedSnapin = null
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                SelectFirstAvailableSnapin: function (b) {
                    if (null != a.snapIns)
                        for (b = 0; b < a.snapIns.length; b++) {
                            var c = document.getElementById(a.snapIns[b].snapInID),
                                d = document.getElementById(a.snapIns[b].buttonID);
                            if (c && d && "none" != d.style.display) return this.SelectSnapIn(a.snapIns[b].name, !0)
                        }
                    return DocuViewareAPI.Status.GenericError
                },
                SelectSnapIn: function (b, c) {
                    if (this.dom.selectedSnapin == b) return DocuViewareAPI.Status.OK;
                    var d = this.SetSnapInVisibility(b, !0);
                    if (d == DocuViewareAPI.Status.OK) {
                        if (d = this.FindSnapIn(b)) {
                            var e = document.getElementById(d.buttonID),
                                g = document.getElementById(d.snapInID);
                            if (e && g && "none" != e.style.display) {
                                this.UnselectSelectedSnapin();
                                null != this.dom.snapinsHeaderLabel && (this.dom.snapinsHeaderLabel.innerHTML = d.label);
                                dvJQuery(e).addClass("active");
                                e.style.fill = this.dom.UIconfig.headerColor;
                                e.style.backgroundColor =
                                    this.dom.UIconfig.panelBackColor;
                                e.style.borderBottomColor = this.dom.UIconfig.panelBackColor;
                                e.style.borderTopColor = this.dom.UIconfig.panelBackColor;
                                dvJQuery(g).addClass("active");
                                if (d.onSelection)
                                    if ("[object Function]" === {}.toString.call(d.onSelection)) d.onSelection();
                                    else eval(d.onSelection);
                                this.SetSnapinsPanelVisibility(!0);
                                this.dom.selectedSnapin = b;
                                if (!c)
                                    if ("thumbnails" === b) {
                                        if (a.callbacks.onThumbnailsSnapInSelected) a.callbacks.onThumbnailsSnapInSelected()
                                    } else if ("bookmarks" === b) {
                                        if (a.callbacks.onBookmarksSnapInSelected) a.callbacks.onBookmarksSnapInSelected()
                                    } else if ("search" ===
                                        b) {
                                        if (a.callbacks.onSearchSnapInSelected) a.callbacks.onSearchSnapInSelected()
                                    } else if ("annotations" === b) {
                                        if (a.callbacks.onAnnotationsSnapInSelected) a.callbacks.onAnnotationsSnapInSelected()
                                    } else if ("comments" === b && a.callbacks.onCommentsSnapInSelected) a.callbacks.onCommentsSnapInSelected();
                                return DocuViewareAPI.Status.OK
                            }
                        }
                        return DocuViewareAPI.Status.GenericError
                    }
                    return d
                },
                SetSnapInVisibility: function (a, b) {
                    if (b && "annotations" == a && 0 == this.serverCtx.annotationEditorMode) return DocuViewareAPI.Status.GenericError;
                    var c = this.FindSnapIn(a);
                    return c && (this.dom.selectedSnapin != a || b || this.UnselectSelectedSnapin(), a = document.getElementById(c.buttonID), c = document.getElementById(c.snapInID), a && c) ? ("none" != a.style.display != b && (a.style.display = b ? "" : "none", c.style.display = b ? "" : "none"), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                },
                Search: function (a, b, c, e, f) {
                    this.ClearSearch();
                    this.SubmitSearch(a, b, c, e, f);
                    this.dom.searchArea && (this.dom.searchValueInput.value = a, this.dom.searchWholeWordInput.checked = b, this.dom.searchCaseSensitiveInput.checked =
                        c, this.dom.searchAnyWordInput.checked = e, dvJQuery(this.dom.searchPageSelect).filter("[value='" + f + "']").prop("checked", !0), dvJQuery(this.dom.searchPageSelect).dvButton("refresh"));
                    return DocuViewareAPI.Status.OK
                },
                SetSearchSettings: function (a, b, c, e) {
                    this.dom.searchWholeWordInput.checked = a;
                    this.dom.searchCaseSensitiveInput.checked = b;
                    this.dom.searchAnyWordInput.checked = c;
                    dvJQuery(this.dom.searchPageSelect).filter("[value='" + e + "']").prop("checked", !0);
                    dvJQuery(this.dom.searchPageSelect).dvButton("refresh");
                    return DocuViewareAPI.Status.OK
                },
                SearchNavigateToOccurrence: function (b) {
                    return a.Internal.Search.occurences[b] && (b = document.getElementById(sessionStorage.controlID + "searchResultItem" + b)) ? (a.Internal.Search.navigateToResult(b), DocuViewareAPI.Status.OK) : DocuViewareAPI.Status.GenericError
                },
                GetSearchResultsCount: function () {
                    return a.Internal.Search._occurences ? a.Internal.Search._occurences.length : 0
                },
                GetCurrentSearchOccurrenceIdx: function () {
                    return a.Internal.Search._currentOccurence ? parseInt(a.Internal.Search._currentOccurence.dataset.idx) :
                        -1
                },
                SubmitSearch: function (b, c, e, f, h) {
                    this.ShowSearchSnapIn();
                    if (b) {
                        var d = [];
                        d.push(0 == h ? a.GetCurrentPage() : -1);
                        return this.ajax.PostBaseRequest({
                            url: a.appControllerPath + "/textsearch" + (a.useIdInRoot ? "/1" : ""),
                            data: {
                                text: b,
                                pages: d,
                                wholeWord: c,
                                caseSensitive: e,
                                anyWord: f
                            },
                            success: function (c) {
                                c = "string" === typeof c ? eval("(" + c + ")") : c;
                                var d = 0;
                                c && c.status == DocuViewareAPI.Status.OK ? (a.Internal.Search.addResults(b, c.occurences), 0 == c.occurences.length ? a.callbacks.onSearchInvoked || a.ShowMessage({
                                    text: a.Localize("no_result"),
                                    backgroundColor: a.dom.UIconfig.headerColor,
                                    icon: 64,
                                    delay: 5E3
                                }) : (d = c.occurences.length, a.Internal.Search.navigateToFirstResult(), a.dom.searchArea && (a.dom.searchClearResultsButton.style.display = "block"))) : (a.callbacks.onSearchInvoked || a.ShowMessage({
                                    text: a.Localize("no_result"),
                                    backgroundColor: a.dom.UIconfig.headerColor,
                                    icon: 64,
                                    delay: 5E3
                                }), a.Internal.Search.addResults(null, null), a.ajax.HandleError(c));
                                if (a.callbacks.onSearchInvoked) a.callbacks.onSearchInvoked({
                                    occurrences: d
                                })
                            }
                        }, !1)
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                UpdateLayout: function () {
                    this.events.onResize();
                    return DocuViewareAPI.Status.OK
                },
                ClearSearch: function () {
                    this.Internal.Search.clearResults();
                    this.dom.searchArea && (this.dom.searchValueInput.value = "", this.dom.searchClearResultsButton.style.display = "none");
                    return DocuViewareAPI.Status.OK
                },
                CommentsClearSearch: function () {
                    this.dom.commentsSearchArea && (this.dom.commentsSearchValueInput.value = "", this.dom.commentsSearchClearResultsButton.style.display = "none");
                    a.refreshCommentsPanel();
                    return DocuViewareAPI.Status.OK
                },
                SubmitCommentsSearch: function (a) {
                    this.ShowCommentsSnapIn();
                    if (!a) return DocuViewareAPI.Status.GenericError
                },
                CommentsExpandCollapseAll: function () {
                    dvJQuery(".dvtoggle").toggleClass("dvcolapsed").parents(".dvcomment-header").next(".dvcomment-content").slideToggle();
                    dvJQuery(".dvtoggle").hasClass("dvcolapsed") ? dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M0,4v12h12V4H0z M11,15H1V5h10V15z"/><polygon points="13,3 13,13.5 14,14.5 14,2 1.5,2 2.5,3 "/><polygon points="15,1 15,11.5 16,12.5 16,0 3.5,0 4.5,1 "/><polygon points="3.2,8.5 2.7,9 6,12.4 9.3,9 8.7,8.5 6,11.3 "/></svg>') :
                        dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M16,16H0V0h16V16z M0.9,15.1h14.1V0.9H0.9V15.1z"/><polygon points="6.1,10.8 6.6,11.3 9.9,8 6.6,4.7 6.1,5.2 8.8,8 "/></svg>')
                },
                SetLoadFromUriDialogVisibility: function (b) {
                    this.dom.isLoadFromUriDialogVisible != b && (b ? (dvJQuery(this.dom.openFromUriArea).slideDown({
                        complete: function () {
                            dvJQuery(document).on("click.toggleOpenUriEvent", function (b) {
                                dvJQuery(a.dom.openFromUriArea).is(dvJQuery(b.target)) ||
                                    0 != dvJQuery(a.dom.openFromUriArea).has(dvJQuery(b.target)).length || a.ToggleLoadFromUriDialog()
                            });
                            dvJQuery(a.dom.addressBar).focus()
                        }
                    }), dvJQuery(this.dom.openFromUriButton).addClass("button_active")) : (dvJQuery(document).unbind("click.toggleOpenUriEvent"), dvJQuery(this.dom.openFromUriArea).slideUp(), dvJQuery(this.dom.openFromUriButton).removeClass("button_active")), this.dom.isLoadFromUriDialogVisible = b, this.dom.updateButtons())
                },
                LoadFromUri: function (b, c, e, f) {
                    function d(b) {
                        a.ajax.downloading = !1;
                        0 != a.dom.progressbar.value() &&
                            a.dom.progressbar.go(100);
                        dvJQuery(a.dom.mainSpinner).hide();
                        a.SetLoadFromUriDialogVisibility(!1);
                        if (b) {
                            if (a.callbacks.onURIOpenSuccess) a.callbacks.onURIOpenSuccess()
                        } else if (a.callbacks.onURIOpenError) a.callbacks.onURIOpenError()
                    }

                    function g(b) {
                        a.ajax.HandleError(b);
                        d(!1)
                    }

                    function h(e) {
                        if (a.ajax.downloading && (e = "string" === typeof e ? eval("(" + e + ")") : e, !e || !e.ignoreResponse))
                            if (e && e.status == DocuViewareAPI.Status.OK)
                                if (e.isTransfering) {
                                    if (0 < e.progress && 100 >= e.progress) {
                                        100 != e.progress && a.dom.progressbar.go(e.progress);
                                        var f = dvJQuery(a.dom.mainSpinnerContent);
                                        f.children(f.children.length - 1).text(a.Localize("label__downloading_document") + " (" + e.progress + "%)")
                                    }
                                    a.ajax.PostAjaxRequestForDocuViewareAction({
                                        url: a.appControllerPath + "/loadfromuri" + (a.useIdInRoot ? "/1" : ""),
                                        data: JSON.stringify({
                                            transferID: a.ajax.transferID,
                                            sessionID: a.ajax.sessionID,
                                            progressRequest: !0,
                                            URI: b,
                                            fileName: c
                                        }),
                                        async: !0,
                                        success: h,
                                        error: g
                                    })
                                } else d(!0), a.ajax.SetNewServerCtx(e);
                            else d(!1), a.ajax.HandleError(e)
                    }
                    if (this.hasPendingAction()) return DocuViewareAPI.Status.GenericError;
                    this.callbacks.onURIOpenError = f;
                    this.callbacks.onURIOpenSuccess = e;
                    this.ajax.downloading = !0;
                    this.ajax.transferID = Date.now();
                    e = dvJQuery(this.dom.mainSpinnerContent);
                    e.children(e.children.length - 1).text(this.Localize("label__loading_progress"));
                    a.SetLoadFromUriDialogVisibility(!1);
                    dvJQuery(this.dom.mainSpinner).show();
                    a.ajax.PostAjaxRequestForDocuViewareAction({
                        url: a.appControllerPath + "/loadfromuri" + (a.useIdInRoot ? "/1" : ""),
                        data: JSON.stringify({
                            transferID: a.ajax.transferID,
                            sessionID: a.ajax.sessionID,
                            progressRequest: !1,
                            URI: b,
                            fileName: c,
                            clientConfiguration: a.getConfig()
                        }),
                        async: !0,
                        success: h,
                        error: g
                    });
                    return DocuViewareAPI.Status.OK
                },
                ExitAnnotationDrawingMode: function () {
                    2 == this.events.mouseMode && this.events.isDrawingPath && (this.ResetScrollConfig(), this.dom.freehandCan.style.display = "none", this.events.isDrawingPath = !1, this.Internal.Annotations.addAnnotInteractive(), this.dom.drawingModeArea.style.display = "none", this.dom.modalOverlayArea.style.display = "none", this.dom.viewerArea.style.removeProperty("z-index"));
                    this.Internal.Annotations.stopAnnotInteractiveAdd();
                    return DocuViewareAPI.Status.OK
                },
                IsFullScreenMode: function () {
                    return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement
                },
                ToggleFullscreen: function () {
                    removeHighlightOfBtn();
                    if (a.isSafari || a.isIOS || a.isIE9 || a.isIE10 || this.hasPendingAction(!1, !1, !1)) return DocuViewareAPI.Status.GenericError;
                    var b = this.IsFullScreenMode();
                    if (b) document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() :
                        document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen();
                    else {
                        dvJQuery(a.dom.fullscreenButton).addClass("button_active");
                        var c = a.dom.mainArea;
                        c.requestFullscreen ? (DocuViewareUtilities.addEvent(document, "fullscreenchange", function r(b) {
                            document.fullscreenElement || (a.ExitFullscreen(), DocuViewareUtilities.removeEvent(document, "fullscreenchange", r, !1))
                        }, !1), c.requestFullscreen()) : c.msRequestFullscreen ? (DocuViewareUtilities.addEvent(document,
                            "MSFullscreenChange",
                            function r(b) {
                                document.msFullscreenElement || (a.ExitFullscreen(), DocuViewareUtilities.removeEvent(document, "MSFullscreenChange", r, !1))
                            }, !1), c.msRequestFullscreen()) : c.mozRequestFullScreen ? (DocuViewareUtilities.addEvent(document, "mozfullscreenchange", function r(b) {
                                document.mozFullScreenElement || (a.ExitFullscreen(), DocuViewareUtilities.removeEvent(document, "mozfullscreenchange", r, !1))
                            }, !1), c.mozRequestFullScreen()) : c.webkitRequestFullScreen && (DocuViewareUtilities.addEvent(document,
                                "webkitfullscreenchange",
                                function r(b) {
                                    document.webkitFullscreenElement || (a.ExitFullscreen(), DocuViewareUtilities.removeEvent(document, "webkitfullscreenchange", r, !1))
                                }, !1), c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT));
                        if (a.callbacks.onFullscreenModeChanged) {
                            if (!b) a.callbacks.onFullscreenModeChanged({
                                newMode: !0
                            })
                        } else return DocuViewareAPI.Status.GenericError;
                        a.dom.UIconfig.old_viewer_width = a.width;
                        a.dom.UIconfig.old_viewer_height = a.height;
                        a.dom.leftSideArea && "none" != a.dom.leftSideContainerPanelsArea.style.display &&
                            (b = window.screen.width / a.width, a.dom.leftSideArea.style.width = Math.round((a.dom.leftSideArea.style.width.replace("px", "") || a.dom.leftSideArea.offsetWidth) * b) + "px");
                        a.events.onNewViewerSize();
                        a.dom.updateButtons()
                    }
                    return DocuViewareAPI.Status.OK
                },
                ExitFullscreen: function () {
                    if (this.hasPendingAction(!1, !1, !1)) return DocuViewareAPI.Status.GenericError;
                    dvJQuery(a.dom.fullscreenButton).removeClass("button_active");
                    a.dom.updateButtons();
                    var b = a.dom.UIconfig.old_viewer_width / a.width;
                    a.dom.leftSideArea && ("none" !=
                        a.dom.leftSideContainerPanelsArea.style.display ? a.dom.leftSideArea.style.width = Math.round((a.dom.leftSideArea.style.width.replace("px", "") || a.dom.leftSideArea.offsetWidth) * b) + "px" : a.dom.leftSideContainerPanelsArea.style.width = Math.round(parseFloat(a.dom.leftSideContainerPanelsArea.style.width.replace("px", "")) * b) + "px");
                    a.events.onNewViewerSize();
                    if (a.callbacks.onFullscreenModeChanged) a.callbacks.onFullscreenModeChanged({
                        newMode: !1
                    })
                },
                SetZoomMode: function (b) {
                    return a.ajax.PostBaseRequest({
                        url: a.appControllerPath +
                            "/zoommode" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            zoomMode: b
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1)
                        }
                    }, !1)
                },
                SetMouseMode: function (b) {
                    a.events.mouseMode = b;
                    var c = DocuViewareAPI.Status.OK;
                    a.events.setCursor();
                    a.Internal.Selection.selectionArea.hide();
                    switch (b) {
                        case 0:
                        case 1:
                            a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);
                            a.events.ownMouseEvents = !1;
                            break;
                        case 3:
                            a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);
                            a.Internal.Selection.selectionArea.setLineMode(0);
                            a.events.ownMouseEvents = !0;
                            a.Internal.Annotations.unselectAll();
                            a.Internal.Text.clearSelection();
                            a.dom.SelectedTextRegions.clear(1);
                            break;
                        case 4:
                            a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);
                            a.Internal.Selection.selectionArea.setLineMode(0);
                            a.events.ownMouseEvents = !0;
                            a.Internal.Annotations.unselectAll();
                            a.Internal.Text.clearSelection();
                            a.dom.SelectedTextRegions.clear(1);
                            break;
                        default:
                            c = DocuViewareAPI.Status.GenericError
                    }
                    a.dom.udpateMouseModeButtons(b);
                    a.dom.updateButtons();
                    return c
                },
                GetMouseMode: function () {
                    return a.events.mouseMode
                },
                ZoomIN: function (b, c, e) {
                    return this.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/zoomin" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            count: b
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1);
                            c && c()
                        },
                        error: function () {
                            e && e()
                        }
                    }, !1)
                },
                ZoomOUT: function (b, c, e) {
                    return this.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/zoomout" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            count: b
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" ===
                                typeof b ? eval("(" + b + ")") : b, !1);
                            c && c()
                        },
                        error: function () {
                            e && e()
                        }
                    }, !1)
                },
                ZoomRect: function (b, c, e) {
                    return b && b.left && b.top && b.width && b.height ? (b = {
                        url: a.appControllerPath + "/zoomrect" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            pageNo: this.GetCurrentPage(),
                            left: b.left,
                            top: b.top,
                            width: b.width,
                            height: b.height
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1);
                            c && c()
                        },
                        error: function () {
                            e && e()
                        }
                    }, this.ajax.PostBaseRequest(b, !1)) : DocuViewareAPI.Status.GenericError
                },
                Rotate: function (b,
                    c) {
                    return this.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/rotate" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            rotation: b,
                            mode: c
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1);
                            if (a.callbacks.onRotationChanged) a.callbacks.onRotationChanged(a.serverCtx.renderRotation)
                        }
                    })
                },
                SelectPage: function (a, b) {
                    this.serverCtx.documentLoaded && 0 < a && a <= this.serverCtx.pageCount && a != this.GetLastPageNoRequest() ? this.SelectPageEx(a, !0, !0, !0, !1, !1, b) : b && b();
                    return DocuViewareAPI.Status.OK
                },
                EnsurePageVisibility: function (b) {
                    if (!this.serverCtx.singlePageView && null != this.cache.canvas)
                        for (var c = 0; c < this.cache.canvas.length; c++)
                            if (this.cache.canvas[c].pageNo == b) {
                                var d = this.cache.canvas[c].top;
                                c = this.cache.canvas[c].bottom - d;
                                var e = this.dom.viewerArea.offsetHeight;
                                d = e < c ? Math.round(d) : Math.round(d + (c - e) / 2);
                                a.Internal.Coordinates.getViewerScrollTop() != d && (this.dom.viewerArea.ignoreScrollAt = d, a.Internal.Coordinates.setViewerScrollTop(d), a.showVisiblePages(b));
                                break
                            }
                },
                EnsurePageRegionVisibility: function (b,
                    c, e, f, h) {
                    if ((!this.serverCtx.singlePageView || b == a.GetCurrentPage()) && null != this.cache.canvas)
                        for (var d = 0; d < this.cache.canvas.length; d++)
                            if (this.cache.canvas[d].pageNo == b) {
                                var g = this.cache.canvas[d].top,
                                    k = this.cache.canvas[d].bottom - g,
                                    l = this.dom.viewerArea.offsetHeight,
                                    m = this.dom.viewerArea.offsetWidth;
                                d = 0;
                                l < k ? (k = a.Internal.Pages.getRenderingState(b), c = {
                                    left: c,
                                    top: e,
                                    width: f,
                                    height: h
                                }, e = a.Internal.Matrix.scale(k.contentMatrix, 96, 96, !1), a.Internal.Matrix.transformBBox(e, 0, c), e = c.top + c.height, e > l && (g +=
                                    e - l + 2, a.serverCtx.hScrollbarVisible && (g += a.dom.sbWidth)), l = c.left + c.width, l > m && (d = l - m + 2, a.serverCtx.vScrollbarVisible && (d += a.dom.sbWidth)), g = Math.round(g)) : g = Math.round(g + (k - l) / 2);
                                a.Internal.Coordinates.getViewerScrollTop() != g && (this.dom.viewerArea.ignoreScrollAt = g, a.Internal.Coordinates.setViewerScrollTop(g), 0 != d && a.Internal.Coordinates.setViewerScrollLeft(d), a.showVisiblePages(b));
                                break
                            }
                },
                EnsureCurrentPageVisibility: function () {
                    this.EnsurePageVisibility(this.GetLastPageNoRequest())
                },
                SelectPageEx: function (b,
                    c, e, f, h, k, l) {
                    a.debug && console.log("DocuVieware: Select page: " + b);
                    a.Internal.Thumbnails.reinitThumbnailsSelection();
                    if (b != a.GetLastPageNoRequest()) return f && this.dom.updateSelectedPageFader(500, b), e && !a.serverCtx.singlePageView && a.EnsurePageVisibility(b), h && a.serverCtx.singlePageView && (h = !1), e = this.ajax.latestSelectedPage, this.ajax.latestSelectedPage = b, b = this.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/selectpage" + (a.useIdInRoot ? "/1" : ""),
                        data: {
                            page: b
                        },
                        success: function (b) {
                            a.ajax.HandleServerContextResponse("string" ===
                                typeof b ? eval("(" + b + ")") : b, h) && a.dom.updateThumbsStyle(c, !1);
                            l && l()
                        },
                        error: function () { }
                    }, !1, !0), b != DocuViewareAPI.Status.OK && (this.ajax.latestSelectedPage = e), b;
                    a.Internal.Thumbnails.toggleThumbnailSelection(b);
                    k && a.DrawPage(a.cache.getPageObject(b));
                    l && l();
                    return DocuViewareAPI.Status.OK
                },
                Save: function (b, c, e, f, h) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    if ("" == b) return a.DisplayError(a.Localize("error__saving_filename")), DocuViewareAPI.Status.GenericError;
                    if ("" == c) return a.DisplayError(a.Localize("error__saving_file_format")),
                        DocuViewareAPI.Status.GenericError;
                    window.location = a.appControllerPath + "/save" + (a.useIdInRoot ? "/1" : "") + "?sessionID=" + this.ajax.sessionID + "&fileName=" + encodeURIComponent(b) + "&format=" + c + "&pageRange=" + (e ? e : "*");
                    f && f();
                    if (a.callbacks.onDocumentSaved) a.callbacks.onDocumentSaved();
                    return DocuViewareAPI.Status.OK
                },
                CloseDocument: function () {
                    return this.serverCtx.documentLoaded ? this.ajax.PostBaseRequest({
                        url: a.appControllerPath + "/close" + (a.useIdInRoot ? "/1" : ""),
                        data: {},
                        success: function (b) {
                            a.ajax.SetNewServerCtx(null)
                        }
                    },
                        !0) : DocuViewareAPI.Status.GenericError
                },
                AddAnnot: function (b, c, e, f, h) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    var d = [],
                        g = null;
                    null != this.Internal.Annotations.defaultAuthor && (g = {}, g.author = this.Internal.Annotations.defaultAuthor);
                    for (var k = 0; k < b.length; k++) {
                        var l = this.Internal.Annotations.mergeAnnotationProperties(b[k].type, b[k].appearance);
                        l.left = b[k].coordinates.left;
                        l.top = b[k].coordinates.top;
                        l.height = b[k].coordinates.height;
                        l.width = b[k].coordinates.width;
                        for (var m in b[k].common) b[k].common.hasOwnProperty(m) &&
                            (null == g && (g = {}), g[m] = b[k].common[m]);
                        d.push({
                            extProperties: g,
                            properties: l,
                            pageNo: b[k].pageNo
                        })
                    }
                    this.ajax.PostBaseRequest({
                        url: this.appControllerPath + "/newannotation" + (this.useIdInRoot ? "/1" : ""),
                        data: {
                            annots: d
                        },
                        success: function (b) {
                            if ((b = "string" === typeof b ? eval("(" + b + ")") : b) && null != b.annots) {
                                for (var d = [], f = 0; f < b.annots.length; f++) {
                                    var g = a.Internal.Pages.getRenderingState(b.annots[f].annotApp.pageNo);
                                    g = a.Internal.Annotations.newController(b.annots[f].annotApp, g.pageLeft, g.pageTop, g.contentMatrix);
                                    a.dom.singlePageView &&
                                        b.annots[f].annotApp.pageNo !== a.GetCurrentPage() || g.render();
                                    a.updateThumbnails([b.annots[f].annotApp.pageNo]);
                                    if (!c && a.callbacks.onAnnotationAdded) a.callbacks.onAnnotationAdded({
                                        id: b.annots[f].annotApp.id,
                                        pageNo: b.annots[f].annotApp.pageNo
                                    });
                                    d.push({
                                        id: b.annots[f].annotApp.id,
                                        pageNo: b.annots[f].annotApp.pageNo
                                    })
                                }
                                if (a.callbacks.onTextAnnotated && h) a.callbacks.onTextAnnotated({
                                    userAction: h,
                                    resultAnnots: d
                                })
                            } else a.ajax.HandleError(b);
                            e && e()
                        },
                        error: function () {
                            f && f()
                        }
                    }, !1);
                    return DocuViewareAPI.Status.OK
                },
                GetPageFormFields: function (b) {
                    if (b) {
                        var c = [];
                        if (null != a.cache.FormFields) {
                            for (var d = 0; d < a.cache.FormFields.length; d++) a.cache.FormFields[d].formFieldApp.pageNo !== b && "*" !== b || c.push({
                                id: a.cache.FormFields[d].formFieldApp.id,
                                pageNo: a.cache.FormFields[d].formFieldApp.pageNo,
                                properties: a.cache.FormFields[d].formFieldApp.properties
                            });
                            return c
                        }
                    }
                    return DocuViewareAPI.Status.GenericError
                },
                UpdateFormFields: function (b, c, e) {
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    for (var d = [],
                        f = 0; f < b.length; f++) d.push({
                            id: b[f].id,
                            pageNo: b[f].pageNo,
                            updateNo: f,
                            properties: b[f].properties
                        });
                    this.ajax.PostBaseRequest({
                        url: this.appControllerPath + "/formfieldsdupdate" + (this.useIdInRoot ? "/1" : ""),
                        data: {
                            contextID: a.ajax.contextID,
                            sessionID: a.ajax.sessionID,
                            items: d
                        },
                        success: function (b) {
                            if (b = "string" === typeof b ? eval("(" + b + ")") : b) {
                                for (var d = [], e = 0; e < b.length; e++) {
                                    a.Internal.FormFields.removeFormFieldFromCache(b[e].formFieldApp.id);
                                    var f = a.Internal.FormFields.newController(b[e].formFieldApp);
                                    a.dom.singlePageView &&
                                        b[e].formFieldApp.pageNo !== a.GetCurrentPage() || f.render(); - 1 === d.indexOf(b[e].formFieldApp.pageNo) && d.push(b[e].formFieldApp.pageNo);
                                    if (a.callbacks.onFormFieldChanged) a.callbacks.onFormFieldChanged({
                                        id: b[e].formFieldApp.id,
                                        pageNo: b[e].formFieldApp.pageNo
                                    })
                                }
                                0 < d.length && a.updateThumbnails(d)
                            } else a.ajax.HandleError(b);
                            c && c()
                        },
                        error: function () {
                            e && e()
                        }
                    }, !1);
                    return DocuViewareAPI.Status.OK
                },
                AddAnnotInteractive: function (b, c, d, e, copywithctrlkey) {
                    //AGjs__change for hide show custom field
                    if (document.getElementById("annot_SrcText_input" + controlID)) {
                        document.getElementById("annot_SrcText_input" + controlID).value = null;
                    }
                    $('.sorceFieldGroup').remove();

                    customSelection = e;
                    //AGjs__changes Copy and paste by ctrl+c and ctrl+v
                    if (!copywithctrlkey) {
                        PasteWithCtrlKey = false;
                        a.ExitAnnotationDrawingMode();
                    }

                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    //AGjs__changes  following commented codeis the original code
                    //c ? (annotProperties =
                    //    this.Internal.Annotations.mergeAnnotationProperties(b, c), d ? this.Internal.Annotations.showAnnotationPropertiesUI(annotProperties, null, null, e) : this.Internal.Annotations.beginAddAnnotInteractive(annotProperties, a.GetCurrentPage())) : this.Internal.Annotations.defaultProperties[b].autoCreate ? this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b], a.GetCurrentPage()) : this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],
                    //        null);
                    //return DocuViewareAPI.Status.OK

                    ////AGjs__changes Reverse the original operation (In original code ,if we add the new annotation first it show the popup then allow to draw but we change the operation like first we draw then show popup)
                    if (c) {

                        if (!c.copyannot) {
                            (annotProperties = this.Internal.Annotations.mergeAnnotationProperties(b, c), d ?
                                ((b == 8 || b == 3 || b == 6 || b == 1) ? this.Internal.Annotations.beginAddAnnotInteractive(annotProperties, a.GetCurrentPage()) : this.Internal.Annotations.showAnnotationPropertiesUI(annotProperties, null, null, e), addAutoComplete()) :
                                this.Internal.Annotations.beginAddAnnotInteractive(annotProperties, a.GetCurrentPage()))
                        }
                        //copy annot if we click copy annot that will perform by the following condn
                        else {
                            this.Internal.Annotations.beginAddAnnotInteractive(c, a.GetCurrentPage());
                        }
                    }
                    else {
                        this.Internal.Annotations.defaultProperties[b].autoCreate ?
                            this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b], a.GetCurrentPage())
                            : (b == 8 || b == 3 || b == 6 || b == 1) ? this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b], a.GetCurrentPage()) : this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b], null);
                    }
                },
                //AGjs_Create Pop
                 message: function (title, header, cb) {
                    a.DisplayDialogForm(dvJQuery(a.dom.annotationPop), header, null, function () {
                        dvJQuery(a.dom.annotationPopMessage).html(title);
                    }, null, [{
                        text: "Ok",
                        "class": "btn-valid",
                        click: function () {
                            $("#modalOverlayDiv" + controlID).css("z-index", 16777271);

                            if (cb) {
                               cb();
                            }
                            dvJQuery(a.dom.annotationPop).dvDialog("close");
                        }
                    }])
                },
                //AGjs__change for custom pop up
                Pop: function (title, header, forBookContext) {
                    a.DisplayDialogForm(dvJQuery(a.dom.annotationPop), header, null, function () {
                        dvJQuery(a.dom.annotationPopMessage).html(title);
                    }, null, [{
                        text: "Ok",
                        "class": "btn-valid",
                        click: function () {
                            $("#modalOverlayDiv" + controlID).css("z-index", 16777271);

                            if (forBookContext)
                            {
                                fnForMoveUpDelete(forBookContext.action, forBookContext.data);
                            }
                            dvJQuery(a.dom.annotationPop).dvDialog("close");
                        }
                    }])
                },
                //AGjs__change for custom pop up
                BookLinkPop: function (title, header, id, forBookContext) {
                    a.DisplayDialogForm(dvJQuery(a.dom.passwordDialogForm), header, null, function () {
                        dvJQuery(a.dom.passwordDialogForm).html(title);
                    }, null, [{
                        text: "Ok",
                        "class": "btn-valid",
                        click: function () {
                          
                            if (forBookContext) {
                                if ($("#doingBookMoveOperation").attr("data") != undefined) {
                                    forBookContext.data.bookmarkTargetID = $("#doingBookMoveOperation").attr("data");
                                    fnForMoveUpDelete(forBookContext.action, forBookContext.data, forBookContext.ele);
                                    dvJQuery(a.dom.passwordDialogForm).dvDialog("close");
                                    resetMouseModeOfMultiple(["addingBookLinkButton" + controlID, "selectMouseModeButton" + controlID]);
                                    //AGjs__ changes remove highlight of the button when operation is done
                                    $(".highlight").removeClass("button_active");
                                    $(".highlight").css("fill", "rgb(100, 100, 100)");
                                } else {
                                    a.Pop("Please Select Target Bookmark", header);
                                }
                            }
                            else {
                                if ((parseInt($("#destPageNo").val()) > 0 && parseInt($("#destPageNo").val()) <= DocuViewareAPI.GetPageCount(sessionStorage.controlID) && parseInt($("#destPageNo").val()) != DocuViewareAPI.GetCurrentPage(controlID)) || id == "AddBookMark") {
                                    let pageNo = (id != "AddBookMark") ? $("#destPageNo").val() : 0;
                                    let title = ($("#" + id).val() != "" && $("#" + id).val() != null) ? $("#" + id).val() : "";

                                    let AnnotID = $("#" + id).attr("AnnotationID");
                                    saveBookLink(title, pageNo, id, AnnotID);
                                    resetMouseModeOfMultiple(["addingBookLinkButton" + controlID, "selectMouseModeButton" + controlID]);
                                    //AGjs__ changes remove highlight of the button when operation is done
                                    $(".highlight").removeClass("button_active");
                                    $(".highlight").css("fill", "rgb(100, 100, 100)");
                                } else {
                                    document.getElementById(sessionStorage.controlID).control.Pop((parseInt($("#destPageNo").val()) == DocuViewareAPI.GetCurrentPage(controlID)) ? "Source and Destination is should not be Same !!" : ((parseInt($("#destPageNo").val()) <= 0 || parseInt($("#destPageNo").val()) > DocuViewareAPI.GetPageCount(sessionStorage.controlID)) ? "Value is not valid !!" : "Enter a page number !!"), header);
                                }
                            }
                            $("#modalOverlayDiv" + controlID).css("z-index", 16777271);

                        }
                    }])
                },
                //AGjs__change for custom ShowBookmarkHyperlinkContext
                ShowBookmarkHyperlinkContext: function (left, top)
                {
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).show();
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).css("left", left + "px"); dvJQuery(allPdfComp.dom.annotationsActionButtons).css("top", top + "px");
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).find("div").hide();
                    $(".booklink").show();
                },
                //AGjs__changes for custom ShowCotextWhenClickInternalLink
                ShowCotextWhenClickInternalLink: function (left, top, data) {
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).show();
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).css("left", left + "px"); dvJQuery(allPdfComp.dom.annotationsActionButtons).css("top", top + "px");
                    dvJQuery(allPdfComp.dom.annotationsActionButtons).find("div").hide();
                    $(".internalLinkContext").show();
                    $(".internalLinkContext").attr("data", data);
                },

                //AGjs_Changes_EDIT 
                EditAnnotInteractive: function (a, b)
                {

                    //AGjs__changes clear custom field 
                    document.getElementById("annot_SrcText_input" + controlID).value = null;
                    $('.sorceFieldGroup').remove();
                    if (this.hasPendingAction(!0)) return DocuViewareAPI.Status.GenericError;
                    var c = dvJQuery.extend(!0, {}, this.Internal.Annotations.defaultProperties[a.annotApp.properties.type]);
                    dvJQuery.each(c, function (b, d) {
                        c[b] = a.annotApp.properties[b]
                    });

                    //AGjs__changes For edit popup we handle some validation 
                    var result = this.Internal.Annotations.showAnnotationPropertiesUI(c, !0, a, b, "Edit");

                    if (result == 1) {
                        //AGjs__changes for unique id
                        if (a.annotApp.properties.type == 8) {
                            document.getElementById("annot_strokeCheck_input" + sessionStorage.controlID).checked = a.annotApp.properties.stroke;
                        }
                        return result;
                    }
                    else {
                        return result;
                    }
                },
                DeleteAnnotationById: function (b) {
                    if (b && null != a.cache.Annots)
                        for (var c = this.GetCurrentPage(), d = 0; d < a.cache.Annots.length; d++) {
                            var e =
                                a.cache.Annots[d];
                            if (e.annotApp.pageNo == c && e.annotApp.id == b) return e.updateAnnotation(!0, null)
                        }
                    return DocuViewareAPI.Status.GenericError
                },
                EnableAnnotEditionOnDblClick: function (a) {
                    if ("boolean" == typeof a) this.dom.enableAnnotEditionOnDblClick = a;
                    else return DocuViewareAPI.Status.GenericError;
                    return DocuViewareAPI.Status.OK
                },
                ResetAnnotAutoCreate: function (a) {
                    if (0 < a.length)
                        for (var b = 0; b < a.length; b++) this.Internal.Annotations.defaultProperties[a[b]].autoCreate = !1;
                    else
                        for (b = 0; b < Object.keys(this.Internal.Annotations.defaultProperties).length; b++) this.Internal.Annotations.defaultProperties[b].autoCreate = !1;
                    return DocuViewareAPI.Status.OK
                },
                ResetAnnotToDefault: function (a) {
                    if (0 < a.length)
                        for (var b = 0; b < a.length; b++) this.Internal.Annotations.defaultProperties[a[b]] = DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([a[b]]);
                    else
                        for (b = 0; b < Object.keys(this.Internal.Annotations.defaultProperties).length; b++) this.Internal.Annotations.defaultProperties[b] = DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(b);
                    return DocuViewareAPI.Status.OK
                },
                SetAnnotDefaultAuthor: function (a, b) {
                    this.Internal.Annotations.setDefaultAuthor(a);
                    this.dom.commentsAuthorInput.disabled = !0 === b ? !0 : !1;
                    return DocuViewareAPI.Status.OK
                },
                SetAnnotPropertiesValues: function (a, b) {
                    if (b) this.Internal.Annotations.setDefaultPropertiesValues(a, b);
                    else return DocuViewareAPI.Status.GenericError;
                    return DocuViewareAPI.Status.OK
                },
                GetAnnotPropertiesValues: function (a) {
                    return a && 0 <= a && 16 >= a ? this.Internal.Annotations.getAnnotPropertiesValues(a) : DocuViewareAPI.Status.GenericError
                },
                SetAnnotPropertiesToDisplay: function (a, b) {
                    if (b) this.Internal.Annotations.setDefaultPropertiesToDisplay(a,
                        b);
                    else return DocuViewareAPI.Status.GenericError;
                    return DocuViewareAPI.Status.OK
                },
                ResetAnnotPropertiesToDisplayDefault: function (a) {
                    if (0 < a.length)
                        for (var b = 0; b < a.length; b++) this.Internal.Annotations.defaultPropertiesDisplay[a[b]] = DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([a[b]]);
                    else
                        for (b = 0; b < Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length; b++) this.Internal.Annotations.defaultPropertiesDisplay[b] = DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(b);
                    return DocuViewareAPI.Status.OK
                },
                EnsureAnnotationVisibility: function (b, c) {
                    if (b && null != a.cache.Annots)
                        for (var d = 0; d < a.cache.Annots.length; d++) {
                            var e = a.cache.Annots[d];
                            if (e.annotApp.id === b) {
                                if (e.annotApp.visible) {
                                    var f = e.annotApp.pageNo;
                                    return a.SelectPage(f, function () {
                                        a.EnsurePageRegionVisibility(f, e.annotApp.bbox.Left, e.annotApp.bbox.Top, e.annotApp.bbox.Width, e.annotApp.bbox.Height);
                                        c && a.Internal.Annotations.selectById(e.annotApp.id)
                                    })
                                }
                                break
                            }
                        }
                    return DocuViewareAPI.Status.GenericError
                },
                GetTwainAcquisitionServiceInfo: function (b,
                    c) {
                    a.ajax.PostAjaxRequestForCrossDomainApp({
                        url: a.twainServiceUri + "ServiceVersion/",
                        success: function (a) {
                            a ? b && b(a) : c && c()
                        },
                        error: function () {
                            c && c({
                                status: DocuViewareAPI.Status.GenericError,
                                message: a.Localize("_twain_connector_unavailable"),
                                twainStatus: a.Internal.Twain.Status.NOT_RESPONDING
                            })
                        }
                    });
                    return DocuViewareAPI.Status.OK
                },
                GetTwainAcquisitionSources: function (b, c) {
                    a.ajax.PostAjaxRequestForCrossDomainApp({
                        url: a.twainServiceUri + "GetTwainSources/",
                        success: function (a) {
                            a ? b && b(a) : c && c(a)
                        },
                        error: function () {
                            c &&
                                c({
                                    status: DocuViewareAPI.Status.GenericError,
                                    message: a.Localize("_twain_connector_unavailable"),
                                    twainStatus: a.Internal.Twain.Status.NOT_RESPONDING
                                })
                        }
                    })
                },
                GetTwainSourceList: function () {
                    var b = null;
                    a.ajax.PostAjaxRequestForCrossDomainApp({
                        url: a.twainServiceUri + "GetTwainSources/",
                        async: !1,
                        timeout: 5E3,
                        success: function (a) {
                            a && a.GetTwainSourcesResult && (b = a.GetTwainSourcesResult)
                        }
                    });
                    return b
                },
                TwainGetClientInfo: function () {
                    var b = null;
                    a.ajax.PostAjaxRequestForCrossDomainApp({
                        url: a.twainServiceUri + "GetTwainClientInfo/",
                        async: !1,
                        timeout: 5E3,
                        success: function (a) {
                            a && a.GetTwainClientInfoResult && (b = a.GetTwainClientInfoResult)
                        }
                    });
                    return b
                },
                TwainGetLocalServiceStatus: function () {
                    var b = DocuViewareAPI.LocalServiceStatus.NotFound;
                    a.ajax.PostAjaxRequestForCrossDomainApp({
                        url: a.twainServiceUri + "ServiceVersion/",
                        async: !1,
                        timeout: 5E3,
                        success: function (c) {
                            b = c && c.ServiceVersionResult ? parseInt(c.ServiceVersionResult) >= a.twainServiceSupportedVersion ? DocuViewareAPI.LocalServiceStatus.Ready : DocuViewareAPI.LocalServiceStatus.WrongVersion :
                                DocuViewareAPI.LocalServiceStatus.NotFound
                        }
                    });
                    return b
                },
                DownloadTwainServiceSetup: function () {
                    window.location = a.appControllerPath + "/twainservicesetupdownload" + (a.useIdInRoot ? "/1" : "") + "?sessionID=" + this.ajax.sessionID;
                    return DocuViewareAPI.Status.OK
                }
            };
            a.resetServerCtx();
            if (a.dom.thumbnailArea) {
                b = document.getElementById(a.FindSnapIn("thumbnails").snapInID);
                a.isIOS && (b.style.overflow = "auto");
                var ba = null;
                dvJQuery(b).bind("scroll", function (b) {
                    null != ba && clearTimeout(ba);
                    ba = setTimeout(function () {
                        a.showVisibleThumbnails()
                    },
                        a.fastMode ? 50 : 400)
                });
                a.dom.UIconfig.enableMultipleThumbnailSelection && (a.dom.thumbnailSelectBox = dvJQuery("<div/>").appendTo(b).css("position", "absolute").css("border", "1px solid " + a.dom.UIconfig.activeSelectedColorHover).css("background-color", a.dom.UIconfig.activeSelectedBackgroundColor).css("display", "none"), b.onmousedown = a.events.onThumbnailAreaMouseDownHandler, b.onmousemove = a.events.onThumbnailAreaMouseMoveHandler, b.onmouseup = a.events.onThumbnailAreaMouseUpHandler);
                a.dom.UIconfig.enableThumbnailDragDrop &&
                    dvJQuery(a.dom.thumbnailArea).sortable({
                        placeholder: "highlight",
                        forcePlaceholderSize: !0,
                        tolerance: "pointer",
                        helper: function (b, c) {
                            if (!a.serverCtx.enablePageMoving || a.hasPendingAction()) return null;
                            b = dvJQuery("<div>");
                            var d = dvJQuery("<div>");
                            d.css({
                                position: "relative",
                                width: "100%",
                                height: "100%"
                            });
                            c = c.find("canvas");
                            var e = c.get(0).toDataURL("image/png");
                            e = dvJQuery('<img src="' + e + '"/>');
                            e.css({
                                position: "absolute",
                                left: "0px",
                                top: "0px",
                                opacity: "0.5",
                                width: c.width() / 2 + "px",
                                height: c.height() / 2 + "px"
                            });
                            d.html(e);
                            b.html(d);
                            b.width(c.width() / 2);
                            b.height(c.height() / 2);
                            return b
                        },
                        start: function (b, c) {
                            if (a.serverCtx.enablePageMoving && !a.hasPendingAction() && (a.dom.resetThumbStyle(c.placeholder, !0), c.placeholder.width(c.item.width()), c.item.attr("data-moving", "true"), b = a.Internal.Thumbnails.getThumbnailPage(c.item.get(0)), a.Internal.Thumbnails.isThumbnailSelected(b) || (a.Internal.Thumbnails.reinitThumbnailsSelection(), a.Internal.Thumbnails.selectThumbnail(b)), b = a.GetSelectedThumbnailItems(), 0 != b.length)) {
                                for (var d =
                                    0; d < b.length; d++) {
                                    var e = a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]);
                                    null != e && e.css("opacity", "0.5")
                                }
                                b = dvJQuery("<span>" + b.length + "</span>");
                                b.css({
                                    padding: "6px",
                                    color: "white",
                                    border: "1px solid white",
                                    position: "absolute",
                                    opacity: "0.95",
                                    "background-color": a.dom.UIconfig.activeSelectedColor,
                                    right: "10%",
                                    bottom: "10%",
                                    "-webkit-border-radius": "4px",
                                    "-moz-border-radius": "4px",
                                    "border-radius": "4px"
                                });
                                dvJQuery(c.helper).children(0).append(b)
                            }
                        },
                        update: function (b, c) {
                            if (a.serverCtx.enablePageMoving && !a.hasPendingAction()) {
                                var d =
                                    c.item.index() + 1,
                                    e = a.GetSelectedThumbnailItems();
                                1 == e.length && e[0] === d || a.ajax.PostBaseRequest({
                                    url: a.appControllerPath + "/movepage" + (a.useIdInRoot ? "/1" : ""),
                                    data: {
                                        source: e,
                                        dest: d
                                    },
                                    success: function (b) {
                                        a.ajax.HandleServerContextResponse("string" === typeof b ? eval("(" + b + ")") : b, !1, !1, !0);
                                        if (a.callbacks.onThumbnailsOrderChanged) a.callbacks.onThumbnailsOrderChanged({
                                            source: e,
                                            destination: d
                                        })
                                    }
                                }, !1)
                            }
                        },
                        stop: function (b, c) {
                            c.item.attr("data-moving", "false");
                            b = a.GetSelectedThumbnailItems();
                            if (0 != b.length)
                                for (var d =
                                    a.Internal.Thumbnails.getThumbnailPage(c.item.get(0)), e = c.item, f = 0; f < b.length; f++) {
                                    var g = b[f],
                                        h = a.Internal.Thumbnails.getThumbnailFromPageNo(g);
                                    g != d && (g < d ? c.item.before(h) : e.after(h));
                                    e = h;
                                    e.css("opacity", "1")
                                }
                        }
                    })
            }
            a.events.pageRequestTimeout = null;
            a.events.onViewScroll = function () {
                a.events.pageRequestTimeout && clearTimeout(a.events.pageRequestTimeout);
                if (0 == this.ignoreScrollAt || this.scrollTop != this.ignoreScrollAt)
                    if (a.events.isPanning || (0 == a.serverCtx.hScrollbarMax && 0 != a.Internal.Coordinates.getViewerScrollLeft() &&
                        a.Internal.Coordinates.setViewerScrollLeft(0), 0 == a.serverCtx.vScrollbarMax && 0 != a.Internal.Coordinates.getViewerScrollTop() && a.Internal.Coordinates.setViewerScrollTop(0)), null != a.serverCtx && !a.serverCtx.singlePageView && a.serverCtx.documentLoaded && !(a.Internal.Files.uploading || a.ajax.downloading || null != a.selectNextPageActions && 0 != a.selectNextPageActions || null != a.selectPreviousPageActions && 0 != a.selectPreviousPageActions)) {
                        var b = -1;
                        if (null != a.cache.canvas)
                            for (var c = !1, e = a.Internal.Coordinates.getViewerScrollTop() +
                                a.dom.viewerArea.offsetHeight / 2, f = 0; f < a.cache.canvas.length; f++) {
                                for (var h = 0; h < a.cache.canvas[f].canvas.length; h++) {
                                    var k = parseFloat(a.cache.canvas[f].canvas[h].tile.style.top),
                                        l = k + parseFloat(a.cache.canvas[f].canvas[h].tile.style.height);
                                    if (k < e && l > e) {
                                        b = a.cache.canvas[f].pageNo;
                                        a.dom.updateSelectedPageFader(0, b);
                                        c = !0;
                                        break
                                    }
                                }
                                if (c) break
                            }
                        a.events.pageRequestTimeout = setTimeout(function () {
                            0 < b && b <= a.serverCtx.pageCount && b != a.GetLastPageNoRequest() ? a.SelectPageEx(b, !0, !1, !0, !0) : a.showVisiblePages(b)
                        }, a.fastMode ?
                                50 : 500)
                    }
            };
            dvJQuery(a.dom.viewerArea).bind("scroll", a.events.onViewScroll);
            //AGjs__changes for unique id
            dvJQuery(a.dom.viewerArea).dvContextMenu({
                idMenu: "viewerContextMenu" + sessionStorage.controlID,
                referer: a.dom.viewerArea,
                beforeShow: function () {
                    return null != a.Internal.Text.getSelectedText()
                },
                translateMouse: function (b) {
                    var c = a.dom.viewerArea.getBoundingClientRect();
                    b.x = b.x - c.left + a.dom.viewerArea.offsetLeft + 5;
                    b.y = b.y - c.top + a.dom.viewerArea.offsetTop + 5
                }
            });
            T(a);
            dvJQuery("#" + c).on("dragenter", function (a) {
                a.stopPropagation();
                a.preventDefault()
            });
            dvJQuery("#" + c).on("dragover", function (a) {
                a.stopPropagation();
                a.preventDefault()
            });
            if (G) dvJQuery("#" + c).on("drop", function (b) {
                b.originalEvent && b.originalEvent.dataTransfer && b.originalEvent.dataTransfer.files && (b.preventDefault(), (b = b.originalEvent.dataTransfer.files) && 1 <= b.length && a.Internal.Files.uploadFile(b[0], 0))
            });
            else dvJQuery("#" + c).on("drop", function (a) {
                a.preventDefault()
            });
            dvJQuery(a.dom.viewerArea).on("keydown", function (b) {
                (b.metaKey || b.ctrlKey) && "c" === String.fromCharCode(b.which).toLowerCase() &&
                    a.CopySelectedTextToClipboard();
            });
            a.dom.pageNavBox && a.dom.pageNavBox.id && dvJQuery(a.dom.pageNavBox).keypress(function (b) {
                13 == (b.keyCode || b.which) && (b.preventDefault(), b = parseInt(a.dom.pageNavBox.value), a.serverCtx.documentLoaded && b != a.GetLastPageNoRequest() ? 0 < b && b <= a.serverCtx.pageCount ? (a.dom.pageNavBox.value = b, a.SelectPage(b)) : a.DisplayError(a.Localize("error_invalid_pages_number") + " [1 - " + a.serverCtx.pageCount.toString() + "]") : a.dom.pageNavBox.value = b)
            });
            a.dom.pageNavBoxMobile && a.dom.pageNavBoxMobile.id &&
                dvJQuery(a.dom.pageNavBoxMobile).keypress(function (b) {
                    13 == (b.keyCode || b.which) && (b.preventDefault(), b = parseInt(a.dom.pageNavBoxMobile.value), a.serverCtx.documentLoaded && b != a.GetLastPageNoRequest() ? 0 < b && b <= a.serverCtx.pageCount ? (a.dom.pageNavBoxMobile.value = b, a.SelectPage(b)) : a.DisplayError(a.Localize("error_invalid_pages_number") + " [1 - " + a.serverCtx.pageCount.toString() + "]") : a.dom.pageNavBoxMobile.value = b)
                });
            a.dom.searchValueInput && dvJQuery(a.dom.searchValueInput).keypress(function (b) {
                if (13 == (b.keyCode ||
                    b.which)) {
                    b.preventDefault();
                    b = a.dom.searchValueInput.value;
                    var c = a.dom.searchWholeWordInput.checked,
                        d = a.dom.searchCaseSensitiveInput.checked,
                        e = a.dom.searchAnyWordInput.checked,
                        f = dvJQuery(a.dom.searchPageSelect).filter(":checked").val();
                    a.SubmitSearch(b, c, d, e, f)
                }
            });
            a.dom.addressBar && dvJQuery(a.dom.addressBar).keypress(function (b) {
                13 == (b.keyCode || b.which) && (b.preventDefault(), a.LoadFromUri(a.dom.addressBar.value, "", null, null))
            });
            "ontouchstart" in document.documentElement ? (dvJQuery(a.dom.mainArea).find(".dv-button").on("touchstart",
                function (b) {
                    dvJQuery(this).addClass("button_hover");
                    a.dom.updateButtons()
                }), dvJQuery(a.dom.mainArea).find(".dv-button").on("touchend", function (b) {
                    dvJQuery(this).removeClass("button_hover");
                    a.dom.updateButtons()
                })) : dvJQuery(a.dom.mainArea).find(".dv-button").hover(function () {
                    dvJQuery(this).addClass("button_hover");
                    a.dom.updateButtons()
                }, function () {
                    dvJQuery(this).removeClass("button_hover");
                    a.dom.updateButtons()
                });
            a.dom.leftSideArea && (dvJQuery(a.dom.leftSideArea).resizable({
                containment: dvJQuery(a.dom.controlArea),
                handles: {
                    e: dvJQuery(a.dom.leftSideResizeBar)
                },
                minWidth: null != a.dom.snapinButtonStrip ? a.dom.snapinButtonStrip.offsetWidth : 0,
                start: function (b, c) {
                    a.hasPendingAction() ? b.preventDefault() : a.events.isResizingUI = !0
                },
                resize: function (b, c) {
                    b = null != a.dom.snapinButtonStrip ? a.dom.snapinButtonStrip.offsetWidth : 0;
                    c.size.width < b + 30 && (c.size.width = b)
                },
                stop: function (b, c) {
                    a.events.isResizingUI = !1;
                    c.size.width < (null != a.dom.snapinButtonStrip ? a.dom.snapinButtonStrip.offsetWidth : 0) + 30 && a.SetSnapinsPanelVisibility(!1, c.originalSize.width);
                    a.events.onNewViewerSize();
                    a.dom.sidePanelResized()
                }
            }), a.dom.searchArea && dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({
                setActive: function () {
                    dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function (b) {
                        dvJQuery(this).css("background-color", "transparent");
                        dvJQuery(this).css("background-image", "none");
                        dvJQuery(this).css("background-repeat", "repeat-x");
                        dvJQuery(this).css("border", "1px solid transparent");
                        dvJQuery(this).css("fill", a.dom.UIconfig.strokeColor)
                    });
                    dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function (b) {
                        dvJQuery(this).css("background-color",
                            "transparent");
                        dvJQuery(this).css("background-image", "-moz-linear-gradient(top, " + a.dom.UIconfig.panelBackColor + "," + a.dom.UIconfig.panelDarkerBackColor + ")");
                        dvJQuery(this).css("background-image", "-webkit-linear-gradient(top, " + a.dom.UIconfig.panelBackColor + "," + a.dom.UIconfig.panelDarkerBackColor + ")");
                        dvJQuery(this).css("background-image", "-ms-linear-gradient(top, " + a.dom.UIconfig.panelBackColor + " 0%," + a.dom.UIconfig.panelDarkerBackColor + " 100%)");
                        dvJQuery(this).css("background-image", "-o-linear-gradient(top, " +
                            a.dom.UIconfig.panelBackColor + "," + a.dom.UIconfig.panelDarkerBackColor + ")");
                        dvJQuery(this).css("background-image", "linear-gradient(to bottom, " + a.dom.UIconfig.panelBackColor + "," + a.dom.UIconfig.panelDarkerBackColor + ")");
                        dvJQuery(this).css("background-repeat", "repeat-x");
                        dvJQuery(this).css("border", "1px solid " + a.dom.UIconfig.miscBorderColor);
                        dvJQuery(this).css("fill", a.dom.UIconfig.activeSelectedColor)
                    })
                }
            }), a.dom.UIconfig.collapsedSnapInPanel && (dvJQuery(a.dom.leftSideArea).resizable("disable"), a.dom.leftSideArea.oldWidth =
                a.dom.UIconfig.snapInPanelDefaultWidth));
            b = document.getElementsByName("inputSelectedPages" + sessionStorage.controlID);
            for (var R = 0; R < b.length; R++) b[R].onchange = function (b) {
                a.pageRangeSelection(this.value, document.getElementById("savePageRangeInput" + sessionStorage.controlID))
            };
            document.getElementById("savePageRangeInput" + sessionStorage.controlID).onkeyup = function (b) {
                a.inputPageRangeControl(b.target)
            };
            b = document.getElementsByName("inputPrintSelectedPages" + sessionStorage.controlID);
            for (R = 0; R < b.length; R++) b[R].onchange = function (b) {
                a.pageRangeSelection(this.value,
                    a.dom.printPageRangeInput)
            };
            a.dom.printPageRangeInput.onkeyup = function (b) {
                a.inputPageRangeControl(b.target)
            };
            a.dom.progressbar = new DocuViewareProgressbar({
                bg: "#acf",
                target: a.dom.controlArea,
                id: "progressbar" + sessionStorage.controlID
            });
            //AGjs__change 
            //validate the comment textbox and a
            //AG_js
            //Comment popup
            //not allow null comment creation
            console.log(document.getElementById("commentMessageInput" + sessionStorage.controlID))
            document.getElementById("commentMessageInput" + sessionStorage.controlID).onkeyup = function (b) {

                let val = b.target.value;

                if (val === "" || val === null)
                {
                    dvJQuery(a.dom.commentMessageInput).css("border", "1px solid red");
                    $("#comment_error").remove();
                    dvJQuery(a.dom.commentMessageInput).after('<div id="comment_error">Message should not be empty.</div>');

                } else
                {
                    dvJQuery(a.dom.commentMessageInput).css("border", "1px solid rgb(100, 100, 100)");
                    $("#comment_error").remove();
                }
            };
            ////not allow null Author comment creation
            document.getElementById("commentAuthorInput" + sessionStorage.controlID).onkeyup = function (b)
            {
                let val = b.target.value;

                if (val === "" || val === null)
                {
                    dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid red");
                    $("#author_error").remove();
                    dvJQuery(a.dom.commentsAuthorInput).after('<div  id="author_error">Author should not be empty.</div>');

                } else {
                    dvJQuery(a.dom.commentsAuthorInput).css("border", "1px solid rgb(100, 100, 100)");
                    $("#author_error").remove();
                }

            };
            //END Of AG_js changes for comment Creation
            "undefined" != typeof a.dom.toolBarArea && null != a.dom.toolBarArea && dvJQuery(a.dom.toolBarArea).bind("touchstart", function (a) {
                var b = a.timeStamp,
                    c = dvJQuery(this).data("lastTouch") || b;
                c = b - c;
                var d = a.originalEvent.touches.length;
                dvJQuery(this).data("lastTouch", b);
                !c || 500 < c || 1 < d || (a.preventDefault(),
                    dvJQuery(this).trigger("click").trigger("click"))
            });
            a.dom.viewerArea.cursorMgr = CreateDocuViewareCursorManager(a.dom.viewerArea, a.isIEorEdge);
            a.dom.updateSinglePageModeButton();
            a.events.onLoad(w);
            DocuViewareUtilities.addEvent(window, "resize", a.events.onResize);
            document.getElementById(c).control = a
            allPdfComp = a;
            return a
        }
    };
//AGjs__changes for copy paste annot by keys
var CopyWithCtrlKey = false;
var PasteWithCtrlKey = false;
var tempObject = '';
var customSelectedAnnotation = "";

//AGjs__changes for copy and paste annotation
function fnCopyAnnotTest() {
    var e = document.getElementById(sessionStorage.controlID);
    customSelectedAnnotation = JSON.stringify(e.control.Internal.Annotations.selected);

    if (e) { e.control.CopyWithCtrlKey(); }
    CopyWithCtrlKey = true;
    tempObject = e.control;
}
//AGjs__changes for copy and paste annotation
$("#main" + sessionStorage.controlID).keydown(function (event) {
    if ((event.keyCode == 107 && event.ctrlKey == true) || (event.keyCode == 109 && event.ctrlKey == true)) {
        event.preventDefault();
    }

    $("#main" + sessionStorage.controlID).bind('mousewheel DOMMouseScroll', function (event) {
        if (event.ctrlKey == true) {
            event.preventDefault();
        }
    });
});

//AGjs_changes get selected annot from db
let getSavedSelectedAnnotInDB = {};
function fnToSetUpTextAnnot(type)
{
    if (type === 8)
    {
        window.showProgress();
        const urlBase = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '') + "/api/" + "AnnotationData/getAnotData";
        try {
            $.ajax({
                headers: {
                    "Authorization": sessionStorage.getItem("authorizeToken"),
                },
                type: "POST",
                async: false,
                url: urlBase,
                contentType: 'application/json; charset=utf-8',
                dataType: "json",
                data: JSON.stringify({ AnnotationID: allPdfComp.Internal.Annotations.selected[0].annotApp.id }),
                success: function (response) {
                    window.hideProgress();

                    if (response.status == 1) {
                        let jsonData = response.value;
                        if (jsonData && typeof jsonData === "object") {
                            //if we have response means that have Mapping operation in the Database
                            window.isHaveMapping = true;

                            //Disabled the value when edit
                            $("#annot_Mapcheck_input" + sessionStorage.controlID).prop("checked", true).prop("disabled", true);
                            $("#annot_SrcText_control" + sessionStorage.controlID+" input").prop("disabled",true);
                            $("#annot_SrcText_control" + sessionStorage.controlID+" span").css("pointer-events", "none");

                            let sourcedataSet = jsonData.sourceDataSet;
                            if (sourcedataSet) {
                                jQuery("#annot_text_input" + controlID).attr("data", 0);

                                fnToFormTheSourceFieldByDBValue(jsonData.additionalSourceData);
                            }
                            if (jsonData.mappingData && typeof jsonData.mappingData === "object") {
                                $("#annot_text_input" + controlID).attr("data",
                                    JSON.stringify({
                                        StdDomainMetadataID: jsonData.mappingData.cdiscDataStdDomainMetadataID,
                                        StdVariableMetadataID: jsonData.mappingData.cdiscDataStdVariableMetadataID
                                    }));
                            }

                        }
                    }
                    else {
                        window.isHaveMapping = false;
                        let annot_SrcText = dvJQuery("#annot_SrcText" + sessionStorage.controlID);
                        $("#annot_SrcText" + sessionStorage.controlID).val("");
                        annot_SrcText.css("display", "none");
                        $("#annot_Mapcheck" + sessionStorage.controlID).hide();
                        $("#annot_PredictText" + sessionStorage.controlID).hide()
                    }
                },
                beforeSend: function () {
                },
                complete: function () {
                    window.hideProgress();

                    getAnotTextJsonData = {};
                },
                error: function (x, status, error) {
                    $("#annot_Mapcheck_input" + sessionStorage.controlID).prop("checked", true).prop("disabled", true);
                    $("#annot_SrcText_control" + sessionStorage.controlID + " input").prop("disabled", true);
                    $("#annot_SrcText_control" + sessionStorage.controlID + " span").css("pointer-events", "none");
                    console.log(x);
                    console.log(status)
                    console.log(error)
                }
            })
        }
        catch (e) {
            window.hideProgress();
        }
    }
}

//AGjs__SetUpTextAnnotWith DB value

//AGjs__changes for position of small circle
function validationForCircleShouldBe(data, tempData) {

    data = JSON.parse(data);

    //for X axis here left is x_axis (starting point)
    if (data.Subject === "00") {
        data.Left = tempData.bbox.Left;
        data.Top = tempData.bbox.Top;
    } else if (data.Subject === "01") {
        data.Left = tempData.bbox.Left;
        data.Top = tempData.bbox.Top + tempData.bbox.Height;
    } else if (data.Subject === "10") {
        data.Left = tempData.bbox.Left + tempData.bbox.Width;
        data.Top = tempData.bbox.Top;
    } else if (data.Subject === "11") {
        data.Left = tempData.bbox.Left + tempData.bbox.Width;
        data.Top = tempData.bbox.Top + tempData.bbox.Height;
    }

    //if (Math.round(data.Top) != Math.round(selected.annotbaserect.top)) {
    //    data.Top = tempData.bbox.Top + tempData.bbox.Height;
    //} else {
    //    data.Top = tempData.bbox.Top;
    //}
    //if (Math.round(data.Left) != Math.round(selected.annotbaserect.left)) {
    //    data.Left = tempData.bbox.Left + tempData.bbox.Width;
    //} else {
    //    data.Left = tempData.bbox.Left;
    //}
    return data;
}

function toFixedCustom(num, fixed) {
    var re = new RegExp('^-?\\d+(?:\.\\d{0,' + (fixed || -1) + '})?');
    console.log(num.toString().match(re)[0])
    return num.toString().match(re)[0];
}