{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as nodes from '../parser/cssNodes.js';\nimport { Scanner } from '../parser/cssScanner.js';\nimport * as languageFacts from \"../languageFacts/facts.js\";\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar Element = /** @class */function () {\n  function Element() {\n    this.parent = null;\n    this.children = null;\n    this.attributes = null;\n  }\n  Element.prototype.findAttribute = function (name) {\n    if (this.attributes) {\n      for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n        var attribute = _a[_i];\n        if (attribute.name === name) {\n          return attribute.value;\n        }\n      }\n    }\n    return null;\n  };\n  Element.prototype.addChild = function (child) {\n    if (child instanceof Element) {\n      child.parent = this;\n    }\n    if (!this.children) {\n      this.children = [];\n    }\n    this.children.push(child);\n  };\n  Element.prototype.append = function (text) {\n    if (this.attributes) {\n      var last = this.attributes[this.attributes.length - 1];\n      last.value = last.value + text;\n    }\n  };\n  Element.prototype.prepend = function (text) {\n    if (this.attributes) {\n      var first = this.attributes[0];\n      first.value = text + first.value;\n    }\n  };\n  Element.prototype.findRoot = function () {\n    var curr = this;\n    while (curr.parent && !(curr.parent instanceof RootElement)) {\n      curr = curr.parent;\n    }\n    return curr;\n  };\n  Element.prototype.removeChild = function (child) {\n    if (this.children) {\n      var index = this.children.indexOf(child);\n      if (index !== -1) {\n        this.children.splice(index, 1);\n        return true;\n      }\n    }\n    return false;\n  };\n  Element.prototype.addAttr = function (name, value) {\n    if (!this.attributes) {\n      this.attributes = [];\n    }\n    for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n      var attribute = _a[_i];\n      if (attribute.name === name) {\n        attribute.value += ' ' + value;\n        return;\n      }\n    }\n    this.attributes.push({\n      name: name,\n      value: value\n    });\n  };\n  Element.prototype.clone = function (cloneChildren) {\n    if (cloneChildren === void 0) {\n      cloneChildren = true;\n    }\n    var elem = new Element();\n    if (this.attributes) {\n      elem.attributes = [];\n      for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n        var attribute = _a[_i];\n        elem.addAttr(attribute.name, attribute.value);\n      }\n    }\n    if (cloneChildren && this.children) {\n      elem.children = [];\n      for (var index = 0; index < this.children.length; index++) {\n        elem.addChild(this.children[index].clone());\n      }\n    }\n    return elem;\n  };\n  Element.prototype.cloneWithParent = function () {\n    var clone = this.clone(false);\n    if (this.parent && !(this.parent instanceof RootElement)) {\n      var parentClone = this.parent.cloneWithParent();\n      parentClone.addChild(clone);\n    }\n    return clone;\n  };\n  return Element;\n}();\nexport { Element };\nvar RootElement = /** @class */function (_super) {\n  __extends(RootElement, _super);\n  function RootElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return RootElement;\n}(Element);\nexport { RootElement };\nvar LabelElement = /** @class */function (_super) {\n  __extends(LabelElement, _super);\n  function LabelElement(label) {\n    var _this = _super.call(this) || this;\n    _this.addAttr('name', label);\n    return _this;\n  }\n  return LabelElement;\n}(Element);\nexport { LabelElement };\nvar MarkedStringPrinter = /** @class */function () {\n  function MarkedStringPrinter(quote) {\n    this.quote = quote;\n    this.result = [];\n    // empty\n  }\n\n  MarkedStringPrinter.prototype.print = function (element) {\n    this.result = [];\n    if (element instanceof RootElement) {\n      if (element.children) {\n        this.doPrint(element.children, 0);\n      }\n    } else {\n      this.doPrint([element], 0);\n    }\n    var value = this.result.join('\\n');\n    return [{\n      language: 'html',\n      value: value\n    }];\n  };\n  MarkedStringPrinter.prototype.doPrint = function (elements, indent) {\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n      var element = elements_1[_i];\n      this.doPrintElement(element, indent);\n      if (element.children) {\n        this.doPrint(element.children, indent + 1);\n      }\n    }\n  };\n  MarkedStringPrinter.prototype.writeLine = function (level, content) {\n    var indent = new Array(level + 1).join('  ');\n    this.result.push(indent + content);\n  };\n  MarkedStringPrinter.prototype.doPrintElement = function (element, indent) {\n    var name = element.findAttribute('name');\n    // special case: a simple label\n    if (element instanceof LabelElement || name === \"\\u2026\") {\n      this.writeLine(indent, name);\n      return;\n    }\n    // the real deal\n    var content = ['<'];\n    // element name\n    if (name) {\n      content.push(name);\n    } else {\n      content.push('element');\n    }\n    // attributes\n    if (element.attributes) {\n      for (var _i = 0, _a = element.attributes; _i < _a.length; _i++) {\n        var attr = _a[_i];\n        if (attr.name !== 'name') {\n          content.push(' ');\n          content.push(attr.name);\n          var value = attr.value;\n          if (value) {\n            content.push('=');\n            content.push(quotes.ensure(value, this.quote));\n          }\n        }\n      }\n    }\n    content.push('>');\n    this.writeLine(indent, content.join(''));\n  };\n  return MarkedStringPrinter;\n}();\nvar quotes;\n(function (quotes) {\n  function ensure(value, which) {\n    return which + remove(value) + which;\n  }\n  quotes.ensure = ensure;\n  function remove(value) {\n    var match = value.match(/^['\"](.*)[\"']$/);\n    if (match) {\n      return match[1];\n    }\n    return value;\n  }\n  quotes.remove = remove;\n})(quotes || (quotes = {}));\nvar Specificity = /** @class */function () {\n  function Specificity() {\n    /** Count of identifiers (e.g., `#app`) */\n    this.id = 0;\n    /** Count of attributes (`[type=\"number\"]`), classes (`.container-fluid`), and pseudo-classes (`:hover`) */\n    this.attr = 0;\n    /** Count of tag names (`div`), and pseudo-elements (`::before`) */\n    this.tag = 0;\n  }\n  return Specificity;\n}();\nexport function toElement(node, parentElement) {\n  var result = new Element();\n  for (var _i = 0, _a = node.getChildren(); _i < _a.length; _i++) {\n    var child = _a[_i];\n    switch (child.type) {\n      case nodes.NodeType.SelectorCombinator:\n        if (parentElement) {\n          var segments = child.getText().split('&');\n          if (segments.length === 1) {\n            // should not happen\n            result.addAttr('name', segments[0]);\n            break;\n          }\n          result = parentElement.cloneWithParent();\n          if (segments[0]) {\n            var root = result.findRoot();\n            root.prepend(segments[0]);\n          }\n          for (var i = 1; i < segments.length; i++) {\n            if (i > 1) {\n              var clone = parentElement.cloneWithParent();\n              result.addChild(clone.findRoot());\n              result = clone;\n            }\n            result.append(segments[i]);\n          }\n        }\n        break;\n      case nodes.NodeType.SelectorPlaceholder:\n        if (child.matches('@at-root')) {\n          return result;\n        }\n      // fall through\n      case nodes.NodeType.ElementNameSelector:\n        var text = child.getText();\n        result.addAttr('name', text === '*' ? 'element' : unescape(text));\n        break;\n      case nodes.NodeType.ClassSelector:\n        result.addAttr('class', unescape(child.getText().substring(1)));\n        break;\n      case nodes.NodeType.IdentifierSelector:\n        result.addAttr('id', unescape(child.getText().substring(1)));\n        break;\n      case nodes.NodeType.MixinDeclaration:\n        result.addAttr('class', child.getName());\n        break;\n      case nodes.NodeType.PseudoSelector:\n        result.addAttr(unescape(child.getText()), '');\n        break;\n      case nodes.NodeType.AttributeSelector:\n        var selector = child;\n        var identifier = selector.getIdentifier();\n        if (identifier) {\n          var expression = selector.getValue();\n          var operator = selector.getOperator();\n          var value = void 0;\n          if (expression && operator) {\n            switch (unescape(operator.getText())) {\n              case '|=':\n                // excatly or followed by -words\n                value = quotes.remove(unescape(expression.getText())) + \"-\\u2026\";\n                break;\n              case '^=':\n                // prefix\n                value = quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                break;\n              case '$=':\n                // suffix\n                value = \"\\u2026\" + quotes.remove(unescape(expression.getText()));\n                break;\n              case '~=':\n                // one of a list of words\n                value = \" \\u2026 \" + quotes.remove(unescape(expression.getText())) + \" \\u2026 \";\n                break;\n              case '*=':\n                // substring\n                value = \"\\u2026\" + quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                break;\n              default:\n                value = quotes.remove(unescape(expression.getText()));\n                break;\n            }\n          }\n          result.addAttr(unescape(identifier.getText()), value);\n        }\n        break;\n    }\n  }\n  return result;\n}\nfunction unescape(content) {\n  var scanner = new Scanner();\n  scanner.setSource(content);\n  var token = scanner.scanUnquotedString();\n  if (token) {\n    return token.text;\n  }\n  return content;\n}\nfunction isPseudoElementIdentifier(text) {\n  var match = text.match(/^::?([\\w-]+)/);\n  if (!match) {\n    return false;\n  }\n  return !!languageFacts.cssDataManager.getPseudoElement(\"::\" + match[1]);\n}\nfunction selectorToSpecificityMarkedString(node) {\n  //https://www.w3.org/TR/selectors-3/#specificity\n  function calculateScore(node) {\n    node.getChildren().forEach(function (element) {\n      switch (element.type) {\n        case nodes.NodeType.IdentifierSelector:\n          specificity.id++;\n          break;\n        case nodes.NodeType.ClassSelector:\n        case nodes.NodeType.AttributeSelector:\n          specificity.attr++;\n          break;\n        case nodes.NodeType.ElementNameSelector:\n          //ignore universal selector\n          if (element.matches(\"*\")) {\n            break;\n          }\n          specificity.tag++;\n          break;\n        case nodes.NodeType.PseudoSelector:\n          var text = element.getText();\n          if (isPseudoElementIdentifier(text)) {\n            specificity.tag++; // pseudo element\n          } else {\n            //ignore psuedo class NOT\n            if (text.match(/^:not/i)) {\n              break;\n            }\n            specificity.attr++; //pseudo class\n          }\n\n          break;\n      }\n      if (element.getChildren().length > 0) {\n        calculateScore(element);\n      }\n    });\n  }\n  var specificity = new Specificity();\n  calculateScore(node);\n  return localize('specificity', \"[Selector Specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity): ({0}, {1}, {2})\", specificity.id, specificity.attr, specificity.tag);\n}\nexport function selectorToMarkedString(node) {\n  var root = selectorToElement(node);\n  if (root) {\n    var markedStrings = new MarkedStringPrinter('\"').print(root);\n    markedStrings.push(selectorToSpecificityMarkedString(node));\n    return markedStrings;\n  } else {\n    return [];\n  }\n}\nexport function simpleSelectorToMarkedString(node) {\n  var element = toElement(node);\n  var markedStrings = new MarkedStringPrinter('\"').print(element);\n  markedStrings.push(selectorToSpecificityMarkedString(node));\n  return markedStrings;\n}\nvar SelectorElementBuilder = /** @class */function () {\n  function SelectorElementBuilder(element) {\n    this.prev = null;\n    this.element = element;\n  }\n  SelectorElementBuilder.prototype.processSelector = function (selector) {\n    var parentElement = null;\n    if (!(this.element instanceof RootElement)) {\n      if (selector.getChildren().some(function (c) {\n        return c.hasChildren() && c.getChild(0).type === nodes.NodeType.SelectorCombinator;\n      })) {\n        var curr = this.element.findRoot();\n        if (curr.parent instanceof RootElement) {\n          parentElement = this.element;\n          this.element = curr.parent;\n          this.element.removeChild(curr);\n          this.prev = null;\n        }\n      }\n    }\n    for (var _i = 0, _a = selector.getChildren(); _i < _a.length; _i++) {\n      var selectorChild = _a[_i];\n      if (selectorChild instanceof nodes.SimpleSelector) {\n        if (this.prev instanceof nodes.SimpleSelector) {\n          var labelElement = new LabelElement(\"\\u2026\");\n          this.element.addChild(labelElement);\n          this.element = labelElement;\n        } else if (this.prev && (this.prev.matches('+') || this.prev.matches('~')) && this.element.parent) {\n          this.element = this.element.parent;\n        }\n        if (this.prev && this.prev.matches('~')) {\n          this.element.addChild(toElement(selectorChild));\n          this.element.addChild(new LabelElement(\"\\u22EE\"));\n        }\n        var thisElement = toElement(selectorChild, parentElement);\n        var root = thisElement.findRoot();\n        this.element.addChild(root);\n        this.element = thisElement;\n      }\n      if (selectorChild instanceof nodes.SimpleSelector || selectorChild.type === nodes.NodeType.SelectorCombinatorParent || selectorChild.type === nodes.NodeType.SelectorCombinatorShadowPiercingDescendant || selectorChild.type === nodes.NodeType.SelectorCombinatorSibling || selectorChild.type === nodes.NodeType.SelectorCombinatorAllSiblings) {\n        this.prev = selectorChild;\n      }\n    }\n  };\n  return SelectorElementBuilder;\n}();\nfunction isNewSelectorContext(node) {\n  switch (node.type) {\n    case nodes.NodeType.MixinDeclaration:\n    case nodes.NodeType.Stylesheet:\n      return true;\n  }\n  return false;\n}\nexport function selectorToElement(node) {\n  if (node.matches('@at-root')) {\n    return null;\n  }\n  var root = new RootElement();\n  var parentRuleSets = [];\n  var ruleSet = node.getParent();\n  if (ruleSet instanceof nodes.RuleSet) {\n    var parent = ruleSet.getParent(); // parent of the selector's ruleset\n    while (parent && !isNewSelectorContext(parent)) {\n      if (parent instanceof nodes.RuleSet) {\n        if (parent.getSelectors().matches('@at-root')) {\n          break;\n        }\n        parentRuleSets.push(parent);\n      }\n      parent = parent.getParent();\n    }\n  }\n  var builder = new SelectorElementBuilder(root);\n  for (var i = parentRuleSets.length - 1; i >= 0; i--) {\n    var selector = parentRuleSets[i].getSelectors().getChild(0);\n    if (selector) {\n      builder.processSelector(selector);\n    }\n  }\n  builder.processSelector(node);\n  return root;\n}","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","nodes","Scanner","languageFacts","nls","localize","loadMessageBundle","Element","parent","children","attributes","findAttribute","name","_i","_a","length","attribute","value","addChild","child","push","append","text","last","prepend","first","findRoot","curr","RootElement","removeChild","index","indexOf","splice","addAttr","clone","cloneChildren","elem","cloneWithParent","parentClone","_super","apply","arguments","LabelElement","label","_this","call","MarkedStringPrinter","quote","result","print","element","doPrint","join","language","elements","indent","elements_1","doPrintElement","writeLine","level","content","attr","quotes","ensure","which","remove","match","Specificity","id","tag","toElement","node","parentElement","getChildren","type","NodeType","SelectorCombinator","segments","getText","split","root","i","SelectorPlaceholder","matches","ElementNameSelector","unescape","ClassSelector","substring","IdentifierSelector","MixinDeclaration","getName","PseudoSelector","AttributeSelector","selector","identifier","getIdentifier","expression","getValue","operator","getOperator","scanner","setSource","token","scanUnquotedString","isPseudoElementIdentifier","cssDataManager","getPseudoElement","selectorToSpecificityMarkedString","calculateScore","forEach","specificity","selectorToMarkedString","selectorToElement","markedStrings","simpleSelectorToMarkedString","SelectorElementBuilder","prev","processSelector","some","c","hasChildren","getChild","selectorChild","SimpleSelector","labelElement","thisElement","SelectorCombinatorParent","SelectorCombinatorShadowPiercingDescendant","SelectorCombinatorSibling","SelectorCombinatorAllSiblings","isNewSelectorContext","Stylesheet","parentRuleSets","ruleSet","getParent","RuleSet","getSelectors","builder"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/selectorPrinting.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as nodes from '../parser/cssNodes.js';\nimport { Scanner } from '../parser/cssScanner.js';\nimport * as languageFacts from \"../languageFacts/facts.js\";\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar Element = /** @class */ (function () {\n    function Element() {\n        this.parent = null;\n        this.children = null;\n        this.attributes = null;\n    }\n    Element.prototype.findAttribute = function (name) {\n        if (this.attributes) {\n            for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n                var attribute = _a[_i];\n                if (attribute.name === name) {\n                    return attribute.value;\n                }\n            }\n        }\n        return null;\n    };\n    Element.prototype.addChild = function (child) {\n        if (child instanceof Element) {\n            child.parent = this;\n        }\n        if (!this.children) {\n            this.children = [];\n        }\n        this.children.push(child);\n    };\n    Element.prototype.append = function (text) {\n        if (this.attributes) {\n            var last = this.attributes[this.attributes.length - 1];\n            last.value = last.value + text;\n        }\n    };\n    Element.prototype.prepend = function (text) {\n        if (this.attributes) {\n            var first = this.attributes[0];\n            first.value = text + first.value;\n        }\n    };\n    Element.prototype.findRoot = function () {\n        var curr = this;\n        while (curr.parent && !(curr.parent instanceof RootElement)) {\n            curr = curr.parent;\n        }\n        return curr;\n    };\n    Element.prototype.removeChild = function (child) {\n        if (this.children) {\n            var index = this.children.indexOf(child);\n            if (index !== -1) {\n                this.children.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Element.prototype.addAttr = function (name, value) {\n        if (!this.attributes) {\n            this.attributes = [];\n        }\n        for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n            var attribute = _a[_i];\n            if (attribute.name === name) {\n                attribute.value += ' ' + value;\n                return;\n            }\n        }\n        this.attributes.push({ name: name, value: value });\n    };\n    Element.prototype.clone = function (cloneChildren) {\n        if (cloneChildren === void 0) { cloneChildren = true; }\n        var elem = new Element();\n        if (this.attributes) {\n            elem.attributes = [];\n            for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n                var attribute = _a[_i];\n                elem.addAttr(attribute.name, attribute.value);\n            }\n        }\n        if (cloneChildren && this.children) {\n            elem.children = [];\n            for (var index = 0; index < this.children.length; index++) {\n                elem.addChild(this.children[index].clone());\n            }\n        }\n        return elem;\n    };\n    Element.prototype.cloneWithParent = function () {\n        var clone = this.clone(false);\n        if (this.parent && !(this.parent instanceof RootElement)) {\n            var parentClone = this.parent.cloneWithParent();\n            parentClone.addChild(clone);\n        }\n        return clone;\n    };\n    return Element;\n}());\nexport { Element };\nvar RootElement = /** @class */ (function (_super) {\n    __extends(RootElement, _super);\n    function RootElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return RootElement;\n}(Element));\nexport { RootElement };\nvar LabelElement = /** @class */ (function (_super) {\n    __extends(LabelElement, _super);\n    function LabelElement(label) {\n        var _this = _super.call(this) || this;\n        _this.addAttr('name', label);\n        return _this;\n    }\n    return LabelElement;\n}(Element));\nexport { LabelElement };\nvar MarkedStringPrinter = /** @class */ (function () {\n    function MarkedStringPrinter(quote) {\n        this.quote = quote;\n        this.result = [];\n        // empty\n    }\n    MarkedStringPrinter.prototype.print = function (element) {\n        this.result = [];\n        if (element instanceof RootElement) {\n            if (element.children) {\n                this.doPrint(element.children, 0);\n            }\n        }\n        else {\n            this.doPrint([element], 0);\n        }\n        var value = this.result.join('\\n');\n        return [{ language: 'html', value: value }];\n    };\n    MarkedStringPrinter.prototype.doPrint = function (elements, indent) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            this.doPrintElement(element, indent);\n            if (element.children) {\n                this.doPrint(element.children, indent + 1);\n            }\n        }\n    };\n    MarkedStringPrinter.prototype.writeLine = function (level, content) {\n        var indent = new Array(level + 1).join('  ');\n        this.result.push(indent + content);\n    };\n    MarkedStringPrinter.prototype.doPrintElement = function (element, indent) {\n        var name = element.findAttribute('name');\n        // special case: a simple label\n        if (element instanceof LabelElement || name === '\\u2026') {\n            this.writeLine(indent, name);\n            return;\n        }\n        // the real deal\n        var content = ['<'];\n        // element name\n        if (name) {\n            content.push(name);\n        }\n        else {\n            content.push('element');\n        }\n        // attributes\n        if (element.attributes) {\n            for (var _i = 0, _a = element.attributes; _i < _a.length; _i++) {\n                var attr = _a[_i];\n                if (attr.name !== 'name') {\n                    content.push(' ');\n                    content.push(attr.name);\n                    var value = attr.value;\n                    if (value) {\n                        content.push('=');\n                        content.push(quotes.ensure(value, this.quote));\n                    }\n                }\n            }\n        }\n        content.push('>');\n        this.writeLine(indent, content.join(''));\n    };\n    return MarkedStringPrinter;\n}());\nvar quotes;\n(function (quotes) {\n    function ensure(value, which) {\n        return which + remove(value) + which;\n    }\n    quotes.ensure = ensure;\n    function remove(value) {\n        var match = value.match(/^['\"](.*)[\"']$/);\n        if (match) {\n            return match[1];\n        }\n        return value;\n    }\n    quotes.remove = remove;\n})(quotes || (quotes = {}));\nvar Specificity = /** @class */ (function () {\n    function Specificity() {\n        /** Count of identifiers (e.g., `#app`) */\n        this.id = 0;\n        /** Count of attributes (`[type=\"number\"]`), classes (`.container-fluid`), and pseudo-classes (`:hover`) */\n        this.attr = 0;\n        /** Count of tag names (`div`), and pseudo-elements (`::before`) */\n        this.tag = 0;\n    }\n    return Specificity;\n}());\nexport function toElement(node, parentElement) {\n    var result = new Element();\n    for (var _i = 0, _a = node.getChildren(); _i < _a.length; _i++) {\n        var child = _a[_i];\n        switch (child.type) {\n            case nodes.NodeType.SelectorCombinator:\n                if (parentElement) {\n                    var segments = child.getText().split('&');\n                    if (segments.length === 1) {\n                        // should not happen\n                        result.addAttr('name', segments[0]);\n                        break;\n                    }\n                    result = parentElement.cloneWithParent();\n                    if (segments[0]) {\n                        var root = result.findRoot();\n                        root.prepend(segments[0]);\n                    }\n                    for (var i = 1; i < segments.length; i++) {\n                        if (i > 1) {\n                            var clone = parentElement.cloneWithParent();\n                            result.addChild(clone.findRoot());\n                            result = clone;\n                        }\n                        result.append(segments[i]);\n                    }\n                }\n                break;\n            case nodes.NodeType.SelectorPlaceholder:\n                if (child.matches('@at-root')) {\n                    return result;\n                }\n            // fall through\n            case nodes.NodeType.ElementNameSelector:\n                var text = child.getText();\n                result.addAttr('name', text === '*' ? 'element' : unescape(text));\n                break;\n            case nodes.NodeType.ClassSelector:\n                result.addAttr('class', unescape(child.getText().substring(1)));\n                break;\n            case nodes.NodeType.IdentifierSelector:\n                result.addAttr('id', unescape(child.getText().substring(1)));\n                break;\n            case nodes.NodeType.MixinDeclaration:\n                result.addAttr('class', child.getName());\n                break;\n            case nodes.NodeType.PseudoSelector:\n                result.addAttr(unescape(child.getText()), '');\n                break;\n            case nodes.NodeType.AttributeSelector:\n                var selector = child;\n                var identifier = selector.getIdentifier();\n                if (identifier) {\n                    var expression = selector.getValue();\n                    var operator = selector.getOperator();\n                    var value = void 0;\n                    if (expression && operator) {\n                        switch (unescape(operator.getText())) {\n                            case '|=':\n                                // excatly or followed by -words\n                                value = quotes.remove(unescape(expression.getText())) + \"-\\u2026\";\n                                break;\n                            case '^=':\n                                // prefix\n                                value = quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                                break;\n                            case '$=':\n                                // suffix\n                                value = \"\\u2026\" + quotes.remove(unescape(expression.getText()));\n                                break;\n                            case '~=':\n                                // one of a list of words\n                                value = \" \\u2026 \" + quotes.remove(unescape(expression.getText())) + \" \\u2026 \";\n                                break;\n                            case '*=':\n                                // substring\n                                value = \"\\u2026\" + quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                                break;\n                            default:\n                                value = quotes.remove(unescape(expression.getText()));\n                                break;\n                        }\n                    }\n                    result.addAttr(unescape(identifier.getText()), value);\n                }\n                break;\n        }\n    }\n    return result;\n}\nfunction unescape(content) {\n    var scanner = new Scanner();\n    scanner.setSource(content);\n    var token = scanner.scanUnquotedString();\n    if (token) {\n        return token.text;\n    }\n    return content;\n}\nfunction isPseudoElementIdentifier(text) {\n    var match = text.match(/^::?([\\w-]+)/);\n    if (!match) {\n        return false;\n    }\n    return !!languageFacts.cssDataManager.getPseudoElement(\"::\" + match[1]);\n}\nfunction selectorToSpecificityMarkedString(node) {\n    //https://www.w3.org/TR/selectors-3/#specificity\n    function calculateScore(node) {\n        node.getChildren().forEach(function (element) {\n            switch (element.type) {\n                case nodes.NodeType.IdentifierSelector:\n                    specificity.id++;\n                    break;\n                case nodes.NodeType.ClassSelector:\n                case nodes.NodeType.AttributeSelector:\n                    specificity.attr++;\n                    break;\n                case nodes.NodeType.ElementNameSelector:\n                    //ignore universal selector\n                    if (element.matches(\"*\")) {\n                        break;\n                    }\n                    specificity.tag++;\n                    break;\n                case nodes.NodeType.PseudoSelector:\n                    var text = element.getText();\n                    if (isPseudoElementIdentifier(text)) {\n                        specificity.tag++; // pseudo element\n                    }\n                    else {\n                        //ignore psuedo class NOT\n                        if (text.match(/^:not/i)) {\n                            break;\n                        }\n                        specificity.attr++; //pseudo class\n                    }\n                    break;\n            }\n            if (element.getChildren().length > 0) {\n                calculateScore(element);\n            }\n        });\n    }\n    var specificity = new Specificity();\n    calculateScore(node);\n    return localize('specificity', \"[Selector Specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity): ({0}, {1}, {2})\", specificity.id, specificity.attr, specificity.tag);\n}\nexport function selectorToMarkedString(node) {\n    var root = selectorToElement(node);\n    if (root) {\n        var markedStrings = new MarkedStringPrinter('\"').print(root);\n        markedStrings.push(selectorToSpecificityMarkedString(node));\n        return markedStrings;\n    }\n    else {\n        return [];\n    }\n}\nexport function simpleSelectorToMarkedString(node) {\n    var element = toElement(node);\n    var markedStrings = new MarkedStringPrinter('\"').print(element);\n    markedStrings.push(selectorToSpecificityMarkedString(node));\n    return markedStrings;\n}\nvar SelectorElementBuilder = /** @class */ (function () {\n    function SelectorElementBuilder(element) {\n        this.prev = null;\n        this.element = element;\n    }\n    SelectorElementBuilder.prototype.processSelector = function (selector) {\n        var parentElement = null;\n        if (!(this.element instanceof RootElement)) {\n            if (selector.getChildren().some(function (c) { return c.hasChildren() && c.getChild(0).type === nodes.NodeType.SelectorCombinator; })) {\n                var curr = this.element.findRoot();\n                if (curr.parent instanceof RootElement) {\n                    parentElement = this.element;\n                    this.element = curr.parent;\n                    this.element.removeChild(curr);\n                    this.prev = null;\n                }\n            }\n        }\n        for (var _i = 0, _a = selector.getChildren(); _i < _a.length; _i++) {\n            var selectorChild = _a[_i];\n            if (selectorChild instanceof nodes.SimpleSelector) {\n                if (this.prev instanceof nodes.SimpleSelector) {\n                    var labelElement = new LabelElement('\\u2026');\n                    this.element.addChild(labelElement);\n                    this.element = labelElement;\n                }\n                else if (this.prev && (this.prev.matches('+') || this.prev.matches('~')) && this.element.parent) {\n                    this.element = this.element.parent;\n                }\n                if (this.prev && this.prev.matches('~')) {\n                    this.element.addChild(toElement(selectorChild));\n                    this.element.addChild(new LabelElement('\\u22EE'));\n                }\n                var thisElement = toElement(selectorChild, parentElement);\n                var root = thisElement.findRoot();\n                this.element.addChild(root);\n                this.element = thisElement;\n            }\n            if (selectorChild instanceof nodes.SimpleSelector ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorParent ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorShadowPiercingDescendant ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorSibling ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorAllSiblings) {\n                this.prev = selectorChild;\n            }\n        }\n    };\n    return SelectorElementBuilder;\n}());\nfunction isNewSelectorContext(node) {\n    switch (node.type) {\n        case nodes.NodeType.MixinDeclaration:\n        case nodes.NodeType.Stylesheet:\n            return true;\n    }\n    return false;\n}\nexport function selectorToElement(node) {\n    if (node.matches('@at-root')) {\n        return null;\n    }\n    var root = new RootElement();\n    var parentRuleSets = [];\n    var ruleSet = node.getParent();\n    if (ruleSet instanceof nodes.RuleSet) {\n        var parent = ruleSet.getParent(); // parent of the selector's ruleset\n        while (parent && !isNewSelectorContext(parent)) {\n            if (parent instanceof nodes.RuleSet) {\n                if (parent.getSelectors().matches('@at-root')) {\n                    break;\n                }\n                parentRuleSets.push(parent);\n            }\n            parent = parent.getParent();\n        }\n    }\n    var builder = new SelectorElementBuilder(root);\n    for (var i = parentRuleSets.length - 1; i >= 0; i--) {\n        var selector = parentRuleSets[i].getSelectors().getChild(0);\n        if (selector) {\n            builder.processSelector(selector);\n        }\n    }\n    builder.processSelector(node);\n    return root;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}