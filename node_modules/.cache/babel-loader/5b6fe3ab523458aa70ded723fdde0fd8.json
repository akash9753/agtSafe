{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as nls from '../../../nls.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../common/controller/cursorMoveCommands.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { DocumentHighlightProviderRegistry } from '../../common/modes.js';\nimport { CommonFindController } from '../find/findController.js';\nimport { overviewRulerSelectionHighlightForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nvar InsertCursorAbove = /** @class */function (_super) {\n  __extends(InsertCursorAbove, _super);\n  function InsertCursorAbove() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorAbove',\n      label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n      alias: 'Add Cursor Above',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 16 /* UpArrow */,\n        linux: {\n          primary: 1024 /* Shift */ | 512 /* Alt */ | 16 /* UpArrow */,\n          secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 16 /* UpArrow */]\n        },\n\n        weight: 100 /* EditorContrib */\n      },\n\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAbove',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Add Cursor Above\"),\n        order: 2\n      }\n    }) || this;\n  }\n  InsertCursorAbove.prototype.run = function (accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    var useLogicalLine = args && args.logicalLine === true;\n    var cursors = editor._getCursors();\n    var context = cursors.context;\n    if (context.config.readOnly) {\n      return;\n    }\n    context.model.pushStackElement();\n    cursors.setStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorUp(context, cursors.getAll(), useLogicalLine));\n    cursors.reveal(args.source, true, 1 /* TopMost */, 0 /* Smooth */);\n  };\n\n  return InsertCursorAbove;\n}(EditorAction);\nexport { InsertCursorAbove };\nvar InsertCursorBelow = /** @class */function (_super) {\n  __extends(InsertCursorBelow, _super);\n  function InsertCursorBelow() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorBelow',\n      label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n      alias: 'Add Cursor Below',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 18 /* DownArrow */,\n        linux: {\n          primary: 1024 /* Shift */ | 512 /* Alt */ | 18 /* DownArrow */,\n          secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 18 /* DownArrow */]\n        },\n\n        weight: 100 /* EditorContrib */\n      },\n\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorBelow',\n          comment: ['&& denotes a mnemonic']\n        }, \"A&&dd Cursor Below\"),\n        order: 3\n      }\n    }) || this;\n  }\n  InsertCursorBelow.prototype.run = function (accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    var useLogicalLine = args && args.logicalLine === true;\n    var cursors = editor._getCursors();\n    var context = cursors.context;\n    if (context.config.readOnly) {\n      return;\n    }\n    context.model.pushStackElement();\n    cursors.setStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorDown(context, cursors.getAll(), useLogicalLine));\n    cursors.reveal(args.source, true, 2 /* BottomMost */, 0 /* Smooth */);\n  };\n\n  return InsertCursorBelow;\n}(EditorAction);\nexport { InsertCursorBelow };\nvar InsertCursorAtEndOfEachLineSelected = /** @class */function (_super) {\n  __extends(InsertCursorAtEndOfEachLineSelected, _super);\n  function InsertCursorAtEndOfEachLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n      label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n      alias: 'Add Cursors to Line Ends',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* Shift */ | 512 /* Alt */ | 39 /* KEY_I */,\n        weight: 100 /* EditorContrib */\n      },\n\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAtEndOfEachLineSelected',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add C&&ursors to Line Ends\"),\n        order: 4\n      }\n    }) || this;\n  }\n  InsertCursorAtEndOfEachLineSelected.prototype.getCursorsForSelection = function (selection, model, result) {\n    if (selection.isEmpty()) {\n      return;\n    }\n    for (var i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n      var currentLineMaxColumn = model.getLineMaxColumn(i);\n      result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n    }\n    if (selection.endColumn > 1) {\n      result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n    }\n  };\n  InsertCursorAtEndOfEachLineSelected.prototype.run = function (accessor, editor) {\n    var _this = this;\n    if (!editor.hasModel()) {\n      return;\n    }\n    var model = editor.getModel();\n    var selections = editor.getSelections();\n    var newSelections = [];\n    selections.forEach(function (sel) {\n      return _this.getCursorsForSelection(sel, model, newSelections);\n    });\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n  return InsertCursorAtEndOfEachLineSelected;\n}(EditorAction);\nvar InsertCursorAtEndOfLineSelected = /** @class */function (_super) {\n  __extends(InsertCursorAtEndOfLineSelected, _super);\n  function InsertCursorAtEndOfLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.addCursorsToBottom',\n      label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n      alias: 'Add Cursors To Bottom',\n      precondition: undefined\n    }) || this;\n  }\n  InsertCursorAtEndOfLineSelected.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    var selections = editor.getSelections();\n    var lineCount = editor.getModel().getLineCount();\n    var newSelections = [];\n    for (var i = selections[0].startLineNumber; i <= lineCount; i++) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n  return InsertCursorAtEndOfLineSelected;\n}(EditorAction);\nvar InsertCursorAtTopOfLineSelected = /** @class */function (_super) {\n  __extends(InsertCursorAtTopOfLineSelected, _super);\n  function InsertCursorAtTopOfLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.addCursorsToTop',\n      label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n      alias: 'Add Cursors To Top',\n      precondition: undefined\n    }) || this;\n  }\n  InsertCursorAtTopOfLineSelected.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    var selections = editor.getSelections();\n    var newSelections = [];\n    for (var i = selections[0].startLineNumber; i >= 1; i--) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n  return InsertCursorAtTopOfLineSelected;\n}(EditorAction);\nvar MultiCursorSessionResult = /** @class */function () {\n  function MultiCursorSessionResult(selections, revealRange, revealScrollType) {\n    this.selections = selections;\n    this.revealRange = revealRange;\n    this.revealScrollType = revealScrollType;\n  }\n  return MultiCursorSessionResult;\n}();\nexport { MultiCursorSessionResult };\nvar MultiCursorSession = /** @class */function () {\n  function MultiCursorSession(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n    this._editor = _editor;\n    this.findController = findController;\n    this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n    this.searchText = searchText;\n    this.wholeWord = wholeWord;\n    this.matchCase = matchCase;\n    this.currentMatch = currentMatch;\n  }\n  MultiCursorSession.create = function (editor, findController) {\n    if (!editor.hasModel()) {\n      return null;\n    }\n    var findState = findController.getState();\n    // Find widget owns entirely what we search for if:\n    //  - focus is not in the editor (i.e. it is in the find widget)\n    //  - and the search widget is visible\n    //  - and the search string is non-empty\n    if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n      // Find widget owns what is searched for\n      return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n    }\n    // Otherwise, the selection gives the search text, and the find widget gives the search settings\n    // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n    var isDisconnectedFromFindController = false;\n    var wholeWord;\n    var matchCase;\n    var selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      isDisconnectedFromFindController = true;\n      wholeWord = true;\n      matchCase = true;\n    } else {\n      wholeWord = findState.wholeWord;\n      matchCase = findState.matchCase;\n    }\n    // Selection owns what is searched for\n    var s = editor.getSelection();\n    var searchText;\n    var currentMatch = null;\n    if (s.isEmpty()) {\n      // selection is empty => expand to current word\n      var word = editor.getModel().getWordAtPosition(s.getStartPosition());\n      if (!word) {\n        return null;\n      }\n      searchText = word.word;\n      currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n    } else {\n      searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n    }\n    return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n  };\n  MultiCursorSession.prototype.addSelectionToNextFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    var nextMatch = this._getNextMatch();\n    if (!nextMatch) {\n      return null;\n    }\n    var allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* Smooth */);\n  };\n\n  MultiCursorSession.prototype.moveSelectionToNextFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    var nextMatch = this._getNextMatch();\n    if (!nextMatch) {\n      return null;\n    }\n    var allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* Smooth */);\n  };\n\n  MultiCursorSession.prototype._getNextMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    if (this.currentMatch) {\n      var result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n    this.findController.highlightFindOptions();\n    var allSelections = this._editor.getSelections();\n    var lastAddedSelection = allSelections[allSelections.length - 1];\n    var nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\n    if (!nextMatch) {\n      return null;\n    }\n    return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n  };\n  MultiCursorSession.prototype.addSelectionToPreviousFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    var previousMatch = this._getPreviousMatch();\n    if (!previousMatch) {\n      return null;\n    }\n    var allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* Smooth */);\n  };\n\n  MultiCursorSession.prototype.moveSelectionToPreviousFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    var previousMatch = this._getPreviousMatch();\n    if (!previousMatch) {\n      return null;\n    }\n    var allSelections = this._editor.getSelections();\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* Smooth */);\n  };\n\n  MultiCursorSession.prototype._getPreviousMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    if (this.currentMatch) {\n      var result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n    this.findController.highlightFindOptions();\n    var allSelections = this._editor.getSelections();\n    var lastAddedSelection = allSelections[allSelections.length - 1];\n    var previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\n    if (!previousMatch) {\n      return null;\n    }\n    return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n  };\n  MultiCursorSession.prototype.selectAll = function () {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n    this.findController.highlightFindOptions();\n    return this._editor.getModel().findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n  };\n\n  return MultiCursorSession;\n}();\nexport { MultiCursorSession };\nvar MultiCursorSelectionController = /** @class */function (_super) {\n  __extends(MultiCursorSelectionController, _super);\n  function MultiCursorSelectionController(editor) {\n    var _this = _super.call(this) || this;\n    _this._sessionDispose = _this._register(new DisposableStore());\n    _this._editor = editor;\n    _this._ignoreSelectionChange = false;\n    _this._session = null;\n    return _this;\n  }\n  MultiCursorSelectionController.get = function (editor) {\n    return editor.getContribution(MultiCursorSelectionController.ID);\n  };\n  MultiCursorSelectionController.prototype.dispose = function () {\n    this._endSession();\n    _super.prototype.dispose.call(this);\n  };\n  MultiCursorSelectionController.prototype._beginSessionIfNeeded = function (findController) {\n    var _this = this;\n    if (!this._session) {\n      // Create a new session\n      var session = MultiCursorSession.create(this._editor, findController);\n      if (!session) {\n        return;\n      }\n      this._session = session;\n      var newState = {\n        searchString: this._session.searchText\n      };\n      if (this._session.isDisconnectedFromFindController) {\n        newState.wholeWordOverride = 1 /* True */;\n        newState.matchCaseOverride = 1 /* True */;\n        newState.isRegexOverride = 2 /* False */;\n      }\n\n      findController.getState().change(newState, false);\n      this._sessionDispose.add(this._editor.onDidChangeCursorSelection(function (e) {\n        if (_this._ignoreSelectionChange) {\n          return;\n        }\n        _this._endSession();\n      }));\n      this._sessionDispose.add(this._editor.onDidBlurEditorText(function () {\n        _this._endSession();\n      }));\n      this._sessionDispose.add(findController.getState().onFindReplaceStateChange(function (e) {\n        if (e.matchCase || e.wholeWord) {\n          _this._endSession();\n        }\n      }));\n    }\n  };\n  MultiCursorSelectionController.prototype._endSession = function () {\n    this._sessionDispose.clear();\n    if (this._session && this._session.isDisconnectedFromFindController) {\n      var newState = {\n        wholeWordOverride: 0 /* NotSet */,\n        matchCaseOverride: 0 /* NotSet */,\n        isRegexOverride: 0 /* NotSet */\n      };\n\n      this._session.findController.getState().change(newState, false);\n    }\n    this._session = null;\n  };\n  MultiCursorSelectionController.prototype._setSelections = function (selections) {\n    this._ignoreSelectionChange = true;\n    this._editor.setSelections(selections);\n    this._ignoreSelectionChange = false;\n  };\n  MultiCursorSelectionController.prototype._expandEmptyToWord = function (model, selection) {\n    if (!selection.isEmpty()) {\n      return selection;\n    }\n    var word = model.getWordAtPosition(selection.getStartPosition());\n    if (!word) {\n      return selection;\n    }\n    return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n  };\n  MultiCursorSelectionController.prototype._applySessionResult = function (result) {\n    if (!result) {\n      return;\n    }\n    this._setSelections(result.selections);\n    if (result.revealRange) {\n      this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n    }\n  };\n  MultiCursorSelectionController.prototype.getSession = function (findController) {\n    return this._session;\n  };\n  MultiCursorSelectionController.prototype.addSelectionToNextFindMatch = function (findController) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    if (!this._session) {\n      // If there are multiple cursors, handle the case where they do not all select the same text.\n      var allSelections = this._editor.getSelections();\n      if (allSelections.length > 1) {\n        var findState = findController.getState();\n        var matchCase = findState.matchCase;\n        var selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n        if (!selectionsContainSameText) {\n          var model = this._editor.getModel();\n          var resultingSelections = [];\n          for (var i = 0, len = allSelections.length; i < len; i++) {\n            resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n          }\n          this._editor.setSelections(resultingSelections);\n          return;\n        }\n      }\n    }\n    this._beginSessionIfNeeded(findController);\n    if (this._session) {\n      this._applySessionResult(this._session.addSelectionToNextFindMatch());\n    }\n  };\n  MultiCursorSelectionController.prototype.addSelectionToPreviousFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n    if (this._session) {\n      this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n    }\n  };\n  MultiCursorSelectionController.prototype.moveSelectionToNextFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n    if (this._session) {\n      this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n    }\n  };\n  MultiCursorSelectionController.prototype.moveSelectionToPreviousFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n    if (this._session) {\n      this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n    }\n  };\n  MultiCursorSelectionController.prototype.selectAll = function (findController) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    var matches = null;\n    var findState = findController.getState();\n    // Special case: find widget owns entirely what we search for if:\n    // - focus is not in the editor (i.e. it is in the find widget)\n    // - and the search widget is visible\n    // - and the search string is non-empty\n    // - and we're searching for a regex\n    if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n      matches = this._editor.getModel().findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n    } else {\n      this._beginSessionIfNeeded(findController);\n      if (!this._session) {\n        return;\n      }\n      matches = this._session.selectAll();\n    }\n    if (findState.searchScope) {\n      var state = findState.searchScope;\n      var inSelection = [];\n      for (var i = 0; i < matches.length; i++) {\n        if (matches[i].range.endLineNumber <= state.endLineNumber && matches[i].range.startLineNumber >= state.startLineNumber) {\n          inSelection.push(matches[i]);\n        }\n      }\n      matches = inSelection;\n    }\n    if (matches.length > 0) {\n      var editorSelection = this._editor.getSelection();\n      // Have the primary cursor remain the one where the action was invoked\n      for (var i = 0, len = matches.length; i < len; i++) {\n        var match = matches[i];\n        var intersection = match.range.intersectRanges(editorSelection);\n        if (intersection) {\n          // bingo!\n          matches[i] = matches[0];\n          matches[0] = match;\n          break;\n        }\n      }\n      this._setSelections(matches.map(function (m) {\n        return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn);\n      }));\n    }\n  };\n  MultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\n  return MultiCursorSelectionController;\n}(Disposable);\nexport { MultiCursorSelectionController };\nvar MultiCursorSelectionControllerAction = /** @class */function (_super) {\n  __extends(MultiCursorSelectionControllerAction, _super);\n  function MultiCursorSelectionControllerAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MultiCursorSelectionControllerAction.prototype.run = function (accessor, editor) {\n    var multiCursorController = MultiCursorSelectionController.get(editor);\n    if (!multiCursorController) {\n      return;\n    }\n    var findController = CommonFindController.get(editor);\n    if (!findController) {\n      return;\n    }\n    this._run(multiCursorController, findController);\n  };\n  return MultiCursorSelectionControllerAction;\n}(EditorAction);\nexport { MultiCursorSelectionControllerAction };\nvar AddSelectionToNextFindMatchAction = /** @class */function (_super) {\n  __extends(AddSelectionToNextFindMatchAction, _super);\n  function AddSelectionToNextFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.addSelectionToNextFindMatch',\n      label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n      alias: 'Add Selection To Next Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* CtrlCmd */ | 34 /* KEY_D */,\n        weight: 100 /* EditorContrib */\n      },\n\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToNextFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add &&Next Occurrence\"),\n        order: 5\n      }\n    }) || this;\n  }\n  AddSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.addSelectionToNextFindMatch(findController);\n  };\n  return AddSelectionToNextFindMatchAction;\n}(MultiCursorSelectionControllerAction);\nexport { AddSelectionToNextFindMatchAction };\nvar AddSelectionToPreviousFindMatchAction = /** @class */function (_super) {\n  __extends(AddSelectionToPreviousFindMatchAction, _super);\n  function AddSelectionToPreviousFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.addSelectionToPreviousFindMatch',\n      label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n      alias: 'Add Selection To Previous Find Match',\n      precondition: undefined,\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToPreviousFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add P&&revious Occurrence\"),\n        order: 6\n      }\n    }) || this;\n  }\n  AddSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.addSelectionToPreviousFindMatch(findController);\n  };\n  return AddSelectionToPreviousFindMatchAction;\n}(MultiCursorSelectionControllerAction);\nexport { AddSelectionToPreviousFindMatchAction };\nvar MoveSelectionToNextFindMatchAction = /** @class */function (_super) {\n  __extends(MoveSelectionToNextFindMatchAction, _super);\n  function MoveSelectionToNextFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.moveSelectionToNextFindMatch',\n      label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n      alias: 'Move Last Selection To Next Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, 2048 /* CtrlCmd */ | 34 /* KEY_D */),\n        weight: 100 /* EditorContrib */\n      }\n    }) || this;\n  }\n  MoveSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.moveSelectionToNextFindMatch(findController);\n  };\n  return MoveSelectionToNextFindMatchAction;\n}(MultiCursorSelectionControllerAction);\nexport { MoveSelectionToNextFindMatchAction };\nvar MoveSelectionToPreviousFindMatchAction = /** @class */function (_super) {\n  __extends(MoveSelectionToPreviousFindMatchAction, _super);\n  function MoveSelectionToPreviousFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.moveSelectionToPreviousFindMatch',\n      label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n      alias: 'Move Last Selection To Previous Find Match',\n      precondition: undefined\n    }) || this;\n  }\n  MoveSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.moveSelectionToPreviousFindMatch(findController);\n  };\n  return MoveSelectionToPreviousFindMatchAction;\n}(MultiCursorSelectionControllerAction);\nexport { MoveSelectionToPreviousFindMatchAction };\nvar SelectHighlightsAction = /** @class */function (_super) {\n  __extends(SelectHighlightsAction, _super);\n  function SelectHighlightsAction() {\n    return _super.call(this, {\n      id: 'editor.action.selectHighlights',\n      label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n      alias: 'Select All Occurrences of Find Match',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 42 /* KEY_L */,\n        weight: 100 /* EditorContrib */\n      },\n\n      menuOpts: {\n        menuId: 25 /* MenubarSelectionMenu */,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miSelectHighlights',\n          comment: ['&& denotes a mnemonic']\n        }, \"Select All &&Occurrences\"),\n        order: 7\n      }\n    }) || this;\n  }\n  SelectHighlightsAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  };\n  return SelectHighlightsAction;\n}(MultiCursorSelectionControllerAction);\nexport { SelectHighlightsAction };\nvar CompatChangeAll = /** @class */function (_super) {\n  __extends(CompatChangeAll, _super);\n  function CompatChangeAll() {\n    return _super.call(this, {\n      id: 'editor.action.changeAll',\n      label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n      alias: 'Change All Occurrences',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* CtrlCmd */ | 60 /* F2 */,\n        weight: 100 /* EditorContrib */\n      },\n\n      contextMenuOpts: {\n        group: '1_modification',\n        order: 1.2\n      }\n    }) || this;\n  }\n  CompatChangeAll.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  };\n  return CompatChangeAll;\n}(MultiCursorSelectionControllerAction);\nexport { CompatChangeAll };\nvar SelectionHighlighterState = /** @class */function () {\n  function SelectionHighlighterState(searchText, matchCase, wordSeparators) {\n    this.searchText = searchText;\n    this.matchCase = matchCase;\n    this.wordSeparators = wordSeparators;\n  }\n  /**\r\n   * Everything equals except for `lastWordUnderCursor`\r\n   */\n  SelectionHighlighterState.softEquals = function (a, b) {\n    if (!a && !b) {\n      return true;\n    }\n    if (!a || !b) {\n      return false;\n    }\n    return a.searchText === b.searchText && a.matchCase === b.matchCase && a.wordSeparators === b.wordSeparators;\n  };\n  return SelectionHighlighterState;\n}();\nvar SelectionHighlighter = /** @class */function (_super) {\n  __extends(SelectionHighlighter, _super);\n  function SelectionHighlighter(editor) {\n    var _this = _super.call(this) || this;\n    _this.editor = editor;\n    _this._isEnabled = editor.getOption(82 /* selectionHighlight */);\n    _this.decorations = [];\n    _this.updateSoon = _this._register(new RunOnceScheduler(function () {\n      return _this._update();\n    }, 300));\n    _this.state = null;\n    _this._register(editor.onDidChangeConfiguration(function (e) {\n      _this._isEnabled = editor.getOption(82 /* selectionHighlight */);\n    }));\n\n    _this._register(editor.onDidChangeCursorSelection(function (e) {\n      if (!_this._isEnabled) {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n      if (e.selection.isEmpty()) {\n        if (e.reason === 3 /* Explicit */) {\n          if (_this.state) {\n            // no longer valid\n            _this._setState(null);\n          }\n          _this.updateSoon.schedule();\n        } else {\n          _this._setState(null);\n        }\n      } else {\n        _this._update();\n      }\n    }));\n    _this._register(editor.onDidChangeModel(function (e) {\n      _this._setState(null);\n    }));\n    _this._register(CommonFindController.get(editor).getState().onFindReplaceStateChange(function (e) {\n      _this._update();\n    }));\n    return _this;\n  }\n  SelectionHighlighter.prototype._update = function () {\n    this._setState(SelectionHighlighter._createState(this._isEnabled, this.editor));\n  };\n  SelectionHighlighter._createState = function (isEnabled, editor) {\n    if (!isEnabled) {\n      return null;\n    }\n    if (!editor.hasModel()) {\n      return null;\n    }\n    var s = editor.getSelection();\n    if (s.startLineNumber !== s.endLineNumber) {\n      // multiline forbidden for perf reasons\n      return null;\n    }\n    var multiCursorController = MultiCursorSelectionController.get(editor);\n    if (!multiCursorController) {\n      return null;\n    }\n    var findController = CommonFindController.get(editor);\n    if (!findController) {\n      return null;\n    }\n    var r = multiCursorController.getSession(findController);\n    if (!r) {\n      var allSelections = editor.getSelections();\n      if (allSelections.length > 1) {\n        var findState_1 = findController.getState();\n        var matchCase = findState_1.matchCase;\n        var selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n        if (!selectionsContainSameText) {\n          return null;\n        }\n      }\n      r = MultiCursorSession.create(editor, findController);\n    }\n    if (!r) {\n      return null;\n    }\n    if (r.currentMatch) {\n      // This is an empty selection\n      // Do not interfere with semantic word highlighting in the no selection case\n      return null;\n    }\n    if (/^[ \\t]+$/.test(r.searchText)) {\n      // whitespace only selection\n      return null;\n    }\n    if (r.searchText.length > 200) {\n      // very long selection\n      return null;\n    }\n    // TODO: better handling of this case\n    var findState = findController.getState();\n    var caseSensitive = findState.matchCase;\n    // Return early if the find widget shows the exact same matches\n    if (findState.isRevealed) {\n      var findStateSearchString = findState.searchString;\n      if (!caseSensitive) {\n        findStateSearchString = findStateSearchString.toLowerCase();\n      }\n      var mySearchString = r.searchText;\n      if (!caseSensitive) {\n        mySearchString = mySearchString.toLowerCase();\n      }\n      if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n        return null;\n      }\n    }\n    return new SelectionHighlighterState(r.searchText, r.matchCase, r.wholeWord ? editor.getOption(96 /* wordSeparators */) : null);\n  };\n  SelectionHighlighter.prototype._setState = function (state) {\n    if (SelectionHighlighterState.softEquals(this.state, state)) {\n      this.state = state;\n      return;\n    }\n    this.state = state;\n    if (!this.state) {\n      this.decorations = this.editor.deltaDecorations(this.decorations, []);\n      return;\n    }\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    var model = this.editor.getModel();\n    if (model.isTooLargeForTokenization()) {\n      // the file is too large, so searching word under cursor in the whole document takes is blocking the UI.\n      return;\n    }\n    var hasFindOccurrences = DocumentHighlightProviderRegistry.has(model);\n    var allMatches = model.findMatches(this.state.searchText, true, false, this.state.matchCase, this.state.wordSeparators, false).map(function (m) {\n      return m.range;\n    });\n    allMatches.sort(Range.compareRangesUsingStarts);\n    var selections = this.editor.getSelections();\n    selections.sort(Range.compareRangesUsingStarts);\n    // do not overlap with selection (issue #64 and #512)\n    var matches = [];\n    for (var i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n      var match = allMatches[i];\n      if (j >= lenJ) {\n        // finished all editor selections\n        matches.push(match);\n        i++;\n      } else {\n        var cmp = Range.compareRangesUsingStarts(match, selections[j]);\n        if (cmp < 0) {\n          // match is before sel\n          if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n            matches.push(match);\n          }\n          i++;\n        } else if (cmp > 0) {\n          // sel is before match\n          j++;\n        } else {\n          // sel is equal to match\n          i++;\n          j++;\n        }\n      }\n    }\n    var decorations = matches.map(function (r) {\n      return {\n        range: r,\n        // Show in overviewRuler only if model has no semantic highlighting\n        options: hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW\n      };\n    });\n    this.decorations = this.editor.deltaDecorations(this.decorations, decorations);\n  };\n  SelectionHighlighter.prototype.dispose = function () {\n    this._setState(null);\n    _super.prototype.dispose.call(this);\n  };\n  SelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\n  SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  SelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight'\n  });\n  return SelectionHighlighter;\n}(Disposable);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n  var selectedText = getValueInRange(model, ranges[0], !matchCase);\n  for (var i = 1, len = ranges.length; i < len; i++) {\n    var range = ranges[i];\n    if (range.isEmpty()) {\n      return false;\n    }\n    var thisSelectedText = getValueInRange(model, range, !matchCase);\n    if (selectedText !== thisSelectedText) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n  var text = model.getValueInRange(range);\n  return toLowerCase ? text.toLowerCase() : text;\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","nls","RunOnceScheduler","KeyChord","Disposable","DisposableStore","EditorAction","registerEditorAction","registerEditorContribution","CursorMoveCommands","Range","Selection","EditorContextKeys","OverviewRulerLane","ModelDecorationOptions","DocumentHighlightProviderRegistry","CommonFindController","overviewRulerSelectionHighlightForeground","themeColorFromId","ContextKeyExpr","InsertCursorAbove","_super","call","id","label","localize","alias","precondition","undefined","kbOpts","kbExpr","editorTextFocus","primary","linux","secondary","weight","menuOpts","menuId","group","title","key","comment","order","run","accessor","editor","args","hasModel","useLogicalLine","logicalLine","cursors","_getCursors","context","config","readOnly","model","pushStackElement","setStates","source","addCursorUp","getAll","reveal","InsertCursorBelow","addCursorDown","InsertCursorAtEndOfEachLineSelected","getCursorsForSelection","selection","result","isEmpty","i","startLineNumber","endLineNumber","currentLineMaxColumn","getLineMaxColumn","push","endColumn","_this","getModel","selections","getSelections","newSelections","forEach","sel","length","setSelections","InsertCursorAtEndOfLineSelected","lineCount","getLineCount","startColumn","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealRange","revealScrollType","MultiCursorSession","_editor","findController","isDisconnectedFromFindController","searchText","wholeWord","matchCase","currentMatch","findState","getState","hasTextFocus","isRevealed","searchString","s","getSelection","word","getWordAtPosition","getStartPosition","getValueInRange","replace","addSelectionToNextFindMatch","nextMatch","_getNextMatch","allSelections","concat","moveSelectionToNextFindMatch","slice","highlightFindOptions","lastAddedSelection","findNextMatch","getEndPosition","getOption","range","addSelectionToPreviousFindMatch","previousMatch","_getPreviousMatch","moveSelectionToPreviousFindMatch","findPreviousMatch","selectAll","findMatches","MultiCursorSelectionController","_sessionDispose","_register","_ignoreSelectionChange","_session","get","getContribution","ID","dispose","_endSession","_beginSessionIfNeeded","session","newState","wholeWordOverride","matchCaseOverride","isRegexOverride","change","add","onDidChangeCursorSelection","e","onDidBlurEditorText","onFindReplaceStateChange","clear","_setSelections","_expandEmptyToWord","_applySessionResult","revealRangeInCenterIfOutsideViewport","getSession","selectionsContainSameText","modelRangesContainSameText","resultingSelections","len","matches","isRegex","searchScope","state","inSelection","editorSelection","match","intersection","intersectRanges","map","m","MultiCursorSelectionControllerAction","apply","arguments","multiCursorController","_run","AddSelectionToNextFindMatchAction","focus","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","and","writable","contextMenuOpts","SelectionHighlighterState","wordSeparators","softEquals","a","SelectionHighlighter","_isEnabled","decorations","updateSoon","_update","onDidChangeConfiguration","reason","_setState","schedule","onDidChangeModel","_createState","isEnabled","r","findState_1","test","caseSensitive","findStateSearchString","toLowerCase","mySearchString","deltaDecorations","isTooLargeForTokenization","hasFindOccurrences","has","allMatches","sort","compareRangesUsingStarts","j","lenJ","cmp","areIntersecting","options","_SELECTION_HIGHLIGHT","_SELECTION_HIGHLIGHT_OVERVIEW","register","stickiness","className","overviewRuler","color","position","Center","ranges","selectedText","thisSelectedText","text"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/multicursor.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as nls from '../../../nls.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { CursorMoveCommands } from '../../common/controller/cursorMoveCommands.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { OverviewRulerLane } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { DocumentHighlightProviderRegistry } from '../../common/modes.js';\r\nimport { CommonFindController } from '../find/findController.js';\r\nimport { overviewRulerSelectionHighlightForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nvar InsertCursorAbove = /** @class */ (function (_super) {\r\n    __extends(InsertCursorAbove, _super);\r\n    function InsertCursorAbove() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.insertCursorAbove',\r\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\r\n            alias: 'Add Cursor Above',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 16 /* UpArrow */,\r\n                linux: {\r\n                    primary: 1024 /* Shift */ | 512 /* Alt */ | 16 /* UpArrow */,\r\n                    secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 16 /* UpArrow */]\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    InsertCursorAbove.prototype.run = function (accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var useLogicalLine = (args && args.logicalLine === true);\r\n        var cursors = editor._getCursors();\r\n        var context = cursors.context;\r\n        if (context.config.readOnly) {\r\n            return;\r\n        }\r\n        context.model.pushStackElement();\r\n        cursors.setStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorUp(context, cursors.getAll(), useLogicalLine));\r\n        cursors.reveal(args.source, true, 1 /* TopMost */, 0 /* Smooth */);\r\n    };\r\n    return InsertCursorAbove;\r\n}(EditorAction));\r\nexport { InsertCursorAbove };\r\nvar InsertCursorBelow = /** @class */ (function (_super) {\r\n    __extends(InsertCursorBelow, _super);\r\n    function InsertCursorBelow() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.insertCursorBelow',\r\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\r\n            alias: 'Add Cursor Below',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 18 /* DownArrow */,\r\n                linux: {\r\n                    primary: 1024 /* Shift */ | 512 /* Alt */ | 18 /* DownArrow */,\r\n                    secondary: [2048 /* CtrlCmd */ | 1024 /* Shift */ | 18 /* DownArrow */]\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    InsertCursorBelow.prototype.run = function (accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var useLogicalLine = (args && args.logicalLine === true);\r\n        var cursors = editor._getCursors();\r\n        var context = cursors.context;\r\n        if (context.config.readOnly) {\r\n            return;\r\n        }\r\n        context.model.pushStackElement();\r\n        cursors.setStates(args.source, 3 /* Explicit */, CursorMoveCommands.addCursorDown(context, cursors.getAll(), useLogicalLine));\r\n        cursors.reveal(args.source, true, 2 /* BottomMost */, 0 /* Smooth */);\r\n    };\r\n    return InsertCursorBelow;\r\n}(EditorAction));\r\nexport { InsertCursorBelow };\r\nvar InsertCursorAtEndOfEachLineSelected = /** @class */ (function (_super) {\r\n    __extends(InsertCursorAtEndOfEachLineSelected, _super);\r\n    function InsertCursorAtEndOfEachLineSelected() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\r\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\r\n            alias: 'Add Cursors to Line Ends',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 39 /* KEY_I */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\r\n                order: 4\r\n            }\r\n        }) || this;\r\n    }\r\n    InsertCursorAtEndOfEachLineSelected.prototype.getCursorsForSelection = function (selection, model, result) {\r\n        if (selection.isEmpty()) {\r\n            return;\r\n        }\r\n        for (var i = selection.startLineNumber; i < selection.endLineNumber; i++) {\r\n            var currentLineMaxColumn = model.getLineMaxColumn(i);\r\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\r\n        }\r\n        if (selection.endColumn > 1) {\r\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\r\n        }\r\n    };\r\n    InsertCursorAtEndOfEachLineSelected.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = editor.getModel();\r\n        var selections = editor.getSelections();\r\n        var newSelections = [];\r\n        selections.forEach(function (sel) { return _this.getCursorsForSelection(sel, model, newSelections); });\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n    };\r\n    return InsertCursorAtEndOfEachLineSelected;\r\n}(EditorAction));\r\nvar InsertCursorAtEndOfLineSelected = /** @class */ (function (_super) {\r\n    __extends(InsertCursorAtEndOfLineSelected, _super);\r\n    function InsertCursorAtEndOfLineSelected() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.addCursorsToBottom',\r\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\r\n            alias: 'Add Cursors To Bottom',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    InsertCursorAtEndOfLineSelected.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var selections = editor.getSelections();\r\n        var lineCount = editor.getModel().getLineCount();\r\n        var newSelections = [];\r\n        for (var i = selections[0].startLineNumber; i <= lineCount; i++) {\r\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\r\n        }\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n    };\r\n    return InsertCursorAtEndOfLineSelected;\r\n}(EditorAction));\r\nvar InsertCursorAtTopOfLineSelected = /** @class */ (function (_super) {\r\n    __extends(InsertCursorAtTopOfLineSelected, _super);\r\n    function InsertCursorAtTopOfLineSelected() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.addCursorsToTop',\r\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\r\n            alias: 'Add Cursors To Top',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    InsertCursorAtTopOfLineSelected.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var selections = editor.getSelections();\r\n        var newSelections = [];\r\n        for (var i = selections[0].startLineNumber; i >= 1; i--) {\r\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\r\n        }\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n    };\r\n    return InsertCursorAtTopOfLineSelected;\r\n}(EditorAction));\r\nvar MultiCursorSessionResult = /** @class */ (function () {\r\n    function MultiCursorSessionResult(selections, revealRange, revealScrollType) {\r\n        this.selections = selections;\r\n        this.revealRange = revealRange;\r\n        this.revealScrollType = revealScrollType;\r\n    }\r\n    return MultiCursorSessionResult;\r\n}());\r\nexport { MultiCursorSessionResult };\r\nvar MultiCursorSession = /** @class */ (function () {\r\n    function MultiCursorSession(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\r\n        this._editor = _editor;\r\n        this.findController = findController;\r\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\r\n        this.searchText = searchText;\r\n        this.wholeWord = wholeWord;\r\n        this.matchCase = matchCase;\r\n        this.currentMatch = currentMatch;\r\n    }\r\n    MultiCursorSession.create = function (editor, findController) {\r\n        if (!editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var findState = findController.getState();\r\n        // Find widget owns entirely what we search for if:\r\n        //  - focus is not in the editor (i.e. it is in the find widget)\r\n        //  - and the search widget is visible\r\n        //  - and the search string is non-empty\r\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\r\n            // Find widget owns what is searched for\r\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\r\n        }\r\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\r\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\r\n        var isDisconnectedFromFindController = false;\r\n        var wholeWord;\r\n        var matchCase;\r\n        var selections = editor.getSelections();\r\n        if (selections.length === 1 && selections[0].isEmpty()) {\r\n            isDisconnectedFromFindController = true;\r\n            wholeWord = true;\r\n            matchCase = true;\r\n        }\r\n        else {\r\n            wholeWord = findState.wholeWord;\r\n            matchCase = findState.matchCase;\r\n        }\r\n        // Selection owns what is searched for\r\n        var s = editor.getSelection();\r\n        var searchText;\r\n        var currentMatch = null;\r\n        if (s.isEmpty()) {\r\n            // selection is empty => expand to current word\r\n            var word = editor.getModel().getWordAtPosition(s.getStartPosition());\r\n            if (!word) {\r\n                return null;\r\n            }\r\n            searchText = word.word;\r\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\r\n        }\r\n        else {\r\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\r\n        }\r\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\r\n    };\r\n    MultiCursorSession.prototype.addSelectionToNextFindMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var nextMatch = this._getNextMatch();\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        var allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* Smooth */);\r\n    };\r\n    MultiCursorSession.prototype.moveSelectionToNextFindMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var nextMatch = this._getNextMatch();\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        var allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* Smooth */);\r\n    };\r\n    MultiCursorSession.prototype._getNextMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        if (this.currentMatch) {\r\n            var result = this.currentMatch;\r\n            this.currentMatch = null;\r\n            return result;\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        var allSelections = this._editor.getSelections();\r\n        var lastAddedSelection = allSelections[allSelections.length - 1];\r\n        var nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\r\n    };\r\n    MultiCursorSession.prototype.addSelectionToPreviousFindMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var previousMatch = this._getPreviousMatch();\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        var allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* Smooth */);\r\n    };\r\n    MultiCursorSession.prototype.moveSelectionToPreviousFindMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var previousMatch = this._getPreviousMatch();\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        var allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* Smooth */);\r\n    };\r\n    MultiCursorSession.prototype._getPreviousMatch = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        if (this.currentMatch) {\r\n            var result = this.currentMatch;\r\n            this.currentMatch = null;\r\n            return result;\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        var allSelections = this._editor.getSelections();\r\n        var lastAddedSelection = allSelections[allSelections.length - 1];\r\n        var previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\r\n    };\r\n    MultiCursorSession.prototype.selectAll = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return [];\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        return this._editor.getModel().findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n    };\r\n    return MultiCursorSession;\r\n}());\r\nexport { MultiCursorSession };\r\nvar MultiCursorSelectionController = /** @class */ (function (_super) {\r\n    __extends(MultiCursorSelectionController, _super);\r\n    function MultiCursorSelectionController(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._sessionDispose = _this._register(new DisposableStore());\r\n        _this._editor = editor;\r\n        _this._ignoreSelectionChange = false;\r\n        _this._session = null;\r\n        return _this;\r\n    }\r\n    MultiCursorSelectionController.get = function (editor) {\r\n        return editor.getContribution(MultiCursorSelectionController.ID);\r\n    };\r\n    MultiCursorSelectionController.prototype.dispose = function () {\r\n        this._endSession();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    MultiCursorSelectionController.prototype._beginSessionIfNeeded = function (findController) {\r\n        var _this = this;\r\n        if (!this._session) {\r\n            // Create a new session\r\n            var session = MultiCursorSession.create(this._editor, findController);\r\n            if (!session) {\r\n                return;\r\n            }\r\n            this._session = session;\r\n            var newState = { searchString: this._session.searchText };\r\n            if (this._session.isDisconnectedFromFindController) {\r\n                newState.wholeWordOverride = 1 /* True */;\r\n                newState.matchCaseOverride = 1 /* True */;\r\n                newState.isRegexOverride = 2 /* False */;\r\n            }\r\n            findController.getState().change(newState, false);\r\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection(function (e) {\r\n                if (_this._ignoreSelectionChange) {\r\n                    return;\r\n                }\r\n                _this._endSession();\r\n            }));\r\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(function () {\r\n                _this._endSession();\r\n            }));\r\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange(function (e) {\r\n                if (e.matchCase || e.wholeWord) {\r\n                    _this._endSession();\r\n                }\r\n            }));\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype._endSession = function () {\r\n        this._sessionDispose.clear();\r\n        if (this._session && this._session.isDisconnectedFromFindController) {\r\n            var newState = {\r\n                wholeWordOverride: 0 /* NotSet */,\r\n                matchCaseOverride: 0 /* NotSet */,\r\n                isRegexOverride: 0 /* NotSet */,\r\n            };\r\n            this._session.findController.getState().change(newState, false);\r\n        }\r\n        this._session = null;\r\n    };\r\n    MultiCursorSelectionController.prototype._setSelections = function (selections) {\r\n        this._ignoreSelectionChange = true;\r\n        this._editor.setSelections(selections);\r\n        this._ignoreSelectionChange = false;\r\n    };\r\n    MultiCursorSelectionController.prototype._expandEmptyToWord = function (model, selection) {\r\n        if (!selection.isEmpty()) {\r\n            return selection;\r\n        }\r\n        var word = model.getWordAtPosition(selection.getStartPosition());\r\n        if (!word) {\r\n            return selection;\r\n        }\r\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\r\n    };\r\n    MultiCursorSelectionController.prototype._applySessionResult = function (result) {\r\n        if (!result) {\r\n            return;\r\n        }\r\n        this._setSelections(result.selections);\r\n        if (result.revealRange) {\r\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype.getSession = function (findController) {\r\n        return this._session;\r\n    };\r\n    MultiCursorSelectionController.prototype.addSelectionToNextFindMatch = function (findController) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._session) {\r\n            // If there are multiple cursors, handle the case where they do not all select the same text.\r\n            var allSelections = this._editor.getSelections();\r\n            if (allSelections.length > 1) {\r\n                var findState = findController.getState();\r\n                var matchCase = findState.matchCase;\r\n                var selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\r\n                if (!selectionsContainSameText) {\r\n                    var model = this._editor.getModel();\r\n                    var resultingSelections = [];\r\n                    for (var i = 0, len = allSelections.length; i < len; i++) {\r\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\r\n                    }\r\n                    this._editor.setSelections(resultingSelections);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype.addSelectionToPreviousFindMatch = function (findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype.moveSelectionToNextFindMatch = function (findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype.moveSelectionToPreviousFindMatch = function (findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\r\n        }\r\n    };\r\n    MultiCursorSelectionController.prototype.selectAll = function (findController) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var matches = null;\r\n        var findState = findController.getState();\r\n        // Special case: find widget owns entirely what we search for if:\r\n        // - focus is not in the editor (i.e. it is in the find widget)\r\n        // - and the search widget is visible\r\n        // - and the search string is non-empty\r\n        // - and we're searching for a regex\r\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\r\n            matches = this._editor.getModel().findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        }\r\n        else {\r\n            this._beginSessionIfNeeded(findController);\r\n            if (!this._session) {\r\n                return;\r\n            }\r\n            matches = this._session.selectAll();\r\n        }\r\n        if (findState.searchScope) {\r\n            var state = findState.searchScope;\r\n            var inSelection = [];\r\n            for (var i = 0; i < matches.length; i++) {\r\n                if (matches[i].range.endLineNumber <= state.endLineNumber && matches[i].range.startLineNumber >= state.startLineNumber) {\r\n                    inSelection.push(matches[i]);\r\n                }\r\n            }\r\n            matches = inSelection;\r\n        }\r\n        if (matches.length > 0) {\r\n            var editorSelection = this._editor.getSelection();\r\n            // Have the primary cursor remain the one where the action was invoked\r\n            for (var i = 0, len = matches.length; i < len; i++) {\r\n                var match = matches[i];\r\n                var intersection = match.range.intersectRanges(editorSelection);\r\n                if (intersection) {\r\n                    // bingo!\r\n                    matches[i] = matches[0];\r\n                    matches[0] = match;\r\n                    break;\r\n                }\r\n            }\r\n            this._setSelections(matches.map(function (m) { return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn); }));\r\n        }\r\n    };\r\n    MultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\r\n    return MultiCursorSelectionController;\r\n}(Disposable));\r\nexport { MultiCursorSelectionController };\r\nvar MultiCursorSelectionControllerAction = /** @class */ (function (_super) {\r\n    __extends(MultiCursorSelectionControllerAction, _super);\r\n    function MultiCursorSelectionControllerAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MultiCursorSelectionControllerAction.prototype.run = function (accessor, editor) {\r\n        var multiCursorController = MultiCursorSelectionController.get(editor);\r\n        if (!multiCursorController) {\r\n            return;\r\n        }\r\n        var findController = CommonFindController.get(editor);\r\n        if (!findController) {\r\n            return;\r\n        }\r\n        this._run(multiCursorController, findController);\r\n    };\r\n    return MultiCursorSelectionControllerAction;\r\n}(EditorAction));\r\nexport { MultiCursorSelectionControllerAction };\r\nvar AddSelectionToNextFindMatchAction = /** @class */ (function (_super) {\r\n    __extends(AddSelectionToNextFindMatchAction, _super);\r\n    function AddSelectionToNextFindMatchAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.addSelectionToNextFindMatch',\r\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\r\n            alias: 'Add Selection To Next Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 34 /* KEY_D */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\r\n                order: 5\r\n            }\r\n        }) || this;\r\n    }\r\n    AddSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.addSelectionToNextFindMatch(findController);\r\n    };\r\n    return AddSelectionToNextFindMatchAction;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { AddSelectionToNextFindMatchAction };\r\nvar AddSelectionToPreviousFindMatchAction = /** @class */ (function (_super) {\r\n    __extends(AddSelectionToPreviousFindMatchAction, _super);\r\n    function AddSelectionToPreviousFindMatchAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.addSelectionToPreviousFindMatch',\r\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\r\n            alias: 'Add Selection To Previous Find Match',\r\n            precondition: undefined,\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\r\n                order: 6\r\n            }\r\n        }) || this;\r\n    }\r\n    AddSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\r\n    };\r\n    return AddSelectionToPreviousFindMatchAction;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { AddSelectionToPreviousFindMatchAction };\r\nvar MoveSelectionToNextFindMatchAction = /** @class */ (function (_super) {\r\n    __extends(MoveSelectionToNextFindMatchAction, _super);\r\n    function MoveSelectionToNextFindMatchAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.moveSelectionToNextFindMatch',\r\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\r\n            alias: 'Move Last Selection To Next Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, 2048 /* CtrlCmd */ | 34 /* KEY_D */),\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    MoveSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.moveSelectionToNextFindMatch(findController);\r\n    };\r\n    return MoveSelectionToNextFindMatchAction;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { MoveSelectionToNextFindMatchAction };\r\nvar MoveSelectionToPreviousFindMatchAction = /** @class */ (function (_super) {\r\n    __extends(MoveSelectionToPreviousFindMatchAction, _super);\r\n    function MoveSelectionToPreviousFindMatchAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\r\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\r\n            alias: 'Move Last Selection To Previous Find Match',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    MoveSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\r\n    };\r\n    return MoveSelectionToPreviousFindMatchAction;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { MoveSelectionToPreviousFindMatchAction };\r\nvar SelectHighlightsAction = /** @class */ (function (_super) {\r\n    __extends(SelectHighlightsAction, _super);\r\n    function SelectHighlightsAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.selectHighlights',\r\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\r\n            alias: 'Select All Occurrences of Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 42 /* KEY_L */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\r\n                order: 7\r\n            }\r\n        }) || this;\r\n    }\r\n    SelectHighlightsAction.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.selectAll(findController);\r\n    };\r\n    return SelectHighlightsAction;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { SelectHighlightsAction };\r\nvar CompatChangeAll = /** @class */ (function (_super) {\r\n    __extends(CompatChangeAll, _super);\r\n    function CompatChangeAll() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.changeAll',\r\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\r\n            alias: 'Change All Occurrences',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 60 /* F2 */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 1.2\r\n            }\r\n        }) || this;\r\n    }\r\n    CompatChangeAll.prototype._run = function (multiCursorController, findController) {\r\n        multiCursorController.selectAll(findController);\r\n    };\r\n    return CompatChangeAll;\r\n}(MultiCursorSelectionControllerAction));\r\nexport { CompatChangeAll };\r\nvar SelectionHighlighterState = /** @class */ (function () {\r\n    function SelectionHighlighterState(searchText, matchCase, wordSeparators) {\r\n        this.searchText = searchText;\r\n        this.matchCase = matchCase;\r\n        this.wordSeparators = wordSeparators;\r\n    }\r\n    /**\r\n     * Everything equals except for `lastWordUnderCursor`\r\n     */\r\n    SelectionHighlighterState.softEquals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (!a || !b) {\r\n            return false;\r\n        }\r\n        return (a.searchText === b.searchText\r\n            && a.matchCase === b.matchCase\r\n            && a.wordSeparators === b.wordSeparators);\r\n    };\r\n    return SelectionHighlighterState;\r\n}());\r\nvar SelectionHighlighter = /** @class */ (function (_super) {\r\n    __extends(SelectionHighlighter, _super);\r\n    function SelectionHighlighter(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this._isEnabled = editor.getOption(82 /* selectionHighlight */);\r\n        _this.decorations = [];\r\n        _this.updateSoon = _this._register(new RunOnceScheduler(function () { return _this._update(); }, 300));\r\n        _this.state = null;\r\n        _this._register(editor.onDidChangeConfiguration(function (e) {\r\n            _this._isEnabled = editor.getOption(82 /* selectionHighlight */);\r\n        }));\r\n        _this._register(editor.onDidChangeCursorSelection(function (e) {\r\n            if (!_this._isEnabled) {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            if (e.selection.isEmpty()) {\r\n                if (e.reason === 3 /* Explicit */) {\r\n                    if (_this.state) {\r\n                        // no longer valid\r\n                        _this._setState(null);\r\n                    }\r\n                    _this.updateSoon.schedule();\r\n                }\r\n                else {\r\n                    _this._setState(null);\r\n                }\r\n            }\r\n            else {\r\n                _this._update();\r\n            }\r\n        }));\r\n        _this._register(editor.onDidChangeModel(function (e) {\r\n            _this._setState(null);\r\n        }));\r\n        _this._register(CommonFindController.get(editor).getState().onFindReplaceStateChange(function (e) {\r\n            _this._update();\r\n        }));\r\n        return _this;\r\n    }\r\n    SelectionHighlighter.prototype._update = function () {\r\n        this._setState(SelectionHighlighter._createState(this._isEnabled, this.editor));\r\n    };\r\n    SelectionHighlighter._createState = function (isEnabled, editor) {\r\n        if (!isEnabled) {\r\n            return null;\r\n        }\r\n        if (!editor.hasModel()) {\r\n            return null;\r\n        }\r\n        var s = editor.getSelection();\r\n        if (s.startLineNumber !== s.endLineNumber) {\r\n            // multiline forbidden for perf reasons\r\n            return null;\r\n        }\r\n        var multiCursorController = MultiCursorSelectionController.get(editor);\r\n        if (!multiCursorController) {\r\n            return null;\r\n        }\r\n        var findController = CommonFindController.get(editor);\r\n        if (!findController) {\r\n            return null;\r\n        }\r\n        var r = multiCursorController.getSession(findController);\r\n        if (!r) {\r\n            var allSelections = editor.getSelections();\r\n            if (allSelections.length > 1) {\r\n                var findState_1 = findController.getState();\r\n                var matchCase = findState_1.matchCase;\r\n                var selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\r\n                if (!selectionsContainSameText) {\r\n                    return null;\r\n                }\r\n            }\r\n            r = MultiCursorSession.create(editor, findController);\r\n        }\r\n        if (!r) {\r\n            return null;\r\n        }\r\n        if (r.currentMatch) {\r\n            // This is an empty selection\r\n            // Do not interfere with semantic word highlighting in the no selection case\r\n            return null;\r\n        }\r\n        if (/^[ \\t]+$/.test(r.searchText)) {\r\n            // whitespace only selection\r\n            return null;\r\n        }\r\n        if (r.searchText.length > 200) {\r\n            // very long selection\r\n            return null;\r\n        }\r\n        // TODO: better handling of this case\r\n        var findState = findController.getState();\r\n        var caseSensitive = findState.matchCase;\r\n        // Return early if the find widget shows the exact same matches\r\n        if (findState.isRevealed) {\r\n            var findStateSearchString = findState.searchString;\r\n            if (!caseSensitive) {\r\n                findStateSearchString = findStateSearchString.toLowerCase();\r\n            }\r\n            var mySearchString = r.searchText;\r\n            if (!caseSensitive) {\r\n                mySearchString = mySearchString.toLowerCase();\r\n            }\r\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\r\n                return null;\r\n            }\r\n        }\r\n        return new SelectionHighlighterState(r.searchText, r.matchCase, r.wholeWord ? editor.getOption(96 /* wordSeparators */) : null);\r\n    };\r\n    SelectionHighlighter.prototype._setState = function (state) {\r\n        if (SelectionHighlighterState.softEquals(this.state, state)) {\r\n            this.state = state;\r\n            return;\r\n        }\r\n        this.state = state;\r\n        if (!this.state) {\r\n            this.decorations = this.editor.deltaDecorations(this.decorations, []);\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this.editor.getModel();\r\n        if (model.isTooLargeForTokenization()) {\r\n            // the file is too large, so searching word under cursor in the whole document takes is blocking the UI.\r\n            return;\r\n        }\r\n        var hasFindOccurrences = DocumentHighlightProviderRegistry.has(model);\r\n        var allMatches = model.findMatches(this.state.searchText, true, false, this.state.matchCase, this.state.wordSeparators, false).map(function (m) { return m.range; });\r\n        allMatches.sort(Range.compareRangesUsingStarts);\r\n        var selections = this.editor.getSelections();\r\n        selections.sort(Range.compareRangesUsingStarts);\r\n        // do not overlap with selection (issue #64 and #512)\r\n        var matches = [];\r\n        for (var i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\r\n            var match = allMatches[i];\r\n            if (j >= lenJ) {\r\n                // finished all editor selections\r\n                matches.push(match);\r\n                i++;\r\n            }\r\n            else {\r\n                var cmp = Range.compareRangesUsingStarts(match, selections[j]);\r\n                if (cmp < 0) {\r\n                    // match is before sel\r\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\r\n                        matches.push(match);\r\n                    }\r\n                    i++;\r\n                }\r\n                else if (cmp > 0) {\r\n                    // sel is before match\r\n                    j++;\r\n                }\r\n                else {\r\n                    // sel is equal to match\r\n                    i++;\r\n                    j++;\r\n                }\r\n            }\r\n        }\r\n        var decorations = matches.map(function (r) {\r\n            return {\r\n                range: r,\r\n                // Show in overviewRuler only if model has no semantic highlighting\r\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\r\n            };\r\n        });\r\n        this.decorations = this.editor.deltaDecorations(this.decorations, decorations);\r\n    };\r\n    SelectionHighlighter.prototype.dispose = function () {\r\n        this._setState(null);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    SelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\r\n    SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'selectionHighlight',\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerSelectionHighlightForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    SelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'selectionHighlight',\r\n    });\r\n    return SelectionHighlighter;\r\n}(Disposable));\r\nexport { SelectionHighlighter };\r\nfunction modelRangesContainSameText(model, ranges, matchCase) {\r\n    var selectedText = getValueInRange(model, ranges[0], !matchCase);\r\n    for (var i = 1, len = ranges.length; i < len; i++) {\r\n        var range = ranges[i];\r\n        if (range.isEmpty()) {\r\n            return false;\r\n        }\r\n        var thisSelectedText = getValueInRange(model, range, !matchCase);\r\n        if (selectedText !== thisSelectedText) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction getValueInRange(model, range, toLowerCase) {\r\n    var text = model.getValueInRange(range);\r\n    return (toLowerCase ? text.toLowerCase() : text);\r\n}\r\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\r\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\r\nregisterEditorAction(InsertCursorAbove);\r\nregisterEditorAction(InsertCursorBelow);\r\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\r\nregisterEditorAction(AddSelectionToNextFindMatchAction);\r\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\r\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\r\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\r\nregisterEditorAction(SelectHighlightsAction);\r\nregisterEditorAction(CompatChangeAll);\r\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\r\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}