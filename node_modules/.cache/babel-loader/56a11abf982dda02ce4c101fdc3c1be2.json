{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\src\\\\containers\\\\TreeView\\\\getMappingDatas.js\";\nimport React from 'react';\nimport { CallServerPost, getStudyDetails, showProgress, hideProgress } from '../Utility/sharedUtility';\nimport { TreeNode } from '../../components/uielements/tree';\nimport { Select } from 'antd';\nvar studyDetails = getStudyDetails();\nvar Option = Select.Option;\nexport function MappingData() {\n  this.CallBack = {};\n}\nexport var MappingDatas = {\n  SourceDataset: {\n    Domain: [],\n    Variable: []\n  },\n  Standards: {\n    Domain: [],\n    Variable: []\n  },\n  MappingList: [],\n  FieldProperties: [],\n  StandardVaraibleOps: {},\n  Loaded: false,\n  CustomTargetDS: []\n};\n\n//Get All Required Data For Page Render and  when we create mapping and upadate mapping \nMappingData.prototype.GetInit = function () {\n  this.GetMapping();\n};\n\n//Get Source List\nMappingData.prototype.GetSource = function () {\n  var obj = this;\n  showProgress();\n  CallServerPost('Study/GetAllSourceDataSetMetaData', {\n    studyID: getStudyDetails().studyID\n  }).then(function (data) {\n    var value = data.value;\n    if (value !== null) {\n      MappingDatas.Loaded = true;\n      if ('CustomTargetDS' in value) {\n        MappingDatas.CustomTargetDS = value.CustomTargetDS;\n      } else {\n        MappingDatas.CustomTargetDS = [];\n      }\n      if ('target' in value && 'domainList' in value.target && 'variableList' in value.target) {\n        MappingDatas.Standards = {\n          Domain: value.target.domainList,\n          Variable: value.target.variableList\n        };\n        MappingDatas.StandardDomainOps = value.target.domainList.map(function (op) {\n          if (MappingDatas.CustomTargetDS.indexOf(op.domain) === -1 && op.domain && typeof op.domain === 'string' && !op.domain.toLowerCase().includes('_int')) {\n            var varList = value.target.variableList.filter(function (varObj) {\n              return varObj.cdiscDataStdDomainMetadataID === op.cdiscDataStdDomainMetadataID;\n            });\n            MappingDatas.StandardVaraibleOps[op.domain] = varList.map(function (varop) {\n              return /*#__PURE__*/React.createElement(Option, {\n                key: varop.variableName,\n                value: varop.variableName,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 44\n                }\n              }, varop.variableName);\n            });\n            return /*#__PURE__*/React.createElement(Option, {\n              key: op.domain,\n              value: op.domain,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 40\n              }\n            }, op.domain);\n          }\n        });\n        MappingDatas.FieldProperties = 'FieldProperties' in value ? value.FieldProperties : [];\n      } else {\n        MappingDatas.Standards = {\n          Domain: [],\n          Variable: []\n        };\n      }\n      if ('DomainMetadata' in value && 'VariableMetadata' in value) {\n        MappingDatas.SourceDataset = {\n          Domain: value.DomainMetadata,\n          Variable: value.VariableMetadata\n        };\n      } else {\n        MappingDatas.SourceDataset = {\n          Domain: [],\n          Variable: []\n        };\n      }\n      obj.CallBack();\n    } else {\n      alert(\"Error\");\n    }\n    //hideProgress();\n  });\n};\n\n//Get Target List\nMappingData.prototype.GetMapping = function () {\n  var obj = this;\n  //showProgress();\n  CallServerPost('MappingOperations/GetAllMappingOperationsByStudyID', {\n    studyID: getStudyDetails().studyID\n  }).then(function (response) {\n    if (response.value != null) {\n      MappingDatas.Loaded = true;\n      MappingDatas.MappingList = response.value;\n      obj.GetSource();\n    } else {\n      MappingDatas.MappingList = [];\n      obj.GetSource();\n    }\n  });\n};\n\n//Get Target List\nMappingData.prototype.RefreshMapping = function (value) {\n  var obj = this;\n  // showProgress();\n  CallServerPost('MappingOperations/GetAllMappingOperationsByStudyID', {\n    studyID: getStudyDetails().studyID\n  }).then(function (response) {\n    var result = response.value;\n    if (typeof result === 'object' && result) {\n      MappingDatas.MappingList = response.value;\n      obj.CallBack(value, response.value);\n    } else {\n      MappingDatas.MappingList = [];\n      obj.CallBack(value, []);\n    }\n    // hideProgress();\n  });\n};\n\nexport var DomainDropDownOptionForm = function DomainDropDownOptionForm(data) {\n  return data != undefined && data != null ? data.map(function (option) {\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      key: option.cdiscDataStdDomainMetadataID,\n      value: option.cdiscDataStdDomainMetadataID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, option.domain);\n  }) : [];\n};\nexport function filter(data, SourceDomain) {\n  if (data != undefined && data != null) {\n    var Source = [];\n    data[\"SourceDataset\"].Variable.filter(function (x) {\n      return x[\"TABLE_NAME\"] == SourceDomain;\n    }).reduce(function (x, y, index) {\n      if (index == 1) Source.push(x);\n      if (!Source.some(function (unique) {\n        return unique.COLUMN_NAME == y.COLUMN_NAME;\n      })) Source.push(y);\n      return Source;\n    });\n    return Source;\n  } else {\n    return [];\n  }\n}","map":{"version":3,"names":["React","CallServerPost","getStudyDetails","showProgress","hideProgress","TreeNode","Select","studyDetails","Option","MappingData","CallBack","MappingDatas","SourceDataset","Domain","Variable","Standards","MappingList","FieldProperties","StandardVaraibleOps","Loaded","CustomTargetDS","prototype","GetInit","GetMapping","GetSource","obj","studyID","then","data","value","target","domainList","variableList","StandardDomainOps","map","op","indexOf","domain","toLowerCase","includes","varList","filter","varObj","cdiscDataStdDomainMetadataID","varop","variableName","DomainMetadata","VariableMetadata","alert","response","RefreshMapping","result","DomainDropDownOptionForm","undefined","option","SourceDomain","Source","x","reduce","y","index","push","some","unique","COLUMN_NAME"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/src/containers/TreeView/getMappingDatas.js"],"sourcesContent":["import React from 'react';\nimport { CallServerPost,getStudyDetails, showProgress, hideProgress } from '../Utility/sharedUtility';\nimport { TreeNode } from '../../components/uielements/tree';\nimport { Select } from 'antd';\r\n\nconst studyDetails = getStudyDetails();\nconst { Option } = Select;\n\nexport function MappingData () {\n    this.CallBack = {};\r\n    \r\n}\n\nexport let MappingDatas = {\n    SourceDataset: {\r\n        Domain: [],\r\n        Variable: []\r\n    },\r\n    Standards: {\r\n        Domain: [],\r\n        Variable: []\r\n    },\r\n    MappingList: [],\r\n    FieldProperties: [],\r\n    StandardVaraibleOps: {},\r\n    Loaded: false,\r\n    CustomTargetDS:[]\r\n}\n\n//Get All Required Data For Page Render and  when we create mapping and upadate mapping \nMappingData.prototype.GetInit = function ()\n{\n        this.GetMapping();\n}\n\n\n//Get Source List\nMappingData.prototype.GetSource = function () {\n    const obj = this;\n    showProgress();\n    CallServerPost('Study/GetAllSourceDataSetMetaData', { studyID: getStudyDetails().studyID })\r\n        .then(\r\n            function (data) {\n            let value = data.value;\n            if (value !== null) {\n                MappingDatas.Loaded = true;\n                if ('CustomTargetDS' in value) {\n                    MappingDatas.CustomTargetDS = value.CustomTargetDS;\r\n                } else {\n                    MappingDatas.CustomTargetDS = [];\r\n\r\n                }\n                if ('target' in value && 'domainList' in value.target && 'variableList' in value.target)\n                {\n                        MappingDatas.Standards =\r\n                        {\r\n                            Domain: value.target.domainList, Variable: value.target.variableList\r\n                        };\r\n                        MappingDatas.StandardDomainOps = value.target.domainList.map(function (op)\r\n                        {\r\n                            if (MappingDatas.CustomTargetDS.indexOf(op.domain) === -1 && (op.domain && typeof op.domain === 'string' && !op.domain.toLowerCase().includes('_int')))\r\n                            {\r\n                                let varList = value.target.variableList.filter(varObj => varObj.cdiscDataStdDomainMetadataID === op.cdiscDataStdDomainMetadataID);\r\n                                MappingDatas.StandardVaraibleOps[op.domain] = varList.map(function (varop) {\r\n                                    return <Option key={varop.variableName} value={varop.variableName}>{varop.variableName}</Option>;\r\n                                });\r\n                                return <Option key={op.domain} value={op.domain}>{op.domain}</Option>;\n                            }\n                        });\r\n                        MappingDatas.FieldProperties = 'FieldProperties' in value ? value.FieldProperties : [];\r\n                    } else {\n                        MappingDatas.Standards = {\r\n                            Domain: [], Variable: []\r\n                        };\r\n                    }\n                if ('DomainMetadata' in value && 'VariableMetadata' in value)\n                {\n                    MappingDatas.SourceDataset =\r\n                    {\r\n                            Domain: value.DomainMetadata, Variable: value.VariableMetadata\r\n\r\n                    };\r\n                } else\n                {\n                        MappingDatas.SourceDataset = {\r\n                            Domain: [], Variable: []\r\n                        };\r\n                }\n               \n                     obj.CallBack();\n                } else {\n                    alert(\"Error\");\n\r\n            }\n            //hideProgress();\n            });\r\n}\n\n//Get Target List\nMappingData.prototype.GetMapping = function () {\n    const obj = this;\n    //showProgress();\n    CallServerPost('MappingOperations/GetAllMappingOperationsByStudyID', { studyID: getStudyDetails().studyID })\r\n        .then(\r\n            function (response) {\n                if (response.value != null) {\n                    MappingDatas.Loaded = true;\n                    MappingDatas.MappingList = response.value;\n                    obj.GetSource();\r\n                } else {\n                    MappingDatas.MappingList = [];\n                    obj.GetSource();\n\r\n                }\n            });\r\n}\r\n\r\n//Get Target List\nMappingData.prototype.RefreshMapping = function (value) {\n    const obj = this;\n   // showProgress();\n    CallServerPost('MappingOperations/GetAllMappingOperationsByStudyID', { studyID: getStudyDetails().studyID })\r\n        .then(\r\n        function (response) {\n            let result = response.value;\n            if (typeof result === 'object' && result) {\n                    MappingDatas.MappingList = response.value;\r\n\r\n                    obj.CallBack(value, response.value);\n\r\n            } else {\n                    MappingDatas.MappingList = [];\n                    obj.CallBack(value, []);\n\r\n            }\n           // hideProgress();\n            });\r\n}\r\n\r\n\n\nexport const DomainDropDownOptionForm = (data) => (data != undefined && data != null) ? data.map(function (option) {\r\n        return (\r\n            <Select.Option key={option.cdiscDataStdDomainMetadataID} value={option.cdiscDataStdDomainMetadataID}>\r\n                {option.domain}\r\n            </Select.Option>\r\n        )\r\n}) : [];\n\n\nexport function filter(data, SourceDomain){\n\n    if (data != undefined && data != null) {\n        let Source = [];\n        data[\"SourceDataset\"].Variable.filter(x => x[\"TABLE_NAME\"] == SourceDomain).reduce((x, y, index) => {\n            if (index == 1)\n                Source.push(x)\n            if (!Source.some(unique => unique.COLUMN_NAME == y.COLUMN_NAME))\n                Source.push(y)\n\n            return Source;\n        });\r\n        return Source;\n\r\n    }\r\n    else {\r\n        return [];\r\n    }\r\n}\r\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}