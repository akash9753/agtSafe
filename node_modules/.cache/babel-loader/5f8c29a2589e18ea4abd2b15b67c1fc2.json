{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport './findWidget.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../base/browser/ui/aria/aria.js';\nimport { Checkbox } from '../../../base/browser/ui/checkbox/checkbox.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Range } from '../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetResizeBorder, errorForeground, inputActiveOptionBorder, inputActiveOptionBackground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, widgetShadow, editorWidgetForeground, focusBorder } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../platform/browser/contextScopedHistoryWidget.js';\nvar NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nvar NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nvar NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous match\");\nvar NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next match\");\nvar NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in selection\");\nvar NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nvar NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nvar NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nvar NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nvar NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nvar NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace mode\");\nvar NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nvar NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nvar NLS_NO_RESULTS = nls.localize('label.noResults', \"No Results\");\nvar FIND_WIDGET_INITIAL_WIDTH = 419;\nvar PART_WIDTH = 275;\nvar FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nvar MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nvar FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nvar ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nvar ctrlKeyMod = platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */;\nvar FindWidgetViewZone = /** @class */function () {\n  function FindWidgetViewZone(afterLineNumber) {\n    this.afterLineNumber = afterLineNumber;\n    this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n    this.suppressMouseDown = false;\n    this.domNode = document.createElement('div');\n    this.domNode.className = 'dock-find-viewzone';\n  }\n  return FindWidgetViewZone;\n}();\nexport { FindWidgetViewZone };\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n  var isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionStart > 0) {\n    event.stopPropagation();\n    return;\n  }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n  var isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n    event.stopPropagation();\n    return;\n  }\n}\nvar FindWidget = /** @class */function (_super) {\n  __extends(FindWidget, _super);\n  function FindWidget(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n    var _this = _super.call(this) || this;\n    _this._cachedHeight = null;\n    _this._codeEditor = codeEditor;\n    _this._controller = controller;\n    _this._state = state;\n    _this._contextViewProvider = contextViewProvider;\n    _this._keybindingService = keybindingService;\n    _this._contextKeyService = contextKeyService;\n    _this._storageService = storageService;\n    _this._notificationService = notificationService;\n    _this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* GLOBAL */);\n    _this._isVisible = false;\n    _this._isReplaceVisible = false;\n    _this._ignoreChangeEvent = false;\n    _this._updateHistoryDelayer = new Delayer(500);\n    _this._register(toDisposable(function () {\n      return _this._updateHistoryDelayer.cancel();\n    }));\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n    _this._buildDomNode();\n    _this._updateButtons();\n    _this._tryUpdateWidgetWidth();\n    _this._findInput.inputBox.layout();\n    _this._register(_this._codeEditor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(68 /* readOnly */)) {\n        if (_this._codeEditor.getOption(68 /* readOnly */)) {\n          // Hide replace part if editor becomes read only\n          _this._state.change({\n            isReplaceRevealed: false\n          }, false);\n        }\n        _this._updateButtons();\n      }\n      if (e.hasChanged(107 /* layoutInfo */)) {\n        _this._tryUpdateWidgetWidth();\n      }\n      if (e.hasChanged(2 /* accessibilitySupport */)) {\n        _this.updateAccessibilitySupport();\n      }\n      if (e.hasChanged(28 /* find */)) {\n        var addExtraSpaceOnTop = _this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\n        if (addExtraSpaceOnTop && !_this._viewZone) {\n          _this._viewZone = new FindWidgetViewZone(0);\n          _this._showViewZone();\n        }\n        if (!addExtraSpaceOnTop && _this._viewZone) {\n          _this._removeViewZone();\n        }\n      }\n    }));\n    _this.updateAccessibilitySupport();\n    _this._register(_this._codeEditor.onDidChangeCursorSelection(function () {\n      if (_this._isVisible) {\n        _this._updateToggleSelectionFindButton();\n      }\n    }));\n    _this._register(_this._codeEditor.onDidFocusEditorWidget(function () {\n      if (_this._isVisible) {\n        var globalBufferTerm = _this._controller.getGlobalBufferTerm();\n        if (globalBufferTerm && globalBufferTerm !== _this._state.searchString) {\n          _this._state.change({\n            searchString: globalBufferTerm\n          }, true);\n          _this._findInput.select();\n        }\n      }\n    }));\n    _this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._findFocusTracker = _this._register(dom.trackFocus(_this._findInput.inputBox.inputElement));\n    _this._register(_this._findFocusTracker.onDidFocus(function () {\n      _this._findInputFocused.set(true);\n      _this._updateSearchScope();\n    }));\n    _this._register(_this._findFocusTracker.onDidBlur(function () {\n      _this._findInputFocused.set(false);\n    }));\n    _this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._replaceFocusTracker = _this._register(dom.trackFocus(_this._replaceInput.inputBox.inputElement));\n    _this._register(_this._replaceFocusTracker.onDidFocus(function () {\n      _this._replaceInputFocused.set(true);\n      _this._updateSearchScope();\n    }));\n    _this._register(_this._replaceFocusTracker.onDidBlur(function () {\n      _this._replaceInputFocused.set(false);\n    }));\n    _this._codeEditor.addOverlayWidget(_this);\n    if (_this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop) {\n      _this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n    }\n\n    _this._applyTheme(themeService.getTheme());\n    _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\n    _this._register(_this._codeEditor.onDidChangeModel(function () {\n      if (!_this._isVisible) {\n        return;\n      }\n      _this._viewZoneId = undefined;\n    }));\n    _this._register(_this._codeEditor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged) {\n        _this._layoutViewZone();\n        return;\n      }\n      // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n      setTimeout(function () {\n        _this._layoutViewZone();\n      }, 0);\n    }));\n    return _this;\n  }\n  // ----- IOverlayWidget API\n  FindWidget.prototype.getId = function () {\n    return FindWidget.ID;\n  };\n  FindWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n  FindWidget.prototype.getPosition = function () {\n    if (this._isVisible) {\n      return {\n        preference: 0 /* TOP_RIGHT_CORNER */\n      };\n    }\n\n    return null;\n  };\n  // ----- React to state changes\n  FindWidget.prototype._onStateChanged = function (e) {\n    if (e.searchString) {\n      try {\n        this._ignoreChangeEvent = true;\n        this._findInput.setValue(this._state.searchString);\n      } finally {\n        this._ignoreChangeEvent = false;\n      }\n      this._updateButtons();\n    }\n    if (e.replaceString) {\n      this._replaceInput.inputBox.value = this._state.replaceString;\n    }\n    if (e.isRevealed) {\n      if (this._state.isRevealed) {\n        this._reveal();\n      } else {\n        this._hide(true);\n      }\n    }\n    if (e.isReplaceRevealed) {\n      if (this._state.isReplaceRevealed) {\n        if (!this._codeEditor.getOption(68 /* readOnly */) && !this._isReplaceVisible) {\n          this._isReplaceVisible = true;\n          this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n          this._updateButtons();\n          this._replaceInput.inputBox.layout();\n        }\n      } else {\n        if (this._isReplaceVisible) {\n          this._isReplaceVisible = false;\n          this._updateButtons();\n        }\n      }\n    }\n    if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n      if (this._tryUpdateHeight()) {\n        this._showViewZone();\n      }\n    }\n    if (e.isRegex) {\n      this._findInput.setRegex(this._state.isRegex);\n    }\n    if (e.wholeWord) {\n      this._findInput.setWholeWords(this._state.wholeWord);\n    }\n    if (e.matchCase) {\n      this._findInput.setCaseSensitive(this._state.matchCase);\n    }\n    if (e.searchScope) {\n      if (this._state.searchScope) {\n        this._toggleSelectionFind.checked = true;\n      } else {\n        this._toggleSelectionFind.checked = false;\n      }\n      this._updateToggleSelectionFindButton();\n    }\n    if (e.searchString || e.matchesCount || e.matchesPosition) {\n      var showRedOutline = this._state.searchString.length > 0 && this._state.matchesCount === 0;\n      dom.toggleClass(this._domNode, 'no-results', showRedOutline);\n      this._updateMatchesCount();\n      this._updateButtons();\n    }\n    if (e.searchString || e.currentMatch) {\n      this._layoutViewZone();\n    }\n    if (e.updateHistory) {\n      this._delayedUpdateHistory();\n    }\n  };\n  FindWidget.prototype._delayedUpdateHistory = function () {\n    this._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\n  };\n  FindWidget.prototype._updateHistory = function () {\n    if (this._state.searchString) {\n      this._findInput.inputBox.addToHistory();\n    }\n    if (this._state.replaceString) {\n      this._replaceInput.inputBox.addToHistory();\n    }\n  };\n  FindWidget.prototype._updateMatchesCount = function () {\n    this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n    if (this._state.matchesCount >= MATCHES_LIMIT) {\n      this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n    } else {\n      this._matchesCount.title = '';\n    }\n    // remove previous content\n    if (this._matchesCount.firstChild) {\n      this._matchesCount.removeChild(this._matchesCount.firstChild);\n    }\n    var label;\n    if (this._state.matchesCount > 0) {\n      var matchesCount = String(this._state.matchesCount);\n      if (this._state.matchesCount >= MATCHES_LIMIT) {\n        matchesCount += '+';\n      }\n      var matchesPosition = String(this._state.matchesPosition);\n      if (matchesPosition === '0') {\n        matchesPosition = '?';\n      }\n      label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n    } else {\n      label = NLS_NO_RESULTS;\n    }\n    this._matchesCount.appendChild(document.createTextNode(label));\n    alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString), true);\n    MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n  };\n  // ----- actions\n  FindWidget.prototype._getAriaLabel = function (label, currentMatch, searchString) {\n    if (label === NLS_NO_RESULTS) {\n      return searchString === '' ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label) : nls.localize('ariaSearchNoResult', \"{0} found for {1}\", label, searchString);\n    }\n    return currentMatch ? nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for {1} at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn) : nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for {1}\", label, searchString);\n  };\n  /**\r\n   * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\r\n   * If 'selection find' is OFF we enable the button only if there is a selection.\r\n   */\n  FindWidget.prototype._updateToggleSelectionFindButton = function () {\n    var selection = this._codeEditor.getSelection();\n    var isSelection = selection ? selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn : false;\n    var isChecked = this._toggleSelectionFind.checked;\n    if (this._isVisible && (isChecked || isSelection)) {\n      this._toggleSelectionFind.enable();\n    } else {\n      this._toggleSelectionFind.disable();\n    }\n  };\n  FindWidget.prototype._updateButtons = function () {\n    this._findInput.setEnabled(this._isVisible);\n    this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n    this._updateToggleSelectionFindButton();\n    this._closeBtn.setEnabled(this._isVisible);\n    var findInputIsNonEmpty = this._state.searchString.length > 0;\n    var matchesCount = this._state.matchesCount ? true : false;\n    this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\n    this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\n    this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n    this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n    dom.toggleClass(this._domNode, 'replaceToggled', this._isReplaceVisible);\n    this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\n    this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\n    this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n    var canReplace = !this._codeEditor.getOption(68 /* readOnly */);\n    this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n  };\n  FindWidget.prototype._reveal = function () {\n    var _this = this;\n    if (!this._isVisible) {\n      this._isVisible = true;\n      var selection = this._codeEditor.getSelection();\n      switch (this._codeEditor.getOption(28 /* find */).autoFindInSelection) {\n        case 'always':\n          this._toggleSelectionFind.checked = true;\n          break;\n        case 'never':\n          this._toggleSelectionFind.checked = false;\n          break;\n        case 'multiline':\n          var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n          this._toggleSelectionFind.checked = isSelectionMultipleLine;\n          break;\n        default:\n          break;\n      }\n      this._tryUpdateWidgetWidth();\n      this._updateButtons();\n      setTimeout(function () {\n        dom.addClass(_this._domNode, 'visible');\n        _this._domNode.setAttribute('aria-hidden', 'false');\n      }, 0);\n      // validate query again as it's being dismissed when we hide the find widget.\n      setTimeout(function () {\n        _this._findInput.validate();\n      }, 200);\n      this._codeEditor.layoutOverlayWidget(this);\n      var adjustEditorScrollTop = true;\n      if (this._codeEditor.getOption(28 /* find */).seedSearchStringFromSelection && selection) {\n        var domNode = this._codeEditor.getDomNode();\n        if (domNode) {\n          var editorCoords = dom.getDomNodePagePosition(domNode);\n          var startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n          var startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n          var startTop = startCoords ? startCoords.top : 0;\n          if (this._viewZone && startTop < this._viewZone.heightInPx) {\n            if (selection.endLineNumber > selection.startLineNumber) {\n              adjustEditorScrollTop = false;\n            }\n            var leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n            if (startLeft > leftOfFindWidget) {\n              adjustEditorScrollTop = false;\n            }\n            var endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n            var endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n            if (endLeft > leftOfFindWidget) {\n              adjustEditorScrollTop = false;\n            }\n          }\n        }\n      }\n      this._showViewZone(adjustEditorScrollTop);\n    }\n  };\n  FindWidget.prototype._hide = function (focusTheEditor) {\n    if (this._isVisible) {\n      this._isVisible = false;\n      this._updateButtons();\n      dom.removeClass(this._domNode, 'visible');\n      this._domNode.setAttribute('aria-hidden', 'true');\n      this._findInput.clearMessage();\n      if (focusTheEditor) {\n        this._codeEditor.focus();\n      }\n      this._codeEditor.layoutOverlayWidget(this);\n      this._removeViewZone();\n    }\n  };\n  FindWidget.prototype._layoutViewZone = function () {\n    var _this = this;\n    var addExtraSpaceOnTop = this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\n    if (!addExtraSpaceOnTop) {\n      this._removeViewZone();\n      return;\n    }\n    if (!this._isVisible) {\n      return;\n    }\n    var viewZone = this._viewZone;\n    if (this._viewZoneId !== undefined || !viewZone) {\n      return;\n    }\n    this._codeEditor.changeViewZones(function (accessor) {\n      viewZone.heightInPx = _this._getHeight();\n      _this._viewZoneId = accessor.addZone(viewZone);\n      // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n      _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + viewZone.heightInPx);\n    });\n  };\n  FindWidget.prototype._showViewZone = function (adjustScroll) {\n    var _this = this;\n    if (adjustScroll === void 0) {\n      adjustScroll = true;\n    }\n    if (!this._isVisible) {\n      return;\n    }\n    var addExtraSpaceOnTop = this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\n    if (!addExtraSpaceOnTop) {\n      return;\n    }\n    if (this._viewZone === undefined) {\n      this._viewZone = new FindWidgetViewZone(0);\n    }\n    var viewZone = this._viewZone;\n    this._codeEditor.changeViewZones(function (accessor) {\n      if (_this._viewZoneId !== undefined) {\n        // the view zone already exists, we need to update the height\n        var newHeight = _this._getHeight();\n        if (newHeight === viewZone.heightInPx) {\n          return;\n        }\n        var scrollAdjustment = newHeight - viewZone.heightInPx;\n        viewZone.heightInPx = newHeight;\n        accessor.layoutZone(_this._viewZoneId);\n        if (adjustScroll) {\n          _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\n        }\n        return;\n      } else {\n        var scrollAdjustment = _this._getHeight();\n        viewZone.heightInPx = scrollAdjustment;\n        _this._viewZoneId = accessor.addZone(viewZone);\n        if (adjustScroll) {\n          _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\n        }\n      }\n    });\n  };\n  FindWidget.prototype._removeViewZone = function () {\n    var _this = this;\n    this._codeEditor.changeViewZones(function (accessor) {\n      if (_this._viewZoneId !== undefined) {\n        accessor.removeZone(_this._viewZoneId);\n        _this._viewZoneId = undefined;\n        if (_this._viewZone) {\n          _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() - _this._viewZone.heightInPx);\n          _this._viewZone = undefined;\n        }\n      }\n    });\n  };\n  FindWidget.prototype._applyTheme = function (theme) {\n    var inputStyles = {\n      inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n      inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n      inputBackground: theme.getColor(inputBackground),\n      inputForeground: theme.getColor(inputForeground),\n      inputBorder: theme.getColor(inputBorder),\n      inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n      inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n      inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n      inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n      inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n      inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n      inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n      inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n      inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder)\n    };\n    this._findInput.style(inputStyles);\n    this._replaceInput.style(inputStyles);\n    this._toggleSelectionFind.style(inputStyles);\n  };\n  FindWidget.prototype._tryUpdateWidgetWidth = function () {\n    if (!this._isVisible) {\n      return;\n    }\n    if (!dom.isInDOM(this._domNode)) {\n      // the widget is not in the DOM\n      return;\n    }\n    var layoutInfo = this._codeEditor.getLayoutInfo();\n    var editorContentWidth = layoutInfo.contentWidth;\n    if (editorContentWidth <= 0) {\n      // for example, diff view original editor\n      dom.addClass(this._domNode, 'hiddenEditor');\n      return;\n    } else if (dom.hasClass(this._domNode, 'hiddenEditor')) {\n      dom.removeClass(this._domNode, 'hiddenEditor');\n    }\n    var editorWidth = layoutInfo.width;\n    var minimapWidth = layoutInfo.minimapWidth;\n    var collapsedFindWidget = false;\n    var reducedFindWidget = false;\n    var narrowFindWidget = false;\n    if (this._resized) {\n      var widgetWidth = dom.getTotalWidth(this._domNode);\n      if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n        // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n        this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\n        this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        return;\n      }\n    }\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n      reducedFindWidget = true;\n    }\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n      narrowFindWidget = true;\n    }\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n      collapsedFindWidget = true;\n    }\n    dom.toggleClass(this._domNode, 'collapsed-find-widget', collapsedFindWidget);\n    dom.toggleClass(this._domNode, 'narrow-find-widget', narrowFindWidget);\n    dom.toggleClass(this._domNode, 'reduced-find-widget', reducedFindWidget);\n    if (!narrowFindWidget && !collapsedFindWidget) {\n      // the minimal left offset of findwidget is 15px.\n      this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\n    }\n    if (this._resized) {\n      this._findInput.inputBox.layout();\n      var findInputWidth = this._findInput.inputBox.element.clientWidth;\n      if (findInputWidth > 0) {\n        this._replaceInput.width = findInputWidth;\n      }\n    } else if (this._isReplaceVisible) {\n      this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n    }\n  };\n  FindWidget.prototype._getHeight = function () {\n    var totalheight = 0;\n    // find input margin top\n    totalheight += 4;\n    // find input height\n    totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n    if (this._isReplaceVisible) {\n      // replace input margin\n      totalheight += 4;\n      totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n    }\n    // margin bottom\n    totalheight += 4;\n    return totalheight;\n  };\n  FindWidget.prototype._tryUpdateHeight = function () {\n    var totalHeight = this._getHeight();\n    if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n      return false;\n    }\n    this._cachedHeight = totalHeight;\n    this._domNode.style.height = totalHeight + \"px\";\n    return true;\n  };\n  // ----- Public\n  FindWidget.prototype.focusFindInput = function () {\n    this._findInput.select();\n    // Edge browser requires focus() in addition to select()\n    this._findInput.focus();\n  };\n  FindWidget.prototype.focusReplaceInput = function () {\n    this._replaceInput.select();\n    // Edge browser requires focus() in addition to select()\n    this._replaceInput.focus();\n  };\n  FindWidget.prototype.highlightFindOptions = function () {\n    this._findInput.highlightFindOptions();\n  };\n  FindWidget.prototype._updateSearchScope = function () {\n    if (!this._codeEditor.hasModel()) {\n      return;\n    }\n    if (this._toggleSelectionFind.checked) {\n      var selection = this._codeEditor.getSelection();\n      if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n        selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n      }\n      var currentMatch = this._state.currentMatch;\n      if (selection.startLineNumber !== selection.endLineNumber) {\n        if (!Range.equalsRange(selection, currentMatch)) {\n          // Reseed find scope\n          this._state.change({\n            searchScope: selection\n          }, true);\n        }\n      }\n    }\n  };\n  FindWidget.prototype._onFindInputMouseDown = function (e) {\n    // on linux, middle key does pasting.\n    if (e.middleButton) {\n      e.stopPropagation();\n    }\n  };\n  FindWidget.prototype._onFindInputKeyDown = function (e) {\n    if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\n      this._findInput.inputBox.insertAtCursor('\\n');\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(2 /* Tab */)) {\n      if (this._isReplaceVisible) {\n        this._replaceInput.focus();\n      } else {\n        this._findInput.focusOnCaseSensitive();\n      }\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\n      this._codeEditor.focus();\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(16 /* UpArrow */)) {\n      return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n    }\n    if (e.equals(18 /* DownArrow */)) {\n      return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n    }\n  };\n  FindWidget.prototype._onReplaceInputKeyDown = function (e) {\n    if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\n      if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n        // this is the first time when users press Ctrl + Enter to replace all\n        this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n        this._ctrlEnterReplaceAllWarningPrompted = true;\n        this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* GLOBAL */);\n      }\n\n      this._replaceInput.inputBox.insertAtCursor('\\n');\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(2 /* Tab */)) {\n      this._findInput.focusOnCaseSensitive();\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n      this._findInput.focus();\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\n      this._codeEditor.focus();\n      e.preventDefault();\n      return;\n    }\n    if (e.equals(16 /* UpArrow */)) {\n      return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n    }\n    if (e.equals(18 /* DownArrow */)) {\n      return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n    }\n  };\n  // ----- sash\n  FindWidget.prototype.getHorizontalSashTop = function (_sash) {\n    return 0;\n  };\n  FindWidget.prototype.getHorizontalSashLeft = function (_sash) {\n    return 0;\n  };\n  FindWidget.prototype.getHorizontalSashWidth = function (_sash) {\n    return 500;\n  };\n  // ----- initialization\n  FindWidget.prototype._keybindingLabelFor = function (actionId) {\n    var kb = this._keybindingService.lookupKeybinding(actionId);\n    if (!kb) {\n      return '';\n    }\n    return \" (\" + kb.getLabel() + \")\";\n  };\n  FindWidget.prototype._buildDomNode = function () {\n    var _this = this;\n    var flexibleHeight = true;\n    var flexibleWidth = true;\n    // Find input\n    this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n      width: FIND_INPUT_AREA_WIDTH,\n      label: NLS_FIND_INPUT_LABEL,\n      placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n      appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n      appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n      appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n      validation: function validation(value) {\n        if (value.length === 0 || !_this._findInput.getRegex()) {\n          return null;\n        }\n        try {\n          new RegExp(value);\n          return null;\n        } catch (e) {\n          return {\n            content: e.message\n          };\n        }\n      },\n      flexibleHeight: flexibleHeight,\n      flexibleWidth: flexibleWidth,\n      flexibleMaxHeight: 118\n    }, this._contextKeyService, true));\n    this._findInput.setRegex(!!this._state.isRegex);\n    this._findInput.setCaseSensitive(!!this._state.matchCase);\n    this._findInput.setWholeWords(!!this._state.wholeWord);\n    this._register(this._findInput.onKeyDown(function (e) {\n      return _this._onFindInputKeyDown(e);\n    }));\n    this._register(this._findInput.inputBox.onDidChange(function () {\n      if (_this._ignoreChangeEvent) {\n        return;\n      }\n      _this._state.change({\n        searchString: _this._findInput.getValue()\n      }, true);\n    }));\n    this._register(this._findInput.onDidOptionChange(function () {\n      _this._state.change({\n        isRegex: _this._findInput.getRegex(),\n        wholeWord: _this._findInput.getWholeWords(),\n        matchCase: _this._findInput.getCaseSensitive()\n      }, true);\n    }));\n    this._register(this._findInput.onCaseSensitiveKeyDown(function (e) {\n      if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n        if (_this._isReplaceVisible) {\n          _this._replaceInput.focus();\n          e.preventDefault();\n        }\n      }\n    }));\n    this._register(this._findInput.onRegexKeyDown(function (e) {\n      if (e.equals(2 /* Tab */)) {\n        if (_this._isReplaceVisible) {\n          _this._replaceInput.focusOnPreserve();\n          e.preventDefault();\n        }\n      }\n    }));\n    this._register(this._findInput.inputBox.onDidHeightChange(function (e) {\n      if (_this._tryUpdateHeight()) {\n        _this._showViewZone();\n      }\n    }));\n    if (platform.isLinux) {\n      this._register(this._findInput.onMouseDown(function (e) {\n        return _this._onFindInputMouseDown(e);\n      }));\n    }\n    this._matchesCount = document.createElement('div');\n    this._matchesCount.className = 'matchesCount';\n    this._updateMatchesCount();\n    // Previous button\n    this._prevBtn = this._register(new SimpleButton({\n      label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n      className: 'codicon codicon-arrow-up',\n      onTrigger: function onTrigger() {\n        _this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n      }\n    }));\n    // Next button\n    this._nextBtn = this._register(new SimpleButton({\n      label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n      className: 'codicon codicon-arrow-down',\n      onTrigger: function onTrigger() {\n        _this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n      }\n    }));\n    var findPart = document.createElement('div');\n    findPart.className = 'find-part';\n    findPart.appendChild(this._findInput.domNode);\n    var actionsContainer = document.createElement('div');\n    actionsContainer.className = 'find-actions';\n    findPart.appendChild(actionsContainer);\n    actionsContainer.appendChild(this._matchesCount);\n    actionsContainer.appendChild(this._prevBtn.domNode);\n    actionsContainer.appendChild(this._nextBtn.domNode);\n    // Toggle selection button\n    this._toggleSelectionFind = this._register(new Checkbox({\n      actionClassName: 'codicon codicon-selection',\n      title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n      isChecked: false\n    }));\n    this._register(this._toggleSelectionFind.onChange(function () {\n      if (_this._toggleSelectionFind.checked) {\n        if (_this._codeEditor.hasModel()) {\n          var selection = _this._codeEditor.getSelection();\n          if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n            selection = selection.setEndPosition(selection.endLineNumber - 1, _this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n          }\n          if (!selection.isEmpty()) {\n            _this._state.change({\n              searchScope: selection\n            }, true);\n          }\n        }\n      } else {\n        _this._state.change({\n          searchScope: null\n        }, true);\n      }\n    }));\n    actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n    // Close button\n    this._closeBtn = this._register(new SimpleButton({\n      label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n      className: 'codicon codicon-close',\n      onTrigger: function onTrigger() {\n        _this._state.change({\n          isRevealed: false,\n          searchScope: null\n        }, false);\n      },\n      onKeyDown: function onKeyDown(e) {\n        if (e.equals(2 /* Tab */)) {\n          if (_this._isReplaceVisible) {\n            if (_this._replaceBtn.isEnabled()) {\n              _this._replaceBtn.focus();\n            } else {\n              _this._codeEditor.focus();\n            }\n            e.preventDefault();\n          }\n        }\n      }\n    }));\n    actionsContainer.appendChild(this._closeBtn.domNode);\n    // Replace input\n    this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n      label: NLS_REPLACE_INPUT_LABEL,\n      placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n      history: [],\n      flexibleHeight: flexibleHeight,\n      flexibleWidth: flexibleWidth,\n      flexibleMaxHeight: 118\n    }, this._contextKeyService, true));\n    this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n    this._register(this._replaceInput.onKeyDown(function (e) {\n      return _this._onReplaceInputKeyDown(e);\n    }));\n    this._register(this._replaceInput.inputBox.onDidChange(function () {\n      _this._state.change({\n        replaceString: _this._replaceInput.inputBox.value\n      }, false);\n    }));\n    this._register(this._replaceInput.inputBox.onDidHeightChange(function (e) {\n      if (_this._isReplaceVisible && _this._tryUpdateHeight()) {\n        _this._showViewZone();\n      }\n    }));\n    this._register(this._replaceInput.onDidOptionChange(function () {\n      _this._state.change({\n        preserveCase: _this._replaceInput.getPreserveCase()\n      }, true);\n    }));\n    this._register(this._replaceInput.onPreserveCaseKeyDown(function (e) {\n      if (e.equals(2 /* Tab */)) {\n        if (_this._prevBtn.isEnabled()) {\n          _this._prevBtn.focus();\n        } else if (_this._nextBtn.isEnabled()) {\n          _this._nextBtn.focus();\n        } else if (_this._toggleSelectionFind.enabled) {\n          _this._toggleSelectionFind.focus();\n        } else if (_this._closeBtn.isEnabled()) {\n          _this._closeBtn.focus();\n        }\n        e.preventDefault();\n      }\n    }));\n    // Replace one button\n    this._replaceBtn = this._register(new SimpleButton({\n      label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n      className: 'codicon codicon-replace',\n      onTrigger: function onTrigger() {\n        _this._controller.replace();\n      },\n      onKeyDown: function onKeyDown(e) {\n        if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\n          _this._closeBtn.focus();\n          e.preventDefault();\n        }\n      }\n    }));\n    // Replace all button\n    this._replaceAllBtn = this._register(new SimpleButton({\n      label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n      className: 'codicon codicon-replace-all',\n      onTrigger: function onTrigger() {\n        _this._controller.replaceAll();\n      }\n    }));\n    var replacePart = document.createElement('div');\n    replacePart.className = 'replace-part';\n    replacePart.appendChild(this._replaceInput.domNode);\n    var replaceActionsContainer = document.createElement('div');\n    replaceActionsContainer.className = 'replace-actions';\n    replacePart.appendChild(replaceActionsContainer);\n    replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n    replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n    // Toggle replace button\n    this._toggleReplaceBtn = this._register(new SimpleButton({\n      label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n      className: 'codicon toggle left',\n      onTrigger: function onTrigger() {\n        _this._state.change({\n          isReplaceRevealed: !_this._isReplaceVisible\n        }, false);\n        if (_this._isReplaceVisible) {\n          _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\n          _this._replaceInput.inputBox.layout();\n        }\n        _this._showViewZone();\n      }\n    }));\n    this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\n    this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\n    this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n    // Widget\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'editor-widget find-widget';\n    this._domNode.setAttribute('aria-hidden', 'true');\n    // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n    this._domNode.style.width = FIND_WIDGET_INITIAL_WIDTH + \"px\";\n    this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n    this._domNode.appendChild(findPart);\n    this._domNode.appendChild(replacePart);\n    this._resizeSash = new Sash(this._domNode, this, {\n      orientation: 0 /* VERTICAL */\n    });\n    this._resized = false;\n    var originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n    this._register(this._resizeSash.onDidStart(function () {\n      originalWidth = dom.getTotalWidth(_this._domNode);\n    }));\n    this._register(this._resizeSash.onDidChange(function (evt) {\n      _this._resized = true;\n      var width = originalWidth + evt.startX - evt.currentX;\n      if (width < FIND_WIDGET_INITIAL_WIDTH) {\n        // narrow down the find widget should be handled by CSS.\n        return;\n      }\n      var maxWidth = parseFloat(dom.getComputedStyle(_this._domNode).maxWidth) || 0;\n      if (width > maxWidth) {\n        return;\n      }\n      _this._domNode.style.width = width + \"px\";\n      if (_this._isReplaceVisible) {\n        _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\n      }\n      _this._findInput.inputBox.layout();\n      _this._tryUpdateHeight();\n    }));\n    this._register(this._resizeSash.onDidReset(function () {\n      // users double click on the sash\n      var currentWidth = dom.getTotalWidth(_this._domNode);\n      if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n        // The editor is narrow and the width of the find widget is controlled fully by CSS.\n        return;\n      }\n      var width = FIND_WIDGET_INITIAL_WIDTH;\n      if (!_this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n        // 1. never resized before, double click should maximizes it\n        // 2. users resized it already but its width is the same as default\n        var layoutInfo = _this._codeEditor.getLayoutInfo();\n        width = layoutInfo.width - 28 - layoutInfo.minimapWidth - 15;\n        _this._resized = true;\n      } else {\n        /**\r\n         * no op, the find widget should be shrinked to its default size.\r\n         */\n      }\n      _this._domNode.style.width = width + \"px\";\n      if (_this._isReplaceVisible) {\n        _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\n      }\n      _this._findInput.inputBox.layout();\n    }));\n  };\n  FindWidget.prototype.updateAccessibilitySupport = function () {\n    var value = this._codeEditor.getOption(2 /* accessibilitySupport */);\n    this._findInput.setFocusInputOnOptionClick(value !== 2 /* Enabled */);\n  };\n\n  FindWidget.ID = 'editor.contrib.findWidget';\n  return FindWidget;\n}(Widget);\nexport { FindWidget };\nvar SimpleButton = /** @class */function (_super) {\n  __extends(SimpleButton, _super);\n  function SimpleButton(opts) {\n    var _this = _super.call(this) || this;\n    _this._opts = opts;\n    _this._domNode = document.createElement('div');\n    _this._domNode.title = _this._opts.label;\n    _this._domNode.tabIndex = 0;\n    _this._domNode.className = 'button ' + _this._opts.className;\n    _this._domNode.setAttribute('role', 'button');\n    _this._domNode.setAttribute('aria-label', _this._opts.label);\n    _this.onclick(_this._domNode, function (e) {\n      _this._opts.onTrigger();\n      e.preventDefault();\n    });\n    _this.onkeydown(_this._domNode, function (e) {\n      if (e.equals(10 /* Space */) || e.equals(3 /* Enter */)) {\n        _this._opts.onTrigger();\n        e.preventDefault();\n        return;\n      }\n      if (_this._opts.onKeyDown) {\n        _this._opts.onKeyDown(e);\n      }\n    });\n    return _this;\n  }\n  Object.defineProperty(SimpleButton.prototype, \"domNode\", {\n    get: function get() {\n      return this._domNode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  SimpleButton.prototype.isEnabled = function () {\n    return this._domNode.tabIndex >= 0;\n  };\n  SimpleButton.prototype.focus = function () {\n    this._domNode.focus();\n  };\n  SimpleButton.prototype.setEnabled = function (enabled) {\n    dom.toggleClass(this._domNode, 'disabled', !enabled);\n    this._domNode.setAttribute('aria-disabled', String(!enabled));\n    this._domNode.tabIndex = enabled ? 0 : -1;\n  };\n  SimpleButton.prototype.setExpanded = function (expanded) {\n    this._domNode.setAttribute('aria-expanded', String(!!expanded));\n  };\n  SimpleButton.prototype.toggleClass = function (className, shouldHaveIt) {\n    dom.toggleClass(this._domNode, className, shouldHaveIt);\n  };\n  return SimpleButton;\n}(Widget);\nexport { SimpleButton };\n// theming\nregisterThemingParticipant(function (theme, collector) {\n  var addBackgroundColorRule = function addBackgroundColorRule(selector, color) {\n    if (color) {\n      collector.addRule(\".monaco-editor \" + selector + \" { background-color: \" + color + \"; }\");\n    }\n  };\n  addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n  addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n  addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n  var widgetBackground = theme.getColor(editorWidgetBackground);\n  addBackgroundColorRule('.find-widget', widgetBackground);\n  var widgetShadowColor = theme.getColor(widgetShadow);\n  if (widgetShadowColor) {\n    collector.addRule(\".monaco-editor .find-widget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\n  }\n  var findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n  if (findMatchHighlightBorder) {\n    collector.addRule(\".monaco-editor .findMatch { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + findMatchHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n  var findMatchBorder = theme.getColor(editorFindMatchBorder);\n  if (findMatchBorder) {\n    collector.addRule(\".monaco-editor .currentFindMatch { border: 2px solid \" + findMatchBorder + \"; padding: 1px; box-sizing: border-box; }\");\n  }\n  var findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n  if (findRangeHighlightBorder) {\n    collector.addRule(\".monaco-editor .findScope { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + findRangeHighlightBorder + \"; }\");\n  }\n  var hcBorder = theme.getColor(contrastBorder);\n  if (hcBorder) {\n    collector.addRule(\".monaco-editor .find-widget { border: 1px solid \" + hcBorder + \"; }\");\n  }\n  var foreground = theme.getColor(editorWidgetForeground);\n  if (foreground) {\n    collector.addRule(\".monaco-editor .find-widget { color: \" + foreground + \"; }\");\n  }\n  var error = theme.getColor(errorForeground);\n  if (error) {\n    collector.addRule(\".monaco-editor .find-widget.no-results .matchesCount { color: \" + error + \"; }\");\n  }\n  var resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n  if (resizeBorderBackground) {\n    collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + resizeBorderBackground + \"; width: 3px !important; margin-left: -4px;}\");\n  } else {\n    var border = theme.getColor(editorWidgetBorder);\n    if (border) {\n      collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + border + \"; width: 3px !important; margin-left: -4px;}\");\n    }\n  }\n  // This rule is used to override the outline color for synthetic-focus find input.\n  var focusOutline = theme.getColor(focusBorder);\n  if (focusOutline) {\n    collector.addRule(\".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: \" + focusOutline + \"; }\");\n  }\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","nls","dom","alert","alertFn","Checkbox","Sash","Widget","Delayer","onUnexpectedError","toDisposable","platform","strings","Range","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","FIND_IDS","MATCHES_LIMIT","contrastBorder","editorFindMatch","editorFindMatchBorder","editorFindMatchHighlight","editorFindMatchHighlightBorder","editorFindRangeHighlight","editorFindRangeHighlightBorder","editorWidgetBackground","editorWidgetBorder","editorWidgetResizeBorder","errorForeground","inputActiveOptionBorder","inputActiveOptionBackground","inputBackground","inputBorder","inputForeground","inputValidationErrorBackground","inputValidationErrorBorder","inputValidationErrorForeground","inputValidationInfoBackground","inputValidationInfoBorder","inputValidationInfoForeground","inputValidationWarningBackground","inputValidationWarningBorder","inputValidationWarningForeground","widgetShadow","editorWidgetForeground","focusBorder","registerThemingParticipant","ContextScopedFindInput","ContextScopedReplaceInput","NLS_FIND_INPUT_LABEL","localize","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","FIND_WIDGET_INITIAL_WIDTH","PART_WIDTH","FIND_INPUT_AREA_WIDTH","MAX_MATCHES_COUNT_WIDTH","FIND_INPUT_AREA_HEIGHT","ctrlEnterReplaceAllWarningPromptedKey","ctrlKeyMod","isMacintosh","FindWidgetViewZone","afterLineNumber","heightInPx","suppressMouseDown","domNode","document","createElement","className","stopPropagationForMultiLineUpwards","event","value","textarea","isMultiline","match","selectionStart","stopPropagation","stopPropagationForMultiLineDownwards","selectionEnd","length","FindWidget","_super","codeEditor","controller","state","contextViewProvider","keybindingService","contextKeyService","themeService","storageService","notificationService","_this","call","_cachedHeight","_codeEditor","_controller","_state","_contextViewProvider","_keybindingService","_contextKeyService","_storageService","_notificationService","_ctrlEnterReplaceAllWarningPrompted","getBoolean","_isVisible","_isReplaceVisible","_ignoreChangeEvent","_updateHistoryDelayer","_register","cancel","onFindReplaceStateChange","e","_onStateChanged","_buildDomNode","_updateButtons","_tryUpdateWidgetWidth","_findInput","inputBox","layout","onDidChangeConfiguration","hasChanged","getOption","change","isReplaceRevealed","updateAccessibilitySupport","addExtraSpaceOnTop","_viewZone","_showViewZone","_removeViewZone","onDidChangeCursorSelection","_updateToggleSelectionFindButton","onDidFocusEditorWidget","globalBufferTerm","getGlobalBufferTerm","searchString","select","_findInputFocused","bindTo","_findFocusTracker","trackFocus","inputElement","onDidFocus","set","_updateSearchScope","onDidBlur","_replaceInputFocused","_replaceFocusTracker","_replaceInput","addOverlayWidget","_applyTheme","getTheme","onThemeChange","bind","onDidChangeModel","_viewZoneId","undefined","onDidScrollChange","scrollTopChanged","_layoutViewZone","setTimeout","getId","ID","getDomNode","_domNode","getPosition","preference","setValue","replaceString","isRevealed","_reveal","_hide","width","getTotalWidth","_tryUpdateHeight","isRegex","setRegex","wholeWord","setWholeWords","matchCase","setCaseSensitive","searchScope","_toggleSelectionFind","checked","matchesCount","matchesPosition","showRedOutline","toggleClass","_updateMatchesCount","currentMatch","updateHistory","_delayedUpdateHistory","trigger","_updateHistory","addToHistory","_matchesCount","style","minWidth","title","firstChild","removeChild","label","String","format","appendChild","createTextNode","_getAriaLabel","Math","max","clientWidth","startLineNumber","startColumn","selection","getSelection","isSelection","endLineNumber","endColumn","isChecked","enable","disable","setEnabled","_closeBtn","findInputIsNonEmpty","_prevBtn","_nextBtn","_replaceBtn","_replaceAllBtn","_toggleReplaceBtn","setExpanded","canReplace","autoFindInSelection","isSelectionMultipleLine","addClass","setAttribute","validate","layoutOverlayWidget","adjustEditorScrollTop","seedSearchStringFromSelection","editorCoords","getDomNodePagePosition","startCoords","getScrolledVisiblePosition","getStartPosition","startLeft","left","startTop","top","leftOfFindWidget","getTopLeftOffset","endCoords","getEndPosition","endLeft","focusTheEditor","removeClass","clearMessage","focus","viewZone","changeViewZones","accessor","_getHeight","addZone","setScrollTop","getScrollTop","adjustScroll","newHeight","scrollAdjustment","layoutZone","removeZone","theme","inputStyles","getColor","isInDOM","layoutInfo","getLayoutInfo","editorContentWidth","contentWidth","hasClass","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","_resized","widgetWidth","maxWidth","findInputWidth","element","totalheight","height","totalHeight","focusFindInput","focusReplaceInput","highlightFindOptions","hasModel","setEndPosition","getModel","getLineMaxColumn","equalsRange","_onFindInputMouseDown","middleButton","_onFindInputKeyDown","equals","insertAtCursor","preventDefault","focusOnCaseSensitive","getValue","querySelector","_onReplaceInputKeyDown","isWindows","isNative","info","store","getHorizontalSashTop","_sash","getHorizontalSashLeft","getHorizontalSashWidth","_keybindingLabelFor","actionId","kb","lookupKeybinding","getLabel","flexibleHeight","flexibleWidth","placeholder","appendCaseSensitiveLabel","ToggleCaseSensitiveCommand","appendWholeWordsLabel","ToggleWholeWordCommand","appendRegexLabel","ToggleRegexCommand","validation","getRegex","RegExp","content","message","flexibleMaxHeight","onKeyDown","onDidChange","onDidOptionChange","getWholeWords","getCaseSensitive","onCaseSensitiveKeyDown","onRegexKeyDown","focusOnPreserve","onDidHeightChange","isLinux","onMouseDown","SimpleButton","PreviousMatchFindAction","onTrigger","getAction","run","then","NextMatchFindAction","findPart","actionsContainer","actionClassName","ToggleSearchScopeCommand","onChange","isEmpty","CloseFindWidgetCommand","isEnabled","history","setPreserveCase","preserveCase","getPreserveCase","onPreserveCaseKeyDown","enabled","ReplaceOneAction","replace","ReplaceAllAction","replaceAll","replacePart","replaceActionsContainer","_resizeSash","orientation","originalWidth","onDidStart","evt","startX","currentX","parseFloat","getComputedStyle","onDidReset","currentWidth","setFocusInputOnOptionClick","opts","_opts","tabIndex","onclick","onkeydown","defineProperty","get","enumerable","configurable","expanded","shouldHaveIt","collector","addBackgroundColorRule","selector","color","addRule","widgetBackground","widgetShadowColor","findMatchHighlightBorder","type","findMatchBorder","findRangeHighlightBorder","hcBorder","foreground","error","resizeBorderBackground","border","focusOutline"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/find/findWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './findWidget.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { alert as alertFn } from '../../../base/browser/ui/aria/aria.js';\r\nimport { Checkbox } from '../../../base/browser/ui/checkbox/checkbox.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { Delayer } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\r\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetResizeBorder, errorForeground, inputActiveOptionBorder, inputActiveOptionBackground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, widgetShadow, editorWidgetForeground, focusBorder } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../platform/browser/contextScopedHistoryWidget.js';\r\nvar NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\r\nvar NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\r\nvar NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous match\");\r\nvar NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next match\");\r\nvar NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in selection\");\r\nvar NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\r\nvar NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\r\nvar NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\r\nvar NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\r\nvar NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\r\nvar NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace mode\");\r\nvar NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\r\nvar NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\r\nvar NLS_NO_RESULTS = nls.localize('label.noResults', \"No Results\");\r\nvar FIND_WIDGET_INITIAL_WIDTH = 419;\r\nvar PART_WIDTH = 275;\r\nvar FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\r\nvar MAX_MATCHES_COUNT_WIDTH = 69;\r\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\r\nvar FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\r\nvar ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\r\nvar ctrlKeyMod = (platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */);\r\nvar FindWidgetViewZone = /** @class */ (function () {\r\n    function FindWidgetViewZone(afterLineNumber) {\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\r\n        this.suppressMouseDown = false;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.className = 'dock-find-viewzone';\r\n    }\r\n    return FindWidgetViewZone;\r\n}());\r\nexport { FindWidgetViewZone };\r\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\r\n    var isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\r\n    var isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nvar FindWidget = /** @class */ (function (_super) {\r\n    __extends(FindWidget, _super);\r\n    function FindWidget(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._cachedHeight = null;\r\n        _this._codeEditor = codeEditor;\r\n        _this._controller = controller;\r\n        _this._state = state;\r\n        _this._contextViewProvider = contextViewProvider;\r\n        _this._keybindingService = keybindingService;\r\n        _this._contextKeyService = contextKeyService;\r\n        _this._storageService = storageService;\r\n        _this._notificationService = notificationService;\r\n        _this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* GLOBAL */);\r\n        _this._isVisible = false;\r\n        _this._isReplaceVisible = false;\r\n        _this._ignoreChangeEvent = false;\r\n        _this._updateHistoryDelayer = new Delayer(500);\r\n        _this._register(toDisposable(function () { return _this._updateHistoryDelayer.cancel(); }));\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        _this._buildDomNode();\r\n        _this._updateButtons();\r\n        _this._tryUpdateWidgetWidth();\r\n        _this._findInput.inputBox.layout();\r\n        _this._register(_this._codeEditor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(68 /* readOnly */)) {\r\n                if (_this._codeEditor.getOption(68 /* readOnly */)) {\r\n                    // Hide replace part if editor becomes read only\r\n                    _this._state.change({ isReplaceRevealed: false }, false);\r\n                }\r\n                _this._updateButtons();\r\n            }\r\n            if (e.hasChanged(107 /* layoutInfo */)) {\r\n                _this._tryUpdateWidgetWidth();\r\n            }\r\n            if (e.hasChanged(2 /* accessibilitySupport */)) {\r\n                _this.updateAccessibilitySupport();\r\n            }\r\n            if (e.hasChanged(28 /* find */)) {\r\n                var addExtraSpaceOnTop = _this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\r\n                if (addExtraSpaceOnTop && !_this._viewZone) {\r\n                    _this._viewZone = new FindWidgetViewZone(0);\r\n                    _this._showViewZone();\r\n                }\r\n                if (!addExtraSpaceOnTop && _this._viewZone) {\r\n                    _this._removeViewZone();\r\n                }\r\n            }\r\n        }));\r\n        _this.updateAccessibilitySupport();\r\n        _this._register(_this._codeEditor.onDidChangeCursorSelection(function () {\r\n            if (_this._isVisible) {\r\n                _this._updateToggleSelectionFindButton();\r\n            }\r\n        }));\r\n        _this._register(_this._codeEditor.onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                var globalBufferTerm = _this._controller.getGlobalBufferTerm();\r\n                if (globalBufferTerm && globalBufferTerm !== _this._state.searchString) {\r\n                    _this._state.change({ searchString: globalBufferTerm }, true);\r\n                    _this._findInput.select();\r\n                }\r\n            }\r\n        }));\r\n        _this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        _this._findFocusTracker = _this._register(dom.trackFocus(_this._findInput.inputBox.inputElement));\r\n        _this._register(_this._findFocusTracker.onDidFocus(function () {\r\n            _this._findInputFocused.set(true);\r\n            _this._updateSearchScope();\r\n        }));\r\n        _this._register(_this._findFocusTracker.onDidBlur(function () {\r\n            _this._findInputFocused.set(false);\r\n        }));\r\n        _this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        _this._replaceFocusTracker = _this._register(dom.trackFocus(_this._replaceInput.inputBox.inputElement));\r\n        _this._register(_this._replaceFocusTracker.onDidFocus(function () {\r\n            _this._replaceInputFocused.set(true);\r\n            _this._updateSearchScope();\r\n        }));\r\n        _this._register(_this._replaceFocusTracker.onDidBlur(function () {\r\n            _this._replaceInputFocused.set(false);\r\n        }));\r\n        _this._codeEditor.addOverlayWidget(_this);\r\n        if (_this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop) {\r\n            _this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\r\n        }\r\n        _this._applyTheme(themeService.getTheme());\r\n        _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        _this._register(_this._codeEditor.onDidChangeModel(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._viewZoneId = undefined;\r\n        }));\r\n        _this._register(_this._codeEditor.onDidScrollChange(function (e) {\r\n            if (e.scrollTopChanged) {\r\n                _this._layoutViewZone();\r\n                return;\r\n            }\r\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\r\n            setTimeout(function () {\r\n                _this._layoutViewZone();\r\n            }, 0);\r\n        }));\r\n        return _this;\r\n    }\r\n    // ----- IOverlayWidget API\r\n    FindWidget.prototype.getId = function () {\r\n        return FindWidget.ID;\r\n    };\r\n    FindWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    FindWidget.prototype.getPosition = function () {\r\n        if (this._isVisible) {\r\n            return {\r\n                preference: 0 /* TOP_RIGHT_CORNER */\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    // ----- React to state changes\r\n    FindWidget.prototype._onStateChanged = function (e) {\r\n        if (e.searchString) {\r\n            try {\r\n                this._ignoreChangeEvent = true;\r\n                this._findInput.setValue(this._state.searchString);\r\n            }\r\n            finally {\r\n                this._ignoreChangeEvent = false;\r\n            }\r\n            this._updateButtons();\r\n        }\r\n        if (e.replaceString) {\r\n            this._replaceInput.inputBox.value = this._state.replaceString;\r\n        }\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._reveal();\r\n            }\r\n            else {\r\n                this._hide(true);\r\n            }\r\n        }\r\n        if (e.isReplaceRevealed) {\r\n            if (this._state.isReplaceRevealed) {\r\n                if (!this._codeEditor.getOption(68 /* readOnly */) && !this._isReplaceVisible) {\r\n                    this._isReplaceVisible = true;\r\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                    this._updateButtons();\r\n                    this._replaceInput.inputBox.layout();\r\n                }\r\n            }\r\n            else {\r\n                if (this._isReplaceVisible) {\r\n                    this._isReplaceVisible = false;\r\n                    this._updateButtons();\r\n                }\r\n            }\r\n        }\r\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\r\n            if (this._tryUpdateHeight()) {\r\n                this._showViewZone();\r\n            }\r\n        }\r\n        if (e.isRegex) {\r\n            this._findInput.setRegex(this._state.isRegex);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._findInput.setWholeWords(this._state.wholeWord);\r\n        }\r\n        if (e.matchCase) {\r\n            this._findInput.setCaseSensitive(this._state.matchCase);\r\n        }\r\n        if (e.searchScope) {\r\n            if (this._state.searchScope) {\r\n                this._toggleSelectionFind.checked = true;\r\n            }\r\n            else {\r\n                this._toggleSelectionFind.checked = false;\r\n            }\r\n            this._updateToggleSelectionFindButton();\r\n        }\r\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\r\n            var showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\r\n            dom.toggleClass(this._domNode, 'no-results', showRedOutline);\r\n            this._updateMatchesCount();\r\n            this._updateButtons();\r\n        }\r\n        if (e.searchString || e.currentMatch) {\r\n            this._layoutViewZone();\r\n        }\r\n        if (e.updateHistory) {\r\n            this._delayedUpdateHistory();\r\n        }\r\n    };\r\n    FindWidget.prototype._delayedUpdateHistory = function () {\r\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\r\n    };\r\n    FindWidget.prototype._updateHistory = function () {\r\n        if (this._state.searchString) {\r\n            this._findInput.inputBox.addToHistory();\r\n        }\r\n        if (this._state.replaceString) {\r\n            this._replaceInput.inputBox.addToHistory();\r\n        }\r\n    };\r\n    FindWidget.prototype._updateMatchesCount = function () {\r\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\r\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\r\n        }\r\n        else {\r\n            this._matchesCount.title = '';\r\n        }\r\n        // remove previous content\r\n        if (this._matchesCount.firstChild) {\r\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\r\n        }\r\n        var label;\r\n        if (this._state.matchesCount > 0) {\r\n            var matchesCount = String(this._state.matchesCount);\r\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n                matchesCount += '+';\r\n            }\r\n            var matchesPosition = String(this._state.matchesPosition);\r\n            if (matchesPosition === '0') {\r\n                matchesPosition = '?';\r\n            }\r\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\r\n        }\r\n        else {\r\n            label = NLS_NO_RESULTS;\r\n        }\r\n        this._matchesCount.appendChild(document.createTextNode(label));\r\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString), true);\r\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\r\n    };\r\n    // ----- actions\r\n    FindWidget.prototype._getAriaLabel = function (label, currentMatch, searchString) {\r\n        if (label === NLS_NO_RESULTS) {\r\n            return searchString === ''\r\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\r\n                : nls.localize('ariaSearchNoResult', \"{0} found for {1}\", label, searchString);\r\n        }\r\n        return currentMatch\r\n            ? nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for {1} at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn)\r\n            : nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for {1}\", label, searchString);\r\n    };\r\n    /**\r\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\r\n     * If 'selection find' is OFF we enable the button only if there is a selection.\r\n     */\r\n    FindWidget.prototype._updateToggleSelectionFindButton = function () {\r\n        var selection = this._codeEditor.getSelection();\r\n        var isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\r\n        var isChecked = this._toggleSelectionFind.checked;\r\n        if (this._isVisible && (isChecked || isSelection)) {\r\n            this._toggleSelectionFind.enable();\r\n        }\r\n        else {\r\n            this._toggleSelectionFind.disable();\r\n        }\r\n    };\r\n    FindWidget.prototype._updateButtons = function () {\r\n        this._findInput.setEnabled(this._isVisible);\r\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\r\n        this._updateToggleSelectionFindButton();\r\n        this._closeBtn.setEnabled(this._isVisible);\r\n        var findInputIsNonEmpty = (this._state.searchString.length > 0);\r\n        var matchesCount = this._state.matchesCount ? true : false;\r\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\r\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\r\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        dom.toggleClass(this._domNode, 'replaceToggled', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        var canReplace = !this._codeEditor.getOption(68 /* readOnly */);\r\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\r\n    };\r\n    FindWidget.prototype._reveal = function () {\r\n        var _this = this;\r\n        if (!this._isVisible) {\r\n            this._isVisible = true;\r\n            var selection = this._codeEditor.getSelection();\r\n            switch (this._codeEditor.getOption(28 /* find */).autoFindInSelection) {\r\n                case 'always':\r\n                    this._toggleSelectionFind.checked = true;\r\n                    break;\r\n                case 'never':\r\n                    this._toggleSelectionFind.checked = false;\r\n                    break;\r\n                case 'multiline':\r\n                    var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this._tryUpdateWidgetWidth();\r\n            this._updateButtons();\r\n            setTimeout(function () {\r\n                dom.addClass(_this._domNode, 'visible');\r\n                _this._domNode.setAttribute('aria-hidden', 'false');\r\n            }, 0);\r\n            // validate query again as it's being dismissed when we hide the find widget.\r\n            setTimeout(function () {\r\n                _this._findInput.validate();\r\n            }, 200);\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            var adjustEditorScrollTop = true;\r\n            if (this._codeEditor.getOption(28 /* find */).seedSearchStringFromSelection && selection) {\r\n                var domNode = this._codeEditor.getDomNode();\r\n                if (domNode) {\r\n                    var editorCoords = dom.getDomNodePagePosition(domNode);\r\n                    var startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\r\n                    var startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\r\n                    var startTop = startCoords ? startCoords.top : 0;\r\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\r\n                        if (selection.endLineNumber > selection.startLineNumber) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        var leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\r\n                        if (startLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        var endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\r\n                        var endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\r\n                        if (endLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._showViewZone(adjustEditorScrollTop);\r\n        }\r\n    };\r\n    FindWidget.prototype._hide = function (focusTheEditor) {\r\n        if (this._isVisible) {\r\n            this._isVisible = false;\r\n            this._updateButtons();\r\n            dom.removeClass(this._domNode, 'visible');\r\n            this._domNode.setAttribute('aria-hidden', 'true');\r\n            this._findInput.clearMessage();\r\n            if (focusTheEditor) {\r\n                this._codeEditor.focus();\r\n            }\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            this._removeViewZone();\r\n        }\r\n    };\r\n    FindWidget.prototype._layoutViewZone = function () {\r\n        var _this = this;\r\n        var addExtraSpaceOnTop = this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            this._removeViewZone();\r\n            return;\r\n        }\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        var viewZone = this._viewZone;\r\n        if (this._viewZoneId !== undefined || !viewZone) {\r\n            return;\r\n        }\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            viewZone.heightInPx = _this._getHeight();\r\n            _this._viewZoneId = accessor.addZone(viewZone);\r\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\r\n            _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + viewZone.heightInPx);\r\n        });\r\n    };\r\n    FindWidget.prototype._showViewZone = function (adjustScroll) {\r\n        var _this = this;\r\n        if (adjustScroll === void 0) { adjustScroll = true; }\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        var addExtraSpaceOnTop = this._codeEditor.getOption(28 /* find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            return;\r\n        }\r\n        if (this._viewZone === undefined) {\r\n            this._viewZone = new FindWidgetViewZone(0);\r\n        }\r\n        var viewZone = this._viewZone;\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            if (_this._viewZoneId !== undefined) {\r\n                // the view zone already exists, we need to update the height\r\n                var newHeight = _this._getHeight();\r\n                if (newHeight === viewZone.heightInPx) {\r\n                    return;\r\n                }\r\n                var scrollAdjustment = newHeight - viewZone.heightInPx;\r\n                viewZone.heightInPx = newHeight;\r\n                accessor.layoutZone(_this._viewZoneId);\r\n                if (adjustScroll) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n                return;\r\n            }\r\n            else {\r\n                var scrollAdjustment = _this._getHeight();\r\n                viewZone.heightInPx = scrollAdjustment;\r\n                _this._viewZoneId = accessor.addZone(viewZone);\r\n                if (adjustScroll) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    FindWidget.prototype._removeViewZone = function () {\r\n        var _this = this;\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            if (_this._viewZoneId !== undefined) {\r\n                accessor.removeZone(_this._viewZoneId);\r\n                _this._viewZoneId = undefined;\r\n                if (_this._viewZone) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() - _this._viewZone.heightInPx);\r\n                    _this._viewZone = undefined;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    FindWidget.prototype._applyTheme = function (theme) {\r\n        var inputStyles = {\r\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\r\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\r\n            inputBackground: theme.getColor(inputBackground),\r\n            inputForeground: theme.getColor(inputForeground),\r\n            inputBorder: theme.getColor(inputBorder),\r\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\r\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\r\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\r\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\r\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\r\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\r\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\r\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\r\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\r\n        };\r\n        this._findInput.style(inputStyles);\r\n        this._replaceInput.style(inputStyles);\r\n        this._toggleSelectionFind.style(inputStyles);\r\n    };\r\n    FindWidget.prototype._tryUpdateWidgetWidth = function () {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        if (!dom.isInDOM(this._domNode)) {\r\n            // the widget is not in the DOM\r\n            return;\r\n        }\r\n        var layoutInfo = this._codeEditor.getLayoutInfo();\r\n        var editorContentWidth = layoutInfo.contentWidth;\r\n        if (editorContentWidth <= 0) {\r\n            // for example, diff view original editor\r\n            dom.addClass(this._domNode, 'hiddenEditor');\r\n            return;\r\n        }\r\n        else if (dom.hasClass(this._domNode, 'hiddenEditor')) {\r\n            dom.removeClass(this._domNode, 'hiddenEditor');\r\n        }\r\n        var editorWidth = layoutInfo.width;\r\n        var minimapWidth = layoutInfo.minimapWidth;\r\n        var collapsedFindWidget = false;\r\n        var reducedFindWidget = false;\r\n        var narrowFindWidget = false;\r\n        if (this._resized) {\r\n            var widgetWidth = dom.getTotalWidth(this._domNode);\r\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\r\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\r\n                this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\r\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                return;\r\n            }\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\r\n            reducedFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\r\n            narrowFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\r\n            collapsedFindWidget = true;\r\n        }\r\n        dom.toggleClass(this._domNode, 'collapsed-find-widget', collapsedFindWidget);\r\n        dom.toggleClass(this._domNode, 'narrow-find-widget', narrowFindWidget);\r\n        dom.toggleClass(this._domNode, 'reduced-find-widget', reducedFindWidget);\r\n        if (!narrowFindWidget && !collapsedFindWidget) {\r\n            // the minimal left offset of findwidget is 15px.\r\n            this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\r\n        }\r\n        if (this._resized) {\r\n            this._findInput.inputBox.layout();\r\n            var findInputWidth = this._findInput.inputBox.element.clientWidth;\r\n            if (findInputWidth > 0) {\r\n                this._replaceInput.width = findInputWidth;\r\n            }\r\n        }\r\n        else if (this._isReplaceVisible) {\r\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n        }\r\n    };\r\n    FindWidget.prototype._getHeight = function () {\r\n        var totalheight = 0;\r\n        // find input margin top\r\n        totalheight += 4;\r\n        // find input height\r\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\r\n        if (this._isReplaceVisible) {\r\n            // replace input margin\r\n            totalheight += 4;\r\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\r\n        }\r\n        // margin bottom\r\n        totalheight += 4;\r\n        return totalheight;\r\n    };\r\n    FindWidget.prototype._tryUpdateHeight = function () {\r\n        var totalHeight = this._getHeight();\r\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\r\n            return false;\r\n        }\r\n        this._cachedHeight = totalHeight;\r\n        this._domNode.style.height = totalHeight + \"px\";\r\n        return true;\r\n    };\r\n    // ----- Public\r\n    FindWidget.prototype.focusFindInput = function () {\r\n        this._findInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._findInput.focus();\r\n    };\r\n    FindWidget.prototype.focusReplaceInput = function () {\r\n        this._replaceInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._replaceInput.focus();\r\n    };\r\n    FindWidget.prototype.highlightFindOptions = function () {\r\n        this._findInput.highlightFindOptions();\r\n    };\r\n    FindWidget.prototype._updateSearchScope = function () {\r\n        if (!this._codeEditor.hasModel()) {\r\n            return;\r\n        }\r\n        if (this._toggleSelectionFind.checked) {\r\n            var selection = this._codeEditor.getSelection();\r\n            if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n            }\r\n            var currentMatch = this._state.currentMatch;\r\n            if (selection.startLineNumber !== selection.endLineNumber) {\r\n                if (!Range.equalsRange(selection, currentMatch)) {\r\n                    // Reseed find scope\r\n                    this._state.change({ searchScope: selection }, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FindWidget.prototype._onFindInputMouseDown = function (e) {\r\n        // on linux, middle key does pasting.\r\n        if (e.middleButton) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    FindWidget.prototype._onFindInputKeyDown = function (e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\r\n            this._findInput.inputBox.insertAtCursor('\\n');\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2 /* Tab */)) {\r\n            if (this._isReplaceVisible) {\r\n                this._replaceInput.focus();\r\n            }\r\n            else {\r\n                this._findInput.focusOnCaseSensitive();\r\n            }\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n    };\r\n    FindWidget.prototype._onReplaceInputKeyDown = function (e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\r\n            if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\r\n                // this is the first time when users press Ctrl + Enter to replace all\r\n                this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\r\n                this._ctrlEnterReplaceAllWarningPrompted = true;\r\n                this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* GLOBAL */);\r\n            }\r\n            this._replaceInput.inputBox.insertAtCursor('\\n');\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2 /* Tab */)) {\r\n            this._findInput.focusOnCaseSensitive();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n            this._findInput.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n    };\r\n    // ----- sash\r\n    FindWidget.prototype.getHorizontalSashTop = function (_sash) {\r\n        return 0;\r\n    };\r\n    FindWidget.prototype.getHorizontalSashLeft = function (_sash) {\r\n        return 0;\r\n    };\r\n    FindWidget.prototype.getHorizontalSashWidth = function (_sash) {\r\n        return 500;\r\n    };\r\n    // ----- initialization\r\n    FindWidget.prototype._keybindingLabelFor = function (actionId) {\r\n        var kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return \" (\" + kb.getLabel() + \")\";\r\n    };\r\n    FindWidget.prototype._buildDomNode = function () {\r\n        var _this = this;\r\n        var flexibleHeight = true;\r\n        var flexibleWidth = true;\r\n        // Find input\r\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\r\n            width: FIND_INPUT_AREA_WIDTH,\r\n            label: NLS_FIND_INPUT_LABEL,\r\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\r\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\r\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\r\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\r\n            validation: function (value) {\r\n                if (value.length === 0 || !_this._findInput.getRegex()) {\r\n                    return null;\r\n                }\r\n                try {\r\n                    new RegExp(value);\r\n                    return null;\r\n                }\r\n                catch (e) {\r\n                    return { content: e.message };\r\n                }\r\n            },\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: 118\r\n        }, this._contextKeyService, true));\r\n        this._findInput.setRegex(!!this._state.isRegex);\r\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\r\n        this._findInput.setWholeWords(!!this._state.wholeWord);\r\n        this._register(this._findInput.onKeyDown(function (e) { return _this._onFindInputKeyDown(e); }));\r\n        this._register(this._findInput.inputBox.onDidChange(function () {\r\n            if (_this._ignoreChangeEvent) {\r\n                return;\r\n            }\r\n            _this._state.change({ searchString: _this._findInput.getValue() }, true);\r\n        }));\r\n        this._register(this._findInput.onDidOptionChange(function () {\r\n            _this._state.change({\r\n                isRegex: _this._findInput.getRegex(),\r\n                wholeWord: _this._findInput.getWholeWords(),\r\n                matchCase: _this._findInput.getCaseSensitive()\r\n            }, true);\r\n        }));\r\n        this._register(this._findInput.onCaseSensitiveKeyDown(function (e) {\r\n            if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.onRegexKeyDown(function (e) {\r\n            if (e.equals(2 /* Tab */)) {\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.focusOnPreserve();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.inputBox.onDidHeightChange(function (e) {\r\n            if (_this._tryUpdateHeight()) {\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        if (platform.isLinux) {\r\n            this._register(this._findInput.onMouseDown(function (e) { return _this._onFindInputMouseDown(e); }));\r\n        }\r\n        this._matchesCount = document.createElement('div');\r\n        this._matchesCount.className = 'matchesCount';\r\n        this._updateMatchesCount();\r\n        // Previous button\r\n        this._prevBtn = this._register(new SimpleButton({\r\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\r\n            className: 'codicon codicon-arrow-up',\r\n            onTrigger: function () {\r\n                _this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        // Next button\r\n        this._nextBtn = this._register(new SimpleButton({\r\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\r\n            className: 'codicon codicon-arrow-down',\r\n            onTrigger: function () {\r\n                _this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        var findPart = document.createElement('div');\r\n        findPart.className = 'find-part';\r\n        findPart.appendChild(this._findInput.domNode);\r\n        var actionsContainer = document.createElement('div');\r\n        actionsContainer.className = 'find-actions';\r\n        findPart.appendChild(actionsContainer);\r\n        actionsContainer.appendChild(this._matchesCount);\r\n        actionsContainer.appendChild(this._prevBtn.domNode);\r\n        actionsContainer.appendChild(this._nextBtn.domNode);\r\n        // Toggle selection button\r\n        this._toggleSelectionFind = this._register(new Checkbox({\r\n            actionClassName: 'codicon codicon-selection',\r\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\r\n            isChecked: false\r\n        }));\r\n        this._register(this._toggleSelectionFind.onChange(function () {\r\n            if (_this._toggleSelectionFind.checked) {\r\n                if (_this._codeEditor.hasModel()) {\r\n                    var selection = _this._codeEditor.getSelection();\r\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, _this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                    }\r\n                    if (!selection.isEmpty()) {\r\n                        _this._state.change({ searchScope: selection }, true);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                _this._state.change({ searchScope: null }, true);\r\n            }\r\n        }));\r\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\r\n        // Close button\r\n        this._closeBtn = this._register(new SimpleButton({\r\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\r\n            className: 'codicon codicon-close',\r\n            onTrigger: function () {\r\n                _this._state.change({ isRevealed: false, searchScope: null }, false);\r\n            },\r\n            onKeyDown: function (e) {\r\n                if (e.equals(2 /* Tab */)) {\r\n                    if (_this._isReplaceVisible) {\r\n                        if (_this._replaceBtn.isEnabled()) {\r\n                            _this._replaceBtn.focus();\r\n                        }\r\n                        else {\r\n                            _this._codeEditor.focus();\r\n                        }\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        actionsContainer.appendChild(this._closeBtn.domNode);\r\n        // Replace input\r\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\r\n            label: NLS_REPLACE_INPUT_LABEL,\r\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\r\n            history: [],\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: 118\r\n        }, this._contextKeyService, true));\r\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\r\n        this._register(this._replaceInput.onKeyDown(function (e) { return _this._onReplaceInputKeyDown(e); }));\r\n        this._register(this._replaceInput.inputBox.onDidChange(function () {\r\n            _this._state.change({ replaceString: _this._replaceInput.inputBox.value }, false);\r\n        }));\r\n        this._register(this._replaceInput.inputBox.onDidHeightChange(function (e) {\r\n            if (_this._isReplaceVisible && _this._tryUpdateHeight()) {\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        this._register(this._replaceInput.onDidOptionChange(function () {\r\n            _this._state.change({\r\n                preserveCase: _this._replaceInput.getPreserveCase()\r\n            }, true);\r\n        }));\r\n        this._register(this._replaceInput.onPreserveCaseKeyDown(function (e) {\r\n            if (e.equals(2 /* Tab */)) {\r\n                if (_this._prevBtn.isEnabled()) {\r\n                    _this._prevBtn.focus();\r\n                }\r\n                else if (_this._nextBtn.isEnabled()) {\r\n                    _this._nextBtn.focus();\r\n                }\r\n                else if (_this._toggleSelectionFind.enabled) {\r\n                    _this._toggleSelectionFind.focus();\r\n                }\r\n                else if (_this._closeBtn.isEnabled()) {\r\n                    _this._closeBtn.focus();\r\n                }\r\n                e.preventDefault();\r\n            }\r\n        }));\r\n        // Replace one button\r\n        this._replaceBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\r\n            className: 'codicon codicon-replace',\r\n            onTrigger: function () {\r\n                _this._controller.replace();\r\n            },\r\n            onKeyDown: function (e) {\r\n                if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n                    _this._closeBtn.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        // Replace all button\r\n        this._replaceAllBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\r\n            className: 'codicon codicon-replace-all',\r\n            onTrigger: function () {\r\n                _this._controller.replaceAll();\r\n            }\r\n        }));\r\n        var replacePart = document.createElement('div');\r\n        replacePart.className = 'replace-part';\r\n        replacePart.appendChild(this._replaceInput.domNode);\r\n        var replaceActionsContainer = document.createElement('div');\r\n        replaceActionsContainer.className = 'replace-actions';\r\n        replacePart.appendChild(replaceActionsContainer);\r\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\r\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\r\n        // Toggle replace button\r\n        this._toggleReplaceBtn = this._register(new SimpleButton({\r\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\r\n            className: 'codicon toggle left',\r\n            onTrigger: function () {\r\n                _this._state.change({ isReplaceRevealed: !_this._isReplaceVisible }, false);\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n                    _this._replaceInput.inputBox.layout();\r\n                }\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        // Widget\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'editor-widget find-widget';\r\n        this._domNode.setAttribute('aria-hidden', 'true');\r\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\r\n        this._domNode.style.width = FIND_WIDGET_INITIAL_WIDTH + \"px\";\r\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\r\n        this._domNode.appendChild(findPart);\r\n        this._domNode.appendChild(replacePart);\r\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* VERTICAL */ });\r\n        this._resized = false;\r\n        var originalWidth = FIND_WIDGET_INITIAL_WIDTH;\r\n        this._register(this._resizeSash.onDidStart(function () {\r\n            originalWidth = dom.getTotalWidth(_this._domNode);\r\n        }));\r\n        this._register(this._resizeSash.onDidChange(function (evt) {\r\n            _this._resized = true;\r\n            var width = originalWidth + evt.startX - evt.currentX;\r\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // narrow down the find widget should be handled by CSS.\r\n                return;\r\n            }\r\n            var maxWidth = parseFloat(dom.getComputedStyle(_this._domNode).maxWidth) || 0;\r\n            if (width > maxWidth) {\r\n                return;\r\n            }\r\n            _this._domNode.style.width = width + \"px\";\r\n            if (_this._isReplaceVisible) {\r\n                _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n            }\r\n            _this._findInput.inputBox.layout();\r\n            _this._tryUpdateHeight();\r\n        }));\r\n        this._register(this._resizeSash.onDidReset(function () {\r\n            // users double click on the sash\r\n            var currentWidth = dom.getTotalWidth(_this._domNode);\r\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\r\n                return;\r\n            }\r\n            var width = FIND_WIDGET_INITIAL_WIDTH;\r\n            if (!_this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\r\n                // 1. never resized before, double click should maximizes it\r\n                // 2. users resized it already but its width is the same as default\r\n                var layoutInfo = _this._codeEditor.getLayoutInfo();\r\n                width = layoutInfo.width - 28 - layoutInfo.minimapWidth - 15;\r\n                _this._resized = true;\r\n            }\r\n            else {\r\n                /**\r\n                 * no op, the find widget should be shrinked to its default size.\r\n                 */\r\n            }\r\n            _this._domNode.style.width = width + \"px\";\r\n            if (_this._isReplaceVisible) {\r\n                _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n            }\r\n            _this._findInput.inputBox.layout();\r\n        }));\r\n    };\r\n    FindWidget.prototype.updateAccessibilitySupport = function () {\r\n        var value = this._codeEditor.getOption(2 /* accessibilitySupport */);\r\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* Enabled */);\r\n    };\r\n    FindWidget.ID = 'editor.contrib.findWidget';\r\n    return FindWidget;\r\n}(Widget));\r\nexport { FindWidget };\r\nvar SimpleButton = /** @class */ (function (_super) {\r\n    __extends(SimpleButton, _super);\r\n    function SimpleButton(opts) {\r\n        var _this = _super.call(this) || this;\r\n        _this._opts = opts;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.title = _this._opts.label;\r\n        _this._domNode.tabIndex = 0;\r\n        _this._domNode.className = 'button ' + _this._opts.className;\r\n        _this._domNode.setAttribute('role', 'button');\r\n        _this._domNode.setAttribute('aria-label', _this._opts.label);\r\n        _this.onclick(_this._domNode, function (e) {\r\n            _this._opts.onTrigger();\r\n            e.preventDefault();\r\n        });\r\n        _this.onkeydown(_this._domNode, function (e) {\r\n            if (e.equals(10 /* Space */) || e.equals(3 /* Enter */)) {\r\n                _this._opts.onTrigger();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            if (_this._opts.onKeyDown) {\r\n                _this._opts.onKeyDown(e);\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SimpleButton.prototype, \"domNode\", {\r\n        get: function () {\r\n            return this._domNode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SimpleButton.prototype.isEnabled = function () {\r\n        return (this._domNode.tabIndex >= 0);\r\n    };\r\n    SimpleButton.prototype.focus = function () {\r\n        this._domNode.focus();\r\n    };\r\n    SimpleButton.prototype.setEnabled = function (enabled) {\r\n        dom.toggleClass(this._domNode, 'disabled', !enabled);\r\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\r\n        this._domNode.tabIndex = enabled ? 0 : -1;\r\n    };\r\n    SimpleButton.prototype.setExpanded = function (expanded) {\r\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\r\n    };\r\n    SimpleButton.prototype.toggleClass = function (className, shouldHaveIt) {\r\n        dom.toggleClass(this._domNode, className, shouldHaveIt);\r\n    };\r\n    return SimpleButton;\r\n}(Widget));\r\nexport { SimpleButton };\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var addBackgroundColorRule = function (selector, color) {\r\n        if (color) {\r\n            collector.addRule(\".monaco-editor \" + selector + \" { background-color: \" + color + \"; }\");\r\n        }\r\n    };\r\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\r\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\r\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\r\n    var widgetBackground = theme.getColor(editorWidgetBackground);\r\n    addBackgroundColorRule('.find-widget', widgetBackground);\r\n    var widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(\".monaco-editor .find-widget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\r\n    }\r\n    var findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\r\n    if (findMatchHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .findMatch { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + findMatchHighlightBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n    var findMatchBorder = theme.getColor(editorFindMatchBorder);\r\n    if (findMatchBorder) {\r\n        collector.addRule(\".monaco-editor .currentFindMatch { border: 2px solid \" + findMatchBorder + \"; padding: 1px; box-sizing: border-box; }\");\r\n    }\r\n    var findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\r\n    if (findRangeHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .findScope { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + findRangeHighlightBorder + \"; }\");\r\n    }\r\n    var hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(\".monaco-editor .find-widget { border: 1px solid \" + hcBorder + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .find-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var error = theme.getColor(errorForeground);\r\n    if (error) {\r\n        collector.addRule(\".monaco-editor .find-widget.no-results .matchesCount { color: \" + error + \"; }\");\r\n    }\r\n    var resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\r\n    if (resizeBorderBackground) {\r\n        collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + resizeBorderBackground + \"; width: 3px !important; margin-left: -4px;}\");\r\n    }\r\n    else {\r\n        var border = theme.getColor(editorWidgetBorder);\r\n        if (border) {\r\n            collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + border + \"; width: 3px !important; margin-left: -4px;}\");\r\n        }\r\n    }\r\n    // This rule is used to override the outline color for synthetic-focus find input.\r\n    var focusOutline = theme.getColor(focusBorder);\r\n    if (focusOutline) {\r\n        collector.addRule(\".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: \" + focusOutline + \"; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}