{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { PointerHandler } from '../controller/pointerHandler.js';\nimport { TextAreaHandler } from '../controller/textAreaHandler.js';\nimport { ViewController } from './viewController.js';\nimport { ViewOutgoingEvents } from './viewOutgoingEvents.js';\nimport { ContentViewOverlays, MarginViewOverlays } from './viewOverlays.js';\nimport { PartFingerprints } from './viewPart.js';\nimport { ViewContentWidgets } from '../viewParts/contentWidgets/contentWidgets.js';\nimport { CurrentLineHighlightOverlay, CurrentLineMarginHighlightOverlay } from '../viewParts/currentLineHighlight/currentLineHighlight.js';\nimport { DecorationsOverlay } from '../viewParts/decorations/decorations.js';\nimport { EditorScrollbar } from '../viewParts/editorScrollbar/editorScrollbar.js';\nimport { GlyphMarginOverlay } from '../viewParts/glyphMargin/glyphMargin.js';\nimport { IndentGuidesOverlay } from '../viewParts/indentGuides/indentGuides.js';\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\nimport { ViewLines } from '../viewParts/lines/viewLines.js';\nimport { LinesDecorationsOverlay } from '../viewParts/linesDecorations/linesDecorations.js';\nimport { Margin } from '../viewParts/margin/margin.js';\nimport { MarginViewLineDecorationsOverlay } from '../viewParts/marginDecorations/marginDecorations.js';\nimport { Minimap } from '../viewParts/minimap/minimap.js';\nimport { ViewOverlayWidgets } from '../viewParts/overlayWidgets/overlayWidgets.js';\nimport { DecorationsOverviewRuler } from '../viewParts/overviewRuler/decorationsOverviewRuler.js';\nimport { OverviewRuler } from '../viewParts/overviewRuler/overviewRuler.js';\nimport { Rulers } from '../viewParts/rulers/rulers.js';\nimport { ScrollDecorationViewPart } from '../viewParts/scrollDecoration/scrollDecoration.js';\nimport { SelectionsOverlay } from '../viewParts/selections/selections.js';\nimport { ViewCursors } from '../viewParts/viewCursors/viewCursors.js';\nimport { ViewZones } from '../viewParts/viewZones/viewZones.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { RenderingContext } from '../../common/view/renderingContext.js';\nimport { ViewContext } from '../../common/view/viewContext.js';\nimport { ViewEventDispatcher } from '../../common/view/viewEventDispatcher.js';\nimport * as viewEvents from '../../common/view/viewEvents.js';\nimport { ViewportData } from '../../common/viewLayout/viewLinesViewportData.js';\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\nimport { getThemeTypeSelector } from '../../../platform/theme/common/themeService.js';\nimport { PointerHandlerLastRenderData } from '../controller/mouseTarget.js';\nvar View = /** @class */function (_super) {\n  __extends(View, _super);\n  function View(commandDelegate, configuration, themeService, model, cursor, outgoingEvents) {\n    var _this = _super.call(this) || this;\n    _this._cursor = cursor;\n    _this._renderAnimationFrame = null;\n    _this.outgoingEvents = outgoingEvents;\n    var viewController = new ViewController(configuration, model, _this.outgoingEvents, commandDelegate);\n    // The event dispatcher will always go through _renderOnce before dispatching any events\n    _this.eventDispatcher = new ViewEventDispatcher(function (callback) {\n      return _this._renderOnce(callback);\n    });\n    // Ensure the view is the first event handler in order to update the layout\n    _this.eventDispatcher.addEventHandler(_this);\n    // The view context is passed on to most classes (basically to reduce param. counts in ctors)\n    _this._context = new ViewContext(configuration, themeService.getTheme(), model, _this.eventDispatcher);\n    _this._register(themeService.onThemeChange(function (theme) {\n      _this._context.theme = theme;\n      _this.eventDispatcher.emit(new viewEvents.ViewThemeChangedEvent());\n      _this.render(true, false);\n    }));\n    _this.viewParts = [];\n    // Keyboard handler\n    _this._textAreaHandler = new TextAreaHandler(_this._context, viewController, _this.createTextAreaHandlerHelper());\n    _this.viewParts.push(_this._textAreaHandler);\n    // These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)\n    _this.linesContent = createFastDomNode(document.createElement('div'));\n    _this.linesContent.setClassName('lines-content' + ' monaco-editor-background');\n    _this.linesContent.setPosition('absolute');\n    _this.domNode = createFastDomNode(document.createElement('div'));\n    _this.domNode.setClassName(_this.getEditorClassName());\n    _this.overflowGuardContainer = createFastDomNode(document.createElement('div'));\n    PartFingerprints.write(_this.overflowGuardContainer, 3 /* OverflowGuard */);\n    _this.overflowGuardContainer.setClassName('overflow-guard');\n    _this._scrollbar = new EditorScrollbar(_this._context, _this.linesContent, _this.domNode, _this.overflowGuardContainer);\n    _this.viewParts.push(_this._scrollbar);\n    // View Lines\n    _this.viewLines = new ViewLines(_this._context, _this.linesContent);\n    // View Zones\n    _this.viewZones = new ViewZones(_this._context);\n    _this.viewParts.push(_this.viewZones);\n    // Decorations overview ruler\n    var decorationsOverviewRuler = new DecorationsOverviewRuler(_this._context);\n    _this.viewParts.push(decorationsOverviewRuler);\n    var scrollDecoration = new ScrollDecorationViewPart(_this._context);\n    _this.viewParts.push(scrollDecoration);\n    var contentViewOverlays = new ContentViewOverlays(_this._context);\n    _this.viewParts.push(contentViewOverlays);\n    contentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new SelectionsOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new IndentGuidesOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new DecorationsOverlay(_this._context));\n    var marginViewOverlays = new MarginViewOverlays(_this._context);\n    _this.viewParts.push(marginViewOverlays);\n    marginViewOverlays.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new MarginViewLineDecorationsOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new LineNumbersOverlay(_this._context));\n    var margin = new Margin(_this._context);\n    margin.getDomNode().appendChild(_this.viewZones.marginDomNode);\n    margin.getDomNode().appendChild(marginViewOverlays.getDomNode());\n    _this.viewParts.push(margin);\n    // Content widgets\n    _this.contentWidgets = new ViewContentWidgets(_this._context, _this.domNode);\n    _this.viewParts.push(_this.contentWidgets);\n    _this.viewCursors = new ViewCursors(_this._context);\n    _this.viewParts.push(_this.viewCursors);\n    // Overlay widgets\n    _this.overlayWidgets = new ViewOverlayWidgets(_this._context);\n    _this.viewParts.push(_this.overlayWidgets);\n    var rulers = new Rulers(_this._context);\n    _this.viewParts.push(rulers);\n    var minimap = new Minimap(_this._context);\n    _this.viewParts.push(minimap);\n    // -------------- Wire dom nodes up\n    if (decorationsOverviewRuler) {\n      var overviewRulerData = _this._scrollbar.getOverviewRulerLayoutInfo();\n      overviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(), overviewRulerData.insertBefore);\n    }\n    _this.linesContent.appendChild(contentViewOverlays.getDomNode());\n    _this.linesContent.appendChild(rulers.domNode);\n    _this.linesContent.appendChild(_this.viewZones.domNode);\n    _this.linesContent.appendChild(_this.viewLines.getDomNode());\n    _this.linesContent.appendChild(_this.contentWidgets.domNode);\n    _this.linesContent.appendChild(_this.viewCursors.getDomNode());\n    _this.overflowGuardContainer.appendChild(margin.getDomNode());\n    _this.overflowGuardContainer.appendChild(_this._scrollbar.getDomNode());\n    _this.overflowGuardContainer.appendChild(scrollDecoration.getDomNode());\n    _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textArea);\n    _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textAreaCover);\n    _this.overflowGuardContainer.appendChild(_this.overlayWidgets.getDomNode());\n    _this.overflowGuardContainer.appendChild(minimap.getDomNode());\n    _this.domNode.appendChild(_this.overflowGuardContainer);\n    _this.domNode.appendChild(_this.contentWidgets.overflowingContentWidgetsDomNode);\n    _this._applyLayout();\n    // Pointer handler\n    _this.pointerHandler = _this._register(new PointerHandler(_this._context, viewController, _this.createPointerHandlerHelper()));\n    _this._register(model.addEventListener(function (events) {\n      _this.eventDispatcher.emitMany(events);\n    }));\n    _this._register(_this._cursor.addEventListener(function (events) {\n      _this.eventDispatcher.emitMany(events);\n    }));\n    return _this;\n  }\n  View.prototype._flushAccumulatedAndRenderNow = function () {\n    this._renderNow();\n  };\n  View.prototype.createPointerHandlerHelper = function () {\n    var _this = this;\n    return {\n      viewDomNode: this.domNode.domNode,\n      linesContentDomNode: this.linesContent.domNode,\n      focusTextArea: function focusTextArea() {\n        _this.focus();\n      },\n      getLastRenderData: function getLastRenderData() {\n        var lastViewCursorsRenderData = _this.viewCursors.getLastRenderData() || [];\n        var lastTextareaPosition = _this._textAreaHandler.getLastRenderData();\n        return new PointerHandlerLastRenderData(lastViewCursorsRenderData, lastTextareaPosition);\n      },\n      shouldSuppressMouseDownOnViewZone: function shouldSuppressMouseDownOnViewZone(viewZoneId) {\n        return _this.viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);\n      },\n      shouldSuppressMouseDownOnWidget: function shouldSuppressMouseDownOnWidget(widgetId) {\n        return _this.contentWidgets.shouldSuppressMouseDownOnWidget(widgetId);\n      },\n      getPositionFromDOMInfo: function getPositionFromDOMInfo(spanNode, offset) {\n        _this._flushAccumulatedAndRenderNow();\n        return _this.viewLines.getPositionFromDOMInfo(spanNode, offset);\n      },\n      visibleRangeForPosition: function visibleRangeForPosition(lineNumber, column) {\n        _this._flushAccumulatedAndRenderNow();\n        return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\n      },\n      getLineWidth: function getLineWidth(lineNumber) {\n        _this._flushAccumulatedAndRenderNow();\n        return _this.viewLines.getLineWidth(lineNumber);\n      }\n    };\n  };\n  View.prototype.createTextAreaHandlerHelper = function () {\n    var _this = this;\n    return {\n      visibleRangeForPositionRelativeToEditor: function visibleRangeForPositionRelativeToEditor(lineNumber, column) {\n        _this._flushAccumulatedAndRenderNow();\n        return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\n      }\n    };\n  };\n  View.prototype._applyLayout = function () {\n    var options = this._context.configuration.options;\n    var layoutInfo = options.get(107 /* layoutInfo */);\n    this.domNode.setWidth(layoutInfo.width);\n    this.domNode.setHeight(layoutInfo.height);\n    this.overflowGuardContainer.setWidth(layoutInfo.width);\n    this.overflowGuardContainer.setHeight(layoutInfo.height);\n    this.linesContent.setWidth(1000000);\n    this.linesContent.setHeight(1000000);\n  };\n  View.prototype.getEditorClassName = function () {\n    var focused = this._textAreaHandler.isFocused() ? ' focused' : '';\n    return this._context.configuration.options.get(104 /* editorClassName */) + ' ' + getThemeTypeSelector(this._context.theme.type) + focused;\n  };\n  // --- begin event handlers\n  View.prototype.onConfigurationChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n    this._applyLayout();\n    return false;\n  };\n  View.prototype.onContentSizeChanged = function (e) {\n    this.outgoingEvents.emitContentSizeChange(e);\n    return false;\n  };\n  View.prototype.onFocusChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n    this._context.model.setHasFocus(e.isFocused);\n    if (e.isFocused) {\n      this.outgoingEvents.emitViewFocusGained();\n    } else {\n      this.outgoingEvents.emitViewFocusLost();\n    }\n    return false;\n  };\n  View.prototype.onScrollChanged = function (e) {\n    this.outgoingEvents.emitScrollChanged(e);\n    return false;\n  };\n  View.prototype.onThemeChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n    return false;\n  };\n  // --- end event handlers\n  View.prototype.dispose = function () {\n    if (this._renderAnimationFrame !== null) {\n      this._renderAnimationFrame.dispose();\n      this._renderAnimationFrame = null;\n    }\n    this.eventDispatcher.removeEventHandler(this);\n    this.outgoingEvents.dispose();\n    this.viewLines.dispose();\n    // Destroy view parts\n    for (var i = 0, len = this.viewParts.length; i < len; i++) {\n      this.viewParts[i].dispose();\n    }\n    this.viewParts = [];\n    _super.prototype.dispose.call(this);\n  };\n  View.prototype._renderOnce = function (callback) {\n    var r = safeInvokeNoArg(callback);\n    this._scheduleRender();\n    return r;\n  };\n  View.prototype._scheduleRender = function () {\n    if (this._renderAnimationFrame === null) {\n      this._renderAnimationFrame = dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this), 100);\n    }\n  };\n  View.prototype._onRenderScheduled = function () {\n    this._renderAnimationFrame = null;\n    this._flushAccumulatedAndRenderNow();\n  };\n  View.prototype._renderNow = function () {\n    var _this = this;\n    safeInvokeNoArg(function () {\n      return _this._actualRender();\n    });\n  };\n  View.prototype._getViewPartsToRender = function () {\n    var result = [],\n      resultLen = 0;\n    for (var i = 0, len = this.viewParts.length; i < len; i++) {\n      var viewPart = this.viewParts[i];\n      if (viewPart.shouldRender()) {\n        result[resultLen++] = viewPart;\n      }\n    }\n    return result;\n  };\n  View.prototype._actualRender = function () {\n    if (!dom.isInDOM(this.domNode.domNode)) {\n      return;\n    }\n    var viewPartsToRender = this._getViewPartsToRender();\n    if (!this.viewLines.shouldRender() && viewPartsToRender.length === 0) {\n      // Nothing to render\n      return;\n    }\n    var partialViewportData = this._context.viewLayout.getLinesViewportData();\n    this._context.model.setViewport(partialViewportData.startLineNumber, partialViewportData.endLineNumber, partialViewportData.centeredLineNumber);\n    var viewportData = new ViewportData(this._cursor.getViewSelections(), partialViewportData, this._context.viewLayout.getWhitespaceViewportData(), this._context.model);\n    if (this.contentWidgets.shouldRender()) {\n      // Give the content widgets a chance to set their max width before a possible synchronous layout\n      this.contentWidgets.onBeforeRender(viewportData);\n    }\n    if (this.viewLines.shouldRender()) {\n      this.viewLines.renderText(viewportData);\n      this.viewLines.onDidRender();\n      // Rendering of viewLines might cause scroll events to occur, so collect view parts to render again\n      viewPartsToRender = this._getViewPartsToRender();\n    }\n    var renderingContext = new RenderingContext(this._context.viewLayout, viewportData, this.viewLines);\n    // Render the rest of the parts\n    for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\n      var viewPart = viewPartsToRender[i];\n      viewPart.prepareRender(renderingContext);\n    }\n    for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\n      var viewPart = viewPartsToRender[i];\n      viewPart.render(renderingContext);\n      viewPart.onDidRender();\n    }\n  };\n  // --- BEGIN CodeEditor helpers\n  View.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\n    this._scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);\n  };\n  View.prototype.restoreState = function (scrollPosition) {\n    this._context.viewLayout.setScrollPositionNow({\n      scrollTop: scrollPosition.scrollTop\n    });\n    this._context.model.tokenizeViewport();\n    this._renderNow();\n    this.viewLines.updateLineWidths();\n    this._context.viewLayout.setScrollPositionNow({\n      scrollLeft: scrollPosition.scrollLeft\n    });\n  };\n  View.prototype.getOffsetForColumn = function (modelLineNumber, modelColumn) {\n    var modelPosition = this._context.model.validateModelPosition({\n      lineNumber: modelLineNumber,\n      column: modelColumn\n    });\n    var viewPosition = this._context.model.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n    this._flushAccumulatedAndRenderNow();\n    var visibleRange = this.viewLines.visibleRangeForPosition(new Position(viewPosition.lineNumber, viewPosition.column));\n    if (!visibleRange) {\n      return -1;\n    }\n    return visibleRange.left;\n  };\n  View.prototype.getTargetAtClientPoint = function (clientX, clientY) {\n    var mouseTarget = this.pointerHandler.getTargetAtClientPoint(clientX, clientY);\n    if (!mouseTarget) {\n      return null;\n    }\n    return ViewOutgoingEvents.convertViewToModelMouseTarget(mouseTarget, this._context.model.coordinatesConverter);\n  };\n  View.prototype.createOverviewRuler = function (cssClassName) {\n    return new OverviewRuler(this._context, cssClassName);\n  };\n  View.prototype.change = function (callback) {\n    var _this = this;\n    return this._renderOnce(function () {\n      var zonesHaveChanged = _this.viewZones.changeViewZones(callback);\n      if (zonesHaveChanged) {\n        _this._context.viewLayout.onHeightMaybeChanged();\n        _this._context.privateViewEventBus.emit(new viewEvents.ViewZonesChangedEvent());\n      }\n      return zonesHaveChanged;\n    });\n  };\n  View.prototype.render = function (now, everything) {\n    if (everything) {\n      // Force everything to render...\n      this.viewLines.forceShouldRender();\n      for (var i = 0, len = this.viewParts.length; i < len; i++) {\n        var viewPart = this.viewParts[i];\n        viewPart.forceShouldRender();\n      }\n    }\n    if (now) {\n      this._flushAccumulatedAndRenderNow();\n    } else {\n      this._scheduleRender();\n    }\n  };\n  View.prototype.focus = function () {\n    this._textAreaHandler.focusTextArea();\n  };\n  View.prototype.isFocused = function () {\n    return this._textAreaHandler.isFocused();\n  };\n  View.prototype.setAriaOptions = function (options) {\n    this._textAreaHandler.setAriaOptions(options);\n  };\n  View.prototype.addContentWidget = function (widgetData) {\n    this.contentWidgets.addWidget(widgetData.widget);\n    this.layoutContentWidget(widgetData);\n    this._scheduleRender();\n  };\n  View.prototype.layoutContentWidget = function (widgetData) {\n    var newRange = widgetData.position ? widgetData.position.range || null : null;\n    if (newRange === null) {\n      var newPosition = widgetData.position ? widgetData.position.position : null;\n      if (newPosition !== null) {\n        newRange = new Range(newPosition.lineNumber, newPosition.column, newPosition.lineNumber, newPosition.column);\n      }\n    }\n    var newPreference = widgetData.position ? widgetData.position.preference : null;\n    this.contentWidgets.setWidgetPosition(widgetData.widget, newRange, newPreference);\n    this._scheduleRender();\n  };\n  View.prototype.removeContentWidget = function (widgetData) {\n    this.contentWidgets.removeWidget(widgetData.widget);\n    this._scheduleRender();\n  };\n  View.prototype.addOverlayWidget = function (widgetData) {\n    this.overlayWidgets.addWidget(widgetData.widget);\n    this.layoutOverlayWidget(widgetData);\n    this._scheduleRender();\n  };\n  View.prototype.layoutOverlayWidget = function (widgetData) {\n    var newPreference = widgetData.position ? widgetData.position.preference : null;\n    var shouldRender = this.overlayWidgets.setWidgetPosition(widgetData.widget, newPreference);\n    if (shouldRender) {\n      this._scheduleRender();\n    }\n  };\n  View.prototype.removeOverlayWidget = function (widgetData) {\n    this.overlayWidgets.removeWidget(widgetData.widget);\n    this._scheduleRender();\n  };\n  return View;\n}(ViewEventHandler);\nexport { View };\nfunction safeInvokeNoArg(func) {\n  try {\n    return func();\n  } catch (e) {\n    onUnexpectedError(e);\n  }\n}","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","dom","createFastDomNode","onUnexpectedError","PointerHandler","TextAreaHandler","ViewController","ViewOutgoingEvents","ContentViewOverlays","MarginViewOverlays","PartFingerprints","ViewContentWidgets","CurrentLineHighlightOverlay","CurrentLineMarginHighlightOverlay","DecorationsOverlay","EditorScrollbar","GlyphMarginOverlay","IndentGuidesOverlay","LineNumbersOverlay","ViewLines","LinesDecorationsOverlay","Margin","MarginViewLineDecorationsOverlay","Minimap","ViewOverlayWidgets","DecorationsOverviewRuler","OverviewRuler","Rulers","ScrollDecorationViewPart","SelectionsOverlay","ViewCursors","ViewZones","Position","Range","RenderingContext","ViewContext","ViewEventDispatcher","viewEvents","ViewportData","ViewEventHandler","getThemeTypeSelector","PointerHandlerLastRenderData","View","_super","commandDelegate","configuration","themeService","model","cursor","outgoingEvents","_this","call","_cursor","_renderAnimationFrame","viewController","eventDispatcher","callback","_renderOnce","addEventHandler","_context","getTheme","_register","onThemeChange","theme","emit","ViewThemeChangedEvent","render","viewParts","_textAreaHandler","createTextAreaHandlerHelper","push","linesContent","document","createElement","setClassName","setPosition","domNode","getEditorClassName","overflowGuardContainer","write","_scrollbar","viewLines","viewZones","decorationsOverviewRuler","scrollDecoration","contentViewOverlays","addDynamicOverlay","marginViewOverlays","margin","getDomNode","appendChild","marginDomNode","contentWidgets","viewCursors","overlayWidgets","rulers","minimap","overviewRulerData","getOverviewRulerLayoutInfo","parent","insertBefore","textArea","textAreaCover","overflowingContentWidgetsDomNode","_applyLayout","pointerHandler","createPointerHandlerHelper","addEventListener","events","emitMany","_flushAccumulatedAndRenderNow","_renderNow","viewDomNode","linesContentDomNode","focusTextArea","focus","getLastRenderData","lastViewCursorsRenderData","lastTextareaPosition","shouldSuppressMouseDownOnViewZone","viewZoneId","shouldSuppressMouseDownOnWidget","widgetId","getPositionFromDOMInfo","spanNode","offset","visibleRangeForPosition","lineNumber","column","getLineWidth","visibleRangeForPositionRelativeToEditor","options","layoutInfo","get","setWidth","width","setHeight","height","focused","isFocused","type","onConfigurationChanged","e","onContentSizeChanged","emitContentSizeChange","onFocusChanged","setHasFocus","emitViewFocusGained","emitViewFocusLost","onScrollChanged","emitScrollChanged","onThemeChanged","dispose","removeEventHandler","i","len","length","r","safeInvokeNoArg","_scheduleRender","runAtThisOrScheduleAtNextAnimationFrame","_onRenderScheduled","bind","_actualRender","_getViewPartsToRender","result","resultLen","viewPart","shouldRender","isInDOM","viewPartsToRender","partialViewportData","viewLayout","getLinesViewportData","setViewport","startLineNumber","endLineNumber","centeredLineNumber","viewportData","getViewSelections","getWhitespaceViewportData","onBeforeRender","renderText","onDidRender","renderingContext","prepareRender","delegateVerticalScrollbarMouseDown","browserEvent","restoreState","scrollPosition","setScrollPositionNow","scrollTop","tokenizeViewport","updateLineWidths","scrollLeft","getOffsetForColumn","modelLineNumber","modelColumn","modelPosition","validateModelPosition","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","visibleRange","left","getTargetAtClientPoint","clientX","clientY","mouseTarget","convertViewToModelMouseTarget","createOverviewRuler","cssClassName","change","zonesHaveChanged","changeViewZones","onHeightMaybeChanged","privateViewEventBus","ViewZonesChangedEvent","now","everything","forceShouldRender","setAriaOptions","addContentWidget","widgetData","addWidget","widget","layoutContentWidget","newRange","position","range","newPosition","newPreference","preference","setWidgetPosition","removeContentWidget","removeWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","func"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/browser/view/viewImpl.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { PointerHandler } from '../controller/pointerHandler.js';\r\nimport { TextAreaHandler } from '../controller/textAreaHandler.js';\r\nimport { ViewController } from './viewController.js';\r\nimport { ViewOutgoingEvents } from './viewOutgoingEvents.js';\r\nimport { ContentViewOverlays, MarginViewOverlays } from './viewOverlays.js';\r\nimport { PartFingerprints } from './viewPart.js';\r\nimport { ViewContentWidgets } from '../viewParts/contentWidgets/contentWidgets.js';\r\nimport { CurrentLineHighlightOverlay, CurrentLineMarginHighlightOverlay } from '../viewParts/currentLineHighlight/currentLineHighlight.js';\r\nimport { DecorationsOverlay } from '../viewParts/decorations/decorations.js';\r\nimport { EditorScrollbar } from '../viewParts/editorScrollbar/editorScrollbar.js';\r\nimport { GlyphMarginOverlay } from '../viewParts/glyphMargin/glyphMargin.js';\r\nimport { IndentGuidesOverlay } from '../viewParts/indentGuides/indentGuides.js';\r\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\r\nimport { ViewLines } from '../viewParts/lines/viewLines.js';\r\nimport { LinesDecorationsOverlay } from '../viewParts/linesDecorations/linesDecorations.js';\r\nimport { Margin } from '../viewParts/margin/margin.js';\r\nimport { MarginViewLineDecorationsOverlay } from '../viewParts/marginDecorations/marginDecorations.js';\r\nimport { Minimap } from '../viewParts/minimap/minimap.js';\r\nimport { ViewOverlayWidgets } from '../viewParts/overlayWidgets/overlayWidgets.js';\r\nimport { DecorationsOverviewRuler } from '../viewParts/overviewRuler/decorationsOverviewRuler.js';\r\nimport { OverviewRuler } from '../viewParts/overviewRuler/overviewRuler.js';\r\nimport { Rulers } from '../viewParts/rulers/rulers.js';\r\nimport { ScrollDecorationViewPart } from '../viewParts/scrollDecoration/scrollDecoration.js';\r\nimport { SelectionsOverlay } from '../viewParts/selections/selections.js';\r\nimport { ViewCursors } from '../viewParts/viewCursors/viewCursors.js';\r\nimport { ViewZones } from '../viewParts/viewZones/viewZones.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { RenderingContext } from '../../common/view/renderingContext.js';\r\nimport { ViewContext } from '../../common/view/viewContext.js';\r\nimport { ViewEventDispatcher } from '../../common/view/viewEventDispatcher.js';\r\nimport * as viewEvents from '../../common/view/viewEvents.js';\r\nimport { ViewportData } from '../../common/viewLayout/viewLinesViewportData.js';\r\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\r\nimport { getThemeTypeSelector } from '../../../platform/theme/common/themeService.js';\r\nimport { PointerHandlerLastRenderData } from '../controller/mouseTarget.js';\r\nvar View = /** @class */ (function (_super) {\r\n    __extends(View, _super);\r\n    function View(commandDelegate, configuration, themeService, model, cursor, outgoingEvents) {\r\n        var _this = _super.call(this) || this;\r\n        _this._cursor = cursor;\r\n        _this._renderAnimationFrame = null;\r\n        _this.outgoingEvents = outgoingEvents;\r\n        var viewController = new ViewController(configuration, model, _this.outgoingEvents, commandDelegate);\r\n        // The event dispatcher will always go through _renderOnce before dispatching any events\r\n        _this.eventDispatcher = new ViewEventDispatcher(function (callback) { return _this._renderOnce(callback); });\r\n        // Ensure the view is the first event handler in order to update the layout\r\n        _this.eventDispatcher.addEventHandler(_this);\r\n        // The view context is passed on to most classes (basically to reduce param. counts in ctors)\r\n        _this._context = new ViewContext(configuration, themeService.getTheme(), model, _this.eventDispatcher);\r\n        _this._register(themeService.onThemeChange(function (theme) {\r\n            _this._context.theme = theme;\r\n            _this.eventDispatcher.emit(new viewEvents.ViewThemeChangedEvent());\r\n            _this.render(true, false);\r\n        }));\r\n        _this.viewParts = [];\r\n        // Keyboard handler\r\n        _this._textAreaHandler = new TextAreaHandler(_this._context, viewController, _this.createTextAreaHandlerHelper());\r\n        _this.viewParts.push(_this._textAreaHandler);\r\n        // These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)\r\n        _this.linesContent = createFastDomNode(document.createElement('div'));\r\n        _this.linesContent.setClassName('lines-content' + ' monaco-editor-background');\r\n        _this.linesContent.setPosition('absolute');\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setClassName(_this.getEditorClassName());\r\n        _this.overflowGuardContainer = createFastDomNode(document.createElement('div'));\r\n        PartFingerprints.write(_this.overflowGuardContainer, 3 /* OverflowGuard */);\r\n        _this.overflowGuardContainer.setClassName('overflow-guard');\r\n        _this._scrollbar = new EditorScrollbar(_this._context, _this.linesContent, _this.domNode, _this.overflowGuardContainer);\r\n        _this.viewParts.push(_this._scrollbar);\r\n        // View Lines\r\n        _this.viewLines = new ViewLines(_this._context, _this.linesContent);\r\n        // View Zones\r\n        _this.viewZones = new ViewZones(_this._context);\r\n        _this.viewParts.push(_this.viewZones);\r\n        // Decorations overview ruler\r\n        var decorationsOverviewRuler = new DecorationsOverviewRuler(_this._context);\r\n        _this.viewParts.push(decorationsOverviewRuler);\r\n        var scrollDecoration = new ScrollDecorationViewPart(_this._context);\r\n        _this.viewParts.push(scrollDecoration);\r\n        var contentViewOverlays = new ContentViewOverlays(_this._context);\r\n        _this.viewParts.push(contentViewOverlays);\r\n        contentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new SelectionsOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new IndentGuidesOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new DecorationsOverlay(_this._context));\r\n        var marginViewOverlays = new MarginViewOverlays(_this._context);\r\n        _this.viewParts.push(marginViewOverlays);\r\n        marginViewOverlays.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new MarginViewLineDecorationsOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new LineNumbersOverlay(_this._context));\r\n        var margin = new Margin(_this._context);\r\n        margin.getDomNode().appendChild(_this.viewZones.marginDomNode);\r\n        margin.getDomNode().appendChild(marginViewOverlays.getDomNode());\r\n        _this.viewParts.push(margin);\r\n        // Content widgets\r\n        _this.contentWidgets = new ViewContentWidgets(_this._context, _this.domNode);\r\n        _this.viewParts.push(_this.contentWidgets);\r\n        _this.viewCursors = new ViewCursors(_this._context);\r\n        _this.viewParts.push(_this.viewCursors);\r\n        // Overlay widgets\r\n        _this.overlayWidgets = new ViewOverlayWidgets(_this._context);\r\n        _this.viewParts.push(_this.overlayWidgets);\r\n        var rulers = new Rulers(_this._context);\r\n        _this.viewParts.push(rulers);\r\n        var minimap = new Minimap(_this._context);\r\n        _this.viewParts.push(minimap);\r\n        // -------------- Wire dom nodes up\r\n        if (decorationsOverviewRuler) {\r\n            var overviewRulerData = _this._scrollbar.getOverviewRulerLayoutInfo();\r\n            overviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(), overviewRulerData.insertBefore);\r\n        }\r\n        _this.linesContent.appendChild(contentViewOverlays.getDomNode());\r\n        _this.linesContent.appendChild(rulers.domNode);\r\n        _this.linesContent.appendChild(_this.viewZones.domNode);\r\n        _this.linesContent.appendChild(_this.viewLines.getDomNode());\r\n        _this.linesContent.appendChild(_this.contentWidgets.domNode);\r\n        _this.linesContent.appendChild(_this.viewCursors.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(margin.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(_this._scrollbar.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(scrollDecoration.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textArea);\r\n        _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textAreaCover);\r\n        _this.overflowGuardContainer.appendChild(_this.overlayWidgets.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(minimap.getDomNode());\r\n        _this.domNode.appendChild(_this.overflowGuardContainer);\r\n        _this.domNode.appendChild(_this.contentWidgets.overflowingContentWidgetsDomNode);\r\n        _this._applyLayout();\r\n        // Pointer handler\r\n        _this.pointerHandler = _this._register(new PointerHandler(_this._context, viewController, _this.createPointerHandlerHelper()));\r\n        _this._register(model.addEventListener(function (events) {\r\n            _this.eventDispatcher.emitMany(events);\r\n        }));\r\n        _this._register(_this._cursor.addEventListener(function (events) {\r\n            _this.eventDispatcher.emitMany(events);\r\n        }));\r\n        return _this;\r\n    }\r\n    View.prototype._flushAccumulatedAndRenderNow = function () {\r\n        this._renderNow();\r\n    };\r\n    View.prototype.createPointerHandlerHelper = function () {\r\n        var _this = this;\r\n        return {\r\n            viewDomNode: this.domNode.domNode,\r\n            linesContentDomNode: this.linesContent.domNode,\r\n            focusTextArea: function () {\r\n                _this.focus();\r\n            },\r\n            getLastRenderData: function () {\r\n                var lastViewCursorsRenderData = _this.viewCursors.getLastRenderData() || [];\r\n                var lastTextareaPosition = _this._textAreaHandler.getLastRenderData();\r\n                return new PointerHandlerLastRenderData(lastViewCursorsRenderData, lastTextareaPosition);\r\n            },\r\n            shouldSuppressMouseDownOnViewZone: function (viewZoneId) {\r\n                return _this.viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);\r\n            },\r\n            shouldSuppressMouseDownOnWidget: function (widgetId) {\r\n                return _this.contentWidgets.shouldSuppressMouseDownOnWidget(widgetId);\r\n            },\r\n            getPositionFromDOMInfo: function (spanNode, offset) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.getPositionFromDOMInfo(spanNode, offset);\r\n            },\r\n            visibleRangeForPosition: function (lineNumber, column) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\r\n            },\r\n            getLineWidth: function (lineNumber) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.getLineWidth(lineNumber);\r\n            }\r\n        };\r\n    };\r\n    View.prototype.createTextAreaHandlerHelper = function () {\r\n        var _this = this;\r\n        return {\r\n            visibleRangeForPositionRelativeToEditor: function (lineNumber, column) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\r\n            }\r\n        };\r\n    };\r\n    View.prototype._applyLayout = function () {\r\n        var options = this._context.configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        this.domNode.setWidth(layoutInfo.width);\r\n        this.domNode.setHeight(layoutInfo.height);\r\n        this.overflowGuardContainer.setWidth(layoutInfo.width);\r\n        this.overflowGuardContainer.setHeight(layoutInfo.height);\r\n        this.linesContent.setWidth(1000000);\r\n        this.linesContent.setHeight(1000000);\r\n    };\r\n    View.prototype.getEditorClassName = function () {\r\n        var focused = this._textAreaHandler.isFocused() ? ' focused' : '';\r\n        return this._context.configuration.options.get(104 /* editorClassName */) + ' ' + getThemeTypeSelector(this._context.theme.type) + focused;\r\n    };\r\n    // --- begin event handlers\r\n    View.prototype.onConfigurationChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        this._applyLayout();\r\n        return false;\r\n    };\r\n    View.prototype.onContentSizeChanged = function (e) {\r\n        this.outgoingEvents.emitContentSizeChange(e);\r\n        return false;\r\n    };\r\n    View.prototype.onFocusChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        this._context.model.setHasFocus(e.isFocused);\r\n        if (e.isFocused) {\r\n            this.outgoingEvents.emitViewFocusGained();\r\n        }\r\n        else {\r\n            this.outgoingEvents.emitViewFocusLost();\r\n        }\r\n        return false;\r\n    };\r\n    View.prototype.onScrollChanged = function (e) {\r\n        this.outgoingEvents.emitScrollChanged(e);\r\n        return false;\r\n    };\r\n    View.prototype.onThemeChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        return false;\r\n    };\r\n    // --- end event handlers\r\n    View.prototype.dispose = function () {\r\n        if (this._renderAnimationFrame !== null) {\r\n            this._renderAnimationFrame.dispose();\r\n            this._renderAnimationFrame = null;\r\n        }\r\n        this.eventDispatcher.removeEventHandler(this);\r\n        this.outgoingEvents.dispose();\r\n        this.viewLines.dispose();\r\n        // Destroy view parts\r\n        for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n            this.viewParts[i].dispose();\r\n        }\r\n        this.viewParts = [];\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    View.prototype._renderOnce = function (callback) {\r\n        var r = safeInvokeNoArg(callback);\r\n        this._scheduleRender();\r\n        return r;\r\n    };\r\n    View.prototype._scheduleRender = function () {\r\n        if (this._renderAnimationFrame === null) {\r\n            this._renderAnimationFrame = dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this), 100);\r\n        }\r\n    };\r\n    View.prototype._onRenderScheduled = function () {\r\n        this._renderAnimationFrame = null;\r\n        this._flushAccumulatedAndRenderNow();\r\n    };\r\n    View.prototype._renderNow = function () {\r\n        var _this = this;\r\n        safeInvokeNoArg(function () { return _this._actualRender(); });\r\n    };\r\n    View.prototype._getViewPartsToRender = function () {\r\n        var result = [], resultLen = 0;\r\n        for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n            var viewPart = this.viewParts[i];\r\n            if (viewPart.shouldRender()) {\r\n                result[resultLen++] = viewPart;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    View.prototype._actualRender = function () {\r\n        if (!dom.isInDOM(this.domNode.domNode)) {\r\n            return;\r\n        }\r\n        var viewPartsToRender = this._getViewPartsToRender();\r\n        if (!this.viewLines.shouldRender() && viewPartsToRender.length === 0) {\r\n            // Nothing to render\r\n            return;\r\n        }\r\n        var partialViewportData = this._context.viewLayout.getLinesViewportData();\r\n        this._context.model.setViewport(partialViewportData.startLineNumber, partialViewportData.endLineNumber, partialViewportData.centeredLineNumber);\r\n        var viewportData = new ViewportData(this._cursor.getViewSelections(), partialViewportData, this._context.viewLayout.getWhitespaceViewportData(), this._context.model);\r\n        if (this.contentWidgets.shouldRender()) {\r\n            // Give the content widgets a chance to set their max width before a possible synchronous layout\r\n            this.contentWidgets.onBeforeRender(viewportData);\r\n        }\r\n        if (this.viewLines.shouldRender()) {\r\n            this.viewLines.renderText(viewportData);\r\n            this.viewLines.onDidRender();\r\n            // Rendering of viewLines might cause scroll events to occur, so collect view parts to render again\r\n            viewPartsToRender = this._getViewPartsToRender();\r\n        }\r\n        var renderingContext = new RenderingContext(this._context.viewLayout, viewportData, this.viewLines);\r\n        // Render the rest of the parts\r\n        for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\r\n            var viewPart = viewPartsToRender[i];\r\n            viewPart.prepareRender(renderingContext);\r\n        }\r\n        for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\r\n            var viewPart = viewPartsToRender[i];\r\n            viewPart.render(renderingContext);\r\n            viewPart.onDidRender();\r\n        }\r\n    };\r\n    // --- BEGIN CodeEditor helpers\r\n    View.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        this._scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);\r\n    };\r\n    View.prototype.restoreState = function (scrollPosition) {\r\n        this._context.viewLayout.setScrollPositionNow({ scrollTop: scrollPosition.scrollTop });\r\n        this._context.model.tokenizeViewport();\r\n        this._renderNow();\r\n        this.viewLines.updateLineWidths();\r\n        this._context.viewLayout.setScrollPositionNow({ scrollLeft: scrollPosition.scrollLeft });\r\n    };\r\n    View.prototype.getOffsetForColumn = function (modelLineNumber, modelColumn) {\r\n        var modelPosition = this._context.model.validateModelPosition({\r\n            lineNumber: modelLineNumber,\r\n            column: modelColumn\r\n        });\r\n        var viewPosition = this._context.model.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\r\n        this._flushAccumulatedAndRenderNow();\r\n        var visibleRange = this.viewLines.visibleRangeForPosition(new Position(viewPosition.lineNumber, viewPosition.column));\r\n        if (!visibleRange) {\r\n            return -1;\r\n        }\r\n        return visibleRange.left;\r\n    };\r\n    View.prototype.getTargetAtClientPoint = function (clientX, clientY) {\r\n        var mouseTarget = this.pointerHandler.getTargetAtClientPoint(clientX, clientY);\r\n        if (!mouseTarget) {\r\n            return null;\r\n        }\r\n        return ViewOutgoingEvents.convertViewToModelMouseTarget(mouseTarget, this._context.model.coordinatesConverter);\r\n    };\r\n    View.prototype.createOverviewRuler = function (cssClassName) {\r\n        return new OverviewRuler(this._context, cssClassName);\r\n    };\r\n    View.prototype.change = function (callback) {\r\n        var _this = this;\r\n        return this._renderOnce(function () {\r\n            var zonesHaveChanged = _this.viewZones.changeViewZones(callback);\r\n            if (zonesHaveChanged) {\r\n                _this._context.viewLayout.onHeightMaybeChanged();\r\n                _this._context.privateViewEventBus.emit(new viewEvents.ViewZonesChangedEvent());\r\n            }\r\n            return zonesHaveChanged;\r\n        });\r\n    };\r\n    View.prototype.render = function (now, everything) {\r\n        if (everything) {\r\n            // Force everything to render...\r\n            this.viewLines.forceShouldRender();\r\n            for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n                var viewPart = this.viewParts[i];\r\n                viewPart.forceShouldRender();\r\n            }\r\n        }\r\n        if (now) {\r\n            this._flushAccumulatedAndRenderNow();\r\n        }\r\n        else {\r\n            this._scheduleRender();\r\n        }\r\n    };\r\n    View.prototype.focus = function () {\r\n        this._textAreaHandler.focusTextArea();\r\n    };\r\n    View.prototype.isFocused = function () {\r\n        return this._textAreaHandler.isFocused();\r\n    };\r\n    View.prototype.setAriaOptions = function (options) {\r\n        this._textAreaHandler.setAriaOptions(options);\r\n    };\r\n    View.prototype.addContentWidget = function (widgetData) {\r\n        this.contentWidgets.addWidget(widgetData.widget);\r\n        this.layoutContentWidget(widgetData);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.layoutContentWidget = function (widgetData) {\r\n        var newRange = widgetData.position ? widgetData.position.range || null : null;\r\n        if (newRange === null) {\r\n            var newPosition = widgetData.position ? widgetData.position.position : null;\r\n            if (newPosition !== null) {\r\n                newRange = new Range(newPosition.lineNumber, newPosition.column, newPosition.lineNumber, newPosition.column);\r\n            }\r\n        }\r\n        var newPreference = widgetData.position ? widgetData.position.preference : null;\r\n        this.contentWidgets.setWidgetPosition(widgetData.widget, newRange, newPreference);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.removeContentWidget = function (widgetData) {\r\n        this.contentWidgets.removeWidget(widgetData.widget);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.addOverlayWidget = function (widgetData) {\r\n        this.overlayWidgets.addWidget(widgetData.widget);\r\n        this.layoutOverlayWidget(widgetData);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.layoutOverlayWidget = function (widgetData) {\r\n        var newPreference = widgetData.position ? widgetData.position.preference : null;\r\n        var shouldRender = this.overlayWidgets.setWidgetPosition(widgetData.widget, newPreference);\r\n        if (shouldRender) {\r\n            this._scheduleRender();\r\n        }\r\n    };\r\n    View.prototype.removeOverlayWidget = function (widgetData) {\r\n        this.overlayWidgets.removeWidget(widgetData.widget);\r\n        this._scheduleRender();\r\n    };\r\n    return View;\r\n}(ViewEventHandler));\r\nexport { View };\r\nfunction safeInvokeNoArg(func) {\r\n    try {\r\n        return func();\r\n    }\r\n    catch (e) {\r\n        onUnexpectedError(e);\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}