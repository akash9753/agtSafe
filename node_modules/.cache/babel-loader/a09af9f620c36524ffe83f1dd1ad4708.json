{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport './splitview.css';\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\nimport { Event, Emitter } from '../../../common/event.js';\nimport * as types from '../../../common/types.js';\nimport * as dom from '../../dom.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\nimport { Sash } from '../sash/sash.js';\nimport { Color } from '../../../common/color.js';\nimport { domEvent } from '../../event.js';\nvar defaultStyles = {\n  separatorBorder: Color.transparent\n};\nvar ViewItem = /** @class */function () {\n  function ViewItem(container, view, size, disposable) {\n    this.container = container;\n    this.view = view;\n    this.disposable = disposable;\n    this._cachedVisibleSize = undefined;\n    if (typeof size === 'number') {\n      this._size = size;\n      this._cachedVisibleSize = undefined;\n      dom.addClass(container, 'visible');\n    } else {\n      this._size = 0;\n      this._cachedVisibleSize = size.cachedVisibleSize;\n    }\n  }\n  Object.defineProperty(ViewItem.prototype, \"size\", {\n    get: function get() {\n      return this._size;\n    },\n    set: function set(size) {\n      this._size = size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"visible\", {\n    get: function get() {\n      return typeof this._cachedVisibleSize === 'undefined';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ViewItem.prototype.setVisible = function (visible, size) {\n    if (visible === this.visible) {\n      return;\n    }\n    if (visible) {\n      this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n      this._cachedVisibleSize = undefined;\n    } else {\n      this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n      this.size = 0;\n    }\n    dom.toggleClass(this.container, 'visible', visible);\n    if (this.view.setVisible) {\n      this.view.setVisible(visible);\n    }\n  };\n  Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\n    get: function get() {\n      return this.visible ? this.view.minimumSize : 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\n    get: function get() {\n      return this.view.minimumSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\n    get: function get() {\n      return this.visible ? this.view.maximumSize : 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\n    get: function get() {\n      return this.view.maximumSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"priority\", {\n    get: function get() {\n      return this.view.priority;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"snap\", {\n    get: function get() {\n      return !!this.view.snap;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"enabled\", {\n    set: function set(enabled) {\n      this.container.style.pointerEvents = enabled ? null : 'none';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ViewItem.prototype.layout = function (offset, layoutContext) {\n    this.layoutContainer(offset);\n    this.view.layout(this.size, offset, layoutContext);\n  };\n  ViewItem.prototype.dispose = function () {\n    this.disposable.dispose();\n    return this.view;\n  };\n  return ViewItem;\n}();\nvar VerticalViewItem = /** @class */function (_super) {\n  __extends(VerticalViewItem, _super);\n  function VerticalViewItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  VerticalViewItem.prototype.layoutContainer = function (offset) {\n    this.container.style.top = offset + \"px\";\n    this.container.style.height = this.size + \"px\";\n  };\n  return VerticalViewItem;\n}(ViewItem);\nvar HorizontalViewItem = /** @class */function (_super) {\n  __extends(HorizontalViewItem, _super);\n  function HorizontalViewItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HorizontalViewItem.prototype.layoutContainer = function (offset) {\n    this.container.style.left = offset + \"px\";\n    this.container.style.width = this.size + \"px\";\n  };\n  return HorizontalViewItem;\n}(ViewItem);\nvar State;\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n  function Split(index) {\n    return {\n      type: 'split',\n      index: index\n    };\n  }\n  Sizing.Split = Split;\n  function Invisible(cachedVisibleSize) {\n    return {\n      type: 'invisible',\n      cachedVisibleSize: cachedVisibleSize\n    };\n  }\n  Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\nvar SplitView = /** @class */function (_super) {\n  __extends(SplitView, _super);\n  function SplitView(container, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.size = 0;\n    _this.contentSize = 0;\n    _this.proportions = undefined;\n    _this.viewItems = [];\n    _this.sashItems = [];\n    _this.state = State.Idle;\n    _this._onDidSashChange = _this._register(new Emitter());\n    _this.onDidSashChange = _this._onDidSashChange.event;\n    _this._onDidSashReset = _this._register(new Emitter());\n    _this._startSnappingEnabled = true;\n    _this._endSnappingEnabled = true;\n    _this.orientation = types.isUndefined(options.orientation) ? 0 /* VERTICAL */ : options.orientation;\n    _this.inverseAltBehavior = !!options.inverseAltBehavior;\n    _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\n    _this.el = document.createElement('div');\n    dom.addClass(_this.el, 'monaco-split-view2');\n    dom.addClass(_this.el, _this.orientation === 0 /* VERTICAL */ ? 'vertical' : 'horizontal');\n    container.appendChild(_this.el);\n    _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\n    _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\n    _this.style(options.styles || defaultStyles);\n    // We have an existing set of view, add them now\n    if (options.descriptor) {\n      _this.size = options.descriptor.size;\n      options.descriptor.views.forEach(function (viewDescriptor, index) {\n        var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : {\n          type: 'invisible',\n          cachedVisibleSize: viewDescriptor.size\n        };\n        var view = viewDescriptor.view;\n        _this.doAddView(view, sizing, index, true);\n      });\n      // Initialize content size and proportions for first layout\n      _this.contentSize = _this.viewItems.reduce(function (r, i) {\n        return r + i.size;\n      }, 0);\n      _this.saveProportions();\n    }\n    return _this;\n  }\n  Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\n    get: function get() {\n      return this._orthogonalStartSash;\n    },\n    set: function set(sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalStartSash = sash;\n      }\n      this._orthogonalStartSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\n    get: function get() {\n      return this._orthogonalEndSash;\n    },\n    set: function set(sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalEndSash = sash;\n      }\n      this._orthogonalEndSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\n    get: function get() {\n      return this._startSnappingEnabled;\n    },\n    set: function set(startSnappingEnabled) {\n      if (this._startSnappingEnabled === startSnappingEnabled) {\n        return;\n      }\n      this._startSnappingEnabled = startSnappingEnabled;\n      this.updateSashEnablement();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\n    get: function get() {\n      return this._endSnappingEnabled;\n    },\n    set: function set(endSnappingEnabled) {\n      if (this._endSnappingEnabled === endSnappingEnabled) {\n        return;\n      }\n      this._endSnappingEnabled = endSnappingEnabled;\n      this.updateSashEnablement();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  SplitView.prototype.style = function (styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      dom.removeClass(this.el, 'separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      dom.addClass(this.el, 'separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  };\n  SplitView.prototype.addView = function (view, size, index) {\n    if (index === void 0) {\n      index = this.viewItems.length;\n    }\n    this.doAddView(view, size, index, false);\n  };\n  SplitView.prototype.layout = function (size, layoutContext) {\n    var _this = this;\n    var previousSize = Math.max(this.size, this.contentSize);\n    this.size = size;\n    this.layoutContext = layoutContext;\n    if (!this.proportions) {\n      var indexes = range(this.viewItems.length);\n      var lowPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].priority === 1 /* Low */;\n      });\n      var highPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].priority === 2 /* High */;\n      });\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      for (var i = 0; i < this.viewItems.length; i++) {\n        var item = this.viewItems[i];\n        item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\n      }\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n  SplitView.prototype.saveProportions = function () {\n    var _this = this;\n    if (this.proportionalLayout && this.contentSize > 0) {\n      this.proportions = this.viewItems.map(function (i) {\n        return i.size / _this.contentSize;\n      });\n    }\n  };\n  SplitView.prototype.onSashStart = function (_a) {\n    var _this = this;\n    var sash = _a.sash,\n      start = _a.start,\n      alt = _a.alt;\n    for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\n      var item = _b[_i];\n      item.enabled = false;\n    }\n    var index = firstIndex(this.sashItems, function (item) {\n      return item.sash === sash;\n    });\n    // This way, we can press Alt while we resize a sash, macOS style!\n    var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) {\n      return resetSashDragState(_this.sashDragState.current, e.altKey);\n    }), domEvent(document.body, 'keyup')(function () {\n      return resetSashDragState(_this.sashDragState.current, false);\n    }));\n    var resetSashDragState = function resetSashDragState(start, alt) {\n      var sizes = _this.viewItems.map(function (i) {\n        return i.size;\n      });\n      var minDelta = Number.NEGATIVE_INFINITY;\n      var maxDelta = Number.POSITIVE_INFINITY;\n      if (_this.inverseAltBehavior) {\n        alt = !alt;\n      }\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        var isLastSash = index === _this.sashItems.length - 1;\n        if (isLastSash) {\n          var viewItem = _this.viewItems[index];\n          minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n        } else {\n          var viewItem = _this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n        }\n      }\n      var snapBefore;\n      var snapAfter;\n      if (!alt) {\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, _this.viewItems.length);\n        var minDeltaUp = upIndexes.reduce(function (r, i) {\n          return r + (_this.viewItems[i].minimumSize - sizes[i]);\n        }, 0);\n        var maxDeltaUp = upIndexes.reduce(function (r, i) {\n          return r + (_this.viewItems[i].viewMaximumSize - sizes[i]);\n        }, 0);\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) {\n          return r + (sizes[i] - _this.viewItems[i].minimumSize);\n        }, 0);\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) {\n          return r + (sizes[i] - _this.viewItems[i].viewMaximumSize);\n        }, 0);\n        var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\n        var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\n        var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\n        var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number') {\n          var viewItem = _this.viewItems[snapBeforeIndex];\n          var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapBefore = {\n            index: snapBeforeIndex,\n            limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\n            size: viewItem.size\n          };\n        }\n        if (typeof snapAfterIndex === 'number') {\n          var viewItem = _this.viewItems[snapAfterIndex];\n          var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapAfter = {\n            index: snapAfterIndex,\n            limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\n            size: viewItem.size\n          };\n        }\n      }\n      _this.sashDragState = {\n        start: start,\n        current: start,\n        index: index,\n        sizes: sizes,\n        minDelta: minDelta,\n        maxDelta: maxDelta,\n        alt: alt,\n        snapBefore: snapBefore,\n        snapAfter: snapAfter,\n        disposable: disposable\n      };\n    };\n    resetSashDragState(start, alt);\n  };\n  SplitView.prototype.onSashChange = function (_a) {\n    var current = _a.current;\n    var _b = this.sashDragState,\n      index = _b.index,\n      start = _b.start,\n      sizes = _b.sizes,\n      alt = _b.alt,\n      minDelta = _b.minDelta,\n      maxDelta = _b.maxDelta,\n      snapBefore = _b.snapBefore,\n      snapAfter = _b.snapAfter;\n    this.sashDragState.current = current;\n    var delta = current - start;\n    var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n    if (alt) {\n      var isLastSash = index === this.sashItems.length - 1;\n      var newSizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n      var viewItemIndex = isLastSash ? index : index + 1;\n      var viewItem = this.viewItems[viewItemIndex];\n      var newMinDelta = viewItem.size - viewItem.maximumSize;\n      var newMaxDelta = viewItem.size - viewItem.minimumSize;\n      var resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n  SplitView.prototype.onSashEnd = function (index) {\n    this._onDidSashChange.fire(index);\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item.enabled = true;\n    }\n  };\n  SplitView.prototype.onViewChange = function (item, size) {\n    var index = this.viewItems.indexOf(item);\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.minimumSize, item.maximumSize);\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout([index], undefined);\n    }\n  };\n  SplitView.prototype.resizeView = function (index, size) {\n    var _this = this;\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    var indexes = range(this.viewItems.length).filter(function (i) {\n      return i !== index;\n    });\n    var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1 /* Low */;\n    }), [index]);\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2 /* High */;\n    });\n    var item = this.viewItems[index];\n    size = Math.round(size);\n    size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n    item.size = size;\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    this.state = State.Idle;\n  };\n  SplitView.prototype.distributeViewSizes = function () {\n    var _this = this;\n    var flexibleViewItems = [];\n    var flexibleSize = 0;\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var item = _a[_i];\n      if (item.maximumSize - item.minimumSize > 0) {\n        flexibleViewItems.push(item);\n        flexibleSize += item.size;\n      }\n    }\n    var size = Math.floor(flexibleSize / flexibleViewItems.length);\n    for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\n      var item = flexibleViewItems_1[_b];\n      item.size = clamp(size, item.minimumSize, item.maximumSize);\n    }\n    var indexes = range(this.viewItems.length);\n    var lowPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1 /* Low */;\n    });\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2 /* High */;\n    });\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n  };\n  SplitView.prototype.getViewSize = function (index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n    return this.viewItems[index].size;\n  };\n  SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\n    var _this = this;\n    if (index === void 0) {\n      index = this.viewItems.length;\n    }\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    // Add view\n    var container = dom.$('.split-view-view');\n    if (index === this.viewItems.length) {\n      this.viewContainer.appendChild(container);\n    } else {\n      this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n    }\n    var onChangeDisposable = view.onDidChange(function (size) {\n      return _this.onViewChange(item, size);\n    });\n    var containerDisposable = toDisposable(function () {\n      return _this.viewContainer.removeChild(container);\n    });\n    var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n    var viewSize;\n    if (typeof size === 'number') {\n      viewSize = size;\n    } else if (size.type === 'split') {\n      viewSize = this.getViewSize(size.index) / 2;\n    } else if (size.type === 'invisible') {\n      viewSize = {\n        cachedVisibleSize: size.cachedVisibleSize\n      };\n    } else {\n      viewSize = view.minimumSize;\n    }\n    var item = this.orientation === 0 /* VERTICAL */ ? new VerticalViewItem(container, view, viewSize, disposable) : new HorizontalViewItem(container, view, viewSize, disposable);\n    this.viewItems.splice(index, 0, item);\n    // Add sash\n    if (this.viewItems.length > 1) {\n      var orientation_1 = this.orientation === 0 /* VERTICAL */ ? 1 /* HORIZONTAL */ : 0 /* VERTICAL */;\n      var layoutProvider = this.orientation === 0 /* VERTICAL */ ? {\n        getHorizontalSashTop: function getHorizontalSashTop(sash) {\n          return _this.getSashPosition(sash);\n        }\n      } : {\n        getVerticalSashLeft: function getVerticalSashLeft(sash) {\n          return _this.getSashPosition(sash);\n        }\n      };\n      var sash_1 = new Sash(this.sashContainer, layoutProvider, {\n        orientation: orientation_1,\n        orthogonalStartSash: this.orthogonalStartSash,\n        orthogonalEndSash: this.orthogonalEndSash\n      });\n      var sashEventMapper = this.orientation === 0 /* VERTICAL */ ? function (e) {\n        return {\n          sash: sash_1,\n          start: e.startY,\n          current: e.currentY,\n          alt: e.altKey\n        };\n      } : function (e) {\n        return {\n          sash: sash_1,\n          start: e.startX,\n          current: e.currentX,\n          alt: e.altKey\n        };\n      };\n      var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\n      var onStartDisposable = onStart(this.onSashStart, this);\n      var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\n      var onChangeDisposable_1 = onChange(this.onSashChange, this);\n      var onEnd = Event.map(sash_1.onDidEnd, function () {\n        return firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        });\n      });\n      var onEndDisposable = onEnd(this.onSashEnd, this);\n      var onDidResetDisposable = sash_1.onDidReset(function () {\n        var index = firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        });\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, _this.viewItems.length);\n        var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\n        var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\n          return;\n        }\n        if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\n          return;\n        }\n        _this._onDidSashReset.fire(index);\n      });\n      var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\n      var sashItem = {\n        sash: sash_1,\n        disposable: disposable_1\n      };\n      this.sashItems.splice(index - 1, 0, sashItem);\n    }\n    container.appendChild(view.element);\n    var highPriorityIndexes;\n    if (typeof size !== 'number' && size.type === 'split') {\n      highPriorityIndexes = [size.index];\n    }\n    if (!skipLayout) {\n      this.relayout([index], highPriorityIndexes);\n    }\n    this.state = State.Idle;\n    if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n      this.distributeViewSizes();\n    }\n  };\n  SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  };\n  SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\n    var _this = this;\n    if (sizes === void 0) {\n      sizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n    }\n    if (overloadMinDelta === void 0) {\n      overloadMinDelta = Number.NEGATIVE_INFINITY;\n    }\n    if (overloadMaxDelta === void 0) {\n      overloadMaxDelta = Number.POSITIVE_INFINITY;\n    }\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n    var upIndexes = range(index, -1);\n    var downIndexes = range(index + 1, this.viewItems.length);\n    if (highPriorityIndexes) {\n      for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\n        var index_1 = highPriorityIndexes_1[_i];\n        pushToStart(upIndexes, index_1);\n        pushToStart(downIndexes, index_1);\n      }\n    }\n    if (lowPriorityIndexes) {\n      for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\n        var index_2 = lowPriorityIndexes_1[_a];\n        pushToEnd(upIndexes, index_2);\n        pushToEnd(downIndexes, index_2);\n      }\n    }\n    var upItems = upIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var upSizes = upIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var downItems = downIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var downSizes = downIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var minDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].minimumSize - sizes[i]);\n    }, 0);\n    var maxDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].maximumSize - sizes[i]);\n    }, 0);\n    var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].minimumSize);\n    }, 0);\n    var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].maximumSize);\n    }, 0);\n    var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    var snapped = false;\n    if (snapBefore) {\n      var snapView = this.viewItems[snapBefore.index];\n      var visible = delta >= snapBefore.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapBefore.size);\n    }\n    if (!snapped && snapAfter) {\n      var snapView = this.viewItems[snapAfter.index];\n      var visible = delta < snapAfter.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapAfter.size);\n    }\n    if (snapped) {\n      return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n    }\n    delta = clamp(delta, minDelta, maxDelta);\n    for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\n      var item = upItems[i];\n      var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n      var viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n    for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\n      var item = downItems[i];\n      var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n      var viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n    return delta;\n  };\n  SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\n    var _this = this;\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    var emptyDelta = this.size - contentSize;\n    var indexes = range(this.viewItems.length - 1, -1);\n    var lowPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1 /* Low */;\n    });\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2 /* High */;\n    });\n    for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\n      var index = highPriorityIndexes_2[_i];\n      pushToStart(indexes, index);\n    }\n    for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\n      var index = lowPriorityIndexes_2[_a];\n      pushToEnd(indexes, index);\n    }\n    if (typeof lowPriorityIndex === 'number') {\n      pushToEnd(indexes, lowPriorityIndex);\n    }\n    for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n      var item = this.viewItems[indexes[i]];\n      var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n      var viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  };\n  SplitView.prototype.layoutViews = function () {\n    // Save new content size\n    this.contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    // Layout views\n    var offset = 0;\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var viewItem = _a[_i];\n      viewItem.layout(offset, this.layoutContext);\n      offset += viewItem.size;\n    }\n    // Layout sashes\n    this.sashItems.forEach(function (item) {\n      return item.sash.layout();\n    });\n    this.updateSashEnablement();\n  };\n  SplitView.prototype.updateSashEnablement = function () {\n    var previous = false;\n    var collapsesDown = this.viewItems.map(function (i) {\n      return previous = i.size - i.minimumSize > 0 || previous;\n    });\n    previous = false;\n    var expandsDown = this.viewItems.map(function (i) {\n      return previous = i.maximumSize - i.size > 0 || previous;\n    });\n    var reverseViews = __spreadArrays(this.viewItems).reverse();\n    previous = false;\n    var collapsesUp = reverseViews.map(function (i) {\n      return previous = i.size - i.minimumSize > 0 || previous;\n    }).reverse();\n    previous = false;\n    var expandsUp = reverseViews.map(function (i) {\n      return previous = i.maximumSize - i.size > 0 || previous;\n    }).reverse();\n    var position = 0;\n    for (var index = 0; index < this.sashItems.length; index++) {\n      var sash = this.sashItems[index].sash;\n      var viewItem = this.viewItems[index];\n      position += viewItem.size;\n      var min = !(collapsesDown[index] && expandsUp[index + 1]);\n      var max = !(expandsDown[index] && collapsesUp[index + 1]);\n      if (min && max) {\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, this.viewItems.length);\n        var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n        var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n        if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n          sash.state = 1 /* Minimum */;\n        } else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n          sash.state = 2 /* Maximum */;\n        } else {\n          sash.state = 0 /* Disabled */;\n        }\n      } else if (min && !max) {\n        sash.state = 1 /* Minimum */;\n      } else if (!min && max) {\n        sash.state = 2 /* Maximum */;\n      } else {\n        sash.state = 3 /* Enabled */;\n      }\n    }\n  };\n\n  SplitView.prototype.getSashPosition = function (sash) {\n    var position = 0;\n    for (var i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n      if (this.sashItems[i].sash === sash) {\n        return Math.min(position, this.contentSize - 2);\n      }\n    }\n    return 0;\n  };\n  SplitView.prototype.findFirstSnapIndex = function (indexes) {\n    // visible views first\n    for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n      var index = indexes_1[_i];\n      var viewItem = this.viewItems[index];\n      if (!viewItem.visible) {\n        continue;\n      }\n      if (viewItem.snap) {\n        return index;\n      }\n    }\n    // then, hidden views\n    for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\n      var index = indexes_2[_a];\n      var viewItem = this.viewItems[index];\n      if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n        return undefined;\n      }\n      if (!viewItem.visible && viewItem.snap) {\n        return index;\n      }\n    }\n    return undefined;\n  };\n  SplitView.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n    this.viewItems.forEach(function (i) {\n      return i.dispose();\n    });\n    this.viewItems = [];\n    this.sashItems.forEach(function (i) {\n      return i.disposable.dispose();\n    });\n    this.sashItems = [];\n  };\n  return SplitView;\n}(Disposable);\nexport { SplitView };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","toDisposable","Disposable","combinedDisposable","Event","Emitter","types","dom","clamp","range","firstIndex","pushToStart","pushToEnd","Sash","Color","domEvent","defaultStyles","separatorBorder","transparent","ViewItem","container","view","size","disposable","_cachedVisibleSize","undefined","_size","addClass","cachedVisibleSize","defineProperty","get","set","enumerable","configurable","setVisible","visible","viewMinimumSize","viewMaximumSize","toggleClass","minimumSize","maximumSize","priority","snap","enabled","style","pointerEvents","layout","offset","layoutContext","layoutContainer","dispose","VerticalViewItem","_super","apply","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Invisible","SplitView","options","_this","call","contentSize","proportions","viewItems","sashItems","state","Idle","_onDidSashChange","_register","onDidSashChange","event","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","orientation","isUndefined","inverseAltBehavior","proportionalLayout","el","document","createElement","appendChild","sashContainer","append","$","viewContainer","styles","descriptor","views","forEach","viewDescriptor","sizing","doAddView","reduce","saveProportions","_orthogonalStartSash","sash","_i","_a","sashItem","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeClass","removeProperty","setProperty","toString","addView","previousSize","Math","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","item","round","distributeEmptySpace","layoutViews","map","onSashStart","start","alt","_b","body","e","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","minDelta_1","maxDelta_1","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","onSashChange","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","fire","onViewChange","indexOf","relayout","resizeView","Error","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","push","flexibleViewItems_1","getViewSize","skipLayout","insertBefore","children","onChangeDisposable","onDidChange","containerDisposable","removeChild","viewSize","splice","orientation_1","layoutProvider","getHorizontalSashTop","getSashPosition","getVerticalSashLeft","sash_1","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onChangeDisposable_1","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","disposable_1","element","overloadMinDelta","overloadMaxDelta","highPriorityIndexes_1","index_1","lowPriorityIndexes_1","index_2","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","highPriorityIndexes_2","lowPriorityIndexes_2","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","position","snappedBefore","snappedAfter","indexes_1","indexes_2"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './splitview.css';\r\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport * as types from '../../../common/types.js';\r\nimport * as dom from '../../dom.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\r\nimport { Sash } from '../sash/sash.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { domEvent } from '../../event.js';\r\nvar defaultStyles = {\r\n    separatorBorder: Color.transparent\r\n};\r\nvar ViewItem = /** @class */ (function () {\r\n    function ViewItem(container, view, size, disposable) {\r\n        this.container = container;\r\n        this.view = view;\r\n        this.disposable = disposable;\r\n        this._cachedVisibleSize = undefined;\r\n        if (typeof size === 'number') {\r\n            this._size = size;\r\n            this._cachedVisibleSize = undefined;\r\n            dom.addClass(container, 'visible');\r\n        }\r\n        else {\r\n            this._size = 0;\r\n            this._cachedVisibleSize = size.cachedVisibleSize;\r\n        }\r\n    }\r\n    Object.defineProperty(ViewItem.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        set: function (size) {\r\n            this._size = size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"visible\", {\r\n        get: function () {\r\n            return typeof this._cachedVisibleSize === 'undefined';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.setVisible = function (visible, size) {\r\n        if (visible === this.visible) {\r\n            return;\r\n        }\r\n        if (visible) {\r\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\r\n            this._cachedVisibleSize = undefined;\r\n        }\r\n        else {\r\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\r\n            this.size = 0;\r\n        }\r\n        dom.toggleClass(this.container, 'visible', visible);\r\n        if (this.view.setVisible) {\r\n            this.view.setVisible(visible);\r\n        }\r\n    };\r\n    Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\r\n        get: function () { return this.visible ? this.view.minimumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\r\n        get: function () { return this.view.minimumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\r\n        get: function () { return this.visible ? this.view.maximumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\r\n        get: function () { return this.view.maximumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"priority\", {\r\n        get: function () { return this.view.priority; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"snap\", {\r\n        get: function () { return !!this.view.snap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"enabled\", {\r\n        set: function (enabled) {\r\n            this.container.style.pointerEvents = enabled ? null : 'none';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.layout = function (offset, layoutContext) {\r\n        this.layoutContainer(offset);\r\n        this.view.layout(this.size, offset, layoutContext);\r\n    };\r\n    ViewItem.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n        return this.view;\r\n    };\r\n    return ViewItem;\r\n}());\r\nvar VerticalViewItem = /** @class */ (function (_super) {\r\n    __extends(VerticalViewItem, _super);\r\n    function VerticalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    VerticalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.top = offset + \"px\";\r\n        this.container.style.height = this.size + \"px\";\r\n    };\r\n    return VerticalViewItem;\r\n}(ViewItem));\r\nvar HorizontalViewItem = /** @class */ (function (_super) {\r\n    __extends(HorizontalViewItem, _super);\r\n    function HorizontalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HorizontalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.left = offset + \"px\";\r\n        this.container.style.width = this.size + \"px\";\r\n    };\r\n    return HorizontalViewItem;\r\n}(ViewItem));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Idle\"] = 0] = \"Idle\";\r\n    State[State[\"Busy\"] = 1] = \"Busy\";\r\n})(State || (State = {}));\r\nexport var Sizing;\r\n(function (Sizing) {\r\n    Sizing.Distribute = { type: 'distribute' };\r\n    function Split(index) { return { type: 'split', index: index }; }\r\n    Sizing.Split = Split;\r\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize: cachedVisibleSize }; }\r\n    Sizing.Invisible = Invisible;\r\n})(Sizing || (Sizing = {}));\r\nvar SplitView = /** @class */ (function (_super) {\r\n    __extends(SplitView, _super);\r\n    function SplitView(container, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.size = 0;\r\n        _this.contentSize = 0;\r\n        _this.proportions = undefined;\r\n        _this.viewItems = [];\r\n        _this.sashItems = [];\r\n        _this.state = State.Idle;\r\n        _this._onDidSashChange = _this._register(new Emitter());\r\n        _this.onDidSashChange = _this._onDidSashChange.event;\r\n        _this._onDidSashReset = _this._register(new Emitter());\r\n        _this._startSnappingEnabled = true;\r\n        _this._endSnappingEnabled = true;\r\n        _this.orientation = types.isUndefined(options.orientation) ? 0 /* VERTICAL */ : options.orientation;\r\n        _this.inverseAltBehavior = !!options.inverseAltBehavior;\r\n        _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\r\n        _this.el = document.createElement('div');\r\n        dom.addClass(_this.el, 'monaco-split-view2');\r\n        dom.addClass(_this.el, _this.orientation === 0 /* VERTICAL */ ? 'vertical' : 'horizontal');\r\n        container.appendChild(_this.el);\r\n        _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\r\n        _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\r\n        _this.style(options.styles || defaultStyles);\r\n        // We have an existing set of view, add them now\r\n        if (options.descriptor) {\r\n            _this.size = options.descriptor.size;\r\n            options.descriptor.views.forEach(function (viewDescriptor, index) {\r\n                var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\r\n                var view = viewDescriptor.view;\r\n                _this.doAddView(view, sizing, index, true);\r\n            });\r\n            // Initialize content size and proportions for first layout\r\n            _this.contentSize = _this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n            _this.saveProportions();\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\r\n        get: function () { return this._orthogonalStartSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalStartSash = sash;\r\n            }\r\n            this._orthogonalStartSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\r\n        get: function () { return this._orthogonalEndSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalEndSash = sash;\r\n            }\r\n            this._orthogonalEndSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\r\n        get: function () { return this._startSnappingEnabled; },\r\n        set: function (startSnappingEnabled) {\r\n            if (this._startSnappingEnabled === startSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._startSnappingEnabled = startSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\r\n        get: function () { return this._endSnappingEnabled; },\r\n        set: function (endSnappingEnabled) {\r\n            if (this._endSnappingEnabled === endSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._endSnappingEnabled = endSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SplitView.prototype.style = function (styles) {\r\n        if (styles.separatorBorder.isTransparent()) {\r\n            dom.removeClass(this.el, 'separator-border');\r\n            this.el.style.removeProperty('--separator-border');\r\n        }\r\n        else {\r\n            dom.addClass(this.el, 'separator-border');\r\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\r\n        }\r\n    };\r\n    SplitView.prototype.addView = function (view, size, index) {\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        this.doAddView(view, size, index, false);\r\n    };\r\n    SplitView.prototype.layout = function (size, layoutContext) {\r\n        var _this = this;\r\n        var previousSize = Math.max(this.size, this.contentSize);\r\n        this.size = size;\r\n        this.layoutContext = layoutContext;\r\n        if (!this.proportions) {\r\n            var indexes = range(this.viewItems.length);\r\n            var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n            var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.viewItems.length; i++) {\r\n                var item = this.viewItems[i];\r\n                item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\r\n            }\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.saveProportions = function () {\r\n        var _this = this;\r\n        if (this.proportionalLayout && this.contentSize > 0) {\r\n            this.proportions = this.viewItems.map(function (i) { return i.size / _this.contentSize; });\r\n        }\r\n    };\r\n    SplitView.prototype.onSashStart = function (_a) {\r\n        var _this = this;\r\n        var sash = _a.sash, start = _a.start, alt = _a.alt;\r\n        for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\r\n            var item = _b[_i];\r\n            item.enabled = false;\r\n        }\r\n        var index = firstIndex(this.sashItems, function (item) { return item.sash === sash; });\r\n        // This way, we can press Alt while we resize a sash, macOS style!\r\n        var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) { return resetSashDragState(_this.sashDragState.current, e.altKey); }), domEvent(document.body, 'keyup')(function () { return resetSashDragState(_this.sashDragState.current, false); }));\r\n        var resetSashDragState = function (start, alt) {\r\n            var sizes = _this.viewItems.map(function (i) { return i.size; });\r\n            var minDelta = Number.NEGATIVE_INFINITY;\r\n            var maxDelta = Number.POSITIVE_INFINITY;\r\n            if (_this.inverseAltBehavior) {\r\n                alt = !alt;\r\n            }\r\n            if (alt) {\r\n                // When we're using the last sash with Alt, we're resizing\r\n                // the view to the left/up, instead of right/down as usual\r\n                // Thus, we must do the inverse of the usual\r\n                var isLastSash = index === _this.sashItems.length - 1;\r\n                if (isLastSash) {\r\n                    var viewItem = _this.viewItems[index];\r\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\r\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\r\n                }\r\n                else {\r\n                    var viewItem = _this.viewItems[index + 1];\r\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\r\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\r\n                }\r\n            }\r\n            var snapBefore;\r\n            var snapAfter;\r\n            if (!alt) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n                var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].viewMaximumSize - sizes[i]); }, 0);\r\n                var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n                var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].viewMaximumSize); }, 0);\r\n                var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\r\n                var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapBeforeIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapBefore = {\r\n                        index: snapBeforeIndex,\r\n                        limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n                if (typeof snapAfterIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapAfterIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapAfter = {\r\n                        index: snapAfterIndex,\r\n                        limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n            }\r\n            _this.sashDragState = { start: start, current: start, index: index, sizes: sizes, minDelta: minDelta, maxDelta: maxDelta, alt: alt, snapBefore: snapBefore, snapAfter: snapAfter, disposable: disposable };\r\n        };\r\n        resetSashDragState(start, alt);\r\n    };\r\n    SplitView.prototype.onSashChange = function (_a) {\r\n        var current = _a.current;\r\n        var _b = this.sashDragState, index = _b.index, start = _b.start, sizes = _b.sizes, alt = _b.alt, minDelta = _b.minDelta, maxDelta = _b.maxDelta, snapBefore = _b.snapBefore, snapAfter = _b.snapAfter;\r\n        this.sashDragState.current = current;\r\n        var delta = current - start;\r\n        var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\r\n        if (alt) {\r\n            var isLastSash = index === this.sashItems.length - 1;\r\n            var newSizes = this.viewItems.map(function (i) { return i.size; });\r\n            var viewItemIndex = isLastSash ? index : index + 1;\r\n            var viewItem = this.viewItems[viewItemIndex];\r\n            var newMinDelta = viewItem.size - viewItem.maximumSize;\r\n            var newMaxDelta = viewItem.size - viewItem.minimumSize;\r\n            var resizeIndex = isLastSash ? index - 1 : index + 1;\r\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.onSashEnd = function (index) {\r\n        this._onDidSashChange.fire(index);\r\n        this.sashDragState.disposable.dispose();\r\n        this.saveProportions();\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.enabled = true;\r\n        }\r\n    };\r\n    SplitView.prototype.onViewChange = function (item, size) {\r\n        var index = this.viewItems.indexOf(item);\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        size = typeof size === 'number' ? size : item.size;\r\n        size = clamp(size, item.minimumSize, item.maximumSize);\r\n        if (this.inverseAltBehavior && index > 0) {\r\n            // In this case, we want the view to grow or shrink both sides equally\r\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\r\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\r\n            this.distributeEmptySpace();\r\n            this.layoutViews();\r\n        }\r\n        else {\r\n            item.size = size;\r\n            this.relayout([index], undefined);\r\n        }\r\n    };\r\n    SplitView.prototype.resizeView = function (index, size) {\r\n        var _this = this;\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        var indexes = range(this.viewItems.length).filter(function (i) { return i !== index; });\r\n        var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; }), [index]);\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        var item = this.viewItems[index];\r\n        size = Math.round(size);\r\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\r\n        item.size = size;\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n        this.state = State.Idle;\r\n    };\r\n    SplitView.prototype.distributeViewSizes = function () {\r\n        var _this = this;\r\n        var flexibleViewItems = [];\r\n        var flexibleSize = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.maximumSize - item.minimumSize > 0) {\r\n                flexibleViewItems.push(item);\r\n                flexibleSize += item.size;\r\n            }\r\n        }\r\n        var size = Math.floor(flexibleSize / flexibleViewItems.length);\r\n        for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\r\n            var item = flexibleViewItems_1[_b];\r\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\r\n        }\r\n        var indexes = range(this.viewItems.length);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n    };\r\n    SplitView.prototype.getViewSize = function (index) {\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return -1;\r\n        }\r\n        return this.viewItems[index].size;\r\n    };\r\n    SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        // Add view\r\n        var container = dom.$('.split-view-view');\r\n        if (index === this.viewItems.length) {\r\n            this.viewContainer.appendChild(container);\r\n        }\r\n        else {\r\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\r\n        }\r\n        var onChangeDisposable = view.onDidChange(function (size) { return _this.onViewChange(item, size); });\r\n        var containerDisposable = toDisposable(function () { return _this.viewContainer.removeChild(container); });\r\n        var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\r\n        var viewSize;\r\n        if (typeof size === 'number') {\r\n            viewSize = size;\r\n        }\r\n        else if (size.type === 'split') {\r\n            viewSize = this.getViewSize(size.index) / 2;\r\n        }\r\n        else if (size.type === 'invisible') {\r\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\r\n        }\r\n        else {\r\n            viewSize = view.minimumSize;\r\n        }\r\n        var item = this.orientation === 0 /* VERTICAL */\r\n            ? new VerticalViewItem(container, view, viewSize, disposable)\r\n            : new HorizontalViewItem(container, view, viewSize, disposable);\r\n        this.viewItems.splice(index, 0, item);\r\n        // Add sash\r\n        if (this.viewItems.length > 1) {\r\n            var orientation_1 = this.orientation === 0 /* VERTICAL */ ? 1 /* HORIZONTAL */ : 0 /* VERTICAL */;\r\n            var layoutProvider = this.orientation === 0 /* VERTICAL */ ? { getHorizontalSashTop: function (sash) { return _this.getSashPosition(sash); } } : { getVerticalSashLeft: function (sash) { return _this.getSashPosition(sash); } };\r\n            var sash_1 = new Sash(this.sashContainer, layoutProvider, {\r\n                orientation: orientation_1,\r\n                orthogonalStartSash: this.orthogonalStartSash,\r\n                orthogonalEndSash: this.orthogonalEndSash\r\n            });\r\n            var sashEventMapper = this.orientation === 0 /* VERTICAL */\r\n                ? function (e) { return ({ sash: sash_1, start: e.startY, current: e.currentY, alt: e.altKey }); }\r\n                : function (e) { return ({ sash: sash_1, start: e.startX, current: e.currentX, alt: e.altKey }); };\r\n            var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\r\n            var onStartDisposable = onStart(this.onSashStart, this);\r\n            var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\r\n            var onChangeDisposable_1 = onChange(this.onSashChange, this);\r\n            var onEnd = Event.map(sash_1.onDidEnd, function () { return firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; }); });\r\n            var onEndDisposable = onEnd(this.onSashEnd, this);\r\n            var onDidResetDisposable = sash_1.onDidReset(function () {\r\n                var index = firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; });\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\r\n                    return;\r\n                }\r\n                if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\r\n                    return;\r\n                }\r\n                _this._onDidSashReset.fire(index);\r\n            });\r\n            var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\r\n            var sashItem = { sash: sash_1, disposable: disposable_1 };\r\n            this.sashItems.splice(index - 1, 0, sashItem);\r\n        }\r\n        container.appendChild(view.element);\r\n        var highPriorityIndexes;\r\n        if (typeof size !== 'number' && size.type === 'split') {\r\n            highPriorityIndexes = [size.index];\r\n        }\r\n        if (!skipLayout) {\r\n            this.relayout([index], highPriorityIndexes);\r\n        }\r\n        this.state = State.Idle;\r\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\r\n            this.distributeViewSizes();\r\n        }\r\n    };\r\n    SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n        this.saveProportions();\r\n    };\r\n    SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\r\n        var _this = this;\r\n        if (sizes === void 0) { sizes = this.viewItems.map(function (i) { return i.size; }); }\r\n        if (overloadMinDelta === void 0) { overloadMinDelta = Number.NEGATIVE_INFINITY; }\r\n        if (overloadMaxDelta === void 0) { overloadMaxDelta = Number.POSITIVE_INFINITY; }\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return 0;\r\n        }\r\n        var upIndexes = range(index, -1);\r\n        var downIndexes = range(index + 1, this.viewItems.length);\r\n        if (highPriorityIndexes) {\r\n            for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\r\n                var index_1 = highPriorityIndexes_1[_i];\r\n                pushToStart(upIndexes, index_1);\r\n                pushToStart(downIndexes, index_1);\r\n            }\r\n        }\r\n        if (lowPriorityIndexes) {\r\n            for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\r\n                var index_2 = lowPriorityIndexes_1[_a];\r\n                pushToEnd(upIndexes, index_2);\r\n                pushToEnd(downIndexes, index_2);\r\n            }\r\n        }\r\n        var upItems = upIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var upSizes = upIndexes.map(function (i) { return sizes[i]; });\r\n        var downItems = downIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var downSizes = downIndexes.map(function (i) { return sizes[i]; });\r\n        var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n        var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].maximumSize - sizes[i]); }, 0);\r\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].maximumSize); }, 0);\r\n        var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\r\n        var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\r\n        var snapped = false;\r\n        if (snapBefore) {\r\n            var snapView = this.viewItems[snapBefore.index];\r\n            var visible = delta >= snapBefore.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapBefore.size);\r\n        }\r\n        if (!snapped && snapAfter) {\r\n            var snapView = this.viewItems[snapAfter.index];\r\n            var visible = delta < snapAfter.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapAfter.size);\r\n        }\r\n        if (snapped) {\r\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\r\n        }\r\n        delta = clamp(delta, minDelta, maxDelta);\r\n        for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\r\n            var item = upItems[i];\r\n            var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - upSizes[i];\r\n            deltaUp -= viewDelta;\r\n            item.size = size;\r\n        }\r\n        for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\r\n            var item = downItems[i];\r\n            var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - downSizes[i];\r\n            deltaDown += viewDelta;\r\n            item.size = size;\r\n        }\r\n        return delta;\r\n    };\r\n    SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\r\n        var _this = this;\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        var emptyDelta = this.size - contentSize;\r\n        var indexes = range(this.viewItems.length - 1, -1);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\r\n            var index = highPriorityIndexes_2[_i];\r\n            pushToStart(indexes, index);\r\n        }\r\n        for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\r\n            var index = lowPriorityIndexes_2[_a];\r\n            pushToEnd(indexes, index);\r\n        }\r\n        if (typeof lowPriorityIndex === 'number') {\r\n            pushToEnd(indexes, lowPriorityIndex);\r\n        }\r\n        for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\r\n            var item = this.viewItems[indexes[i]];\r\n            var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - item.size;\r\n            emptyDelta -= viewDelta;\r\n            item.size = size;\r\n        }\r\n    };\r\n    SplitView.prototype.layoutViews = function () {\r\n        // Save new content size\r\n        this.contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        // Layout views\r\n        var offset = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var viewItem = _a[_i];\r\n            viewItem.layout(offset, this.layoutContext);\r\n            offset += viewItem.size;\r\n        }\r\n        // Layout sashes\r\n        this.sashItems.forEach(function (item) { return item.sash.layout(); });\r\n        this.updateSashEnablement();\r\n    };\r\n    SplitView.prototype.updateSashEnablement = function () {\r\n        var previous = false;\r\n        var collapsesDown = this.viewItems.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; });\r\n        previous = false;\r\n        var expandsDown = this.viewItems.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; });\r\n        var reverseViews = __spreadArrays(this.viewItems).reverse();\r\n        previous = false;\r\n        var collapsesUp = reverseViews.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; }).reverse();\r\n        previous = false;\r\n        var expandsUp = reverseViews.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; }).reverse();\r\n        var position = 0;\r\n        for (var index = 0; index < this.sashItems.length; index++) {\r\n            var sash = this.sashItems[index].sash;\r\n            var viewItem = this.viewItems[index];\r\n            position += viewItem.size;\r\n            var min = !(collapsesDown[index] && expandsUp[index + 1]);\r\n            var max = !(expandsDown[index] && collapsesUp[index + 1]);\r\n            if (min && max) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, this.viewItems.length);\r\n                var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\r\n                var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\r\n                var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\r\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\r\n                    sash.state = 1 /* Minimum */;\r\n                }\r\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\r\n                    sash.state = 2 /* Maximum */;\r\n                }\r\n                else {\r\n                    sash.state = 0 /* Disabled */;\r\n                }\r\n            }\r\n            else if (min && !max) {\r\n                sash.state = 1 /* Minimum */;\r\n            }\r\n            else if (!min && max) {\r\n                sash.state = 2 /* Maximum */;\r\n            }\r\n            else {\r\n                sash.state = 3 /* Enabled */;\r\n            }\r\n        }\r\n    };\r\n    SplitView.prototype.getSashPosition = function (sash) {\r\n        var position = 0;\r\n        for (var i = 0; i < this.sashItems.length; i++) {\r\n            position += this.viewItems[i].size;\r\n            if (this.sashItems[i].sash === sash) {\r\n                return Math.min(position, this.contentSize - 2);\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    SplitView.prototype.findFirstSnapIndex = function (indexes) {\r\n        // visible views first\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            var viewItem = this.viewItems[index];\r\n            if (!viewItem.visible) {\r\n                continue;\r\n            }\r\n            if (viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        // then, hidden views\r\n        for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\r\n            var index = indexes_2[_a];\r\n            var viewItem = this.viewItems[index];\r\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\r\n                return undefined;\r\n            }\r\n            if (!viewItem.visible && viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    SplitView.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.viewItems.forEach(function (i) { return i.dispose(); });\r\n        this.viewItems = [];\r\n        this.sashItems.forEach(function (i) { return i.disposable.dispose(); });\r\n        this.sashItems = [];\r\n    };\r\n    return SplitView;\r\n}(Disposable));\r\nexport { SplitView };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}