{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport './media/diffEditor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport { Configuration } from '../config/configuration.js';\nimport { StableEditorScrollState } from '../core/editorState.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { DiffReview } from './diffReview.js';\nimport { EditorOptions, EditorFontLigatures } from '../../common/config/editorOptions.js';\nimport { Range } from '../../common/core/range.js';\nimport { createStringBuilder } from '../../common/core/stringBuilder.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { OverviewRulerZone } from '../../common/view/overviewZoneManager.js';\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { defaultInsertColor, defaultRemoveColor, diffBorder, diffInserted, diffInsertedOutline, diffRemoved, diffRemovedOutline, scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, getThemeTypeSelector, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\nvar VisualEditorState = /** @class */function () {\n  function VisualEditorState(_contextMenuService, _clipboardService) {\n    this._contextMenuService = _contextMenuService;\n    this._clipboardService = _clipboardService;\n    this._zones = [];\n    this.inlineDiffMargins = [];\n    this._zonesMap = {};\n    this._decorations = [];\n  }\n  VisualEditorState.prototype.getForeignViewZones = function (allViewZones) {\n    var _this = this;\n    return allViewZones.filter(function (z) {\n      return !_this._zonesMap[String(z.id)];\n    });\n  };\n  VisualEditorState.prototype.clean = function (editor) {\n    var _this = this;\n    // (1) View zones\n    if (this._zones.length > 0) {\n      editor.changeViewZones(function (viewChangeAccessor) {\n        for (var i = 0, length_1 = _this._zones.length; i < length_1; i++) {\n          viewChangeAccessor.removeZone(_this._zones[i]);\n        }\n      });\n    }\n    this._zones = [];\n    this._zonesMap = {};\n    // (2) Model decorations\n    this._decorations = editor.deltaDecorations(this._decorations, []);\n  };\n  VisualEditorState.prototype.apply = function (editor, overviewRuler, newDecorations, restoreScrollState) {\n    var _this = this;\n    var scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\n    // view zones\n    editor.changeViewZones(function (viewChangeAccessor) {\n      for (var i = 0, length_2 = _this._zones.length; i < length_2; i++) {\n        viewChangeAccessor.removeZone(_this._zones[i]);\n      }\n      for (var i = 0, length_3 = _this.inlineDiffMargins.length; i < length_3; i++) {\n        _this.inlineDiffMargins[i].dispose();\n      }\n      _this._zones = [];\n      _this._zonesMap = {};\n      _this.inlineDiffMargins = [];\n      for (var i = 0, length_4 = newDecorations.zones.length; i < length_4; i++) {\n        var viewZone = newDecorations.zones[i];\n        viewZone.suppressMouseDown = true;\n        var zoneId = viewChangeAccessor.addZone(viewZone);\n        _this._zones.push(zoneId);\n        _this._zonesMap[String(zoneId)] = true;\n        if (newDecorations.zones[i].diff && viewZone.marginDomNode && _this._clipboardService) {\n          viewZone.suppressMouseDown = false;\n          _this.inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, _this._contextMenuService, _this._clipboardService));\n        }\n      }\n    });\n    if (scrollState) {\n      scrollState.restore(editor);\n    }\n    // decorations\n    this._decorations = editor.deltaDecorations(this._decorations, newDecorations.decorations);\n    // overview ruler\n    if (overviewRuler) {\n      overviewRuler.setZones(newDecorations.overviewZones);\n    }\n  };\n  return VisualEditorState;\n}();\nvar DIFF_EDITOR_ID = 0;\nvar DiffEditorWidget = /** @class */function (_super) {\n  __extends(DiffEditorWidget, _super);\n  function DiffEditorWidget(domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\n    var _this = _super.call(this) || this;\n    _this._editorProgressService = _editorProgressService;\n    _this._onDidDispose = _this._register(new Emitter());\n    _this.onDidDispose = _this._onDidDispose.event;\n    _this._onDidUpdateDiff = _this._register(new Emitter());\n    _this.onDidUpdateDiff = _this._onDidUpdateDiff.event;\n    _this._lastOriginalWarning = null;\n    _this._lastModifiedWarning = null;\n    _this._editorWorkerService = editorWorkerService;\n    _this._codeEditorService = codeEditorService;\n    _this._contextKeyService = _this._register(contextKeyService.createScoped(domElement));\n    _this._contextKeyService.createKey('isInDiffEditor', true);\n    _this._themeService = themeService;\n    _this._notificationService = notificationService;\n    _this.id = ++DIFF_EDITOR_ID;\n    _this._state = 0 /* Idle */;\n    _this._updatingDiffProgress = null;\n    _this._domElement = domElement;\n    options = options || {};\n    // renderSideBySide\n    _this._renderSideBySide = true;\n    if (typeof options.renderSideBySide !== 'undefined') {\n      _this._renderSideBySide = options.renderSideBySide;\n    }\n    // maxComputationTime\n    _this._maxComputationTime = 5000;\n    if (typeof options.maxComputationTime !== 'undefined') {\n      _this._maxComputationTime = options.maxComputationTime;\n    }\n    // ignoreTrimWhitespace\n    _this._ignoreTrimWhitespace = true;\n    if (typeof options.ignoreTrimWhitespace !== 'undefined') {\n      _this._ignoreTrimWhitespace = options.ignoreTrimWhitespace;\n    }\n    // renderIndicators\n    _this._renderIndicators = true;\n    if (typeof options.renderIndicators !== 'undefined') {\n      _this._renderIndicators = options.renderIndicators;\n    }\n    _this._originalIsEditable = false;\n    if (typeof options.originalEditable !== 'undefined') {\n      _this._originalIsEditable = Boolean(options.originalEditable);\n    }\n    _this._updateDecorationsRunner = _this._register(new RunOnceScheduler(function () {\n      return _this._updateDecorations();\n    }, 0));\n    _this._containerDomElement = document.createElement('div');\n    _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\n    _this._containerDomElement.style.position = 'relative';\n    _this._containerDomElement.style.height = '100%';\n    _this._domElement.appendChild(_this._containerDomElement);\n    _this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\n    _this._overviewViewportDomElement.setClassName('diffViewport');\n    _this._overviewViewportDomElement.setPosition('absolute');\n    _this._overviewDomElement = document.createElement('div');\n    _this._overviewDomElement.className = 'diffOverview';\n    _this._overviewDomElement.style.position = 'absolute';\n    _this._overviewDomElement.appendChild(_this._overviewViewportDomElement.domNode);\n    _this._register(dom.addStandardDisposableListener(_this._overviewDomElement, 'mousedown', function (e) {\n      _this.modifiedEditor.delegateVerticalScrollbarMouseDown(e);\n    }));\n    _this._containerDomElement.appendChild(_this._overviewDomElement);\n    // Create left side\n    _this._originalDomNode = document.createElement('div');\n    _this._originalDomNode.className = 'editor original';\n    _this._originalDomNode.style.position = 'absolute';\n    _this._originalDomNode.style.height = '100%';\n    _this._containerDomElement.appendChild(_this._originalDomNode);\n    // Create right side\n    _this._modifiedDomNode = document.createElement('div');\n    _this._modifiedDomNode.className = 'editor modified';\n    _this._modifiedDomNode.style.position = 'absolute';\n    _this._modifiedDomNode.style.height = '100%';\n    _this._containerDomElement.appendChild(_this._modifiedDomNode);\n    _this._beginUpdateDecorationsTimeout = -1;\n    _this._currentlyChangingViewZones = false;\n    _this._diffComputationToken = 0;\n    _this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\n    _this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\n    _this._isVisible = true;\n    _this._isHandlingScrollEvent = false;\n    _this._elementSizeObserver = _this._register(new ElementSizeObserver(_this._containerDomElement, undefined, function () {\n      return _this._onDidContainerSizeChanged();\n    }));\n    if (options.automaticLayout) {\n      _this._elementSizeObserver.startObserving();\n    }\n    _this._diffComputationResult = null;\n    var leftContextKeyService = _this._contextKeyService.createScoped();\n    leftContextKeyService.createKey('isInDiffLeftEditor', true);\n    var leftServices = new ServiceCollection();\n    leftServices.set(IContextKeyService, leftContextKeyService);\n    var leftScopedInstantiationService = instantiationService.createChild(leftServices);\n    var rightContextKeyService = _this._contextKeyService.createScoped();\n    rightContextKeyService.createKey('isInDiffRightEditor', true);\n    var rightServices = new ServiceCollection();\n    rightServices.set(IContextKeyService, rightContextKeyService);\n    var rightScopedInstantiationService = instantiationService.createChild(rightServices);\n    _this.originalEditor = _this._createLeftHandSideEditor(options, leftScopedInstantiationService);\n    _this.modifiedEditor = _this._createRightHandSideEditor(options, rightScopedInstantiationService);\n    _this._originalOverviewRuler = null;\n    _this._modifiedOverviewRuler = null;\n    _this._reviewPane = new DiffReview(_this);\n    _this._containerDomElement.appendChild(_this._reviewPane.domNode.domNode);\n    _this._containerDomElement.appendChild(_this._reviewPane.shadow.domNode);\n    _this._containerDomElement.appendChild(_this._reviewPane.actionBarContainer.domNode);\n    // enableSplitViewResizing\n    _this._enableSplitViewResizing = true;\n    if (typeof options.enableSplitViewResizing !== 'undefined') {\n      _this._enableSplitViewResizing = options.enableSplitViewResizing;\n    }\n    if (_this._renderSideBySide) {\n      _this._setStrategy(new DiffEditorWidgetSideBySide(_this._createDataSource(), _this._enableSplitViewResizing));\n    } else {\n      _this._setStrategy(new DiffEditorWidgetInline(_this._createDataSource(), _this._enableSplitViewResizing));\n    }\n    _this._register(themeService.onThemeChange(function (t) {\n      if (_this._strategy && _this._strategy.applyColors(t)) {\n        _this._updateDecorationsRunner.schedule();\n      }\n      _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\n    }));\n    var contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n    for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\n      var desc = contributions_1[_i];\n      try {\n        _this._register(instantiationService.createInstance(desc.ctor, _this));\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    _this._codeEditorService.addDiffEditor(_this);\n    return _this;\n  }\n  DiffEditorWidget.prototype._setState = function (newState) {\n    if (this._state === newState) {\n      return;\n    }\n    this._state = newState;\n    if (this._updatingDiffProgress) {\n      this._updatingDiffProgress.done();\n      this._updatingDiffProgress = null;\n    }\n    if (this._state === 1 /* ComputingDiff */) {\n      this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\n    }\n  };\n  DiffEditorWidget.prototype.hasWidgetFocus = function () {\n    return dom.isAncestor(document.activeElement, this._domElement);\n  };\n  DiffEditorWidget.prototype.diffReviewNext = function () {\n    this._reviewPane.next();\n  };\n  DiffEditorWidget.prototype.diffReviewPrev = function () {\n    this._reviewPane.prev();\n  };\n  DiffEditorWidget._getClassName = function (theme, renderSideBySide) {\n    var result = 'monaco-diff-editor monaco-editor-background ';\n    if (renderSideBySide) {\n      result += 'side-by-side ';\n    }\n    result += getThemeTypeSelector(theme.type);\n    return result;\n  };\n  DiffEditorWidget.prototype._recreateOverviewRulers = function () {\n    if (this._originalOverviewRuler) {\n      this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n      this._originalOverviewRuler.dispose();\n    }\n    if (this.originalEditor.hasModel()) {\n      this._originalOverviewRuler = this.originalEditor.createOverviewRuler('original diffOverviewRuler');\n      this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\n    }\n    if (this._modifiedOverviewRuler) {\n      this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n      this._modifiedOverviewRuler.dispose();\n    }\n    if (this.modifiedEditor.hasModel()) {\n      this._modifiedOverviewRuler = this.modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\n      this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\n    }\n    this._layoutOverviewRulers();\n  };\n  DiffEditorWidget.prototype._createLeftHandSideEditor = function (options, instantiationService) {\n    var _this = this;\n    var editor = this._createInnerEditor(instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options, this._originalIsEditable));\n    this._register(editor.onDidScrollChange(function (e) {\n      if (_this._isHandlingScrollEvent) {\n        return;\n      }\n      if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n        return;\n      }\n      _this._isHandlingScrollEvent = true;\n      _this.modifiedEditor.setScrollPosition({\n        scrollLeft: e.scrollLeft,\n        scrollTop: e.scrollTop\n      });\n      _this._isHandlingScrollEvent = false;\n      _this._layoutOverviewViewport();\n    }));\n    this._register(editor.onDidChangeViewZones(function () {\n      _this._onViewZonesChanged();\n    }));\n    this._register(editor.onDidChangeModelContent(function () {\n      if (_this._isVisible) {\n        _this._beginUpdateDecorationsSoon();\n      }\n    }));\n    return editor;\n  };\n  DiffEditorWidget.prototype._createRightHandSideEditor = function (options, instantiationService) {\n    var _this = this;\n    var editor = this._createInnerEditor(instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options));\n    this._register(editor.onDidScrollChange(function (e) {\n      if (_this._isHandlingScrollEvent) {\n        return;\n      }\n      if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n        return;\n      }\n      _this._isHandlingScrollEvent = true;\n      _this.originalEditor.setScrollPosition({\n        scrollLeft: e.scrollLeft,\n        scrollTop: e.scrollTop\n      });\n      _this._isHandlingScrollEvent = false;\n      _this._layoutOverviewViewport();\n    }));\n    this._register(editor.onDidChangeViewZones(function () {\n      _this._onViewZonesChanged();\n    }));\n    this._register(editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(34 /* fontInfo */) && editor.getModel()) {\n        _this._onViewZonesChanged();\n      }\n    }));\n    this._register(editor.onDidChangeModelContent(function () {\n      if (_this._isVisible) {\n        _this._beginUpdateDecorationsSoon();\n      }\n    }));\n    this._register(editor.onDidChangeModelOptions(function (e) {\n      if (e.tabSize) {\n        _this._updateDecorationsRunner.schedule();\n      }\n    }));\n    return editor;\n  };\n  DiffEditorWidget.prototype._createInnerEditor = function (instantiationService, container, options) {\n    return instantiationService.createInstance(CodeEditorWidget, container, options, {});\n  };\n  DiffEditorWidget.prototype.dispose = function () {\n    this._codeEditorService.removeDiffEditor(this);\n    if (this._beginUpdateDecorationsTimeout !== -1) {\n      window.clearTimeout(this._beginUpdateDecorationsTimeout);\n      this._beginUpdateDecorationsTimeout = -1;\n    }\n    this._cleanViewZonesAndDecorations();\n    if (this._originalOverviewRuler) {\n      this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n      this._originalOverviewRuler.dispose();\n    }\n    if (this._modifiedOverviewRuler) {\n      this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n      this._modifiedOverviewRuler.dispose();\n    }\n    this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\n    this._containerDomElement.removeChild(this._overviewDomElement);\n    this._containerDomElement.removeChild(this._originalDomNode);\n    this.originalEditor.dispose();\n    this._containerDomElement.removeChild(this._modifiedDomNode);\n    this.modifiedEditor.dispose();\n    this._strategy.dispose();\n    this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\n    this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\n    this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\n    this._reviewPane.dispose();\n    this._domElement.removeChild(this._containerDomElement);\n    this._onDidDispose.fire();\n    _super.prototype.dispose.call(this);\n  };\n  //------------ begin IDiffEditor methods\n  DiffEditorWidget.prototype.getId = function () {\n    return this.getEditorType() + ':' + this.id;\n  };\n  DiffEditorWidget.prototype.getEditorType = function () {\n    return editorCommon.EditorType.IDiffEditor;\n  };\n  DiffEditorWidget.prototype.getLineChanges = function () {\n    if (!this._diffComputationResult) {\n      return null;\n    }\n    return this._diffComputationResult.changes;\n  };\n  DiffEditorWidget.prototype.getOriginalEditor = function () {\n    return this.originalEditor;\n  };\n  DiffEditorWidget.prototype.getModifiedEditor = function () {\n    return this.modifiedEditor;\n  };\n  DiffEditorWidget.prototype.updateOptions = function (newOptions) {\n    // Handle side by side\n    var renderSideBySideChanged = false;\n    if (typeof newOptions.renderSideBySide !== 'undefined') {\n      if (this._renderSideBySide !== newOptions.renderSideBySide) {\n        this._renderSideBySide = newOptions.renderSideBySide;\n        renderSideBySideChanged = true;\n      }\n    }\n    if (typeof newOptions.maxComputationTime !== 'undefined') {\n      this._maxComputationTime = newOptions.maxComputationTime;\n      if (this._isVisible) {\n        this._beginUpdateDecorationsSoon();\n      }\n    }\n    var beginUpdateDecorations = false;\n    if (typeof newOptions.ignoreTrimWhitespace !== 'undefined') {\n      if (this._ignoreTrimWhitespace !== newOptions.ignoreTrimWhitespace) {\n        this._ignoreTrimWhitespace = newOptions.ignoreTrimWhitespace;\n        // Begin comparing\n        beginUpdateDecorations = true;\n      }\n    }\n    if (typeof newOptions.renderIndicators !== 'undefined') {\n      if (this._renderIndicators !== newOptions.renderIndicators) {\n        this._renderIndicators = newOptions.renderIndicators;\n        beginUpdateDecorations = true;\n      }\n    }\n    if (beginUpdateDecorations) {\n      this._beginUpdateDecorations();\n    }\n    if (typeof newOptions.originalEditable !== 'undefined') {\n      this._originalIsEditable = Boolean(newOptions.originalEditable);\n    }\n    this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(newOptions));\n    this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(newOptions, this._originalIsEditable));\n    // enableSplitViewResizing\n    if (typeof newOptions.enableSplitViewResizing !== 'undefined') {\n      this._enableSplitViewResizing = newOptions.enableSplitViewResizing;\n    }\n    this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing);\n    // renderSideBySide\n    if (renderSideBySideChanged) {\n      if (this._renderSideBySide) {\n        this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\n      } else {\n        this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\n      }\n      // Update class name\n      this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getTheme(), this._renderSideBySide);\n    }\n  };\n  DiffEditorWidget.prototype.getModel = function () {\n    return {\n      original: this.originalEditor.getModel(),\n      modified: this.modifiedEditor.getModel()\n    };\n  };\n  DiffEditorWidget.prototype.setModel = function (model) {\n    // Guard us against partial null model\n    if (model && (!model.original || !model.modified)) {\n      throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\n    }\n    // Remove all view zones & decorations\n    this._cleanViewZonesAndDecorations();\n    // Update code editor models\n    this.originalEditor.setModel(model ? model.original : null);\n    this.modifiedEditor.setModel(model ? model.modified : null);\n    this._updateDecorationsRunner.cancel();\n    // this.originalEditor.onDidChangeModelOptions\n    if (model) {\n      this.originalEditor.setScrollTop(0);\n      this.modifiedEditor.setScrollTop(0);\n    }\n    // Disable any diff computations that will come in\n    this._diffComputationResult = null;\n    this._diffComputationToken++;\n    this._setState(0 /* Idle */);\n    if (model) {\n      this._recreateOverviewRulers();\n      // Begin comparing\n      this._beginUpdateDecorations();\n    }\n    this._layoutOverviewViewport();\n  };\n  DiffEditorWidget.prototype.getDomNode = function () {\n    return this._domElement;\n  };\n  DiffEditorWidget.prototype.getVisibleColumnFromPosition = function (position) {\n    return this.modifiedEditor.getVisibleColumnFromPosition(position);\n  };\n  DiffEditorWidget.prototype.getPosition = function () {\n    return this.modifiedEditor.getPosition();\n  };\n  DiffEditorWidget.prototype.setPosition = function (position) {\n    this.modifiedEditor.setPosition(position);\n  };\n  DiffEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLine(lineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLineInCenter(lineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealPosition = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealPosition(position, scrollType);\n  };\n  DiffEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealPositionInCenter(position, scrollType);\n  };\n  DiffEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n  };\n  DiffEditorWidget.prototype.getSelection = function () {\n    return this.modifiedEditor.getSelection();\n  };\n  DiffEditorWidget.prototype.getSelections = function () {\n    return this.modifiedEditor.getSelections();\n  };\n  DiffEditorWidget.prototype.setSelection = function (something) {\n    this.modifiedEditor.setSelection(something);\n  };\n  DiffEditorWidget.prototype.setSelections = function (ranges) {\n    this.modifiedEditor.setSelections(ranges);\n  };\n  DiffEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n  };\n  DiffEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    if (revealVerticalInCenter === void 0) {\n      revealVerticalInCenter = false;\n    }\n    if (revealHorizontal === void 0) {\n      revealHorizontal = true;\n    }\n    this.modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n  };\n  DiffEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealRangeInCenter(range, scrollType);\n  };\n  DiffEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n  };\n  DiffEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this.modifiedEditor.revealRangeAtTop(range, scrollType);\n  };\n  DiffEditorWidget.prototype.getSupportedActions = function () {\n    return this.modifiedEditor.getSupportedActions();\n  };\n  DiffEditorWidget.prototype.saveViewState = function () {\n    var originalViewState = this.originalEditor.saveViewState();\n    var modifiedViewState = this.modifiedEditor.saveViewState();\n    return {\n      original: originalViewState,\n      modified: modifiedViewState\n    };\n  };\n  DiffEditorWidget.prototype.restoreViewState = function (s) {\n    if (s.original && s.modified) {\n      var diffEditorState = s;\n      this.originalEditor.restoreViewState(diffEditorState.original);\n      this.modifiedEditor.restoreViewState(diffEditorState.modified);\n    }\n  };\n  DiffEditorWidget.prototype.layout = function (dimension) {\n    this._elementSizeObserver.observe(dimension);\n  };\n  DiffEditorWidget.prototype.focus = function () {\n    this.modifiedEditor.focus();\n  };\n  DiffEditorWidget.prototype.hasTextFocus = function () {\n    return this.originalEditor.hasTextFocus() || this.modifiedEditor.hasTextFocus();\n  };\n  DiffEditorWidget.prototype.trigger = function (source, handlerId, payload) {\n    this.modifiedEditor.trigger(source, handlerId, payload);\n  };\n  DiffEditorWidget.prototype.changeDecorations = function (callback) {\n    return this.modifiedEditor.changeDecorations(callback);\n  };\n  //------------ end IDiffEditor methods\n  //------------ begin layouting methods\n  DiffEditorWidget.prototype._onDidContainerSizeChanged = function () {\n    this._doLayout();\n  };\n  DiffEditorWidget.prototype._getReviewHeight = function () {\n    return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\n  };\n  DiffEditorWidget.prototype._layoutOverviewRulers = function () {\n    if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\n      return;\n    }\n    var height = this._elementSizeObserver.getHeight();\n    var reviewHeight = this._getReviewHeight();\n    var freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n    var layoutInfo = this.modifiedEditor.getLayoutInfo();\n    if (layoutInfo) {\n      this._originalOverviewRuler.setLayout({\n        top: 0,\n        width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n        right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n        height: height - reviewHeight\n      });\n      this._modifiedOverviewRuler.setLayout({\n        top: 0,\n        right: 0,\n        width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n        height: height - reviewHeight\n      });\n    }\n  };\n  //------------ end layouting methods\n  DiffEditorWidget.prototype._onViewZonesChanged = function () {\n    if (this._currentlyChangingViewZones) {\n      return;\n    }\n    this._updateDecorationsRunner.schedule();\n  };\n  DiffEditorWidget.prototype._beginUpdateDecorationsSoon = function () {\n    var _this = this;\n    // Clear previous timeout if necessary\n    if (this._beginUpdateDecorationsTimeout !== -1) {\n      window.clearTimeout(this._beginUpdateDecorationsTimeout);\n      this._beginUpdateDecorationsTimeout = -1;\n    }\n    this._beginUpdateDecorationsTimeout = window.setTimeout(function () {\n      return _this._beginUpdateDecorations();\n    }, DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\n  };\n  DiffEditorWidget._equals = function (a, b) {\n    if (!a && !b) {\n      return true;\n    }\n    if (!a || !b) {\n      return false;\n    }\n    return a.toString() === b.toString();\n  };\n  DiffEditorWidget.prototype._beginUpdateDecorations = function () {\n    var _this = this;\n    this._beginUpdateDecorationsTimeout = -1;\n    var currentOriginalModel = this.originalEditor.getModel();\n    var currentModifiedModel = this.modifiedEditor.getModel();\n    if (!currentOriginalModel || !currentModifiedModel) {\n      return;\n    }\n    // Prevent old diff requests to come if a new request has been initiated\n    // The best method would be to call cancel on the Promise, but this is not\n    // yet supported, so using tokens for now.\n    this._diffComputationToken++;\n    var currentToken = this._diffComputationToken;\n    this._setState(1 /* ComputingDiff */);\n    if (!this._editorWorkerService.canComputeDiff(currentOriginalModel.uri, currentModifiedModel.uri)) {\n      if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning) || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\n        this._lastOriginalWarning = currentOriginalModel.uri;\n        this._lastModifiedWarning = currentModifiedModel.uri;\n        this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\n      }\n      return;\n    }\n    this._editorWorkerService.computeDiff(currentOriginalModel.uri, currentModifiedModel.uri, this._ignoreTrimWhitespace, this._maxComputationTime).then(function (result) {\n      if (currentToken === _this._diffComputationToken && currentOriginalModel === _this.originalEditor.getModel() && currentModifiedModel === _this.modifiedEditor.getModel()) {\n        _this._setState(2 /* DiffComputed */);\n        _this._diffComputationResult = result;\n        _this._updateDecorationsRunner.schedule();\n        _this._onDidUpdateDiff.fire();\n      }\n    }, function (error) {\n      if (currentToken === _this._diffComputationToken && currentOriginalModel === _this.originalEditor.getModel() && currentModifiedModel === _this.modifiedEditor.getModel()) {\n        _this._setState(2 /* DiffComputed */);\n        _this._diffComputationResult = null;\n        _this._updateDecorationsRunner.schedule();\n      }\n    });\n  };\n  DiffEditorWidget.prototype._cleanViewZonesAndDecorations = function () {\n    this._originalEditorState.clean(this.originalEditor);\n    this._modifiedEditorState.clean(this.modifiedEditor);\n  };\n  DiffEditorWidget.prototype._updateDecorations = function () {\n    if (!this.originalEditor.getModel() || !this.modifiedEditor.getModel() || !this._originalOverviewRuler || !this._modifiedOverviewRuler) {\n      return;\n    }\n    var lineChanges = this._diffComputationResult ? this._diffComputationResult.changes : [];\n    var foreignOriginal = this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces());\n    var foreignModified = this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces());\n    var diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._ignoreTrimWhitespace, this._renderIndicators, foreignOriginal, foreignModified, this.originalEditor, this.modifiedEditor);\n    try {\n      this._currentlyChangingViewZones = true;\n      this._originalEditorState.apply(this.originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\n      this._modifiedEditorState.apply(this.modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\n    } finally {\n      this._currentlyChangingViewZones = false;\n    }\n  };\n  DiffEditorWidget.prototype._adjustOptionsForSubEditor = function (options) {\n    var clonedOptions = objects.deepClone(options || {});\n    clonedOptions.inDiffEditor = true;\n    clonedOptions.wordWrap = 'off';\n    clonedOptions.wordWrapMinified = false;\n    clonedOptions.automaticLayout = false;\n    clonedOptions.scrollbar = clonedOptions.scrollbar || {};\n    clonedOptions.scrollbar.vertical = 'visible';\n    clonedOptions.folding = false;\n    clonedOptions.codeLens = false;\n    clonedOptions.fixedOverflowWidgets = true;\n    // clonedOptions.lineDecorationsWidth = '2ch';\n    if (!clonedOptions.minimap) {\n      clonedOptions.minimap = {};\n    }\n    clonedOptions.minimap.enabled = false;\n    return clonedOptions;\n  };\n  DiffEditorWidget.prototype._adjustOptionsForLeftHandSide = function (options, isEditable) {\n    var result = this._adjustOptionsForSubEditor(options);\n    result.readOnly = !isEditable;\n    result.extraEditorClassName = 'original-in-monaco-diff-editor';\n    return result;\n  };\n  DiffEditorWidget.prototype._adjustOptionsForRightHandSide = function (options) {\n    var result = this._adjustOptionsForSubEditor(options);\n    result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n    result.scrollbar.verticalHasArrows = false;\n    result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n    return result;\n  };\n  DiffEditorWidget.prototype.doLayout = function () {\n    this._elementSizeObserver.observe();\n    this._doLayout();\n  };\n  DiffEditorWidget.prototype._doLayout = function () {\n    var width = this._elementSizeObserver.getWidth();\n    var height = this._elementSizeObserver.getHeight();\n    var reviewHeight = this._getReviewHeight();\n    var splitPoint = this._strategy.layout();\n    this._originalDomNode.style.width = splitPoint + 'px';\n    this._originalDomNode.style.left = '0px';\n    this._modifiedDomNode.style.width = width - splitPoint + 'px';\n    this._modifiedDomNode.style.left = splitPoint + 'px';\n    this._overviewDomElement.style.top = '0px';\n    this._overviewDomElement.style.height = height - reviewHeight + 'px';\n    this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\n    this._overviewDomElement.style.left = width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\n    this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\n    this._overviewViewportDomElement.setHeight(30);\n    this.originalEditor.layout({\n      width: splitPoint,\n      height: height - reviewHeight\n    });\n    this.modifiedEditor.layout({\n      width: width - splitPoint - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH,\n      height: height - reviewHeight\n    });\n    if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\n      this._layoutOverviewRulers();\n    }\n    this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\n    this._layoutOverviewViewport();\n  };\n  DiffEditorWidget.prototype._layoutOverviewViewport = function () {\n    var layout = this._computeOverviewViewport();\n    if (!layout) {\n      this._overviewViewportDomElement.setTop(0);\n      this._overviewViewportDomElement.setHeight(0);\n    } else {\n      this._overviewViewportDomElement.setTop(layout.top);\n      this._overviewViewportDomElement.setHeight(layout.height);\n    }\n  };\n  DiffEditorWidget.prototype._computeOverviewViewport = function () {\n    var layoutInfo = this.modifiedEditor.getLayoutInfo();\n    if (!layoutInfo) {\n      return null;\n    }\n    var scrollTop = this.modifiedEditor.getScrollTop();\n    var scrollHeight = this.modifiedEditor.getScrollHeight();\n    var computedAvailableSize = Math.max(0, layoutInfo.height);\n    var computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\n    var computedRatio = scrollHeight > 0 ? computedRepresentableSize / scrollHeight : 0;\n    var computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\n    var computedSliderPosition = Math.floor(scrollTop * computedRatio);\n    return {\n      height: computedSliderSize,\n      top: computedSliderPosition\n    };\n  };\n  DiffEditorWidget.prototype._createDataSource = function () {\n    var _this = this;\n    return {\n      getWidth: function getWidth() {\n        return _this._elementSizeObserver.getWidth();\n      },\n      getHeight: function getHeight() {\n        return _this._elementSizeObserver.getHeight() - _this._getReviewHeight();\n      },\n      getContainerDomNode: function getContainerDomNode() {\n        return _this._containerDomElement;\n      },\n      relayoutEditors: function relayoutEditors() {\n        _this._doLayout();\n      },\n      getOriginalEditor: function getOriginalEditor() {\n        return _this.originalEditor;\n      },\n      getModifiedEditor: function getModifiedEditor() {\n        return _this.modifiedEditor;\n      }\n    };\n  };\n  DiffEditorWidget.prototype._setStrategy = function (newStrategy) {\n    if (this._strategy) {\n      this._strategy.dispose();\n    }\n    this._strategy = newStrategy;\n    newStrategy.applyColors(this._themeService.getTheme());\n    if (this._diffComputationResult) {\n      this._updateDecorations();\n    }\n    // Just do a layout, the strategy might need it\n    this._doLayout();\n  };\n  DiffEditorWidget.prototype._getLineChangeAtOrBeforeLineNumber = function (lineNumber, startLineNumberExtractor) {\n    var lineChanges = this._diffComputationResult ? this._diffComputationResult.changes : [];\n    if (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\n      // There are no changes or `lineNumber` is before the first change\n      return null;\n    }\n    var min = 0,\n      max = lineChanges.length - 1;\n    while (min < max) {\n      var mid = Math.floor((min + max) / 2);\n      var midStart = startLineNumberExtractor(lineChanges[mid]);\n      var midEnd = mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n      if (lineNumber < midStart) {\n        max = mid - 1;\n      } else if (lineNumber >= midEnd) {\n        min = mid + 1;\n      } else {\n        // HIT!\n        min = mid;\n        max = mid;\n      }\n    }\n    return lineChanges[min];\n  };\n  DiffEditorWidget.prototype._getEquivalentLineForOriginalLineNumber = function (lineNumber) {\n    var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) {\n      return lineChange.originalStartLineNumber;\n    });\n    if (!lineChange) {\n      return lineNumber;\n    }\n    var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n    var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n    var lineChangeOriginalLength = lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1 : 0;\n    var lineChangeModifiedLength = lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1 : 0;\n    var delta = lineNumber - originalEquivalentLineNumber;\n    if (delta <= lineChangeOriginalLength) {\n      return modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\n    }\n    return modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\n  };\n  DiffEditorWidget.prototype._getEquivalentLineForModifiedLineNumber = function (lineNumber) {\n    var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) {\n      return lineChange.modifiedStartLineNumber;\n    });\n    if (!lineChange) {\n      return lineNumber;\n    }\n    var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n    var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n    var lineChangeOriginalLength = lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1 : 0;\n    var lineChangeModifiedLength = lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1 : 0;\n    var delta = lineNumber - modifiedEquivalentLineNumber;\n    if (delta <= lineChangeModifiedLength) {\n      return originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\n    }\n    return originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\n  };\n  DiffEditorWidget.prototype.getDiffLineInformationForOriginal = function (lineNumber) {\n    if (!this._diffComputationResult) {\n      // Cannot answer that which I don't know\n      return null;\n    }\n    return {\n      equivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\n    };\n  };\n  DiffEditorWidget.prototype.getDiffLineInformationForModified = function (lineNumber) {\n    if (!this._diffComputationResult) {\n      // Cannot answer that which I don't know\n      return null;\n    }\n    return {\n      equivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\n    };\n  };\n  DiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\n  DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\n  DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\n  DiffEditorWidget = __decorate([__param(3, IEditorWorkerService), __param(4, IContextKeyService), __param(5, IInstantiationService), __param(6, ICodeEditorService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IContextMenuService), __param(10, IEditorProgressService)], DiffEditorWidget);\n  return DiffEditorWidget;\n}(Disposable);\nexport { DiffEditorWidget };\nvar DiffEditorWidgetStyle = /** @class */function (_super) {\n  __extends(DiffEditorWidgetStyle, _super);\n  function DiffEditorWidgetStyle(dataSource) {\n    var _this = _super.call(this) || this;\n    _this._dataSource = dataSource;\n    _this._insertColor = null;\n    _this._removeColor = null;\n    return _this;\n  }\n  DiffEditorWidgetStyle.prototype.applyColors = function (theme) {\n    var newInsertColor = (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n    var newRemoveColor = (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n    var hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\n    this._insertColor = newInsertColor;\n    this._removeColor = newRemoveColor;\n    return hasChanges;\n  };\n  DiffEditorWidgetStyle.prototype.getEditorsDiffDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor) {\n    // Get view zones\n    modifiedWhitespaces = modifiedWhitespaces.sort(function (a, b) {\n      return a.afterLineNumber - b.afterLineNumber;\n    });\n    originalWhitespaces = originalWhitespaces.sort(function (a, b) {\n      return a.afterLineNumber - b.afterLineNumber;\n    });\n    var zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor, renderIndicators);\n    // Get decorations & overview ruler zones\n    var originalDecorations = this._getOriginalEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\n    var modifiedDecorations = this._getModifiedEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\n    return {\n      original: {\n        decorations: originalDecorations.decorations,\n        overviewZones: originalDecorations.overviewZones,\n        zones: zones.original\n      },\n      modified: {\n        decorations: modifiedDecorations.decorations,\n        overviewZones: modifiedDecorations.overviewZones,\n        zones: zones.modified\n      }\n    };\n  };\n  return DiffEditorWidgetStyle;\n}(Disposable);\nvar ForeignViewZonesIterator = /** @class */function () {\n  function ForeignViewZonesIterator(source) {\n    this._source = source;\n    this._index = -1;\n    this.current = null;\n    this.advance();\n  }\n  ForeignViewZonesIterator.prototype.advance = function () {\n    this._index++;\n    if (this._index < this._source.length) {\n      this.current = this._source[this._index];\n    } else {\n      this.current = null;\n    }\n  };\n  return ForeignViewZonesIterator;\n}();\nvar ViewZonesComputer = /** @class */function () {\n  function ViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\n    this.lineChanges = lineChanges;\n    this.originalForeignVZ = originalForeignVZ;\n    this.originalLineHeight = originalLineHeight;\n    this.modifiedForeignVZ = modifiedForeignVZ;\n    this.modifiedLineHeight = modifiedLineHeight;\n  }\n  ViewZonesComputer.prototype.getViewZones = function () {\n    var result = {\n      original: [],\n      modified: []\n    };\n    var lineChangeModifiedLength = 0;\n    var lineChangeOriginalLength = 0;\n    var originalEquivalentLineNumber = 0;\n    var modifiedEquivalentLineNumber = 0;\n    var originalEndEquivalentLineNumber = 0;\n    var modifiedEndEquivalentLineNumber = 0;\n    var sortMyViewZones = function sortMyViewZones(a, b) {\n      return a.afterLineNumber - b.afterLineNumber;\n    };\n    var addAndCombineIfPossible = function addAndCombineIfPossible(destination, item) {\n      if (item.domNode === null && destination.length > 0) {\n        var lastItem = destination[destination.length - 1];\n        if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\n          lastItem.heightInLines += item.heightInLines;\n          return;\n        }\n      }\n      destination.push(item);\n    };\n    var modifiedForeignVZ = new ForeignViewZonesIterator(this.modifiedForeignVZ);\n    var originalForeignVZ = new ForeignViewZonesIterator(this.originalForeignVZ);\n    // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\n    for (var i = 0, length_5 = this.lineChanges.length; i <= length_5; i++) {\n      var lineChange = i < length_5 ? this.lineChanges[i] : null;\n      if (lineChange !== null) {\n        originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n        modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n        lineChangeOriginalLength = lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1 : 0;\n        lineChangeModifiedLength = lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1 : 0;\n        originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n        modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n      } else {\n        // Increase to very large value to get the producing tests of foreign view zones running\n        originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\n        modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\n        originalEndEquivalentLineNumber = originalEquivalentLineNumber;\n        modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\n      }\n      // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\n      var stepOriginal = [];\n      var stepModified = [];\n      // ---------------------------- PRODUCE VIEW ZONES\n      // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\n      while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\n        var viewZoneLineNumber = void 0;\n        if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\n          viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\n        } else {\n          viewZoneLineNumber = originalEndEquivalentLineNumber;\n        }\n        var marginDomNode = null;\n        if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\n          marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\n        }\n        stepOriginal.push({\n          afterLineNumber: viewZoneLineNumber,\n          heightInLines: modifiedForeignVZ.current.height / this.modifiedLineHeight,\n          domNode: null,\n          marginDomNode: marginDomNode\n        });\n        modifiedForeignVZ.advance();\n      }\n      // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\n      while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\n        var viewZoneLineNumber = void 0;\n        if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\n          viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\n        } else {\n          viewZoneLineNumber = modifiedEndEquivalentLineNumber;\n        }\n        stepModified.push({\n          afterLineNumber: viewZoneLineNumber,\n          heightInLines: originalForeignVZ.current.height / this.originalLineHeight,\n          domNode: null\n        });\n        originalForeignVZ.advance();\n      }\n      if (lineChange !== null && isChangeOrInsert(lineChange)) {\n        var r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n        if (r) {\n          stepOriginal.push(r);\n        }\n      }\n      if (lineChange !== null && isChangeOrDelete(lineChange)) {\n        var r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n        if (r) {\n          stepModified.push(r);\n        }\n      }\n      // ---------------------------- END PRODUCE VIEW ZONES\n      // ---------------------------- EMIT MINIMAL VIEW ZONES\n      // [CANCEL & EMIT] Try to cancel view zones out\n      var stepOriginalIndex = 0;\n      var stepModifiedIndex = 0;\n      stepOriginal = stepOriginal.sort(sortMyViewZones);\n      stepModified = stepModified.sort(sortMyViewZones);\n      while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\n        var original = stepOriginal[stepOriginalIndex];\n        var modified = stepModified[stepModifiedIndex];\n        var originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\n        var modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\n        if (originalDelta < modifiedDelta) {\n          addAndCombineIfPossible(result.original, original);\n          stepOriginalIndex++;\n        } else if (modifiedDelta < originalDelta) {\n          addAndCombineIfPossible(result.modified, modified);\n          stepModifiedIndex++;\n        } else if (original.shouldNotShrink) {\n          addAndCombineIfPossible(result.original, original);\n          stepOriginalIndex++;\n        } else if (modified.shouldNotShrink) {\n          addAndCombineIfPossible(result.modified, modified);\n          stepModifiedIndex++;\n        } else {\n          if (original.heightInLines >= modified.heightInLines) {\n            // modified view zone gets removed\n            original.heightInLines -= modified.heightInLines;\n            stepModifiedIndex++;\n          } else {\n            // original view zone gets removed\n            modified.heightInLines -= original.heightInLines;\n            stepOriginalIndex++;\n          }\n        }\n      }\n      // [EMIT] Remaining original view zones\n      while (stepOriginalIndex < stepOriginal.length) {\n        addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\n        stepOriginalIndex++;\n      }\n      // [EMIT] Remaining modified view zones\n      while (stepModifiedIndex < stepModified.length) {\n        addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\n        stepModifiedIndex++;\n      }\n      // ---------------------------- END EMIT MINIMAL VIEW ZONES\n    }\n\n    return {\n      original: ViewZonesComputer._ensureDomNodes(result.original),\n      modified: ViewZonesComputer._ensureDomNodes(result.modified)\n    };\n  };\n  ViewZonesComputer._ensureDomNodes = function (zones) {\n    return zones.map(function (z) {\n      if (!z.domNode) {\n        z.domNode = createFakeLinesDiv();\n      }\n      return z;\n    });\n  };\n  return ViewZonesComputer;\n}();\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\n  return {\n    range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n    options: options\n  };\n}\nvar DECORATIONS = {\n  charDelete: ModelDecorationOptions.register({\n    className: 'char-delete'\n  }),\n  charDeleteWholeLine: ModelDecorationOptions.register({\n    className: 'char-delete',\n    isWholeLine: true\n  }),\n  charInsert: ModelDecorationOptions.register({\n    className: 'char-insert'\n  }),\n  charInsertWholeLine: ModelDecorationOptions.register({\n    className: 'char-insert',\n    isWholeLine: true\n  }),\n  lineInsert: ModelDecorationOptions.register({\n    className: 'line-insert',\n    marginClassName: 'line-insert',\n    isWholeLine: true\n  }),\n  lineInsertWithSign: ModelDecorationOptions.register({\n    className: 'line-insert',\n    linesDecorationsClassName: 'insert-sign codicon codicon-add',\n    marginClassName: 'line-insert',\n    isWholeLine: true\n  }),\n  lineDelete: ModelDecorationOptions.register({\n    className: 'line-delete',\n    marginClassName: 'line-delete',\n    isWholeLine: true\n  }),\n  lineDeleteWithSign: ModelDecorationOptions.register({\n    className: 'line-delete',\n    linesDecorationsClassName: 'delete-sign codicon codicon-remove',\n    marginClassName: 'line-delete',\n    isWholeLine: true\n  }),\n  lineDeleteMargin: ModelDecorationOptions.register({\n    marginClassName: 'line-delete'\n  })\n};\nvar DiffEditorWidgetSideBySide = /** @class */function (_super) {\n  __extends(DiffEditorWidgetSideBySide, _super);\n  function DiffEditorWidgetSideBySide(dataSource, enableSplitViewResizing) {\n    var _this = _super.call(this, dataSource) || this;\n    _this._disableSash = enableSplitViewResizing === false;\n    _this._sashRatio = null;\n    _this._sashPosition = null;\n    _this._startSashPosition = null;\n    _this._sash = _this._register(new Sash(_this._dataSource.getContainerDomNode(), _this));\n    if (_this._disableSash) {\n      _this._sash.state = 0 /* Disabled */;\n    }\n\n    _this._sash.onDidStart(function () {\n      return _this.onSashDragStart();\n    });\n    _this._sash.onDidChange(function (e) {\n      return _this.onSashDrag(e);\n    });\n    _this._sash.onDidEnd(function () {\n      return _this.onSashDragEnd();\n    });\n    _this._sash.onDidReset(function () {\n      return _this.onSashReset();\n    });\n    return _this;\n  }\n  DiffEditorWidgetSideBySide.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\n    var newDisableSash = enableSplitViewResizing === false;\n    if (this._disableSash !== newDisableSash) {\n      this._disableSash = newDisableSash;\n      this._sash.state = this._disableSash ? 0 /* Disabled */ : 3 /* Enabled */;\n    }\n  };\n\n  DiffEditorWidgetSideBySide.prototype.layout = function (sashRatio) {\n    if (sashRatio === void 0) {\n      sashRatio = this._sashRatio;\n    }\n    var w = this._dataSource.getWidth();\n    var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n    var sashPosition = Math.floor((sashRatio || 0.5) * contentWidth);\n    var midPoint = Math.floor(0.5 * contentWidth);\n    sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\n    if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\n      if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n        sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n      }\n      if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n        sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n      }\n    } else {\n      sashPosition = midPoint;\n    }\n    if (this._sashPosition !== sashPosition) {\n      this._sashPosition = sashPosition;\n      this._sash.layout();\n    }\n    return this._sashPosition;\n  };\n  DiffEditorWidgetSideBySide.prototype.onSashDragStart = function () {\n    this._startSashPosition = this._sashPosition;\n  };\n  DiffEditorWidgetSideBySide.prototype.onSashDrag = function (e) {\n    var w = this._dataSource.getWidth();\n    var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n    var sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\n    this._sashRatio = sashPosition / contentWidth;\n    this._dataSource.relayoutEditors();\n  };\n  DiffEditorWidgetSideBySide.prototype.onSashDragEnd = function () {\n    this._sash.layout();\n  };\n  DiffEditorWidgetSideBySide.prototype.onSashReset = function () {\n    this._sashRatio = 0.5;\n    this._dataSource.relayoutEditors();\n    this._sash.layout();\n  };\n  DiffEditorWidgetSideBySide.prototype.getVerticalSashTop = function (sash) {\n    return 0;\n  };\n  DiffEditorWidgetSideBySide.prototype.getVerticalSashLeft = function (sash) {\n    return this._sashPosition;\n  };\n  DiffEditorWidgetSideBySide.prototype.getVerticalSashHeight = function (sash) {\n    return this._dataSource.getHeight();\n  };\n  DiffEditorWidgetSideBySide.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\n    var c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */));\n    return c.getViewZones();\n  };\n  DiffEditorWidgetSideBySide.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\n    var overviewZoneColor = String(this._removeColor);\n    var result = {\n      decorations: [],\n      overviewZones: []\n    };\n    var originalModel = originalEditor.getModel();\n    for (var i = 0, length_6 = lineChanges.length; i < length_6; i++) {\n      var lineChange = lineChanges[i];\n      if (isChangeOrDelete(lineChange)) {\n        result.decorations.push({\n          range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\n          options: renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete\n        });\n        if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\n          result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\n        }\n        result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\n        if (lineChange.charChanges) {\n          for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\n            var charChange = lineChange.charChanges[j];\n            if (isChangeOrDelete(charChange)) {\n              if (ignoreTrimWhitespace) {\n                for (var lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\n                  var startColumn = void 0;\n                  var endColumn = void 0;\n                  if (lineNumber === charChange.originalStartLineNumber) {\n                    startColumn = charChange.originalStartColumn;\n                  } else {\n                    startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                  }\n                  if (lineNumber === charChange.originalEndLineNumber) {\n                    endColumn = charChange.originalEndColumn;\n                  } else {\n                    endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\n                  }\n                  result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\n                }\n              } else {\n                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\n              }\n            }\n          }\n        }\n      }\n    }\n    return result;\n  };\n  DiffEditorWidgetSideBySide.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\n    var overviewZoneColor = String(this._insertColor);\n    var result = {\n      decorations: [],\n      overviewZones: []\n    };\n    var modifiedModel = modifiedEditor.getModel();\n    for (var i = 0, length_7 = lineChanges.length; i < length_7; i++) {\n      var lineChange = lineChanges[i];\n      if (isChangeOrInsert(lineChange)) {\n        result.decorations.push({\n          range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\n          options: renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert\n        });\n        if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\n          result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n        }\n        result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\n        if (lineChange.charChanges) {\n          for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\n            var charChange = lineChange.charChanges[j];\n            if (isChangeOrInsert(charChange)) {\n              if (ignoreTrimWhitespace) {\n                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                  var startColumn = void 0;\n                  var endColumn = void 0;\n                  if (lineNumber === charChange.modifiedStartLineNumber) {\n                    startColumn = charChange.modifiedStartColumn;\n                  } else {\n                    startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                  }\n                  if (lineNumber === charChange.modifiedEndLineNumber) {\n                    endColumn = charChange.modifiedEndColumn;\n                  } else {\n                    endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                  }\n                  result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                }\n              } else {\n                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n              }\n            }\n          }\n        }\n      }\n    }\n    return result;\n  };\n  DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\n  return DiffEditorWidgetSideBySide;\n}(DiffEditorWidgetStyle);\nvar SideBySideViewZonesComputer = /** @class */function (_super) {\n  __extends(SideBySideViewZonesComputer, _super);\n  function SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\n    return _super.call(this, lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) || this;\n  }\n  SideBySideViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\n    return null;\n  };\n  SideBySideViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n    if (lineChangeModifiedLength > lineChangeOriginalLength) {\n      return {\n        afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n        heightInLines: lineChangeModifiedLength - lineChangeOriginalLength,\n        domNode: null\n      };\n    }\n    return null;\n  };\n  SideBySideViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n    if (lineChangeOriginalLength > lineChangeModifiedLength) {\n      return {\n        afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\n        heightInLines: lineChangeOriginalLength - lineChangeModifiedLength,\n        domNode: null\n      };\n    }\n    return null;\n  };\n  return SideBySideViewZonesComputer;\n}(ViewZonesComputer);\nvar DiffEditorWidgetInline = /** @class */function (_super) {\n  __extends(DiffEditorWidgetInline, _super);\n  function DiffEditorWidgetInline(dataSource, enableSplitViewResizing) {\n    var _this = _super.call(this, dataSource) || this;\n    _this.decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\n    _this._register(dataSource.getOriginalEditor().onDidLayoutChange(function (layoutInfo) {\n      if (_this.decorationsLeft !== layoutInfo.decorationsLeft) {\n        _this.decorationsLeft = layoutInfo.decorationsLeft;\n        dataSource.relayoutEditors();\n      }\n    }));\n    return _this;\n  }\n  DiffEditorWidgetInline.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\n    // Nothing to do..\n  };\n  DiffEditorWidgetInline.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\n    var computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\n    return computer.getViewZones();\n  };\n  DiffEditorWidgetInline.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\n    var overviewZoneColor = String(this._removeColor);\n    var result = {\n      decorations: [],\n      overviewZones: []\n    };\n    for (var i = 0, length_8 = lineChanges.length; i < length_8; i++) {\n      var lineChange = lineChanges[i];\n      // Add overview zones in the overview ruler\n      if (isChangeOrDelete(lineChange)) {\n        result.decorations.push({\n          range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\n          options: DECORATIONS.lineDeleteMargin\n        });\n        result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\n      }\n    }\n    return result;\n  };\n  DiffEditorWidgetInline.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\n    var overviewZoneColor = String(this._insertColor);\n    var result = {\n      decorations: [],\n      overviewZones: []\n    };\n    var modifiedModel = modifiedEditor.getModel();\n    for (var i = 0, length_9 = lineChanges.length; i < length_9; i++) {\n      var lineChange = lineChanges[i];\n      // Add decorations & overview zones\n      if (isChangeOrInsert(lineChange)) {\n        result.decorations.push({\n          range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\n          options: renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert\n        });\n        result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\n        if (lineChange.charChanges) {\n          for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\n            var charChange = lineChange.charChanges[j];\n            if (isChangeOrInsert(charChange)) {\n              if (ignoreTrimWhitespace) {\n                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                  var startColumn = void 0;\n                  var endColumn = void 0;\n                  if (lineNumber === charChange.modifiedStartLineNumber) {\n                    startColumn = charChange.modifiedStartColumn;\n                  } else {\n                    startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                  }\n                  if (lineNumber === charChange.modifiedEndLineNumber) {\n                    endColumn = charChange.modifiedEndColumn;\n                  } else {\n                    endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                  }\n                  result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                }\n              } else {\n                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n              }\n            }\n          }\n        } else {\n          result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n        }\n      }\n    }\n    return result;\n  };\n  DiffEditorWidgetInline.prototype.layout = function () {\n    // An editor should not be smaller than 5px\n    return Math.max(5, this.decorationsLeft);\n  };\n  return DiffEditorWidgetInline;\n}(DiffEditorWidgetStyle);\nvar InlineViewZonesComputer = /** @class */function (_super) {\n  __extends(InlineViewZonesComputer, _super);\n  function InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\n    var _this = _super.call(this, lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */)) || this;\n    _this.originalModel = originalEditor.getModel();\n    _this.modifiedEditorOptions = modifiedEditor.getOptions();\n    _this.modifiedEditorTabSize = modifiedEditor.getModel().getOptions().tabSize;\n    _this.renderIndicators = renderIndicators;\n    return _this;\n  }\n  InlineViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\n    var result = document.createElement('div');\n    result.className = 'inline-added-margin-view-zone';\n    return result;\n  };\n  InlineViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n    var marginDomNode = document.createElement('div');\n    marginDomNode.className = 'inline-added-margin-view-zone';\n    return {\n      afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n      heightInLines: lineChangeModifiedLength,\n      domNode: document.createElement('div'),\n      marginDomNode: marginDomNode\n    };\n  };\n  InlineViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n    var decorations = [];\n    if (lineChange.charChanges) {\n      for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\n        var charChange = lineChange.charChanges[j];\n        if (isChangeOrDelete(charChange)) {\n          decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* Regular */));\n        }\n      }\n    }\n\n    var sb = createStringBuilder(10000);\n    var marginHTML = [];\n    var layoutInfo = this.modifiedEditorOptions.get(107 /* layoutInfo */);\n    var fontInfo = this.modifiedEditorOptions.get(34 /* fontInfo */);\n    var lineDecorationsWidth = layoutInfo.decorationsWidth;\n    var lineHeight = this.modifiedEditorOptions.get(49 /* lineHeight */);\n    var typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n    var maxCharsPerLine = 0;\n    var originalContent = [];\n    for (var lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n      maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(lineNumber - lineChange.originalStartLineNumber, this.originalModel, this.modifiedEditorOptions, this.modifiedEditorTabSize, lineNumber, decorations, sb));\n      originalContent.push(this.originalModel.getLineContent(lineNumber));\n      if (this.renderIndicators) {\n        var index = lineNumber - lineChange.originalStartLineNumber;\n        marginHTML = marginHTML.concat([\"<div class=\\\"delete-sign codicon codicon-remove\\\" style=\\\"position:absolute;top:\" + index * lineHeight + \"px;width:\" + lineDecorationsWidth + \"px;height:\" + lineHeight + \"px;right:0;\\\"></div>\"]);\n      }\n    }\n    maxCharsPerLine += this.modifiedEditorOptions.get(79 /* scrollBeyondLastColumn */);\n    var domNode = document.createElement('div');\n    domNode.className = 'view-lines line-delete';\n    domNode.innerHTML = sb.build();\n    Configuration.applyFontInfoSlow(domNode, fontInfo);\n    var marginDomNode = document.createElement('div');\n    marginDomNode.className = 'inline-deleted-margin-view-zone';\n    marginDomNode.innerHTML = marginHTML.join('');\n    Configuration.applyFontInfoSlow(marginDomNode, fontInfo);\n    return {\n      shouldNotShrink: true,\n      afterLineNumber: lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1,\n      heightInLines: lineChangeOriginalLength,\n      minWidthInPx: maxCharsPerLine * typicalHalfwidthCharacterWidth,\n      domNode: domNode,\n      marginDomNode: marginDomNode,\n      diff: {\n        originalStartLineNumber: lineChange.originalStartLineNumber,\n        originalEndLineNumber: lineChange.originalEndLineNumber,\n        modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\n        modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\n        originalContent: originalContent\n      }\n    };\n  };\n  InlineViewZonesComputer.prototype._renderOriginalLine = function (count, originalModel, options, tabSize, lineNumber, decorations, sb) {\n    var lineTokens = originalModel.getLineTokens(lineNumber);\n    var lineContent = lineTokens.getLineContent();\n    var fontInfo = options.get(34 /* fontInfo */);\n    var actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\n    sb.appendASCIIString('<div class=\"view-line');\n    if (decorations.length === 0) {\n      // No char changes\n      sb.appendASCIIString(' char-delete');\n    }\n    sb.appendASCIIString('\" style=\"top:');\n    sb.appendASCIIString(String(count * options.get(49 /* lineHeight */)));\n    sb.appendASCIIString('px;width:1000000px;\">');\n    var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, originalModel.mightContainNonBasicASCII());\n    var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, originalModel.mightContainRTL());\n    var output = renderViewLine(new RenderLineInput(fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, actualDecorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendASCIIString('</div>');\n    var absoluteOffsets = output.characterMapping.getAbsoluteOffsets();\n    return absoluteOffsets.length > 0 ? absoluteOffsets[absoluteOffsets.length - 1] : 0;\n  };\n  return InlineViewZonesComputer;\n}(ViewZonesComputer);\nfunction isChangeOrInsert(lineChange) {\n  return lineChange.modifiedEndLineNumber > 0;\n}\nfunction isChangeOrDelete(lineChange) {\n  return lineChange.originalEndLineNumber > 0;\n}\nfunction createFakeLinesDiv() {\n  var r = document.createElement('div');\n  r.className = 'diagonal-fill';\n  return r;\n}\nregisterThemingParticipant(function (theme, collector) {\n  var added = theme.getColor(diffInserted);\n  if (added) {\n    collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: \" + added + \"; }\");\n    collector.addRule(\".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: \" + added + \"; }\");\n    collector.addRule(\".monaco-editor .inline-added-margin-view-zone { background-color: \" + added + \"; }\");\n  }\n  var removed = theme.getColor(diffRemoved);\n  if (removed) {\n    collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: \" + removed + \"; }\");\n    collector.addRule(\".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: \" + removed + \"; }\");\n    collector.addRule(\".monaco-editor .inline-deleted-margin-view-zone { background-color: \" + removed + \"; }\");\n  }\n  var addedOutline = theme.getColor(diffInsertedOutline);\n  if (addedOutline) {\n    collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + addedOutline + \"; }\");\n  }\n  var removedOutline = theme.getColor(diffRemovedOutline);\n  if (removedOutline) {\n    collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + removedOutline + \"; }\");\n  }\n  var shadow = theme.getColor(scrollbarShadow);\n  if (shadow) {\n    collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px \" + shadow + \"; }\");\n  }\n  var border = theme.getColor(diffBorder);\n  if (border) {\n    collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid \" + border + \"; }\");\n  }\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","dom","createFastDomNode","Sash","RunOnceScheduler","Emitter","Disposable","objects","Configuration","StableEditorScrollState","ICodeEditorService","CodeEditorWidget","DiffReview","EditorOptions","EditorFontLigatures","Range","createStringBuilder","editorCommon","ModelDecorationOptions","IEditorWorkerService","OverviewRulerZone","LineDecoration","RenderLineInput","renderViewLine","InlineDecoration","ViewLineRenderingData","IContextKeyService","IInstantiationService","ServiceCollection","INotificationService","defaultInsertColor","defaultRemoveColor","diffBorder","diffInserted","diffInsertedOutline","diffRemoved","diffRemovedOutline","scrollbarShadow","IThemeService","getThemeTypeSelector","registerThemingParticipant","IContextMenuService","InlineDiffMargin","EditorExtensionsRegistry","onUnexpectedError","IEditorProgressService","ElementSizeObserver","VisualEditorState","_contextMenuService","_clipboardService","_zones","inlineDiffMargins","_zonesMap","_decorations","getForeignViewZones","allViewZones","_this","filter","z","String","id","clean","editor","changeViewZones","viewChangeAccessor","length_1","removeZone","deltaDecorations","apply","overviewRuler","newDecorations","restoreScrollState","scrollState","capture","length_2","length_3","dispose","length_4","zones","viewZone","suppressMouseDown","zoneId","addZone","push","diff","marginDomNode","restore","decorations","setZones","overviewZones","DIFF_EDITOR_ID","DiffEditorWidget","_super","domElement","options","clipboardService","editorWorkerService","contextKeyService","instantiationService","codeEditorService","themeService","notificationService","contextMenuService","_editorProgressService","call","_onDidDispose","_register","onDidDispose","event","_onDidUpdateDiff","onDidUpdateDiff","_lastOriginalWarning","_lastModifiedWarning","_editorWorkerService","_codeEditorService","_contextKeyService","createScoped","createKey","_themeService","_notificationService","_state","_updatingDiffProgress","_domElement","_renderSideBySide","renderSideBySide","_maxComputationTime","maxComputationTime","_ignoreTrimWhitespace","ignoreTrimWhitespace","_renderIndicators","renderIndicators","_originalIsEditable","originalEditable","Boolean","_updateDecorationsRunner","_updateDecorations","_containerDomElement","document","createElement","className","_getClassName","getTheme","style","position","height","appendChild","_overviewViewportDomElement","setClassName","setPosition","_overviewDomElement","domNode","addStandardDisposableListener","e","modifiedEditor","delegateVerticalScrollbarMouseDown","_originalDomNode","_modifiedDomNode","_beginUpdateDecorationsTimeout","_currentlyChangingViewZones","_diffComputationToken","_originalEditorState","_modifiedEditorState","_isVisible","_isHandlingScrollEvent","_elementSizeObserver","undefined","_onDidContainerSizeChanged","automaticLayout","startObserving","_diffComputationResult","leftContextKeyService","leftServices","set","leftScopedInstantiationService","createChild","rightContextKeyService","rightServices","rightScopedInstantiationService","originalEditor","_createLeftHandSideEditor","_createRightHandSideEditor","_originalOverviewRuler","_modifiedOverviewRuler","_reviewPane","shadow","actionBarContainer","_enableSplitViewResizing","enableSplitViewResizing","_setStrategy","DiffEditorWidgetSideBySide","_createDataSource","DiffEditorWidgetInline","onThemeChange","t","_strategy","applyColors","schedule","contributions","getDiffEditorContributions","_i","contributions_1","createInstance","ctor","err","addDiffEditor","_setState","newState","done","show","hasWidgetFocus","isAncestor","activeElement","diffReviewNext","next","diffReviewPrev","prev","theme","result","type","_recreateOverviewRulers","removeChild","getDomNode","hasModel","createOverviewRuler","_layoutOverviewRulers","_createInnerEditor","_adjustOptionsForLeftHandSide","onDidScrollChange","scrollTopChanged","scrollLeftChanged","scrollHeightChanged","setScrollPosition","scrollLeft","scrollTop","_layoutOverviewViewport","onDidChangeViewZones","_onViewZonesChanged","onDidChangeModelContent","_beginUpdateDecorationsSoon","_adjustOptionsForRightHandSide","onDidChangeConfiguration","hasChanged","getModel","onDidChangeModelOptions","tabSize","container","removeDiffEditor","window","clearTimeout","_cleanViewZonesAndDecorations","fire","getId","getEditorType","EditorType","IDiffEditor","getLineChanges","changes","getOriginalEditor","getModifiedEditor","updateOptions","newOptions","renderSideBySideChanged","beginUpdateDecorations","_beginUpdateDecorations","setEnableSplitViewResizing","original","modified","setModel","model","Error","cancel","setScrollTop","getVisibleColumnFromPosition","getPosition","revealLine","lineNumber","scrollType","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","getSelection","getSelections","setSelection","something","setSelections","ranges","revealLines","startLineNumber","endLineNumber","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealRange","range","revealVerticalInCenter","revealHorizontal","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeAtTop","getSupportedActions","saveViewState","originalViewState","modifiedViewState","restoreViewState","s","diffEditorState","layout","dimension","observe","focus","hasTextFocus","trigger","source","handlerId","payload","changeDecorations","callback","_doLayout","_getReviewHeight","isVisible","getHeight","reviewHeight","freeSpace","ENTIRE_DIFF_OVERVIEW_WIDTH","ONE_OVERVIEW_WIDTH","layoutInfo","getLayoutInfo","setLayout","top","width","right","setTimeout","UPDATE_DIFF_DECORATIONS_DELAY","_equals","a","toString","currentOriginalModel","currentModifiedModel","currentToken","canComputeDiff","uri","warn","localize","computeDiff","then","error","lineChanges","foreignOriginal","getWhitespaces","foreignModified","diffDecorations","getEditorsDiffDecorations","_adjustOptionsForSubEditor","clonedOptions","deepClone","inDiffEditor","wordWrap","wordWrapMinified","scrollbar","vertical","folding","codeLens","fixedOverflowWidgets","minimap","enabled","isEditable","readOnly","extraEditorClassName","revealHorizontalRightPadding","defaultValue","verticalHasArrows","doLayout","getWidth","splitPoint","left","setWidth","setHeight","_computeOverviewViewport","setTop","getScrollTop","scrollHeight","getScrollHeight","computedAvailableSize","Math","max","computedRepresentableSize","computedRatio","computedSliderSize","floor","computedSliderPosition","getContainerDomNode","relayoutEditors","newStrategy","_getLineChangeAtOrBeforeLineNumber","startLineNumberExtractor","min","mid","midStart","midEnd","_getEquivalentLineForOriginalLineNumber","lineChange","originalStartLineNumber","originalEquivalentLineNumber","originalEndLineNumber","modifiedEquivalentLineNumber","modifiedStartLineNumber","modifiedEndLineNumber","lineChangeOriginalLength","lineChangeModifiedLength","delta","_getEquivalentLineForModifiedLineNumber","getDiffLineInformationForOriginal","equivalentLineNumber","getDiffLineInformationForModified","DiffEditorWidgetStyle","dataSource","_dataSource","_insertColor","_removeColor","newInsertColor","getColor","transparent","newRemoveColor","hasChanges","equals","originalWhitespaces","modifiedWhitespaces","sort","afterLineNumber","_getViewZones","originalDecorations","_getOriginalEditorDecorations","modifiedDecorations","_getModifiedEditorDecorations","ForeignViewZonesIterator","_source","_index","current","advance","ViewZonesComputer","originalForeignVZ","originalLineHeight","modifiedForeignVZ","modifiedLineHeight","getViewZones","originalEndEquivalentLineNumber","modifiedEndEquivalentLineNumber","sortMyViewZones","addAndCombineIfPossible","destination","item","lastItem","heightInLines","length_5","stepOriginal","stepModified","viewZoneLineNumber","_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion","isChangeOrInsert","_produceOriginalFromDiff","isChangeOrDelete","_produceModifiedFromDiff","stepOriginalIndex","stepModifiedIndex","originalDelta","modifiedDelta","shouldNotShrink","_ensureDomNodes","map","createFakeLinesDiv","createDecoration","startColumn","endColumn","DECORATIONS","charDelete","register","charDeleteWholeLine","isWholeLine","charInsert","charInsertWholeLine","lineInsert","marginClassName","lineInsertWithSign","linesDecorationsClassName","lineDelete","lineDeleteWithSign","lineDeleteMargin","_disableSash","_sashRatio","_sashPosition","_startSashPosition","_sash","state","onDidStart","onSashDragStart","onDidChange","onSashDrag","onDidEnd","onSashDragEnd","onDidReset","onSashReset","newDisableSash","sashRatio","w","contentWidth","sashPosition","midPoint","MINIMUM_EDITOR_WIDTH","currentX","startX","getVerticalSashTop","sash","getVerticalSashLeft","getVerticalSashHeight","SideBySideViewZonesComputer","getOption","overviewZoneColor","originalModel","length_6","charChanges","j","lengthJ","charChange","originalStartColumn","getLineFirstNonWhitespaceColumn","originalEndColumn","getLineLastNonWhitespaceColumn","modifiedModel","length_7","modifiedStartColumn","modifiedEndColumn","decorationsLeft","onDidLayoutChange","computer","InlineViewZonesComputer","length_8","length_9","modifiedEditorOptions","getOptions","modifiedEditorTabSize","sb","marginHTML","get","fontInfo","lineDecorationsWidth","decorationsWidth","lineHeight","typicalHalfwidthCharacterWidth","maxCharsPerLine","originalContent","_renderOriginalLine","getLineContent","index","concat","innerHTML","build","applyFontInfoSlow","join","minWidthInPx","count","lineTokens","getLineTokens","lineContent","actualDecorations","appendASCIIString","isBasicASCII","mightContainNonBasicASCII","containsRTL","mightContainRTL","output","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","OFF","absoluteOffsets","characterMapping","getAbsoluteOffsets","collector","added","addRule","removed","addedOutline","removedOutline","border"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/diffEditor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { StableEditorScrollState } from '../core/editorState.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { DiffReview } from './diffReview.js';\r\nimport { EditorOptions, EditorFontLigatures } from '../../common/config/editorOptions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { createStringBuilder } from '../../common/core/stringBuilder.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { OverviewRulerZone } from '../../common/view/overviewZoneManager.js';\r\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { defaultInsertColor, defaultRemoveColor, diffBorder, diffInserted, diffInsertedOutline, diffRemoved, diffRemovedOutline, scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, getThemeTypeSelector, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\r\nvar VisualEditorState = /** @class */ (function () {\r\n    function VisualEditorState(_contextMenuService, _clipboardService) {\r\n        this._contextMenuService = _contextMenuService;\r\n        this._clipboardService = _clipboardService;\r\n        this._zones = [];\r\n        this.inlineDiffMargins = [];\r\n        this._zonesMap = {};\r\n        this._decorations = [];\r\n    }\r\n    VisualEditorState.prototype.getForeignViewZones = function (allViewZones) {\r\n        var _this = this;\r\n        return allViewZones.filter(function (z) { return !_this._zonesMap[String(z.id)]; });\r\n    };\r\n    VisualEditorState.prototype.clean = function (editor) {\r\n        var _this = this;\r\n        // (1) View zones\r\n        if (this._zones.length > 0) {\r\n            editor.changeViewZones(function (viewChangeAccessor) {\r\n                for (var i = 0, length_1 = _this._zones.length; i < length_1; i++) {\r\n                    viewChangeAccessor.removeZone(_this._zones[i]);\r\n                }\r\n            });\r\n        }\r\n        this._zones = [];\r\n        this._zonesMap = {};\r\n        // (2) Model decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, []);\r\n    };\r\n    VisualEditorState.prototype.apply = function (editor, overviewRuler, newDecorations, restoreScrollState) {\r\n        var _this = this;\r\n        var scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\r\n        // view zones\r\n        editor.changeViewZones(function (viewChangeAccessor) {\r\n            for (var i = 0, length_2 = _this._zones.length; i < length_2; i++) {\r\n                viewChangeAccessor.removeZone(_this._zones[i]);\r\n            }\r\n            for (var i = 0, length_3 = _this.inlineDiffMargins.length; i < length_3; i++) {\r\n                _this.inlineDiffMargins[i].dispose();\r\n            }\r\n            _this._zones = [];\r\n            _this._zonesMap = {};\r\n            _this.inlineDiffMargins = [];\r\n            for (var i = 0, length_4 = newDecorations.zones.length; i < length_4; i++) {\r\n                var viewZone = newDecorations.zones[i];\r\n                viewZone.suppressMouseDown = true;\r\n                var zoneId = viewChangeAccessor.addZone(viewZone);\r\n                _this._zones.push(zoneId);\r\n                _this._zonesMap[String(zoneId)] = true;\r\n                if (newDecorations.zones[i].diff && viewZone.marginDomNode && _this._clipboardService) {\r\n                    viewZone.suppressMouseDown = false;\r\n                    _this.inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, _this._contextMenuService, _this._clipboardService));\r\n                }\r\n            }\r\n        });\r\n        if (scrollState) {\r\n            scrollState.restore(editor);\r\n        }\r\n        // decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, newDecorations.decorations);\r\n        // overview ruler\r\n        if (overviewRuler) {\r\n            overviewRuler.setZones(newDecorations.overviewZones);\r\n        }\r\n    };\r\n    return VisualEditorState;\r\n}());\r\nvar DIFF_EDITOR_ID = 0;\r\nvar DiffEditorWidget = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidget, _super);\r\n    function DiffEditorWidget(domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editorProgressService = _editorProgressService;\r\n        _this._onDidDispose = _this._register(new Emitter());\r\n        _this.onDidDispose = _this._onDidDispose.event;\r\n        _this._onDidUpdateDiff = _this._register(new Emitter());\r\n        _this.onDidUpdateDiff = _this._onDidUpdateDiff.event;\r\n        _this._lastOriginalWarning = null;\r\n        _this._lastModifiedWarning = null;\r\n        _this._editorWorkerService = editorWorkerService;\r\n        _this._codeEditorService = codeEditorService;\r\n        _this._contextKeyService = _this._register(contextKeyService.createScoped(domElement));\r\n        _this._contextKeyService.createKey('isInDiffEditor', true);\r\n        _this._themeService = themeService;\r\n        _this._notificationService = notificationService;\r\n        _this.id = (++DIFF_EDITOR_ID);\r\n        _this._state = 0 /* Idle */;\r\n        _this._updatingDiffProgress = null;\r\n        _this._domElement = domElement;\r\n        options = options || {};\r\n        // renderSideBySide\r\n        _this._renderSideBySide = true;\r\n        if (typeof options.renderSideBySide !== 'undefined') {\r\n            _this._renderSideBySide = options.renderSideBySide;\r\n        }\r\n        // maxComputationTime\r\n        _this._maxComputationTime = 5000;\r\n        if (typeof options.maxComputationTime !== 'undefined') {\r\n            _this._maxComputationTime = options.maxComputationTime;\r\n        }\r\n        // ignoreTrimWhitespace\r\n        _this._ignoreTrimWhitespace = true;\r\n        if (typeof options.ignoreTrimWhitespace !== 'undefined') {\r\n            _this._ignoreTrimWhitespace = options.ignoreTrimWhitespace;\r\n        }\r\n        // renderIndicators\r\n        _this._renderIndicators = true;\r\n        if (typeof options.renderIndicators !== 'undefined') {\r\n            _this._renderIndicators = options.renderIndicators;\r\n        }\r\n        _this._originalIsEditable = false;\r\n        if (typeof options.originalEditable !== 'undefined') {\r\n            _this._originalIsEditable = Boolean(options.originalEditable);\r\n        }\r\n        _this._updateDecorationsRunner = _this._register(new RunOnceScheduler(function () { return _this._updateDecorations(); }, 0));\r\n        _this._containerDomElement = document.createElement('div');\r\n        _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        _this._containerDomElement.style.position = 'relative';\r\n        _this._containerDomElement.style.height = '100%';\r\n        _this._domElement.appendChild(_this._containerDomElement);\r\n        _this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\r\n        _this._overviewViewportDomElement.setClassName('diffViewport');\r\n        _this._overviewViewportDomElement.setPosition('absolute');\r\n        _this._overviewDomElement = document.createElement('div');\r\n        _this._overviewDomElement.className = 'diffOverview';\r\n        _this._overviewDomElement.style.position = 'absolute';\r\n        _this._overviewDomElement.appendChild(_this._overviewViewportDomElement.domNode);\r\n        _this._register(dom.addStandardDisposableListener(_this._overviewDomElement, 'mousedown', function (e) {\r\n            _this.modifiedEditor.delegateVerticalScrollbarMouseDown(e);\r\n        }));\r\n        _this._containerDomElement.appendChild(_this._overviewDomElement);\r\n        // Create left side\r\n        _this._originalDomNode = document.createElement('div');\r\n        _this._originalDomNode.className = 'editor original';\r\n        _this._originalDomNode.style.position = 'absolute';\r\n        _this._originalDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._originalDomNode);\r\n        // Create right side\r\n        _this._modifiedDomNode = document.createElement('div');\r\n        _this._modifiedDomNode.className = 'editor modified';\r\n        _this._modifiedDomNode.style.position = 'absolute';\r\n        _this._modifiedDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._modifiedDomNode);\r\n        _this._beginUpdateDecorationsTimeout = -1;\r\n        _this._currentlyChangingViewZones = false;\r\n        _this._diffComputationToken = 0;\r\n        _this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._isVisible = true;\r\n        _this._isHandlingScrollEvent = false;\r\n        _this._elementSizeObserver = _this._register(new ElementSizeObserver(_this._containerDomElement, undefined, function () { return _this._onDidContainerSizeChanged(); }));\r\n        if (options.automaticLayout) {\r\n            _this._elementSizeObserver.startObserving();\r\n        }\r\n        _this._diffComputationResult = null;\r\n        var leftContextKeyService = _this._contextKeyService.createScoped();\r\n        leftContextKeyService.createKey('isInDiffLeftEditor', true);\r\n        var leftServices = new ServiceCollection();\r\n        leftServices.set(IContextKeyService, leftContextKeyService);\r\n        var leftScopedInstantiationService = instantiationService.createChild(leftServices);\r\n        var rightContextKeyService = _this._contextKeyService.createScoped();\r\n        rightContextKeyService.createKey('isInDiffRightEditor', true);\r\n        var rightServices = new ServiceCollection();\r\n        rightServices.set(IContextKeyService, rightContextKeyService);\r\n        var rightScopedInstantiationService = instantiationService.createChild(rightServices);\r\n        _this.originalEditor = _this._createLeftHandSideEditor(options, leftScopedInstantiationService);\r\n        _this.modifiedEditor = _this._createRightHandSideEditor(options, rightScopedInstantiationService);\r\n        _this._originalOverviewRuler = null;\r\n        _this._modifiedOverviewRuler = null;\r\n        _this._reviewPane = new DiffReview(_this);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.domNode.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.shadow.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.actionBarContainer.domNode);\r\n        // enableSplitViewResizing\r\n        _this._enableSplitViewResizing = true;\r\n        if (typeof options.enableSplitViewResizing !== 'undefined') {\r\n            _this._enableSplitViewResizing = options.enableSplitViewResizing;\r\n        }\r\n        if (_this._renderSideBySide) {\r\n            _this._setStrategy(new DiffEditorWidgetSideBySide(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        else {\r\n            _this._setStrategy(new DiffEditorWidgetInline(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        _this._register(themeService.onThemeChange(function (t) {\r\n            if (_this._strategy && _this._strategy.applyColors(t)) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n            _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        }));\r\n        var contributions = EditorExtensionsRegistry.getDiffEditorContributions();\r\n        for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\r\n            var desc = contributions_1[_i];\r\n            try {\r\n                _this._register(instantiationService.createInstance(desc.ctor, _this));\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        _this._codeEditorService.addDiffEditor(_this);\r\n        return _this;\r\n    }\r\n    DiffEditorWidget.prototype._setState = function (newState) {\r\n        if (this._state === newState) {\r\n            return;\r\n        }\r\n        this._state = newState;\r\n        if (this._updatingDiffProgress) {\r\n            this._updatingDiffProgress.done();\r\n            this._updatingDiffProgress = null;\r\n        }\r\n        if (this._state === 1 /* ComputingDiff */) {\r\n            this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.hasWidgetFocus = function () {\r\n        return dom.isAncestor(document.activeElement, this._domElement);\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewNext = function () {\r\n        this._reviewPane.next();\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewPrev = function () {\r\n        this._reviewPane.prev();\r\n    };\r\n    DiffEditorWidget._getClassName = function (theme, renderSideBySide) {\r\n        var result = 'monaco-diff-editor monaco-editor-background ';\r\n        if (renderSideBySide) {\r\n            result += 'side-by-side ';\r\n        }\r\n        result += getThemeTypeSelector(theme.type);\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._recreateOverviewRulers = function () {\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this.originalEditor.hasModel()) {\r\n            this._originalOverviewRuler = this.originalEditor.createOverviewRuler('original diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        if (this.modifiedEditor.hasModel()) {\r\n            this._modifiedOverviewRuler = this.modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\r\n        }\r\n        this._layoutOverviewRulers();\r\n    };\r\n    DiffEditorWidget.prototype._createLeftHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options, this._originalIsEditable));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.modifiedEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createRightHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.originalEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */) && editor.getModel()) {\r\n                _this._onViewZonesChanged();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelOptions(function (e) {\r\n            if (e.tabSize) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(CodeEditorWidget, container, options, {});\r\n    };\r\n    DiffEditorWidget.prototype.dispose = function () {\r\n        this._codeEditorService.removeDiffEditor(this);\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._cleanViewZonesAndDecorations();\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\r\n        this._containerDomElement.removeChild(this._overviewDomElement);\r\n        this._containerDomElement.removeChild(this._originalDomNode);\r\n        this.originalEditor.dispose();\r\n        this._containerDomElement.removeChild(this._modifiedDomNode);\r\n        this.modifiedEditor.dispose();\r\n        this._strategy.dispose();\r\n        this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\r\n        this._reviewPane.dispose();\r\n        this._domElement.removeChild(this._containerDomElement);\r\n        this._onDidDispose.fire();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    //------------ begin IDiffEditor methods\r\n    DiffEditorWidget.prototype.getId = function () {\r\n        return this.getEditorType() + ':' + this.id;\r\n    };\r\n    DiffEditorWidget.prototype.getEditorType = function () {\r\n        return editorCommon.EditorType.IDiffEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getLineChanges = function () {\r\n        if (!this._diffComputationResult) {\r\n            return null;\r\n        }\r\n        return this._diffComputationResult.changes;\r\n    };\r\n    DiffEditorWidget.prototype.getOriginalEditor = function () {\r\n        return this.originalEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getModifiedEditor = function () {\r\n        return this.modifiedEditor;\r\n    };\r\n    DiffEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        // Handle side by side\r\n        var renderSideBySideChanged = false;\r\n        if (typeof newOptions.renderSideBySide !== 'undefined') {\r\n            if (this._renderSideBySide !== newOptions.renderSideBySide) {\r\n                this._renderSideBySide = newOptions.renderSideBySide;\r\n                renderSideBySideChanged = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.maxComputationTime !== 'undefined') {\r\n            this._maxComputationTime = newOptions.maxComputationTime;\r\n            if (this._isVisible) {\r\n                this._beginUpdateDecorationsSoon();\r\n            }\r\n        }\r\n        var beginUpdateDecorations = false;\r\n        if (typeof newOptions.ignoreTrimWhitespace !== 'undefined') {\r\n            if (this._ignoreTrimWhitespace !== newOptions.ignoreTrimWhitespace) {\r\n                this._ignoreTrimWhitespace = newOptions.ignoreTrimWhitespace;\r\n                // Begin comparing\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.renderIndicators !== 'undefined') {\r\n            if (this._renderIndicators !== newOptions.renderIndicators) {\r\n                this._renderIndicators = newOptions.renderIndicators;\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (beginUpdateDecorations) {\r\n            this._beginUpdateDecorations();\r\n        }\r\n        if (typeof newOptions.originalEditable !== 'undefined') {\r\n            this._originalIsEditable = Boolean(newOptions.originalEditable);\r\n        }\r\n        this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(newOptions));\r\n        this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(newOptions, this._originalIsEditable));\r\n        // enableSplitViewResizing\r\n        if (typeof newOptions.enableSplitViewResizing !== 'undefined') {\r\n            this._enableSplitViewResizing = newOptions.enableSplitViewResizing;\r\n        }\r\n        this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing);\r\n        // renderSideBySide\r\n        if (renderSideBySideChanged) {\r\n            if (this._renderSideBySide) {\r\n                this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            else {\r\n                this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            // Update class name\r\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getTheme(), this._renderSideBySide);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.getModel = function () {\r\n        return {\r\n            original: this.originalEditor.getModel(),\r\n            modified: this.modifiedEditor.getModel()\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.setModel = function (model) {\r\n        // Guard us against partial null model\r\n        if (model && (!model.original || !model.modified)) {\r\n            throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\r\n        }\r\n        // Remove all view zones & decorations\r\n        this._cleanViewZonesAndDecorations();\r\n        // Update code editor models\r\n        this.originalEditor.setModel(model ? model.original : null);\r\n        this.modifiedEditor.setModel(model ? model.modified : null);\r\n        this._updateDecorationsRunner.cancel();\r\n        // this.originalEditor.onDidChangeModelOptions\r\n        if (model) {\r\n            this.originalEditor.setScrollTop(0);\r\n            this.modifiedEditor.setScrollTop(0);\r\n        }\r\n        // Disable any diff computations that will come in\r\n        this._diffComputationResult = null;\r\n        this._diffComputationToken++;\r\n        this._setState(0 /* Idle */);\r\n        if (model) {\r\n            this._recreateOverviewRulers();\r\n            // Begin comparing\r\n            this._beginUpdateDecorations();\r\n        }\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype.getDomNode = function () {\r\n        return this._domElement;\r\n    };\r\n    DiffEditorWidget.prototype.getVisibleColumnFromPosition = function (position) {\r\n        return this.modifiedEditor.getVisibleColumnFromPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.getPosition = function () {\r\n        return this.modifiedEditor.getPosition();\r\n    };\r\n    DiffEditorWidget.prototype.setPosition = function (position) {\r\n        this.modifiedEditor.setPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLine(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenter(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPosition = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPosition(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenter(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSelection = function () {\r\n        return this.modifiedEditor.getSelection();\r\n    };\r\n    DiffEditorWidget.prototype.getSelections = function () {\r\n        return this.modifiedEditor.getSelections();\r\n    };\r\n    DiffEditorWidget.prototype.setSelection = function (something) {\r\n        this.modifiedEditor.setSelection(something);\r\n    };\r\n    DiffEditorWidget.prototype.setSelections = function (ranges) {\r\n        this.modifiedEditor.setSelections(ranges);\r\n    };\r\n    DiffEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        if (revealVerticalInCenter === void 0) { revealVerticalInCenter = false; }\r\n        if (revealHorizontal === void 0) { revealHorizontal = true; }\r\n        this.modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenter(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeAtTop(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSupportedActions = function () {\r\n        return this.modifiedEditor.getSupportedActions();\r\n    };\r\n    DiffEditorWidget.prototype.saveViewState = function () {\r\n        var originalViewState = this.originalEditor.saveViewState();\r\n        var modifiedViewState = this.modifiedEditor.saveViewState();\r\n        return {\r\n            original: originalViewState,\r\n            modified: modifiedViewState\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.restoreViewState = function (s) {\r\n        if (s.original && s.modified) {\r\n            var diffEditorState = s;\r\n            this.originalEditor.restoreViewState(diffEditorState.original);\r\n            this.modifiedEditor.restoreViewState(diffEditorState.modified);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.layout = function (dimension) {\r\n        this._elementSizeObserver.observe(dimension);\r\n    };\r\n    DiffEditorWidget.prototype.focus = function () {\r\n        this.modifiedEditor.focus();\r\n    };\r\n    DiffEditorWidget.prototype.hasTextFocus = function () {\r\n        return this.originalEditor.hasTextFocus() || this.modifiedEditor.hasTextFocus();\r\n    };\r\n    DiffEditorWidget.prototype.trigger = function (source, handlerId, payload) {\r\n        this.modifiedEditor.trigger(source, handlerId, payload);\r\n    };\r\n    DiffEditorWidget.prototype.changeDecorations = function (callback) {\r\n        return this.modifiedEditor.changeDecorations(callback);\r\n    };\r\n    //------------ end IDiffEditor methods\r\n    //------------ begin layouting methods\r\n    DiffEditorWidget.prototype._onDidContainerSizeChanged = function () {\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getReviewHeight = function () {\r\n        return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewRulers = function () {\r\n        if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (layoutInfo) {\r\n            this._originalOverviewRuler.setLayout({\r\n                top: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n            this._modifiedOverviewRuler.setLayout({\r\n                top: 0,\r\n                right: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n        }\r\n    };\r\n    //------------ end layouting methods\r\n    DiffEditorWidget.prototype._onViewZonesChanged = function () {\r\n        if (this._currentlyChangingViewZones) {\r\n            return;\r\n        }\r\n        this._updateDecorationsRunner.schedule();\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorationsSoon = function () {\r\n        var _this = this;\r\n        // Clear previous timeout if necessary\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._beginUpdateDecorationsTimeout = window.setTimeout(function () { return _this._beginUpdateDecorations(); }, DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\r\n    };\r\n    DiffEditorWidget._equals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (!a || !b) {\r\n            return false;\r\n        }\r\n        return (a.toString() === b.toString());\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorations = function () {\r\n        var _this = this;\r\n        this._beginUpdateDecorationsTimeout = -1;\r\n        var currentOriginalModel = this.originalEditor.getModel();\r\n        var currentModifiedModel = this.modifiedEditor.getModel();\r\n        if (!currentOriginalModel || !currentModifiedModel) {\r\n            return;\r\n        }\r\n        // Prevent old diff requests to come if a new request has been initiated\r\n        // The best method would be to call cancel on the Promise, but this is not\r\n        // yet supported, so using tokens for now.\r\n        this._diffComputationToken++;\r\n        var currentToken = this._diffComputationToken;\r\n        this._setState(1 /* ComputingDiff */);\r\n        if (!this._editorWorkerService.canComputeDiff(currentOriginalModel.uri, currentModifiedModel.uri)) {\r\n            if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\r\n                || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\r\n                this._lastOriginalWarning = currentOriginalModel.uri;\r\n                this._lastModifiedWarning = currentModifiedModel.uri;\r\n                this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\r\n            }\r\n            return;\r\n        }\r\n        this._editorWorkerService.computeDiff(currentOriginalModel.uri, currentModifiedModel.uri, this._ignoreTrimWhitespace, this._maxComputationTime).then(function (result) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = result;\r\n                _this._updateDecorationsRunner.schedule();\r\n                _this._onDidUpdateDiff.fire();\r\n            }\r\n        }, function (error) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = null;\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        });\r\n    };\r\n    DiffEditorWidget.prototype._cleanViewZonesAndDecorations = function () {\r\n        this._originalEditorState.clean(this.originalEditor);\r\n        this._modifiedEditorState.clean(this.modifiedEditor);\r\n    };\r\n    DiffEditorWidget.prototype._updateDecorations = function () {\r\n        if (!this.originalEditor.getModel() || !this.modifiedEditor.getModel() || !this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        var foreignOriginal = this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces());\r\n        var foreignModified = this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces());\r\n        var diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._ignoreTrimWhitespace, this._renderIndicators, foreignOriginal, foreignModified, this.originalEditor, this.modifiedEditor);\r\n        try {\r\n            this._currentlyChangingViewZones = true;\r\n            this._originalEditorState.apply(this.originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\r\n            this._modifiedEditorState.apply(this.modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\r\n        }\r\n        finally {\r\n            this._currentlyChangingViewZones = false;\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForSubEditor = function (options) {\r\n        var clonedOptions = objects.deepClone(options || {});\r\n        clonedOptions.inDiffEditor = true;\r\n        clonedOptions.wordWrap = 'off';\r\n        clonedOptions.wordWrapMinified = false;\r\n        clonedOptions.automaticLayout = false;\r\n        clonedOptions.scrollbar = clonedOptions.scrollbar || {};\r\n        clonedOptions.scrollbar.vertical = 'visible';\r\n        clonedOptions.folding = false;\r\n        clonedOptions.codeLens = false;\r\n        clonedOptions.fixedOverflowWidgets = true;\r\n        // clonedOptions.lineDecorationsWidth = '2ch';\r\n        if (!clonedOptions.minimap) {\r\n            clonedOptions.minimap = {};\r\n        }\r\n        clonedOptions.minimap.enabled = false;\r\n        return clonedOptions;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForLeftHandSide = function (options, isEditable) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.readOnly = !isEditable;\r\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForRightHandSide = function (options) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        result.scrollbar.verticalHasArrows = false;\r\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype.doLayout = function () {\r\n        this._elementSizeObserver.observe();\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._doLayout = function () {\r\n        var width = this._elementSizeObserver.getWidth();\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var splitPoint = this._strategy.layout();\r\n        this._originalDomNode.style.width = splitPoint + 'px';\r\n        this._originalDomNode.style.left = '0px';\r\n        this._modifiedDomNode.style.width = (width - splitPoint) + 'px';\r\n        this._modifiedDomNode.style.left = splitPoint + 'px';\r\n        this._overviewDomElement.style.top = '0px';\r\n        this._overviewDomElement.style.height = (height - reviewHeight) + 'px';\r\n        this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\r\n        this._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\r\n        this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\r\n        this._overviewViewportDomElement.setHeight(30);\r\n        this.originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\r\n        this.modifiedEditor.layout({ width: width - splitPoint - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH, height: (height - reviewHeight) });\r\n        if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\r\n            this._layoutOverviewRulers();\r\n        }\r\n        this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewViewport = function () {\r\n        var layout = this._computeOverviewViewport();\r\n        if (!layout) {\r\n            this._overviewViewportDomElement.setTop(0);\r\n            this._overviewViewportDomElement.setHeight(0);\r\n        }\r\n        else {\r\n            this._overviewViewportDomElement.setTop(layout.top);\r\n            this._overviewViewportDomElement.setHeight(layout.height);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._computeOverviewViewport = function () {\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (!layoutInfo) {\r\n            return null;\r\n        }\r\n        var scrollTop = this.modifiedEditor.getScrollTop();\r\n        var scrollHeight = this.modifiedEditor.getScrollHeight();\r\n        var computedAvailableSize = Math.max(0, layoutInfo.height);\r\n        var computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\r\n        var computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\r\n        var computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\r\n        var computedSliderPosition = Math.floor(scrollTop * computedRatio);\r\n        return {\r\n            height: computedSliderSize,\r\n            top: computedSliderPosition\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._createDataSource = function () {\r\n        var _this = this;\r\n        return {\r\n            getWidth: function () {\r\n                return _this._elementSizeObserver.getWidth();\r\n            },\r\n            getHeight: function () {\r\n                return (_this._elementSizeObserver.getHeight() - _this._getReviewHeight());\r\n            },\r\n            getContainerDomNode: function () {\r\n                return _this._containerDomElement;\r\n            },\r\n            relayoutEditors: function () {\r\n                _this._doLayout();\r\n            },\r\n            getOriginalEditor: function () {\r\n                return _this.originalEditor;\r\n            },\r\n            getModifiedEditor: function () {\r\n                return _this.modifiedEditor;\r\n            }\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._setStrategy = function (newStrategy) {\r\n        if (this._strategy) {\r\n            this._strategy.dispose();\r\n        }\r\n        this._strategy = newStrategy;\r\n        newStrategy.applyColors(this._themeService.getTheme());\r\n        if (this._diffComputationResult) {\r\n            this._updateDecorations();\r\n        }\r\n        // Just do a layout, the strategy might need it\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getLineChangeAtOrBeforeLineNumber = function (lineNumber, startLineNumberExtractor) {\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        if (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\r\n            // There are no changes or `lineNumber` is before the first change\r\n            return null;\r\n        }\r\n        var min = 0, max = lineChanges.length - 1;\r\n        while (min < max) {\r\n            var mid = Math.floor((min + max) / 2);\r\n            var midStart = startLineNumberExtractor(lineChanges[mid]);\r\n            var midEnd = (mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n            if (lineNumber < midStart) {\r\n                max = mid - 1;\r\n            }\r\n            else if (lineNumber >= midEnd) {\r\n                min = mid + 1;\r\n            }\r\n            else {\r\n                // HIT!\r\n                min = mid;\r\n                max = mid;\r\n            }\r\n        }\r\n        return lineChanges[min];\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForOriginalLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.originalStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - originalEquivalentLineNumber;\r\n        if (delta <= lineChangeOriginalLength) {\r\n            return modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\r\n        }\r\n        return modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForModifiedLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.modifiedStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - modifiedEquivalentLineNumber;\r\n        if (delta <= lineChangeModifiedLength) {\r\n            return originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\r\n        }\r\n        return originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForOriginal = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForModified = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\r\n    DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\r\n    DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\r\n    DiffEditorWidget = __decorate([\r\n        __param(3, IEditorWorkerService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IInstantiationService),\r\n        __param(6, ICodeEditorService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IContextMenuService),\r\n        __param(10, IEditorProgressService)\r\n    ], DiffEditorWidget);\r\n    return DiffEditorWidget;\r\n}(Disposable));\r\nexport { DiffEditorWidget };\r\nvar DiffEditorWidgetStyle = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetStyle, _super);\r\n    function DiffEditorWidgetStyle(dataSource) {\r\n        var _this = _super.call(this) || this;\r\n        _this._dataSource = dataSource;\r\n        _this._insertColor = null;\r\n        _this._removeColor = null;\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetStyle.prototype.applyColors = function (theme) {\r\n        var newInsertColor = (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\r\n        var newRemoveColor = (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\r\n        var hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\r\n        this._insertColor = newInsertColor;\r\n        this._removeColor = newRemoveColor;\r\n        return hasChanges;\r\n    };\r\n    DiffEditorWidgetStyle.prototype.getEditorsDiffDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor) {\r\n        // Get view zones\r\n        modifiedWhitespaces = modifiedWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        originalWhitespaces = originalWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        var zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor, renderIndicators);\r\n        // Get decorations & overview ruler zones\r\n        var originalDecorations = this._getOriginalEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        var modifiedDecorations = this._getModifiedEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        return {\r\n            original: {\r\n                decorations: originalDecorations.decorations,\r\n                overviewZones: originalDecorations.overviewZones,\r\n                zones: zones.original\r\n            },\r\n            modified: {\r\n                decorations: modifiedDecorations.decorations,\r\n                overviewZones: modifiedDecorations.overviewZones,\r\n                zones: zones.modified\r\n            }\r\n        };\r\n    };\r\n    return DiffEditorWidgetStyle;\r\n}(Disposable));\r\nvar ForeignViewZonesIterator = /** @class */ (function () {\r\n    function ForeignViewZonesIterator(source) {\r\n        this._source = source;\r\n        this._index = -1;\r\n        this.current = null;\r\n        this.advance();\r\n    }\r\n    ForeignViewZonesIterator.prototype.advance = function () {\r\n        this._index++;\r\n        if (this._index < this._source.length) {\r\n            this.current = this._source[this._index];\r\n        }\r\n        else {\r\n            this.current = null;\r\n        }\r\n    };\r\n    return ForeignViewZonesIterator;\r\n}());\r\nvar ViewZonesComputer = /** @class */ (function () {\r\n    function ViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        this.lineChanges = lineChanges;\r\n        this.originalForeignVZ = originalForeignVZ;\r\n        this.originalLineHeight = originalLineHeight;\r\n        this.modifiedForeignVZ = modifiedForeignVZ;\r\n        this.modifiedLineHeight = modifiedLineHeight;\r\n    }\r\n    ViewZonesComputer.prototype.getViewZones = function () {\r\n        var result = {\r\n            original: [],\r\n            modified: []\r\n        };\r\n        var lineChangeModifiedLength = 0;\r\n        var lineChangeOriginalLength = 0;\r\n        var originalEquivalentLineNumber = 0;\r\n        var modifiedEquivalentLineNumber = 0;\r\n        var originalEndEquivalentLineNumber = 0;\r\n        var modifiedEndEquivalentLineNumber = 0;\r\n        var sortMyViewZones = function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        };\r\n        var addAndCombineIfPossible = function (destination, item) {\r\n            if (item.domNode === null && destination.length > 0) {\r\n                var lastItem = destination[destination.length - 1];\r\n                if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\r\n                    lastItem.heightInLines += item.heightInLines;\r\n                    return;\r\n                }\r\n            }\r\n            destination.push(item);\r\n        };\r\n        var modifiedForeignVZ = new ForeignViewZonesIterator(this.modifiedForeignVZ);\r\n        var originalForeignVZ = new ForeignViewZonesIterator(this.originalForeignVZ);\r\n        // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\r\n        for (var i = 0, length_5 = this.lineChanges.length; i <= length_5; i++) {\r\n            var lineChange = (i < length_5 ? this.lineChanges[i] : null);\r\n            if (lineChange !== null) {\r\n                originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n                modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n                lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n                lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n                originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\r\n                modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\r\n            }\r\n            else {\r\n                // Increase to very large value to get the producing tests of foreign view zones running\r\n                originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\r\n                modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\r\n                originalEndEquivalentLineNumber = originalEquivalentLineNumber;\r\n                modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\r\n            }\r\n            // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\r\n            var stepOriginal = [];\r\n            var stepModified = [];\r\n            // ---------------------------- PRODUCE VIEW ZONES\r\n            // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\r\n            while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\r\n                    viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = originalEndEquivalentLineNumber;\r\n                }\r\n                var marginDomNode = null;\r\n                if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\r\n                    marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\r\n                }\r\n                stepOriginal.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: modifiedForeignVZ.current.height / this.modifiedLineHeight,\r\n                    domNode: null,\r\n                    marginDomNode: marginDomNode\r\n                });\r\n                modifiedForeignVZ.advance();\r\n            }\r\n            // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\r\n            while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\r\n                    viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = modifiedEndEquivalentLineNumber;\r\n                }\r\n                stepModified.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: originalForeignVZ.current.height / this.originalLineHeight,\r\n                    domNode: null\r\n                });\r\n                originalForeignVZ.advance();\r\n            }\r\n            if (lineChange !== null && isChangeOrInsert(lineChange)) {\r\n                var r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepOriginal.push(r);\r\n                }\r\n            }\r\n            if (lineChange !== null && isChangeOrDelete(lineChange)) {\r\n                var r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepModified.push(r);\r\n                }\r\n            }\r\n            // ---------------------------- END PRODUCE VIEW ZONES\r\n            // ---------------------------- EMIT MINIMAL VIEW ZONES\r\n            // [CANCEL & EMIT] Try to cancel view zones out\r\n            var stepOriginalIndex = 0;\r\n            var stepModifiedIndex = 0;\r\n            stepOriginal = stepOriginal.sort(sortMyViewZones);\r\n            stepModified = stepModified.sort(sortMyViewZones);\r\n            while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\r\n                var original = stepOriginal[stepOriginalIndex];\r\n                var modified = stepModified[stepModifiedIndex];\r\n                var originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\r\n                var modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\r\n                if (originalDelta < modifiedDelta) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modifiedDelta < originalDelta) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else if (original.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modified.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else {\r\n                    if (original.heightInLines >= modified.heightInLines) {\r\n                        // modified view zone gets removed\r\n                        original.heightInLines -= modified.heightInLines;\r\n                        stepModifiedIndex++;\r\n                    }\r\n                    else {\r\n                        // original view zone gets removed\r\n                        modified.heightInLines -= original.heightInLines;\r\n                        stepOriginalIndex++;\r\n                    }\r\n                }\r\n            }\r\n            // [EMIT] Remaining original view zones\r\n            while (stepOriginalIndex < stepOriginal.length) {\r\n                addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\r\n                stepOriginalIndex++;\r\n            }\r\n            // [EMIT] Remaining modified view zones\r\n            while (stepModifiedIndex < stepModified.length) {\r\n                addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\r\n                stepModifiedIndex++;\r\n            }\r\n            // ---------------------------- END EMIT MINIMAL VIEW ZONES\r\n        }\r\n        return {\r\n            original: ViewZonesComputer._ensureDomNodes(result.original),\r\n            modified: ViewZonesComputer._ensureDomNodes(result.modified),\r\n        };\r\n    };\r\n    ViewZonesComputer._ensureDomNodes = function (zones) {\r\n        return zones.map(function (z) {\r\n            if (!z.domNode) {\r\n                z.domNode = createFakeLinesDiv();\r\n            }\r\n            return z;\r\n        });\r\n    };\r\n    return ViewZonesComputer;\r\n}());\r\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\r\n    return {\r\n        range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\r\n        options: options\r\n    };\r\n}\r\nvar DECORATIONS = {\r\n    charDelete: ModelDecorationOptions.register({\r\n        className: 'char-delete'\r\n    }),\r\n    charDeleteWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-delete',\r\n        isWholeLine: true\r\n    }),\r\n    charInsert: ModelDecorationOptions.register({\r\n        className: 'char-insert'\r\n    }),\r\n    charInsertWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsert: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsertWithSign: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        linesDecorationsClassName: 'insert-sign codicon codicon-add',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineDelete: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteWithSign: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        linesDecorationsClassName: 'delete-sign codicon codicon-remove',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteMargin: ModelDecorationOptions.register({\r\n        marginClassName: 'line-delete',\r\n    })\r\n};\r\nvar DiffEditorWidgetSideBySide = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetSideBySide, _super);\r\n    function DiffEditorWidgetSideBySide(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this._disableSash = (enableSplitViewResizing === false);\r\n        _this._sashRatio = null;\r\n        _this._sashPosition = null;\r\n        _this._startSashPosition = null;\r\n        _this._sash = _this._register(new Sash(_this._dataSource.getContainerDomNode(), _this));\r\n        if (_this._disableSash) {\r\n            _this._sash.state = 0 /* Disabled */;\r\n        }\r\n        _this._sash.onDidStart(function () { return _this.onSashDragStart(); });\r\n        _this._sash.onDidChange(function (e) { return _this.onSashDrag(e); });\r\n        _this._sash.onDidEnd(function () { return _this.onSashDragEnd(); });\r\n        _this._sash.onDidReset(function () { return _this.onSashReset(); });\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetSideBySide.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        var newDisableSash = (enableSplitViewResizing === false);\r\n        if (this._disableSash !== newDisableSash) {\r\n            this._disableSash = newDisableSash;\r\n            this._sash.state = this._disableSash ? 0 /* Disabled */ : 3 /* Enabled */;\r\n        }\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.layout = function (sashRatio) {\r\n        if (sashRatio === void 0) { sashRatio = this._sashRatio; }\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = Math.floor((sashRatio || 0.5) * contentWidth);\r\n        var midPoint = Math.floor(0.5 * contentWidth);\r\n        sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\r\n        if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\r\n            if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n            if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n        }\r\n        else {\r\n            sashPosition = midPoint;\r\n        }\r\n        if (this._sashPosition !== sashPosition) {\r\n            this._sashPosition = sashPosition;\r\n            this._sash.layout();\r\n        }\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragStart = function () {\r\n        this._startSashPosition = this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDrag = function (e) {\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\r\n        this._sashRatio = sashPosition / contentWidth;\r\n        this._dataSource.relayoutEditors();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragEnd = function () {\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashReset = function () {\r\n        this._sashRatio = 0.5;\r\n        this._dataSource.relayoutEditors();\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashTop = function (sash) {\r\n        return 0;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashLeft = function (sash) {\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashHeight = function (sash) {\r\n        return this._dataSource.getHeight();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\r\n        var c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */));\r\n        return c.getViewZones();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var originalModel = originalEditor.getModel();\r\n        for (var i = 0, length_6 = lineChanges.length; i < length_6; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\r\n                });\r\n                if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrDelete(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.originalStartLineNumber) {\r\n                                        startColumn = charChange.originalStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.originalEndLineNumber) {\r\n                                        endColumn = charChange.originalEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_7 = lineChanges.length; i < length_7; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\r\n    return DiffEditorWidgetSideBySide;\r\n}(DiffEditorWidgetStyle));\r\nvar SideBySideViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(SideBySideViewZonesComputer, _super);\r\n    function SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        return _super.call(this, lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) || this;\r\n    }\r\n    SideBySideViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeModifiedLength > lineChangeOriginalLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n                heightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeOriginalLength > lineChangeModifiedLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\r\n                heightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    return SideBySideViewZonesComputer;\r\n}(ViewZonesComputer));\r\nvar DiffEditorWidgetInline = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetInline, _super);\r\n    function DiffEditorWidgetInline(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this.decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\r\n        _this._register(dataSource.getOriginalEditor().onDidLayoutChange(function (layoutInfo) {\r\n            if (_this.decorationsLeft !== layoutInfo.decorationsLeft) {\r\n                _this.decorationsLeft = layoutInfo.decorationsLeft;\r\n                dataSource.relayoutEditors();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetInline.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        // Nothing to do..\r\n    };\r\n    DiffEditorWidgetInline.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\r\n        return computer.getViewZones();\r\n    };\r\n    DiffEditorWidgetInline.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        for (var i = 0, length_8 = lineChanges.length; i < length_8; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add overview zones in the overview ruler\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: DECORATIONS.lineDeleteMargin\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_9 = lineChanges.length; i < length_9; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add decorations & overview zones\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype.layout = function () {\r\n        // An editor should not be smaller than 5px\r\n        return Math.max(5, this.decorationsLeft);\r\n    };\r\n    return DiffEditorWidgetInline;\r\n}(DiffEditorWidgetStyle));\r\nvar InlineViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(InlineViewZonesComputer, _super);\r\n    function InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var _this = _super.call(this, lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */)) || this;\r\n        _this.originalModel = originalEditor.getModel();\r\n        _this.modifiedEditorOptions = modifiedEditor.getOptions();\r\n        _this.modifiedEditorTabSize = modifiedEditor.getModel().getOptions().tabSize;\r\n        _this.renderIndicators = renderIndicators;\r\n        return _this;\r\n    }\r\n    InlineViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        var result = document.createElement('div');\r\n        result.className = 'inline-added-margin-view-zone';\r\n        return result;\r\n    };\r\n    InlineViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-added-margin-view-zone';\r\n        return {\r\n            afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n            heightInLines: lineChangeModifiedLength,\r\n            domNode: document.createElement('div'),\r\n            marginDomNode: marginDomNode\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var decorations = [];\r\n        if (lineChange.charChanges) {\r\n            for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                var charChange = lineChange.charChanges[j];\r\n                if (isChangeOrDelete(charChange)) {\r\n                    decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* Regular */));\r\n                }\r\n            }\r\n        }\r\n        var sb = createStringBuilder(10000);\r\n        var marginHTML = [];\r\n        var layoutInfo = this.modifiedEditorOptions.get(107 /* layoutInfo */);\r\n        var fontInfo = this.modifiedEditorOptions.get(34 /* fontInfo */);\r\n        var lineDecorationsWidth = layoutInfo.decorationsWidth;\r\n        var lineHeight = this.modifiedEditorOptions.get(49 /* lineHeight */);\r\n        var typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\r\n        var maxCharsPerLine = 0;\r\n        var originalContent = [];\r\n        for (var lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\r\n            maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(lineNumber - lineChange.originalStartLineNumber, this.originalModel, this.modifiedEditorOptions, this.modifiedEditorTabSize, lineNumber, decorations, sb));\r\n            originalContent.push(this.originalModel.getLineContent(lineNumber));\r\n            if (this.renderIndicators) {\r\n                var index = lineNumber - lineChange.originalStartLineNumber;\r\n                marginHTML = marginHTML.concat([\r\n                    \"<div class=\\\"delete-sign codicon codicon-remove\\\" style=\\\"position:absolute;top:\" + index * lineHeight + \"px;width:\" + lineDecorationsWidth + \"px;height:\" + lineHeight + \"px;right:0;\\\"></div>\"\r\n                ]);\r\n            }\r\n        }\r\n        maxCharsPerLine += this.modifiedEditorOptions.get(79 /* scrollBeyondLastColumn */);\r\n        var domNode = document.createElement('div');\r\n        domNode.className = 'view-lines line-delete';\r\n        domNode.innerHTML = sb.build();\r\n        Configuration.applyFontInfoSlow(domNode, fontInfo);\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-deleted-margin-view-zone';\r\n        marginDomNode.innerHTML = marginHTML.join('');\r\n        Configuration.applyFontInfoSlow(marginDomNode, fontInfo);\r\n        return {\r\n            shouldNotShrink: true,\r\n            afterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\r\n            heightInLines: lineChangeOriginalLength,\r\n            minWidthInPx: (maxCharsPerLine * typicalHalfwidthCharacterWidth),\r\n            domNode: domNode,\r\n            marginDomNode: marginDomNode,\r\n            diff: {\r\n                originalStartLineNumber: lineChange.originalStartLineNumber,\r\n                originalEndLineNumber: lineChange.originalEndLineNumber,\r\n                modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\r\n                modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\r\n                originalContent: originalContent\r\n            }\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._renderOriginalLine = function (count, originalModel, options, tabSize, lineNumber, decorations, sb) {\r\n        var lineTokens = originalModel.getLineTokens(lineNumber);\r\n        var lineContent = lineTokens.getLineContent();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\r\n        sb.appendASCIIString('<div class=\"view-line');\r\n        if (decorations.length === 0) {\r\n            // No char changes\r\n            sb.appendASCIIString(' char-delete');\r\n        }\r\n        sb.appendASCIIString('\" style=\"top:');\r\n        sb.appendASCIIString(String(count * options.get(49 /* lineHeight */)));\r\n        sb.appendASCIIString('px;width:1000000px;\">');\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, originalModel.mightContainNonBasicASCII());\r\n        var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, originalModel.mightContainRTL());\r\n        var output = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, actualDecorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\r\n        ), sb);\r\n        sb.appendASCIIString('</div>');\r\n        var absoluteOffsets = output.characterMapping.getAbsoluteOffsets();\r\n        return absoluteOffsets.length > 0 ? absoluteOffsets[absoluteOffsets.length - 1] : 0;\r\n    };\r\n    return InlineViewZonesComputer;\r\n}(ViewZonesComputer));\r\nfunction isChangeOrInsert(lineChange) {\r\n    return lineChange.modifiedEndLineNumber > 0;\r\n}\r\nfunction isChangeOrDelete(lineChange) {\r\n    return lineChange.originalEndLineNumber > 0;\r\n}\r\nfunction createFakeLinesDiv() {\r\n    var r = document.createElement('div');\r\n    r.className = 'diagonal-fill';\r\n    return r;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var added = theme.getColor(diffInserted);\r\n    if (added) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-added-margin-view-zone { background-color: \" + added + \"; }\");\r\n    }\r\n    var removed = theme.getColor(diffRemoved);\r\n    if (removed) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-deleted-margin-view-zone { background-color: \" + removed + \"; }\");\r\n    }\r\n    var addedOutline = theme.getColor(diffInsertedOutline);\r\n    if (addedOutline) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + addedOutline + \"; }\");\r\n    }\r\n    var removedOutline = theme.getColor(diffRemovedOutline);\r\n    if (removedOutline) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + removedOutline + \"; }\");\r\n    }\r\n    var shadow = theme.getColor(scrollbarShadow);\r\n    if (shadow) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px \" + shadow + \"; }\");\r\n    }\r\n    var border = theme.getColor(diffBorder);\r\n    if (border) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid \" + border + \"; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}