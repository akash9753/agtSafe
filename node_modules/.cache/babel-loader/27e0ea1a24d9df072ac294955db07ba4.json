{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../base/common/color.js';\nimport { MarkdownString, isEmptyMarkdownString, markedStringsEquals } from '../../../base/common/htmlContent.js';\nimport { toDisposable, DisposableStore, combinedDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { HoverProviderRegistry, TokenizationRegistry } from '../../common/modes.js';\nimport { getColorPresentations } from '../colorPicker/color.js';\nimport { ColorDetector } from '../colorPicker/colorDetector.js';\nimport { ColorPickerModel } from '../colorPicker/colorPickerModel.js';\nimport { ColorPickerWidget } from '../colorPicker/colorPickerWidget.js';\nimport { getHover } from './getHover.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { ContentHoverWidget } from './hoverWidgets.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { coalesce, isNonEmptyArray, asArray } from '../../../base/common/arrays.js';\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\nimport { getCodeActions } from '../codeAction/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\nimport { CodeActionKind } from '../codeAction/types.js';\nimport { textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nvar $ = dom.$;\nvar ColorHover = /** @class */function () {\n  function ColorHover(range, color, provider) {\n    this.range = range;\n    this.color = color;\n    this.provider = provider;\n  }\n  return ColorHover;\n}();\nvar MarkerHover = /** @class */function () {\n  function MarkerHover(range, marker) {\n    this.range = range;\n    this.marker = marker;\n  }\n  return MarkerHover;\n}();\nvar ModesContentComputer = /** @class */function () {\n  function ModesContentComputer(editor, _markerDecorationsService) {\n    this._markerDecorationsService = _markerDecorationsService;\n    this._editor = editor;\n    this._result = [];\n  }\n  ModesContentComputer.prototype.setRange = function (range) {\n    this._range = range;\n    this._result = [];\n  };\n  ModesContentComputer.prototype.clearResult = function () {\n    this._result = [];\n  };\n  ModesContentComputer.prototype.computeAsync = function (token) {\n    if (!this._editor.hasModel() || !this._range) {\n      return Promise.resolve([]);\n    }\n    var model = this._editor.getModel();\n    if (!HoverProviderRegistry.has(model)) {\n      return Promise.resolve([]);\n    }\n    return getHover(model, new Position(this._range.startLineNumber, this._range.startColumn), token);\n  };\n  ModesContentComputer.prototype.computeSync = function () {\n    var _this = this;\n    if (!this._editor.hasModel() || !this._range) {\n      return [];\n    }\n    var model = this._editor.getModel();\n    var lineNumber = this._range.startLineNumber;\n    if (lineNumber > this._editor.getModel().getLineCount()) {\n      // Illegal line number => no results\n      return [];\n    }\n    var colorDetector = ColorDetector.get(this._editor);\n    var maxColumn = model.getLineMaxColumn(lineNumber);\n    var lineDecorations = this._editor.getLineDecorations(lineNumber);\n    var didFindColor = false;\n    var hoverRange = this._range;\n    var result = lineDecorations.map(function (d) {\n      var startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      var endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n      if (startColumn > hoverRange.startColumn || hoverRange.endColumn > endColumn) {\n        return null;\n      }\n      var range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\n      var marker = _this._markerDecorationsService.getMarker(model, d);\n      if (marker) {\n        return new MarkerHover(range, marker);\n      }\n      var colorData = colorDetector.getColorData(d.range.getStartPosition());\n      if (!didFindColor && colorData) {\n        didFindColor = true;\n        var _a = colorData.colorInfo,\n          color = _a.color,\n          range_1 = _a.range;\n        return new ColorHover(range_1, color, colorData.provider);\n      } else {\n        if (isEmptyMarkdownString(d.options.hoverMessage)) {\n          return null;\n        }\n        var contents = d.options.hoverMessage ? asArray(d.options.hoverMessage) : [];\n        return {\n          contents: contents,\n          range: range\n        };\n      }\n    });\n    return coalesce(result);\n  };\n  ModesContentComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\n    // Always put synchronous messages before asynchronous ones\n    if (isFromSynchronousComputation) {\n      this._result = result.concat(this._result.sort(function (a, b) {\n        if (a instanceof ColorHover) {\n          // sort picker messages at to the top\n          return -1;\n        } else if (b instanceof ColorHover) {\n          return 1;\n        }\n        return 0;\n      }));\n    } else {\n      this._result = this._result.concat(result);\n    }\n  };\n  ModesContentComputer.prototype.getResult = function () {\n    return this._result.slice(0);\n  };\n  ModesContentComputer.prototype.getResultWithLoadingMessage = function () {\n    return this._result.slice(0).concat([this._getLoadingMessage()]);\n  };\n  ModesContentComputer.prototype._getLoadingMessage = function () {\n    return {\n      range: this._range,\n      contents: [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]\n    };\n  };\n  return ModesContentComputer;\n}();\nvar markerCodeActionTrigger = {\n  type: 2 /* Manual */,\n  filter: {\n    include: CodeActionKind.QuickFix\n  }\n};\nvar ModesContentHoverWidget = /** @class */function (_super) {\n  __extends(ModesContentHoverWidget, _super);\n  function ModesContentHoverWidget(editor, markerDecorationsService, _themeService, _keybindingService, _modeService, _openerService) {\n    if (_openerService === void 0) {\n      _openerService = NullOpenerService;\n    }\n    var _this = _super.call(this, ModesContentHoverWidget.ID, editor) || this;\n    _this._themeService = _themeService;\n    _this._keybindingService = _keybindingService;\n    _this._modeService = _modeService;\n    _this._openerService = _openerService;\n    _this.renderDisposable = _this._register(new MutableDisposable());\n    _this._messages = [];\n    _this._lastRange = null;\n    _this._computer = new ModesContentComputer(_this._editor, markerDecorationsService);\n    _this._highlightDecorations = [];\n    _this._isChangingDecorations = false;\n    _this._shouldFocus = false;\n    _this._colorPicker = null;\n    _this._hoverOperation = new HoverOperation(_this._computer, function (result) {\n      return _this._withResult(result, true);\n    }, null, function (result) {\n      return _this._withResult(result, false);\n    }, _this._editor.getOption(44 /* hover */).delay);\n    _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.FOCUS, function () {\n      if (_this._colorPicker) {\n        dom.addClass(_this.getDomNode(), 'colorpicker-hover');\n      }\n    }));\n    _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.BLUR, function () {\n      dom.removeClass(_this.getDomNode(), 'colorpicker-hover');\n    }));\n    _this._register(editor.onDidChangeConfiguration(function (e) {\n      _this._hoverOperation.setHoverTime(_this._editor.getOption(44 /* hover */).delay);\n    }));\n    _this._register(TokenizationRegistry.onDidChange(function (e) {\n      if (_this.isVisible && _this._lastRange && _this._messages.length > 0) {\n        _this._domNode.textContent = '';\n        _this._renderMessages(_this._lastRange, _this._messages);\n      }\n    }));\n    return _this;\n  }\n  ModesContentHoverWidget.prototype.dispose = function () {\n    this._hoverOperation.cancel();\n    _super.prototype.dispose.call(this);\n  };\n  ModesContentHoverWidget.prototype.onModelDecorationsChanged = function () {\n    if (this._isChangingDecorations) {\n      return;\n    }\n    if (this.isVisible) {\n      // The decorations have changed and the hover is visible,\n      // we need to recompute the displayed text\n      this._hoverOperation.cancel();\n      this._computer.clearResult();\n      if (!this._colorPicker) {\n        // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n        this._hoverOperation.start(0 /* Delayed */);\n      }\n    }\n  };\n\n  ModesContentHoverWidget.prototype.startShowingAt = function (range, mode, focus) {\n    if (this._lastRange && this._lastRange.equalsRange(range)) {\n      // We have to show the widget at the exact same range as before, so no work is needed\n      return;\n    }\n    this._hoverOperation.cancel();\n    if (this.isVisible) {\n      // The range might have changed, but the hover is visible\n      // Instead of hiding it completely, filter out messages that are still in the new range and\n      // kick off a new computation\n      if (!this._showAtPosition || this._showAtPosition.lineNumber !== range.startLineNumber) {\n        this.hide();\n      } else {\n        var filteredMessages = [];\n        for (var i = 0, len = this._messages.length; i < len; i++) {\n          var msg = this._messages[i];\n          var rng = msg.range;\n          if (rng && rng.startColumn <= range.startColumn && rng.endColumn >= range.endColumn) {\n            filteredMessages.push(msg);\n          }\n        }\n        if (filteredMessages.length > 0) {\n          if (hoverContentsEquals(filteredMessages, this._messages)) {\n            return;\n          }\n          this._renderMessages(range, filteredMessages);\n        } else {\n          this.hide();\n        }\n      }\n    }\n    this._lastRange = range;\n    this._computer.setRange(range);\n    this._shouldFocus = focus;\n    this._hoverOperation.start(mode);\n  };\n  ModesContentHoverWidget.prototype.hide = function () {\n    this._lastRange = null;\n    this._hoverOperation.cancel();\n    _super.prototype.hide.call(this);\n    this._isChangingDecorations = true;\n    this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, []);\n    this._isChangingDecorations = false;\n    this.renderDisposable.clear();\n    this._colorPicker = null;\n  };\n  ModesContentHoverWidget.prototype.isColorPickerVisible = function () {\n    if (this._colorPicker) {\n      return true;\n    }\n    return false;\n  };\n  ModesContentHoverWidget.prototype._withResult = function (result, complete) {\n    this._messages = result;\n    if (this._lastRange && this._messages.length > 0) {\n      this._renderMessages(this._lastRange, this._messages);\n    } else if (complete) {\n      this.hide();\n    }\n  };\n  ModesContentHoverWidget.prototype._renderMessages = function (renderRange, messages) {\n    var _this = this;\n    this.renderDisposable.dispose();\n    this._colorPicker = null;\n    // update column from which to show\n    var renderColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n    var highlightRange = messages[0].range ? Range.lift(messages[0].range) : null;\n    var fragment = document.createDocumentFragment();\n    var isEmptyHoverContent = true;\n    var containColorPicker = false;\n    var markdownDisposeables = new DisposableStore();\n    var markerMessages = [];\n    messages.forEach(function (msg) {\n      if (!msg.range) {\n        return;\n      }\n      renderColumn = Math.min(renderColumn, msg.range.startColumn);\n      highlightRange = highlightRange ? Range.plusRange(highlightRange, msg.range) : Range.lift(msg.range);\n      if (msg instanceof ColorHover) {\n        containColorPicker = true;\n        var _a = msg.color,\n          red = _a.red,\n          green = _a.green,\n          blue = _a.blue,\n          alpha = _a.alpha;\n        var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n        var color_1 = new Color(rgba);\n        if (!_this._editor.hasModel()) {\n          return;\n        }\n        var editorModel_1 = _this._editor.getModel();\n        var range_2 = new Range(msg.range.startLineNumber, msg.range.startColumn, msg.range.endLineNumber, msg.range.endColumn);\n        var colorInfo = {\n          range: msg.range,\n          color: msg.color\n        };\n        // create blank olor picker model and widget first to ensure it's positioned correctly.\n        var model_1 = new ColorPickerModel(color_1, [], 0);\n        var widget_1 = new ColorPickerWidget(fragment, model_1, _this._editor.getOption(105 /* pixelRatio */), _this._themeService);\n        getColorPresentations(editorModel_1, colorInfo, msg.provider, CancellationToken.None).then(function (colorPresentations) {\n          model_1.colorPresentations = colorPresentations || [];\n          if (!_this._editor.hasModel()) {\n            // gone...\n            return;\n          }\n          var originalText = _this._editor.getModel().getValueInRange(msg.range);\n          model_1.guessColorPresentation(color_1, originalText);\n          var updateEditorModel = function updateEditorModel() {\n            var textEdits;\n            var newRange;\n            if (model_1.presentation.textEdit) {\n              textEdits = [model_1.presentation.textEdit];\n              newRange = new Range(model_1.presentation.textEdit.range.startLineNumber, model_1.presentation.textEdit.range.startColumn, model_1.presentation.textEdit.range.endLineNumber, model_1.presentation.textEdit.range.endColumn);\n              newRange = newRange.setEndPosition(newRange.endLineNumber, newRange.startColumn + model_1.presentation.textEdit.text.length);\n            } else {\n              textEdits = [{\n                identifier: null,\n                range: range_2,\n                text: model_1.presentation.label,\n                forceMoveMarkers: false\n              }];\n              newRange = range_2.setEndPosition(range_2.endLineNumber, range_2.startColumn + model_1.presentation.label.length);\n            }\n            _this._editor.pushUndoStop();\n            _this._editor.executeEdits('colorpicker', textEdits);\n            if (model_1.presentation.additionalTextEdits) {\n              textEdits = __spreadArrays(model_1.presentation.additionalTextEdits);\n              _this._editor.executeEdits('colorpicker', textEdits);\n              _this.hide();\n            }\n            _this._editor.pushUndoStop();\n            range_2 = newRange;\n          };\n          var updateColorPresentations = function updateColorPresentations(color) {\n            return getColorPresentations(editorModel_1, {\n              range: range_2,\n              color: {\n                red: color.rgba.r / 255,\n                green: color.rgba.g / 255,\n                blue: color.rgba.b / 255,\n                alpha: color.rgba.a\n              }\n            }, msg.provider, CancellationToken.None).then(function (colorPresentations) {\n              model_1.colorPresentations = colorPresentations || [];\n            });\n          };\n          var colorListener = model_1.onColorFlushed(function (color) {\n            updateColorPresentations(color).then(updateEditorModel);\n          });\n          var colorChangeListener = model_1.onDidChangeColor(updateColorPresentations);\n          _this._colorPicker = widget_1;\n          _this.showAt(range_2.getStartPosition(), range_2, _this._shouldFocus);\n          _this.updateContents(fragment);\n          _this._colorPicker.layout();\n          _this.renderDisposable.value = combinedDisposable(colorListener, colorChangeListener, widget_1, markdownDisposeables);\n        });\n      } else {\n        if (msg instanceof MarkerHover) {\n          markerMessages.push(msg);\n          isEmptyHoverContent = false;\n        } else {\n          msg.contents.filter(function (contents) {\n            return !isEmptyMarkdownString(contents);\n          }).forEach(function (contents) {\n            var markdownHoverElement = $('div.hover-row.markdown-hover');\n            var hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            var renderer = markdownDisposeables.add(new MarkdownRenderer(_this._editor, _this._modeService, _this._openerService));\n            markdownDisposeables.add(renderer.onDidRenderCodeBlock(function () {\n              hoverContentsElement.className = 'hover-contents code-hover-contents';\n              _this.onContentsChange();\n            }));\n            var renderedContents = markdownDisposeables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n            isEmptyHoverContent = false;\n          });\n        }\n      }\n    });\n    if (markerMessages.length) {\n      markerMessages.forEach(function (msg) {\n        return fragment.appendChild(_this.renderMarkerHover(msg));\n      });\n      var markerHoverForStatusbar = markerMessages.length === 1 ? markerMessages[0] : markerMessages.sort(function (a, b) {\n        return MarkerSeverity.compare(a.marker.severity, b.marker.severity);\n      })[0];\n      fragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar));\n    }\n    // show\n    if (!containColorPicker && !isEmptyHoverContent) {\n      this.showAt(new Position(renderRange.startLineNumber, renderColumn), highlightRange, this._shouldFocus);\n      this.updateContents(fragment);\n    }\n    this._isChangingDecorations = true;\n    this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, highlightRange ? [{\n      range: highlightRange,\n      options: ModesContentHoverWidget._DECORATION_OPTIONS\n    }] : []);\n    this._isChangingDecorations = false;\n  };\n  ModesContentHoverWidget.prototype.renderMarkerHover = function (markerHover) {\n    var _this = this;\n    var hoverElement = $('div.hover-row');\n    var markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n    var _a = markerHover.marker,\n      source = _a.source,\n      message = _a.message,\n      code = _a.code,\n      relatedInformation = _a.relatedInformation;\n    this._editor.applyFontInfo(markerElement);\n    var messageElement = dom.append(markerElement, $('span'));\n    messageElement.style.whiteSpace = 'pre-wrap';\n    messageElement.innerText = message;\n    if (source || code) {\n      if (typeof code === 'string') {\n        var detailsElement = dom.append(markerElement, $('span'));\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n        detailsElement.innerText = source && code ? source + \"(\" + code + \")\" : source ? source : \"(\" + code + \")\";\n      } else {\n        if (code) {\n          var sourceAndCodeElement = $('span');\n          if (source) {\n            var sourceElement = dom.append(sourceAndCodeElement, $('span'));\n            sourceElement.innerText = source;\n          }\n          this._codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n          this._codeLink.setAttribute('href', code.link.toString());\n          this._codeLink.onclick = function (e) {\n            _this._openerService.open(code.link);\n            e.preventDefault();\n            e.stopPropagation();\n          };\n          var codeElement = dom.append(this._codeLink, $('span'));\n          codeElement.innerText = code.value;\n          var detailsElement = dom.append(markerElement, sourceAndCodeElement);\n          detailsElement.style.opacity = '0.6';\n          detailsElement.style.paddingLeft = '6px';\n        }\n      }\n    }\n    if (isNonEmptyArray(relatedInformation)) {\n      var _loop_1 = function _loop_1(message_1, resource, startLineNumber, startColumn) {\n        var relatedInfoContainer = dom.append(markerElement, $('div'));\n        relatedInfoContainer.style.marginTop = '8px';\n        var a = dom.append(relatedInfoContainer, $('a'));\n        a.innerText = basename(resource) + \"(\" + startLineNumber + \", \" + startColumn + \"): \";\n        a.style.cursor = 'pointer';\n        a.onclick = function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          if (_this._openerService) {\n            _this._openerService.open(resource.with({\n              fragment: startLineNumber + \",\" + startColumn\n            }), {\n              fromUserGesture: true\n            }).catch(onUnexpectedError);\n          }\n        };\n        var messageElement_1 = dom.append(relatedInfoContainer, $('span'));\n        messageElement_1.innerText = message_1;\n        this_1._editor.applyFontInfo(messageElement_1);\n      };\n      var this_1 = this;\n      for (var _i = 0, relatedInformation_1 = relatedInformation; _i < relatedInformation_1.length; _i++) {\n        var _b = relatedInformation_1[_i],\n          message_1 = _b.message,\n          resource = _b.resource,\n          startLineNumber = _b.startLineNumber,\n          startColumn = _b.startColumn;\n        _loop_1(message_1, resource, startLineNumber, startColumn);\n      }\n    }\n    return hoverElement;\n  };\n  ModesContentHoverWidget.prototype.renderMarkerStatusbar = function (markerHover) {\n    var _this = this;\n    var hoverElement = $('div.hover-row.status-bar');\n    var disposables = new DisposableStore();\n    var actionsElement = dom.append(hoverElement, $('div.actions'));\n    if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n      disposables.add(this.renderAction(actionsElement, {\n        label: nls.localize('peek problem', \"Peek Problem\"),\n        commandId: NextMarkerAction.ID,\n        run: function run() {\n          _this.hide();\n          MarkerController.get(_this._editor).show(markerHover.marker);\n          _this._editor.focus();\n        }\n      }));\n    }\n    var quickfixPlaceholderElement = dom.append(actionsElement, $('div'));\n    quickfixPlaceholderElement.style.opacity = '0';\n    quickfixPlaceholderElement.style.transition = 'opacity 0.2s';\n    setTimeout(function () {\n      return quickfixPlaceholderElement.style.opacity = '1';\n    }, 200);\n    quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\");\n    disposables.add(toDisposable(function () {\n      return quickfixPlaceholderElement.remove();\n    }));\n    var codeActionsPromise = this.getCodeActions(markerHover.marker);\n    disposables.add(toDisposable(function () {\n      return codeActionsPromise.cancel();\n    }));\n    codeActionsPromise.then(function (actions) {\n      quickfixPlaceholderElement.style.transition = '';\n      quickfixPlaceholderElement.style.opacity = '1';\n      if (!actions.validActions.length) {\n        actions.dispose();\n        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n        return;\n      }\n      quickfixPlaceholderElement.remove();\n      var showing = false;\n      disposables.add(toDisposable(function () {\n        if (!showing) {\n          actions.dispose();\n        }\n      }));\n      disposables.add(_this.renderAction(actionsElement, {\n        label: nls.localize('quick fixes', \"Quick Fix...\"),\n        commandId: QuickFixAction.Id,\n        run: function run(target) {\n          showing = true;\n          var controller = QuickFixController.get(_this._editor);\n          var elementPosition = dom.getDomNodePagePosition(target);\n          controller.showCodeActions(markerCodeActionTrigger, actions, {\n            x: elementPosition.left + 6,\n            y: elementPosition.top + elementPosition.height + 6\n          });\n        }\n      }));\n    });\n    this.renderDisposable.value = disposables;\n    return hoverElement;\n  };\n  ModesContentHoverWidget.prototype.getCodeActions = function (marker) {\n    var _this = this;\n    return createCancelablePromise(function (cancellationToken) {\n      return getCodeActions(_this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, cancellationToken);\n    });\n  };\n  ModesContentHoverWidget.prototype.renderAction = function (parent, actionOptions) {\n    var actionContainer = dom.append(parent, $('div.action-container'));\n    var action = dom.append(actionContainer, $('a.action'));\n    if (actionOptions.iconClass) {\n      dom.append(action, $(\"span.icon.\" + actionOptions.iconClass));\n    }\n    var label = dom.append(action, $('span'));\n    label.textContent = actionOptions.label;\n    var keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n    if (keybinding) {\n      label.title = actionOptions.label + \" (\" + keybinding.getLabel() + \")\";\n    }\n    return dom.addDisposableListener(actionContainer, dom.EventType.CLICK, function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      actionOptions.run(actionContainer);\n    });\n  };\n  ModesContentHoverWidget.ID = 'editor.contrib.modesContentHoverWidget';\n  ModesContentHoverWidget._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    className: 'hoverHighlight'\n  });\n  return ModesContentHoverWidget;\n}(ContentHoverWidget);\nexport { ModesContentHoverWidget };\nfunction hoverContentsEquals(first, second) {\n  if (!first && second || first && !second || first.length !== second.length) {\n    return false;\n  }\n  for (var i = 0; i < first.length; i++) {\n    var firstElement = first[i];\n    var secondElement = second[i];\n    if (firstElement instanceof MarkerHover && secondElement instanceof MarkerHover) {\n      return IMarkerData.makeKey(firstElement.marker) === IMarkerData.makeKey(secondElement.marker);\n    }\n    if (firstElement instanceof ColorHover || secondElement instanceof ColorHover) {\n      return false;\n    }\n    if (firstElement instanceof MarkerHover || secondElement instanceof MarkerHover) {\n      return false;\n    }\n    if (!markedStringsEquals(firstElement.contents, secondElement.contents)) {\n      return false;\n    }\n  }\n  return true;\n}\nregisterThemingParticipant(function (theme, collector) {\n  var linkFg = theme.getColor(textLinkForeground);\n  if (linkFg) {\n    collector.addRule(\".monaco-editor-hover .hover-contents a.code-link span:hover { color: \" + linkFg + \"; }\");\n  }\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","nls","dom","CancellationToken","Color","RGBA","MarkdownString","isEmptyMarkdownString","markedStringsEquals","toDisposable","DisposableStore","combinedDisposable","MutableDisposable","Position","Range","ModelDecorationOptions","HoverProviderRegistry","TokenizationRegistry","getColorPresentations","ColorDetector","ColorPickerModel","ColorPickerWidget","getHover","HoverOperation","ContentHoverWidget","MarkdownRenderer","registerThemingParticipant","coalesce","isNonEmptyArray","asArray","IMarkerData","MarkerSeverity","basename","onUnexpectedError","NullOpenerService","MarkerController","NextMarkerAction","createCancelablePromise","getCodeActions","QuickFixAction","QuickFixController","CodeActionKind","textLinkForeground","$","ColorHover","range","color","provider","MarkerHover","marker","ModesContentComputer","editor","_markerDecorationsService","_editor","_result","setRange","_range","clearResult","computeAsync","token","hasModel","Promise","resolve","model","getModel","has","startLineNumber","startColumn","computeSync","_this","lineNumber","getLineCount","colorDetector","get","maxColumn","getLineMaxColumn","lineDecorations","getLineDecorations","didFindColor","hoverRange","result","map","endColumn","endLineNumber","getMarker","colorData","getColorData","getStartPosition","_a","colorInfo","range_1","options","hoverMessage","contents","onResult","isFromSynchronousComputation","concat","sort","getResult","slice","getResultWithLoadingMessage","_getLoadingMessage","appendText","localize","markerCodeActionTrigger","type","filter","include","QuickFix","ModesContentHoverWidget","_super","markerDecorationsService","_themeService","_keybindingService","_modeService","_openerService","call","ID","renderDisposable","_register","_messages","_lastRange","_computer","_highlightDecorations","_isChangingDecorations","_shouldFocus","_colorPicker","_hoverOperation","_withResult","getOption","delay","addStandardDisposableListener","getDomNode","EventType","FOCUS","addClass","BLUR","removeClass","onDidChangeConfiguration","e","setHoverTime","onDidChange","isVisible","_domNode","textContent","_renderMessages","dispose","cancel","onModelDecorationsChanged","start","startShowingAt","mode","focus","equalsRange","_showAtPosition","hide","filteredMessages","len","msg","rng","push","hoverContentsEquals","deltaDecorations","clear","isColorPickerVisible","complete","renderRange","messages","renderColumn","highlightRange","lift","fragment","document","createDocumentFragment","isEmptyHoverContent","containColorPicker","markdownDisposeables","markerMessages","forEach","Math","min","plusRange","red","green","blue","alpha","rgba","round","color_1","editorModel_1","range_2","model_1","widget_1","None","then","colorPresentations","originalText","getValueInRange","guessColorPresentation","updateEditorModel","textEdits","newRange","presentation","textEdit","setEndPosition","text","identifier","label","forceMoveMarkers","pushUndoStop","executeEdits","additionalTextEdits","updateColorPresentations","g","colorListener","onColorFlushed","colorChangeListener","onDidChangeColor","showAt","updateContents","layout","value","markdownHoverElement","hoverContentsElement","append","renderer","add","onDidRenderCodeBlock","className","onContentsChange","renderedContents","render","appendChild","element","renderMarkerHover","markerHoverForStatusbar","compare","severity","renderMarkerStatusbar","_DECORATION_OPTIONS","markerHover","hoverElement","markerElement","source","message","code","relatedInformation","applyFontInfo","messageElement","style","whiteSpace","innerText","detailsElement","opacity","paddingLeft","sourceAndCodeElement","sourceElement","_codeLink","setAttribute","link","toString","onclick","open","preventDefault","stopPropagation","codeElement","_loop_1","message_1","resource","relatedInfoContainer","marginTop","cursor","with","fromUserGesture","catch","messageElement_1","this_1","_i","relatedInformation_1","_b","disposables","actionsElement","Error","Warning","Info","renderAction","commandId","run","show","quickfixPlaceholderElement","transition","setTimeout","remove","codeActionsPromise","actions","validActions","showing","Id","target","controller","elementPosition","getDomNodePagePosition","showCodeActions","x","left","y","top","height","cancellationToken","parent","actionOptions","actionContainer","action","iconClass","keybinding","lookupKeybinding","title","getLabel","addDisposableListener","CLICK","register","first","second","firstElement","secondElement","makeKey","theme","collector","linkFg","getColor","addRule"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesContentHover.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Color, RGBA } from '../../../base/common/color.js';\r\nimport { MarkdownString, isEmptyMarkdownString, markedStringsEquals } from '../../../base/common/htmlContent.js';\r\nimport { toDisposable, DisposableStore, combinedDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { HoverProviderRegistry, TokenizationRegistry } from '../../common/modes.js';\r\nimport { getColorPresentations } from '../colorPicker/color.js';\r\nimport { ColorDetector } from '../colorPicker/colorDetector.js';\r\nimport { ColorPickerModel } from '../colorPicker/colorPickerModel.js';\r\nimport { ColorPickerWidget } from '../colorPicker/colorPickerWidget.js';\r\nimport { getHover } from './getHover.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { ContentHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { coalesce, isNonEmptyArray, asArray } from '../../../base/common/arrays.js';\r\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\r\nimport { createCancelablePromise } from '../../../base/common/async.js';\r\nimport { getCodeActions } from '../codeAction/codeAction.js';\r\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\r\nimport { CodeActionKind } from '../codeAction/types.js';\r\nimport { textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nvar $ = dom.$;\r\nvar ColorHover = /** @class */ (function () {\r\n    function ColorHover(range, color, provider) {\r\n        this.range = range;\r\n        this.color = color;\r\n        this.provider = provider;\r\n    }\r\n    return ColorHover;\r\n}());\r\nvar MarkerHover = /** @class */ (function () {\r\n    function MarkerHover(range, marker) {\r\n        this.range = range;\r\n        this.marker = marker;\r\n    }\r\n    return MarkerHover;\r\n}());\r\nvar ModesContentComputer = /** @class */ (function () {\r\n    function ModesContentComputer(editor, _markerDecorationsService) {\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._editor = editor;\r\n        this._result = [];\r\n    }\r\n    ModesContentComputer.prototype.setRange = function (range) {\r\n        this._range = range;\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.computeAsync = function (token) {\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return Promise.resolve([]);\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!HoverProviderRegistry.has(model)) {\r\n            return Promise.resolve([]);\r\n        }\r\n        return getHover(model, new Position(this._range.startLineNumber, this._range.startColumn), token);\r\n    };\r\n    ModesContentComputer.prototype.computeSync = function () {\r\n        var _this = this;\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return [];\r\n        }\r\n        var model = this._editor.getModel();\r\n        var lineNumber = this._range.startLineNumber;\r\n        if (lineNumber > this._editor.getModel().getLineCount()) {\r\n            // Illegal line number => no results\r\n            return [];\r\n        }\r\n        var colorDetector = ColorDetector.get(this._editor);\r\n        var maxColumn = model.getLineMaxColumn(lineNumber);\r\n        var lineDecorations = this._editor.getLineDecorations(lineNumber);\r\n        var didFindColor = false;\r\n        var hoverRange = this._range;\r\n        var result = lineDecorations.map(function (d) {\r\n            var startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            var endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            if (startColumn > hoverRange.startColumn || hoverRange.endColumn > endColumn) {\r\n                return null;\r\n            }\r\n            var range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\r\n            var marker = _this._markerDecorationsService.getMarker(model, d);\r\n            if (marker) {\r\n                return new MarkerHover(range, marker);\r\n            }\r\n            var colorData = colorDetector.getColorData(d.range.getStartPosition());\r\n            if (!didFindColor && colorData) {\r\n                didFindColor = true;\r\n                var _a = colorData.colorInfo, color = _a.color, range_1 = _a.range;\r\n                return new ColorHover(range_1, color, colorData.provider);\r\n            }\r\n            else {\r\n                if (isEmptyMarkdownString(d.options.hoverMessage)) {\r\n                    return null;\r\n                }\r\n                var contents = d.options.hoverMessage ? asArray(d.options.hoverMessage) : [];\r\n                return { contents: contents, range: range };\r\n            }\r\n        });\r\n        return coalesce(result);\r\n    };\r\n    ModesContentComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        // Always put synchronous messages before asynchronous ones\r\n        if (isFromSynchronousComputation) {\r\n            this._result = result.concat(this._result.sort(function (a, b) {\r\n                if (a instanceof ColorHover) { // sort picker messages at to the top\r\n                    return -1;\r\n                }\r\n                else if (b instanceof ColorHover) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            }));\r\n        }\r\n        else {\r\n            this._result = this._result.concat(result);\r\n        }\r\n    };\r\n    ModesContentComputer.prototype.getResult = function () {\r\n        return this._result.slice(0);\r\n    };\r\n    ModesContentComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this._result.slice(0).concat([this._getLoadingMessage()]);\r\n    };\r\n    ModesContentComputer.prototype._getLoadingMessage = function () {\r\n        return {\r\n            range: this._range,\r\n            contents: [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]\r\n        };\r\n    };\r\n    return ModesContentComputer;\r\n}());\r\nvar markerCodeActionTrigger = {\r\n    type: 2 /* Manual */,\r\n    filter: { include: CodeActionKind.QuickFix }\r\n};\r\nvar ModesContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesContentHoverWidget, _super);\r\n    function ModesContentHoverWidget(editor, markerDecorationsService, _themeService, _keybindingService, _modeService, _openerService) {\r\n        if (_openerService === void 0) { _openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesContentHoverWidget.ID, editor) || this;\r\n        _this._themeService = _themeService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._modeService = _modeService;\r\n        _this._openerService = _openerService;\r\n        _this.renderDisposable = _this._register(new MutableDisposable());\r\n        _this._messages = [];\r\n        _this._lastRange = null;\r\n        _this._computer = new ModesContentComputer(_this._editor, markerDecorationsService);\r\n        _this._highlightDecorations = [];\r\n        _this._isChangingDecorations = false;\r\n        _this._shouldFocus = false;\r\n        _this._colorPicker = null;\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result, true); }, null, function (result) { return _this._withResult(result, false); }, _this._editor.getOption(44 /* hover */).delay);\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.FOCUS, function () {\r\n            if (_this._colorPicker) {\r\n                dom.addClass(_this.getDomNode(), 'colorpicker-hover');\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.BLUR, function () {\r\n            dom.removeClass(_this.getDomNode(), 'colorpicker-hover');\r\n        }));\r\n        _this._register(editor.onDidChangeConfiguration(function (e) {\r\n            _this._hoverOperation.setHoverTime(_this._editor.getOption(44 /* hover */).delay);\r\n        }));\r\n        _this._register(TokenizationRegistry.onDidChange(function (e) {\r\n            if (_this.isVisible && _this._lastRange && _this._messages.length > 0) {\r\n                _this._domNode.textContent = '';\r\n                _this._renderMessages(_this._lastRange, _this._messages);\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    ModesContentHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesContentHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this._isChangingDecorations) {\r\n            return;\r\n        }\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            if (!this._colorPicker) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\r\n                this._hoverOperation.start(0 /* Delayed */);\r\n            }\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype.startShowingAt = function (range, mode, focus) {\r\n        if (this._lastRange && this._lastRange.equalsRange(range)) {\r\n            // We have to show the widget at the exact same range as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        if (this.isVisible) {\r\n            // The range might have changed, but the hover is visible\r\n            // Instead of hiding it completely, filter out messages that are still in the new range and\r\n            // kick off a new computation\r\n            if (!this._showAtPosition || this._showAtPosition.lineNumber !== range.startLineNumber) {\r\n                this.hide();\r\n            }\r\n            else {\r\n                var filteredMessages = [];\r\n                for (var i = 0, len = this._messages.length; i < len; i++) {\r\n                    var msg = this._messages[i];\r\n                    var rng = msg.range;\r\n                    if (rng && rng.startColumn <= range.startColumn && rng.endColumn >= range.endColumn) {\r\n                        filteredMessages.push(msg);\r\n                    }\r\n                }\r\n                if (filteredMessages.length > 0) {\r\n                    if (hoverContentsEquals(filteredMessages, this._messages)) {\r\n                        return;\r\n                    }\r\n                    this._renderMessages(range, filteredMessages);\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            }\r\n        }\r\n        this._lastRange = range;\r\n        this._computer.setRange(range);\r\n        this._shouldFocus = focus;\r\n        this._hoverOperation.start(mode);\r\n    };\r\n    ModesContentHoverWidget.prototype.hide = function () {\r\n        this._lastRange = null;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, []);\r\n        this._isChangingDecorations = false;\r\n        this.renderDisposable.clear();\r\n        this._colorPicker = null;\r\n    };\r\n    ModesContentHoverWidget.prototype.isColorPickerVisible = function () {\r\n        if (this._colorPicker) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ModesContentHoverWidget.prototype._withResult = function (result, complete) {\r\n        this._messages = result;\r\n        if (this._lastRange && this._messages.length > 0) {\r\n            this._renderMessages(this._lastRange, this._messages);\r\n        }\r\n        else if (complete) {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype._renderMessages = function (renderRange, messages) {\r\n        var _this = this;\r\n        this.renderDisposable.dispose();\r\n        this._colorPicker = null;\r\n        // update column from which to show\r\n        var renderColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        var highlightRange = messages[0].range ? Range.lift(messages[0].range) : null;\r\n        var fragment = document.createDocumentFragment();\r\n        var isEmptyHoverContent = true;\r\n        var containColorPicker = false;\r\n        var markdownDisposeables = new DisposableStore();\r\n        var markerMessages = [];\r\n        messages.forEach(function (msg) {\r\n            if (!msg.range) {\r\n                return;\r\n            }\r\n            renderColumn = Math.min(renderColumn, msg.range.startColumn);\r\n            highlightRange = highlightRange ? Range.plusRange(highlightRange, msg.range) : Range.lift(msg.range);\r\n            if (msg instanceof ColorHover) {\r\n                containColorPicker = true;\r\n                var _a = msg.color, red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\r\n                var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n                var color_1 = new Color(rgba);\r\n                if (!_this._editor.hasModel()) {\r\n                    return;\r\n                }\r\n                var editorModel_1 = _this._editor.getModel();\r\n                var range_2 = new Range(msg.range.startLineNumber, msg.range.startColumn, msg.range.endLineNumber, msg.range.endColumn);\r\n                var colorInfo = { range: msg.range, color: msg.color };\r\n                // create blank olor picker model and widget first to ensure it's positioned correctly.\r\n                var model_1 = new ColorPickerModel(color_1, [], 0);\r\n                var widget_1 = new ColorPickerWidget(fragment, model_1, _this._editor.getOption(105 /* pixelRatio */), _this._themeService);\r\n                getColorPresentations(editorModel_1, colorInfo, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                    model_1.colorPresentations = colorPresentations || [];\r\n                    if (!_this._editor.hasModel()) {\r\n                        // gone...\r\n                        return;\r\n                    }\r\n                    var originalText = _this._editor.getModel().getValueInRange(msg.range);\r\n                    model_1.guessColorPresentation(color_1, originalText);\r\n                    var updateEditorModel = function () {\r\n                        var textEdits;\r\n                        var newRange;\r\n                        if (model_1.presentation.textEdit) {\r\n                            textEdits = [model_1.presentation.textEdit];\r\n                            newRange = new Range(model_1.presentation.textEdit.range.startLineNumber, model_1.presentation.textEdit.range.startColumn, model_1.presentation.textEdit.range.endLineNumber, model_1.presentation.textEdit.range.endColumn);\r\n                            newRange = newRange.setEndPosition(newRange.endLineNumber, newRange.startColumn + model_1.presentation.textEdit.text.length);\r\n                        }\r\n                        else {\r\n                            textEdits = [{ identifier: null, range: range_2, text: model_1.presentation.label, forceMoveMarkers: false }];\r\n                            newRange = range_2.setEndPosition(range_2.endLineNumber, range_2.startColumn + model_1.presentation.label.length);\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        _this._editor.executeEdits('colorpicker', textEdits);\r\n                        if (model_1.presentation.additionalTextEdits) {\r\n                            textEdits = __spreadArrays(model_1.presentation.additionalTextEdits);\r\n                            _this._editor.executeEdits('colorpicker', textEdits);\r\n                            _this.hide();\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        range_2 = newRange;\r\n                    };\r\n                    var updateColorPresentations = function (color) {\r\n                        return getColorPresentations(editorModel_1, {\r\n                            range: range_2,\r\n                            color: {\r\n                                red: color.rgba.r / 255,\r\n                                green: color.rgba.g / 255,\r\n                                blue: color.rgba.b / 255,\r\n                                alpha: color.rgba.a\r\n                            }\r\n                        }, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                            model_1.colorPresentations = colorPresentations || [];\r\n                        });\r\n                    };\r\n                    var colorListener = model_1.onColorFlushed(function (color) {\r\n                        updateColorPresentations(color).then(updateEditorModel);\r\n                    });\r\n                    var colorChangeListener = model_1.onDidChangeColor(updateColorPresentations);\r\n                    _this._colorPicker = widget_1;\r\n                    _this.showAt(range_2.getStartPosition(), range_2, _this._shouldFocus);\r\n                    _this.updateContents(fragment);\r\n                    _this._colorPicker.layout();\r\n                    _this.renderDisposable.value = combinedDisposable(colorListener, colorChangeListener, widget_1, markdownDisposeables);\r\n                });\r\n            }\r\n            else {\r\n                if (msg instanceof MarkerHover) {\r\n                    markerMessages.push(msg);\r\n                    isEmptyHoverContent = false;\r\n                }\r\n                else {\r\n                    msg.contents\r\n                        .filter(function (contents) { return !isEmptyMarkdownString(contents); })\r\n                        .forEach(function (contents) {\r\n                        var markdownHoverElement = $('div.hover-row.markdown-hover');\r\n                        var hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n                        var renderer = markdownDisposeables.add(new MarkdownRenderer(_this._editor, _this._modeService, _this._openerService));\r\n                        markdownDisposeables.add(renderer.onDidRenderCodeBlock(function () {\r\n                            hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                            _this.onContentsChange();\r\n                        }));\r\n                        var renderedContents = markdownDisposeables.add(renderer.render(contents));\r\n                        hoverContentsElement.appendChild(renderedContents.element);\r\n                        fragment.appendChild(markdownHoverElement);\r\n                        isEmptyHoverContent = false;\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        if (markerMessages.length) {\r\n            markerMessages.forEach(function (msg) { return fragment.appendChild(_this.renderMarkerHover(msg)); });\r\n            var markerHoverForStatusbar = markerMessages.length === 1 ? markerMessages[0] : markerMessages.sort(function (a, b) { return MarkerSeverity.compare(a.marker.severity, b.marker.severity); })[0];\r\n            fragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar));\r\n        }\r\n        // show\r\n        if (!containColorPicker && !isEmptyHoverContent) {\r\n            this.showAt(new Position(renderRange.startLineNumber, renderColumn), highlightRange, this._shouldFocus);\r\n            this.updateContents(fragment);\r\n        }\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, highlightRange ? [{\r\n                range: highlightRange,\r\n                options: ModesContentHoverWidget._DECORATION_OPTIONS\r\n            }] : []);\r\n        this._isChangingDecorations = false;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerHover = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row');\r\n        var markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\r\n        var _a = markerHover.marker, source = _a.source, message = _a.message, code = _a.code, relatedInformation = _a.relatedInformation;\r\n        this._editor.applyFontInfo(markerElement);\r\n        var messageElement = dom.append(markerElement, $('span'));\r\n        messageElement.style.whiteSpace = 'pre-wrap';\r\n        messageElement.innerText = message;\r\n        if (source || code) {\r\n            if (typeof code === 'string') {\r\n                var detailsElement = dom.append(markerElement, $('span'));\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n                detailsElement.innerText = source && code ? source + \"(\" + code + \")\" : source ? source : \"(\" + code + \")\";\r\n            }\r\n            else {\r\n                if (code) {\r\n                    var sourceAndCodeElement = $('span');\r\n                    if (source) {\r\n                        var sourceElement = dom.append(sourceAndCodeElement, $('span'));\r\n                        sourceElement.innerText = source;\r\n                    }\r\n                    this._codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\r\n                    this._codeLink.setAttribute('href', code.link.toString());\r\n                    this._codeLink.onclick = function (e) {\r\n                        _this._openerService.open(code.link);\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    };\r\n                    var codeElement = dom.append(this._codeLink, $('span'));\r\n                    codeElement.innerText = code.value;\r\n                    var detailsElement = dom.append(markerElement, sourceAndCodeElement);\r\n                    detailsElement.style.opacity = '0.6';\r\n                    detailsElement.style.paddingLeft = '6px';\r\n                }\r\n            }\r\n        }\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            var _loop_1 = function (message_1, resource, startLineNumber, startColumn) {\r\n                var relatedInfoContainer = dom.append(markerElement, $('div'));\r\n                relatedInfoContainer.style.marginTop = '8px';\r\n                var a = dom.append(relatedInfoContainer, $('a'));\r\n                a.innerText = basename(resource) + \"(\" + startLineNumber + \", \" + startColumn + \"): \";\r\n                a.style.cursor = 'pointer';\r\n                a.onclick = function (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (_this._openerService) {\r\n                        _this._openerService.open(resource.with({ fragment: startLineNumber + \",\" + startColumn }), { fromUserGesture: true }).catch(onUnexpectedError);\r\n                    }\r\n                };\r\n                var messageElement_1 = dom.append(relatedInfoContainer, $('span'));\r\n                messageElement_1.innerText = message_1;\r\n                this_1._editor.applyFontInfo(messageElement_1);\r\n            };\r\n            var this_1 = this;\r\n            for (var _i = 0, relatedInformation_1 = relatedInformation; _i < relatedInformation_1.length; _i++) {\r\n                var _b = relatedInformation_1[_i], message_1 = _b.message, resource = _b.resource, startLineNumber = _b.startLineNumber, startColumn = _b.startColumn;\r\n                _loop_1(message_1, resource, startLineNumber, startColumn);\r\n            }\r\n        }\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerStatusbar = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row.status-bar');\r\n        var disposables = new DisposableStore();\r\n        var actionsElement = dom.append(hoverElement, $('div.actions'));\r\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\r\n            disposables.add(this.renderAction(actionsElement, {\r\n                label: nls.localize('peek problem', \"Peek Problem\"),\r\n                commandId: NextMarkerAction.ID,\r\n                run: function () {\r\n                    _this.hide();\r\n                    MarkerController.get(_this._editor).show(markerHover.marker);\r\n                    _this._editor.focus();\r\n                }\r\n            }));\r\n        }\r\n        var quickfixPlaceholderElement = dom.append(actionsElement, $('div'));\r\n        quickfixPlaceholderElement.style.opacity = '0';\r\n        quickfixPlaceholderElement.style.transition = 'opacity 0.2s';\r\n        setTimeout(function () { return quickfixPlaceholderElement.style.opacity = '1'; }, 200);\r\n        quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\");\r\n        disposables.add(toDisposable(function () { return quickfixPlaceholderElement.remove(); }));\r\n        var codeActionsPromise = this.getCodeActions(markerHover.marker);\r\n        disposables.add(toDisposable(function () { return codeActionsPromise.cancel(); }));\r\n        codeActionsPromise.then(function (actions) {\r\n            quickfixPlaceholderElement.style.transition = '';\r\n            quickfixPlaceholderElement.style.opacity = '1';\r\n            if (!actions.validActions.length) {\r\n                actions.dispose();\r\n                quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                return;\r\n            }\r\n            quickfixPlaceholderElement.remove();\r\n            var showing = false;\r\n            disposables.add(toDisposable(function () {\r\n                if (!showing) {\r\n                    actions.dispose();\r\n                }\r\n            }));\r\n            disposables.add(_this.renderAction(actionsElement, {\r\n                label: nls.localize('quick fixes', \"Quick Fix...\"),\r\n                commandId: QuickFixAction.Id,\r\n                run: function (target) {\r\n                    showing = true;\r\n                    var controller = QuickFixController.get(_this._editor);\r\n                    var elementPosition = dom.getDomNodePagePosition(target);\r\n                    controller.showCodeActions(markerCodeActionTrigger, actions, {\r\n                        x: elementPosition.left + 6,\r\n                        y: elementPosition.top + elementPosition.height + 6\r\n                    });\r\n                }\r\n            }));\r\n        });\r\n        this.renderDisposable.value = disposables;\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.getCodeActions = function (marker) {\r\n        var _this = this;\r\n        return createCancelablePromise(function (cancellationToken) {\r\n            return getCodeActions(_this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, cancellationToken);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.prototype.renderAction = function (parent, actionOptions) {\r\n        var actionContainer = dom.append(parent, $('div.action-container'));\r\n        var action = dom.append(actionContainer, $('a.action'));\r\n        if (actionOptions.iconClass) {\r\n            dom.append(action, $(\"span.icon.\" + actionOptions.iconClass));\r\n        }\r\n        var label = dom.append(action, $('span'));\r\n        label.textContent = actionOptions.label;\r\n        var keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\r\n        if (keybinding) {\r\n            label.title = actionOptions.label + \" (\" + keybinding.getLabel() + \")\";\r\n        }\r\n        return dom.addDisposableListener(actionContainer, dom.EventType.CLICK, function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            actionOptions.run(actionContainer);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.ID = 'editor.contrib.modesContentHoverWidget';\r\n    ModesContentHoverWidget._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n        className: 'hoverHighlight'\r\n    });\r\n    return ModesContentHoverWidget;\r\n}(ContentHoverWidget));\r\nexport { ModesContentHoverWidget };\r\nfunction hoverContentsEquals(first, second) {\r\n    if ((!first && second) || (first && !second) || first.length !== second.length) {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < first.length; i++) {\r\n        var firstElement = first[i];\r\n        var secondElement = second[i];\r\n        if (firstElement instanceof MarkerHover && secondElement instanceof MarkerHover) {\r\n            return IMarkerData.makeKey(firstElement.marker) === IMarkerData.makeKey(secondElement.marker);\r\n        }\r\n        if (firstElement instanceof ColorHover || secondElement instanceof ColorHover) {\r\n            return false;\r\n        }\r\n        if (firstElement instanceof MarkerHover || secondElement instanceof MarkerHover) {\r\n            return false;\r\n        }\r\n        if (!markedStringsEquals(firstElement.contents, secondElement.contents)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var linkFg = theme.getColor(textLinkForeground);\r\n    if (linkFg) {\r\n        collector.addRule(\".monaco-editor-hover .hover-contents a.code-link span:hover { color: \" + linkFg + \"; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}