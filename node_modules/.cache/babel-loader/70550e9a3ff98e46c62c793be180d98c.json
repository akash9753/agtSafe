{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as browser from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardWheelEvent } from '../../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { HitTestContext, MouseTarget, MouseTargetFactory } from './mouseTarget.js';\nimport { ClientCoordinates, EditorMouseEventFactory, GlobalEditorMouseMoveMonitor, createEditorPagePosition } from '../editorDom.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { Position } from '../../common/core/position.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\n/**\r\n * Merges mouse events when mouse move events are throttled\r\n */\nexport function createMouseMoveEventMerger(mouseTargetFactory) {\n  return function (lastEvent, currentEvent) {\n    var targetIsWidget = false;\n    if (mouseTargetFactory) {\n      targetIsWidget = mouseTargetFactory.mouseTargetIsWidget(currentEvent);\n    }\n    if (!targetIsWidget) {\n      currentEvent.preventDefault();\n    }\n    return currentEvent;\n  };\n}\nvar MouseHandler = /** @class */function (_super) {\n  __extends(MouseHandler, _super);\n  function MouseHandler(context, viewController, viewHelper) {\n    var _this = _super.call(this) || this;\n    _this._isFocused = false;\n    _this._context = context;\n    _this.viewController = viewController;\n    _this.viewHelper = viewHelper;\n    _this.mouseTargetFactory = new MouseTargetFactory(_this._context, viewHelper);\n    _this._mouseDownOperation = _this._register(new MouseDownOperation(_this._context, _this.viewController, _this.viewHelper, function (e, testEventTarget) {\n      return _this._createMouseTarget(e, testEventTarget);\n    }, function (e) {\n      return _this._getMouseColumn(e);\n    }));\n    _this._asyncFocus = _this._register(new RunOnceScheduler(function () {\n      return _this.viewHelper.focusTextArea();\n    }, 0));\n    _this.lastMouseLeaveTime = -1;\n    var mouseEvents = new EditorMouseEventFactory(_this.viewHelper.viewDomNode);\n    _this._register(mouseEvents.onContextMenu(_this.viewHelper.viewDomNode, function (e) {\n      return _this._onContextMenu(e, true);\n    }));\n    _this._register(mouseEvents.onMouseMoveThrottled(_this.viewHelper.viewDomNode, function (e) {\n      return _this._onMouseMove(e);\n    }, createMouseMoveEventMerger(_this.mouseTargetFactory), MouseHandler.MOUSE_MOVE_MINIMUM_TIME));\n    _this._register(mouseEvents.onMouseUp(_this.viewHelper.viewDomNode, function (e) {\n      return _this._onMouseUp(e);\n    }));\n    _this._register(mouseEvents.onMouseLeave(_this.viewHelper.viewDomNode, function (e) {\n      return _this._onMouseLeave(e);\n    }));\n    _this._register(mouseEvents.onMouseDown(_this.viewHelper.viewDomNode, function (e) {\n      return _this._onMouseDown(e);\n    }));\n    var onMouseWheel = function onMouseWheel(browserEvent) {\n      _this.viewController.emitMouseWheel(browserEvent);\n      if (!_this._context.configuration.options.get(57 /* mouseWheelZoom */)) {\n        return;\n      }\n      var e = new StandardWheelEvent(browserEvent);\n      if (e.browserEvent.ctrlKey || e.browserEvent.metaKey) {\n        var zoomLevel = EditorZoom.getZoomLevel();\n        var delta = e.deltaY > 0 ? 1 : -1;\n        EditorZoom.setZoomLevel(zoomLevel + delta);\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n    _this._register(dom.addDisposableListener(_this.viewHelper.viewDomNode, browser.isEdgeOrIE ? 'mousewheel' : 'wheel', onMouseWheel, {\n      capture: true,\n      passive: false\n    }));\n    _this._context.addEventHandler(_this);\n    return _this;\n  }\n  MouseHandler.prototype.dispose = function () {\n    this._context.removeEventHandler(this);\n    _super.prototype.dispose.call(this);\n  };\n  // --- begin event handlers\n  MouseHandler.prototype.onCursorStateChanged = function (e) {\n    this._mouseDownOperation.onCursorStateChanged(e);\n    return false;\n  };\n  MouseHandler.prototype.onFocusChanged = function (e) {\n    this._isFocused = e.isFocused;\n    return false;\n  };\n  MouseHandler.prototype.onScrollChanged = function (e) {\n    this._mouseDownOperation.onScrollChanged();\n    return false;\n  };\n  // --- end event handlers\n  MouseHandler.prototype.getTargetAtClientPoint = function (clientX, clientY) {\n    var clientPos = new ClientCoordinates(clientX, clientY);\n    var pos = clientPos.toPageCoordinates();\n    var editorPos = createEditorPagePosition(this.viewHelper.viewDomNode);\n    if (pos.y < editorPos.y || pos.y > editorPos.y + editorPos.height || pos.x < editorPos.x || pos.x > editorPos.x + editorPos.width) {\n      return null;\n    }\n    return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), editorPos, pos, null);\n  };\n  MouseHandler.prototype._createMouseTarget = function (e, testEventTarget) {\n    return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), e.editorPos, e.pos, testEventTarget ? e.target : null);\n  };\n  MouseHandler.prototype._getMouseColumn = function (e) {\n    return this.mouseTargetFactory.getMouseColumn(e.editorPos, e.pos);\n  };\n  MouseHandler.prototype._onContextMenu = function (e, testEventTarget) {\n    this.viewController.emitContextMenu({\n      event: e,\n      target: this._createMouseTarget(e, testEventTarget)\n    });\n  };\n  MouseHandler.prototype._onMouseMove = function (e) {\n    if (this._mouseDownOperation.isActive()) {\n      // In selection/drag operation\n      return;\n    }\n    var actualMouseMoveTime = e.timestamp;\n    if (actualMouseMoveTime < this.lastMouseLeaveTime) {\n      // Due to throttling, this event occurred before the mouse left the editor, therefore ignore it.\n      return;\n    }\n    this.viewController.emitMouseMove({\n      event: e,\n      target: this._createMouseTarget(e, true)\n    });\n  };\n  MouseHandler.prototype._onMouseLeave = function (e) {\n    this.lastMouseLeaveTime = new Date().getTime();\n    this.viewController.emitMouseLeave({\n      event: e,\n      target: null\n    });\n  };\n  MouseHandler.prototype._onMouseUp = function (e) {\n    this.viewController.emitMouseUp({\n      event: e,\n      target: this._createMouseTarget(e, true)\n    });\n  };\n  MouseHandler.prototype._onMouseDown = function (e) {\n    var _this = this;\n    var t = this._createMouseTarget(e, true);\n    var targetIsContent = t.type === 6 /* CONTENT_TEXT */ || t.type === 7 /* CONTENT_EMPTY */;\n    var targetIsGutter = t.type === 2 /* GUTTER_GLYPH_MARGIN */ || t.type === 3 /* GUTTER_LINE_NUMBERS */ || t.type === 4 /* GUTTER_LINE_DECORATIONS */;\n    var targetIsLineNumbers = t.type === 3 /* GUTTER_LINE_NUMBERS */;\n    var selectOnLineNumbers = this._context.configuration.options.get(83 /* selectOnLineNumbers */);\n    var targetIsViewZone = t.type === 8 /* CONTENT_VIEW_ZONE */ || t.type === 5 /* GUTTER_VIEW_ZONE */;\n    var targetIsWidget = t.type === 9 /* CONTENT_WIDGET */;\n    var shouldHandle = e.leftButton || e.middleButton;\n    if (platform.isMacintosh && e.leftButton && e.ctrlKey) {\n      shouldHandle = false;\n    }\n    var focus = function focus() {\n      // In IE11, if the focus is in the browser's address bar and\n      // then you click in the editor, calling preventDefault()\n      // will not move focus properly (focus remains the address bar)\n      if (browser.isIE && !_this._isFocused) {\n        _this._asyncFocus.schedule();\n      } else {\n        e.preventDefault();\n        _this.viewHelper.focusTextArea();\n      }\n    };\n    if (shouldHandle && (targetIsContent || targetIsLineNumbers && selectOnLineNumbers)) {\n      focus();\n      this._mouseDownOperation.start(t.type, e);\n    } else if (targetIsGutter) {\n      // Do not steal focus\n      e.preventDefault();\n    } else if (targetIsViewZone) {\n      var viewZoneData = t.detail;\n      if (this.viewHelper.shouldSuppressMouseDownOnViewZone(viewZoneData.viewZoneId)) {\n        focus();\n        this._mouseDownOperation.start(t.type, e);\n        e.preventDefault();\n      }\n    } else if (targetIsWidget && this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)) {\n      focus();\n      e.preventDefault();\n    }\n    this.viewController.emitMouseDown({\n      event: e,\n      target: t\n    });\n  };\n  MouseHandler.MOUSE_MOVE_MINIMUM_TIME = 100; // ms\n  return MouseHandler;\n}(ViewEventHandler);\nexport { MouseHandler };\nvar MouseDownOperation = /** @class */function (_super) {\n  __extends(MouseDownOperation, _super);\n  function MouseDownOperation(context, viewController, viewHelper, createMouseTarget, getMouseColumn) {\n    var _this = _super.call(this) || this;\n    _this._context = context;\n    _this._viewController = viewController;\n    _this._viewHelper = viewHelper;\n    _this._createMouseTarget = createMouseTarget;\n    _this._getMouseColumn = getMouseColumn;\n    _this._mouseMoveMonitor = _this._register(new GlobalEditorMouseMoveMonitor(_this._viewHelper.viewDomNode));\n    _this._onScrollTimeout = _this._register(new TimeoutTimer());\n    _this._mouseState = new MouseDownState();\n    _this._currentSelection = new Selection(1, 1, 1, 1);\n    _this._isActive = false;\n    _this._lastMouseEvent = null;\n    return _this;\n  }\n  MouseDownOperation.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n  MouseDownOperation.prototype.isActive = function () {\n    return this._isActive;\n  };\n  MouseDownOperation.prototype._onMouseDownThenMove = function (e) {\n    this._lastMouseEvent = e;\n    this._mouseState.setModifiers(e);\n    var position = this._findMousePosition(e, true);\n    if (!position) {\n      // Ignoring because position is unknown\n      return;\n    }\n    if (this._mouseState.isDragAndDrop) {\n      this._viewController.emitMouseDrag({\n        event: e,\n        target: position\n      });\n    } else {\n      this._dispatchMouse(position, true);\n    }\n  };\n  MouseDownOperation.prototype.start = function (targetType, e) {\n    var _this = this;\n    this._lastMouseEvent = e;\n    this._mouseState.setStartedOnLineNumbers(targetType === 3 /* GUTTER_LINE_NUMBERS */);\n    this._mouseState.setStartButtons(e);\n    this._mouseState.setModifiers(e);\n    var position = this._findMousePosition(e, true);\n    if (!position || !position.position) {\n      // Ignoring because position is unknown\n      return;\n    }\n    this._mouseState.trySetCount(e.detail, position.position);\n    // Overwrite the detail of the MouseEvent, as it will be sent out in an event and contributions might rely on it.\n    e.detail = this._mouseState.count;\n    var options = this._context.configuration.options;\n    if (!options.get(68 /* readOnly */) && options.get(24 /* dragAndDrop */) && !this._mouseState.altKey // we don't support multiple mouse\n    && e.detail < 2 // only single click on a selection can work\n    && !this._isActive // the mouse is not down yet\n    && !this._currentSelection.isEmpty() // we don't drag single cursor\n    && position.type === 6 /* CONTENT_TEXT */ // single click on text\n    && position.position && this._currentSelection.containsPosition(position.position) // single click on a selection\n    ) {\n      this._mouseState.isDragAndDrop = true;\n      this._isActive = true;\n      this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, createMouseMoveEventMerger(null), function (e) {\n        return _this._onMouseDownThenMove(e);\n      }, function () {\n        var position = _this._findMousePosition(_this._lastMouseEvent, true);\n        _this._viewController.emitMouseDrop({\n          event: _this._lastMouseEvent,\n          target: position ? _this._createMouseTarget(_this._lastMouseEvent, true) : null // Ignoring because position is unknown, e.g., Content View Zone\n        });\n\n        _this._stop();\n      });\n      return;\n    }\n    this._mouseState.isDragAndDrop = false;\n    this._dispatchMouse(position, e.shiftKey);\n    if (!this._isActive) {\n      this._isActive = true;\n      this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, createMouseMoveEventMerger(null), function (e) {\n        return _this._onMouseDownThenMove(e);\n      }, function () {\n        return _this._stop();\n      });\n    }\n  };\n  MouseDownOperation.prototype._stop = function () {\n    this._isActive = false;\n    this._onScrollTimeout.cancel();\n  };\n  MouseDownOperation.prototype.onScrollChanged = function () {\n    var _this = this;\n    if (!this._isActive) {\n      return;\n    }\n    this._onScrollTimeout.setIfNotSet(function () {\n      if (!_this._lastMouseEvent) {\n        return;\n      }\n      var position = _this._findMousePosition(_this._lastMouseEvent, false);\n      if (!position) {\n        // Ignoring because position is unknown\n        return;\n      }\n      if (_this._mouseState.isDragAndDrop) {\n        // Ignoring because users are dragging the text\n        return;\n      }\n      _this._dispatchMouse(position, true);\n    }, 10);\n  };\n  MouseDownOperation.prototype.onCursorStateChanged = function (e) {\n    this._currentSelection = e.selections[0];\n  };\n  MouseDownOperation.prototype._getPositionOutsideEditor = function (e) {\n    var editorContent = e.editorPos;\n    var model = this._context.model;\n    var viewLayout = this._context.viewLayout;\n    var mouseColumn = this._getMouseColumn(e);\n    if (e.posy < editorContent.y) {\n      var verticalOffset = Math.max(viewLayout.getCurrentScrollTop() - (editorContent.y - e.posy), 0);\n      var viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n      if (viewZoneData) {\n        var newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n        if (newPosition) {\n          return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, newPosition);\n        }\n      }\n      var aboveLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n      return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(aboveLineNumber, 1));\n    }\n    if (e.posy > editorContent.y + editorContent.height) {\n      var verticalOffset = viewLayout.getCurrentScrollTop() + (e.posy - editorContent.y);\n      var viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n      if (viewZoneData) {\n        var newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n        if (newPosition) {\n          return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, newPosition);\n        }\n      }\n      var belowLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n      return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(belowLineNumber, model.getLineMaxColumn(belowLineNumber)));\n    }\n    var possibleLineNumber = viewLayout.getLineNumberAtVerticalOffset(viewLayout.getCurrentScrollTop() + (e.posy - editorContent.y));\n    if (e.posx < editorContent.x) {\n      return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(possibleLineNumber, 1));\n    }\n    if (e.posx > editorContent.x + editorContent.width) {\n      return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(possibleLineNumber, model.getLineMaxColumn(possibleLineNumber)));\n    }\n    return null;\n  };\n  MouseDownOperation.prototype._findMousePosition = function (e, testEventTarget) {\n    var positionOutsideEditor = this._getPositionOutsideEditor(e);\n    if (positionOutsideEditor) {\n      return positionOutsideEditor;\n    }\n    var t = this._createMouseTarget(e, testEventTarget);\n    var hintedPosition = t.position;\n    if (!hintedPosition) {\n      return null;\n    }\n    if (t.type === 8 /* CONTENT_VIEW_ZONE */ || t.type === 5 /* GUTTER_VIEW_ZONE */) {\n      var newPosition = this._helpPositionJumpOverViewZone(t.detail);\n      if (newPosition) {\n        return new MouseTarget(t.element, t.type, t.mouseColumn, newPosition, null, t.detail);\n      }\n    }\n    return t;\n  };\n  MouseDownOperation.prototype._helpPositionJumpOverViewZone = function (viewZoneData) {\n    // Force position on view zones to go above or below depending on where selection started from\n    var selectionStart = new Position(this._currentSelection.selectionStartLineNumber, this._currentSelection.selectionStartColumn);\n    var positionBefore = viewZoneData.positionBefore;\n    var positionAfter = viewZoneData.positionAfter;\n    if (positionBefore && positionAfter) {\n      if (positionBefore.isBefore(selectionStart)) {\n        return positionBefore;\n      } else {\n        return positionAfter;\n      }\n    }\n    return null;\n  };\n  MouseDownOperation.prototype._dispatchMouse = function (position, inSelectionMode) {\n    if (!position.position) {\n      return;\n    }\n    this._viewController.dispatchMouse({\n      position: position.position,\n      mouseColumn: position.mouseColumn,\n      startedOnLineNumbers: this._mouseState.startedOnLineNumbers,\n      inSelectionMode: inSelectionMode,\n      mouseDownCount: this._mouseState.count,\n      altKey: this._mouseState.altKey,\n      ctrlKey: this._mouseState.ctrlKey,\n      metaKey: this._mouseState.metaKey,\n      shiftKey: this._mouseState.shiftKey,\n      leftButton: this._mouseState.leftButton,\n      middleButton: this._mouseState.middleButton\n    });\n  };\n  return MouseDownOperation;\n}(Disposable);\nvar MouseDownState = /** @class */function () {\n  function MouseDownState() {\n    this._altKey = false;\n    this._ctrlKey = false;\n    this._metaKey = false;\n    this._shiftKey = false;\n    this._leftButton = false;\n    this._middleButton = false;\n    this._startedOnLineNumbers = false;\n    this._lastMouseDownPosition = null;\n    this._lastMouseDownPositionEqualCount = 0;\n    this._lastMouseDownCount = 0;\n    this._lastSetMouseDownCountTime = 0;\n    this.isDragAndDrop = false;\n  }\n  Object.defineProperty(MouseDownState.prototype, \"altKey\", {\n    get: function get() {\n      return this._altKey;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"ctrlKey\", {\n    get: function get() {\n      return this._ctrlKey;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"metaKey\", {\n    get: function get() {\n      return this._metaKey;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"shiftKey\", {\n    get: function get() {\n      return this._shiftKey;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"leftButton\", {\n    get: function get() {\n      return this._leftButton;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"middleButton\", {\n    get: function get() {\n      return this._middleButton;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"startedOnLineNumbers\", {\n    get: function get() {\n      return this._startedOnLineNumbers;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MouseDownState.prototype, \"count\", {\n    get: function get() {\n      return this._lastMouseDownCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  MouseDownState.prototype.setModifiers = function (source) {\n    this._altKey = source.altKey;\n    this._ctrlKey = source.ctrlKey;\n    this._metaKey = source.metaKey;\n    this._shiftKey = source.shiftKey;\n  };\n  MouseDownState.prototype.setStartButtons = function (source) {\n    this._leftButton = source.leftButton;\n    this._middleButton = source.middleButton;\n  };\n  MouseDownState.prototype.setStartedOnLineNumbers = function (startedOnLineNumbers) {\n    this._startedOnLineNumbers = startedOnLineNumbers;\n  };\n  MouseDownState.prototype.trySetCount = function (setMouseDownCount, newMouseDownPosition) {\n    // a. Invalidate multiple clicking if too much time has passed (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n    var currentTime = new Date().getTime();\n    if (currentTime - this._lastSetMouseDownCountTime > MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME) {\n      setMouseDownCount = 1;\n    }\n    this._lastSetMouseDownCountTime = currentTime;\n    // b. Ensure that we don't jump from single click to triple click in one go (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n    if (setMouseDownCount > this._lastMouseDownCount + 1) {\n      setMouseDownCount = this._lastMouseDownCount + 1;\n    }\n    // c. Invalidate multiple clicking if the logical position is different\n    if (this._lastMouseDownPosition && this._lastMouseDownPosition.equals(newMouseDownPosition)) {\n      this._lastMouseDownPositionEqualCount++;\n    } else {\n      this._lastMouseDownPositionEqualCount = 1;\n    }\n    this._lastMouseDownPosition = newMouseDownPosition;\n    // Finally set the lastMouseDownCount\n    this._lastMouseDownCount = Math.min(setMouseDownCount, this._lastMouseDownPositionEqualCount);\n  };\n  MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME = 400; // ms\n  return MouseDownState;\n}();","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","browser","dom","StandardWheelEvent","RunOnceScheduler","TimeoutTimer","Disposable","platform","HitTestContext","MouseTarget","MouseTargetFactory","ClientCoordinates","EditorMouseEventFactory","GlobalEditorMouseMoveMonitor","createEditorPagePosition","EditorZoom","Position","Selection","ViewEventHandler","createMouseMoveEventMerger","mouseTargetFactory","lastEvent","currentEvent","targetIsWidget","mouseTargetIsWidget","preventDefault","MouseHandler","_super","context","viewController","viewHelper","_this","call","_isFocused","_context","_mouseDownOperation","_register","MouseDownOperation","e","testEventTarget","_createMouseTarget","_getMouseColumn","_asyncFocus","focusTextArea","lastMouseLeaveTime","mouseEvents","viewDomNode","onContextMenu","_onContextMenu","onMouseMoveThrottled","_onMouseMove","MOUSE_MOVE_MINIMUM_TIME","onMouseUp","_onMouseUp","onMouseLeave","_onMouseLeave","onMouseDown","_onMouseDown","onMouseWheel","browserEvent","emitMouseWheel","configuration","options","get","ctrlKey","metaKey","zoomLevel","getZoomLevel","delta","deltaY","setZoomLevel","stopPropagation","addDisposableListener","isEdgeOrIE","capture","passive","addEventHandler","dispose","removeEventHandler","onCursorStateChanged","onFocusChanged","isFocused","onScrollChanged","getTargetAtClientPoint","clientX","clientY","clientPos","pos","toPageCoordinates","editorPos","y","height","x","width","createMouseTarget","getLastRenderData","target","getMouseColumn","emitContextMenu","event","isActive","actualMouseMoveTime","timestamp","emitMouseMove","Date","getTime","emitMouseLeave","emitMouseUp","t","targetIsContent","type","targetIsGutter","targetIsLineNumbers","selectOnLineNumbers","targetIsViewZone","shouldHandle","leftButton","middleButton","isMacintosh","focus","isIE","schedule","start","viewZoneData","detail","shouldSuppressMouseDownOnViewZone","viewZoneId","shouldSuppressMouseDownOnWidget","emitMouseDown","_viewController","_viewHelper","_mouseMoveMonitor","_onScrollTimeout","_mouseState","MouseDownState","_currentSelection","_isActive","_lastMouseEvent","_onMouseDownThenMove","setModifiers","position","_findMousePosition","isDragAndDrop","emitMouseDrag","_dispatchMouse","targetType","setStartedOnLineNumbers","setStartButtons","trySetCount","count","altKey","isEmpty","containsPosition","startMonitoring","buttons","emitMouseDrop","_stop","shiftKey","cancel","setIfNotSet","selections","_getPositionOutsideEditor","editorContent","model","viewLayout","mouseColumn","posy","verticalOffset","Math","max","getCurrentScrollTop","getZoneAtCoord","newPosition","_helpPositionJumpOverViewZone","aboveLineNumber","getLineNumberAtVerticalOffset","belowLineNumber","getLineMaxColumn","possibleLineNumber","posx","positionOutsideEditor","hintedPosition","element","selectionStart","selectionStartLineNumber","selectionStartColumn","positionBefore","positionAfter","isBefore","inSelectionMode","dispatchMouse","startedOnLineNumbers","mouseDownCount","_altKey","_ctrlKey","_metaKey","_shiftKey","_leftButton","_middleButton","_startedOnLineNumbers","_lastMouseDownPosition","_lastMouseDownPositionEqualCount","_lastMouseDownCount","_lastSetMouseDownCountTime","defineProperty","enumerable","configurable","source","setMouseDownCount","newMouseDownPosition","currentTime","CLEAR_MOUSE_DOWN_COUNT_TIME","equals","min"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as browser from '../../../base/browser/browser.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardWheelEvent } from '../../../base/browser/mouseEvent.js';\r\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { HitTestContext, MouseTarget, MouseTargetFactory } from './mouseTarget.js';\r\nimport { ClientCoordinates, EditorMouseEventFactory, GlobalEditorMouseMoveMonitor, createEditorPagePosition } from '../editorDom.js';\r\nimport { EditorZoom } from '../../common/config/editorZoom.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\r\n/**\r\n * Merges mouse events when mouse move events are throttled\r\n */\r\nexport function createMouseMoveEventMerger(mouseTargetFactory) {\r\n    return function (lastEvent, currentEvent) {\r\n        var targetIsWidget = false;\r\n        if (mouseTargetFactory) {\r\n            targetIsWidget = mouseTargetFactory.mouseTargetIsWidget(currentEvent);\r\n        }\r\n        if (!targetIsWidget) {\r\n            currentEvent.preventDefault();\r\n        }\r\n        return currentEvent;\r\n    };\r\n}\r\nvar MouseHandler = /** @class */ (function (_super) {\r\n    __extends(MouseHandler, _super);\r\n    function MouseHandler(context, viewController, viewHelper) {\r\n        var _this = _super.call(this) || this;\r\n        _this._isFocused = false;\r\n        _this._context = context;\r\n        _this.viewController = viewController;\r\n        _this.viewHelper = viewHelper;\r\n        _this.mouseTargetFactory = new MouseTargetFactory(_this._context, viewHelper);\r\n        _this._mouseDownOperation = _this._register(new MouseDownOperation(_this._context, _this.viewController, _this.viewHelper, function (e, testEventTarget) { return _this._createMouseTarget(e, testEventTarget); }, function (e) { return _this._getMouseColumn(e); }));\r\n        _this._asyncFocus = _this._register(new RunOnceScheduler(function () { return _this.viewHelper.focusTextArea(); }, 0));\r\n        _this.lastMouseLeaveTime = -1;\r\n        var mouseEvents = new EditorMouseEventFactory(_this.viewHelper.viewDomNode);\r\n        _this._register(mouseEvents.onContextMenu(_this.viewHelper.viewDomNode, function (e) { return _this._onContextMenu(e, true); }));\r\n        _this._register(mouseEvents.onMouseMoveThrottled(_this.viewHelper.viewDomNode, function (e) { return _this._onMouseMove(e); }, createMouseMoveEventMerger(_this.mouseTargetFactory), MouseHandler.MOUSE_MOVE_MINIMUM_TIME));\r\n        _this._register(mouseEvents.onMouseUp(_this.viewHelper.viewDomNode, function (e) { return _this._onMouseUp(e); }));\r\n        _this._register(mouseEvents.onMouseLeave(_this.viewHelper.viewDomNode, function (e) { return _this._onMouseLeave(e); }));\r\n        _this._register(mouseEvents.onMouseDown(_this.viewHelper.viewDomNode, function (e) { return _this._onMouseDown(e); }));\r\n        var onMouseWheel = function (browserEvent) {\r\n            _this.viewController.emitMouseWheel(browserEvent);\r\n            if (!_this._context.configuration.options.get(57 /* mouseWheelZoom */)) {\r\n                return;\r\n            }\r\n            var e = new StandardWheelEvent(browserEvent);\r\n            if (e.browserEvent.ctrlKey || e.browserEvent.metaKey) {\r\n                var zoomLevel = EditorZoom.getZoomLevel();\r\n                var delta = e.deltaY > 0 ? 1 : -1;\r\n                EditorZoom.setZoomLevel(zoomLevel + delta);\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n        };\r\n        _this._register(dom.addDisposableListener(_this.viewHelper.viewDomNode, browser.isEdgeOrIE ? 'mousewheel' : 'wheel', onMouseWheel, { capture: true, passive: false }));\r\n        _this._context.addEventHandler(_this);\r\n        return _this;\r\n    }\r\n    MouseHandler.prototype.dispose = function () {\r\n        this._context.removeEventHandler(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // --- begin event handlers\r\n    MouseHandler.prototype.onCursorStateChanged = function (e) {\r\n        this._mouseDownOperation.onCursorStateChanged(e);\r\n        return false;\r\n    };\r\n    MouseHandler.prototype.onFocusChanged = function (e) {\r\n        this._isFocused = e.isFocused;\r\n        return false;\r\n    };\r\n    MouseHandler.prototype.onScrollChanged = function (e) {\r\n        this._mouseDownOperation.onScrollChanged();\r\n        return false;\r\n    };\r\n    // --- end event handlers\r\n    MouseHandler.prototype.getTargetAtClientPoint = function (clientX, clientY) {\r\n        var clientPos = new ClientCoordinates(clientX, clientY);\r\n        var pos = clientPos.toPageCoordinates();\r\n        var editorPos = createEditorPagePosition(this.viewHelper.viewDomNode);\r\n        if (pos.y < editorPos.y || pos.y > editorPos.y + editorPos.height || pos.x < editorPos.x || pos.x > editorPos.x + editorPos.width) {\r\n            return null;\r\n        }\r\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), editorPos, pos, null);\r\n    };\r\n    MouseHandler.prototype._createMouseTarget = function (e, testEventTarget) {\r\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), e.editorPos, e.pos, testEventTarget ? e.target : null);\r\n    };\r\n    MouseHandler.prototype._getMouseColumn = function (e) {\r\n        return this.mouseTargetFactory.getMouseColumn(e.editorPos, e.pos);\r\n    };\r\n    MouseHandler.prototype._onContextMenu = function (e, testEventTarget) {\r\n        this.viewController.emitContextMenu({\r\n            event: e,\r\n            target: this._createMouseTarget(e, testEventTarget)\r\n        });\r\n    };\r\n    MouseHandler.prototype._onMouseMove = function (e) {\r\n        if (this._mouseDownOperation.isActive()) {\r\n            // In selection/drag operation\r\n            return;\r\n        }\r\n        var actualMouseMoveTime = e.timestamp;\r\n        if (actualMouseMoveTime < this.lastMouseLeaveTime) {\r\n            // Due to throttling, this event occurred before the mouse left the editor, therefore ignore it.\r\n            return;\r\n        }\r\n        this.viewController.emitMouseMove({\r\n            event: e,\r\n            target: this._createMouseTarget(e, true)\r\n        });\r\n    };\r\n    MouseHandler.prototype._onMouseLeave = function (e) {\r\n        this.lastMouseLeaveTime = (new Date()).getTime();\r\n        this.viewController.emitMouseLeave({\r\n            event: e,\r\n            target: null\r\n        });\r\n    };\r\n    MouseHandler.prototype._onMouseUp = function (e) {\r\n        this.viewController.emitMouseUp({\r\n            event: e,\r\n            target: this._createMouseTarget(e, true)\r\n        });\r\n    };\r\n    MouseHandler.prototype._onMouseDown = function (e) {\r\n        var _this = this;\r\n        var t = this._createMouseTarget(e, true);\r\n        var targetIsContent = (t.type === 6 /* CONTENT_TEXT */ || t.type === 7 /* CONTENT_EMPTY */);\r\n        var targetIsGutter = (t.type === 2 /* GUTTER_GLYPH_MARGIN */ || t.type === 3 /* GUTTER_LINE_NUMBERS */ || t.type === 4 /* GUTTER_LINE_DECORATIONS */);\r\n        var targetIsLineNumbers = (t.type === 3 /* GUTTER_LINE_NUMBERS */);\r\n        var selectOnLineNumbers = this._context.configuration.options.get(83 /* selectOnLineNumbers */);\r\n        var targetIsViewZone = (t.type === 8 /* CONTENT_VIEW_ZONE */ || t.type === 5 /* GUTTER_VIEW_ZONE */);\r\n        var targetIsWidget = (t.type === 9 /* CONTENT_WIDGET */);\r\n        var shouldHandle = e.leftButton || e.middleButton;\r\n        if (platform.isMacintosh && e.leftButton && e.ctrlKey) {\r\n            shouldHandle = false;\r\n        }\r\n        var focus = function () {\r\n            // In IE11, if the focus is in the browser's address bar and\r\n            // then you click in the editor, calling preventDefault()\r\n            // will not move focus properly (focus remains the address bar)\r\n            if (browser.isIE && !_this._isFocused) {\r\n                _this._asyncFocus.schedule();\r\n            }\r\n            else {\r\n                e.preventDefault();\r\n                _this.viewHelper.focusTextArea();\r\n            }\r\n        };\r\n        if (shouldHandle && (targetIsContent || (targetIsLineNumbers && selectOnLineNumbers))) {\r\n            focus();\r\n            this._mouseDownOperation.start(t.type, e);\r\n        }\r\n        else if (targetIsGutter) {\r\n            // Do not steal focus\r\n            e.preventDefault();\r\n        }\r\n        else if (targetIsViewZone) {\r\n            var viewZoneData = t.detail;\r\n            if (this.viewHelper.shouldSuppressMouseDownOnViewZone(viewZoneData.viewZoneId)) {\r\n                focus();\r\n                this._mouseDownOperation.start(t.type, e);\r\n                e.preventDefault();\r\n            }\r\n        }\r\n        else if (targetIsWidget && this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)) {\r\n            focus();\r\n            e.preventDefault();\r\n        }\r\n        this.viewController.emitMouseDown({\r\n            event: e,\r\n            target: t\r\n        });\r\n    };\r\n    MouseHandler.MOUSE_MOVE_MINIMUM_TIME = 100; // ms\r\n    return MouseHandler;\r\n}(ViewEventHandler));\r\nexport { MouseHandler };\r\nvar MouseDownOperation = /** @class */ (function (_super) {\r\n    __extends(MouseDownOperation, _super);\r\n    function MouseDownOperation(context, viewController, viewHelper, createMouseTarget, getMouseColumn) {\r\n        var _this = _super.call(this) || this;\r\n        _this._context = context;\r\n        _this._viewController = viewController;\r\n        _this._viewHelper = viewHelper;\r\n        _this._createMouseTarget = createMouseTarget;\r\n        _this._getMouseColumn = getMouseColumn;\r\n        _this._mouseMoveMonitor = _this._register(new GlobalEditorMouseMoveMonitor(_this._viewHelper.viewDomNode));\r\n        _this._onScrollTimeout = _this._register(new TimeoutTimer());\r\n        _this._mouseState = new MouseDownState();\r\n        _this._currentSelection = new Selection(1, 1, 1, 1);\r\n        _this._isActive = false;\r\n        _this._lastMouseEvent = null;\r\n        return _this;\r\n    }\r\n    MouseDownOperation.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    MouseDownOperation.prototype.isActive = function () {\r\n        return this._isActive;\r\n    };\r\n    MouseDownOperation.prototype._onMouseDownThenMove = function (e) {\r\n        this._lastMouseEvent = e;\r\n        this._mouseState.setModifiers(e);\r\n        var position = this._findMousePosition(e, true);\r\n        if (!position) {\r\n            // Ignoring because position is unknown\r\n            return;\r\n        }\r\n        if (this._mouseState.isDragAndDrop) {\r\n            this._viewController.emitMouseDrag({\r\n                event: e,\r\n                target: position\r\n            });\r\n        }\r\n        else {\r\n            this._dispatchMouse(position, true);\r\n        }\r\n    };\r\n    MouseDownOperation.prototype.start = function (targetType, e) {\r\n        var _this = this;\r\n        this._lastMouseEvent = e;\r\n        this._mouseState.setStartedOnLineNumbers(targetType === 3 /* GUTTER_LINE_NUMBERS */);\r\n        this._mouseState.setStartButtons(e);\r\n        this._mouseState.setModifiers(e);\r\n        var position = this._findMousePosition(e, true);\r\n        if (!position || !position.position) {\r\n            // Ignoring because position is unknown\r\n            return;\r\n        }\r\n        this._mouseState.trySetCount(e.detail, position.position);\r\n        // Overwrite the detail of the MouseEvent, as it will be sent out in an event and contributions might rely on it.\r\n        e.detail = this._mouseState.count;\r\n        var options = this._context.configuration.options;\r\n        if (!options.get(68 /* readOnly */)\r\n            && options.get(24 /* dragAndDrop */)\r\n            && !this._mouseState.altKey // we don't support multiple mouse\r\n            && e.detail < 2 // only single click on a selection can work\r\n            && !this._isActive // the mouse is not down yet\r\n            && !this._currentSelection.isEmpty() // we don't drag single cursor\r\n            && (position.type === 6 /* CONTENT_TEXT */) // single click on text\r\n            && position.position && this._currentSelection.containsPosition(position.position) // single click on a selection\r\n        ) {\r\n            this._mouseState.isDragAndDrop = true;\r\n            this._isActive = true;\r\n            this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, createMouseMoveEventMerger(null), function (e) { return _this._onMouseDownThenMove(e); }, function () {\r\n                var position = _this._findMousePosition(_this._lastMouseEvent, true);\r\n                _this._viewController.emitMouseDrop({\r\n                    event: _this._lastMouseEvent,\r\n                    target: (position ? _this._createMouseTarget(_this._lastMouseEvent, true) : null) // Ignoring because position is unknown, e.g., Content View Zone\r\n                });\r\n                _this._stop();\r\n            });\r\n            return;\r\n        }\r\n        this._mouseState.isDragAndDrop = false;\r\n        this._dispatchMouse(position, e.shiftKey);\r\n        if (!this._isActive) {\r\n            this._isActive = true;\r\n            this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, createMouseMoveEventMerger(null), function (e) { return _this._onMouseDownThenMove(e); }, function () { return _this._stop(); });\r\n        }\r\n    };\r\n    MouseDownOperation.prototype._stop = function () {\r\n        this._isActive = false;\r\n        this._onScrollTimeout.cancel();\r\n    };\r\n    MouseDownOperation.prototype.onScrollChanged = function () {\r\n        var _this = this;\r\n        if (!this._isActive) {\r\n            return;\r\n        }\r\n        this._onScrollTimeout.setIfNotSet(function () {\r\n            if (!_this._lastMouseEvent) {\r\n                return;\r\n            }\r\n            var position = _this._findMousePosition(_this._lastMouseEvent, false);\r\n            if (!position) {\r\n                // Ignoring because position is unknown\r\n                return;\r\n            }\r\n            if (_this._mouseState.isDragAndDrop) {\r\n                // Ignoring because users are dragging the text\r\n                return;\r\n            }\r\n            _this._dispatchMouse(position, true);\r\n        }, 10);\r\n    };\r\n    MouseDownOperation.prototype.onCursorStateChanged = function (e) {\r\n        this._currentSelection = e.selections[0];\r\n    };\r\n    MouseDownOperation.prototype._getPositionOutsideEditor = function (e) {\r\n        var editorContent = e.editorPos;\r\n        var model = this._context.model;\r\n        var viewLayout = this._context.viewLayout;\r\n        var mouseColumn = this._getMouseColumn(e);\r\n        if (e.posy < editorContent.y) {\r\n            var verticalOffset = Math.max(viewLayout.getCurrentScrollTop() - (editorContent.y - e.posy), 0);\r\n            var viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\r\n            if (viewZoneData) {\r\n                var newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\r\n                if (newPosition) {\r\n                    return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, newPosition);\r\n                }\r\n            }\r\n            var aboveLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\r\n            return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(aboveLineNumber, 1));\r\n        }\r\n        if (e.posy > editorContent.y + editorContent.height) {\r\n            var verticalOffset = viewLayout.getCurrentScrollTop() + (e.posy - editorContent.y);\r\n            var viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\r\n            if (viewZoneData) {\r\n                var newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\r\n                if (newPosition) {\r\n                    return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, newPosition);\r\n                }\r\n            }\r\n            var belowLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\r\n            return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(belowLineNumber, model.getLineMaxColumn(belowLineNumber)));\r\n        }\r\n        var possibleLineNumber = viewLayout.getLineNumberAtVerticalOffset(viewLayout.getCurrentScrollTop() + (e.posy - editorContent.y));\r\n        if (e.posx < editorContent.x) {\r\n            return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(possibleLineNumber, 1));\r\n        }\r\n        if (e.posx > editorContent.x + editorContent.width) {\r\n            return new MouseTarget(null, 13 /* OUTSIDE_EDITOR */, mouseColumn, new Position(possibleLineNumber, model.getLineMaxColumn(possibleLineNumber)));\r\n        }\r\n        return null;\r\n    };\r\n    MouseDownOperation.prototype._findMousePosition = function (e, testEventTarget) {\r\n        var positionOutsideEditor = this._getPositionOutsideEditor(e);\r\n        if (positionOutsideEditor) {\r\n            return positionOutsideEditor;\r\n        }\r\n        var t = this._createMouseTarget(e, testEventTarget);\r\n        var hintedPosition = t.position;\r\n        if (!hintedPosition) {\r\n            return null;\r\n        }\r\n        if (t.type === 8 /* CONTENT_VIEW_ZONE */ || t.type === 5 /* GUTTER_VIEW_ZONE */) {\r\n            var newPosition = this._helpPositionJumpOverViewZone(t.detail);\r\n            if (newPosition) {\r\n                return new MouseTarget(t.element, t.type, t.mouseColumn, newPosition, null, t.detail);\r\n            }\r\n        }\r\n        return t;\r\n    };\r\n    MouseDownOperation.prototype._helpPositionJumpOverViewZone = function (viewZoneData) {\r\n        // Force position on view zones to go above or below depending on where selection started from\r\n        var selectionStart = new Position(this._currentSelection.selectionStartLineNumber, this._currentSelection.selectionStartColumn);\r\n        var positionBefore = viewZoneData.positionBefore;\r\n        var positionAfter = viewZoneData.positionAfter;\r\n        if (positionBefore && positionAfter) {\r\n            if (positionBefore.isBefore(selectionStart)) {\r\n                return positionBefore;\r\n            }\r\n            else {\r\n                return positionAfter;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    MouseDownOperation.prototype._dispatchMouse = function (position, inSelectionMode) {\r\n        if (!position.position) {\r\n            return;\r\n        }\r\n        this._viewController.dispatchMouse({\r\n            position: position.position,\r\n            mouseColumn: position.mouseColumn,\r\n            startedOnLineNumbers: this._mouseState.startedOnLineNumbers,\r\n            inSelectionMode: inSelectionMode,\r\n            mouseDownCount: this._mouseState.count,\r\n            altKey: this._mouseState.altKey,\r\n            ctrlKey: this._mouseState.ctrlKey,\r\n            metaKey: this._mouseState.metaKey,\r\n            shiftKey: this._mouseState.shiftKey,\r\n            leftButton: this._mouseState.leftButton,\r\n            middleButton: this._mouseState.middleButton,\r\n        });\r\n    };\r\n    return MouseDownOperation;\r\n}(Disposable));\r\nvar MouseDownState = /** @class */ (function () {\r\n    function MouseDownState() {\r\n        this._altKey = false;\r\n        this._ctrlKey = false;\r\n        this._metaKey = false;\r\n        this._shiftKey = false;\r\n        this._leftButton = false;\r\n        this._middleButton = false;\r\n        this._startedOnLineNumbers = false;\r\n        this._lastMouseDownPosition = null;\r\n        this._lastMouseDownPositionEqualCount = 0;\r\n        this._lastMouseDownCount = 0;\r\n        this._lastSetMouseDownCountTime = 0;\r\n        this.isDragAndDrop = false;\r\n    }\r\n    Object.defineProperty(MouseDownState.prototype, \"altKey\", {\r\n        get: function () { return this._altKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"ctrlKey\", {\r\n        get: function () { return this._ctrlKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"metaKey\", {\r\n        get: function () { return this._metaKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"shiftKey\", {\r\n        get: function () { return this._shiftKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"leftButton\", {\r\n        get: function () { return this._leftButton; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"middleButton\", {\r\n        get: function () { return this._middleButton; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"startedOnLineNumbers\", {\r\n        get: function () { return this._startedOnLineNumbers; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MouseDownState.prototype, \"count\", {\r\n        get: function () {\r\n            return this._lastMouseDownCount;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MouseDownState.prototype.setModifiers = function (source) {\r\n        this._altKey = source.altKey;\r\n        this._ctrlKey = source.ctrlKey;\r\n        this._metaKey = source.metaKey;\r\n        this._shiftKey = source.shiftKey;\r\n    };\r\n    MouseDownState.prototype.setStartButtons = function (source) {\r\n        this._leftButton = source.leftButton;\r\n        this._middleButton = source.middleButton;\r\n    };\r\n    MouseDownState.prototype.setStartedOnLineNumbers = function (startedOnLineNumbers) {\r\n        this._startedOnLineNumbers = startedOnLineNumbers;\r\n    };\r\n    MouseDownState.prototype.trySetCount = function (setMouseDownCount, newMouseDownPosition) {\r\n        // a. Invalidate multiple clicking if too much time has passed (will be hit by IE because the detail field of mouse events contains garbage in IE10)\r\n        var currentTime = (new Date()).getTime();\r\n        if (currentTime - this._lastSetMouseDownCountTime > MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME) {\r\n            setMouseDownCount = 1;\r\n        }\r\n        this._lastSetMouseDownCountTime = currentTime;\r\n        // b. Ensure that we don't jump from single click to triple click in one go (will be hit by IE because the detail field of mouse events contains garbage in IE10)\r\n        if (setMouseDownCount > this._lastMouseDownCount + 1) {\r\n            setMouseDownCount = this._lastMouseDownCount + 1;\r\n        }\r\n        // c. Invalidate multiple clicking if the logical position is different\r\n        if (this._lastMouseDownPosition && this._lastMouseDownPosition.equals(newMouseDownPosition)) {\r\n            this._lastMouseDownPositionEqualCount++;\r\n        }\r\n        else {\r\n            this._lastMouseDownPositionEqualCount = 1;\r\n        }\r\n        this._lastMouseDownPosition = newMouseDownPosition;\r\n        // Finally set the lastMouseDownCount\r\n        this._lastMouseDownCount = Math.min(setMouseDownCount, this._lastMouseDownPositionEqualCount);\r\n    };\r\n    MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME = 400; // ms\r\n    return MouseDownState;\r\n}());\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}