{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport './list.css';\nimport { localize } from '../../../../nls.js';\nimport { dispose, DisposableStore } from '../../../common/lifecycle.js';\nimport { isNumber } from '../../../common/types.js';\nimport { range, firstIndex, binarySearch } from '../../../common/arrays.js';\nimport { memoize } from '../../../common/decorators.js';\nimport * as DOM from '../../dom.js';\nimport * as platform from '../../../common/platform.js';\nimport { Gesture } from '../../touch.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Event, Emitter, EventBufferer } from '../../../common/event.js';\nimport { domEvent } from '../../event.js';\nimport { ListAriaRootRole, ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nvar TraitRenderer = /** @class */function () {\n  function TraitRenderer(trait) {\n    this.trait = trait;\n    this.renderedElements = [];\n  }\n  Object.defineProperty(TraitRenderer.prototype, \"templateId\", {\n    get: function get() {\n      return \"template:\" + this.trait.trait;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TraitRenderer.prototype.renderTemplate = function (container) {\n    return container;\n  };\n  TraitRenderer.prototype.renderElement = function (element, index, templateData) {\n    var renderedElementIndex = firstIndex(this.renderedElements, function (el) {\n      return el.templateData === templateData;\n    });\n    if (renderedElementIndex >= 0) {\n      var rendered = this.renderedElements[renderedElementIndex];\n      this.trait.unrender(templateData);\n      rendered.index = index;\n    } else {\n      var rendered = {\n        index: index,\n        templateData: templateData\n      };\n      this.renderedElements.push(rendered);\n    }\n    this.trait.renderIndex(index, templateData);\n  };\n  TraitRenderer.prototype.splice = function (start, deleteCount, insertCount) {\n    var rendered = [];\n    for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\n      var renderedElement = _a[_i];\n      if (renderedElement.index < start) {\n        rendered.push(renderedElement);\n      } else if (renderedElement.index >= start + deleteCount) {\n        rendered.push({\n          index: renderedElement.index + insertCount - deleteCount,\n          templateData: renderedElement.templateData\n        });\n      }\n    }\n    this.renderedElements = rendered;\n  };\n  TraitRenderer.prototype.renderIndexes = function (indexes) {\n    for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\n      var _b = _a[_i],\n        index = _b.index,\n        templateData = _b.templateData;\n      if (indexes.indexOf(index) > -1) {\n        this.trait.renderIndex(index, templateData);\n      }\n    }\n  };\n  TraitRenderer.prototype.disposeTemplate = function (templateData) {\n    var index = firstIndex(this.renderedElements, function (el) {\n      return el.templateData === templateData;\n    });\n    if (index < 0) {\n      return;\n    }\n    this.renderedElements.splice(index, 1);\n  };\n  return TraitRenderer;\n}();\nvar Trait = /** @class */function () {\n  function Trait(_trait) {\n    this._trait = _trait;\n    this.indexes = [];\n    this.sortedIndexes = [];\n    this._onChange = new Emitter();\n    this.onChange = this._onChange.event;\n  }\n  Object.defineProperty(Trait.prototype, \"trait\", {\n    get: function get() {\n      return this._trait;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Trait.prototype, \"renderer\", {\n    get: function get() {\n      return new TraitRenderer(this);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Trait.prototype.splice = function (start, deleteCount, elements) {\n    var diff = elements.length - deleteCount;\n    var end = start + deleteCount;\n    var indexes = __spreadArrays(this.sortedIndexes.filter(function (i) {\n      return i < start;\n    }), elements.map(function (hasTrait, i) {\n      return hasTrait ? i + start : -1;\n    }).filter(function (i) {\n      return i !== -1;\n    }), this.sortedIndexes.filter(function (i) {\n      return i >= end;\n    }).map(function (i) {\n      return i + diff;\n    }));\n    this.renderer.splice(start, deleteCount, elements.length);\n    this._set(indexes, indexes);\n  };\n  Trait.prototype.renderIndex = function (index, container) {\n    DOM.toggleClass(container, this._trait, this.contains(index));\n  };\n  Trait.prototype.unrender = function (container) {\n    DOM.removeClass(container, this._trait);\n  };\n  /**\r\n   * Sets the indexes which should have this trait.\r\n   *\r\n   * @param indexes Indexes which should have this trait.\r\n   * @return The old indexes which had this trait.\r\n   */\n  Trait.prototype.set = function (indexes, browserEvent) {\n    return this._set(indexes, __spreadArrays(indexes).sort(numericSort), browserEvent);\n  };\n  Trait.prototype._set = function (indexes, sortedIndexes, browserEvent) {\n    var result = this.indexes;\n    var sortedResult = this.sortedIndexes;\n    this.indexes = indexes;\n    this.sortedIndexes = sortedIndexes;\n    var toRender = disjunction(sortedResult, indexes);\n    this.renderer.renderIndexes(toRender);\n    this._onChange.fire({\n      indexes: indexes,\n      browserEvent: browserEvent\n    });\n    return result;\n  };\n  Trait.prototype.get = function () {\n    return this.indexes;\n  };\n  Trait.prototype.contains = function (index) {\n    return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n  };\n  Trait.prototype.dispose = function () {\n    dispose(this._onChange);\n  };\n  __decorate([memoize], Trait.prototype, \"renderer\", null);\n  return Trait;\n}();\nvar FocusTrait = /** @class */function (_super) {\n  __extends(FocusTrait, _super);\n  function FocusTrait() {\n    return _super.call(this, 'focused') || this;\n  }\n  FocusTrait.prototype.renderIndex = function (index, container) {\n    _super.prototype.renderIndex.call(this, index, container);\n    if (this.contains(index)) {\n      container.setAttribute('aria-selected', 'true');\n    } else {\n      container.removeAttribute('aria-selected');\n    }\n  };\n  return FocusTrait;\n}(Trait);\n/**\r\n * The TraitSpliceable is used as a util class to be able\r\n * to preserve traits across splice calls, given an identity\r\n * provider.\r\n */\nvar TraitSpliceable = /** @class */function () {\n  function TraitSpliceable(trait, view, identityProvider) {\n    this.trait = trait;\n    this.view = view;\n    this.identityProvider = identityProvider;\n  }\n  TraitSpliceable.prototype.splice = function (start, deleteCount, elements) {\n    var _this = this;\n    if (!this.identityProvider) {\n      return this.trait.splice(start, deleteCount, elements.map(function () {\n        return false;\n      }));\n    }\n    var pastElementsWithTrait = this.trait.get().map(function (i) {\n      return _this.identityProvider.getId(_this.view.element(i)).toString();\n    });\n    var elementsWithTrait = elements.map(function (e) {\n      return pastElementsWithTrait.indexOf(_this.identityProvider.getId(e).toString()) > -1;\n    });\n    this.trait.splice(start, deleteCount, elementsWithTrait);\n  };\n  return TraitSpliceable;\n}();\nfunction isInputElement(e) {\n  return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nvar KeyboardController = /** @class */function () {\n  function KeyboardController(list, view, options) {\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    var multipleSelectionSupport = options.multipleSelectionSupport !== false;\n    this.openController = options.openController || DefaultOpenController;\n    var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown')).filter(function (e) {\n      return !isInputElement(e.target);\n    }).map(function (e) {\n      return new StandardKeyboardEvent(e);\n    });\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 3 /* Enter */;\n    }).on(this.onEnter, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 16 /* UpArrow */;\n    }).on(this.onUpArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 18 /* DownArrow */;\n    }).on(this.onDownArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 11 /* PageUp */;\n    }).on(this.onPageUpArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 12 /* PageDown */;\n    }).on(this.onPageDownArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 9 /* Escape */;\n    }).on(this.onEscape, this, this.disposables);\n    if (multipleSelectionSupport) {\n      onKeyDown.filter(function (e) {\n        return (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KEY_A */;\n      }).on(this.onCtrlA, this, this.disposables);\n    }\n  }\n  KeyboardController.prototype.onEnter = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    if (this.openController.shouldOpen(e.browserEvent)) {\n      this.list.open(this.list.getFocus(), e.browserEvent);\n    }\n  };\n  KeyboardController.prototype.onUpArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusPrevious(1, false, e.browserEvent);\n    this.list.reveal(this.list.getFocus()[0]);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.onDownArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusNext(1, false, e.browserEvent);\n    this.list.reveal(this.list.getFocus()[0]);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.onPageUpArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusPreviousPage(e.browserEvent);\n    this.list.reveal(this.list.getFocus()[0]);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.onPageDownArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusNextPage(e.browserEvent);\n    this.list.reveal(this.list.getFocus()[0]);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.onCtrlA = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.setSelection(range(this.list.length), e.browserEvent);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.onEscape = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.setSelection([], e.browserEvent);\n    this.view.domNode.focus();\n  };\n  KeyboardController.prototype.dispose = function () {\n    this.disposables.dispose();\n  };\n  return KeyboardController;\n}();\nvar TypeLabelControllerState;\n(function (TypeLabelControllerState) {\n  TypeLabelControllerState[TypeLabelControllerState[\"Idle\"] = 0] = \"Idle\";\n  TypeLabelControllerState[TypeLabelControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeLabelControllerState || (TypeLabelControllerState = {}));\nexport var DefaultKeyboardNavigationDelegate = new ( /** @class */function () {\n  function class_1() {}\n  class_1.prototype.mightProducePrintableCharacter = function (event) {\n    if (event.ctrlKey || event.metaKey || event.altKey) {\n      return false;\n    }\n    return event.keyCode >= 31 /* KEY_A */ && event.keyCode <= 56 /* KEY_Z */ || event.keyCode >= 21 /* KEY_0 */ && event.keyCode <= 30 /* KEY_9 */ || event.keyCode >= 93 /* NUMPAD_0 */ && event.keyCode <= 102 /* NUMPAD_9 */ || event.keyCode >= 80 /* US_SEMICOLON */ && event.keyCode <= 90 /* US_QUOTE */;\n  };\n\n  return class_1;\n}())();\nvar TypeLabelController = /** @class */function () {\n  function TypeLabelController(list, view, keyboardNavigationLabelProvider, delegate) {\n    this.list = list;\n    this.view = view;\n    this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n    this.delegate = delegate;\n    this.enabled = false;\n    this.state = TypeLabelControllerState.Idle;\n    this.automaticKeyboardNavigation = true;\n    this.triggered = false;\n    this.enabledDisposables = new DisposableStore();\n    this.disposables = new DisposableStore();\n    this.updateOptions(list.options);\n  }\n  TypeLabelController.prototype.updateOptions = function (options) {\n    var enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\n    if (enableKeyboardNavigation) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n    if (typeof options.automaticKeyboardNavigation !== 'undefined') {\n      this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\n    }\n  };\n  TypeLabelController.prototype.enable = function () {\n    var _this = this;\n    if (this.enabled) {\n      return;\n    }\n    var onChar = Event.chain(domEvent(this.view.domNode, 'keydown')).filter(function (e) {\n      return !isInputElement(e.target);\n    }).filter(function () {\n      return _this.automaticKeyboardNavigation || _this.triggered;\n    }).map(function (event) {\n      return new StandardKeyboardEvent(event);\n    }).filter(function (e) {\n      return _this.delegate.mightProducePrintableCharacter(e);\n    }).forEach(function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n    }).map(function (event) {\n      return event.browserEvent.key;\n    }).event;\n    var onClear = Event.debounce(onChar, function () {\n      return null;\n    }, 800);\n    var onInput = Event.reduce(Event.any(onChar, onClear), function (r, i) {\n      return i === null ? null : (r || '') + i;\n    });\n    onInput(this.onInput, this, this.enabledDisposables);\n    this.enabled = true;\n    this.triggered = false;\n  };\n  TypeLabelController.prototype.disable = function () {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabledDisposables.clear();\n    this.enabled = false;\n    this.triggered = false;\n  };\n  TypeLabelController.prototype.onInput = function (word) {\n    if (!word) {\n      this.state = TypeLabelControllerState.Idle;\n      this.triggered = false;\n      return;\n    }\n    var focus = this.list.getFocus();\n    var start = focus.length > 0 ? focus[0] : 0;\n    var delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\n    this.state = TypeLabelControllerState.Typing;\n    for (var i = 0; i < this.list.length; i++) {\n      var index = (start + i + delta) % this.list.length;\n      var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n      var labelStr = label && label.toString();\n      if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n        this.list.setFocus([index]);\n        this.list.reveal(index);\n        return;\n      }\n    }\n  };\n  TypeLabelController.prototype.dispose = function () {\n    this.disable();\n    this.enabledDisposables.dispose();\n    this.disposables.dispose();\n  };\n  return TypeLabelController;\n}();\nvar DOMFocusController = /** @class */function () {\n  function DOMFocusController(list, view) {\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown')).filter(function (e) {\n      return !isInputElement(e.target);\n    }).map(function (e) {\n      return new StandardKeyboardEvent(e);\n    });\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 2 /* Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey;\n    }).on(this.onTab, this, this.disposables);\n  }\n  DOMFocusController.prototype.onTab = function (e) {\n    if (e.target !== this.view.domNode) {\n      return;\n    }\n    var focus = this.list.getFocus();\n    if (focus.length === 0) {\n      return;\n    }\n    var focusedDomElement = this.view.domElement(focus[0]);\n    if (!focusedDomElement) {\n      return;\n    }\n    var tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n    if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n      return;\n    }\n    var style = window.getComputedStyle(tabIndexElement);\n    if (style.visibility === 'hidden' || style.display === 'none') {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    tabIndexElement.focus();\n  };\n  DOMFocusController.prototype.dispose = function () {\n    this.disposables.dispose();\n  };\n  return DOMFocusController;\n}();\nexport function isSelectionSingleChangeEvent(event) {\n  return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n  return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n  return event instanceof MouseEvent && event.button === 2;\n}\nvar DefaultMultipleSelectionController = {\n  isSelectionSingleChangeEvent: isSelectionSingleChangeEvent,\n  isSelectionRangeChangeEvent: isSelectionRangeChangeEvent\n};\nvar DefaultOpenController = {\n  shouldOpen: function shouldOpen(event) {\n    if (event instanceof MouseEvent) {\n      return !isMouseRightClick(event);\n    }\n    return true;\n  }\n};\nvar MouseController = /** @class */function () {\n  function MouseController(list) {\n    this.list = list;\n    this.disposables = new DisposableStore();\n    this.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\n    if (this.multipleSelectionSupport) {\n      this.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\n    }\n    this.openController = list.options.openController || DefaultOpenController;\n    this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n    if (this.mouseSupport) {\n      list.onMouseDown(this.onMouseDown, this, this.disposables);\n      list.onContextMenu(this.onContextMenu, this, this.disposables);\n      list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n      list.onTouchStart(this.onMouseDown, this, this.disposables);\n      this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n    }\n    list.onMouseClick(this.onPointer, this, this.disposables);\n    list.onMouseMiddleClick(this.onPointer, this, this.disposables);\n    list.onTap(this.onPointer, this, this.disposables);\n  }\n  MouseController.prototype.isSelectionSingleChangeEvent = function (event) {\n    if (this.multipleSelectionController) {\n      return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n  };\n  MouseController.prototype.isSelectionRangeChangeEvent = function (event) {\n    if (this.multipleSelectionController) {\n      return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    return event.browserEvent.shiftKey;\n  };\n  MouseController.prototype.isSelectionChangeEvent = function (event) {\n    return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n  };\n  MouseController.prototype.onMouseDown = function (e) {\n    if (document.activeElement !== e.browserEvent.target) {\n      this.list.domFocus();\n    }\n  };\n  MouseController.prototype.onContextMenu = function (e) {\n    var focus = typeof e.index === 'undefined' ? [] : [e.index];\n    this.list.setFocus(focus, e.browserEvent);\n  };\n  MouseController.prototype.onPointer = function (e) {\n    if (!this.mouseSupport) {\n      return;\n    }\n    if (isInputElement(e.browserEvent.target)) {\n      return;\n    }\n    var reference = this.list.getFocus()[0];\n    var selection = this.list.getSelection();\n    reference = reference === undefined ? selection[0] : reference;\n    var focus = e.index;\n    if (typeof focus === 'undefined') {\n      this.list.setFocus([], e.browserEvent);\n      this.list.setSelection([], e.browserEvent);\n      return;\n    }\n    if (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\n      return this.changeSelection(e, reference);\n    }\n    if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n      return this.changeSelection(e, reference);\n    }\n    this.list.setFocus([focus], e.browserEvent);\n    if (!isMouseRightClick(e.browserEvent)) {\n      this.list.setSelection([focus], e.browserEvent);\n      if (this.openController.shouldOpen(e.browserEvent)) {\n        this.list.open([focus], e.browserEvent);\n      }\n    }\n  };\n  MouseController.prototype.onDoubleClick = function (e) {\n    if (isInputElement(e.browserEvent.target)) {\n      return;\n    }\n    if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n      return;\n    }\n    var focus = this.list.getFocus();\n    this.list.setSelection(focus, e.browserEvent);\n    this.list.pin(focus);\n  };\n  MouseController.prototype.changeSelection = function (e, reference) {\n    var focus = e.index;\n    if (this.isSelectionRangeChangeEvent(e) && reference !== undefined) {\n      var min = Math.min(reference, focus);\n      var max = Math.max(reference, focus);\n      var rangeSelection = range(min, max + 1);\n      var selection = this.list.getSelection();\n      var contiguousRange = getContiguousRangeContaining(disjunction(selection, [reference]), reference);\n      if (contiguousRange.length === 0) {\n        return;\n      }\n      var newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n      this.list.setSelection(newSelection, e.browserEvent);\n    } else if (this.isSelectionSingleChangeEvent(e)) {\n      var selection = this.list.getSelection();\n      var newSelection = selection.filter(function (i) {\n        return i !== focus;\n      });\n      this.list.setFocus([focus]);\n      if (selection.length === newSelection.length) {\n        this.list.setSelection(__spreadArrays(newSelection, [focus]), e.browserEvent);\n      } else {\n        this.list.setSelection(newSelection, e.browserEvent);\n      }\n    }\n  };\n  MouseController.prototype.dispose = function () {\n    this.disposables.dispose();\n  };\n  return MouseController;\n}();\nexport { MouseController };\nvar DefaultStyleController = /** @class */function () {\n  function DefaultStyleController(styleElement, selectorSuffix) {\n    this.styleElement = styleElement;\n    this.selectorSuffix = selectorSuffix;\n  }\n  DefaultStyleController.prototype.style = function (styles) {\n    var suffix = this.selectorSuffix && \".\" + this.selectorSuffix;\n    var content = [];\n    if (styles.listBackground) {\n      if (styles.listBackground.isOpaque()) {\n        content.push(\".monaco-list\" + suffix + \" .monaco-list-rows { background: \" + styles.listBackground + \"; }\");\n      } else if (!platform.isMacintosh) {\n        // subpixel AA doesn't exist in macOS\n        console.warn(\"List with id '\" + this.selectorSuffix + \"' was styled with a non-opaque background color. This will break sub-pixel antialiasing.\");\n      }\n    }\n    if (styles.listFocusBackground) {\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { background-color: \" + styles.listFocusBackground + \"; }\");\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused:hover { background-color: \" + styles.listFocusBackground + \"; }\"); // overwrite :hover style in this case!\n    }\n\n    if (styles.listFocusForeground) {\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { color: \" + styles.listFocusForeground + \"; }\");\n    }\n    if (styles.listActiveSelectionBackground) {\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected:hover { background-color: \" + styles.listActiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\n    }\n\n    if (styles.listActiveSelectionForeground) {\n      content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { color: \" + styles.listActiveSelectionForeground + \"; }\");\n    }\n    if (styles.listFocusAndSelectionBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\n    }\n    if (styles.listFocusAndSelectionForeground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\n    }\n    if (styles.listInactiveFocusBackground) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { background-color:  \" + styles.listInactiveFocusBackground + \"; }\");\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused:hover { background-color:  \" + styles.listInactiveFocusBackground + \"; }\"); // overwrite :hover style in this case!\n    }\n\n    if (styles.listInactiveSelectionBackground) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\");\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected:hover { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\n    }\n\n    if (styles.listInactiveSelectionForeground) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { color: \" + styles.listInactiveSelectionForeground + \"; }\");\n    }\n    if (styles.listHoverBackground) {\n      content.push(\".monaco-list\" + suffix + \":not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  \" + styles.listHoverBackground + \"; }\");\n    }\n    if (styles.listHoverForeground) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover:not(.selected):not(.focused) { color:  \" + styles.listHoverForeground + \"; }\");\n    }\n    if (styles.listSelectionOutline) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { outline: 1px dotted \" + styles.listSelectionOutline + \"; outline-offset: -1px; }\");\n    }\n    if (styles.listFocusOutline) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.focused { outline: 1px solid \" + styles.listFocusOutline + \"; outline-offset: -1px; }\\n\\t\\t\\t\");\n    }\n    if (styles.listInactiveFocusOutline) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { outline: 1px dotted \" + styles.listInactiveFocusOutline + \"; outline-offset: -1px; }\");\n    }\n    if (styles.listHoverOutline) {\n      content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover { outline: 1px dashed \" + styles.listHoverOutline + \"; outline-offset: -1px; }\");\n    }\n    if (styles.listDropBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-list\" + suffix + \".drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-rows.drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\n    }\n    if (styles.listFilterWidgetBackground) {\n      content.push(\".monaco-list-type-filter { background-color: \" + styles.listFilterWidgetBackground + \" }\");\n    }\n    if (styles.listFilterWidgetOutline) {\n      content.push(\".monaco-list-type-filter { border: 1px solid \" + styles.listFilterWidgetOutline + \"; }\");\n    }\n    if (styles.listFilterWidgetNoMatchesOutline) {\n      content.push(\".monaco-list-type-filter.no-matches { border: 1px solid \" + styles.listFilterWidgetNoMatchesOutline + \"; }\");\n    }\n    if (styles.listMatchesShadow) {\n      content.push(\".monaco-list-type-filter { box-shadow: 1px 1px 1px \" + styles.listMatchesShadow + \"; }\");\n    }\n    var newStyles = content.join('\\n');\n    if (newStyles !== this.styleElement.innerHTML) {\n      this.styleElement.innerHTML = newStyles;\n    }\n  };\n  return DefaultStyleController;\n}();\nexport { DefaultStyleController };\nvar defaultStyles = {\n  listFocusBackground: Color.fromHex('#7FB0D0'),\n  listActiveSelectionBackground: Color.fromHex('#0E639C'),\n  listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n  listFocusAndSelectionBackground: Color.fromHex('#094771'),\n  listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n  listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n  listHoverBackground: Color.fromHex('#2A2D2E'),\n  listDropBackground: Color.fromHex('#383B3D'),\n  treeIndentGuidesStroke: Color.fromHex('#a9a9a9')\n};\nvar DefaultOptions = {\n  keyboardSupport: true,\n  mouseSupport: true,\n  multipleSelectionSupport: true,\n  dnd: {\n    getDragURI: function getDragURI() {\n      return null;\n    },\n    onDragStart: function onDragStart() {},\n    onDragOver: function onDragOver() {\n      return false;\n    },\n    drop: function drop() {}\n  },\n  ariaRootRole: ListAriaRootRole.TREE\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n  var index = range.indexOf(value);\n  if (index === -1) {\n    return [];\n  }\n  var result = [];\n  var i = index - 1;\n  while (i >= 0 && range[i] === value - (index - i)) {\n    result.push(range[i--]);\n  }\n  result.reverse();\n  i = index;\n  while (i < range.length && range[i] === value + (i - index)) {\n    result.push(range[i++]);\n  }\n  return result;\n}\n/**\r\n * Given two sorted collections of numbers, returns the intersection\r\n * between them (OR).\r\n */\nfunction disjunction(one, other) {\n  var result = [];\n  var i = 0,\n    j = 0;\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      result.push(one[i]);\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      result.push(other[j++]);\n    }\n  }\n  return result;\n}\n/**\r\n * Given two sorted collections of numbers, returns the relative\r\n * complement between them (XOR).\r\n */\nfunction relativeComplement(one, other) {\n  var result = [];\n  var i = 0,\n    j = 0;\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      j++;\n    }\n  }\n  return result;\n}\nvar numericSort = function numericSort(a, b) {\n  return a - b;\n};\nvar PipelineRenderer = /** @class */function () {\n  function PipelineRenderer(_templateId, renderers) {\n    this._templateId = _templateId;\n    this.renderers = renderers;\n  }\n  Object.defineProperty(PipelineRenderer.prototype, \"templateId\", {\n    get: function get() {\n      return this._templateId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PipelineRenderer.prototype.renderTemplate = function (container) {\n    return this.renderers.map(function (r) {\n      return r.renderTemplate(container);\n    });\n  };\n  PipelineRenderer.prototype.renderElement = function (element, index, templateData, height) {\n    var i = 0;\n    for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\n      var renderer = _a[_i];\n      renderer.renderElement(element, index, templateData[i++], height);\n    }\n  };\n  PipelineRenderer.prototype.disposeElement = function (element, index, templateData, height) {\n    var i = 0;\n    for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\n      var renderer = _a[_i];\n      if (renderer.disposeElement) {\n        renderer.disposeElement(element, index, templateData[i], height);\n      }\n      i += 1;\n    }\n  };\n  PipelineRenderer.prototype.disposeTemplate = function (templateData) {\n    var i = 0;\n    for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\n      var renderer = _a[_i];\n      renderer.disposeTemplate(templateData[i++]);\n    }\n  };\n  return PipelineRenderer;\n}();\nvar AccessibiltyRenderer = /** @class */function () {\n  function AccessibiltyRenderer(accessibilityProvider) {\n    this.accessibilityProvider = accessibilityProvider;\n    this.templateId = 'a18n';\n  }\n  AccessibiltyRenderer.prototype.renderTemplate = function (container) {\n    return container;\n  };\n  AccessibiltyRenderer.prototype.renderElement = function (element, index, container) {\n    var ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n    if (ariaLabel) {\n      container.setAttribute('aria-label', ariaLabel);\n    } else {\n      container.removeAttribute('aria-label');\n    }\n    var ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n    if (typeof ariaLevel === 'number') {\n      container.setAttribute('aria-level', \"\" + ariaLevel);\n    } else {\n      container.removeAttribute('aria-level');\n    }\n  };\n  AccessibiltyRenderer.prototype.disposeTemplate = function (templateData) {\n    // noop\n  };\n  return AccessibiltyRenderer;\n}();\nvar ListViewDragAndDrop = /** @class */function () {\n  function ListViewDragAndDrop(list, dnd) {\n    this.list = list;\n    this.dnd = dnd;\n  }\n  ListViewDragAndDrop.prototype.getDragElements = function (element) {\n    var selection = this.list.getSelectedElements();\n    var elements = selection.indexOf(element) > -1 ? selection : [element];\n    return elements;\n  };\n  ListViewDragAndDrop.prototype.getDragURI = function (element) {\n    return this.dnd.getDragURI(element);\n  };\n  ListViewDragAndDrop.prototype.getDragLabel = function (elements, originalEvent) {\n    if (this.dnd.getDragLabel) {\n      return this.dnd.getDragLabel(elements, originalEvent);\n    }\n    return undefined;\n  };\n  ListViewDragAndDrop.prototype.onDragStart = function (data, originalEvent) {\n    if (this.dnd.onDragStart) {\n      this.dnd.onDragStart(data, originalEvent);\n    }\n  };\n  ListViewDragAndDrop.prototype.onDragOver = function (data, targetElement, targetIndex, originalEvent) {\n    return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n  };\n  ListViewDragAndDrop.prototype.onDragEnd = function (originalEvent) {\n    if (this.dnd.onDragEnd) {\n      this.dnd.onDragEnd(originalEvent);\n    }\n  };\n  ListViewDragAndDrop.prototype.drop = function (data, targetElement, targetIndex, originalEvent) {\n    this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n  };\n  return ListViewDragAndDrop;\n}();\nvar List = /** @class */function () {\n  function List(user, container, virtualDelegate, renderers, _options) {\n    if (_options === void 0) {\n      _options = DefaultOptions;\n    }\n    this.user = user;\n    this._options = _options;\n    this.eventBufferer = new EventBufferer();\n    this.disposables = new DisposableStore();\n    this._onDidOpen = new Emitter();\n    this.onDidOpen = this._onDidOpen.event;\n    this._onDidPin = new Emitter();\n    this.didJustPressContextMenuKey = false;\n    this._onDidDispose = new Emitter();\n    this.onDidDispose = this._onDidDispose.event;\n    this.focus = new FocusTrait();\n    this.selection = new Trait('selected');\n    mixin(_options, defaultStyles, false);\n    var baseRenderers = [this.focus.renderer, this.selection.renderer];\n    this.accessibilityProvider = _options.accessibilityProvider;\n    if (this.accessibilityProvider) {\n      baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n      if (this.accessibilityProvider.onDidChangeActiveDescendant) {\n        this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\n      }\n    }\n    renderers = renderers.map(function (r) {\n      return new PipelineRenderer(r.templateId, __spreadArrays(baseRenderers, [r]));\n    });\n    var viewOptions = __assign(__assign({}, _options), {\n      dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n    });\n    this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n    if (typeof _options.ariaRole !== 'string') {\n      this.view.domNode.setAttribute('role', ListAriaRootRole.TREE);\n    } else {\n      this.view.domNode.setAttribute('role', _options.ariaRole);\n    }\n    if (_options.styleController) {\n      this.styleController = _options.styleController(this.view.domId);\n    } else {\n      var styleElement = DOM.createStyleSheet(this.view.domNode);\n      this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n    }\n    this.spliceable = new CombinedSpliceable([new TraitSpliceable(this.focus, this.view, _options.identityProvider), new TraitSpliceable(this.selection, this.view, _options.identityProvider), this.view]);\n    this.disposables.add(this.focus);\n    this.disposables.add(this.selection);\n    this.disposables.add(this.view);\n    this.disposables.add(this._onDidDispose);\n    this.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), function () {\n      return null;\n    });\n    this.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), function () {\n      return null;\n    });\n    this.disposables.add(new DOMFocusController(this, this.view));\n    if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n      var controller = new KeyboardController(this, this.view, _options);\n      this.disposables.add(controller);\n    }\n    if (_options.keyboardNavigationLabelProvider) {\n      var delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n      this.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\n      this.disposables.add(this.typeLabelController);\n    }\n    this.disposables.add(this.createMouseController(_options));\n    this.onFocusChange(this._onFocusChange, this, this.disposables);\n    this.onSelectionChange(this._onSelectionChange, this, this.disposables);\n    if (_options.ariaLabel) {\n      this.view.domNode.setAttribute('aria-label', localize('aria list', \"{0}. Use the navigation keys to navigate.\", _options.ariaLabel));\n    }\n  }\n  Object.defineProperty(List.prototype, \"onFocusChange\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), function (e) {\n        return _this.toListEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onSelectionChange\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), function (e) {\n        return _this.toListEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"domId\", {\n    get: function get() {\n      return this.view.domId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onMouseClick\", {\n    get: function get() {\n      return this.view.onMouseClick;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onMouseDblClick\", {\n    get: function get() {\n      return this.view.onMouseDblClick;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onMouseMiddleClick\", {\n    get: function get() {\n      return this.view.onMouseMiddleClick;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onMouseDown\", {\n    get: function get() {\n      return this.view.onMouseDown;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onTouchStart\", {\n    get: function get() {\n      return this.view.onTouchStart;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onTap\", {\n    get: function get() {\n      return this.view.onTap;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onContextMenu\", {\n    get: function get() {\n      var _this = this;\n      var fromKeydown = Event.chain(domEvent(this.view.domNode, 'keydown')).map(function (e) {\n        return new StandardKeyboardEvent(e);\n      }).filter(function (e) {\n        return _this.didJustPressContextMenuKey = e.keyCode === 58 /* ContextMenu */ || e.shiftKey && e.keyCode === 68 /* F10 */;\n      }).filter(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }).event;\n      var fromKeyup = Event.chain(domEvent(this.view.domNode, 'keyup')).filter(function () {\n        var didJustPressContextMenuKey = _this.didJustPressContextMenuKey;\n        _this.didJustPressContextMenuKey = false;\n        return didJustPressContextMenuKey;\n      }).filter(function () {\n        return _this.getFocus().length > 0 && !!_this.view.domElement(_this.getFocus()[0]);\n      }).map(function (browserEvent) {\n        var index = _this.getFocus()[0];\n        var element = _this.view.element(index);\n        var anchor = _this.view.domElement(index);\n        return {\n          index: index,\n          element: element,\n          anchor: anchor,\n          browserEvent: browserEvent\n        };\n      }).event;\n      var fromMouse = Event.chain(this.view.onContextMenu).filter(function () {\n        return !_this.didJustPressContextMenuKey;\n      }).map(function (_a) {\n        var element = _a.element,\n          index = _a.index,\n          browserEvent = _a.browserEvent;\n        return {\n          element: element,\n          index: index,\n          anchor: {\n            x: browserEvent.clientX + 1,\n            y: browserEvent.clientY\n          },\n          browserEvent: browserEvent\n        };\n      }).event;\n      return Event.any(fromKeydown, fromKeyup, fromMouse);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"onKeyDown\", {\n    get: function get() {\n      return domEvent(this.view.domNode, 'keydown');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  List.prototype.createMouseController = function (options) {\n    return new MouseController(this);\n  };\n  List.prototype.updateOptions = function (optionsUpdate) {\n    if (optionsUpdate === void 0) {\n      optionsUpdate = {};\n    }\n    this._options = __assign(__assign({}, this._options), optionsUpdate);\n    if (this.typeLabelController) {\n      this.typeLabelController.updateOptions(this._options);\n    }\n  };\n  Object.defineProperty(List.prototype, \"options\", {\n    get: function get() {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  List.prototype.splice = function (start, deleteCount, elements) {\n    var _this = this;\n    if (elements === void 0) {\n      elements = [];\n    }\n    if (start < 0 || start > this.view.length) {\n      throw new ListError(this.user, \"Invalid start index: \" + start);\n    }\n    if (deleteCount < 0) {\n      throw new ListError(this.user, \"Invalid delete count: \" + deleteCount);\n    }\n    if (deleteCount === 0 && elements.length === 0) {\n      return;\n    }\n    this.eventBufferer.bufferEvents(function () {\n      return _this.spliceable.splice(start, deleteCount, elements);\n    });\n  };\n  List.prototype.rerender = function () {\n    this.view.rerender();\n  };\n  List.prototype.element = function (index) {\n    return this.view.element(index);\n  };\n  Object.defineProperty(List.prototype, \"length\", {\n    get: function get() {\n      return this.view.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"contentHeight\", {\n    get: function get() {\n      return this.view.contentHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(List.prototype, \"scrollTop\", {\n    get: function get() {\n      return this.view.getScrollTop();\n    },\n    set: function set(scrollTop) {\n      this.view.setScrollTop(scrollTop);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  List.prototype.domFocus = function () {\n    this.view.domNode.focus();\n  };\n  List.prototype.layout = function (height, width) {\n    this.view.layout(height, width);\n  };\n  List.prototype.setSelection = function (indexes, browserEvent) {\n    for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n      var index = indexes_1[_i];\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \" + index);\n      }\n    }\n    this.selection.set(indexes, browserEvent);\n  };\n  List.prototype.getSelection = function () {\n    return this.selection.get();\n  };\n  List.prototype.getSelectedElements = function () {\n    var _this = this;\n    return this.getSelection().map(function (i) {\n      return _this.view.element(i);\n    });\n  };\n  List.prototype.setFocus = function (indexes, browserEvent) {\n    for (var _i = 0, indexes_2 = indexes; _i < indexes_2.length; _i++) {\n      var index = indexes_2[_i];\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \" + index);\n      }\n    }\n    this.focus.set(indexes, browserEvent);\n  };\n  List.prototype.focusNext = function (n, loop, browserEvent, filter) {\n    if (n === void 0) {\n      n = 1;\n    }\n    if (loop === void 0) {\n      loop = false;\n    }\n    if (this.length === 0) {\n      return;\n    }\n    var focus = this.focus.get();\n    var index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  };\n  List.prototype.focusPrevious = function (n, loop, browserEvent, filter) {\n    if (n === void 0) {\n      n = 1;\n    }\n    if (loop === void 0) {\n      loop = false;\n    }\n    if (this.length === 0) {\n      return;\n    }\n    var focus = this.focus.get();\n    var index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  };\n  List.prototype.focusNextPage = function (browserEvent, filter) {\n    var _this = this;\n    var lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n    lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n    var lastPageElement = this.view.element(lastPageIndex);\n    var currentlyFocusedElement = this.getFocusedElements()[0];\n    if (currentlyFocusedElement !== lastPageElement) {\n      var lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n      if (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\n        this.setFocus([lastGoodPageIndex], browserEvent);\n      } else {\n        this.setFocus([lastPageIndex], browserEvent);\n      }\n    } else {\n      var previousScrollTop = this.view.getScrollTop();\n      this.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\n      if (this.view.getScrollTop() !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          return _this.focusNextPage(browserEvent, filter);\n        }, 0);\n      }\n    }\n  };\n  List.prototype.focusPreviousPage = function (browserEvent, filter) {\n    var _this = this;\n    var firstPageIndex;\n    var scrollTop = this.view.getScrollTop();\n    if (scrollTop === 0) {\n      firstPageIndex = this.view.indexAt(scrollTop);\n    } else {\n      firstPageIndex = this.view.indexAfter(scrollTop - 1);\n    }\n    var firstPageElement = this.view.element(firstPageIndex);\n    var currentlyFocusedElement = this.getFocusedElements()[0];\n    if (currentlyFocusedElement !== firstPageElement) {\n      var firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n      if (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\n        this.setFocus([firstGoodPageIndex], browserEvent);\n      } else {\n        this.setFocus([firstPageIndex], browserEvent);\n      }\n    } else {\n      var previousScrollTop = scrollTop;\n      this.view.setScrollTop(scrollTop - this.view.renderHeight);\n      if (this.view.getScrollTop() !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          return _this.focusPreviousPage(browserEvent, filter);\n        }, 0);\n      }\n    }\n  };\n  List.prototype.focusLast = function (browserEvent, filter) {\n    if (this.length === 0) {\n      return;\n    }\n    var index = this.findPreviousIndex(this.length - 1, false, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  };\n  List.prototype.focusFirst = function (browserEvent, filter) {\n    if (this.length === 0) {\n      return;\n    }\n    var index = this.findNextIndex(0, false, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  };\n  List.prototype.findNextIndex = function (index, loop, filter) {\n    if (loop === void 0) {\n      loop = false;\n    }\n    for (var i = 0; i < this.length; i++) {\n      if (index >= this.length && !loop) {\n        return -1;\n      }\n      index = index % this.length;\n      if (!filter || filter(this.element(index))) {\n        return index;\n      }\n      index++;\n    }\n    return -1;\n  };\n  List.prototype.findPreviousIndex = function (index, loop, filter) {\n    if (loop === void 0) {\n      loop = false;\n    }\n    for (var i = 0; i < this.length; i++) {\n      if (index < 0 && !loop) {\n        return -1;\n      }\n      index = (this.length + index % this.length) % this.length;\n      if (!filter || filter(this.element(index))) {\n        return index;\n      }\n      index--;\n    }\n    return -1;\n  };\n  List.prototype.getFocus = function () {\n    return this.focus.get();\n  };\n  List.prototype.getFocusedElements = function () {\n    var _this = this;\n    return this.getFocus().map(function (i) {\n      return _this.view.element(i);\n    });\n  };\n  List.prototype.reveal = function (index, relativeTop) {\n    if (index < 0 || index >= this.length) {\n      throw new ListError(this.user, \"Invalid index \" + index);\n    }\n    var scrollTop = this.view.getScrollTop();\n    var elementTop = this.view.elementTop(index);\n    var elementHeight = this.view.elementHeight(index);\n    if (isNumber(relativeTop)) {\n      // y = mx + b\n      var m = elementHeight - this.view.renderHeight;\n      this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n    } else {\n      var viewItemBottom = elementTop + elementHeight;\n      var wrapperBottom = scrollTop + this.view.renderHeight;\n      if (elementTop < scrollTop && viewItemBottom >= wrapperBottom) {\n        // The element is already overflowing the viewport, no-op\n      } else if (elementTop < scrollTop) {\n        this.view.setScrollTop(elementTop);\n      } else if (viewItemBottom >= wrapperBottom) {\n        this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n      }\n    }\n  };\n  /**\r\n   * Returns the relative position of an element rendered in the list.\r\n   * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n   */\n  List.prototype.getRelativeTop = function (index) {\n    if (index < 0 || index >= this.length) {\n      throw new ListError(this.user, \"Invalid index \" + index);\n    }\n    var scrollTop = this.view.getScrollTop();\n    var elementTop = this.view.elementTop(index);\n    var elementHeight = this.view.elementHeight(index);\n    if (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\n      return null;\n    }\n    // y = mx + b\n    var m = elementHeight - this.view.renderHeight;\n    return Math.abs((scrollTop - elementTop) / m);\n  };\n  List.prototype.getHTMLElement = function () {\n    return this.view.domNode;\n  };\n  List.prototype.open = function (indexes, browserEvent) {\n    var _this = this;\n    for (var _i = 0, indexes_3 = indexes; _i < indexes_3.length; _i++) {\n      var index = indexes_3[_i];\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \" + index);\n      }\n    }\n    this._onDidOpen.fire({\n      indexes: indexes,\n      elements: indexes.map(function (i) {\n        return _this.view.element(i);\n      }),\n      browserEvent: browserEvent\n    });\n  };\n  List.prototype.pin = function (indexes, browserEvent) {\n    var _this = this;\n    for (var _i = 0, indexes_4 = indexes; _i < indexes_4.length; _i++) {\n      var index = indexes_4[_i];\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \" + index);\n      }\n    }\n    this._onDidPin.fire({\n      indexes: indexes,\n      elements: indexes.map(function (i) {\n        return _this.view.element(i);\n      }),\n      browserEvent: browserEvent\n    });\n  };\n  List.prototype.style = function (styles) {\n    this.styleController.style(styles);\n  };\n  List.prototype.toListEvent = function (_a) {\n    var _this = this;\n    var indexes = _a.indexes,\n      browserEvent = _a.browserEvent;\n    return {\n      indexes: indexes,\n      elements: indexes.map(function (i) {\n        return _this.view.element(i);\n      }),\n      browserEvent: browserEvent\n    };\n  };\n  List.prototype._onFocusChange = function () {\n    var focus = this.focus.get();\n    DOM.toggleClass(this.view.domNode, 'element-focused', focus.length > 0);\n    this.onDidChangeActiveDescendant();\n  };\n  List.prototype.onDidChangeActiveDescendant = function () {\n    var _a;\n    var focus = this.focus.get();\n    if (focus.length > 0) {\n      var id = void 0;\n      if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n        id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n      }\n      this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n    } else {\n      this.view.domNode.removeAttribute('aria-activedescendant');\n    }\n  };\n  List.prototype._onSelectionChange = function () {\n    var selection = this.selection.get();\n    DOM.toggleClass(this.view.domNode, 'selection-none', selection.length === 0);\n    DOM.toggleClass(this.view.domNode, 'selection-single', selection.length === 1);\n    DOM.toggleClass(this.view.domNode, 'selection-multiple', selection.length > 1);\n  };\n  List.prototype.dispose = function () {\n    this._onDidDispose.fire();\n    this.disposables.dispose();\n    this._onDidOpen.dispose();\n    this._onDidPin.dispose();\n    this._onDidDispose.dispose();\n  };\n  __decorate([memoize], List.prototype, \"onFocusChange\", null);\n  __decorate([memoize], List.prototype, \"onSelectionChange\", null);\n  __decorate([memoize], List.prototype, \"onContextMenu\", null);\n  return List;\n}();\nexport { List };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArrays","il","k","a","j","jl","localize","dispose","DisposableStore","isNumber","range","firstIndex","binarySearch","memoize","DOM","platform","Gesture","StandardKeyboardEvent","Event","Emitter","EventBufferer","domEvent","ListAriaRootRole","ListError","ListView","Color","mixin","CombinedSpliceable","clamp","matchesPrefix","TraitRenderer","trait","renderedElements","get","enumerable","configurable","renderTemplate","container","renderElement","element","index","templateData","renderedElementIndex","el","rendered","unrender","push","renderIndex","splice","start","deleteCount","insertCount","_i","_a","renderedElement","renderIndexes","indexes","_b","indexOf","disposeTemplate","Trait","_trait","sortedIndexes","_onChange","onChange","event","elements","diff","end","filter","map","hasTrait","renderer","_set","toggleClass","contains","removeClass","set","browserEvent","sort","numericSort","result","sortedResult","toRender","disjunction","fire","FocusTrait","_super","setAttribute","removeAttribute","TraitSpliceable","view","identityProvider","_this","pastElementsWithTrait","getId","toString","elementsWithTrait","e","isInputElement","tagName","KeyboardController","list","options","disposables","multipleSelectionSupport","openController","DefaultOpenController","onKeyDown","chain","domNode","keyCode","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","isMacintosh","metaKey","ctrlKey","onCtrlA","preventDefault","stopPropagation","setSelection","getFocus","shouldOpen","open","focusPrevious","reveal","focus","focusNext","focusPreviousPage","focusNextPage","TypeLabelControllerState","DefaultKeyboardNavigationDelegate","class_1","mightProducePrintableCharacter","altKey","TypeLabelController","keyboardNavigationLabelProvider","delegate","enabled","state","Idle","automaticKeyboardNavigation","triggered","enabledDisposables","updateOptions","enableKeyboardNavigation","enable","disable","onChar","forEach","onClear","debounce","onInput","reduce","any","clear","word","delta","Typing","label","getKeyboardNavigationLabel","labelStr","setFocus","DOMFocusController","shiftKey","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","HTMLElement","tabIndex","style","window","getComputedStyle","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","isMouseRightClick","MouseEvent","button","DefaultMultipleSelectionController","MouseController","multipleSelectionController","mouseSupport","onMouseDown","onContextMenu","onMouseDblClick","onDoubleClick","onTouchStart","add","addTarget","getHTMLElement","onMouseClick","onPointer","onMouseMiddleClick","onTap","isSelectionChangeEvent","document","activeElement","domFocus","reference","selection","getSelection","undefined","changeSelection","pin","min","Math","max","rangeSelection","contiguousRange","getContiguousRangeContaining","newSelection","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","styles","suffix","content","listBackground","isOpaque","console","warn","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listSelectionOutline","listFocusOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","listFilterWidgetBackground","listFilterWidgetOutline","listFilterWidgetNoMatchesOutline","listMatchesShadow","newStyles","join","innerHTML","defaultStyles","fromHex","treeIndentGuidesStroke","DefaultOptions","keyboardSupport","dnd","getDragURI","onDragStart","onDragOver","drop","ariaRootRole","TREE","value","reverse","one","other","PipelineRenderer","_templateId","renderers","height","disposeElement","AccessibiltyRenderer","accessibilityProvider","templateId","ariaLabel","getAriaLabel","ariaLevel","getAriaLevel","ListViewDragAndDrop","getDragElements","getSelectedElements","getDragLabel","originalEvent","data","targetElement","targetIndex","onDragEnd","List","user","virtualDelegate","_options","eventBufferer","_onDidOpen","onDidOpen","_onDidPin","didJustPressContextMenuKey","_onDidDispose","onDidDispose","baseRenderers","onDidChangeActiveDescendant","viewOptions","ariaRole","styleController","domId","createStyleSheet","spliceable","onDidFocus","onDidBlur","controller","keyboardNavigationDelegate","typeLabelController","createMouseController","onFocusChange","_onFocusChange","onSelectionChange","_onSelectionChange","wrapEvent","toListEvent","fromKeydown","fromKeyup","anchor","fromMouse","x","clientX","y","clientY","optionsUpdate","bufferEvents","rerender","contentHeight","getScrollTop","scrollTop","setScrollTop","layout","width","indexes_1","indexes_2","loop","findNextIndex","findPreviousIndex","lastPageIndex","indexAt","renderHeight","lastPageElement","currentlyFocusedElement","getFocusedElements","lastGoodPageIndex","previousScrollTop","elementHeight","setTimeout","firstPageIndex","indexAfter","firstPageElement","firstGoodPageIndex","focusLast","focusFirst","relativeTop","elementTop","m","viewItemBottom","wrapperBottom","getRelativeTop","abs","indexes_3","indexes_4","id","getActiveDescendantId","getElementDomId"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './list.css';\r\nimport { localize } from '../../../../nls.js';\r\nimport { dispose, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { isNumber } from '../../../common/types.js';\r\nimport { range, firstIndex, binarySearch } from '../../../common/arrays.js';\r\nimport { memoize } from '../../../common/decorators.js';\r\nimport * as DOM from '../../dom.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Gesture } from '../../touch.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { Event, Emitter, EventBufferer } from '../../../common/event.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { ListAriaRootRole, ListError } from './list.js';\r\nimport { ListView } from './listView.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nimport { CombinedSpliceable } from './splice.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { matchesPrefix } from '../../../common/filters.js';\r\nvar TraitRenderer = /** @class */ (function () {\r\n    function TraitRenderer(trait) {\r\n        this.trait = trait;\r\n        this.renderedElements = [];\r\n    }\r\n    Object.defineProperty(TraitRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return \"template:\" + this.trait.trait;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TraitRenderer.prototype.renderTemplate = function (container) {\r\n        return container;\r\n    };\r\n    TraitRenderer.prototype.renderElement = function (element, index, templateData) {\r\n        var renderedElementIndex = firstIndex(this.renderedElements, function (el) { return el.templateData === templateData; });\r\n        if (renderedElementIndex >= 0) {\r\n            var rendered = this.renderedElements[renderedElementIndex];\r\n            this.trait.unrender(templateData);\r\n            rendered.index = index;\r\n        }\r\n        else {\r\n            var rendered = { index: index, templateData: templateData };\r\n            this.renderedElements.push(rendered);\r\n        }\r\n        this.trait.renderIndex(index, templateData);\r\n    };\r\n    TraitRenderer.prototype.splice = function (start, deleteCount, insertCount) {\r\n        var rendered = [];\r\n        for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\r\n            var renderedElement = _a[_i];\r\n            if (renderedElement.index < start) {\r\n                rendered.push(renderedElement);\r\n            }\r\n            else if (renderedElement.index >= start + deleteCount) {\r\n                rendered.push({\r\n                    index: renderedElement.index + insertCount - deleteCount,\r\n                    templateData: renderedElement.templateData\r\n                });\r\n            }\r\n        }\r\n        this.renderedElements = rendered;\r\n    };\r\n    TraitRenderer.prototype.renderIndexes = function (indexes) {\r\n        for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\r\n            var _b = _a[_i], index = _b.index, templateData = _b.templateData;\r\n            if (indexes.indexOf(index) > -1) {\r\n                this.trait.renderIndex(index, templateData);\r\n            }\r\n        }\r\n    };\r\n    TraitRenderer.prototype.disposeTemplate = function (templateData) {\r\n        var index = firstIndex(this.renderedElements, function (el) { return el.templateData === templateData; });\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.renderedElements.splice(index, 1);\r\n    };\r\n    return TraitRenderer;\r\n}());\r\nvar Trait = /** @class */ (function () {\r\n    function Trait(_trait) {\r\n        this._trait = _trait;\r\n        this.indexes = [];\r\n        this.sortedIndexes = [];\r\n        this._onChange = new Emitter();\r\n        this.onChange = this._onChange.event;\r\n    }\r\n    Object.defineProperty(Trait.prototype, \"trait\", {\r\n        get: function () { return this._trait; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Trait.prototype, \"renderer\", {\r\n        get: function () {\r\n            return new TraitRenderer(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Trait.prototype.splice = function (start, deleteCount, elements) {\r\n        var diff = elements.length - deleteCount;\r\n        var end = start + deleteCount;\r\n        var indexes = __spreadArrays(this.sortedIndexes.filter(function (i) { return i < start; }), elements.map(function (hasTrait, i) { return hasTrait ? i + start : -1; }).filter(function (i) { return i !== -1; }), this.sortedIndexes.filter(function (i) { return i >= end; }).map(function (i) { return i + diff; }));\r\n        this.renderer.splice(start, deleteCount, elements.length);\r\n        this._set(indexes, indexes);\r\n    };\r\n    Trait.prototype.renderIndex = function (index, container) {\r\n        DOM.toggleClass(container, this._trait, this.contains(index));\r\n    };\r\n    Trait.prototype.unrender = function (container) {\r\n        DOM.removeClass(container, this._trait);\r\n    };\r\n    /**\r\n     * Sets the indexes which should have this trait.\r\n     *\r\n     * @param indexes Indexes which should have this trait.\r\n     * @return The old indexes which had this trait.\r\n     */\r\n    Trait.prototype.set = function (indexes, browserEvent) {\r\n        return this._set(indexes, __spreadArrays(indexes).sort(numericSort), browserEvent);\r\n    };\r\n    Trait.prototype._set = function (indexes, sortedIndexes, browserEvent) {\r\n        var result = this.indexes;\r\n        var sortedResult = this.sortedIndexes;\r\n        this.indexes = indexes;\r\n        this.sortedIndexes = sortedIndexes;\r\n        var toRender = disjunction(sortedResult, indexes);\r\n        this.renderer.renderIndexes(toRender);\r\n        this._onChange.fire({ indexes: indexes, browserEvent: browserEvent });\r\n        return result;\r\n    };\r\n    Trait.prototype.get = function () {\r\n        return this.indexes;\r\n    };\r\n    Trait.prototype.contains = function (index) {\r\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\r\n    };\r\n    Trait.prototype.dispose = function () {\r\n        dispose(this._onChange);\r\n    };\r\n    __decorate([\r\n        memoize\r\n    ], Trait.prototype, \"renderer\", null);\r\n    return Trait;\r\n}());\r\nvar FocusTrait = /** @class */ (function (_super) {\r\n    __extends(FocusTrait, _super);\r\n    function FocusTrait() {\r\n        return _super.call(this, 'focused') || this;\r\n    }\r\n    FocusTrait.prototype.renderIndex = function (index, container) {\r\n        _super.prototype.renderIndex.call(this, index, container);\r\n        if (this.contains(index)) {\r\n            container.setAttribute('aria-selected', 'true');\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-selected');\r\n        }\r\n    };\r\n    return FocusTrait;\r\n}(Trait));\r\n/**\r\n * The TraitSpliceable is used as a util class to be able\r\n * to preserve traits across splice calls, given an identity\r\n * provider.\r\n */\r\nvar TraitSpliceable = /** @class */ (function () {\r\n    function TraitSpliceable(trait, view, identityProvider) {\r\n        this.trait = trait;\r\n        this.view = view;\r\n        this.identityProvider = identityProvider;\r\n    }\r\n    TraitSpliceable.prototype.splice = function (start, deleteCount, elements) {\r\n        var _this = this;\r\n        if (!this.identityProvider) {\r\n            return this.trait.splice(start, deleteCount, elements.map(function () { return false; }));\r\n        }\r\n        var pastElementsWithTrait = this.trait.get().map(function (i) { return _this.identityProvider.getId(_this.view.element(i)).toString(); });\r\n        var elementsWithTrait = elements.map(function (e) { return pastElementsWithTrait.indexOf(_this.identityProvider.getId(e).toString()) > -1; });\r\n        this.trait.splice(start, deleteCount, elementsWithTrait);\r\n    };\r\n    return TraitSpliceable;\r\n}());\r\nfunction isInputElement(e) {\r\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\r\n}\r\nvar KeyboardController = /** @class */ (function () {\r\n    function KeyboardController(list, view, options) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        var multipleSelectionSupport = options.multipleSelectionSupport !== false;\r\n        this.openController = options.openController || DefaultOpenController;\r\n        var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .map(function (e) { return new StandardKeyboardEvent(e); });\r\n        onKeyDown.filter(function (e) { return e.keyCode === 3 /* Enter */; }).on(this.onEnter, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 16 /* UpArrow */; }).on(this.onUpArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 18 /* DownArrow */; }).on(this.onDownArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 11 /* PageUp */; }).on(this.onPageUpArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 12 /* PageDown */; }).on(this.onPageDownArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 9 /* Escape */; }).on(this.onEscape, this, this.disposables);\r\n        if (multipleSelectionSupport) {\r\n            onKeyDown.filter(function (e) { return (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KEY_A */; }).on(this.onCtrlA, this, this.disposables);\r\n        }\r\n    }\r\n    KeyboardController.prototype.onEnter = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\r\n        if (this.openController.shouldOpen(e.browserEvent)) {\r\n            this.list.open(this.list.getFocus(), e.browserEvent);\r\n        }\r\n    };\r\n    KeyboardController.prototype.onUpArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPrevious(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onDownArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNext(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onPageUpArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPreviousPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onPageDownArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNextPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onCtrlA = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(range(this.list.length), e.browserEvent);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onEscape = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection([], e.browserEvent);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return KeyboardController;\r\n}());\r\nvar TypeLabelControllerState;\r\n(function (TypeLabelControllerState) {\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Idle\"] = 0] = \"Idle\";\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Typing\"] = 1] = \"Typing\";\r\n})(TypeLabelControllerState || (TypeLabelControllerState = {}));\r\nexport var DefaultKeyboardNavigationDelegate = new /** @class */ (function () {\r\n    function class_1() {\r\n    }\r\n    class_1.prototype.mightProducePrintableCharacter = function (event) {\r\n        if (event.ctrlKey || event.metaKey || event.altKey) {\r\n            return false;\r\n        }\r\n        return (event.keyCode >= 31 /* KEY_A */ && event.keyCode <= 56 /* KEY_Z */)\r\n            || (event.keyCode >= 21 /* KEY_0 */ && event.keyCode <= 30 /* KEY_9 */)\r\n            || (event.keyCode >= 93 /* NUMPAD_0 */ && event.keyCode <= 102 /* NUMPAD_9 */)\r\n            || (event.keyCode >= 80 /* US_SEMICOLON */ && event.keyCode <= 90 /* US_QUOTE */);\r\n    };\r\n    return class_1;\r\n}());\r\nvar TypeLabelController = /** @class */ (function () {\r\n    function TypeLabelController(list, view, keyboardNavigationLabelProvider, delegate) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\r\n        this.delegate = delegate;\r\n        this.enabled = false;\r\n        this.state = TypeLabelControllerState.Idle;\r\n        this.automaticKeyboardNavigation = true;\r\n        this.triggered = false;\r\n        this.enabledDisposables = new DisposableStore();\r\n        this.disposables = new DisposableStore();\r\n        this.updateOptions(list.options);\r\n    }\r\n    TypeLabelController.prototype.updateOptions = function (options) {\r\n        var enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\r\n        if (enableKeyboardNavigation) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n        if (typeof options.automaticKeyboardNavigation !== 'undefined') {\r\n            this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\r\n        }\r\n    };\r\n    TypeLabelController.prototype.enable = function () {\r\n        var _this = this;\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        var onChar = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .filter(function () { return _this.automaticKeyboardNavigation || _this.triggered; })\r\n            .map(function (event) { return new StandardKeyboardEvent(event); })\r\n            .filter(function (e) { return _this.delegate.mightProducePrintableCharacter(e); })\r\n            .forEach(function (e) { e.stopPropagation(); e.preventDefault(); })\r\n            .map(function (event) { return event.browserEvent.key; })\r\n            .event;\r\n        var onClear = Event.debounce(onChar, function () { return null; }, 800);\r\n        var onInput = Event.reduce(Event.any(onChar, onClear), function (r, i) { return i === null ? null : ((r || '') + i); });\r\n        onInput(this.onInput, this, this.enabledDisposables);\r\n        this.enabled = true;\r\n        this.triggered = false;\r\n    };\r\n    TypeLabelController.prototype.disable = function () {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.enabledDisposables.clear();\r\n        this.enabled = false;\r\n        this.triggered = false;\r\n    };\r\n    TypeLabelController.prototype.onInput = function (word) {\r\n        if (!word) {\r\n            this.state = TypeLabelControllerState.Idle;\r\n            this.triggered = false;\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        var start = focus.length > 0 ? focus[0] : 0;\r\n        var delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\r\n        this.state = TypeLabelControllerState.Typing;\r\n        for (var i = 0; i < this.list.length; i++) {\r\n            var index = (start + i + delta) % this.list.length;\r\n            var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\r\n            var labelStr = label && label.toString();\r\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\r\n                this.list.setFocus([index]);\r\n                this.list.reveal(index);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    TypeLabelController.prototype.dispose = function () {\r\n        this.disable();\r\n        this.enabledDisposables.dispose();\r\n        this.disposables.dispose();\r\n    };\r\n    return TypeLabelController;\r\n}());\r\nvar DOMFocusController = /** @class */ (function () {\r\n    function DOMFocusController(list, view) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .map(function (e) { return new StandardKeyboardEvent(e); });\r\n        onKeyDown.filter(function (e) { return e.keyCode === 2 /* Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey; })\r\n            .on(this.onTab, this, this.disposables);\r\n    }\r\n    DOMFocusController.prototype.onTab = function (e) {\r\n        if (e.target !== this.view.domNode) {\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        if (focus.length === 0) {\r\n            return;\r\n        }\r\n        var focusedDomElement = this.view.domElement(focus[0]);\r\n        if (!focusedDomElement) {\r\n            return;\r\n        }\r\n        var tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\r\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\r\n            return;\r\n        }\r\n        var style = window.getComputedStyle(tabIndexElement);\r\n        if (style.visibility === 'hidden' || style.display === 'none') {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        tabIndexElement.focus();\r\n    };\r\n    DOMFocusController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return DOMFocusController;\r\n}());\r\nexport function isSelectionSingleChangeEvent(event) {\r\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n}\r\nexport function isSelectionRangeChangeEvent(event) {\r\n    return event.browserEvent.shiftKey;\r\n}\r\nfunction isMouseRightClick(event) {\r\n    return event instanceof MouseEvent && event.button === 2;\r\n}\r\nvar DefaultMultipleSelectionController = {\r\n    isSelectionSingleChangeEvent: isSelectionSingleChangeEvent,\r\n    isSelectionRangeChangeEvent: isSelectionRangeChangeEvent\r\n};\r\nvar DefaultOpenController = {\r\n    shouldOpen: function (event) {\r\n        if (event instanceof MouseEvent) {\r\n            return !isMouseRightClick(event);\r\n        }\r\n        return true;\r\n    }\r\n};\r\nvar MouseController = /** @class */ (function () {\r\n    function MouseController(list) {\r\n        this.list = list;\r\n        this.disposables = new DisposableStore();\r\n        this.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\r\n        if (this.multipleSelectionSupport) {\r\n            this.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\r\n        }\r\n        this.openController = list.options.openController || DefaultOpenController;\r\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\r\n        if (this.mouseSupport) {\r\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\r\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\r\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\r\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\r\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\r\n        }\r\n        list.onMouseClick(this.onPointer, this, this.disposables);\r\n        list.onMouseMiddleClick(this.onPointer, this, this.disposables);\r\n        list.onTap(this.onPointer, this, this.disposables);\r\n    }\r\n    MouseController.prototype.isSelectionSingleChangeEvent = function (event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\r\n        }\r\n        return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n    };\r\n    MouseController.prototype.isSelectionRangeChangeEvent = function (event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\r\n        }\r\n        return event.browserEvent.shiftKey;\r\n    };\r\n    MouseController.prototype.isSelectionChangeEvent = function (event) {\r\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\r\n    };\r\n    MouseController.prototype.onMouseDown = function (e) {\r\n        if (document.activeElement !== e.browserEvent.target) {\r\n            this.list.domFocus();\r\n        }\r\n    };\r\n    MouseController.prototype.onContextMenu = function (e) {\r\n        var focus = typeof e.index === 'undefined' ? [] : [e.index];\r\n        this.list.setFocus(focus, e.browserEvent);\r\n    };\r\n    MouseController.prototype.onPointer = function (e) {\r\n        if (!this.mouseSupport) {\r\n            return;\r\n        }\r\n        if (isInputElement(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        var reference = this.list.getFocus()[0];\r\n        var selection = this.list.getSelection();\r\n        reference = reference === undefined ? selection[0] : reference;\r\n        var focus = e.index;\r\n        if (typeof focus === 'undefined') {\r\n            this.list.setFocus([], e.browserEvent);\r\n            this.list.setSelection([], e.browserEvent);\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        this.list.setFocus([focus], e.browserEvent);\r\n        if (!isMouseRightClick(e.browserEvent)) {\r\n            this.list.setSelection([focus], e.browserEvent);\r\n            if (this.openController.shouldOpen(e.browserEvent)) {\r\n                this.list.open([focus], e.browserEvent);\r\n            }\r\n        }\r\n    };\r\n    MouseController.prototype.onDoubleClick = function (e) {\r\n        if (isInputElement(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        this.list.setSelection(focus, e.browserEvent);\r\n        this.list.pin(focus);\r\n    };\r\n    MouseController.prototype.changeSelection = function (e, reference) {\r\n        var focus = e.index;\r\n        if (this.isSelectionRangeChangeEvent(e) && reference !== undefined) {\r\n            var min = Math.min(reference, focus);\r\n            var max = Math.max(reference, focus);\r\n            var rangeSelection = range(min, max + 1);\r\n            var selection = this.list.getSelection();\r\n            var contiguousRange = getContiguousRangeContaining(disjunction(selection, [reference]), reference);\r\n            if (contiguousRange.length === 0) {\r\n                return;\r\n            }\r\n            var newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\r\n            this.list.setSelection(newSelection, e.browserEvent);\r\n        }\r\n        else if (this.isSelectionSingleChangeEvent(e)) {\r\n            var selection = this.list.getSelection();\r\n            var newSelection = selection.filter(function (i) { return i !== focus; });\r\n            this.list.setFocus([focus]);\r\n            if (selection.length === newSelection.length) {\r\n                this.list.setSelection(__spreadArrays(newSelection, [focus]), e.browserEvent);\r\n            }\r\n            else {\r\n                this.list.setSelection(newSelection, e.browserEvent);\r\n            }\r\n        }\r\n    };\r\n    MouseController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return MouseController;\r\n}());\r\nexport { MouseController };\r\nvar DefaultStyleController = /** @class */ (function () {\r\n    function DefaultStyleController(styleElement, selectorSuffix) {\r\n        this.styleElement = styleElement;\r\n        this.selectorSuffix = selectorSuffix;\r\n    }\r\n    DefaultStyleController.prototype.style = function (styles) {\r\n        var suffix = this.selectorSuffix && \".\" + this.selectorSuffix;\r\n        var content = [];\r\n        if (styles.listBackground) {\r\n            if (styles.listBackground.isOpaque()) {\r\n                content.push(\".monaco-list\" + suffix + \" .monaco-list-rows { background: \" + styles.listBackground + \"; }\");\r\n            }\r\n            else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\r\n                console.warn(\"List with id '\" + this.selectorSuffix + \"' was styled with a non-opaque background color. This will break sub-pixel antialiasing.\");\r\n            }\r\n        }\r\n        if (styles.listFocusBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { background-color: \" + styles.listFocusBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused:hover { background-color: \" + styles.listFocusBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listFocusForeground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { color: \" + styles.listFocusForeground + \"; }\");\r\n        }\r\n        if (styles.listActiveSelectionBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected:hover { background-color: \" + styles.listActiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listActiveSelectionForeground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { color: \" + styles.listActiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listFocusAndSelectionBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFocusAndSelectionForeground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listInactiveFocusBackground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { background-color:  \" + styles.listInactiveFocusBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused:hover { background-color:  \" + styles.listInactiveFocusBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionBackground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected:hover { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionForeground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { color: \" + styles.listInactiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listHoverBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  \" + styles.listHoverBackground + \"; }\");\r\n        }\r\n        if (styles.listHoverForeground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover:not(.selected):not(.focused) { color:  \" + styles.listHoverForeground + \"; }\");\r\n        }\r\n        if (styles.listSelectionOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { outline: 1px dotted \" + styles.listSelectionOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listFocusOutline) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.focused { outline: 1px solid \" + styles.listFocusOutline + \"; outline-offset: -1px; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listInactiveFocusOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { outline: 1px dotted \" + styles.listInactiveFocusOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listHoverOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover { outline: 1px dashed \" + styles.listHoverOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listDropBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-list\" + suffix + \".drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-rows.drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFilterWidgetBackground) {\r\n            content.push(\".monaco-list-type-filter { background-color: \" + styles.listFilterWidgetBackground + \" }\");\r\n        }\r\n        if (styles.listFilterWidgetOutline) {\r\n            content.push(\".monaco-list-type-filter { border: 1px solid \" + styles.listFilterWidgetOutline + \"; }\");\r\n        }\r\n        if (styles.listFilterWidgetNoMatchesOutline) {\r\n            content.push(\".monaco-list-type-filter.no-matches { border: 1px solid \" + styles.listFilterWidgetNoMatchesOutline + \"; }\");\r\n        }\r\n        if (styles.listMatchesShadow) {\r\n            content.push(\".monaco-list-type-filter { box-shadow: 1px 1px 1px \" + styles.listMatchesShadow + \"; }\");\r\n        }\r\n        var newStyles = content.join('\\n');\r\n        if (newStyles !== this.styleElement.innerHTML) {\r\n            this.styleElement.innerHTML = newStyles;\r\n        }\r\n    };\r\n    return DefaultStyleController;\r\n}());\r\nexport { DefaultStyleController };\r\nvar defaultStyles = {\r\n    listFocusBackground: Color.fromHex('#7FB0D0'),\r\n    listActiveSelectionBackground: Color.fromHex('#0E639C'),\r\n    listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listFocusAndSelectionBackground: Color.fromHex('#094771'),\r\n    listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\r\n    listHoverBackground: Color.fromHex('#2A2D2E'),\r\n    listDropBackground: Color.fromHex('#383B3D'),\r\n    treeIndentGuidesStroke: Color.fromHex('#a9a9a9')\r\n};\r\nvar DefaultOptions = {\r\n    keyboardSupport: true,\r\n    mouseSupport: true,\r\n    multipleSelectionSupport: true,\r\n    dnd: {\r\n        getDragURI: function () { return null; },\r\n        onDragStart: function () { },\r\n        onDragOver: function () { return false; },\r\n        drop: function () { }\r\n    },\r\n    ariaRootRole: ListAriaRootRole.TREE\r\n};\r\n// TODO@Joao: move these utils into a SortedArray class\r\nfunction getContiguousRangeContaining(range, value) {\r\n    var index = range.indexOf(value);\r\n    if (index === -1) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var i = index - 1;\r\n    while (i >= 0 && range[i] === value - (index - i)) {\r\n        result.push(range[i--]);\r\n    }\r\n    result.reverse();\r\n    i = index;\r\n    while (i < range.length && range[i] === value + (i - index)) {\r\n        result.push(range[i++]);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the intersection\r\n * between them (OR).\r\n */\r\nfunction disjunction(one, other) {\r\n    var result = [];\r\n    var i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            result.push(one[i]);\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            result.push(other[j++]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the relative\r\n * complement between them (XOR).\r\n */\r\nfunction relativeComplement(one, other) {\r\n    var result = [];\r\n    var i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            j++;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar numericSort = function (a, b) { return a - b; };\r\nvar PipelineRenderer = /** @class */ (function () {\r\n    function PipelineRenderer(_templateId, renderers) {\r\n        this._templateId = _templateId;\r\n        this.renderers = renderers;\r\n    }\r\n    Object.defineProperty(PipelineRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return this._templateId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    PipelineRenderer.prototype.renderTemplate = function (container) {\r\n        return this.renderers.map(function (r) { return r.renderTemplate(container); });\r\n    };\r\n    PipelineRenderer.prototype.renderElement = function (element, index, templateData, height) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            renderer.renderElement(element, index, templateData[i++], height);\r\n        }\r\n    };\r\n    PipelineRenderer.prototype.disposeElement = function (element, index, templateData, height) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            if (renderer.disposeElement) {\r\n                renderer.disposeElement(element, index, templateData[i], height);\r\n            }\r\n            i += 1;\r\n        }\r\n    };\r\n    PipelineRenderer.prototype.disposeTemplate = function (templateData) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            renderer.disposeTemplate(templateData[i++]);\r\n        }\r\n    };\r\n    return PipelineRenderer;\r\n}());\r\nvar AccessibiltyRenderer = /** @class */ (function () {\r\n    function AccessibiltyRenderer(accessibilityProvider) {\r\n        this.accessibilityProvider = accessibilityProvider;\r\n        this.templateId = 'a18n';\r\n    }\r\n    AccessibiltyRenderer.prototype.renderTemplate = function (container) {\r\n        return container;\r\n    };\r\n    AccessibiltyRenderer.prototype.renderElement = function (element, index, container) {\r\n        var ariaLabel = this.accessibilityProvider.getAriaLabel(element);\r\n        if (ariaLabel) {\r\n            container.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-label');\r\n        }\r\n        var ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\r\n        if (typeof ariaLevel === 'number') {\r\n            container.setAttribute('aria-level', \"\" + ariaLevel);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-level');\r\n        }\r\n    };\r\n    AccessibiltyRenderer.prototype.disposeTemplate = function (templateData) {\r\n        // noop\r\n    };\r\n    return AccessibiltyRenderer;\r\n}());\r\nvar ListViewDragAndDrop = /** @class */ (function () {\r\n    function ListViewDragAndDrop(list, dnd) {\r\n        this.list = list;\r\n        this.dnd = dnd;\r\n    }\r\n    ListViewDragAndDrop.prototype.getDragElements = function (element) {\r\n        var selection = this.list.getSelectedElements();\r\n        var elements = selection.indexOf(element) > -1 ? selection : [element];\r\n        return elements;\r\n    };\r\n    ListViewDragAndDrop.prototype.getDragURI = function (element) {\r\n        return this.dnd.getDragURI(element);\r\n    };\r\n    ListViewDragAndDrop.prototype.getDragLabel = function (elements, originalEvent) {\r\n        if (this.dnd.getDragLabel) {\r\n            return this.dnd.getDragLabel(elements, originalEvent);\r\n        }\r\n        return undefined;\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragStart = function (data, originalEvent) {\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(data, originalEvent);\r\n        }\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragOver = function (data, targetElement, targetIndex, originalEvent) {\r\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragEnd = function (originalEvent) {\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(originalEvent);\r\n        }\r\n    };\r\n    ListViewDragAndDrop.prototype.drop = function (data, targetElement, targetIndex, originalEvent) {\r\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\r\n    };\r\n    return ListViewDragAndDrop;\r\n}());\r\nvar List = /** @class */ (function () {\r\n    function List(user, container, virtualDelegate, renderers, _options) {\r\n        if (_options === void 0) { _options = DefaultOptions; }\r\n        this.user = user;\r\n        this._options = _options;\r\n        this.eventBufferer = new EventBufferer();\r\n        this.disposables = new DisposableStore();\r\n        this._onDidOpen = new Emitter();\r\n        this.onDidOpen = this._onDidOpen.event;\r\n        this._onDidPin = new Emitter();\r\n        this.didJustPressContextMenuKey = false;\r\n        this._onDidDispose = new Emitter();\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        this.focus = new FocusTrait();\r\n        this.selection = new Trait('selected');\r\n        mixin(_options, defaultStyles, false);\r\n        var baseRenderers = [this.focus.renderer, this.selection.renderer];\r\n        this.accessibilityProvider = _options.accessibilityProvider;\r\n        if (this.accessibilityProvider) {\r\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\r\n            if (this.accessibilityProvider.onDidChangeActiveDescendant) {\r\n                this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\r\n            }\r\n        }\r\n        renderers = renderers.map(function (r) { return new PipelineRenderer(r.templateId, __spreadArrays(baseRenderers, [r])); });\r\n        var viewOptions = __assign(__assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\r\n        this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\r\n        if (typeof _options.ariaRole !== 'string') {\r\n            this.view.domNode.setAttribute('role', ListAriaRootRole.TREE);\r\n        }\r\n        else {\r\n            this.view.domNode.setAttribute('role', _options.ariaRole);\r\n        }\r\n        if (_options.styleController) {\r\n            this.styleController = _options.styleController(this.view.domId);\r\n        }\r\n        else {\r\n            var styleElement = DOM.createStyleSheet(this.view.domNode);\r\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\r\n        }\r\n        this.spliceable = new CombinedSpliceable([\r\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\r\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\r\n            this.view\r\n        ]);\r\n        this.disposables.add(this.focus);\r\n        this.disposables.add(this.selection);\r\n        this.disposables.add(this.view);\r\n        this.disposables.add(this._onDidDispose);\r\n        this.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), function () { return null; });\r\n        this.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), function () { return null; });\r\n        this.disposables.add(new DOMFocusController(this, this.view));\r\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\r\n            var controller = new KeyboardController(this, this.view, _options);\r\n            this.disposables.add(controller);\r\n        }\r\n        if (_options.keyboardNavigationLabelProvider) {\r\n            var delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\r\n            this.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\r\n            this.disposables.add(this.typeLabelController);\r\n        }\r\n        this.disposables.add(this.createMouseController(_options));\r\n        this.onFocusChange(this._onFocusChange, this, this.disposables);\r\n        this.onSelectionChange(this._onSelectionChange, this, this.disposables);\r\n        if (_options.ariaLabel) {\r\n            this.view.domNode.setAttribute('aria-label', localize('aria list', \"{0}. Use the navigation keys to navigate.\", _options.ariaLabel));\r\n        }\r\n    }\r\n    Object.defineProperty(List.prototype, \"onFocusChange\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), function (e) { return _this.toListEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onSelectionChange\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), function (e) { return _this.toListEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"domId\", {\r\n        get: function () { return this.view.domId; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseClick\", {\r\n        get: function () { return this.view.onMouseClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseDblClick\", {\r\n        get: function () { return this.view.onMouseDblClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseMiddleClick\", {\r\n        get: function () { return this.view.onMouseMiddleClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseDown\", {\r\n        get: function () { return this.view.onMouseDown; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onTouchStart\", {\r\n        get: function () { return this.view.onTouchStart; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onTap\", {\r\n        get: function () { return this.view.onTap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onContextMenu\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var fromKeydown = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n                .map(function (e) { return new StandardKeyboardEvent(e); })\r\n                .filter(function (e) { return _this.didJustPressContextMenuKey = e.keyCode === 58 /* ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* F10 */); })\r\n                .filter(function (e) { e.preventDefault(); e.stopPropagation(); return false; })\r\n                .event;\r\n            var fromKeyup = Event.chain(domEvent(this.view.domNode, 'keyup'))\r\n                .filter(function () {\r\n                var didJustPressContextMenuKey = _this.didJustPressContextMenuKey;\r\n                _this.didJustPressContextMenuKey = false;\r\n                return didJustPressContextMenuKey;\r\n            })\r\n                .filter(function () { return _this.getFocus().length > 0 && !!_this.view.domElement(_this.getFocus()[0]); })\r\n                .map(function (browserEvent) {\r\n                var index = _this.getFocus()[0];\r\n                var element = _this.view.element(index);\r\n                var anchor = _this.view.domElement(index);\r\n                return { index: index, element: element, anchor: anchor, browserEvent: browserEvent };\r\n            })\r\n                .event;\r\n            var fromMouse = Event.chain(this.view.onContextMenu)\r\n                .filter(function () { return !_this.didJustPressContextMenuKey; })\r\n                .map(function (_a) {\r\n                var element = _a.element, index = _a.index, browserEvent = _a.browserEvent;\r\n                return ({ element: element, index: index, anchor: { x: browserEvent.clientX + 1, y: browserEvent.clientY }, browserEvent: browserEvent });\r\n            })\r\n                .event;\r\n            return Event.any(fromKeydown, fromKeyup, fromMouse);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onKeyDown\", {\r\n        get: function () { return domEvent(this.view.domNode, 'keydown'); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.createMouseController = function (options) {\r\n        return new MouseController(this);\r\n    };\r\n    List.prototype.updateOptions = function (optionsUpdate) {\r\n        if (optionsUpdate === void 0) { optionsUpdate = {}; }\r\n        this._options = __assign(__assign({}, this._options), optionsUpdate);\r\n        if (this.typeLabelController) {\r\n            this.typeLabelController.updateOptions(this._options);\r\n        }\r\n    };\r\n    Object.defineProperty(List.prototype, \"options\", {\r\n        get: function () {\r\n            return this._options;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.splice = function (start, deleteCount, elements) {\r\n        var _this = this;\r\n        if (elements === void 0) { elements = []; }\r\n        if (start < 0 || start > this.view.length) {\r\n            throw new ListError(this.user, \"Invalid start index: \" + start);\r\n        }\r\n        if (deleteCount < 0) {\r\n            throw new ListError(this.user, \"Invalid delete count: \" + deleteCount);\r\n        }\r\n        if (deleteCount === 0 && elements.length === 0) {\r\n            return;\r\n        }\r\n        this.eventBufferer.bufferEvents(function () { return _this.spliceable.splice(start, deleteCount, elements); });\r\n    };\r\n    List.prototype.rerender = function () {\r\n        this.view.rerender();\r\n    };\r\n    List.prototype.element = function (index) {\r\n        return this.view.element(index);\r\n    };\r\n    Object.defineProperty(List.prototype, \"length\", {\r\n        get: function () {\r\n            return this.view.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"contentHeight\", {\r\n        get: function () {\r\n            return this.view.contentHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            return this.view.getScrollTop();\r\n        },\r\n        set: function (scrollTop) {\r\n            this.view.setScrollTop(scrollTop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.domFocus = function () {\r\n        this.view.domNode.focus();\r\n    };\r\n    List.prototype.layout = function (height, width) {\r\n        this.view.layout(height, width);\r\n    };\r\n    List.prototype.setSelection = function (indexes, browserEvent) {\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this.selection.set(indexes, browserEvent);\r\n    };\r\n    List.prototype.getSelection = function () {\r\n        return this.selection.get();\r\n    };\r\n    List.prototype.getSelectedElements = function () {\r\n        var _this = this;\r\n        return this.getSelection().map(function (i) { return _this.view.element(i); });\r\n    };\r\n    List.prototype.setFocus = function (indexes, browserEvent) {\r\n        for (var _i = 0, indexes_2 = indexes; _i < indexes_2.length; _i++) {\r\n            var index = indexes_2[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this.focus.set(indexes, browserEvent);\r\n    };\r\n    List.prototype.focusNext = function (n, loop, browserEvent, filter) {\r\n        if (n === void 0) { n = 1; }\r\n        if (loop === void 0) { loop = false; }\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var focus = this.focus.get();\r\n        var index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusPrevious = function (n, loop, browserEvent, filter) {\r\n        if (n === void 0) { n = 1; }\r\n        if (loop === void 0) { loop = false; }\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var focus = this.focus.get();\r\n        var index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusNextPage = function (browserEvent, filter) {\r\n        var _this = this;\r\n        var lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\r\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\r\n        var lastPageElement = this.view.element(lastPageIndex);\r\n        var currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== lastPageElement) {\r\n            var lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\r\n            if (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\r\n                this.setFocus([lastGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([lastPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            var previousScrollTop = this.view.getScrollTop();\r\n            this.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () { return _this.focusNextPage(browserEvent, filter); }, 0);\r\n            }\r\n        }\r\n    };\r\n    List.prototype.focusPreviousPage = function (browserEvent, filter) {\r\n        var _this = this;\r\n        var firstPageIndex;\r\n        var scrollTop = this.view.getScrollTop();\r\n        if (scrollTop === 0) {\r\n            firstPageIndex = this.view.indexAt(scrollTop);\r\n        }\r\n        else {\r\n            firstPageIndex = this.view.indexAfter(scrollTop - 1);\r\n        }\r\n        var firstPageElement = this.view.element(firstPageIndex);\r\n        var currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== firstPageElement) {\r\n            var firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\r\n            if (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\r\n                this.setFocus([firstGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([firstPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            var previousScrollTop = scrollTop;\r\n            this.view.setScrollTop(scrollTop - this.view.renderHeight);\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () { return _this.focusPreviousPage(browserEvent, filter); }, 0);\r\n            }\r\n        }\r\n    };\r\n    List.prototype.focusLast = function (browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var index = this.findPreviousIndex(this.length - 1, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusFirst = function (browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var index = this.findNextIndex(0, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.findNextIndex = function (index, loop, filter) {\r\n        if (loop === void 0) { loop = false; }\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (index >= this.length && !loop) {\r\n                return -1;\r\n            }\r\n            index = index % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index++;\r\n        }\r\n        return -1;\r\n    };\r\n    List.prototype.findPreviousIndex = function (index, loop, filter) {\r\n        if (loop === void 0) { loop = false; }\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (index < 0 && !loop) {\r\n                return -1;\r\n            }\r\n            index = (this.length + (index % this.length)) % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index--;\r\n        }\r\n        return -1;\r\n    };\r\n    List.prototype.getFocus = function () {\r\n        return this.focus.get();\r\n    };\r\n    List.prototype.getFocusedElements = function () {\r\n        var _this = this;\r\n        return this.getFocus().map(function (i) { return _this.view.element(i); });\r\n    };\r\n    List.prototype.reveal = function (index, relativeTop) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, \"Invalid index \" + index);\r\n        }\r\n        var scrollTop = this.view.getScrollTop();\r\n        var elementTop = this.view.elementTop(index);\r\n        var elementHeight = this.view.elementHeight(index);\r\n        if (isNumber(relativeTop)) {\r\n            // y = mx + b\r\n            var m = elementHeight - this.view.renderHeight;\r\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\r\n        }\r\n        else {\r\n            var viewItemBottom = elementTop + elementHeight;\r\n            var wrapperBottom = scrollTop + this.view.renderHeight;\r\n            if (elementTop < scrollTop && viewItemBottom >= wrapperBottom) {\r\n                // The element is already overflowing the viewport, no-op\r\n            }\r\n            else if (elementTop < scrollTop) {\r\n                this.view.setScrollTop(elementTop);\r\n            }\r\n            else if (viewItemBottom >= wrapperBottom) {\r\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the relative position of an element rendered in the list.\r\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n     */\r\n    List.prototype.getRelativeTop = function (index) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, \"Invalid index \" + index);\r\n        }\r\n        var scrollTop = this.view.getScrollTop();\r\n        var elementTop = this.view.elementTop(index);\r\n        var elementHeight = this.view.elementHeight(index);\r\n        if (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\r\n            return null;\r\n        }\r\n        // y = mx + b\r\n        var m = elementHeight - this.view.renderHeight;\r\n        return Math.abs((scrollTop - elementTop) / m);\r\n    };\r\n    List.prototype.getHTMLElement = function () {\r\n        return this.view.domNode;\r\n    };\r\n    List.prototype.open = function (indexes, browserEvent) {\r\n        var _this = this;\r\n        for (var _i = 0, indexes_3 = indexes; _i < indexes_3.length; _i++) {\r\n            var index = indexes_3[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this._onDidOpen.fire({ indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent });\r\n    };\r\n    List.prototype.pin = function (indexes, browserEvent) {\r\n        var _this = this;\r\n        for (var _i = 0, indexes_4 = indexes; _i < indexes_4.length; _i++) {\r\n            var index = indexes_4[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this._onDidPin.fire({ indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent });\r\n    };\r\n    List.prototype.style = function (styles) {\r\n        this.styleController.style(styles);\r\n    };\r\n    List.prototype.toListEvent = function (_a) {\r\n        var _this = this;\r\n        var indexes = _a.indexes, browserEvent = _a.browserEvent;\r\n        return { indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent };\r\n    };\r\n    List.prototype._onFocusChange = function () {\r\n        var focus = this.focus.get();\r\n        DOM.toggleClass(this.view.domNode, 'element-focused', focus.length > 0);\r\n        this.onDidChangeActiveDescendant();\r\n    };\r\n    List.prototype.onDidChangeActiveDescendant = function () {\r\n        var _a;\r\n        var focus = this.focus.get();\r\n        if (focus.length > 0) {\r\n            var id = void 0;\r\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\r\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\r\n            }\r\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\r\n        }\r\n        else {\r\n            this.view.domNode.removeAttribute('aria-activedescendant');\r\n        }\r\n    };\r\n    List.prototype._onSelectionChange = function () {\r\n        var selection = this.selection.get();\r\n        DOM.toggleClass(this.view.domNode, 'selection-none', selection.length === 0);\r\n        DOM.toggleClass(this.view.domNode, 'selection-single', selection.length === 1);\r\n        DOM.toggleClass(this.view.domNode, 'selection-multiple', selection.length > 1);\r\n    };\r\n    List.prototype.dispose = function () {\r\n        this._onDidDispose.fire();\r\n        this.disposables.dispose();\r\n        this._onDidOpen.dispose();\r\n        this._onDidPin.dispose();\r\n        this._onDidDispose.dispose();\r\n    };\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onFocusChange\", null);\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onSelectionChange\", null);\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onContextMenu\", null);\r\n    return List;\r\n}());\r\nexport { List };\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,cAAa,GAAG,uBAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,cAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC;QAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAC;IAAC,CAAC;IAC9E,OAAOP,cAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,cAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAE,GAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,EAAE,CAAC;EACxF,CAAC;AACL,CAAC,EAAG;AACJ,IAAII,QAAQ,GAAI,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAK,YAAY;EAClDA,QAAQ,GAAGV,MAAM,CAACW,MAAM,IAAI,UAASC,CAAC,EAAE;IACpC,KAAK,IAAIC,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAC,CAAC;MAChB,KAAK,IAAIV,CAAC,IAAIS,CAAC;QAAE,IAAIb,MAAM,CAACQ,SAAS,CAACH,cAAc,CAACa,IAAI,CAACL,CAAC,EAAET,CAAC,CAAC,EAC3DQ,CAAC,CAACR,CAAC,CAAC,GAAGS,CAAC,CAACT,CAAC,CAAC;MAAC;IACpB;IACA,OAAOQ,CAAC;EACZ,CAAC;EACD,OAAOF,QAAQ,CAACS,KAAK,CAAC,IAAI,EAAEH,SAAS,CAAC;AAC1C,CAAC;AACD,IAAII,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGT,SAAS,CAACC,MAAM;IAAES,CAAC,GAAGD,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGxB,MAAM,CAAC2B,wBAAwB,CAACL,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAE1B,CAAC;EAC5H,IAAI,OAAO8B,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEH,CAAC,GAAGE,OAAO,CAACC,QAAQ,CAACR,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIV,CAAC,GAAGO,UAAU,CAACJ,MAAM,GAAG,CAAC,EAAEH,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE;IAAE,IAAIhB,CAAC,GAAGuB,UAAU,CAACP,CAAC,CAAC,EAAEY,CAAC,GAAG,CAACD,CAAC,GAAG,CAAC,GAAG3B,CAAC,CAAC4B,CAAC,CAAC,GAAGD,CAAC,GAAG,CAAC,GAAG3B,CAAC,CAACwB,MAAM,EAAEC,GAAG,EAAEG,CAAC,CAAC,GAAG5B,CAAC,CAACwB,MAAM,EAAEC,GAAG,CAAC,KAAKG,CAAC;EAAC;EAClJ,OAAOD,CAAC,GAAG,CAAC,IAAIC,CAAC,IAAI1B,MAAM,CAAC8B,cAAc,CAACR,MAAM,EAAEC,GAAG,EAAEG,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,IAAIK,cAAc,GAAI,IAAI,IAAI,IAAI,CAACA,cAAc,IAAK,YAAY;EAC9D,KAAK,IAAIlB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEkB,EAAE,GAAGhB,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGkB,EAAE,EAAElB,CAAC,EAAE;IAAED,CAAC,IAAIG,SAAS,CAACF,CAAC,CAAC,CAACG,MAAM;EAAC;EACpF,KAAK,IAAIS,CAAC,GAAGvB,KAAK,CAACU,CAAC,CAAC,EAAEoB,CAAC,GAAG,CAAC,EAAEnB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkB,EAAE,EAAElB,CAAC,EAAE;IAC5C,KAAK,IAAIoB,CAAC,GAAGlB,SAAS,CAACF,CAAC,CAAC,EAAEqB,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGF,CAAC,CAACjB,MAAM,EAAEkB,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE,EAAEF,CAAC,EAAE;MAC7DP,CAAC,CAACO,CAAC,CAAC,GAAGC,CAAC,CAACC,CAAC,CAAC;IAAC;EAAA;EACpB,OAAOT,CAAC;AACZ,CAAC;AACD,OAAO,YAAY;AACnB,SAASW,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,OAAO,EAAEC,eAAe,QAAQ,8BAA8B;AACvE,SAASC,QAAQ,QAAQ,0BAA0B;AACnD,SAASC,KAAK,EAAEC,UAAU,EAAEC,YAAY,QAAQ,2BAA2B;AAC3E,SAASC,OAAO,QAAQ,+BAA+B;AACvD,OAAO,KAAKC,GAAG,MAAM,cAAc;AACnC,OAAO,KAAKC,QAAQ,MAAM,6BAA6B;AACvD,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,qBAAqB,QAAQ,wBAAwB;AAC9D,SAASC,KAAK,EAAEC,OAAO,EAAEC,aAAa,QAAQ,0BAA0B;AACxE,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,gBAAgB,EAAEC,SAAS,QAAQ,WAAW;AACvD,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,KAAK,QAAQ,0BAA0B;AAChD,SAASC,KAAK,QAAQ,4BAA4B;AAClD,SAASC,kBAAkB,QAAQ,aAAa;AAChD,SAASC,KAAK,QAAQ,4BAA4B;AAClD,SAASC,aAAa,QAAQ,4BAA4B;AAC1D,IAAIC,aAAa,GAAG,aAAe,YAAY;EAC3C,SAASA,aAAa,CAACC,KAAK,EAAE;IAC1B,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,gBAAgB,GAAG,EAAE;EAC9B;EACA/D,MAAM,CAAC8B,cAAc,CAAC+B,aAAa,CAACrD,SAAS,EAAE,YAAY,EAAE;IACzDwD,GAAG,EAAE,eAAY;MACb,OAAO,WAAW,GAAG,IAAI,CAACF,KAAK,CAACA,KAAK;IACzC,CAAC;IACDG,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFL,aAAa,CAACrD,SAAS,CAAC2D,cAAc,GAAG,UAAUC,SAAS,EAAE;IAC1D,OAAOA,SAAS;EACpB,CAAC;EACDP,aAAa,CAACrD,SAAS,CAAC6D,aAAa,GAAG,UAAUC,OAAO,EAAEC,KAAK,EAAEC,YAAY,EAAE;IAC5E,IAAIC,oBAAoB,GAAG/B,UAAU,CAAC,IAAI,CAACqB,gBAAgB,EAAE,UAAUW,EAAE,EAAE;MAAE,OAAOA,EAAE,CAACF,YAAY,KAAKA,YAAY;IAAE,CAAC,CAAC;IACxH,IAAIC,oBAAoB,IAAI,CAAC,EAAE;MAC3B,IAAIE,QAAQ,GAAG,IAAI,CAACZ,gBAAgB,CAACU,oBAAoB,CAAC;MAC1D,IAAI,CAACX,KAAK,CAACc,QAAQ,CAACJ,YAAY,CAAC;MACjCG,QAAQ,CAACJ,KAAK,GAAGA,KAAK;IAC1B,CAAC,MACI;MACD,IAAII,QAAQ,GAAG;QAAEJ,KAAK,EAAEA,KAAK;QAAEC,YAAY,EAAEA;MAAa,CAAC;MAC3D,IAAI,CAACT,gBAAgB,CAACc,IAAI,CAACF,QAAQ,CAAC;IACxC;IACA,IAAI,CAACb,KAAK,CAACgB,WAAW,CAACP,KAAK,EAAEC,YAAY,CAAC;EAC/C,CAAC;EACDX,aAAa,CAACrD,SAAS,CAACuE,MAAM,GAAG,UAAUC,KAAK,EAAEC,WAAW,EAAEC,WAAW,EAAE;IACxE,IAAIP,QAAQ,GAAG,EAAE;IACjB,KAAK,IAAIQ,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACrB,gBAAgB,EAAEoB,EAAE,GAAGC,EAAE,CAACnE,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIE,eAAe,GAAGD,EAAE,CAACD,EAAE,CAAC;MAC5B,IAAIE,eAAe,CAACd,KAAK,GAAGS,KAAK,EAAE;QAC/BL,QAAQ,CAACE,IAAI,CAACQ,eAAe,CAAC;MAClC,CAAC,MACI,IAAIA,eAAe,CAACd,KAAK,IAAIS,KAAK,GAAGC,WAAW,EAAE;QACnDN,QAAQ,CAACE,IAAI,CAAC;UACVN,KAAK,EAAEc,eAAe,CAACd,KAAK,GAAGW,WAAW,GAAGD,WAAW;UACxDT,YAAY,EAAEa,eAAe,CAACb;QAClC,CAAC,CAAC;MACN;IACJ;IACA,IAAI,CAACT,gBAAgB,GAAGY,QAAQ;EACpC,CAAC;EACDd,aAAa,CAACrD,SAAS,CAAC8E,aAAa,GAAG,UAAUC,OAAO,EAAE;IACvD,KAAK,IAAIJ,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACrB,gBAAgB,EAAEoB,EAAE,GAAGC,EAAE,CAACnE,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIK,EAAE,GAAGJ,EAAE,CAACD,EAAE,CAAC;QAAEZ,KAAK,GAAGiB,EAAE,CAACjB,KAAK;QAAEC,YAAY,GAAGgB,EAAE,CAAChB,YAAY;MACjE,IAAIe,OAAO,CAACE,OAAO,CAAClB,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;QAC7B,IAAI,CAACT,KAAK,CAACgB,WAAW,CAACP,KAAK,EAAEC,YAAY,CAAC;MAC/C;IACJ;EACJ,CAAC;EACDX,aAAa,CAACrD,SAAS,CAACkF,eAAe,GAAG,UAAUlB,YAAY,EAAE;IAC9D,IAAID,KAAK,GAAG7B,UAAU,CAAC,IAAI,CAACqB,gBAAgB,EAAE,UAAUW,EAAE,EAAE;MAAE,OAAOA,EAAE,CAACF,YAAY,KAAKA,YAAY;IAAE,CAAC,CAAC;IACzG,IAAID,KAAK,GAAG,CAAC,EAAE;MACX;IACJ;IACA,IAAI,CAACR,gBAAgB,CAACgB,MAAM,CAACR,KAAK,EAAE,CAAC,CAAC;EAC1C,CAAC;EACD,OAAOV,aAAa;AACxB,CAAC,EAAG;AACJ,IAAI8B,KAAK,GAAG,aAAe,YAAY;EACnC,SAASA,KAAK,CAACC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACL,OAAO,GAAG,EAAE;IACjB,IAAI,CAACM,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,SAAS,GAAG,IAAI5C,OAAO,EAAE;IAC9B,IAAI,CAAC6C,QAAQ,GAAG,IAAI,CAACD,SAAS,CAACE,KAAK;EACxC;EACAhG,MAAM,CAAC8B,cAAc,CAAC6D,KAAK,CAACnF,SAAS,EAAE,OAAO,EAAE;IAC5CwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC4B,MAAM;IAAE,CAAC;IACxC3B,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAAC6D,KAAK,CAACnF,SAAS,EAAE,UAAU,EAAE;IAC/CwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAIH,aAAa,CAAC,IAAI,CAAC;IAClC,CAAC;IACDI,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFyB,KAAK,CAACnF,SAAS,CAACuE,MAAM,GAAG,UAAUC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,EAAE;IAC7D,IAAIC,IAAI,GAAGD,QAAQ,CAAChF,MAAM,GAAGgE,WAAW;IACxC,IAAIkB,GAAG,GAAGnB,KAAK,GAAGC,WAAW;IAC7B,IAAIM,OAAO,GAAGxD,cAAc,CAAC,IAAI,CAAC8D,aAAa,CAACO,MAAM,CAAC,UAAUtF,CAAC,EAAE;MAAE,OAAOA,CAAC,GAAGkE,KAAK;IAAE,CAAC,CAAC,EAAEiB,QAAQ,CAACI,GAAG,CAAC,UAAUC,QAAQ,EAAExF,CAAC,EAAE;MAAE,OAAOwF,QAAQ,GAAGxF,CAAC,GAAGkE,KAAK,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC,CAACoB,MAAM,CAAC,UAAUtF,CAAC,EAAE;MAAE,OAAOA,CAAC,KAAK,CAAC,CAAC;IAAE,CAAC,CAAC,EAAE,IAAI,CAAC+E,aAAa,CAACO,MAAM,CAAC,UAAUtF,CAAC,EAAE;MAAE,OAAOA,CAAC,IAAIqF,GAAG;IAAE,CAAC,CAAC,CAACE,GAAG,CAAC,UAAUvF,CAAC,EAAE;MAAE,OAAOA,CAAC,GAAGoF,IAAI;IAAE,CAAC,CAAC,CAAC;IACtT,IAAI,CAACK,QAAQ,CAACxB,MAAM,CAACC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,CAAChF,MAAM,CAAC;IACzD,IAAI,CAACuF,IAAI,CAACjB,OAAO,EAAEA,OAAO,CAAC;EAC/B,CAAC;EACDI,KAAK,CAACnF,SAAS,CAACsE,WAAW,GAAG,UAAUP,KAAK,EAAEH,SAAS,EAAE;IACtDvB,GAAG,CAAC4D,WAAW,CAACrC,SAAS,EAAE,IAAI,CAACwB,MAAM,EAAE,IAAI,CAACc,QAAQ,CAACnC,KAAK,CAAC,CAAC;EACjE,CAAC;EACDoB,KAAK,CAACnF,SAAS,CAACoE,QAAQ,GAAG,UAAUR,SAAS,EAAE;IAC5CvB,GAAG,CAAC8D,WAAW,CAACvC,SAAS,EAAE,IAAI,CAACwB,MAAM,CAAC;EAC3C,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACID,KAAK,CAACnF,SAAS,CAACoG,GAAG,GAAG,UAAUrB,OAAO,EAAEsB,YAAY,EAAE;IACnD,OAAO,IAAI,CAACL,IAAI,CAACjB,OAAO,EAAExD,cAAc,CAACwD,OAAO,CAAC,CAACuB,IAAI,CAACC,WAAW,CAAC,EAAEF,YAAY,CAAC;EACtF,CAAC;EACDlB,KAAK,CAACnF,SAAS,CAACgG,IAAI,GAAG,UAAUjB,OAAO,EAAEM,aAAa,EAAEgB,YAAY,EAAE;IACnE,IAAIG,MAAM,GAAG,IAAI,CAACzB,OAAO;IACzB,IAAI0B,YAAY,GAAG,IAAI,CAACpB,aAAa;IACrC,IAAI,CAACN,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACM,aAAa,GAAGA,aAAa;IAClC,IAAIqB,QAAQ,GAAGC,WAAW,CAACF,YAAY,EAAE1B,OAAO,CAAC;IACjD,IAAI,CAACgB,QAAQ,CAACjB,aAAa,CAAC4B,QAAQ,CAAC;IACrC,IAAI,CAACpB,SAAS,CAACsB,IAAI,CAAC;MAAE7B,OAAO,EAAEA,OAAO;MAAEsB,YAAY,EAAEA;IAAa,CAAC,CAAC;IACrE,OAAOG,MAAM;EACjB,CAAC;EACDrB,KAAK,CAACnF,SAAS,CAACwD,GAAG,GAAG,YAAY;IAC9B,OAAO,IAAI,CAACuB,OAAO;EACvB,CAAC;EACDI,KAAK,CAACnF,SAAS,CAACkG,QAAQ,GAAG,UAAUnC,KAAK,EAAE;IACxC,OAAO5B,YAAY,CAAC,IAAI,CAACkD,aAAa,EAAEtB,KAAK,EAAEwC,WAAW,CAAC,IAAI,CAAC;EACpE,CAAC;EACDpB,KAAK,CAACnF,SAAS,CAAC8B,OAAO,GAAG,YAAY;IAClCA,OAAO,CAAC,IAAI,CAACwD,SAAS,CAAC;EAC3B,CAAC;EACD1E,UAAU,CAAC,CACPwB,OAAO,CACV,EAAE+C,KAAK,CAACnF,SAAS,EAAE,UAAU,EAAE,IAAI,CAAC;EACrC,OAAOmF,KAAK;AAChB,CAAC,EAAG;AACJ,IAAI0B,UAAU,GAAG,aAAe,UAAUC,MAAM,EAAE;EAC9C1H,SAAS,CAACyH,UAAU,EAAEC,MAAM,CAAC;EAC7B,SAASD,UAAU,GAAG;IAClB,OAAOC,MAAM,CAACpG,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI;EAC/C;EACAmG,UAAU,CAAC7G,SAAS,CAACsE,WAAW,GAAG,UAAUP,KAAK,EAAEH,SAAS,EAAE;IAC3DkD,MAAM,CAAC9G,SAAS,CAACsE,WAAW,CAAC5D,IAAI,CAAC,IAAI,EAAEqD,KAAK,EAAEH,SAAS,CAAC;IACzD,IAAI,IAAI,CAACsC,QAAQ,CAACnC,KAAK,CAAC,EAAE;MACtBH,SAAS,CAACmD,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;IACnD,CAAC,MACI;MACDnD,SAAS,CAACoD,eAAe,CAAC,eAAe,CAAC;IAC9C;EACJ,CAAC;EACD,OAAOH,UAAU;AACrB,CAAC,CAAC1B,KAAK,CAAE;AACT;AACA;AACA;AACA;AACA;AACA,IAAI8B,eAAe,GAAG,aAAe,YAAY;EAC7C,SAASA,eAAe,CAAC3D,KAAK,EAAE4D,IAAI,EAAEC,gBAAgB,EAAE;IACpD,IAAI,CAAC7D,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC4D,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;EAC5C;EACAF,eAAe,CAACjH,SAAS,CAACuE,MAAM,GAAG,UAAUC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,EAAE;IACvE,IAAI2B,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC,IAAI,CAACD,gBAAgB,EAAE;MACxB,OAAO,IAAI,CAAC7D,KAAK,CAACiB,MAAM,CAACC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,CAACI,GAAG,CAAC,YAAY;QAAE,OAAO,KAAK;MAAE,CAAC,CAAC,CAAC;IAC7F;IACA,IAAIwB,qBAAqB,GAAG,IAAI,CAAC/D,KAAK,CAACE,GAAG,EAAE,CAACqC,GAAG,CAAC,UAAUvF,CAAC,EAAE;MAAE,OAAO8G,KAAK,CAACD,gBAAgB,CAACG,KAAK,CAACF,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC,CAAC,CAACiH,QAAQ,EAAE;IAAE,CAAC,CAAC;IACzI,IAAIC,iBAAiB,GAAG/B,QAAQ,CAACI,GAAG,CAAC,UAAU4B,CAAC,EAAE;MAAE,OAAOJ,qBAAqB,CAACpC,OAAO,CAACmC,KAAK,CAACD,gBAAgB,CAACG,KAAK,CAACG,CAAC,CAAC,CAACF,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC;IAC7I,IAAI,CAACjE,KAAK,CAACiB,MAAM,CAACC,KAAK,EAAEC,WAAW,EAAE+C,iBAAiB,CAAC;EAC5D,CAAC;EACD,OAAOP,eAAe;AAC1B,CAAC,EAAG;AACJ,SAASS,cAAc,CAACD,CAAC,EAAE;EACvB,OAAOA,CAAC,CAACE,OAAO,KAAK,OAAO,IAAIF,CAAC,CAACE,OAAO,KAAK,UAAU;AAC5D;AACA,IAAIC,kBAAkB,GAAG,aAAe,YAAY;EAChD,SAASA,kBAAkB,CAACC,IAAI,EAAEX,IAAI,EAAEY,OAAO,EAAE;IAC7C,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACX,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACa,WAAW,GAAG,IAAIhG,eAAe,EAAE;IACxC,IAAIiG,wBAAwB,GAAGF,OAAO,CAACE,wBAAwB,KAAK,KAAK;IACzE,IAAI,CAACC,cAAc,GAAGH,OAAO,CAACG,cAAc,IAAIC,qBAAqB;IACrE,IAAIC,SAAS,GAAG1F,KAAK,CAAC2F,KAAK,CAACxF,QAAQ,CAACsE,IAAI,CAACmB,OAAO,EAAE,SAAS,CAAC,CAAC,CACzDzC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAO,CAACC,cAAc,CAACD,CAAC,CAAC3G,MAAM,CAAC;IAAE,CAAC,CAAC,CAC1D+E,GAAG,CAAC,UAAU4B,CAAC,EAAE;MAAE,OAAO,IAAIjF,qBAAqB,CAACiF,CAAC,CAAC;IAAE,CAAC,CAAC;IAC/DU,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,CAAC,CAAC;IAAa,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACC,OAAO,EAAE,IAAI,EAAE,IAAI,CAACT,WAAW,CAAC;IAC/GI,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC;IAAe,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACE,SAAS,EAAE,IAAI,EAAE,IAAI,CAACV,WAAW,CAAC;IACpHI,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC;IAAiB,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACG,WAAW,EAAE,IAAI,EAAE,IAAI,CAACX,WAAW,CAAC;IACxHI,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC;IAAc,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACI,aAAa,EAAE,IAAI,EAAE,IAAI,CAACZ,WAAW,CAAC;IACvHI,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC;IAAgB,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACK,eAAe,EAAE,IAAI,EAAE,IAAI,CAACb,WAAW,CAAC;IAC3HI,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,CAAC,CAAC;IAAc,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACM,QAAQ,EAAE,IAAI,EAAE,IAAI,CAACd,WAAW,CAAC;IACjH,IAAIC,wBAAwB,EAAE;MAC1BG,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;QAAE,OAAO,CAACnF,QAAQ,CAACwG,WAAW,GAAGrB,CAAC,CAACsB,OAAO,GAAGtB,CAAC,CAACuB,OAAO,KAAKvB,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC;MAAa,CAAC,CAAC,CAACC,EAAE,CAAC,IAAI,CAACU,OAAO,EAAE,IAAI,EAAE,IAAI,CAAClB,WAAW,CAAC;IACtK;EACJ;EACAH,kBAAkB,CAAC5H,SAAS,CAACwI,OAAO,GAAG,UAAUf,CAAC,EAAE;IAChDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAACuB,YAAY,CAAC,IAAI,CAACvB,IAAI,CAACwB,QAAQ,EAAE,EAAE5B,CAAC,CAACpB,YAAY,CAAC;IAC5D,IAAI,IAAI,CAAC4B,cAAc,CAACqB,UAAU,CAAC7B,CAAC,CAACpB,YAAY,CAAC,EAAE;MAChD,IAAI,CAACwB,IAAI,CAAC0B,IAAI,CAAC,IAAI,CAAC1B,IAAI,CAACwB,QAAQ,EAAE,EAAE5B,CAAC,CAACpB,YAAY,CAAC;IACxD;EACJ,CAAC;EACDuB,kBAAkB,CAAC5H,SAAS,CAACyI,SAAS,GAAG,UAAUhB,CAAC,EAAE;IAClDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAAC2B,aAAa,CAAC,CAAC,EAAE,KAAK,EAAE/B,CAAC,CAACpB,YAAY,CAAC;IACjD,IAAI,CAACwB,IAAI,CAAC4B,MAAM,CAAC,IAAI,CAAC5B,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAACnC,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAAC0I,WAAW,GAAG,UAAUjB,CAAC,EAAE;IACpDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAAC8B,SAAS,CAAC,CAAC,EAAE,KAAK,EAAElC,CAAC,CAACpB,YAAY,CAAC;IAC7C,IAAI,CAACwB,IAAI,CAAC4B,MAAM,CAAC,IAAI,CAAC5B,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAACnC,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAAC2I,aAAa,GAAG,UAAUlB,CAAC,EAAE;IACtDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAAC+B,iBAAiB,CAACnC,CAAC,CAACpB,YAAY,CAAC;IAC3C,IAAI,CAACwB,IAAI,CAAC4B,MAAM,CAAC,IAAI,CAAC5B,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAACnC,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAAC4I,eAAe,GAAG,UAAUnB,CAAC,EAAE;IACxDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAACgC,aAAa,CAACpC,CAAC,CAACpB,YAAY,CAAC;IACvC,IAAI,CAACwB,IAAI,CAAC4B,MAAM,CAAC,IAAI,CAAC5B,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,IAAI,CAACnC,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAACiJ,OAAO,GAAG,UAAUxB,CAAC,EAAE;IAChDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAACuB,YAAY,CAACnH,KAAK,CAAC,IAAI,CAAC4F,IAAI,CAACpH,MAAM,CAAC,EAAEgH,CAAC,CAACpB,YAAY,CAAC;IAC/D,IAAI,CAACa,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAAC6I,QAAQ,GAAG,UAAUpB,CAAC,EAAE;IACjDA,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnB,IAAI,CAACtB,IAAI,CAACuB,YAAY,CAAC,EAAE,EAAE3B,CAAC,CAACpB,YAAY,CAAC;IAC1C,IAAI,CAACa,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACD9B,kBAAkB,CAAC5H,SAAS,CAAC8B,OAAO,GAAG,YAAY;IAC/C,IAAI,CAACiG,WAAW,CAACjG,OAAO,EAAE;EAC9B,CAAC;EACD,OAAO8F,kBAAkB;AAC7B,CAAC,EAAG;AACJ,IAAIkC,wBAAwB;AAC5B,CAAC,UAAUA,wBAAwB,EAAE;EACjCA,wBAAwB,CAACA,wBAAwB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM;EACvEA,wBAAwB,CAACA,wBAAwB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ;AAC/E,CAAC,EAAEA,wBAAwB,KAAKA,wBAAwB,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/D,OAAO,IAAIC,iCAAiC,GAAG,MAAI,aAAe,YAAY;EAC1E,SAASC,OAAO,GAAG,CACnB;EACAA,OAAO,CAAChK,SAAS,CAACiK,8BAA8B,GAAG,UAAUzE,KAAK,EAAE;IAChE,IAAIA,KAAK,CAACwD,OAAO,IAAIxD,KAAK,CAACuD,OAAO,IAAIvD,KAAK,CAAC0E,MAAM,EAAE;MAChD,OAAO,KAAK;IAChB;IACA,OAAQ1E,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,eAAe9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,eACvD9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,eAAe9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,WAAY,IACnE9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,kBAAkB9C,KAAK,CAAC8C,OAAO,IAAI,GAAG,CAAC,cAAe,IAC1E9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,sBAAsB9C,KAAK,CAAC8C,OAAO,IAAI,EAAE,CAAC,cAAe;EACzF,CAAC;;EACD,OAAO0B,OAAO;AAClB,CAAC,EAAE,GAAC;AACJ,IAAIG,mBAAmB,GAAG,aAAe,YAAY;EACjD,SAASA,mBAAmB,CAACtC,IAAI,EAAEX,IAAI,EAAEkD,+BAA+B,EAAEC,QAAQ,EAAE;IAChF,IAAI,CAACxC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACX,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACkD,+BAA+B,GAAGA,+BAA+B;IACtE,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,OAAO,GAAG,KAAK;IACpB,IAAI,CAACC,KAAK,GAAGT,wBAAwB,CAACU,IAAI;IAC1C,IAAI,CAACC,2BAA2B,GAAG,IAAI;IACvC,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACC,kBAAkB,GAAG,IAAI5I,eAAe,EAAE;IAC/C,IAAI,CAACgG,WAAW,GAAG,IAAIhG,eAAe,EAAE;IACxC,IAAI,CAAC6I,aAAa,CAAC/C,IAAI,CAACC,OAAO,CAAC;EACpC;EACAqC,mBAAmB,CAACnK,SAAS,CAAC4K,aAAa,GAAG,UAAU9C,OAAO,EAAE;IAC7D,IAAI+C,wBAAwB,GAAG,OAAO/C,OAAO,CAAC+C,wBAAwB,KAAK,WAAW,GAAG,IAAI,GAAG,CAAC,CAAC/C,OAAO,CAAC+C,wBAAwB;IAClI,IAAIA,wBAAwB,EAAE;MAC1B,IAAI,CAACC,MAAM,EAAE;IACjB,CAAC,MACI;MACD,IAAI,CAACC,OAAO,EAAE;IAClB;IACA,IAAI,OAAOjD,OAAO,CAAC2C,2BAA2B,KAAK,WAAW,EAAE;MAC5D,IAAI,CAACA,2BAA2B,GAAG3C,OAAO,CAAC2C,2BAA2B;IAC1E;EACJ,CAAC;EACDN,mBAAmB,CAACnK,SAAS,CAAC8K,MAAM,GAAG,YAAY;IAC/C,IAAI1D,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACkD,OAAO,EAAE;MACd;IACJ;IACA,IAAIU,MAAM,GAAGvI,KAAK,CAAC2F,KAAK,CAACxF,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,SAAS,CAAC,CAAC,CAC3DzC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAO,CAACC,cAAc,CAACD,CAAC,CAAC3G,MAAM,CAAC;IAAE,CAAC,CAAC,CAC1D8E,MAAM,CAAC,YAAY;MAAE,OAAOwB,KAAK,CAACqD,2BAA2B,IAAIrD,KAAK,CAACsD,SAAS;IAAE,CAAC,CAAC,CACpF7E,GAAG,CAAC,UAAUL,KAAK,EAAE;MAAE,OAAO,IAAIhD,qBAAqB,CAACgD,KAAK,CAAC;IAAE,CAAC,CAAC,CAClEI,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOL,KAAK,CAACiD,QAAQ,CAACJ,8BAA8B,CAACxC,CAAC,CAAC;IAAE,CAAC,CAAC,CACjFwD,OAAO,CAAC,UAAUxD,CAAC,EAAE;MAAEA,CAAC,CAAC0B,eAAe,EAAE;MAAE1B,CAAC,CAACyB,cAAc,EAAE;IAAE,CAAC,CAAC,CAClErD,GAAG,CAAC,UAAUL,KAAK,EAAE;MAAE,OAAOA,KAAK,CAACa,YAAY,CAACtF,GAAG;IAAE,CAAC,CAAC,CACxDyE,KAAK;IACV,IAAI0F,OAAO,GAAGzI,KAAK,CAAC0I,QAAQ,CAACH,MAAM,EAAE,YAAY;MAAE,OAAO,IAAI;IAAE,CAAC,EAAE,GAAG,CAAC;IACvE,IAAII,OAAO,GAAG3I,KAAK,CAAC4I,MAAM,CAAC5I,KAAK,CAAC6I,GAAG,CAACN,MAAM,EAAEE,OAAO,CAAC,EAAE,UAAUhK,CAAC,EAAEZ,CAAC,EAAE;MAAE,OAAOA,CAAC,KAAK,IAAI,GAAG,IAAI,GAAI,CAACY,CAAC,IAAI,EAAE,IAAIZ,CAAE;IAAE,CAAC,CAAC;IACvH8K,OAAO,CAAC,IAAI,CAACA,OAAO,EAAE,IAAI,EAAE,IAAI,CAACT,kBAAkB,CAAC;IACpD,IAAI,CAACL,OAAO,GAAG,IAAI;IACnB,IAAI,CAACI,SAAS,GAAG,KAAK;EAC1B,CAAC;EACDP,mBAAmB,CAACnK,SAAS,CAAC+K,OAAO,GAAG,YAAY;IAChD,IAAI,CAAC,IAAI,CAACT,OAAO,EAAE;MACf;IACJ;IACA,IAAI,CAACK,kBAAkB,CAACY,KAAK,EAAE;IAC/B,IAAI,CAACjB,OAAO,GAAG,KAAK;IACpB,IAAI,CAACI,SAAS,GAAG,KAAK;EAC1B,CAAC;EACDP,mBAAmB,CAACnK,SAAS,CAACoL,OAAO,GAAG,UAAUI,IAAI,EAAE;IACpD,IAAI,CAACA,IAAI,EAAE;MACP,IAAI,CAACjB,KAAK,GAAGT,wBAAwB,CAACU,IAAI;MAC1C,IAAI,CAACE,SAAS,GAAG,KAAK;MACtB;IACJ;IACA,IAAIhB,KAAK,GAAG,IAAI,CAAC7B,IAAI,CAACwB,QAAQ,EAAE;IAChC,IAAI7E,KAAK,GAAGkF,KAAK,CAACjJ,MAAM,GAAG,CAAC,GAAGiJ,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;IAC3C,IAAI+B,KAAK,GAAG,IAAI,CAAClB,KAAK,KAAKT,wBAAwB,CAACU,IAAI,GAAG,CAAC,GAAG,CAAC;IAChE,IAAI,CAACD,KAAK,GAAGT,wBAAwB,CAAC4B,MAAM;IAC5C,KAAK,IAAIpL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACuH,IAAI,CAACpH,MAAM,EAAEH,CAAC,EAAE,EAAE;MACvC,IAAIyD,KAAK,GAAG,CAACS,KAAK,GAAGlE,CAAC,GAAGmL,KAAK,IAAI,IAAI,CAAC5D,IAAI,CAACpH,MAAM;MAClD,IAAIkL,KAAK,GAAG,IAAI,CAACvB,+BAA+B,CAACwB,0BAA0B,CAAC,IAAI,CAAC1E,IAAI,CAACpD,OAAO,CAACC,KAAK,CAAC,CAAC;MACrG,IAAI8H,QAAQ,GAAGF,KAAK,IAAIA,KAAK,CAACpE,QAAQ,EAAE;MACxC,IAAI,OAAOsE,QAAQ,KAAK,WAAW,IAAIzI,aAAa,CAACoI,IAAI,EAAEK,QAAQ,CAAC,EAAE;QAClE,IAAI,CAAChE,IAAI,CAACiE,QAAQ,CAAC,CAAC/H,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC8D,IAAI,CAAC4B,MAAM,CAAC1F,KAAK,CAAC;QACvB;MACJ;IACJ;EACJ,CAAC;EACDoG,mBAAmB,CAACnK,SAAS,CAAC8B,OAAO,GAAG,YAAY;IAChD,IAAI,CAACiJ,OAAO,EAAE;IACd,IAAI,CAACJ,kBAAkB,CAAC7I,OAAO,EAAE;IACjC,IAAI,CAACiG,WAAW,CAACjG,OAAO,EAAE;EAC9B,CAAC;EACD,OAAOqI,mBAAmB;AAC9B,CAAC,EAAG;AACJ,IAAI4B,kBAAkB,GAAG,aAAe,YAAY;EAChD,SAASA,kBAAkB,CAAClE,IAAI,EAAEX,IAAI,EAAE;IACpC,IAAI,CAACW,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACX,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACa,WAAW,GAAG,IAAIhG,eAAe,EAAE;IACxC,IAAIoG,SAAS,GAAG1F,KAAK,CAAC2F,KAAK,CAACxF,QAAQ,CAACsE,IAAI,CAACmB,OAAO,EAAE,SAAS,CAAC,CAAC,CACzDzC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAO,CAACC,cAAc,CAACD,CAAC,CAAC3G,MAAM,CAAC;IAAE,CAAC,CAAC,CAC1D+E,GAAG,CAAC,UAAU4B,CAAC,EAAE;MAAE,OAAO,IAAIjF,qBAAqB,CAACiF,CAAC,CAAC;IAAE,CAAC,CAAC;IAC/DU,SAAS,CAACvC,MAAM,CAAC,UAAU6B,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACa,OAAO,KAAK,CAAC,CAAC,aAAa,CAACb,CAAC,CAACuB,OAAO,IAAI,CAACvB,CAAC,CAACsB,OAAO,IAAI,CAACtB,CAAC,CAACuE,QAAQ,IAAI,CAACvE,CAAC,CAACyC,MAAM;IAAE,CAAC,CAAC,CACvH3B,EAAE,CAAC,IAAI,CAAC0D,KAAK,EAAE,IAAI,EAAE,IAAI,CAAClE,WAAW,CAAC;EAC/C;EACAgE,kBAAkB,CAAC/L,SAAS,CAACiM,KAAK,GAAG,UAAUxE,CAAC,EAAE;IAC9C,IAAIA,CAAC,CAAC3G,MAAM,KAAK,IAAI,CAACoG,IAAI,CAACmB,OAAO,EAAE;MAChC;IACJ;IACA,IAAIqB,KAAK,GAAG,IAAI,CAAC7B,IAAI,CAACwB,QAAQ,EAAE;IAChC,IAAIK,KAAK,CAACjJ,MAAM,KAAK,CAAC,EAAE;MACpB;IACJ;IACA,IAAIyL,iBAAiB,GAAG,IAAI,CAAChF,IAAI,CAACiF,UAAU,CAACzC,KAAK,CAAC,CAAC,CAAC,CAAC;IACtD,IAAI,CAACwC,iBAAiB,EAAE;MACpB;IACJ;IACA,IAAIE,eAAe,GAAGF,iBAAiB,CAACG,aAAa,CAAC,YAAY,CAAC;IACnE,IAAI,CAACD,eAAe,IAAI,EAAEA,eAAe,YAAYE,WAAW,CAAC,IAAIF,eAAe,CAACG,QAAQ,KAAK,CAAC,CAAC,EAAE;MAClG;IACJ;IACA,IAAIC,KAAK,GAAGC,MAAM,CAACC,gBAAgB,CAACN,eAAe,CAAC;IACpD,IAAII,KAAK,CAACG,UAAU,KAAK,QAAQ,IAAIH,KAAK,CAACI,OAAO,KAAK,MAAM,EAAE;MAC3D;IACJ;IACAnF,CAAC,CAACyB,cAAc,EAAE;IAClBzB,CAAC,CAAC0B,eAAe,EAAE;IACnBiD,eAAe,CAAC1C,KAAK,EAAE;EAC3B,CAAC;EACDqC,kBAAkB,CAAC/L,SAAS,CAAC8B,OAAO,GAAG,YAAY;IAC/C,IAAI,CAACiG,WAAW,CAACjG,OAAO,EAAE;EAC9B,CAAC;EACD,OAAOiK,kBAAkB;AAC7B,CAAC,EAAG;AACJ,OAAO,SAASc,4BAA4B,CAACrH,KAAK,EAAE;EAChD,OAAOlD,QAAQ,CAACwG,WAAW,GAAGtD,KAAK,CAACa,YAAY,CAAC0C,OAAO,GAAGvD,KAAK,CAACa,YAAY,CAAC2C,OAAO;AACzF;AACA,OAAO,SAAS8D,2BAA2B,CAACtH,KAAK,EAAE;EAC/C,OAAOA,KAAK,CAACa,YAAY,CAAC2F,QAAQ;AACtC;AACA,SAASe,iBAAiB,CAACvH,KAAK,EAAE;EAC9B,OAAOA,KAAK,YAAYwH,UAAU,IAAIxH,KAAK,CAACyH,MAAM,KAAK,CAAC;AAC5D;AACA,IAAIC,kCAAkC,GAAG;EACrCL,4BAA4B,EAAEA,4BAA4B;EAC1DC,2BAA2B,EAAEA;AACjC,CAAC;AACD,IAAI5E,qBAAqB,GAAG;EACxBoB,UAAU,EAAE,oBAAU9D,KAAK,EAAE;IACzB,IAAIA,KAAK,YAAYwH,UAAU,EAAE;MAC7B,OAAO,CAACD,iBAAiB,CAACvH,KAAK,CAAC;IACpC;IACA,OAAO,IAAI;EACf;AACJ,CAAC;AACD,IAAI2H,eAAe,GAAG,aAAe,YAAY;EAC7C,SAASA,eAAe,CAACtF,IAAI,EAAE;IAC3B,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,WAAW,GAAG,IAAIhG,eAAe,EAAE;IACxC,IAAI,CAACiG,wBAAwB,GAAG,EAAEH,IAAI,CAACC,OAAO,CAACE,wBAAwB,KAAK,KAAK,CAAC;IAClF,IAAI,IAAI,CAACA,wBAAwB,EAAE;MAC/B,IAAI,CAACoF,2BAA2B,GAAGvF,IAAI,CAACC,OAAO,CAACsF,2BAA2B,IAAIF,kCAAkC;IACrH;IACA,IAAI,CAACjF,cAAc,GAAGJ,IAAI,CAACC,OAAO,CAACG,cAAc,IAAIC,qBAAqB;IAC1E,IAAI,CAACmF,YAAY,GAAG,OAAOxF,IAAI,CAACC,OAAO,CAACuF,YAAY,KAAK,WAAW,IAAI,CAAC,CAACxF,IAAI,CAACC,OAAO,CAACuF,YAAY;IACnG,IAAI,IAAI,CAACA,YAAY,EAAE;MACnBxF,IAAI,CAACyF,WAAW,CAAC,IAAI,CAACA,WAAW,EAAE,IAAI,EAAE,IAAI,CAACvF,WAAW,CAAC;MAC1DF,IAAI,CAAC0F,aAAa,CAAC,IAAI,CAACA,aAAa,EAAE,IAAI,EAAE,IAAI,CAACxF,WAAW,CAAC;MAC9DF,IAAI,CAAC2F,eAAe,CAAC,IAAI,CAACC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC1F,WAAW,CAAC;MAChEF,IAAI,CAAC6F,YAAY,CAAC,IAAI,CAACJ,WAAW,EAAE,IAAI,EAAE,IAAI,CAACvF,WAAW,CAAC;MAC3D,IAAI,CAACA,WAAW,CAAC4F,GAAG,CAACpL,OAAO,CAACqL,SAAS,CAAC/F,IAAI,CAACgG,cAAc,EAAE,CAAC,CAAC;IAClE;IACAhG,IAAI,CAACiG,YAAY,CAAC,IAAI,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAChG,WAAW,CAAC;IACzDF,IAAI,CAACmG,kBAAkB,CAAC,IAAI,CAACD,SAAS,EAAE,IAAI,EAAE,IAAI,CAAChG,WAAW,CAAC;IAC/DF,IAAI,CAACoG,KAAK,CAAC,IAAI,CAACF,SAAS,EAAE,IAAI,EAAE,IAAI,CAAChG,WAAW,CAAC;EACtD;EACAoF,eAAe,CAACnN,SAAS,CAAC6M,4BAA4B,GAAG,UAAUrH,KAAK,EAAE;IACtE,IAAI,IAAI,CAAC4H,2BAA2B,EAAE;MAClC,OAAO,IAAI,CAACA,2BAA2B,CAACP,4BAA4B,CAACrH,KAAK,CAAC;IAC/E;IACA,OAAOlD,QAAQ,CAACwG,WAAW,GAAGtD,KAAK,CAACa,YAAY,CAAC0C,OAAO,GAAGvD,KAAK,CAACa,YAAY,CAAC2C,OAAO;EACzF,CAAC;EACDmE,eAAe,CAACnN,SAAS,CAAC8M,2BAA2B,GAAG,UAAUtH,KAAK,EAAE;IACrE,IAAI,IAAI,CAAC4H,2BAA2B,EAAE;MAClC,OAAO,IAAI,CAACA,2BAA2B,CAACN,2BAA2B,CAACtH,KAAK,CAAC;IAC9E;IACA,OAAOA,KAAK,CAACa,YAAY,CAAC2F,QAAQ;EACtC,CAAC;EACDmB,eAAe,CAACnN,SAAS,CAACkO,sBAAsB,GAAG,UAAU1I,KAAK,EAAE;IAChE,OAAO,IAAI,CAACqH,4BAA4B,CAACrH,KAAK,CAAC,IAAI,IAAI,CAACsH,2BAA2B,CAACtH,KAAK,CAAC;EAC9F,CAAC;EACD2H,eAAe,CAACnN,SAAS,CAACsN,WAAW,GAAG,UAAU7F,CAAC,EAAE;IACjD,IAAI0G,QAAQ,CAACC,aAAa,KAAK3G,CAAC,CAACpB,YAAY,CAACvF,MAAM,EAAE;MAClD,IAAI,CAAC+G,IAAI,CAACwG,QAAQ,EAAE;IACxB;EACJ,CAAC;EACDlB,eAAe,CAACnN,SAAS,CAACuN,aAAa,GAAG,UAAU9F,CAAC,EAAE;IACnD,IAAIiC,KAAK,GAAG,OAAOjC,CAAC,CAAC1D,KAAK,KAAK,WAAW,GAAG,EAAE,GAAG,CAAC0D,CAAC,CAAC1D,KAAK,CAAC;IAC3D,IAAI,CAAC8D,IAAI,CAACiE,QAAQ,CAACpC,KAAK,EAAEjC,CAAC,CAACpB,YAAY,CAAC;EAC7C,CAAC;EACD8G,eAAe,CAACnN,SAAS,CAAC+N,SAAS,GAAG,UAAUtG,CAAC,EAAE;IAC/C,IAAI,CAAC,IAAI,CAAC4F,YAAY,EAAE;MACpB;IACJ;IACA,IAAI3F,cAAc,CAACD,CAAC,CAACpB,YAAY,CAACvF,MAAM,CAAC,EAAE;MACvC;IACJ;IACA,IAAIwN,SAAS,GAAG,IAAI,CAACzG,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,CAAC;IACvC,IAAIkF,SAAS,GAAG,IAAI,CAAC1G,IAAI,CAAC2G,YAAY,EAAE;IACxCF,SAAS,GAAGA,SAAS,KAAKG,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAGD,SAAS;IAC9D,IAAI5E,KAAK,GAAGjC,CAAC,CAAC1D,KAAK;IACnB,IAAI,OAAO2F,KAAK,KAAK,WAAW,EAAE;MAC9B,IAAI,CAAC7B,IAAI,CAACiE,QAAQ,CAAC,EAAE,EAAErE,CAAC,CAACpB,YAAY,CAAC;MACtC,IAAI,CAACwB,IAAI,CAACuB,YAAY,CAAC,EAAE,EAAE3B,CAAC,CAACpB,YAAY,CAAC;MAC1C;IACJ;IACA,IAAI,IAAI,CAAC2B,wBAAwB,IAAI,IAAI,CAAC8E,2BAA2B,CAACrF,CAAC,CAAC,EAAE;MACtE,OAAO,IAAI,CAACiH,eAAe,CAACjH,CAAC,EAAE6G,SAAS,CAAC;IAC7C;IACA,IAAI,IAAI,CAACtG,wBAAwB,IAAI,IAAI,CAACkG,sBAAsB,CAACzG,CAAC,CAAC,EAAE;MACjE,OAAO,IAAI,CAACiH,eAAe,CAACjH,CAAC,EAAE6G,SAAS,CAAC;IAC7C;IACA,IAAI,CAACzG,IAAI,CAACiE,QAAQ,CAAC,CAACpC,KAAK,CAAC,EAAEjC,CAAC,CAACpB,YAAY,CAAC;IAC3C,IAAI,CAAC0G,iBAAiB,CAACtF,CAAC,CAACpB,YAAY,CAAC,EAAE;MACpC,IAAI,CAACwB,IAAI,CAACuB,YAAY,CAAC,CAACM,KAAK,CAAC,EAAEjC,CAAC,CAACpB,YAAY,CAAC;MAC/C,IAAI,IAAI,CAAC4B,cAAc,CAACqB,UAAU,CAAC7B,CAAC,CAACpB,YAAY,CAAC,EAAE;QAChD,IAAI,CAACwB,IAAI,CAAC0B,IAAI,CAAC,CAACG,KAAK,CAAC,EAAEjC,CAAC,CAACpB,YAAY,CAAC;MAC3C;IACJ;EACJ,CAAC;EACD8G,eAAe,CAACnN,SAAS,CAACyN,aAAa,GAAG,UAAUhG,CAAC,EAAE;IACnD,IAAIC,cAAc,CAACD,CAAC,CAACpB,YAAY,CAACvF,MAAM,CAAC,EAAE;MACvC;IACJ;IACA,IAAI,IAAI,CAACkH,wBAAwB,IAAI,IAAI,CAACkG,sBAAsB,CAACzG,CAAC,CAAC,EAAE;MACjE;IACJ;IACA,IAAIiC,KAAK,GAAG,IAAI,CAAC7B,IAAI,CAACwB,QAAQ,EAAE;IAChC,IAAI,CAACxB,IAAI,CAACuB,YAAY,CAACM,KAAK,EAAEjC,CAAC,CAACpB,YAAY,CAAC;IAC7C,IAAI,CAACwB,IAAI,CAAC8G,GAAG,CAACjF,KAAK,CAAC;EACxB,CAAC;EACDyD,eAAe,CAACnN,SAAS,CAAC0O,eAAe,GAAG,UAAUjH,CAAC,EAAE6G,SAAS,EAAE;IAChE,IAAI5E,KAAK,GAAGjC,CAAC,CAAC1D,KAAK;IACnB,IAAI,IAAI,CAAC+I,2BAA2B,CAACrF,CAAC,CAAC,IAAI6G,SAAS,KAAKG,SAAS,EAAE;MAChE,IAAIG,GAAG,GAAGC,IAAI,CAACD,GAAG,CAACN,SAAS,EAAE5E,KAAK,CAAC;MACpC,IAAIoF,GAAG,GAAGD,IAAI,CAACC,GAAG,CAACR,SAAS,EAAE5E,KAAK,CAAC;MACpC,IAAIqF,cAAc,GAAG9M,KAAK,CAAC2M,GAAG,EAAEE,GAAG,GAAG,CAAC,CAAC;MACxC,IAAIP,SAAS,GAAG,IAAI,CAAC1G,IAAI,CAAC2G,YAAY,EAAE;MACxC,IAAIQ,eAAe,GAAGC,4BAA4B,CAACtI,WAAW,CAAC4H,SAAS,EAAE,CAACD,SAAS,CAAC,CAAC,EAAEA,SAAS,CAAC;MAClG,IAAIU,eAAe,CAACvO,MAAM,KAAK,CAAC,EAAE;QAC9B;MACJ;MACA,IAAIyO,YAAY,GAAGvI,WAAW,CAACoI,cAAc,EAAEI,kBAAkB,CAACZ,SAAS,EAAES,eAAe,CAAC,CAAC;MAC9F,IAAI,CAACnH,IAAI,CAACuB,YAAY,CAAC8F,YAAY,EAAEzH,CAAC,CAACpB,YAAY,CAAC;IACxD,CAAC,MACI,IAAI,IAAI,CAACwG,4BAA4B,CAACpF,CAAC,CAAC,EAAE;MAC3C,IAAI8G,SAAS,GAAG,IAAI,CAAC1G,IAAI,CAAC2G,YAAY,EAAE;MACxC,IAAIU,YAAY,GAAGX,SAAS,CAAC3I,MAAM,CAAC,UAAUtF,CAAC,EAAE;QAAE,OAAOA,CAAC,KAAKoJ,KAAK;MAAE,CAAC,CAAC;MACzE,IAAI,CAAC7B,IAAI,CAACiE,QAAQ,CAAC,CAACpC,KAAK,CAAC,CAAC;MAC3B,IAAI6E,SAAS,CAAC9N,MAAM,KAAKyO,YAAY,CAACzO,MAAM,EAAE;QAC1C,IAAI,CAACoH,IAAI,CAACuB,YAAY,CAAC7H,cAAc,CAAC2N,YAAY,EAAE,CAACxF,KAAK,CAAC,CAAC,EAAEjC,CAAC,CAACpB,YAAY,CAAC;MACjF,CAAC,MACI;QACD,IAAI,CAACwB,IAAI,CAACuB,YAAY,CAAC8F,YAAY,EAAEzH,CAAC,CAACpB,YAAY,CAAC;MACxD;IACJ;EACJ,CAAC;EACD8G,eAAe,CAACnN,SAAS,CAAC8B,OAAO,GAAG,YAAY;IAC5C,IAAI,CAACiG,WAAW,CAACjG,OAAO,EAAE;EAC9B,CAAC;EACD,OAAOqL,eAAe;AAC1B,CAAC,EAAG;AACJ,SAASA,eAAe;AACxB,IAAIiC,sBAAsB,GAAG,aAAe,YAAY;EACpD,SAASA,sBAAsB,CAACC,YAAY,EAAEC,cAAc,EAAE;IAC1D,IAAI,CAACD,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,cAAc,GAAGA,cAAc;EACxC;EACAF,sBAAsB,CAACpP,SAAS,CAACwM,KAAK,GAAG,UAAU+C,MAAM,EAAE;IACvD,IAAIC,MAAM,GAAG,IAAI,CAACF,cAAc,IAAI,GAAG,GAAG,IAAI,CAACA,cAAc;IAC7D,IAAIG,OAAO,GAAG,EAAE;IAChB,IAAIF,MAAM,CAACG,cAAc,EAAE;MACvB,IAAIH,MAAM,CAACG,cAAc,CAACC,QAAQ,EAAE,EAAE;QAClCF,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,mCAAmC,GAAGD,MAAM,CAACG,cAAc,GAAG,KAAK,CAAC;MAC/G,CAAC,MACI,IAAI,CAACpN,QAAQ,CAACwG,WAAW,EAAE;QAAE;QAC9B8G,OAAO,CAACC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAACP,cAAc,GAAG,0FAA0F,CAAC;MACrJ;IACJ;IACA,IAAIC,MAAM,CAACO,mBAAmB,EAAE;MAC5BL,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,sDAAsD,GAAGD,MAAM,CAACO,mBAAmB,GAAG,KAAK,CAAC;MACnIL,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,4DAA4D,GAAGD,MAAM,CAACO,mBAAmB,GAAG,KAAK,CAAC,CAAC,CAAC;IAC/I;;IACA,IAAIP,MAAM,CAACQ,mBAAmB,EAAE;MAC5BN,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,2CAA2C,GAAGD,MAAM,CAACQ,mBAAmB,GAAG,KAAK,CAAC;IAC5H;IACA,IAAIR,MAAM,CAACS,6BAA6B,EAAE;MACtCP,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,uDAAuD,GAAGD,MAAM,CAACS,6BAA6B,GAAG,KAAK,CAAC;MAC9IP,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,6DAA6D,GAAGD,MAAM,CAACS,6BAA6B,GAAG,KAAK,CAAC,CAAC,CAAC;IAC1J;;IACA,IAAIT,MAAM,CAACU,6BAA6B,EAAE;MACtCR,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,4CAA4C,GAAGD,MAAM,CAACU,6BAA6B,GAAG,KAAK,CAAC;IACvI;IACA,IAAIV,MAAM,CAACW,+BAA+B,EAAE;MACxCT,OAAO,CAACpL,IAAI,CAAC,qDAAqD,GAAGmL,MAAM,GAAG,+DAA+D,GAAGD,MAAM,CAACW,+BAA+B,GAAG,aAAa,CAAC;IAC3M;IACA,IAAIX,MAAM,CAACY,+BAA+B,EAAE;MACxCV,OAAO,CAACpL,IAAI,CAAC,qDAAqD,GAAGmL,MAAM,GAAG,oDAAoD,GAAGD,MAAM,CAACY,+BAA+B,GAAG,aAAa,CAAC;IAChM;IACA,IAAIZ,MAAM,CAACa,2BAA2B,EAAE;MACpCX,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,iDAAiD,GAAGD,MAAM,CAACa,2BAA2B,GAAG,KAAK,CAAC;MACtIX,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,uDAAuD,GAAGD,MAAM,CAACa,2BAA2B,GAAG,KAAK,CAAC,CAAC,CAAC;IAClJ;;IACA,IAAIb,MAAM,CAACc,+BAA+B,EAAE;MACxCZ,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,kDAAkD,GAAGD,MAAM,CAACc,+BAA+B,GAAG,KAAK,CAAC;MAC3IZ,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,wDAAwD,GAAGD,MAAM,CAACc,+BAA+B,GAAG,KAAK,CAAC,CAAC,CAAC;IACvJ;;IACA,IAAId,MAAM,CAACe,+BAA+B,EAAE;MACxCb,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,sCAAsC,GAAGD,MAAM,CAACe,+BAA+B,GAAG,KAAK,CAAC;IACnI;IACA,IAAIf,MAAM,CAACgB,mBAAmB,EAAE;MAC5Bd,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,8FAA8F,GAAGD,MAAM,CAACgB,mBAAmB,GAAG,KAAK,CAAC;IAC/K;IACA,IAAIhB,MAAM,CAACiB,mBAAmB,EAAE;MAC5Bf,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,iEAAiE,GAAGD,MAAM,CAACiB,mBAAmB,GAAG,KAAK,CAAC;IAClJ;IACA,IAAIjB,MAAM,CAACkB,oBAAoB,EAAE;MAC7BhB,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,mDAAmD,GAAGD,MAAM,CAACkB,oBAAoB,GAAG,2BAA2B,CAAC;IAC3J;IACA,IAAIlB,MAAM,CAACmB,gBAAgB,EAAE;MACzBjB,OAAO,CAACpL,IAAI,CAAC,qDAAqD,GAAGmL,MAAM,GAAG,uDAAuD,GAAGD,MAAM,CAACmB,gBAAgB,GAAG,mCAAmC,CAAC;IAC1M;IACA,IAAInB,MAAM,CAACoB,wBAAwB,EAAE;MACjClB,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,kDAAkD,GAAGD,MAAM,CAACoB,wBAAwB,GAAG,2BAA2B,CAAC;IAC9J;IACA,IAAIpB,MAAM,CAACqB,gBAAgB,EAAE;MACzBnB,OAAO,CAACpL,IAAI,CAAC,cAAc,GAAGmL,MAAM,GAAG,gDAAgD,GAAGD,MAAM,CAACqB,gBAAgB,GAAG,2BAA2B,CAAC;IACpJ;IACA,IAAIrB,MAAM,CAACsB,kBAAkB,EAAE;MAC3BpB,OAAO,CAACpL,IAAI,CAAC,wBAAwB,GAAGmL,MAAM,GAAG,qCAAqC,GAAGA,MAAM,GAAG,uDAAuD,GAAGA,MAAM,GAAG,oDAAoD,GAAGD,MAAM,CAACsB,kBAAkB,GAAG,mDAAmD,CAAC;IAChT;IACA,IAAItB,MAAM,CAACuB,0BAA0B,EAAE;MACnCrB,OAAO,CAACpL,IAAI,CAAC,+CAA+C,GAAGkL,MAAM,CAACuB,0BAA0B,GAAG,IAAI,CAAC;IAC5G;IACA,IAAIvB,MAAM,CAACwB,uBAAuB,EAAE;MAChCtB,OAAO,CAACpL,IAAI,CAAC,+CAA+C,GAAGkL,MAAM,CAACwB,uBAAuB,GAAG,KAAK,CAAC;IAC1G;IACA,IAAIxB,MAAM,CAACyB,gCAAgC,EAAE;MACzCvB,OAAO,CAACpL,IAAI,CAAC,0DAA0D,GAAGkL,MAAM,CAACyB,gCAAgC,GAAG,KAAK,CAAC;IAC9H;IACA,IAAIzB,MAAM,CAAC0B,iBAAiB,EAAE;MAC1BxB,OAAO,CAACpL,IAAI,CAAC,qDAAqD,GAAGkL,MAAM,CAAC0B,iBAAiB,GAAG,KAAK,CAAC;IAC1G;IACA,IAAIC,SAAS,GAAGzB,OAAO,CAAC0B,IAAI,CAAC,IAAI,CAAC;IAClC,IAAID,SAAS,KAAK,IAAI,CAAC7B,YAAY,CAAC+B,SAAS,EAAE;MAC3C,IAAI,CAAC/B,YAAY,CAAC+B,SAAS,GAAGF,SAAS;IAC3C;EACJ,CAAC;EACD,OAAO9B,sBAAsB;AACjC,CAAC,EAAG;AACJ,SAASA,sBAAsB;AAC/B,IAAIiC,aAAa,GAAG;EAChBvB,mBAAmB,EAAE9M,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EAC7CtB,6BAA6B,EAAEhN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EACvDrB,6BAA6B,EAAEjN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EACvDpB,+BAA+B,EAAElN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EACzDnB,+BAA+B,EAAEnN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EACzDjB,+BAA+B,EAAErN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EACzDf,mBAAmB,EAAEvN,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EAC7CT,kBAAkB,EAAE7N,KAAK,CAACsO,OAAO,CAAC,SAAS,CAAC;EAC5CC,sBAAsB,EAAEvO,KAAK,CAACsO,OAAO,CAAC,SAAS;AACnD,CAAC;AACD,IAAIE,cAAc,GAAG;EACjBC,eAAe,EAAE,IAAI;EACrBpE,YAAY,EAAE,IAAI;EAClBrF,wBAAwB,EAAE,IAAI;EAC9B0J,GAAG,EAAE;IACDC,UAAU,EAAE,sBAAY;MAAE,OAAO,IAAI;IAAE,CAAC;IACxCC,WAAW,EAAE,uBAAY,CAAE,CAAC;IAC5BC,UAAU,EAAE,sBAAY;MAAE,OAAO,KAAK;IAAE,CAAC;IACzCC,IAAI,EAAE,gBAAY,CAAE;EACxB,CAAC;EACDC,YAAY,EAAElP,gBAAgB,CAACmP;AACnC,CAAC;AACD;AACA,SAAS/C,4BAA4B,CAAChN,KAAK,EAAEgQ,KAAK,EAAE;EAChD,IAAIlO,KAAK,GAAG9B,KAAK,CAACgD,OAAO,CAACgN,KAAK,CAAC;EAChC,IAAIlO,KAAK,KAAK,CAAC,CAAC,EAAE;IACd,OAAO,EAAE;EACb;EACA,IAAIyC,MAAM,GAAG,EAAE;EACf,IAAIlG,CAAC,GAAGyD,KAAK,GAAG,CAAC;EACjB,OAAOzD,CAAC,IAAI,CAAC,IAAI2B,KAAK,CAAC3B,CAAC,CAAC,KAAK2R,KAAK,IAAIlO,KAAK,GAAGzD,CAAC,CAAC,EAAE;IAC/CkG,MAAM,CAACnC,IAAI,CAACpC,KAAK,CAAC3B,CAAC,EAAE,CAAC,CAAC;EAC3B;EACAkG,MAAM,CAAC0L,OAAO,EAAE;EAChB5R,CAAC,GAAGyD,KAAK;EACT,OAAOzD,CAAC,GAAG2B,KAAK,CAACxB,MAAM,IAAIwB,KAAK,CAAC3B,CAAC,CAAC,KAAK2R,KAAK,IAAI3R,CAAC,GAAGyD,KAAK,CAAC,EAAE;IACzDyC,MAAM,CAACnC,IAAI,CAACpC,KAAK,CAAC3B,CAAC,EAAE,CAAC,CAAC;EAC3B;EACA,OAAOkG,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA,SAASG,WAAW,CAACwL,GAAG,EAAEC,KAAK,EAAE;EAC7B,IAAI5L,MAAM,GAAG,EAAE;EACf,IAAIlG,CAAC,GAAG,CAAC;IAAEqB,CAAC,GAAG,CAAC;EAChB,OAAOrB,CAAC,GAAG6R,GAAG,CAAC1R,MAAM,IAAIkB,CAAC,GAAGyQ,KAAK,CAAC3R,MAAM,EAAE;IACvC,IAAIH,CAAC,IAAI6R,GAAG,CAAC1R,MAAM,EAAE;MACjB+F,MAAM,CAACnC,IAAI,CAAC+N,KAAK,CAACzQ,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC,MACI,IAAIA,CAAC,IAAIyQ,KAAK,CAAC3R,MAAM,EAAE;MACxB+F,MAAM,CAACnC,IAAI,CAAC8N,GAAG,CAAC7R,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC,MACI,IAAI6R,GAAG,CAAC7R,CAAC,CAAC,KAAK8R,KAAK,CAACzQ,CAAC,CAAC,EAAE;MAC1B6E,MAAM,CAACnC,IAAI,CAAC8N,GAAG,CAAC7R,CAAC,CAAC,CAAC;MACnBA,CAAC,EAAE;MACHqB,CAAC,EAAE;MACH;IACJ,CAAC,MACI,IAAIwQ,GAAG,CAAC7R,CAAC,CAAC,GAAG8R,KAAK,CAACzQ,CAAC,CAAC,EAAE;MACxB6E,MAAM,CAACnC,IAAI,CAAC8N,GAAG,CAAC7R,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC,MACI;MACDkG,MAAM,CAACnC,IAAI,CAAC+N,KAAK,CAACzQ,CAAC,EAAE,CAAC,CAAC;IAC3B;EACJ;EACA,OAAO6E,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS2I,kBAAkB,CAACgD,GAAG,EAAEC,KAAK,EAAE;EACpC,IAAI5L,MAAM,GAAG,EAAE;EACf,IAAIlG,CAAC,GAAG,CAAC;IAAEqB,CAAC,GAAG,CAAC;EAChB,OAAOrB,CAAC,GAAG6R,GAAG,CAAC1R,MAAM,IAAIkB,CAAC,GAAGyQ,KAAK,CAAC3R,MAAM,EAAE;IACvC,IAAIH,CAAC,IAAI6R,GAAG,CAAC1R,MAAM,EAAE;MACjB+F,MAAM,CAACnC,IAAI,CAAC+N,KAAK,CAACzQ,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC,MACI,IAAIA,CAAC,IAAIyQ,KAAK,CAAC3R,MAAM,EAAE;MACxB+F,MAAM,CAACnC,IAAI,CAAC8N,GAAG,CAAC7R,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC,MACI,IAAI6R,GAAG,CAAC7R,CAAC,CAAC,KAAK8R,KAAK,CAACzQ,CAAC,CAAC,EAAE;MAC1BrB,CAAC,EAAE;MACHqB,CAAC,EAAE;MACH;IACJ,CAAC,MACI,IAAIwQ,GAAG,CAAC7R,CAAC,CAAC,GAAG8R,KAAK,CAACzQ,CAAC,CAAC,EAAE;MACxB6E,MAAM,CAACnC,IAAI,CAAC8N,GAAG,CAAC7R,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC,MACI;MACDqB,CAAC,EAAE;IACP;EACJ;EACA,OAAO6E,MAAM;AACjB;AACA,IAAID,WAAW,GAAG,SAAdA,WAAW,CAAa7E,CAAC,EAAEnC,CAAC,EAAE;EAAE,OAAOmC,CAAC,GAAGnC,CAAC;AAAE,CAAC;AACnD,IAAI8S,gBAAgB,GAAG,aAAe,YAAY;EAC9C,SAASA,gBAAgB,CAACC,WAAW,EAAEC,SAAS,EAAE;IAC9C,IAAI,CAACD,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,SAAS,GAAGA,SAAS;EAC9B;EACA/S,MAAM,CAAC8B,cAAc,CAAC+Q,gBAAgB,CAACrS,SAAS,EAAE,YAAY,EAAE;IAC5DwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAAC8O,WAAW;IAC3B,CAAC;IACD7O,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACF2O,gBAAgB,CAACrS,SAAS,CAAC2D,cAAc,GAAG,UAAUC,SAAS,EAAE;IAC7D,OAAO,IAAI,CAAC2O,SAAS,CAAC1M,GAAG,CAAC,UAAU3E,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACyC,cAAc,CAACC,SAAS,CAAC;IAAE,CAAC,CAAC;EACnF,CAAC;EACDyO,gBAAgB,CAACrS,SAAS,CAAC6D,aAAa,GAAG,UAAUC,OAAO,EAAEC,KAAK,EAAEC,YAAY,EAAEwO,MAAM,EAAE;IACvF,IAAIlS,CAAC,GAAG,CAAC;IACT,KAAK,IAAIqE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAAC2N,SAAS,EAAE5N,EAAE,GAAGC,EAAE,CAACnE,MAAM,EAAEkE,EAAE,EAAE,EAAE;MACxD,IAAIoB,QAAQ,GAAGnB,EAAE,CAACD,EAAE,CAAC;MACrBoB,QAAQ,CAAClC,aAAa,CAACC,OAAO,EAAEC,KAAK,EAAEC,YAAY,CAAC1D,CAAC,EAAE,CAAC,EAAEkS,MAAM,CAAC;IACrE;EACJ,CAAC;EACDH,gBAAgB,CAACrS,SAAS,CAACyS,cAAc,GAAG,UAAU3O,OAAO,EAAEC,KAAK,EAAEC,YAAY,EAAEwO,MAAM,EAAE;IACxF,IAAIlS,CAAC,GAAG,CAAC;IACT,KAAK,IAAIqE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAAC2N,SAAS,EAAE5N,EAAE,GAAGC,EAAE,CAACnE,MAAM,EAAEkE,EAAE,EAAE,EAAE;MACxD,IAAIoB,QAAQ,GAAGnB,EAAE,CAACD,EAAE,CAAC;MACrB,IAAIoB,QAAQ,CAAC0M,cAAc,EAAE;QACzB1M,QAAQ,CAAC0M,cAAc,CAAC3O,OAAO,EAAEC,KAAK,EAAEC,YAAY,CAAC1D,CAAC,CAAC,EAAEkS,MAAM,CAAC;MACpE;MACAlS,CAAC,IAAI,CAAC;IACV;EACJ,CAAC;EACD+R,gBAAgB,CAACrS,SAAS,CAACkF,eAAe,GAAG,UAAUlB,YAAY,EAAE;IACjE,IAAI1D,CAAC,GAAG,CAAC;IACT,KAAK,IAAIqE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAAC2N,SAAS,EAAE5N,EAAE,GAAGC,EAAE,CAACnE,MAAM,EAAEkE,EAAE,EAAE,EAAE;MACxD,IAAIoB,QAAQ,GAAGnB,EAAE,CAACD,EAAE,CAAC;MACrBoB,QAAQ,CAACb,eAAe,CAAClB,YAAY,CAAC1D,CAAC,EAAE,CAAC,CAAC;IAC/C;EACJ,CAAC;EACD,OAAO+R,gBAAgB;AAC3B,CAAC,EAAG;AACJ,IAAIK,oBAAoB,GAAG,aAAe,YAAY;EAClD,SAASA,oBAAoB,CAACC,qBAAqB,EAAE;IACjD,IAAI,CAACA,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAACC,UAAU,GAAG,MAAM;EAC5B;EACAF,oBAAoB,CAAC1S,SAAS,CAAC2D,cAAc,GAAG,UAAUC,SAAS,EAAE;IACjE,OAAOA,SAAS;EACpB,CAAC;EACD8O,oBAAoB,CAAC1S,SAAS,CAAC6D,aAAa,GAAG,UAAUC,OAAO,EAAEC,KAAK,EAAEH,SAAS,EAAE;IAChF,IAAIiP,SAAS,GAAG,IAAI,CAACF,qBAAqB,CAACG,YAAY,CAAChP,OAAO,CAAC;IAChE,IAAI+O,SAAS,EAAE;MACXjP,SAAS,CAACmD,YAAY,CAAC,YAAY,EAAE8L,SAAS,CAAC;IACnD,CAAC,MACI;MACDjP,SAAS,CAACoD,eAAe,CAAC,YAAY,CAAC;IAC3C;IACA,IAAI+L,SAAS,GAAG,IAAI,CAACJ,qBAAqB,CAACK,YAAY,IAAI,IAAI,CAACL,qBAAqB,CAACK,YAAY,CAAClP,OAAO,CAAC;IAC3G,IAAI,OAAOiP,SAAS,KAAK,QAAQ,EAAE;MAC/BnP,SAAS,CAACmD,YAAY,CAAC,YAAY,EAAE,EAAE,GAAGgM,SAAS,CAAC;IACxD,CAAC,MACI;MACDnP,SAAS,CAACoD,eAAe,CAAC,YAAY,CAAC;IAC3C;EACJ,CAAC;EACD0L,oBAAoB,CAAC1S,SAAS,CAACkF,eAAe,GAAG,UAAUlB,YAAY,EAAE;IACrE;EAAA,CACH;EACD,OAAO0O,oBAAoB;AAC/B,CAAC,EAAG;AACJ,IAAIO,mBAAmB,GAAG,aAAe,YAAY;EACjD,SAASA,mBAAmB,CAACpL,IAAI,EAAE6J,GAAG,EAAE;IACpC,IAAI,CAAC7J,IAAI,GAAGA,IAAI;IAChB,IAAI,CAAC6J,GAAG,GAAGA,GAAG;EAClB;EACAuB,mBAAmB,CAACjT,SAAS,CAACkT,eAAe,GAAG,UAAUpP,OAAO,EAAE;IAC/D,IAAIyK,SAAS,GAAG,IAAI,CAAC1G,IAAI,CAACsL,mBAAmB,EAAE;IAC/C,IAAI1N,QAAQ,GAAG8I,SAAS,CAACtJ,OAAO,CAACnB,OAAO,CAAC,GAAG,CAAC,CAAC,GAAGyK,SAAS,GAAG,CAACzK,OAAO,CAAC;IACtE,OAAO2B,QAAQ;EACnB,CAAC;EACDwN,mBAAmB,CAACjT,SAAS,CAAC2R,UAAU,GAAG,UAAU7N,OAAO,EAAE;IAC1D,OAAO,IAAI,CAAC4N,GAAG,CAACC,UAAU,CAAC7N,OAAO,CAAC;EACvC,CAAC;EACDmP,mBAAmB,CAACjT,SAAS,CAACoT,YAAY,GAAG,UAAU3N,QAAQ,EAAE4N,aAAa,EAAE;IAC5E,IAAI,IAAI,CAAC3B,GAAG,CAAC0B,YAAY,EAAE;MACvB,OAAO,IAAI,CAAC1B,GAAG,CAAC0B,YAAY,CAAC3N,QAAQ,EAAE4N,aAAa,CAAC;IACzD;IACA,OAAO5E,SAAS;EACpB,CAAC;EACDwE,mBAAmB,CAACjT,SAAS,CAAC4R,WAAW,GAAG,UAAU0B,IAAI,EAAED,aAAa,EAAE;IACvE,IAAI,IAAI,CAAC3B,GAAG,CAACE,WAAW,EAAE;MACtB,IAAI,CAACF,GAAG,CAACE,WAAW,CAAC0B,IAAI,EAAED,aAAa,CAAC;IAC7C;EACJ,CAAC;EACDJ,mBAAmB,CAACjT,SAAS,CAAC6R,UAAU,GAAG,UAAUyB,IAAI,EAAEC,aAAa,EAAEC,WAAW,EAAEH,aAAa,EAAE;IAClG,OAAO,IAAI,CAAC3B,GAAG,CAACG,UAAU,CAACyB,IAAI,EAAEC,aAAa,EAAEC,WAAW,EAAEH,aAAa,CAAC;EAC/E,CAAC;EACDJ,mBAAmB,CAACjT,SAAS,CAACyT,SAAS,GAAG,UAAUJ,aAAa,EAAE;IAC/D,IAAI,IAAI,CAAC3B,GAAG,CAAC+B,SAAS,EAAE;MACpB,IAAI,CAAC/B,GAAG,CAAC+B,SAAS,CAACJ,aAAa,CAAC;IACrC;EACJ,CAAC;EACDJ,mBAAmB,CAACjT,SAAS,CAAC8R,IAAI,GAAG,UAAUwB,IAAI,EAAEC,aAAa,EAAEC,WAAW,EAAEH,aAAa,EAAE;IAC5F,IAAI,CAAC3B,GAAG,CAACI,IAAI,CAACwB,IAAI,EAAEC,aAAa,EAAEC,WAAW,EAAEH,aAAa,CAAC;EAClE,CAAC;EACD,OAAOJ,mBAAmB;AAC9B,CAAC,EAAG;AACJ,IAAIS,IAAI,GAAG,aAAe,YAAY;EAClC,SAASA,IAAI,CAACC,IAAI,EAAE/P,SAAS,EAAEgQ,eAAe,EAAErB,SAAS,EAAEsB,QAAQ,EAAE;IACjE,IAAIA,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAGrC,cAAc;IAAE;IACtD,IAAI,CAACmC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,aAAa,GAAG,IAAInR,aAAa,EAAE;IACxC,IAAI,CAACoF,WAAW,GAAG,IAAIhG,eAAe,EAAE;IACxC,IAAI,CAACgS,UAAU,GAAG,IAAIrR,OAAO,EAAE;IAC/B,IAAI,CAACsR,SAAS,GAAG,IAAI,CAACD,UAAU,CAACvO,KAAK;IACtC,IAAI,CAACyO,SAAS,GAAG,IAAIvR,OAAO,EAAE;IAC9B,IAAI,CAACwR,0BAA0B,GAAG,KAAK;IACvC,IAAI,CAACC,aAAa,GAAG,IAAIzR,OAAO,EAAE;IAClC,IAAI,CAAC0R,YAAY,GAAG,IAAI,CAACD,aAAa,CAAC3O,KAAK;IAC5C,IAAI,CAACkE,KAAK,GAAG,IAAI7C,UAAU,EAAE;IAC7B,IAAI,CAAC0H,SAAS,GAAG,IAAIpJ,KAAK,CAAC,UAAU,CAAC;IACtClC,KAAK,CAAC4Q,QAAQ,EAAExC,aAAa,EAAE,KAAK,CAAC;IACrC,IAAIgD,aAAa,GAAG,CAAC,IAAI,CAAC3K,KAAK,CAAC3D,QAAQ,EAAE,IAAI,CAACwI,SAAS,CAACxI,QAAQ,CAAC;IAClE,IAAI,CAAC4M,qBAAqB,GAAGkB,QAAQ,CAAClB,qBAAqB;IAC3D,IAAI,IAAI,CAACA,qBAAqB,EAAE;MAC5B0B,aAAa,CAAChQ,IAAI,CAAC,IAAIqO,oBAAoB,CAAC,IAAI,CAACC,qBAAqB,CAAC,CAAC;MACxE,IAAI,IAAI,CAACA,qBAAqB,CAAC2B,2BAA2B,EAAE;QACxD,IAAI,CAAC3B,qBAAqB,CAAC2B,2BAA2B,CAAC,IAAI,CAACA,2BAA2B,EAAE,IAAI,EAAE,IAAI,CAACvM,WAAW,CAAC;MACpH;IACJ;IACAwK,SAAS,GAAGA,SAAS,CAAC1M,GAAG,CAAC,UAAU3E,CAAC,EAAE;MAAE,OAAO,IAAImR,gBAAgB,CAACnR,CAAC,CAAC0R,UAAU,EAAErR,cAAc,CAAC8S,aAAa,EAAE,CAACnT,CAAC,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;IAC1H,IAAIqT,WAAW,GAAGrU,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE2T,QAAQ,CAAC,EAAE;MAAEnC,GAAG,EAAEmC,QAAQ,CAACnC,GAAG,IAAI,IAAIuB,mBAAmB,CAAC,IAAI,EAAEY,QAAQ,CAACnC,GAAG;IAAE,CAAC,CAAC;IACxH,IAAI,CAACxK,IAAI,GAAG,IAAInE,QAAQ,CAACa,SAAS,EAAEgQ,eAAe,EAAErB,SAAS,EAAEgC,WAAW,CAAC;IAC5E,IAAI,OAAOV,QAAQ,CAACW,QAAQ,KAAK,QAAQ,EAAE;MACvC,IAAI,CAACtN,IAAI,CAACmB,OAAO,CAACtB,YAAY,CAAC,MAAM,EAAElE,gBAAgB,CAACmP,IAAI,CAAC;IACjE,CAAC,MACI;MACD,IAAI,CAAC9K,IAAI,CAACmB,OAAO,CAACtB,YAAY,CAAC,MAAM,EAAE8M,QAAQ,CAACW,QAAQ,CAAC;IAC7D;IACA,IAAIX,QAAQ,CAACY,eAAe,EAAE;MAC1B,IAAI,CAACA,eAAe,GAAGZ,QAAQ,CAACY,eAAe,CAAC,IAAI,CAACvN,IAAI,CAACwN,KAAK,CAAC;IACpE,CAAC,MACI;MACD,IAAIrF,YAAY,GAAGhN,GAAG,CAACsS,gBAAgB,CAAC,IAAI,CAACzN,IAAI,CAACmB,OAAO,CAAC;MAC1D,IAAI,CAACoM,eAAe,GAAG,IAAIrF,sBAAsB,CAACC,YAAY,EAAE,IAAI,CAACnI,IAAI,CAACwN,KAAK,CAAC;IACpF;IACA,IAAI,CAACE,UAAU,GAAG,IAAI1R,kBAAkB,CAAC,CACrC,IAAI+D,eAAe,CAAC,IAAI,CAACyC,KAAK,EAAE,IAAI,CAACxC,IAAI,EAAE2M,QAAQ,CAAC1M,gBAAgB,CAAC,EACrE,IAAIF,eAAe,CAAC,IAAI,CAACsH,SAAS,EAAE,IAAI,CAACrH,IAAI,EAAE2M,QAAQ,CAAC1M,gBAAgB,CAAC,EACzE,IAAI,CAACD,IAAI,CACZ,CAAC;IACF,IAAI,CAACa,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACjE,KAAK,CAAC;IAChC,IAAI,CAAC3B,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACY,SAAS,CAAC;IACpC,IAAI,CAACxG,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACzG,IAAI,CAAC;IAC/B,IAAI,CAACa,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACwG,aAAa,CAAC;IACxC,IAAI,CAACU,UAAU,GAAGpS,KAAK,CAACoD,GAAG,CAACjD,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE,YAAY;MAAE,OAAO,IAAI;IAAE,CAAC,CAAC;IACrG,IAAI,CAACyM,SAAS,GAAGrS,KAAK,CAACoD,GAAG,CAACjD,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,YAAY;MAAE,OAAO,IAAI;IAAE,CAAC,CAAC;IACnG,IAAI,CAACN,WAAW,CAAC4F,GAAG,CAAC,IAAI5B,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAAC7E,IAAI,CAAC,CAAC;IAC7D,IAAI,OAAO2M,QAAQ,CAACpC,eAAe,KAAK,SAAS,IAAIoC,QAAQ,CAACpC,eAAe,EAAE;MAC3E,IAAIsD,UAAU,GAAG,IAAInN,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAACV,IAAI,EAAE2M,QAAQ,CAAC;MAClE,IAAI,CAAC9L,WAAW,CAAC4F,GAAG,CAACoH,UAAU,CAAC;IACpC;IACA,IAAIlB,QAAQ,CAACzJ,+BAA+B,EAAE;MAC1C,IAAIC,QAAQ,GAAGwJ,QAAQ,CAACmB,0BAA0B,IAAIjL,iCAAiC;MACvF,IAAI,CAACkL,mBAAmB,GAAG,IAAI9K,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAACjD,IAAI,EAAE2M,QAAQ,CAACzJ,+BAA+B,EAAEC,QAAQ,CAAC;MACvH,IAAI,CAACtC,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACsH,mBAAmB,CAAC;IAClD;IACA,IAAI,CAAClN,WAAW,CAAC4F,GAAG,CAAC,IAAI,CAACuH,qBAAqB,CAACrB,QAAQ,CAAC,CAAC;IAC1D,IAAI,CAACsB,aAAa,CAAC,IAAI,CAACC,cAAc,EAAE,IAAI,EAAE,IAAI,CAACrN,WAAW,CAAC;IAC/D,IAAI,CAACsN,iBAAiB,CAAC,IAAI,CAACC,kBAAkB,EAAE,IAAI,EAAE,IAAI,CAACvN,WAAW,CAAC;IACvE,IAAI8L,QAAQ,CAAChB,SAAS,EAAE;MACpB,IAAI,CAAC3L,IAAI,CAACmB,OAAO,CAACtB,YAAY,CAAC,YAAY,EAAElF,QAAQ,CAAC,WAAW,EAAE,2CAA2C,EAAEgS,QAAQ,CAAChB,SAAS,CAAC,CAAC;IACxI;EACJ;EACArT,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,eAAe,EAAE;IACnDwD,GAAG,EAAE,eAAY;MACb,IAAI4D,KAAK,GAAG,IAAI;MAChB,OAAO3E,KAAK,CAACoD,GAAG,CAAC,IAAI,CAACiO,aAAa,CAACyB,SAAS,CAAC,IAAI,CAAC7L,KAAK,CAACnE,QAAQ,CAAC,EAAE,UAAUkC,CAAC,EAAE;QAAE,OAAOL,KAAK,CAACoO,WAAW,CAAC/N,CAAC,CAAC;MAAE,CAAC,CAAC;IACtH,CAAC;IACDhE,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,mBAAmB,EAAE;IACvDwD,GAAG,EAAE,eAAY;MACb,IAAI4D,KAAK,GAAG,IAAI;MAChB,OAAO3E,KAAK,CAACoD,GAAG,CAAC,IAAI,CAACiO,aAAa,CAACyB,SAAS,CAAC,IAAI,CAAChH,SAAS,CAAChJ,QAAQ,CAAC,EAAE,UAAUkC,CAAC,EAAE;QAAE,OAAOL,KAAK,CAACoO,WAAW,CAAC/N,CAAC,CAAC;MAAE,CAAC,CAAC;IAC1H,CAAC;IACDhE,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,OAAO,EAAE;IAC3CwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAACwN,KAAK;IAAE,CAAC;IAC5CjR,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,cAAc,EAAE;IAClDwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAAC4G,YAAY;IAAE,CAAC;IACnDrK,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,iBAAiB,EAAE;IACrDwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAACsG,eAAe;IAAE,CAAC;IACtD/J,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,oBAAoB,EAAE;IACxDwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAAC8G,kBAAkB;IAAE,CAAC;IACzDvK,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,aAAa,EAAE;IACjDwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAACoG,WAAW;IAAE,CAAC;IAClD7J,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,cAAc,EAAE;IAClDwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAACwG,YAAY;IAAE,CAAC;IACnDjK,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,OAAO,EAAE;IAC3CwD,GAAG,EAAE,eAAY;MAAE,OAAO,IAAI,CAAC0D,IAAI,CAAC+G,KAAK;IAAE,CAAC;IAC5CxK,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,eAAe,EAAE;IACnDwD,GAAG,EAAE,eAAY;MACb,IAAI4D,KAAK,GAAG,IAAI;MAChB,IAAIqO,WAAW,GAAGhT,KAAK,CAAC2F,KAAK,CAACxF,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,SAAS,CAAC,CAAC,CAChExC,GAAG,CAAC,UAAU4B,CAAC,EAAE;QAAE,OAAO,IAAIjF,qBAAqB,CAACiF,CAAC,CAAC;MAAE,CAAC,CAAC,CAC1D7B,MAAM,CAAC,UAAU6B,CAAC,EAAE;QAAE,OAAOL,KAAK,CAAC8M,0BAA0B,GAAGzM,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC,qBAAsBb,CAAC,CAACuE,QAAQ,IAAIvE,CAAC,CAACa,OAAO,KAAK,EAAE,CAAC,SAAU;MAAE,CAAC,CAAC,CACpJ1C,MAAM,CAAC,UAAU6B,CAAC,EAAE;QAAEA,CAAC,CAACyB,cAAc,EAAE;QAAEzB,CAAC,CAAC0B,eAAe,EAAE;QAAE,OAAO,KAAK;MAAE,CAAC,CAAC,CAC/E3D,KAAK;MACV,IAAIkQ,SAAS,GAAGjT,KAAK,CAAC2F,KAAK,CAACxF,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,OAAO,CAAC,CAAC,CAC5DzC,MAAM,CAAC,YAAY;QACpB,IAAIsO,0BAA0B,GAAG9M,KAAK,CAAC8M,0BAA0B;QACjE9M,KAAK,CAAC8M,0BAA0B,GAAG,KAAK;QACxC,OAAOA,0BAA0B;MACrC,CAAC,CAAC,CACGtO,MAAM,CAAC,YAAY;QAAE,OAAOwB,KAAK,CAACiC,QAAQ,EAAE,CAAC5I,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC2G,KAAK,CAACF,IAAI,CAACiF,UAAU,CAAC/E,KAAK,CAACiC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,CAC3GxD,GAAG,CAAC,UAAUQ,YAAY,EAAE;QAC7B,IAAItC,KAAK,GAAGqD,KAAK,CAACiC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC/B,IAAIvF,OAAO,GAAGsD,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACC,KAAK,CAAC;QACvC,IAAI4R,MAAM,GAAGvO,KAAK,CAACF,IAAI,CAACiF,UAAU,CAACpI,KAAK,CAAC;QACzC,OAAO;UAAEA,KAAK,EAAEA,KAAK;UAAED,OAAO,EAAEA,OAAO;UAAE6R,MAAM,EAAEA,MAAM;UAAEtP,YAAY,EAAEA;QAAa,CAAC;MACzF,CAAC,CAAC,CACGb,KAAK;MACV,IAAIoQ,SAAS,GAAGnT,KAAK,CAAC2F,KAAK,CAAC,IAAI,CAAClB,IAAI,CAACqG,aAAa,CAAC,CAC/C3H,MAAM,CAAC,YAAY;QAAE,OAAO,CAACwB,KAAK,CAAC8M,0BAA0B;MAAE,CAAC,CAAC,CACjErO,GAAG,CAAC,UAAUjB,EAAE,EAAE;QACnB,IAAId,OAAO,GAAGc,EAAE,CAACd,OAAO;UAAEC,KAAK,GAAGa,EAAE,CAACb,KAAK;UAAEsC,YAAY,GAAGzB,EAAE,CAACyB,YAAY;QAC1E,OAAQ;UAAEvC,OAAO,EAAEA,OAAO;UAAEC,KAAK,EAAEA,KAAK;UAAE4R,MAAM,EAAE;YAAEE,CAAC,EAAExP,YAAY,CAACyP,OAAO,GAAG,CAAC;YAAEC,CAAC,EAAE1P,YAAY,CAAC2P;UAAQ,CAAC;UAAE3P,YAAY,EAAEA;QAAa,CAAC;MAC5I,CAAC,CAAC,CACGb,KAAK;MACV,OAAO/C,KAAK,CAAC6I,GAAG,CAACmK,WAAW,EAAEC,SAAS,EAAEE,SAAS,CAAC;IACvD,CAAC;IACDnS,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,WAAW,EAAE;IAC/CwD,GAAG,EAAE,eAAY;MAAE,OAAOZ,QAAQ,CAAC,IAAI,CAACsE,IAAI,CAACmB,OAAO,EAAE,SAAS,CAAC;IAAE,CAAC;IACnE5E,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFgQ,IAAI,CAAC1T,SAAS,CAACkV,qBAAqB,GAAG,UAAUpN,OAAO,EAAE;IACtD,OAAO,IAAIqF,eAAe,CAAC,IAAI,CAAC;EACpC,CAAC;EACDuG,IAAI,CAAC1T,SAAS,CAAC4K,aAAa,GAAG,UAAUqL,aAAa,EAAE;IACpD,IAAIA,aAAa,KAAK,KAAK,CAAC,EAAE;MAAEA,aAAa,GAAG,CAAC,CAAC;IAAE;IACpD,IAAI,CAACpC,QAAQ,GAAG3T,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC2T,QAAQ,CAAC,EAAEoC,aAAa,CAAC;IACpE,IAAI,IAAI,CAAChB,mBAAmB,EAAE;MAC1B,IAAI,CAACA,mBAAmB,CAACrK,aAAa,CAAC,IAAI,CAACiJ,QAAQ,CAAC;IACzD;EACJ,CAAC;EACDrU,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,SAAS,EAAE;IAC7CwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAACqQ,QAAQ;IACxB,CAAC;IACDpQ,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFgQ,IAAI,CAAC1T,SAAS,CAACuE,MAAM,GAAG,UAAUC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,EAAE;IAC5D,IAAI2B,KAAK,GAAG,IAAI;IAChB,IAAI3B,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAG,EAAE;IAAE;IAC1C,IAAIjB,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAG,IAAI,CAAC0C,IAAI,CAACzG,MAAM,EAAE;MACvC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,uBAAuB,GAAGnP,KAAK,CAAC;IACnE;IACA,IAAIC,WAAW,GAAG,CAAC,EAAE;MACjB,MAAM,IAAI3B,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,wBAAwB,GAAGlP,WAAW,CAAC;IAC1E;IACA,IAAIA,WAAW,KAAK,CAAC,IAAIgB,QAAQ,CAAChF,MAAM,KAAK,CAAC,EAAE;MAC5C;IACJ;IACA,IAAI,CAACqT,aAAa,CAACoC,YAAY,CAAC,YAAY;MAAE,OAAO9O,KAAK,CAACwN,UAAU,CAACrQ,MAAM,CAACC,KAAK,EAAEC,WAAW,EAAEgB,QAAQ,CAAC;IAAE,CAAC,CAAC;EAClH,CAAC;EACDiO,IAAI,CAAC1T,SAAS,CAACmW,QAAQ,GAAG,YAAY;IAClC,IAAI,CAACjP,IAAI,CAACiP,QAAQ,EAAE;EACxB,CAAC;EACDzC,IAAI,CAAC1T,SAAS,CAAC8D,OAAO,GAAG,UAAUC,KAAK,EAAE;IACtC,OAAO,IAAI,CAACmD,IAAI,CAACpD,OAAO,CAACC,KAAK,CAAC;EACnC,CAAC;EACDvE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,QAAQ,EAAE;IAC5CwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAAC0D,IAAI,CAACzG,MAAM;IAC3B,CAAC;IACDgD,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,eAAe,EAAE;IACnDwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAAC0D,IAAI,CAACkP,aAAa;IAClC,CAAC;IACD3S,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFlE,MAAM,CAAC8B,cAAc,CAACoS,IAAI,CAAC1T,SAAS,EAAE,WAAW,EAAE;IAC/CwD,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAAC0D,IAAI,CAACmP,YAAY,EAAE;IACnC,CAAC;IACDjQ,GAAG,EAAE,aAAUkQ,SAAS,EAAE;MACtB,IAAI,CAACpP,IAAI,CAACqP,YAAY,CAACD,SAAS,CAAC;IACrC,CAAC;IACD7S,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFgQ,IAAI,CAAC1T,SAAS,CAACqO,QAAQ,GAAG,YAAY;IAClC,IAAI,CAACnH,IAAI,CAACmB,OAAO,CAACqB,KAAK,EAAE;EAC7B,CAAC;EACDgK,IAAI,CAAC1T,SAAS,CAACwW,MAAM,GAAG,UAAUhE,MAAM,EAAEiE,KAAK,EAAE;IAC7C,IAAI,CAACvP,IAAI,CAACsP,MAAM,CAAChE,MAAM,EAAEiE,KAAK,CAAC;EACnC,CAAC;EACD/C,IAAI,CAAC1T,SAAS,CAACoJ,YAAY,GAAG,UAAUrE,OAAO,EAAEsB,YAAY,EAAE;IAC3D,KAAK,IAAI1B,EAAE,GAAG,CAAC,EAAE+R,SAAS,GAAG3R,OAAO,EAAEJ,EAAE,GAAG+R,SAAS,CAACjW,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIZ,KAAK,GAAG2S,SAAS,CAAC/R,EAAE,CAAC;MACzB,IAAIZ,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;QACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;MAC5D;IACJ;IACA,IAAI,CAACwK,SAAS,CAACnI,GAAG,CAACrB,OAAO,EAAEsB,YAAY,CAAC;EAC7C,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAACwO,YAAY,GAAG,YAAY;IACtC,OAAO,IAAI,CAACD,SAAS,CAAC/K,GAAG,EAAE;EAC/B,CAAC;EACDkQ,IAAI,CAAC1T,SAAS,CAACmT,mBAAmB,GAAG,YAAY;IAC7C,IAAI/L,KAAK,GAAG,IAAI;IAChB,OAAO,IAAI,CAACoH,YAAY,EAAE,CAAC3I,GAAG,CAAC,UAAUvF,CAAC,EAAE;MAAE,OAAO8G,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC;IAAE,CAAC,CAAC;EAClF,CAAC;EACDoT,IAAI,CAAC1T,SAAS,CAAC8L,QAAQ,GAAG,UAAU/G,OAAO,EAAEsB,YAAY,EAAE;IACvD,KAAK,IAAI1B,EAAE,GAAG,CAAC,EAAEgS,SAAS,GAAG5R,OAAO,EAAEJ,EAAE,GAAGgS,SAAS,CAAClW,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIZ,KAAK,GAAG4S,SAAS,CAAChS,EAAE,CAAC;MACzB,IAAIZ,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;QACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;MAC5D;IACJ;IACA,IAAI,CAAC2F,KAAK,CAACtD,GAAG,CAACrB,OAAO,EAAEsB,YAAY,CAAC;EACzC,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAAC2J,SAAS,GAAG,UAAUpJ,CAAC,EAAEqW,IAAI,EAAEvQ,YAAY,EAAET,MAAM,EAAE;IAChE,IAAIrF,CAAC,KAAK,KAAK,CAAC,EAAE;MAAEA,CAAC,GAAG,CAAC;IAAE;IAC3B,IAAIqW,IAAI,KAAK,KAAK,CAAC,EAAE;MAAEA,IAAI,GAAG,KAAK;IAAE;IACrC,IAAI,IAAI,CAACnW,MAAM,KAAK,CAAC,EAAE;MACnB;IACJ;IACA,IAAIiJ,KAAK,GAAG,IAAI,CAACA,KAAK,CAAClG,GAAG,EAAE;IAC5B,IAAIO,KAAK,GAAG,IAAI,CAAC8S,aAAa,CAACnN,KAAK,CAACjJ,MAAM,GAAG,CAAC,GAAGiJ,KAAK,CAAC,CAAC,CAAC,GAAGnJ,CAAC,GAAG,CAAC,EAAEqW,IAAI,EAAEhR,MAAM,CAAC;IACjF,IAAI7B,KAAK,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAAC+H,QAAQ,CAAC,CAAC/H,KAAK,CAAC,EAAEsC,YAAY,CAAC;IACxC;EACJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAACwJ,aAAa,GAAG,UAAUjJ,CAAC,EAAEqW,IAAI,EAAEvQ,YAAY,EAAET,MAAM,EAAE;IACpE,IAAIrF,CAAC,KAAK,KAAK,CAAC,EAAE;MAAEA,CAAC,GAAG,CAAC;IAAE;IAC3B,IAAIqW,IAAI,KAAK,KAAK,CAAC,EAAE;MAAEA,IAAI,GAAG,KAAK;IAAE;IACrC,IAAI,IAAI,CAACnW,MAAM,KAAK,CAAC,EAAE;MACnB;IACJ;IACA,IAAIiJ,KAAK,GAAG,IAAI,CAACA,KAAK,CAAClG,GAAG,EAAE;IAC5B,IAAIO,KAAK,GAAG,IAAI,CAAC+S,iBAAiB,CAACpN,KAAK,CAACjJ,MAAM,GAAG,CAAC,GAAGiJ,KAAK,CAAC,CAAC,CAAC,GAAGnJ,CAAC,GAAG,CAAC,EAAEqW,IAAI,EAAEhR,MAAM,CAAC;IACrF,IAAI7B,KAAK,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAAC+H,QAAQ,CAAC,CAAC/H,KAAK,CAAC,EAAEsC,YAAY,CAAC;IACxC;EACJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAAC6J,aAAa,GAAG,UAAUxD,YAAY,EAAET,MAAM,EAAE;IAC3D,IAAIwB,KAAK,GAAG,IAAI;IAChB,IAAI2P,aAAa,GAAG,IAAI,CAAC7P,IAAI,CAAC8P,OAAO,CAAC,IAAI,CAAC9P,IAAI,CAACmP,YAAY,EAAE,GAAG,IAAI,CAACnP,IAAI,CAAC+P,YAAY,CAAC;IACxFF,aAAa,GAAGA,aAAa,KAAK,CAAC,GAAG,CAAC,GAAGA,aAAa,GAAG,CAAC;IAC3D,IAAIG,eAAe,GAAG,IAAI,CAAChQ,IAAI,CAACpD,OAAO,CAACiT,aAAa,CAAC;IACtD,IAAII,uBAAuB,GAAG,IAAI,CAACC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC1D,IAAID,uBAAuB,KAAKD,eAAe,EAAE;MAC7C,IAAIG,iBAAiB,GAAG,IAAI,CAACP,iBAAiB,CAACC,aAAa,EAAE,KAAK,EAAEnR,MAAM,CAAC;MAC5E,IAAIyR,iBAAiB,GAAG,CAAC,CAAC,IAAIF,uBAAuB,KAAK,IAAI,CAACjQ,IAAI,CAACpD,OAAO,CAACuT,iBAAiB,CAAC,EAAE;QAC5F,IAAI,CAACvL,QAAQ,CAAC,CAACuL,iBAAiB,CAAC,EAAEhR,YAAY,CAAC;MACpD,CAAC,MACI;QACD,IAAI,CAACyF,QAAQ,CAAC,CAACiL,aAAa,CAAC,EAAE1Q,YAAY,CAAC;MAChD;IACJ,CAAC,MACI;MACD,IAAIiR,iBAAiB,GAAG,IAAI,CAACpQ,IAAI,CAACmP,YAAY,EAAE;MAChD,IAAI,CAACnP,IAAI,CAACqP,YAAY,CAACe,iBAAiB,GAAG,IAAI,CAACpQ,IAAI,CAAC+P,YAAY,GAAG,IAAI,CAAC/P,IAAI,CAACqQ,aAAa,CAACR,aAAa,CAAC,CAAC;MAC3G,IAAI,IAAI,CAAC7P,IAAI,CAACmP,YAAY,EAAE,KAAKiB,iBAAiB,EAAE;QAChD;QACAE,UAAU,CAAC,YAAY;UAAE,OAAOpQ,KAAK,CAACyC,aAAa,CAACxD,YAAY,EAAET,MAAM,CAAC;QAAE,CAAC,EAAE,CAAC,CAAC;MACpF;IACJ;EACJ,CAAC;EACD8N,IAAI,CAAC1T,SAAS,CAAC4J,iBAAiB,GAAG,UAAUvD,YAAY,EAAET,MAAM,EAAE;IAC/D,IAAIwB,KAAK,GAAG,IAAI;IAChB,IAAIqQ,cAAc;IAClB,IAAInB,SAAS,GAAG,IAAI,CAACpP,IAAI,CAACmP,YAAY,EAAE;IACxC,IAAIC,SAAS,KAAK,CAAC,EAAE;MACjBmB,cAAc,GAAG,IAAI,CAACvQ,IAAI,CAAC8P,OAAO,CAACV,SAAS,CAAC;IACjD,CAAC,MACI;MACDmB,cAAc,GAAG,IAAI,CAACvQ,IAAI,CAACwQ,UAAU,CAACpB,SAAS,GAAG,CAAC,CAAC;IACxD;IACA,IAAIqB,gBAAgB,GAAG,IAAI,CAACzQ,IAAI,CAACpD,OAAO,CAAC2T,cAAc,CAAC;IACxD,IAAIN,uBAAuB,GAAG,IAAI,CAACC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC1D,IAAID,uBAAuB,KAAKQ,gBAAgB,EAAE;MAC9C,IAAIC,kBAAkB,GAAG,IAAI,CAACf,aAAa,CAACY,cAAc,EAAE,KAAK,EAAE7R,MAAM,CAAC;MAC1E,IAAIgS,kBAAkB,GAAG,CAAC,CAAC,IAAIT,uBAAuB,KAAK,IAAI,CAACjQ,IAAI,CAACpD,OAAO,CAAC8T,kBAAkB,CAAC,EAAE;QAC9F,IAAI,CAAC9L,QAAQ,CAAC,CAAC8L,kBAAkB,CAAC,EAAEvR,YAAY,CAAC;MACrD,CAAC,MACI;QACD,IAAI,CAACyF,QAAQ,CAAC,CAAC2L,cAAc,CAAC,EAAEpR,YAAY,CAAC;MACjD;IACJ,CAAC,MACI;MACD,IAAIiR,iBAAiB,GAAGhB,SAAS;MACjC,IAAI,CAACpP,IAAI,CAACqP,YAAY,CAACD,SAAS,GAAG,IAAI,CAACpP,IAAI,CAAC+P,YAAY,CAAC;MAC1D,IAAI,IAAI,CAAC/P,IAAI,CAACmP,YAAY,EAAE,KAAKiB,iBAAiB,EAAE;QAChD;QACAE,UAAU,CAAC,YAAY;UAAE,OAAOpQ,KAAK,CAACwC,iBAAiB,CAACvD,YAAY,EAAET,MAAM,CAAC;QAAE,CAAC,EAAE,CAAC,CAAC;MACxF;IACJ;EACJ,CAAC;EACD8N,IAAI,CAAC1T,SAAS,CAAC6X,SAAS,GAAG,UAAUxR,YAAY,EAAET,MAAM,EAAE;IACvD,IAAI,IAAI,CAACnF,MAAM,KAAK,CAAC,EAAE;MACnB;IACJ;IACA,IAAIsD,KAAK,GAAG,IAAI,CAAC+S,iBAAiB,CAAC,IAAI,CAACrW,MAAM,GAAG,CAAC,EAAE,KAAK,EAAEmF,MAAM,CAAC;IAClE,IAAI7B,KAAK,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAAC+H,QAAQ,CAAC,CAAC/H,KAAK,CAAC,EAAEsC,YAAY,CAAC;IACxC;EACJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAAC8X,UAAU,GAAG,UAAUzR,YAAY,EAAET,MAAM,EAAE;IACxD,IAAI,IAAI,CAACnF,MAAM,KAAK,CAAC,EAAE;MACnB;IACJ;IACA,IAAIsD,KAAK,GAAG,IAAI,CAAC8S,aAAa,CAAC,CAAC,EAAE,KAAK,EAAEjR,MAAM,CAAC;IAChD,IAAI7B,KAAK,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAAC+H,QAAQ,CAAC,CAAC/H,KAAK,CAAC,EAAEsC,YAAY,CAAC;IACxC;EACJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAAC6W,aAAa,GAAG,UAAU9S,KAAK,EAAE6S,IAAI,EAAEhR,MAAM,EAAE;IAC1D,IAAIgR,IAAI,KAAK,KAAK,CAAC,EAAE;MAAEA,IAAI,GAAG,KAAK;IAAE;IACrC,KAAK,IAAItW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACG,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClC,IAAIyD,KAAK,IAAI,IAAI,CAACtD,MAAM,IAAI,CAACmW,IAAI,EAAE;QAC/B,OAAO,CAAC,CAAC;MACb;MACA7S,KAAK,GAAGA,KAAK,GAAG,IAAI,CAACtD,MAAM;MAC3B,IAAI,CAACmF,MAAM,IAAIA,MAAM,CAAC,IAAI,CAAC9B,OAAO,CAACC,KAAK,CAAC,CAAC,EAAE;QACxC,OAAOA,KAAK;MAChB;MACAA,KAAK,EAAE;IACX;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACD2P,IAAI,CAAC1T,SAAS,CAAC8W,iBAAiB,GAAG,UAAU/S,KAAK,EAAE6S,IAAI,EAAEhR,MAAM,EAAE;IAC9D,IAAIgR,IAAI,KAAK,KAAK,CAAC,EAAE;MAAEA,IAAI,GAAG,KAAK;IAAE;IACrC,KAAK,IAAItW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACG,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClC,IAAIyD,KAAK,GAAG,CAAC,IAAI,CAAC6S,IAAI,EAAE;QACpB,OAAO,CAAC,CAAC;MACb;MACA7S,KAAK,GAAG,CAAC,IAAI,CAACtD,MAAM,GAAIsD,KAAK,GAAG,IAAI,CAACtD,MAAO,IAAI,IAAI,CAACA,MAAM;MAC3D,IAAI,CAACmF,MAAM,IAAIA,MAAM,CAAC,IAAI,CAAC9B,OAAO,CAACC,KAAK,CAAC,CAAC,EAAE;QACxC,OAAOA,KAAK;MAChB;MACAA,KAAK,EAAE;IACX;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACD2P,IAAI,CAAC1T,SAAS,CAACqJ,QAAQ,GAAG,YAAY;IAClC,OAAO,IAAI,CAACK,KAAK,CAAClG,GAAG,EAAE;EAC3B,CAAC;EACDkQ,IAAI,CAAC1T,SAAS,CAACoX,kBAAkB,GAAG,YAAY;IAC5C,IAAIhQ,KAAK,GAAG,IAAI;IAChB,OAAO,IAAI,CAACiC,QAAQ,EAAE,CAACxD,GAAG,CAAC,UAAUvF,CAAC,EAAE;MAAE,OAAO8G,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC;IAAE,CAAC,CAAC;EAC9E,CAAC;EACDoT,IAAI,CAAC1T,SAAS,CAACyJ,MAAM,GAAG,UAAU1F,KAAK,EAAEgU,WAAW,EAAE;IAClD,IAAIhU,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;MACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;IAC5D;IACA,IAAIuS,SAAS,GAAG,IAAI,CAACpP,IAAI,CAACmP,YAAY,EAAE;IACxC,IAAI2B,UAAU,GAAG,IAAI,CAAC9Q,IAAI,CAAC8Q,UAAU,CAACjU,KAAK,CAAC;IAC5C,IAAIwT,aAAa,GAAG,IAAI,CAACrQ,IAAI,CAACqQ,aAAa,CAACxT,KAAK,CAAC;IAClD,IAAI/B,QAAQ,CAAC+V,WAAW,CAAC,EAAE;MACvB;MACA,IAAIE,CAAC,GAAGV,aAAa,GAAG,IAAI,CAACrQ,IAAI,CAAC+P,YAAY;MAC9C,IAAI,CAAC/P,IAAI,CAACqP,YAAY,CAAC0B,CAAC,GAAG9U,KAAK,CAAC4U,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,GAAGC,UAAU,CAAC;IACrE,CAAC,MACI;MACD,IAAIE,cAAc,GAAGF,UAAU,GAAGT,aAAa;MAC/C,IAAIY,aAAa,GAAG7B,SAAS,GAAG,IAAI,CAACpP,IAAI,CAAC+P,YAAY;MACtD,IAAIe,UAAU,GAAG1B,SAAS,IAAI4B,cAAc,IAAIC,aAAa,EAAE;QAC3D;MAAA,CACH,MACI,IAAIH,UAAU,GAAG1B,SAAS,EAAE;QAC7B,IAAI,CAACpP,IAAI,CAACqP,YAAY,CAACyB,UAAU,CAAC;MACtC,CAAC,MACI,IAAIE,cAAc,IAAIC,aAAa,EAAE;QACtC,IAAI,CAACjR,IAAI,CAACqP,YAAY,CAAC2B,cAAc,GAAG,IAAI,CAAChR,IAAI,CAAC+P,YAAY,CAAC;MACnE;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIvD,IAAI,CAAC1T,SAAS,CAACoY,cAAc,GAAG,UAAUrU,KAAK,EAAE;IAC7C,IAAIA,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;MACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;IAC5D;IACA,IAAIuS,SAAS,GAAG,IAAI,CAACpP,IAAI,CAACmP,YAAY,EAAE;IACxC,IAAI2B,UAAU,GAAG,IAAI,CAAC9Q,IAAI,CAAC8Q,UAAU,CAACjU,KAAK,CAAC;IAC5C,IAAIwT,aAAa,GAAG,IAAI,CAACrQ,IAAI,CAACqQ,aAAa,CAACxT,KAAK,CAAC;IAClD,IAAIiU,UAAU,GAAG1B,SAAS,IAAI0B,UAAU,GAAGT,aAAa,GAAGjB,SAAS,GAAG,IAAI,CAACpP,IAAI,CAAC+P,YAAY,EAAE;MAC3F,OAAO,IAAI;IACf;IACA;IACA,IAAIgB,CAAC,GAAGV,aAAa,GAAG,IAAI,CAACrQ,IAAI,CAAC+P,YAAY;IAC9C,OAAOpI,IAAI,CAACwJ,GAAG,CAAC,CAAC/B,SAAS,GAAG0B,UAAU,IAAIC,CAAC,CAAC;EACjD,CAAC;EACDvE,IAAI,CAAC1T,SAAS,CAAC6N,cAAc,GAAG,YAAY;IACxC,OAAO,IAAI,CAAC3G,IAAI,CAACmB,OAAO;EAC5B,CAAC;EACDqL,IAAI,CAAC1T,SAAS,CAACuJ,IAAI,GAAG,UAAUxE,OAAO,EAAEsB,YAAY,EAAE;IACnD,IAAIe,KAAK,GAAG,IAAI;IAChB,KAAK,IAAIzC,EAAE,GAAG,CAAC,EAAE2T,SAAS,GAAGvT,OAAO,EAAEJ,EAAE,GAAG2T,SAAS,CAAC7X,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIZ,KAAK,GAAGuU,SAAS,CAAC3T,EAAE,CAAC;MACzB,IAAIZ,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;QACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;MAC5D;IACJ;IACA,IAAI,CAACgQ,UAAU,CAACnN,IAAI,CAAC;MAAE7B,OAAO,EAAEA,OAAO;MAAEU,QAAQ,EAAEV,OAAO,CAACc,GAAG,CAAC,UAAUvF,CAAC,EAAE;QAAE,OAAO8G,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC;MAAE,CAAC,CAAC;MAAE+F,YAAY,EAAEA;IAAa,CAAC,CAAC;EACjJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAAC2O,GAAG,GAAG,UAAU5J,OAAO,EAAEsB,YAAY,EAAE;IAClD,IAAIe,KAAK,GAAG,IAAI;IAChB,KAAK,IAAIzC,EAAE,GAAG,CAAC,EAAE4T,SAAS,GAAGxT,OAAO,EAAEJ,EAAE,GAAG4T,SAAS,CAAC9X,MAAM,EAAEkE,EAAE,EAAE,EAAE;MAC/D,IAAIZ,KAAK,GAAGwU,SAAS,CAAC5T,EAAE,CAAC;MACzB,IAAIZ,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACtD,MAAM,EAAE;QACnC,MAAM,IAAIqC,SAAS,CAAC,IAAI,CAAC6Q,IAAI,EAAE,gBAAgB,GAAG5P,KAAK,CAAC;MAC5D;IACJ;IACA,IAAI,CAACkQ,SAAS,CAACrN,IAAI,CAAC;MAAE7B,OAAO,EAAEA,OAAO;MAAEU,QAAQ,EAAEV,OAAO,CAACc,GAAG,CAAC,UAAUvF,CAAC,EAAE;QAAE,OAAO8G,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC;MAAE,CAAC,CAAC;MAAE+F,YAAY,EAAEA;IAAa,CAAC,CAAC;EAChJ,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAACwM,KAAK,GAAG,UAAU+C,MAAM,EAAE;IACrC,IAAI,CAACkF,eAAe,CAACjI,KAAK,CAAC+C,MAAM,CAAC;EACtC,CAAC;EACDmE,IAAI,CAAC1T,SAAS,CAACwV,WAAW,GAAG,UAAU5Q,EAAE,EAAE;IACvC,IAAIwC,KAAK,GAAG,IAAI;IAChB,IAAIrC,OAAO,GAAGH,EAAE,CAACG,OAAO;MAAEsB,YAAY,GAAGzB,EAAE,CAACyB,YAAY;IACxD,OAAO;MAAEtB,OAAO,EAAEA,OAAO;MAAEU,QAAQ,EAAEV,OAAO,CAACc,GAAG,CAAC,UAAUvF,CAAC,EAAE;QAAE,OAAO8G,KAAK,CAACF,IAAI,CAACpD,OAAO,CAACxD,CAAC,CAAC;MAAE,CAAC,CAAC;MAAE+F,YAAY,EAAEA;IAAa,CAAC;EAClI,CAAC;EACDqN,IAAI,CAAC1T,SAAS,CAACoV,cAAc,GAAG,YAAY;IACxC,IAAI1L,KAAK,GAAG,IAAI,CAACA,KAAK,CAAClG,GAAG,EAAE;IAC5BnB,GAAG,CAAC4D,WAAW,CAAC,IAAI,CAACiB,IAAI,CAACmB,OAAO,EAAE,iBAAiB,EAAEqB,KAAK,CAACjJ,MAAM,GAAG,CAAC,CAAC;IACvE,IAAI,CAAC6T,2BAA2B,EAAE;EACtC,CAAC;EACDZ,IAAI,CAAC1T,SAAS,CAACsU,2BAA2B,GAAG,YAAY;IACrD,IAAI1P,EAAE;IACN,IAAI8E,KAAK,GAAG,IAAI,CAACA,KAAK,CAAClG,GAAG,EAAE;IAC5B,IAAIkG,KAAK,CAACjJ,MAAM,GAAG,CAAC,EAAE;MAClB,IAAI+X,EAAE,GAAG,KAAK,CAAC;MACf,IAAI,CAAC5T,EAAE,GAAG,IAAI,CAAC+N,qBAAqB,MAAM,IAAI,IAAI/N,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC6T,qBAAqB,EAAE;QACjGD,EAAE,GAAG,IAAI,CAAC7F,qBAAqB,CAAC8F,qBAAqB,CAAC,IAAI,CAACvR,IAAI,CAACpD,OAAO,CAAC4F,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MACtF;MACA,IAAI,CAACxC,IAAI,CAACmB,OAAO,CAACtB,YAAY,CAAC,uBAAuB,EAAEyR,EAAE,IAAI,IAAI,CAACtR,IAAI,CAACwR,eAAe,CAAChP,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACtG,CAAC,MACI;MACD,IAAI,CAACxC,IAAI,CAACmB,OAAO,CAACrB,eAAe,CAAC,uBAAuB,CAAC;IAC9D;EACJ,CAAC;EACD0M,IAAI,CAAC1T,SAAS,CAACsV,kBAAkB,GAAG,YAAY;IAC5C,IAAI/G,SAAS,GAAG,IAAI,CAACA,SAAS,CAAC/K,GAAG,EAAE;IACpCnB,GAAG,CAAC4D,WAAW,CAAC,IAAI,CAACiB,IAAI,CAACmB,OAAO,EAAE,gBAAgB,EAAEkG,SAAS,CAAC9N,MAAM,KAAK,CAAC,CAAC;IAC5E4B,GAAG,CAAC4D,WAAW,CAAC,IAAI,CAACiB,IAAI,CAACmB,OAAO,EAAE,kBAAkB,EAAEkG,SAAS,CAAC9N,MAAM,KAAK,CAAC,CAAC;IAC9E4B,GAAG,CAAC4D,WAAW,CAAC,IAAI,CAACiB,IAAI,CAACmB,OAAO,EAAE,oBAAoB,EAAEkG,SAAS,CAAC9N,MAAM,GAAG,CAAC,CAAC;EAClF,CAAC;EACDiT,IAAI,CAAC1T,SAAS,CAAC8B,OAAO,GAAG,YAAY;IACjC,IAAI,CAACqS,aAAa,CAACvN,IAAI,EAAE;IACzB,IAAI,CAACmB,WAAW,CAACjG,OAAO,EAAE;IAC1B,IAAI,CAACiS,UAAU,CAACjS,OAAO,EAAE;IACzB,IAAI,CAACmS,SAAS,CAACnS,OAAO,EAAE;IACxB,IAAI,CAACqS,aAAa,CAACrS,OAAO,EAAE;EAChC,CAAC;EACDlB,UAAU,CAAC,CACPwB,OAAO,CACV,EAAEsR,IAAI,CAAC1T,SAAS,EAAE,eAAe,EAAE,IAAI,CAAC;EACzCY,UAAU,CAAC,CACPwB,OAAO,CACV,EAAEsR,IAAI,CAAC1T,SAAS,EAAE,mBAAmB,EAAE,IAAI,CAAC;EAC7CY,UAAU,CAAC,CACPwB,OAAO,CACV,EAAEsR,IAAI,CAAC1T,SAAS,EAAE,eAAe,EAAE,IAAI,CAAC;EACzC,OAAO0T,IAAI;AACf,CAAC,EAAG;AACJ,SAASA,IAAI"},"metadata":{},"sourceType":"module"}