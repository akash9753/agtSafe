{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as Platform from '../../../common/platform.js';\nimport * as Browser from '../../../browser/browser.js';\nimport * as Lifecycle from '../../../common/lifecycle.js';\nimport * as DOM from '../../../browser/dom.js';\nimport * as Diff from '../../../common/diff/diff.js';\nimport * as Touch from '../../../browser/touch.js';\nimport * as strings from '../../../common/strings.js';\nimport * as Mouse from '../../../browser/mouseEvent.js';\nimport * as Keyboard from '../../../browser/keyboardEvent.js';\nimport * as dnd from './treeDnd.js';\nimport { ArrayIterator, MappedIterator } from '../../../common/iterator.js';\nimport { ScrollableElement } from '../../../browser/ui/scrollbar/scrollableElement.js';\nimport { HeightMap } from './treeViewModel.js';\nimport * as _ from './tree.js';\nimport { Emitter } from '../../../common/event.js';\nimport { DataTransfers, StaticDND } from '../../../browser/dnd.js';\nimport { DefaultTreestyler } from './treeDefaults.js';\nimport { Delayer, timeout } from '../../../common/async.js';\nfunction removeFromParent(element) {\n  try {\n    element.parentElement.removeChild(element);\n  } catch (e) {\n    // this will throw if this happens due to a blur event, nasty business\n  }\n}\nvar RowCache = /** @class */function () {\n  function RowCache(context) {\n    this.context = context;\n    this._cache = {\n      '': []\n    };\n  }\n  RowCache.prototype.alloc = function (templateId) {\n    var result = this.cache(templateId).pop();\n    if (!result) {\n      var content = document.createElement('div');\n      content.className = 'content';\n      var row = document.createElement('div');\n      row.appendChild(content);\n      var templateData = null;\n      try {\n        templateData = this.context.renderer.renderTemplate(this.context.tree, templateId, content);\n      } catch (err) {\n        console.error('Tree usage error: exception while rendering template');\n        console.error(err);\n      }\n      result = {\n        element: row,\n        templateId: templateId,\n        templateData: templateData\n      };\n    }\n    return result;\n  };\n  RowCache.prototype.release = function (templateId, row) {\n    removeFromParent(row.element);\n    this.cache(templateId).push(row);\n  };\n  RowCache.prototype.cache = function (templateId) {\n    return this._cache[templateId] || (this._cache[templateId] = []);\n  };\n  RowCache.prototype.garbageCollect = function () {\n    var _this = this;\n    if (this._cache) {\n      Object.keys(this._cache).forEach(function (templateId) {\n        _this._cache[templateId].forEach(function (cachedRow) {\n          _this.context.renderer.disposeTemplate(_this.context.tree, templateId, cachedRow.templateData);\n          cachedRow.element = null;\n          cachedRow.templateData = null;\n        });\n        delete _this._cache[templateId];\n      });\n    }\n  };\n  RowCache.prototype.dispose = function () {\n    this.garbageCollect();\n    this._cache = null;\n  };\n  return RowCache;\n}();\nexport { RowCache };\nvar ViewItem = /** @class */function () {\n  function ViewItem(context, model) {\n    var _this = this;\n    this.width = 0;\n    this.needsRender = false;\n    this.uri = null;\n    this.unbindDragStart = Lifecycle.Disposable.None;\n    this._draggable = false;\n    this.context = context;\n    this.model = model;\n    this.id = this.model.id;\n    this.row = null;\n    this.top = 0;\n    this.height = model.getHeight();\n    this._styles = {};\n    model.getAllTraits().forEach(function (t) {\n      return _this._styles[t] = true;\n    });\n    if (model.isExpanded()) {\n      this.addClass('expanded');\n    }\n  }\n  Object.defineProperty(ViewItem.prototype, \"expanded\", {\n    set: function set(value) {\n      value ? this.addClass('expanded') : this.removeClass('expanded');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"loading\", {\n    set: function set(value) {\n      value ? this.addClass('codicon-loading') : this.removeClass('codicon-loading');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"draggable\", {\n    get: function get() {\n      return this._draggable;\n    },\n    set: function set(value) {\n      this._draggable = value;\n      this.render(true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"dropTarget\", {\n    set: function set(value) {\n      value ? this.addClass('drop-target') : this.removeClass('drop-target');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"element\", {\n    get: function get() {\n      return this.row && this.row.element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"templateId\", {\n    get: function get() {\n      return this._templateId || (this._templateId = this.context.renderer.getTemplateId && this.context.renderer.getTemplateId(this.context.tree, this.model.getElement()));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ViewItem.prototype.addClass = function (name) {\n    this._styles[name] = true;\n    this.render(true);\n  };\n  ViewItem.prototype.removeClass = function (name) {\n    delete this._styles[name]; // is this slow?\n    this.render(true);\n  };\n  ViewItem.prototype.render = function (skipUserRender) {\n    var _this = this;\n    if (skipUserRender === void 0) {\n      skipUserRender = false;\n    }\n    if (!this.model || !this.element) {\n      return;\n    }\n    var classes = ['monaco-tree-row'];\n    classes.push.apply(classes, Object.keys(this._styles));\n    if (this.model.hasChildren()) {\n      classes.push('has-children');\n    }\n    this.element.className = classes.join(' ');\n    this.element.draggable = this.draggable;\n    this.element.style.height = this.height + 'px';\n    // ARIA\n    this.element.setAttribute('role', 'treeitem');\n    var accessibility = this.context.accessibilityProvider;\n    var ariaLabel = accessibility.getAriaLabel(this.context.tree, this.model.getElement());\n    if (ariaLabel) {\n      this.element.setAttribute('aria-label', ariaLabel);\n    }\n    if (accessibility.getPosInSet && accessibility.getSetSize) {\n      this.element.setAttribute('aria-setsize', accessibility.getSetSize());\n      this.element.setAttribute('aria-posinset', accessibility.getPosInSet(this.context.tree, this.model.getElement()));\n    }\n    if (this.model.hasTrait('focused')) {\n      var base64Id = strings.safeBtoa(this.model.id);\n      this.element.setAttribute('aria-selected', 'true');\n      this.element.setAttribute('id', base64Id);\n    } else {\n      this.element.setAttribute('aria-selected', 'false');\n      this.element.removeAttribute('id');\n    }\n    if (this.model.hasChildren()) {\n      this.element.setAttribute('aria-expanded', String(!!this._styles['expanded']));\n    } else {\n      this.element.removeAttribute('aria-expanded');\n    }\n    this.element.setAttribute('aria-level', String(this.model.getDepth()));\n    if (this.context.options.paddingOnRow) {\n      this.element.style.paddingLeft = this.context.options.twistiePixels + (this.model.getDepth() - 1) * this.context.options.indentPixels + 'px';\n    } else {\n      this.element.style.paddingLeft = (this.model.getDepth() - 1) * this.context.options.indentPixels + 'px';\n      this.row.element.firstElementChild.style.paddingLeft = this.context.options.twistiePixels + 'px';\n    }\n    var uri = this.context.dnd.getDragURI(this.context.tree, this.model.getElement());\n    if (uri !== this.uri) {\n      if (this.unbindDragStart) {\n        this.unbindDragStart.dispose();\n      }\n      if (uri) {\n        this.uri = uri;\n        this.draggable = true;\n        this.unbindDragStart = DOM.addDisposableListener(this.element, 'dragstart', function (e) {\n          _this.onDragStart(e);\n        });\n      } else {\n        this.uri = null;\n      }\n    }\n    if (!skipUserRender && this.element) {\n      var paddingLeft = 0;\n      if (this.context.horizontalScrolling) {\n        var style = window.getComputedStyle(this.element);\n        paddingLeft = parseFloat(style.paddingLeft);\n      }\n      if (this.context.horizontalScrolling) {\n        this.element.style.width = Browser.isFirefox ? '-moz-fit-content' : 'fit-content';\n      }\n      try {\n        this.context.renderer.renderElement(this.context.tree, this.model.getElement(), this.templateId, this.row.templateData);\n      } catch (err) {\n        console.error('Tree usage error: exception while rendering element');\n        console.error(err);\n      }\n      if (this.context.horizontalScrolling) {\n        this.width = DOM.getContentWidth(this.element) + paddingLeft;\n        this.element.style.width = '';\n      }\n    }\n  };\n  ViewItem.prototype.insertInDOM = function (container, afterElement) {\n    if (!this.row) {\n      this.row = this.context.cache.alloc(this.templateId);\n      // used in reverse lookup from HTMLElement to Item\n      this.element[TreeView.BINDING] = this;\n    }\n    if (this.element.parentElement) {\n      return;\n    }\n    if (afterElement === null) {\n      container.appendChild(this.element);\n    } else {\n      try {\n        container.insertBefore(this.element, afterElement);\n      } catch (e) {\n        console.warn('Failed to locate previous tree element');\n        container.appendChild(this.element);\n      }\n    }\n    this.render();\n  };\n  ViewItem.prototype.removeFromDOM = function () {\n    if (!this.row) {\n      return;\n    }\n    this.unbindDragStart.dispose();\n    this.uri = null;\n    this.element[TreeView.BINDING] = null;\n    this.context.cache.release(this.templateId, this.row);\n    this.row = null;\n  };\n  ViewItem.prototype.dispose = function () {\n    this.row = null;\n  };\n  return ViewItem;\n}();\nexport { ViewItem };\nvar RootViewItem = /** @class */function (_super) {\n  __extends(RootViewItem, _super);\n  function RootViewItem(context, model, wrapper) {\n    var _this = _super.call(this, context, model) || this;\n    _this.row = {\n      element: wrapper,\n      templateData: null,\n      templateId: null\n    };\n    return _this;\n  }\n  RootViewItem.prototype.render = function () {\n    if (!this.model || !this.element) {\n      return;\n    }\n    var classes = ['monaco-tree-wrapper'];\n    classes.push.apply(classes, Object.keys(this._styles));\n    if (this.model.hasChildren()) {\n      classes.push('has-children');\n    }\n    this.element.className = classes.join(' ');\n  };\n  RootViewItem.prototype.insertInDOM = function (container, afterElement) {\n    // noop\n  };\n  RootViewItem.prototype.removeFromDOM = function () {\n    // noop\n  };\n  return RootViewItem;\n}(ViewItem);\nfunction reactionEquals(one, other) {\n  if (!one && !other) {\n    return true;\n  } else if (!one || !other) {\n    return false;\n  } else if (one.accept !== other.accept) {\n    return false;\n  } else if (one.bubble !== other.bubble) {\n    return false;\n  } else if (one.effect !== other.effect) {\n    return false;\n  } else {\n    return true;\n  }\n}\nvar TreeView = /** @class */function (_super) {\n  __extends(TreeView, _super);\n  function TreeView(context, container) {\n    var _this = _super.call(this) || this;\n    _this.model = null;\n    _this.lastPointerType = '';\n    _this.lastClickTimeStamp = 0;\n    _this.contentWidthUpdateDelayer = new Delayer(50);\n    _this.isRefreshing = false;\n    _this.refreshingPreviousChildrenIds = {};\n    _this.currentDragAndDropData = null;\n    _this.currentDropTarget = null;\n    _this.currentDropTargets = null;\n    _this.currentDropDisposable = Lifecycle.Disposable.None;\n    _this.gestureDisposable = Lifecycle.Disposable.None;\n    _this.dragAndDropScrollInterval = null;\n    _this.dragAndDropScrollTimeout = null;\n    _this.dragAndDropMouseY = null;\n    _this.highlightedItemWasDraggable = false;\n    _this.onHiddenScrollTop = null;\n    _this._onDOMFocus = new Emitter();\n    _this.onDOMFocus = _this._onDOMFocus.event;\n    _this._onDOMBlur = new Emitter();\n    _this._onDidScroll = new Emitter();\n    TreeView.counter++;\n    _this.instance = TreeView.counter;\n    var horizontalScrollMode = typeof context.options.horizontalScrollMode === 'undefined' ? 2 /* Hidden */ : context.options.horizontalScrollMode;\n    _this.horizontalScrolling = horizontalScrollMode !== 2 /* Hidden */;\n    _this.context = {\n      dataSource: context.dataSource,\n      renderer: context.renderer,\n      controller: context.controller,\n      dnd: context.dnd,\n      filter: context.filter,\n      sorter: context.sorter,\n      tree: context.tree,\n      accessibilityProvider: context.accessibilityProvider,\n      options: context.options,\n      cache: new RowCache(context),\n      horizontalScrolling: _this.horizontalScrolling\n    };\n    _this.modelListeners = [];\n    _this.viewListeners = [];\n    _this.items = {};\n    _this.domNode = document.createElement('div');\n    _this.domNode.className = \"monaco-tree no-focused-item monaco-tree-instance-\" + _this.instance;\n    // to allow direct tabbing into the tree instead of first focusing the tree\n    _this.domNode.tabIndex = context.options.preventRootFocus ? -1 : 0;\n    _this.styleElement = DOM.createStyleSheet(_this.domNode);\n    _this.treeStyler = context.styler || new DefaultTreestyler(_this.styleElement, \"monaco-tree-instance-\" + _this.instance);\n    // ARIA\n    _this.domNode.setAttribute('role', 'tree');\n    if (_this.context.options.ariaLabel) {\n      _this.domNode.setAttribute('aria-label', _this.context.options.ariaLabel);\n    }\n    if (_this.context.options.alwaysFocused) {\n      DOM.addClass(_this.domNode, 'focused');\n    }\n    if (!_this.context.options.paddingOnRow) {\n      DOM.addClass(_this.domNode, 'no-row-padding');\n    }\n    _this.wrapper = document.createElement('div');\n    _this.wrapper.className = 'monaco-tree-wrapper';\n    _this.scrollableElement = new ScrollableElement(_this.wrapper, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: horizontalScrollMode,\n      vertical: typeof context.options.verticalScrollMode !== 'undefined' ? context.options.verticalScrollMode : 1 /* Auto */,\n      useShadows: context.options.useShadows\n    });\n    _this.scrollableElement.onScroll(function (e) {\n      _this.render(e.scrollTop, e.height, e.scrollLeft, e.width, e.scrollWidth);\n      _this._onDidScroll.fire();\n    });\n    if (Browser.isIE) {\n      _this.wrapper.style.msTouchAction = 'none';\n      _this.wrapper.style.msContentZooming = 'none';\n    } else {\n      _this.gestureDisposable = Touch.Gesture.addTarget(_this.wrapper);\n    }\n    _this.rowsContainer = document.createElement('div');\n    _this.rowsContainer.className = 'monaco-tree-rows';\n    if (context.options.showTwistie) {\n      _this.rowsContainer.className += ' show-twisties';\n    }\n    var focusTracker = DOM.trackFocus(_this.domNode);\n    _this.viewListeners.push(focusTracker.onDidFocus(function () {\n      return _this.onFocus();\n    }));\n    _this.viewListeners.push(focusTracker.onDidBlur(function () {\n      return _this.onBlur();\n    }));\n    _this.viewListeners.push(focusTracker);\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keydown', function (e) {\n      return _this.onKeyDown(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keyup', function (e) {\n      return _this.onKeyUp(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mousedown', function (e) {\n      return _this.onMouseDown(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mouseup', function (e) {\n      return _this.onMouseUp(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'auxclick', function (e) {\n      if (e && e.button === 1) {\n        _this.onMouseMiddleClick(e);\n      }\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'click', function (e) {\n      return _this.onClick(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'contextmenu', function (e) {\n      return _this.onContextMenu(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Tap, function (e) {\n      return _this.onTap(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Change, function (e) {\n      return _this.onTouchChange(e);\n    }));\n    if (Browser.isIE) {\n      _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSPointerDown', function (e) {\n        return _this.onMsPointerDown(e);\n      }));\n      _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSGestureTap', function (e) {\n        return _this.onMsGestureTap(e);\n      }));\n      // these events come too fast, we throttle them\n      _this.viewListeners.push(DOM.addDisposableThrottledListener(_this.wrapper, 'MSGestureChange', function (e) {\n        return _this.onThrottledMsGestureChange(e);\n      }, function (lastEvent, event) {\n        event.stopPropagation();\n        event.preventDefault();\n        var result = {\n          translationY: event.translationY,\n          translationX: event.translationX\n        };\n        if (lastEvent) {\n          result.translationY += lastEvent.translationY;\n          result.translationX += lastEvent.translationX;\n        }\n        return result;\n      }));\n    }\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragover', function (e) {\n      return _this.onDragOver(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'drop', function (e) {\n      return _this.onDrop(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragend', function (e) {\n      return _this.onDragEnd(e);\n    }));\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragleave', function (e) {\n      return _this.onDragOver(e);\n    }));\n    _this.wrapper.appendChild(_this.rowsContainer);\n    _this.domNode.appendChild(_this.scrollableElement.getDomNode());\n    container.appendChild(_this.domNode);\n    _this.lastRenderTop = 0;\n    _this.lastRenderHeight = 0;\n    _this.didJustPressContextMenuKey = false;\n    _this.currentDropTarget = null;\n    _this.currentDropTargets = [];\n    _this.shouldInvalidateDropReaction = false;\n    _this.dragAndDropScrollInterval = null;\n    _this.dragAndDropScrollTimeout = null;\n    _this.onRowsChanged();\n    _this.layout();\n    _this.setupMSGesture();\n    _this.applyStyles(context.options);\n    return _this;\n  }\n  TreeView.prototype.applyStyles = function (styles) {\n    this.treeStyler.style(styles);\n  };\n  TreeView.prototype.createViewItem = function (item) {\n    return new ViewItem(this.context, item);\n  };\n  TreeView.prototype.getHTMLElement = function () {\n    return this.domNode;\n  };\n  TreeView.prototype.focus = function () {\n    this.domNode.focus();\n  };\n  TreeView.prototype.isFocused = function () {\n    return document.activeElement === this.domNode;\n  };\n  TreeView.prototype.blur = function () {\n    this.domNode.blur();\n  };\n  TreeView.prototype.setupMSGesture = function () {\n    var _this = this;\n    if (window.MSGesture) {\n      this.msGesture = new MSGesture();\n      setTimeout(function () {\n        return _this.msGesture.target = _this.wrapper;\n      }, 100); // TODO@joh, TODO@IETeam\n    }\n  };\n\n  TreeView.prototype.isTreeVisible = function () {\n    return this.onHiddenScrollTop === null;\n  };\n  TreeView.prototype.layout = function (height, width) {\n    if (!this.isTreeVisible()) {\n      return;\n    }\n    this.viewHeight = height || DOM.getContentHeight(this.wrapper); // render\n    this.scrollHeight = this.getContentHeight();\n    if (this.horizontalScrolling) {\n      this.viewWidth = width || DOM.getContentWidth(this.wrapper);\n    }\n  };\n  TreeView.prototype.render = function (scrollTop, viewHeight, scrollLeft, viewWidth, scrollWidth) {\n    var i;\n    var stop;\n    var renderTop = scrollTop;\n    var renderBottom = scrollTop + viewHeight;\n    var thisRenderBottom = this.lastRenderTop + this.lastRenderHeight;\n    // when view scrolls down, start rendering from the renderBottom\n    for (i = this.indexAfter(renderBottom) - 1, stop = this.indexAt(Math.max(thisRenderBottom, renderTop)); i >= stop; i--) {\n      this.insertItemInDOM(this.itemAtIndex(i));\n    }\n    // when view scrolls up, start rendering from either this.renderTop or renderBottom\n    for (i = Math.min(this.indexAt(this.lastRenderTop), this.indexAfter(renderBottom)) - 1, stop = this.indexAt(renderTop); i >= stop; i--) {\n      this.insertItemInDOM(this.itemAtIndex(i));\n    }\n    // when view scrolls down, start unrendering from renderTop\n    for (i = this.indexAt(this.lastRenderTop), stop = Math.min(this.indexAt(renderTop), this.indexAfter(thisRenderBottom)); i < stop; i++) {\n      this.removeItemFromDOM(this.itemAtIndex(i));\n    }\n    // when view scrolls up, start unrendering from either renderBottom this.renderTop\n    for (i = Math.max(this.indexAfter(renderBottom), this.indexAt(this.lastRenderTop)), stop = this.indexAfter(thisRenderBottom); i < stop; i++) {\n      this.removeItemFromDOM(this.itemAtIndex(i));\n    }\n    var topItem = this.itemAtIndex(this.indexAt(renderTop));\n    if (topItem) {\n      this.rowsContainer.style.top = topItem.top - renderTop + 'px';\n    }\n    if (this.horizontalScrolling) {\n      this.rowsContainer.style.left = -scrollLeft + 'px';\n      this.rowsContainer.style.width = Math.max(scrollWidth, viewWidth) + \"px\";\n    }\n    this.lastRenderTop = renderTop;\n    this.lastRenderHeight = renderBottom - renderTop;\n  };\n  TreeView.prototype.setModel = function (newModel) {\n    this.releaseModel();\n    this.model = newModel;\n    this.model.onRefresh(this.onRefreshing, this, this.modelListeners);\n    this.model.onDidRefresh(this.onRefreshed, this, this.modelListeners);\n    this.model.onSetInput(this.onClearingInput, this, this.modelListeners);\n    this.model.onDidSetInput(this.onSetInput, this, this.modelListeners);\n    this.model.onDidFocus(this.onModelFocusChange, this, this.modelListeners);\n    this.model.onRefreshItemChildren(this.onItemChildrenRefreshing, this, this.modelListeners);\n    this.model.onDidRefreshItemChildren(this.onItemChildrenRefreshed, this, this.modelListeners);\n    this.model.onDidRefreshItem(this.onItemRefresh, this, this.modelListeners);\n    this.model.onExpandItem(this.onItemExpanding, this, this.modelListeners);\n    this.model.onDidExpandItem(this.onItemExpanded, this, this.modelListeners);\n    this.model.onCollapseItem(this.onItemCollapsing, this, this.modelListeners);\n    this.model.onDidRevealItem(this.onItemReveal, this, this.modelListeners);\n    this.model.onDidAddTraitItem(this.onItemAddTrait, this, this.modelListeners);\n    this.model.onDidRemoveTraitItem(this.onItemRemoveTrait, this, this.modelListeners);\n  };\n  TreeView.prototype.onRefreshing = function () {\n    this.isRefreshing = true;\n  };\n  TreeView.prototype.onRefreshed = function () {\n    this.isRefreshing = false;\n    this.onRowsChanged();\n  };\n  TreeView.prototype.onRowsChanged = function (scrollTop) {\n    if (scrollTop === void 0) {\n      scrollTop = this.scrollTop;\n    }\n    if (this.isRefreshing) {\n      return;\n    }\n    this.scrollTop = scrollTop;\n    this.updateScrollWidth();\n  };\n  TreeView.prototype.updateScrollWidth = function () {\n    var _this = this;\n    if (!this.horizontalScrolling) {\n      return;\n    }\n    this.contentWidthUpdateDelayer.trigger(function () {\n      var keys = Object.keys(_this.items);\n      var scrollWidth = 0;\n      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        scrollWidth = Math.max(scrollWidth, _this.items[key].width);\n      }\n      _this.scrollWidth = scrollWidth + 10 /* scrollbar */;\n    });\n  };\n\n  TreeView.prototype.focusNextPage = function (eventPayload) {\n    var _this = this;\n    var lastPageIndex = this.indexAt(this.scrollTop + this.viewHeight);\n    lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n    var lastPageElement = this.itemAtIndex(lastPageIndex).model.getElement();\n    var currentlyFocusedElement = this.model.getFocus();\n    if (currentlyFocusedElement !== lastPageElement) {\n      this.model.setFocus(lastPageElement, eventPayload);\n    } else {\n      var previousScrollTop = this.scrollTop;\n      this.scrollTop += this.viewHeight;\n      if (this.scrollTop !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          _this.focusNextPage(eventPayload);\n        }, 0);\n      }\n    }\n  };\n  TreeView.prototype.focusPreviousPage = function (eventPayload) {\n    var _this = this;\n    var firstPageIndex;\n    if (this.scrollTop === 0) {\n      firstPageIndex = this.indexAt(this.scrollTop);\n    } else {\n      firstPageIndex = this.indexAfter(this.scrollTop - 1);\n    }\n    var firstPageElement = this.itemAtIndex(firstPageIndex).model.getElement();\n    var currentlyFocusedElement = this.model.getFocus();\n    if (currentlyFocusedElement !== firstPageElement) {\n      this.model.setFocus(firstPageElement, eventPayload);\n    } else {\n      var previousScrollTop = this.scrollTop;\n      this.scrollTop -= this.viewHeight;\n      if (this.scrollTop !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          _this.focusPreviousPage(eventPayload);\n        }, 0);\n      }\n    }\n  };\n  Object.defineProperty(TreeView.prototype, \"viewHeight\", {\n    get: function get() {\n      var scrollDimensions = this.scrollableElement.getScrollDimensions();\n      return scrollDimensions.height;\n    },\n    set: function set(height) {\n      this.scrollableElement.setScrollDimensions({\n        height: height\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollHeight\", {\n    set: function set(scrollHeight) {\n      scrollHeight = scrollHeight + (this.horizontalScrolling ? 10 : 0);\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: scrollHeight\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"viewWidth\", {\n    get: function get() {\n      var scrollDimensions = this.scrollableElement.getScrollDimensions();\n      return scrollDimensions.width;\n    },\n    set: function set(viewWidth) {\n      this.scrollableElement.setScrollDimensions({\n        width: viewWidth\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollWidth\", {\n    set: function set(scrollWidth) {\n      this.scrollableElement.setScrollDimensions({\n        scrollWidth: scrollWidth\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollTop\", {\n    get: function get() {\n      var scrollPosition = this.scrollableElement.getScrollPosition();\n      return scrollPosition.scrollTop;\n    },\n    set: function set(scrollTop) {\n      var scrollHeight = this.getContentHeight() + (this.horizontalScrolling ? 10 : 0);\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: scrollHeight\n      });\n      this.scrollableElement.setScrollPosition({\n        scrollTop: scrollTop\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // Events\n  TreeView.prototype.onClearingInput = function (e) {\n    var item = e.item;\n    if (item) {\n      this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) {\n        return item && item.id;\n      }));\n      this.onRowsChanged();\n    }\n  };\n  TreeView.prototype.onSetInput = function (e) {\n    this.context.cache.garbageCollect();\n    this.inputItem = new RootViewItem(this.context, e.item, this.wrapper);\n  };\n  TreeView.prototype.onItemChildrenRefreshing = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n    if (viewItem && this.context.options.showLoading) {\n      viewItem.loadingTimer = setTimeout(function () {\n        viewItem.loadingTimer = 0;\n        viewItem.loading = true;\n      }, TreeView.LOADING_DECORATION_DELAY);\n    }\n    if (!e.isNested) {\n      var childrenIds = [];\n      var navigator_1 = item.getNavigator();\n      var childItem = void 0;\n      while (childItem = navigator_1.next()) {\n        childrenIds.push(childItem.id);\n      }\n      this.refreshingPreviousChildrenIds[item.id] = childrenIds;\n    }\n  };\n  TreeView.prototype.onItemChildrenRefreshed = function (e) {\n    var _this = this;\n    var item = e.item;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      if (viewItem.loadingTimer) {\n        clearTimeout(viewItem.loadingTimer);\n        viewItem.loadingTimer = 0;\n      }\n      viewItem.loading = false;\n    }\n    if (!e.isNested) {\n      var previousChildrenIds_1 = this.refreshingPreviousChildrenIds[item.id];\n      var afterModelItems_1 = [];\n      var navigator_2 = item.getNavigator();\n      var childItem = void 0;\n      while (childItem = navigator_2.next()) {\n        afterModelItems_1.push(childItem);\n      }\n      var skipDiff = Math.abs(previousChildrenIds_1.length - afterModelItems_1.length) > 1000;\n      var diff = [];\n      var doToInsertItemsAlreadyExist = false;\n      if (!skipDiff) {\n        var lcs = new Diff.LcsDiff({\n          getElements: function getElements() {\n            return previousChildrenIds_1;\n          }\n        }, {\n          getElements: function getElements() {\n            return afterModelItems_1.map(function (item) {\n              return item.id;\n            });\n          }\n        }, null);\n        diff = lcs.ComputeDiff(false).changes;\n        // this means that the result of the diff algorithm would result\n        // in inserting items that were already registered. this can only\n        // happen if the data provider returns bad ids OR if the sorting\n        // of the elements has changed\n        doToInsertItemsAlreadyExist = diff.some(function (d) {\n          if (d.modifiedLength > 0) {\n            for (var i = d.modifiedStart, len = d.modifiedStart + d.modifiedLength; i < len; i++) {\n              if (_this.items.hasOwnProperty(afterModelItems_1[i].id)) {\n                return true;\n              }\n            }\n          }\n          return false;\n        });\n      }\n      // 50 is an optimization number, at some point we're better off\n      // just replacing everything\n      if (!skipDiff && !doToInsertItemsAlreadyExist && diff.length < 50) {\n        for (var _i = 0, diff_1 = diff; _i < diff_1.length; _i++) {\n          var diffChange = diff_1[_i];\n          if (diffChange.originalLength > 0) {\n            this.onRemoveItems(new ArrayIterator(previousChildrenIds_1, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength));\n          }\n          if (diffChange.modifiedLength > 0) {\n            var beforeItem = afterModelItems_1[diffChange.modifiedStart - 1] || item;\n            beforeItem = beforeItem.getDepth() > 0 ? beforeItem : null;\n            this.onInsertItems(new ArrayIterator(afterModelItems_1, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength), beforeItem ? beforeItem.id : null);\n          }\n        }\n      } else if (skipDiff || diff.length) {\n        this.onRemoveItems(new ArrayIterator(previousChildrenIds_1));\n        this.onInsertItems(new ArrayIterator(afterModelItems_1), item.getDepth() > 0 ? item.id : null);\n      }\n      if (skipDiff || diff.length) {\n        this.onRowsChanged();\n      }\n    }\n  };\n  TreeView.prototype.onItemRefresh = function (item) {\n    this.onItemsRefresh([item]);\n  };\n  TreeView.prototype.onItemsRefresh = function (items) {\n    var _this = this;\n    this.onRefreshItemSet(items.filter(function (item) {\n      return _this.items.hasOwnProperty(item.id);\n    }));\n    this.onRowsChanged();\n  };\n  TreeView.prototype.onItemExpanding = function (e) {\n    var viewItem = this.items[e.item.id];\n    if (viewItem) {\n      viewItem.expanded = true;\n    }\n  };\n  TreeView.prototype.onItemExpanded = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      viewItem.expanded = true;\n      var height = this.onInsertItems(item.getNavigator(), item.id) || 0;\n      var scrollTop = this.scrollTop;\n      if (viewItem.top + viewItem.height <= this.scrollTop) {\n        scrollTop += height;\n      }\n      this.onRowsChanged(scrollTop);\n    }\n  };\n  TreeView.prototype.onItemCollapsing = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      viewItem.expanded = false;\n      this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) {\n        return item && item.id;\n      }));\n      this.onRowsChanged();\n    }\n  };\n  TreeView.prototype.onItemReveal = function (e) {\n    var item = e.item;\n    var relativeTop = e.relativeTop;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      if (relativeTop !== null) {\n        relativeTop = relativeTop < 0 ? 0 : relativeTop;\n        relativeTop = relativeTop > 1 ? 1 : relativeTop;\n        // y = mx + b\n        var m = viewItem.height - this.viewHeight;\n        this.scrollTop = m * relativeTop + viewItem.top;\n      } else {\n        var viewItemBottom = viewItem.top + viewItem.height;\n        var wrapperBottom = this.scrollTop + this.viewHeight;\n        if (viewItem.top < this.scrollTop) {\n          this.scrollTop = viewItem.top;\n        } else if (viewItemBottom >= wrapperBottom) {\n          this.scrollTop = viewItemBottom - this.viewHeight;\n        }\n      }\n    }\n  };\n  TreeView.prototype.onItemAddTrait = function (e) {\n    var item = e.item;\n    var trait = e.trait;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      viewItem.addClass(trait);\n    }\n    if (trait === 'highlighted') {\n      DOM.addClass(this.domNode, trait);\n      // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\n      if (viewItem) {\n        this.highlightedItemWasDraggable = !!viewItem.draggable;\n        if (viewItem.draggable) {\n          viewItem.draggable = false;\n        }\n      }\n    }\n  };\n  TreeView.prototype.onItemRemoveTrait = function (e) {\n    var item = e.item;\n    var trait = e.trait;\n    var viewItem = this.items[item.id];\n    if (viewItem) {\n      viewItem.removeClass(trait);\n    }\n    if (trait === 'highlighted') {\n      DOM.removeClass(this.domNode, trait);\n      // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\n      if (this.highlightedItemWasDraggable) {\n        viewItem.draggable = true;\n      }\n      this.highlightedItemWasDraggable = false;\n    }\n  };\n  TreeView.prototype.onModelFocusChange = function () {\n    var focus = this.model && this.model.getFocus();\n    DOM.toggleClass(this.domNode, 'no-focused-item', !focus);\n    // ARIA\n    if (focus) {\n      this.domNode.setAttribute('aria-activedescendant', strings.safeBtoa(this.context.dataSource.getId(this.context.tree, focus)));\n    } else {\n      this.domNode.removeAttribute('aria-activedescendant');\n    }\n  };\n  // HeightMap \"events\"\n  TreeView.prototype.onInsertItem = function (item) {\n    var _this = this;\n    item.onDragStart = function (e) {\n      _this.onDragStart(item, e);\n    };\n    item.needsRender = true;\n    this.refreshViewItem(item);\n    this.items[item.id] = item;\n  };\n  TreeView.prototype.onRefreshItem = function (item, needsRender) {\n    if (needsRender === void 0) {\n      needsRender = false;\n    }\n    item.needsRender = item.needsRender || needsRender;\n    this.refreshViewItem(item);\n  };\n  TreeView.prototype.onRemoveItem = function (item) {\n    this.removeItemFromDOM(item);\n    item.dispose();\n    delete this.items[item.id];\n  };\n  // ViewItem refresh\n  TreeView.prototype.refreshViewItem = function (item) {\n    item.render();\n    if (this.shouldBeRendered(item)) {\n      this.insertItemInDOM(item);\n    } else {\n      this.removeItemFromDOM(item);\n    }\n  };\n  // DOM Events\n  TreeView.prototype.onClick = function (e) {\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n    var event = new Mouse.StandardMouseEvent(e);\n    var item = this.getItemAround(event.target);\n    if (!item) {\n      return;\n    }\n    if (Browser.isIE && Date.now() - this.lastClickTimeStamp < 300) {\n      // IE10+ doesn't set the detail property correctly. While IE10 simply\n      // counts the number of clicks, IE11 reports always 1. To align with\n      // other browser, we set the value to 2 if clicks events come in a 300ms\n      // sequence.\n      event.detail = 2;\n    }\n    this.lastClickTimeStamp = Date.now();\n    this.context.controller.onClick(this.context.tree, item.model.getElement(), event);\n  };\n  TreeView.prototype.onMouseMiddleClick = function (e) {\n    if (!this.context.controller.onMouseMiddleClick) {\n      return;\n    }\n    var event = new Mouse.StandardMouseEvent(e);\n    var item = this.getItemAround(event.target);\n    if (!item) {\n      return;\n    }\n    this.context.controller.onMouseMiddleClick(this.context.tree, item.model.getElement(), event);\n  };\n  TreeView.prototype.onMouseDown = function (e) {\n    this.didJustPressContextMenuKey = false;\n    if (!this.context.controller.onMouseDown) {\n      return;\n    }\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n    var event = new Mouse.StandardMouseEvent(e);\n    if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\n      return;\n    }\n    var item = this.getItemAround(event.target);\n    if (!item) {\n      return;\n    }\n    this.context.controller.onMouseDown(this.context.tree, item.model.getElement(), event);\n  };\n  TreeView.prototype.onMouseUp = function (e) {\n    if (!this.context.controller.onMouseUp) {\n      return;\n    }\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n    var event = new Mouse.StandardMouseEvent(e);\n    if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\n      return;\n    }\n    var item = this.getItemAround(event.target);\n    if (!item) {\n      return;\n    }\n    this.context.controller.onMouseUp(this.context.tree, item.model.getElement(), event);\n  };\n  TreeView.prototype.onTap = function (e) {\n    var item = this.getItemAround(e.initialTarget);\n    if (!item) {\n      return;\n    }\n    this.context.controller.onTap(this.context.tree, item.model.getElement(), e);\n  };\n  TreeView.prototype.onTouchChange = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.scrollTop -= event.translationY;\n  };\n  TreeView.prototype.onContextMenu = function (event) {\n    var resultEvent;\n    var element;\n    if (event instanceof KeyboardEvent || this.didJustPressContextMenuKey) {\n      this.didJustPressContextMenuKey = false;\n      var keyboardEvent = new Keyboard.StandardKeyboardEvent(event);\n      element = this.model.getFocus();\n      var position = void 0;\n      if (!element) {\n        element = this.model.getInput();\n        position = DOM.getDomNodePagePosition(this.inputItem.element);\n      } else {\n        var id = this.context.dataSource.getId(this.context.tree, element);\n        var viewItem = this.items[id];\n        position = DOM.getDomNodePagePosition(viewItem.element);\n      }\n      resultEvent = new _.KeyboardContextMenuEvent(position.left + position.width, position.top, keyboardEvent);\n    } else {\n      var mouseEvent = new Mouse.StandardMouseEvent(event);\n      var item = this.getItemAround(mouseEvent.target);\n      if (!item) {\n        return;\n      }\n      element = item.model.getElement();\n      resultEvent = new _.MouseContextMenuEvent(mouseEvent);\n    }\n    this.context.controller.onContextMenu(this.context.tree, element, resultEvent);\n  };\n  TreeView.prototype.onKeyDown = function (e) {\n    var event = new Keyboard.StandardKeyboardEvent(e);\n    this.didJustPressContextMenuKey = event.keyCode === 58 /* ContextMenu */ || event.shiftKey && event.keyCode === 68 /* F10 */;\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    if (this.didJustPressContextMenuKey) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    this.context.controller.onKeyDown(this.context.tree, event);\n  };\n  TreeView.prototype.onKeyUp = function (e) {\n    if (this.didJustPressContextMenuKey) {\n      this.onContextMenu(e);\n    }\n    this.didJustPressContextMenuKey = false;\n    this.context.controller.onKeyUp(this.context.tree, new Keyboard.StandardKeyboardEvent(e));\n  };\n  TreeView.prototype.onDragStart = function (item, e) {\n    if (this.model.getHighlight()) {\n      return;\n    }\n    var element = item.model.getElement();\n    var selection = this.model.getSelection();\n    var elements;\n    if (selection.indexOf(element) > -1) {\n      elements = selection;\n    } else {\n      elements = [element];\n    }\n    e.dataTransfer.effectAllowed = 'copyMove';\n    e.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([item.uri]));\n    if (e.dataTransfer.setDragImage) {\n      var label = void 0;\n      if (this.context.dnd.getDragLabel) {\n        label = this.context.dnd.getDragLabel(this.context.tree, elements);\n      } else {\n        label = String(elements.length);\n      }\n      var dragImage_1 = document.createElement('div');\n      dragImage_1.className = 'monaco-tree-drag-image';\n      dragImage_1.textContent = label;\n      document.body.appendChild(dragImage_1);\n      e.dataTransfer.setDragImage(dragImage_1, -10, -10);\n      setTimeout(function () {\n        return document.body.removeChild(dragImage_1);\n      }, 0);\n    }\n    this.currentDragAndDropData = new dnd.ElementsDragAndDropData(elements);\n    StaticDND.CurrentDragAndDropData = new dnd.ExternalElementsDragAndDropData(elements);\n    this.context.dnd.onDragStart(this.context.tree, this.currentDragAndDropData, new Mouse.DragMouseEvent(e));\n  };\n  TreeView.prototype.setupDragAndDropScrollInterval = function () {\n    var _this = this;\n    var viewTop = DOM.getTopLeftOffset(this.wrapper).top;\n    if (!this.dragAndDropScrollInterval) {\n      this.dragAndDropScrollInterval = window.setInterval(function () {\n        if (_this.dragAndDropMouseY === null) {\n          return;\n        }\n        var diff = _this.dragAndDropMouseY - viewTop;\n        var scrollDiff = 0;\n        var upperLimit = _this.viewHeight - 35;\n        if (diff < 35) {\n          scrollDiff = Math.max(-14, 0.2 * (diff - 35));\n        } else if (diff > upperLimit) {\n          scrollDiff = Math.min(14, 0.2 * (diff - upperLimit));\n        }\n        _this.scrollTop += scrollDiff;\n      }, 10);\n      this.cancelDragAndDropScrollTimeout();\n      this.dragAndDropScrollTimeout = window.setTimeout(function () {\n        _this.cancelDragAndDropScrollInterval();\n        _this.dragAndDropScrollTimeout = null;\n      }, 1000);\n    }\n  };\n  TreeView.prototype.cancelDragAndDropScrollInterval = function () {\n    if (this.dragAndDropScrollInterval) {\n      window.clearInterval(this.dragAndDropScrollInterval);\n      this.dragAndDropScrollInterval = null;\n    }\n    this.cancelDragAndDropScrollTimeout();\n  };\n  TreeView.prototype.cancelDragAndDropScrollTimeout = function () {\n    if (this.dragAndDropScrollTimeout) {\n      window.clearTimeout(this.dragAndDropScrollTimeout);\n      this.dragAndDropScrollTimeout = null;\n    }\n  };\n  TreeView.prototype.onDragOver = function (e) {\n    var _this = this;\n    e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n    var event = new Mouse.DragMouseEvent(e);\n    var viewItem = this.getItemAround(event.target);\n    if (!viewItem || event.posx === 0 && event.posy === 0 && event.browserEvent.type === DOM.EventType.DRAG_LEAVE) {\n      // dragging outside of tree\n      if (this.currentDropTarget) {\n        // clear previously hovered element feedback\n        this.currentDropTargets.forEach(function (i) {\n          return i.dropTarget = false;\n        });\n        this.currentDropTargets = [];\n        this.currentDropDisposable.dispose();\n      }\n      this.cancelDragAndDropScrollInterval();\n      this.currentDropTarget = null;\n      this.currentDropElement = null;\n      this.dragAndDropMouseY = null;\n      return false;\n    }\n    // dragging inside the tree\n    this.setupDragAndDropScrollInterval();\n    this.dragAndDropMouseY = event.posy;\n    if (!this.currentDragAndDropData) {\n      // just started dragging\n      if (StaticDND.CurrentDragAndDropData) {\n        this.currentDragAndDropData = StaticDND.CurrentDragAndDropData;\n      } else {\n        if (!event.dataTransfer.types) {\n          return false;\n        }\n        this.currentDragAndDropData = new dnd.DesktopDragAndDropData();\n      }\n    }\n    this.currentDragAndDropData.update(event.browserEvent.dataTransfer);\n    var element;\n    var item = viewItem.model;\n    var reaction;\n    // check the bubble up behavior\n    do {\n      element = item ? item.getElement() : this.model.getInput();\n      reaction = this.context.dnd.onDragOver(this.context.tree, this.currentDragAndDropData, element, event);\n      if (!reaction || reaction.bubble !== 1 /* BUBBLE_UP */) {\n        break;\n      }\n      item = item && item.parent;\n    } while (item);\n    if (!item) {\n      this.currentDropElement = null;\n      return false;\n    }\n    var canDrop = reaction && reaction.accept;\n    if (canDrop) {\n      this.currentDropElement = item.getElement();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = reaction.effect === 0 /* COPY */ ? 'copy' : 'move';\n    } else {\n      this.currentDropElement = null;\n    }\n    // item is the model item where drop() should be called\n    // can be null\n    var currentDropTarget = item.id === this.inputItem.id ? this.inputItem : this.items[item.id];\n    if (this.shouldInvalidateDropReaction || this.currentDropTarget !== currentDropTarget || !reactionEquals(this.currentDropElementReaction, reaction)) {\n      this.shouldInvalidateDropReaction = false;\n      if (this.currentDropTarget) {\n        this.currentDropTargets.forEach(function (i) {\n          return i.dropTarget = false;\n        });\n        this.currentDropTargets = [];\n        this.currentDropDisposable.dispose();\n      }\n      this.currentDropTarget = currentDropTarget;\n      this.currentDropElementReaction = reaction;\n      if (canDrop) {\n        // setup hover feedback for drop target\n        if (this.currentDropTarget) {\n          this.currentDropTarget.dropTarget = true;\n          this.currentDropTargets.push(this.currentDropTarget);\n        }\n        if (reaction.bubble === 0 /* BUBBLE_DOWN */) {\n          var nav = item.getNavigator();\n          var child = void 0;\n          while (child = nav.next()) {\n            viewItem = this.items[child.id];\n            if (viewItem) {\n              viewItem.dropTarget = true;\n              this.currentDropTargets.push(viewItem);\n            }\n          }\n        }\n        if (reaction.autoExpand) {\n          var timeoutPromise_1 = timeout(500);\n          this.currentDropDisposable = Lifecycle.toDisposable(function () {\n            return timeoutPromise_1.cancel();\n          });\n          timeoutPromise_1.then(function () {\n            return _this.context.tree.expand(_this.currentDropElement);\n          }).then(function () {\n            return _this.shouldInvalidateDropReaction = true;\n          });\n        }\n      }\n    }\n    return true;\n  };\n  TreeView.prototype.onDrop = function (e) {\n    if (this.currentDropElement) {\n      var event_1 = new Mouse.DragMouseEvent(e);\n      event_1.preventDefault();\n      this.currentDragAndDropData.update(event_1.browserEvent.dataTransfer);\n      this.context.dnd.drop(this.context.tree, this.currentDragAndDropData, this.currentDropElement, event_1);\n      this.onDragEnd(e);\n    }\n    this.cancelDragAndDropScrollInterval();\n  };\n  TreeView.prototype.onDragEnd = function (e) {\n    if (this.currentDropTarget) {\n      this.currentDropTargets.forEach(function (i) {\n        return i.dropTarget = false;\n      });\n      this.currentDropTargets = [];\n    }\n    this.currentDropDisposable.dispose();\n    this.cancelDragAndDropScrollInterval();\n    this.currentDragAndDropData = null;\n    StaticDND.CurrentDragAndDropData = undefined;\n    this.currentDropElement = null;\n    this.currentDropTarget = null;\n    this.dragAndDropMouseY = null;\n  };\n  TreeView.prototype.onFocus = function () {\n    if (!this.context.options.alwaysFocused) {\n      DOM.addClass(this.domNode, 'focused');\n    }\n    this._onDOMFocus.fire();\n  };\n  TreeView.prototype.onBlur = function () {\n    if (!this.context.options.alwaysFocused) {\n      DOM.removeClass(this.domNode, 'focused');\n    }\n    this.domNode.removeAttribute('aria-activedescendant'); // ARIA\n    this._onDOMBlur.fire();\n  };\n  // MS specific DOM Events\n  TreeView.prototype.onMsPointerDown = function (event) {\n    if (!this.msGesture) {\n      return;\n    }\n    // Circumvent IE11 breaking change in e.pointerType & TypeScript's stale definitions\n    var pointerType = event.pointerType;\n    if (pointerType === (event.MSPOINTER_TYPE_MOUSE || 'mouse')) {\n      this.lastPointerType = 'mouse';\n      return;\n    } else if (pointerType === (event.MSPOINTER_TYPE_TOUCH || 'touch')) {\n      this.lastPointerType = 'touch';\n    } else {\n      return;\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    this.msGesture.addPointer(event.pointerId);\n  };\n  TreeView.prototype.onThrottledMsGestureChange = function (event) {\n    this.scrollTop -= event.translationY;\n  };\n  TreeView.prototype.onMsGestureTap = function (event) {\n    event.initialTarget = document.elementFromPoint(event.clientX, event.clientY);\n    this.onTap(event);\n  };\n  // DOM changes\n  TreeView.prototype.insertItemInDOM = function (item) {\n    var elementAfter = null;\n    var itemAfter = this.itemAfter(item);\n    if (itemAfter && itemAfter.element) {\n      elementAfter = itemAfter.element;\n    }\n    item.insertInDOM(this.rowsContainer, elementAfter);\n  };\n  TreeView.prototype.removeItemFromDOM = function (item) {\n    if (!item) {\n      return;\n    }\n    item.removeFromDOM();\n  };\n  // Helpers\n  TreeView.prototype.shouldBeRendered = function (item) {\n    return item.top < this.lastRenderTop + this.lastRenderHeight && item.top + item.height > this.lastRenderTop;\n  };\n  TreeView.prototype.getItemAround = function (element) {\n    var candidate = this.inputItem;\n    var el = element;\n    do {\n      if (el[TreeView.BINDING]) {\n        candidate = el[TreeView.BINDING];\n      }\n      if (el === this.wrapper || el === this.domNode) {\n        return candidate;\n      }\n      if (el === this.scrollableElement.getDomNode() || el === document.body) {\n        return undefined;\n      }\n    } while (el = el.parentElement);\n    return undefined;\n  };\n  // Cleanup\n  TreeView.prototype.releaseModel = function () {\n    if (this.model) {\n      this.modelListeners = Lifecycle.dispose(this.modelListeners);\n      this.model = null;\n    }\n  };\n  TreeView.prototype.dispose = function () {\n    var _this = this;\n    // TODO@joao: improve\n    this.scrollableElement.dispose();\n    this.releaseModel();\n    this.viewListeners = Lifecycle.dispose(this.viewListeners);\n    this._onDOMFocus.dispose();\n    this._onDOMBlur.dispose();\n    if (this.domNode.parentNode) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    if (this.items) {\n      Object.keys(this.items).forEach(function (key) {\n        return _this.items[key].removeFromDOM();\n      });\n    }\n    if (this.context.cache) {\n      this.context.cache.dispose();\n    }\n    this.gestureDisposable.dispose();\n    _super.prototype.dispose.call(this);\n  };\n  TreeView.BINDING = 'monaco-tree-row';\n  TreeView.LOADING_DECORATION_DELAY = 800;\n  TreeView.counter = 0;\n  return TreeView;\n}(HeightMap);\nexport { TreeView };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Platform","Browser","Lifecycle","DOM","Diff","Touch","strings","Mouse","Keyboard","dnd","ArrayIterator","MappedIterator","ScrollableElement","HeightMap","_","Emitter","DataTransfers","StaticDND","DefaultTreestyler","Delayer","timeout","removeFromParent","element","parentElement","removeChild","e","RowCache","context","_cache","alloc","templateId","result","cache","pop","content","document","createElement","className","row","appendChild","templateData","renderer","renderTemplate","tree","err","console","error","release","push","garbageCollect","_this","keys","forEach","cachedRow","disposeTemplate","dispose","ViewItem","model","width","needsRender","uri","unbindDragStart","Disposable","None","_draggable","id","top","height","getHeight","_styles","getAllTraits","t","isExpanded","addClass","defineProperty","set","value","removeClass","enumerable","configurable","get","render","_templateId","getTemplateId","getElement","name","skipUserRender","classes","apply","hasChildren","join","draggable","style","setAttribute","accessibility","accessibilityProvider","ariaLabel","getAriaLabel","getPosInSet","getSetSize","hasTrait","base64Id","safeBtoa","removeAttribute","String","getDepth","options","paddingOnRow","paddingLeft","twistiePixels","indentPixels","firstElementChild","getDragURI","addDisposableListener","onDragStart","horizontalScrolling","window","getComputedStyle","parseFloat","isFirefox","renderElement","getContentWidth","insertInDOM","container","afterElement","TreeView","BINDING","insertBefore","warn","removeFromDOM","RootViewItem","_super","wrapper","call","reactionEquals","one","other","accept","bubble","effect","lastPointerType","lastClickTimeStamp","contentWidthUpdateDelayer","isRefreshing","refreshingPreviousChildrenIds","currentDragAndDropData","currentDropTarget","currentDropTargets","currentDropDisposable","gestureDisposable","dragAndDropScrollInterval","dragAndDropScrollTimeout","dragAndDropMouseY","highlightedItemWasDraggable","onHiddenScrollTop","_onDOMFocus","onDOMFocus","event","_onDOMBlur","_onDidScroll","counter","instance","horizontalScrollMode","dataSource","controller","filter","sorter","modelListeners","viewListeners","items","domNode","tabIndex","preventRootFocus","styleElement","createStyleSheet","treeStyler","styler","alwaysFocused","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","verticalScrollMode","useShadows","onScroll","scrollTop","scrollLeft","scrollWidth","fire","isIE","msTouchAction","msContentZooming","Gesture","addTarget","rowsContainer","showTwistie","focusTracker","trackFocus","onDidFocus","onFocus","onDidBlur","onBlur","onKeyDown","onKeyUp","onMouseDown","onMouseUp","button","onMouseMiddleClick","onClick","onContextMenu","EventType","Tap","onTap","Change","onTouchChange","onMsPointerDown","onMsGestureTap","addDisposableThrottledListener","onThrottledMsGestureChange","lastEvent","stopPropagation","preventDefault","translationY","translationX","onDragOver","onDrop","onDragEnd","getDomNode","lastRenderTop","lastRenderHeight","didJustPressContextMenuKey","shouldInvalidateDropReaction","onRowsChanged","layout","setupMSGesture","applyStyles","styles","createViewItem","item","getHTMLElement","focus","isFocused","activeElement","blur","MSGesture","msGesture","setTimeout","target","isTreeVisible","viewHeight","getContentHeight","scrollHeight","viewWidth","i","stop","renderTop","renderBottom","thisRenderBottom","indexAfter","indexAt","Math","max","insertItemInDOM","itemAtIndex","min","removeItemFromDOM","topItem","left","setModel","newModel","releaseModel","onRefresh","onRefreshing","onDidRefresh","onRefreshed","onSetInput","onClearingInput","onDidSetInput","onModelFocusChange","onRefreshItemChildren","onItemChildrenRefreshing","onDidRefreshItemChildren","onItemChildrenRefreshed","onDidRefreshItem","onItemRefresh","onExpandItem","onItemExpanding","onDidExpandItem","onItemExpanded","onCollapseItem","onItemCollapsing","onDidRevealItem","onItemReveal","onDidAddTraitItem","onItemAddTrait","onDidRemoveTraitItem","onItemRemoveTrait","updateScrollWidth","trigger","_i","keys_1","length","key","focusNextPage","eventPayload","lastPageIndex","lastPageElement","currentlyFocusedElement","getFocus","setFocus","previousScrollTop","focusPreviousPage","firstPageIndex","firstPageElement","scrollDimensions","getScrollDimensions","setScrollDimensions","scrollPosition","getScrollPosition","setScrollPosition","onRemoveItems","getNavigator","inputItem","viewItem","showLoading","loadingTimer","loading","LOADING_DECORATION_DELAY","isNested","childrenIds","navigator_1","childItem","next","clearTimeout","previousChildrenIds_1","afterModelItems_1","navigator_2","skipDiff","abs","diff","doToInsertItemsAlreadyExist","lcs","LcsDiff","getElements","map","ComputeDiff","changes","some","modifiedLength","modifiedStart","len","diff_1","diffChange","originalLength","originalStart","beforeItem","onInsertItems","onItemsRefresh","onRefreshItemSet","expanded","relativeTop","m","viewItemBottom","wrapperBottom","trait","toggleClass","getId","onInsertItem","refreshViewItem","onRefreshItem","onRemoveItem","shouldBeRendered","StandardMouseEvent","getItemAround","Date","now","detail","ctrlKey","isNative","isMacintosh","initialTarget","resultEvent","KeyboardEvent","keyboardEvent","StandardKeyboardEvent","position","getInput","getDomNodePagePosition","KeyboardContextMenuEvent","mouseEvent","MouseContextMenuEvent","keyCode","shiftKey","tagName","toLowerCase","getHighlight","selection","getSelection","elements","indexOf","dataTransfer","effectAllowed","setData","RESOURCES","JSON","stringify","setDragImage","label","getDragLabel","dragImage_1","textContent","body","ElementsDragAndDropData","CurrentDragAndDropData","ExternalElementsDragAndDropData","DragMouseEvent","setupDragAndDropScrollInterval","viewTop","getTopLeftOffset","setInterval","scrollDiff","upperLimit","cancelDragAndDropScrollTimeout","cancelDragAndDropScrollInterval","clearInterval","posx","posy","browserEvent","type","DRAG_LEAVE","dropTarget","currentDropElement","types","DesktopDragAndDropData","update","reaction","parent","canDrop","dropEffect","currentDropElementReaction","nav","child","autoExpand","timeoutPromise_1","toDisposable","cancel","then","expand","event_1","drop","undefined","pointerType","MSPOINTER_TYPE_MOUSE","MSPOINTER_TYPE_TOUCH","addPointer","pointerId","elementFromPoint","clientX","clientY","elementAfter","itemAfter","candidate","el","parentNode"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeView.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Platform from '../../../common/platform.js';\r\nimport * as Browser from '../../../browser/browser.js';\r\nimport * as Lifecycle from '../../../common/lifecycle.js';\r\nimport * as DOM from '../../../browser/dom.js';\r\nimport * as Diff from '../../../common/diff/diff.js';\r\nimport * as Touch from '../../../browser/touch.js';\r\nimport * as strings from '../../../common/strings.js';\r\nimport * as Mouse from '../../../browser/mouseEvent.js';\r\nimport * as Keyboard from '../../../browser/keyboardEvent.js';\r\nimport * as dnd from './treeDnd.js';\r\nimport { ArrayIterator, MappedIterator } from '../../../common/iterator.js';\r\nimport { ScrollableElement } from '../../../browser/ui/scrollbar/scrollableElement.js';\r\nimport { HeightMap } from './treeViewModel.js';\r\nimport * as _ from './tree.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { DataTransfers, StaticDND } from '../../../browser/dnd.js';\r\nimport { DefaultTreestyler } from './treeDefaults.js';\r\nimport { Delayer, timeout } from '../../../common/async.js';\r\nfunction removeFromParent(element) {\r\n    try {\r\n        element.parentElement.removeChild(element);\r\n    }\r\n    catch (e) {\r\n        // this will throw if this happens due to a blur event, nasty business\r\n    }\r\n}\r\nvar RowCache = /** @class */ (function () {\r\n    function RowCache(context) {\r\n        this.context = context;\r\n        this._cache = { '': [] };\r\n    }\r\n    RowCache.prototype.alloc = function (templateId) {\r\n        var result = this.cache(templateId).pop();\r\n        if (!result) {\r\n            var content = document.createElement('div');\r\n            content.className = 'content';\r\n            var row = document.createElement('div');\r\n            row.appendChild(content);\r\n            var templateData = null;\r\n            try {\r\n                templateData = this.context.renderer.renderTemplate(this.context.tree, templateId, content);\r\n            }\r\n            catch (err) {\r\n                console.error('Tree usage error: exception while rendering template');\r\n                console.error(err);\r\n            }\r\n            result = {\r\n                element: row,\r\n                templateId: templateId,\r\n                templateData: templateData\r\n            };\r\n        }\r\n        return result;\r\n    };\r\n    RowCache.prototype.release = function (templateId, row) {\r\n        removeFromParent(row.element);\r\n        this.cache(templateId).push(row);\r\n    };\r\n    RowCache.prototype.cache = function (templateId) {\r\n        return this._cache[templateId] || (this._cache[templateId] = []);\r\n    };\r\n    RowCache.prototype.garbageCollect = function () {\r\n        var _this = this;\r\n        if (this._cache) {\r\n            Object.keys(this._cache).forEach(function (templateId) {\r\n                _this._cache[templateId].forEach(function (cachedRow) {\r\n                    _this.context.renderer.disposeTemplate(_this.context.tree, templateId, cachedRow.templateData);\r\n                    cachedRow.element = null;\r\n                    cachedRow.templateData = null;\r\n                });\r\n                delete _this._cache[templateId];\r\n            });\r\n        }\r\n    };\r\n    RowCache.prototype.dispose = function () {\r\n        this.garbageCollect();\r\n        this._cache = null;\r\n    };\r\n    return RowCache;\r\n}());\r\nexport { RowCache };\r\nvar ViewItem = /** @class */ (function () {\r\n    function ViewItem(context, model) {\r\n        var _this = this;\r\n        this.width = 0;\r\n        this.needsRender = false;\r\n        this.uri = null;\r\n        this.unbindDragStart = Lifecycle.Disposable.None;\r\n        this._draggable = false;\r\n        this.context = context;\r\n        this.model = model;\r\n        this.id = this.model.id;\r\n        this.row = null;\r\n        this.top = 0;\r\n        this.height = model.getHeight();\r\n        this._styles = {};\r\n        model.getAllTraits().forEach(function (t) { return _this._styles[t] = true; });\r\n        if (model.isExpanded()) {\r\n            this.addClass('expanded');\r\n        }\r\n    }\r\n    Object.defineProperty(ViewItem.prototype, \"expanded\", {\r\n        set: function (value) {\r\n            value ? this.addClass('expanded') : this.removeClass('expanded');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"loading\", {\r\n        set: function (value) {\r\n            value ? this.addClass('codicon-loading') : this.removeClass('codicon-loading');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"draggable\", {\r\n        get: function () {\r\n            return this._draggable;\r\n        },\r\n        set: function (value) {\r\n            this._draggable = value;\r\n            this.render(true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"dropTarget\", {\r\n        set: function (value) {\r\n            value ? this.addClass('drop-target') : this.removeClass('drop-target');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"element\", {\r\n        get: function () {\r\n            return (this.row && this.row.element);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"templateId\", {\r\n        get: function () {\r\n            return this._templateId || (this._templateId = (this.context.renderer.getTemplateId && this.context.renderer.getTemplateId(this.context.tree, this.model.getElement())));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.addClass = function (name) {\r\n        this._styles[name] = true;\r\n        this.render(true);\r\n    };\r\n    ViewItem.prototype.removeClass = function (name) {\r\n        delete this._styles[name]; // is this slow?\r\n        this.render(true);\r\n    };\r\n    ViewItem.prototype.render = function (skipUserRender) {\r\n        var _this = this;\r\n        if (skipUserRender === void 0) { skipUserRender = false; }\r\n        if (!this.model || !this.element) {\r\n            return;\r\n        }\r\n        var classes = ['monaco-tree-row'];\r\n        classes.push.apply(classes, Object.keys(this._styles));\r\n        if (this.model.hasChildren()) {\r\n            classes.push('has-children');\r\n        }\r\n        this.element.className = classes.join(' ');\r\n        this.element.draggable = this.draggable;\r\n        this.element.style.height = this.height + 'px';\r\n        // ARIA\r\n        this.element.setAttribute('role', 'treeitem');\r\n        var accessibility = this.context.accessibilityProvider;\r\n        var ariaLabel = accessibility.getAriaLabel(this.context.tree, this.model.getElement());\r\n        if (ariaLabel) {\r\n            this.element.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        if (accessibility.getPosInSet && accessibility.getSetSize) {\r\n            this.element.setAttribute('aria-setsize', accessibility.getSetSize());\r\n            this.element.setAttribute('aria-posinset', accessibility.getPosInSet(this.context.tree, this.model.getElement()));\r\n        }\r\n        if (this.model.hasTrait('focused')) {\r\n            var base64Id = strings.safeBtoa(this.model.id);\r\n            this.element.setAttribute('aria-selected', 'true');\r\n            this.element.setAttribute('id', base64Id);\r\n        }\r\n        else {\r\n            this.element.setAttribute('aria-selected', 'false');\r\n            this.element.removeAttribute('id');\r\n        }\r\n        if (this.model.hasChildren()) {\r\n            this.element.setAttribute('aria-expanded', String(!!this._styles['expanded']));\r\n        }\r\n        else {\r\n            this.element.removeAttribute('aria-expanded');\r\n        }\r\n        this.element.setAttribute('aria-level', String(this.model.getDepth()));\r\n        if (this.context.options.paddingOnRow) {\r\n            this.element.style.paddingLeft = this.context.options.twistiePixels + ((this.model.getDepth() - 1) * this.context.options.indentPixels) + 'px';\r\n        }\r\n        else {\r\n            this.element.style.paddingLeft = ((this.model.getDepth() - 1) * this.context.options.indentPixels) + 'px';\r\n            this.row.element.firstElementChild.style.paddingLeft = this.context.options.twistiePixels + 'px';\r\n        }\r\n        var uri = this.context.dnd.getDragURI(this.context.tree, this.model.getElement());\r\n        if (uri !== this.uri) {\r\n            if (this.unbindDragStart) {\r\n                this.unbindDragStart.dispose();\r\n            }\r\n            if (uri) {\r\n                this.uri = uri;\r\n                this.draggable = true;\r\n                this.unbindDragStart = DOM.addDisposableListener(this.element, 'dragstart', function (e) {\r\n                    _this.onDragStart(e);\r\n                });\r\n            }\r\n            else {\r\n                this.uri = null;\r\n            }\r\n        }\r\n        if (!skipUserRender && this.element) {\r\n            var paddingLeft = 0;\r\n            if (this.context.horizontalScrolling) {\r\n                var style = window.getComputedStyle(this.element);\r\n                paddingLeft = parseFloat(style.paddingLeft);\r\n            }\r\n            if (this.context.horizontalScrolling) {\r\n                this.element.style.width = Browser.isFirefox ? '-moz-fit-content' : 'fit-content';\r\n            }\r\n            try {\r\n                this.context.renderer.renderElement(this.context.tree, this.model.getElement(), this.templateId, this.row.templateData);\r\n            }\r\n            catch (err) {\r\n                console.error('Tree usage error: exception while rendering element');\r\n                console.error(err);\r\n            }\r\n            if (this.context.horizontalScrolling) {\r\n                this.width = DOM.getContentWidth(this.element) + paddingLeft;\r\n                this.element.style.width = '';\r\n            }\r\n        }\r\n    };\r\n    ViewItem.prototype.insertInDOM = function (container, afterElement) {\r\n        if (!this.row) {\r\n            this.row = this.context.cache.alloc(this.templateId);\r\n            // used in reverse lookup from HTMLElement to Item\r\n            this.element[TreeView.BINDING] = this;\r\n        }\r\n        if (this.element.parentElement) {\r\n            return;\r\n        }\r\n        if (afterElement === null) {\r\n            container.appendChild(this.element);\r\n        }\r\n        else {\r\n            try {\r\n                container.insertBefore(this.element, afterElement);\r\n            }\r\n            catch (e) {\r\n                console.warn('Failed to locate previous tree element');\r\n                container.appendChild(this.element);\r\n            }\r\n        }\r\n        this.render();\r\n    };\r\n    ViewItem.prototype.removeFromDOM = function () {\r\n        if (!this.row) {\r\n            return;\r\n        }\r\n        this.unbindDragStart.dispose();\r\n        this.uri = null;\r\n        this.element[TreeView.BINDING] = null;\r\n        this.context.cache.release(this.templateId, this.row);\r\n        this.row = null;\r\n    };\r\n    ViewItem.prototype.dispose = function () {\r\n        this.row = null;\r\n    };\r\n    return ViewItem;\r\n}());\r\nexport { ViewItem };\r\nvar RootViewItem = /** @class */ (function (_super) {\r\n    __extends(RootViewItem, _super);\r\n    function RootViewItem(context, model, wrapper) {\r\n        var _this = _super.call(this, context, model) || this;\r\n        _this.row = {\r\n            element: wrapper,\r\n            templateData: null,\r\n            templateId: null\r\n        };\r\n        return _this;\r\n    }\r\n    RootViewItem.prototype.render = function () {\r\n        if (!this.model || !this.element) {\r\n            return;\r\n        }\r\n        var classes = ['monaco-tree-wrapper'];\r\n        classes.push.apply(classes, Object.keys(this._styles));\r\n        if (this.model.hasChildren()) {\r\n            classes.push('has-children');\r\n        }\r\n        this.element.className = classes.join(' ');\r\n    };\r\n    RootViewItem.prototype.insertInDOM = function (container, afterElement) {\r\n        // noop\r\n    };\r\n    RootViewItem.prototype.removeFromDOM = function () {\r\n        // noop\r\n    };\r\n    return RootViewItem;\r\n}(ViewItem));\r\nfunction reactionEquals(one, other) {\r\n    if (!one && !other) {\r\n        return true;\r\n    }\r\n    else if (!one || !other) {\r\n        return false;\r\n    }\r\n    else if (one.accept !== other.accept) {\r\n        return false;\r\n    }\r\n    else if (one.bubble !== other.bubble) {\r\n        return false;\r\n    }\r\n    else if (one.effect !== other.effect) {\r\n        return false;\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\nvar TreeView = /** @class */ (function (_super) {\r\n    __extends(TreeView, _super);\r\n    function TreeView(context, container) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = null;\r\n        _this.lastPointerType = '';\r\n        _this.lastClickTimeStamp = 0;\r\n        _this.contentWidthUpdateDelayer = new Delayer(50);\r\n        _this.isRefreshing = false;\r\n        _this.refreshingPreviousChildrenIds = {};\r\n        _this.currentDragAndDropData = null;\r\n        _this.currentDropTarget = null;\r\n        _this.currentDropTargets = null;\r\n        _this.currentDropDisposable = Lifecycle.Disposable.None;\r\n        _this.gestureDisposable = Lifecycle.Disposable.None;\r\n        _this.dragAndDropScrollInterval = null;\r\n        _this.dragAndDropScrollTimeout = null;\r\n        _this.dragAndDropMouseY = null;\r\n        _this.highlightedItemWasDraggable = false;\r\n        _this.onHiddenScrollTop = null;\r\n        _this._onDOMFocus = new Emitter();\r\n        _this.onDOMFocus = _this._onDOMFocus.event;\r\n        _this._onDOMBlur = new Emitter();\r\n        _this._onDidScroll = new Emitter();\r\n        TreeView.counter++;\r\n        _this.instance = TreeView.counter;\r\n        var horizontalScrollMode = typeof context.options.horizontalScrollMode === 'undefined' ? 2 /* Hidden */ : context.options.horizontalScrollMode;\r\n        _this.horizontalScrolling = horizontalScrollMode !== 2 /* Hidden */;\r\n        _this.context = {\r\n            dataSource: context.dataSource,\r\n            renderer: context.renderer,\r\n            controller: context.controller,\r\n            dnd: context.dnd,\r\n            filter: context.filter,\r\n            sorter: context.sorter,\r\n            tree: context.tree,\r\n            accessibilityProvider: context.accessibilityProvider,\r\n            options: context.options,\r\n            cache: new RowCache(context),\r\n            horizontalScrolling: _this.horizontalScrolling\r\n        };\r\n        _this.modelListeners = [];\r\n        _this.viewListeners = [];\r\n        _this.items = {};\r\n        _this.domNode = document.createElement('div');\r\n        _this.domNode.className = \"monaco-tree no-focused-item monaco-tree-instance-\" + _this.instance;\r\n        // to allow direct tabbing into the tree instead of first focusing the tree\r\n        _this.domNode.tabIndex = context.options.preventRootFocus ? -1 : 0;\r\n        _this.styleElement = DOM.createStyleSheet(_this.domNode);\r\n        _this.treeStyler = context.styler || new DefaultTreestyler(_this.styleElement, \"monaco-tree-instance-\" + _this.instance);\r\n        // ARIA\r\n        _this.domNode.setAttribute('role', 'tree');\r\n        if (_this.context.options.ariaLabel) {\r\n            _this.domNode.setAttribute('aria-label', _this.context.options.ariaLabel);\r\n        }\r\n        if (_this.context.options.alwaysFocused) {\r\n            DOM.addClass(_this.domNode, 'focused');\r\n        }\r\n        if (!_this.context.options.paddingOnRow) {\r\n            DOM.addClass(_this.domNode, 'no-row-padding');\r\n        }\r\n        _this.wrapper = document.createElement('div');\r\n        _this.wrapper.className = 'monaco-tree-wrapper';\r\n        _this.scrollableElement = new ScrollableElement(_this.wrapper, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: horizontalScrollMode,\r\n            vertical: (typeof context.options.verticalScrollMode !== 'undefined' ? context.options.verticalScrollMode : 1 /* Auto */),\r\n            useShadows: context.options.useShadows\r\n        });\r\n        _this.scrollableElement.onScroll(function (e) {\r\n            _this.render(e.scrollTop, e.height, e.scrollLeft, e.width, e.scrollWidth);\r\n            _this._onDidScroll.fire();\r\n        });\r\n        if (Browser.isIE) {\r\n            _this.wrapper.style.msTouchAction = 'none';\r\n            _this.wrapper.style.msContentZooming = 'none';\r\n        }\r\n        else {\r\n            _this.gestureDisposable = Touch.Gesture.addTarget(_this.wrapper);\r\n        }\r\n        _this.rowsContainer = document.createElement('div');\r\n        _this.rowsContainer.className = 'monaco-tree-rows';\r\n        if (context.options.showTwistie) {\r\n            _this.rowsContainer.className += ' show-twisties';\r\n        }\r\n        var focusTracker = DOM.trackFocus(_this.domNode);\r\n        _this.viewListeners.push(focusTracker.onDidFocus(function () { return _this.onFocus(); }));\r\n        _this.viewListeners.push(focusTracker.onDidBlur(function () { return _this.onBlur(); }));\r\n        _this.viewListeners.push(focusTracker);\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keydown', function (e) { return _this.onKeyDown(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keyup', function (e) { return _this.onKeyUp(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mousedown', function (e) { return _this.onMouseDown(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mouseup', function (e) { return _this.onMouseUp(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'auxclick', function (e) {\r\n            if (e && e.button === 1) {\r\n                _this.onMouseMiddleClick(e);\r\n            }\r\n        }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'click', function (e) { return _this.onClick(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'contextmenu', function (e) { return _this.onContextMenu(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Tap, function (e) { return _this.onTap(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Change, function (e) { return _this.onTouchChange(e); }));\r\n        if (Browser.isIE) {\r\n            _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSPointerDown', function (e) { return _this.onMsPointerDown(e); }));\r\n            _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSGestureTap', function (e) { return _this.onMsGestureTap(e); }));\r\n            // these events come too fast, we throttle them\r\n            _this.viewListeners.push(DOM.addDisposableThrottledListener(_this.wrapper, 'MSGestureChange', function (e) { return _this.onThrottledMsGestureChange(e); }, function (lastEvent, event) {\r\n                event.stopPropagation();\r\n                event.preventDefault();\r\n                var result = { translationY: event.translationY, translationX: event.translationX };\r\n                if (lastEvent) {\r\n                    result.translationY += lastEvent.translationY;\r\n                    result.translationX += lastEvent.translationX;\r\n                }\r\n                return result;\r\n            }));\r\n        }\r\n        _this.viewListeners.push(DOM.addDisposableListener(window, 'dragover', function (e) { return _this.onDragOver(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'drop', function (e) { return _this.onDrop(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(window, 'dragend', function (e) { return _this.onDragEnd(e); }));\r\n        _this.viewListeners.push(DOM.addDisposableListener(window, 'dragleave', function (e) { return _this.onDragOver(e); }));\r\n        _this.wrapper.appendChild(_this.rowsContainer);\r\n        _this.domNode.appendChild(_this.scrollableElement.getDomNode());\r\n        container.appendChild(_this.domNode);\r\n        _this.lastRenderTop = 0;\r\n        _this.lastRenderHeight = 0;\r\n        _this.didJustPressContextMenuKey = false;\r\n        _this.currentDropTarget = null;\r\n        _this.currentDropTargets = [];\r\n        _this.shouldInvalidateDropReaction = false;\r\n        _this.dragAndDropScrollInterval = null;\r\n        _this.dragAndDropScrollTimeout = null;\r\n        _this.onRowsChanged();\r\n        _this.layout();\r\n        _this.setupMSGesture();\r\n        _this.applyStyles(context.options);\r\n        return _this;\r\n    }\r\n    TreeView.prototype.applyStyles = function (styles) {\r\n        this.treeStyler.style(styles);\r\n    };\r\n    TreeView.prototype.createViewItem = function (item) {\r\n        return new ViewItem(this.context, item);\r\n    };\r\n    TreeView.prototype.getHTMLElement = function () {\r\n        return this.domNode;\r\n    };\r\n    TreeView.prototype.focus = function () {\r\n        this.domNode.focus();\r\n    };\r\n    TreeView.prototype.isFocused = function () {\r\n        return document.activeElement === this.domNode;\r\n    };\r\n    TreeView.prototype.blur = function () {\r\n        this.domNode.blur();\r\n    };\r\n    TreeView.prototype.setupMSGesture = function () {\r\n        var _this = this;\r\n        if (window.MSGesture) {\r\n            this.msGesture = new MSGesture();\r\n            setTimeout(function () { return _this.msGesture.target = _this.wrapper; }, 100); // TODO@joh, TODO@IETeam\r\n        }\r\n    };\r\n    TreeView.prototype.isTreeVisible = function () {\r\n        return this.onHiddenScrollTop === null;\r\n    };\r\n    TreeView.prototype.layout = function (height, width) {\r\n        if (!this.isTreeVisible()) {\r\n            return;\r\n        }\r\n        this.viewHeight = height || DOM.getContentHeight(this.wrapper); // render\r\n        this.scrollHeight = this.getContentHeight();\r\n        if (this.horizontalScrolling) {\r\n            this.viewWidth = width || DOM.getContentWidth(this.wrapper);\r\n        }\r\n    };\r\n    TreeView.prototype.render = function (scrollTop, viewHeight, scrollLeft, viewWidth, scrollWidth) {\r\n        var i;\r\n        var stop;\r\n        var renderTop = scrollTop;\r\n        var renderBottom = scrollTop + viewHeight;\r\n        var thisRenderBottom = this.lastRenderTop + this.lastRenderHeight;\r\n        // when view scrolls down, start rendering from the renderBottom\r\n        for (i = this.indexAfter(renderBottom) - 1, stop = this.indexAt(Math.max(thisRenderBottom, renderTop)); i >= stop; i--) {\r\n            this.insertItemInDOM(this.itemAtIndex(i));\r\n        }\r\n        // when view scrolls up, start rendering from either this.renderTop or renderBottom\r\n        for (i = Math.min(this.indexAt(this.lastRenderTop), this.indexAfter(renderBottom)) - 1, stop = this.indexAt(renderTop); i >= stop; i--) {\r\n            this.insertItemInDOM(this.itemAtIndex(i));\r\n        }\r\n        // when view scrolls down, start unrendering from renderTop\r\n        for (i = this.indexAt(this.lastRenderTop), stop = Math.min(this.indexAt(renderTop), this.indexAfter(thisRenderBottom)); i < stop; i++) {\r\n            this.removeItemFromDOM(this.itemAtIndex(i));\r\n        }\r\n        // when view scrolls up, start unrendering from either renderBottom this.renderTop\r\n        for (i = Math.max(this.indexAfter(renderBottom), this.indexAt(this.lastRenderTop)), stop = this.indexAfter(thisRenderBottom); i < stop; i++) {\r\n            this.removeItemFromDOM(this.itemAtIndex(i));\r\n        }\r\n        var topItem = this.itemAtIndex(this.indexAt(renderTop));\r\n        if (topItem) {\r\n            this.rowsContainer.style.top = (topItem.top - renderTop) + 'px';\r\n        }\r\n        if (this.horizontalScrolling) {\r\n            this.rowsContainer.style.left = -scrollLeft + 'px';\r\n            this.rowsContainer.style.width = Math.max(scrollWidth, viewWidth) + \"px\";\r\n        }\r\n        this.lastRenderTop = renderTop;\r\n        this.lastRenderHeight = renderBottom - renderTop;\r\n    };\r\n    TreeView.prototype.setModel = function (newModel) {\r\n        this.releaseModel();\r\n        this.model = newModel;\r\n        this.model.onRefresh(this.onRefreshing, this, this.modelListeners);\r\n        this.model.onDidRefresh(this.onRefreshed, this, this.modelListeners);\r\n        this.model.onSetInput(this.onClearingInput, this, this.modelListeners);\r\n        this.model.onDidSetInput(this.onSetInput, this, this.modelListeners);\r\n        this.model.onDidFocus(this.onModelFocusChange, this, this.modelListeners);\r\n        this.model.onRefreshItemChildren(this.onItemChildrenRefreshing, this, this.modelListeners);\r\n        this.model.onDidRefreshItemChildren(this.onItemChildrenRefreshed, this, this.modelListeners);\r\n        this.model.onDidRefreshItem(this.onItemRefresh, this, this.modelListeners);\r\n        this.model.onExpandItem(this.onItemExpanding, this, this.modelListeners);\r\n        this.model.onDidExpandItem(this.onItemExpanded, this, this.modelListeners);\r\n        this.model.onCollapseItem(this.onItemCollapsing, this, this.modelListeners);\r\n        this.model.onDidRevealItem(this.onItemReveal, this, this.modelListeners);\r\n        this.model.onDidAddTraitItem(this.onItemAddTrait, this, this.modelListeners);\r\n        this.model.onDidRemoveTraitItem(this.onItemRemoveTrait, this, this.modelListeners);\r\n    };\r\n    TreeView.prototype.onRefreshing = function () {\r\n        this.isRefreshing = true;\r\n    };\r\n    TreeView.prototype.onRefreshed = function () {\r\n        this.isRefreshing = false;\r\n        this.onRowsChanged();\r\n    };\r\n    TreeView.prototype.onRowsChanged = function (scrollTop) {\r\n        if (scrollTop === void 0) { scrollTop = this.scrollTop; }\r\n        if (this.isRefreshing) {\r\n            return;\r\n        }\r\n        this.scrollTop = scrollTop;\r\n        this.updateScrollWidth();\r\n    };\r\n    TreeView.prototype.updateScrollWidth = function () {\r\n        var _this = this;\r\n        if (!this.horizontalScrolling) {\r\n            return;\r\n        }\r\n        this.contentWidthUpdateDelayer.trigger(function () {\r\n            var keys = Object.keys(_this.items);\r\n            var scrollWidth = 0;\r\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n                var key = keys_1[_i];\r\n                scrollWidth = Math.max(scrollWidth, _this.items[key].width);\r\n            }\r\n            _this.scrollWidth = scrollWidth + 10 /* scrollbar */;\r\n        });\r\n    };\r\n    TreeView.prototype.focusNextPage = function (eventPayload) {\r\n        var _this = this;\r\n        var lastPageIndex = this.indexAt(this.scrollTop + this.viewHeight);\r\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\r\n        var lastPageElement = this.itemAtIndex(lastPageIndex).model.getElement();\r\n        var currentlyFocusedElement = this.model.getFocus();\r\n        if (currentlyFocusedElement !== lastPageElement) {\r\n            this.model.setFocus(lastPageElement, eventPayload);\r\n        }\r\n        else {\r\n            var previousScrollTop = this.scrollTop;\r\n            this.scrollTop += this.viewHeight;\r\n            if (this.scrollTop !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () {\r\n                    _this.focusNextPage(eventPayload);\r\n                }, 0);\r\n            }\r\n        }\r\n    };\r\n    TreeView.prototype.focusPreviousPage = function (eventPayload) {\r\n        var _this = this;\r\n        var firstPageIndex;\r\n        if (this.scrollTop === 0) {\r\n            firstPageIndex = this.indexAt(this.scrollTop);\r\n        }\r\n        else {\r\n            firstPageIndex = this.indexAfter(this.scrollTop - 1);\r\n        }\r\n        var firstPageElement = this.itemAtIndex(firstPageIndex).model.getElement();\r\n        var currentlyFocusedElement = this.model.getFocus();\r\n        if (currentlyFocusedElement !== firstPageElement) {\r\n            this.model.setFocus(firstPageElement, eventPayload);\r\n        }\r\n        else {\r\n            var previousScrollTop = this.scrollTop;\r\n            this.scrollTop -= this.viewHeight;\r\n            if (this.scrollTop !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () {\r\n                    _this.focusPreviousPage(eventPayload);\r\n                }, 0);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(TreeView.prototype, \"viewHeight\", {\r\n        get: function () {\r\n            var scrollDimensions = this.scrollableElement.getScrollDimensions();\r\n            return scrollDimensions.height;\r\n        },\r\n        set: function (height) {\r\n            this.scrollableElement.setScrollDimensions({ height: height });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeView.prototype, \"scrollHeight\", {\r\n        set: function (scrollHeight) {\r\n            scrollHeight = scrollHeight + (this.horizontalScrolling ? 10 : 0);\r\n            this.scrollableElement.setScrollDimensions({ scrollHeight: scrollHeight });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeView.prototype, \"viewWidth\", {\r\n        get: function () {\r\n            var scrollDimensions = this.scrollableElement.getScrollDimensions();\r\n            return scrollDimensions.width;\r\n        },\r\n        set: function (viewWidth) {\r\n            this.scrollableElement.setScrollDimensions({ width: viewWidth });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeView.prototype, \"scrollWidth\", {\r\n        set: function (scrollWidth) {\r\n            this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeView.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            var scrollPosition = this.scrollableElement.getScrollPosition();\r\n            return scrollPosition.scrollTop;\r\n        },\r\n        set: function (scrollTop) {\r\n            var scrollHeight = this.getContentHeight() + (this.horizontalScrolling ? 10 : 0);\r\n            this.scrollableElement.setScrollDimensions({ scrollHeight: scrollHeight });\r\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // Events\r\n    TreeView.prototype.onClearingInput = function (e) {\r\n        var item = e.item;\r\n        if (item) {\r\n            this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) { return item && item.id; }));\r\n            this.onRowsChanged();\r\n        }\r\n    };\r\n    TreeView.prototype.onSetInput = function (e) {\r\n        this.context.cache.garbageCollect();\r\n        this.inputItem = new RootViewItem(this.context, e.item, this.wrapper);\r\n    };\r\n    TreeView.prototype.onItemChildrenRefreshing = function (e) {\r\n        var item = e.item;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem && this.context.options.showLoading) {\r\n            viewItem.loadingTimer = setTimeout(function () {\r\n                viewItem.loadingTimer = 0;\r\n                viewItem.loading = true;\r\n            }, TreeView.LOADING_DECORATION_DELAY);\r\n        }\r\n        if (!e.isNested) {\r\n            var childrenIds = [];\r\n            var navigator_1 = item.getNavigator();\r\n            var childItem = void 0;\r\n            while (childItem = navigator_1.next()) {\r\n                childrenIds.push(childItem.id);\r\n            }\r\n            this.refreshingPreviousChildrenIds[item.id] = childrenIds;\r\n        }\r\n    };\r\n    TreeView.prototype.onItemChildrenRefreshed = function (e) {\r\n        var _this = this;\r\n        var item = e.item;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            if (viewItem.loadingTimer) {\r\n                clearTimeout(viewItem.loadingTimer);\r\n                viewItem.loadingTimer = 0;\r\n            }\r\n            viewItem.loading = false;\r\n        }\r\n        if (!e.isNested) {\r\n            var previousChildrenIds_1 = this.refreshingPreviousChildrenIds[item.id];\r\n            var afterModelItems_1 = [];\r\n            var navigator_2 = item.getNavigator();\r\n            var childItem = void 0;\r\n            while (childItem = navigator_2.next()) {\r\n                afterModelItems_1.push(childItem);\r\n            }\r\n            var skipDiff = Math.abs(previousChildrenIds_1.length - afterModelItems_1.length) > 1000;\r\n            var diff = [];\r\n            var doToInsertItemsAlreadyExist = false;\r\n            if (!skipDiff) {\r\n                var lcs = new Diff.LcsDiff({\r\n                    getElements: function () { return previousChildrenIds_1; }\r\n                }, {\r\n                    getElements: function () { return afterModelItems_1.map(function (item) { return item.id; }); }\r\n                }, null);\r\n                diff = lcs.ComputeDiff(false).changes;\r\n                // this means that the result of the diff algorithm would result\r\n                // in inserting items that were already registered. this can only\r\n                // happen if the data provider returns bad ids OR if the sorting\r\n                // of the elements has changed\r\n                doToInsertItemsAlreadyExist = diff.some(function (d) {\r\n                    if (d.modifiedLength > 0) {\r\n                        for (var i = d.modifiedStart, len = d.modifiedStart + d.modifiedLength; i < len; i++) {\r\n                            if (_this.items.hasOwnProperty(afterModelItems_1[i].id)) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                });\r\n            }\r\n            // 50 is an optimization number, at some point we're better off\r\n            // just replacing everything\r\n            if (!skipDiff && !doToInsertItemsAlreadyExist && diff.length < 50) {\r\n                for (var _i = 0, diff_1 = diff; _i < diff_1.length; _i++) {\r\n                    var diffChange = diff_1[_i];\r\n                    if (diffChange.originalLength > 0) {\r\n                        this.onRemoveItems(new ArrayIterator(previousChildrenIds_1, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength));\r\n                    }\r\n                    if (diffChange.modifiedLength > 0) {\r\n                        var beforeItem = afterModelItems_1[diffChange.modifiedStart - 1] || item;\r\n                        beforeItem = beforeItem.getDepth() > 0 ? beforeItem : null;\r\n                        this.onInsertItems(new ArrayIterator(afterModelItems_1, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength), beforeItem ? beforeItem.id : null);\r\n                    }\r\n                }\r\n            }\r\n            else if (skipDiff || diff.length) {\r\n                this.onRemoveItems(new ArrayIterator(previousChildrenIds_1));\r\n                this.onInsertItems(new ArrayIterator(afterModelItems_1), item.getDepth() > 0 ? item.id : null);\r\n            }\r\n            if (skipDiff || diff.length) {\r\n                this.onRowsChanged();\r\n            }\r\n        }\r\n    };\r\n    TreeView.prototype.onItemRefresh = function (item) {\r\n        this.onItemsRefresh([item]);\r\n    };\r\n    TreeView.prototype.onItemsRefresh = function (items) {\r\n        var _this = this;\r\n        this.onRefreshItemSet(items.filter(function (item) { return _this.items.hasOwnProperty(item.id); }));\r\n        this.onRowsChanged();\r\n    };\r\n    TreeView.prototype.onItemExpanding = function (e) {\r\n        var viewItem = this.items[e.item.id];\r\n        if (viewItem) {\r\n            viewItem.expanded = true;\r\n        }\r\n    };\r\n    TreeView.prototype.onItemExpanded = function (e) {\r\n        var item = e.item;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            viewItem.expanded = true;\r\n            var height = this.onInsertItems(item.getNavigator(), item.id) || 0;\r\n            var scrollTop = this.scrollTop;\r\n            if (viewItem.top + viewItem.height <= this.scrollTop) {\r\n                scrollTop += height;\r\n            }\r\n            this.onRowsChanged(scrollTop);\r\n        }\r\n    };\r\n    TreeView.prototype.onItemCollapsing = function (e) {\r\n        var item = e.item;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            viewItem.expanded = false;\r\n            this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) { return item && item.id; }));\r\n            this.onRowsChanged();\r\n        }\r\n    };\r\n    TreeView.prototype.onItemReveal = function (e) {\r\n        var item = e.item;\r\n        var relativeTop = e.relativeTop;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            if (relativeTop !== null) {\r\n                relativeTop = relativeTop < 0 ? 0 : relativeTop;\r\n                relativeTop = relativeTop > 1 ? 1 : relativeTop;\r\n                // y = mx + b\r\n                var m = viewItem.height - this.viewHeight;\r\n                this.scrollTop = m * relativeTop + viewItem.top;\r\n            }\r\n            else {\r\n                var viewItemBottom = viewItem.top + viewItem.height;\r\n                var wrapperBottom = this.scrollTop + this.viewHeight;\r\n                if (viewItem.top < this.scrollTop) {\r\n                    this.scrollTop = viewItem.top;\r\n                }\r\n                else if (viewItemBottom >= wrapperBottom) {\r\n                    this.scrollTop = viewItemBottom - this.viewHeight;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TreeView.prototype.onItemAddTrait = function (e) {\r\n        var item = e.item;\r\n        var trait = e.trait;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            viewItem.addClass(trait);\r\n        }\r\n        if (trait === 'highlighted') {\r\n            DOM.addClass(this.domNode, trait);\r\n            // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\r\n            if (viewItem) {\r\n                this.highlightedItemWasDraggable = !!viewItem.draggable;\r\n                if (viewItem.draggable) {\r\n                    viewItem.draggable = false;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TreeView.prototype.onItemRemoveTrait = function (e) {\r\n        var item = e.item;\r\n        var trait = e.trait;\r\n        var viewItem = this.items[item.id];\r\n        if (viewItem) {\r\n            viewItem.removeClass(trait);\r\n        }\r\n        if (trait === 'highlighted') {\r\n            DOM.removeClass(this.domNode, trait);\r\n            // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\r\n            if (this.highlightedItemWasDraggable) {\r\n                viewItem.draggable = true;\r\n            }\r\n            this.highlightedItemWasDraggable = false;\r\n        }\r\n    };\r\n    TreeView.prototype.onModelFocusChange = function () {\r\n        var focus = this.model && this.model.getFocus();\r\n        DOM.toggleClass(this.domNode, 'no-focused-item', !focus);\r\n        // ARIA\r\n        if (focus) {\r\n            this.domNode.setAttribute('aria-activedescendant', strings.safeBtoa(this.context.dataSource.getId(this.context.tree, focus)));\r\n        }\r\n        else {\r\n            this.domNode.removeAttribute('aria-activedescendant');\r\n        }\r\n    };\r\n    // HeightMap \"events\"\r\n    TreeView.prototype.onInsertItem = function (item) {\r\n        var _this = this;\r\n        item.onDragStart = function (e) { _this.onDragStart(item, e); };\r\n        item.needsRender = true;\r\n        this.refreshViewItem(item);\r\n        this.items[item.id] = item;\r\n    };\r\n    TreeView.prototype.onRefreshItem = function (item, needsRender) {\r\n        if (needsRender === void 0) { needsRender = false; }\r\n        item.needsRender = item.needsRender || needsRender;\r\n        this.refreshViewItem(item);\r\n    };\r\n    TreeView.prototype.onRemoveItem = function (item) {\r\n        this.removeItemFromDOM(item);\r\n        item.dispose();\r\n        delete this.items[item.id];\r\n    };\r\n    // ViewItem refresh\r\n    TreeView.prototype.refreshViewItem = function (item) {\r\n        item.render();\r\n        if (this.shouldBeRendered(item)) {\r\n            this.insertItemInDOM(item);\r\n        }\r\n        else {\r\n            this.removeItemFromDOM(item);\r\n        }\r\n    };\r\n    // DOM Events\r\n    TreeView.prototype.onClick = function (e) {\r\n        if (this.lastPointerType && this.lastPointerType !== 'mouse') {\r\n            return;\r\n        }\r\n        var event = new Mouse.StandardMouseEvent(e);\r\n        var item = this.getItemAround(event.target);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (Browser.isIE && Date.now() - this.lastClickTimeStamp < 300) {\r\n            // IE10+ doesn't set the detail property correctly. While IE10 simply\r\n            // counts the number of clicks, IE11 reports always 1. To align with\r\n            // other browser, we set the value to 2 if clicks events come in a 300ms\r\n            // sequence.\r\n            event.detail = 2;\r\n        }\r\n        this.lastClickTimeStamp = Date.now();\r\n        this.context.controller.onClick(this.context.tree, item.model.getElement(), event);\r\n    };\r\n    TreeView.prototype.onMouseMiddleClick = function (e) {\r\n        if (!this.context.controller.onMouseMiddleClick) {\r\n            return;\r\n        }\r\n        var event = new Mouse.StandardMouseEvent(e);\r\n        var item = this.getItemAround(event.target);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.context.controller.onMouseMiddleClick(this.context.tree, item.model.getElement(), event);\r\n    };\r\n    TreeView.prototype.onMouseDown = function (e) {\r\n        this.didJustPressContextMenuKey = false;\r\n        if (!this.context.controller.onMouseDown) {\r\n            return;\r\n        }\r\n        if (this.lastPointerType && this.lastPointerType !== 'mouse') {\r\n            return;\r\n        }\r\n        var event = new Mouse.StandardMouseEvent(e);\r\n        if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\r\n            return;\r\n        }\r\n        var item = this.getItemAround(event.target);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.context.controller.onMouseDown(this.context.tree, item.model.getElement(), event);\r\n    };\r\n    TreeView.prototype.onMouseUp = function (e) {\r\n        if (!this.context.controller.onMouseUp) {\r\n            return;\r\n        }\r\n        if (this.lastPointerType && this.lastPointerType !== 'mouse') {\r\n            return;\r\n        }\r\n        var event = new Mouse.StandardMouseEvent(e);\r\n        if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\r\n            return;\r\n        }\r\n        var item = this.getItemAround(event.target);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.context.controller.onMouseUp(this.context.tree, item.model.getElement(), event);\r\n    };\r\n    TreeView.prototype.onTap = function (e) {\r\n        var item = this.getItemAround(e.initialTarget);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.context.controller.onTap(this.context.tree, item.model.getElement(), e);\r\n    };\r\n    TreeView.prototype.onTouchChange = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.scrollTop -= event.translationY;\r\n    };\r\n    TreeView.prototype.onContextMenu = function (event) {\r\n        var resultEvent;\r\n        var element;\r\n        if (event instanceof KeyboardEvent || this.didJustPressContextMenuKey) {\r\n            this.didJustPressContextMenuKey = false;\r\n            var keyboardEvent = new Keyboard.StandardKeyboardEvent(event);\r\n            element = this.model.getFocus();\r\n            var position = void 0;\r\n            if (!element) {\r\n                element = this.model.getInput();\r\n                position = DOM.getDomNodePagePosition(this.inputItem.element);\r\n            }\r\n            else {\r\n                var id = this.context.dataSource.getId(this.context.tree, element);\r\n                var viewItem = this.items[id];\r\n                position = DOM.getDomNodePagePosition(viewItem.element);\r\n            }\r\n            resultEvent = new _.KeyboardContextMenuEvent(position.left + position.width, position.top, keyboardEvent);\r\n        }\r\n        else {\r\n            var mouseEvent = new Mouse.StandardMouseEvent(event);\r\n            var item = this.getItemAround(mouseEvent.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            element = item.model.getElement();\r\n            resultEvent = new _.MouseContextMenuEvent(mouseEvent);\r\n        }\r\n        this.context.controller.onContextMenu(this.context.tree, element, resultEvent);\r\n    };\r\n    TreeView.prototype.onKeyDown = function (e) {\r\n        var event = new Keyboard.StandardKeyboardEvent(e);\r\n        this.didJustPressContextMenuKey = event.keyCode === 58 /* ContextMenu */ || (event.shiftKey && event.keyCode === 68 /* F10 */);\r\n        if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\r\n            return; // Ignore event if target is a form input field (avoids browser specific issues)\r\n        }\r\n        if (this.didJustPressContextMenuKey) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n        this.context.controller.onKeyDown(this.context.tree, event);\r\n    };\r\n    TreeView.prototype.onKeyUp = function (e) {\r\n        if (this.didJustPressContextMenuKey) {\r\n            this.onContextMenu(e);\r\n        }\r\n        this.didJustPressContextMenuKey = false;\r\n        this.context.controller.onKeyUp(this.context.tree, new Keyboard.StandardKeyboardEvent(e));\r\n    };\r\n    TreeView.prototype.onDragStart = function (item, e) {\r\n        if (this.model.getHighlight()) {\r\n            return;\r\n        }\r\n        var element = item.model.getElement();\r\n        var selection = this.model.getSelection();\r\n        var elements;\r\n        if (selection.indexOf(element) > -1) {\r\n            elements = selection;\r\n        }\r\n        else {\r\n            elements = [element];\r\n        }\r\n        e.dataTransfer.effectAllowed = 'copyMove';\r\n        e.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([item.uri]));\r\n        if (e.dataTransfer.setDragImage) {\r\n            var label = void 0;\r\n            if (this.context.dnd.getDragLabel) {\r\n                label = this.context.dnd.getDragLabel(this.context.tree, elements);\r\n            }\r\n            else {\r\n                label = String(elements.length);\r\n            }\r\n            var dragImage_1 = document.createElement('div');\r\n            dragImage_1.className = 'monaco-tree-drag-image';\r\n            dragImage_1.textContent = label;\r\n            document.body.appendChild(dragImage_1);\r\n            e.dataTransfer.setDragImage(dragImage_1, -10, -10);\r\n            setTimeout(function () { return document.body.removeChild(dragImage_1); }, 0);\r\n        }\r\n        this.currentDragAndDropData = new dnd.ElementsDragAndDropData(elements);\r\n        StaticDND.CurrentDragAndDropData = new dnd.ExternalElementsDragAndDropData(elements);\r\n        this.context.dnd.onDragStart(this.context.tree, this.currentDragAndDropData, new Mouse.DragMouseEvent(e));\r\n    };\r\n    TreeView.prototype.setupDragAndDropScrollInterval = function () {\r\n        var _this = this;\r\n        var viewTop = DOM.getTopLeftOffset(this.wrapper).top;\r\n        if (!this.dragAndDropScrollInterval) {\r\n            this.dragAndDropScrollInterval = window.setInterval(function () {\r\n                if (_this.dragAndDropMouseY === null) {\r\n                    return;\r\n                }\r\n                var diff = _this.dragAndDropMouseY - viewTop;\r\n                var scrollDiff = 0;\r\n                var upperLimit = _this.viewHeight - 35;\r\n                if (diff < 35) {\r\n                    scrollDiff = Math.max(-14, 0.2 * (diff - 35));\r\n                }\r\n                else if (diff > upperLimit) {\r\n                    scrollDiff = Math.min(14, 0.2 * (diff - upperLimit));\r\n                }\r\n                _this.scrollTop += scrollDiff;\r\n            }, 10);\r\n            this.cancelDragAndDropScrollTimeout();\r\n            this.dragAndDropScrollTimeout = window.setTimeout(function () {\r\n                _this.cancelDragAndDropScrollInterval();\r\n                _this.dragAndDropScrollTimeout = null;\r\n            }, 1000);\r\n        }\r\n    };\r\n    TreeView.prototype.cancelDragAndDropScrollInterval = function () {\r\n        if (this.dragAndDropScrollInterval) {\r\n            window.clearInterval(this.dragAndDropScrollInterval);\r\n            this.dragAndDropScrollInterval = null;\r\n        }\r\n        this.cancelDragAndDropScrollTimeout();\r\n    };\r\n    TreeView.prototype.cancelDragAndDropScrollTimeout = function () {\r\n        if (this.dragAndDropScrollTimeout) {\r\n            window.clearTimeout(this.dragAndDropScrollTimeout);\r\n            this.dragAndDropScrollTimeout = null;\r\n        }\r\n    };\r\n    TreeView.prototype.onDragOver = function (e) {\r\n        var _this = this;\r\n        e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\r\n        var event = new Mouse.DragMouseEvent(e);\r\n        var viewItem = this.getItemAround(event.target);\r\n        if (!viewItem || (event.posx === 0 && event.posy === 0 && event.browserEvent.type === DOM.EventType.DRAG_LEAVE)) {\r\n            // dragging outside of tree\r\n            if (this.currentDropTarget) {\r\n                // clear previously hovered element feedback\r\n                this.currentDropTargets.forEach(function (i) { return i.dropTarget = false; });\r\n                this.currentDropTargets = [];\r\n                this.currentDropDisposable.dispose();\r\n            }\r\n            this.cancelDragAndDropScrollInterval();\r\n            this.currentDropTarget = null;\r\n            this.currentDropElement = null;\r\n            this.dragAndDropMouseY = null;\r\n            return false;\r\n        }\r\n        // dragging inside the tree\r\n        this.setupDragAndDropScrollInterval();\r\n        this.dragAndDropMouseY = event.posy;\r\n        if (!this.currentDragAndDropData) {\r\n            // just started dragging\r\n            if (StaticDND.CurrentDragAndDropData) {\r\n                this.currentDragAndDropData = StaticDND.CurrentDragAndDropData;\r\n            }\r\n            else {\r\n                if (!event.dataTransfer.types) {\r\n                    return false;\r\n                }\r\n                this.currentDragAndDropData = new dnd.DesktopDragAndDropData();\r\n            }\r\n        }\r\n        this.currentDragAndDropData.update(event.browserEvent.dataTransfer);\r\n        var element;\r\n        var item = viewItem.model;\r\n        var reaction;\r\n        // check the bubble up behavior\r\n        do {\r\n            element = item ? item.getElement() : this.model.getInput();\r\n            reaction = this.context.dnd.onDragOver(this.context.tree, this.currentDragAndDropData, element, event);\r\n            if (!reaction || reaction.bubble !== 1 /* BUBBLE_UP */) {\r\n                break;\r\n            }\r\n            item = item && item.parent;\r\n        } while (item);\r\n        if (!item) {\r\n            this.currentDropElement = null;\r\n            return false;\r\n        }\r\n        var canDrop = reaction && reaction.accept;\r\n        if (canDrop) {\r\n            this.currentDropElement = item.getElement();\r\n            event.preventDefault();\r\n            event.dataTransfer.dropEffect = reaction.effect === 0 /* COPY */ ? 'copy' : 'move';\r\n        }\r\n        else {\r\n            this.currentDropElement = null;\r\n        }\r\n        // item is the model item where drop() should be called\r\n        // can be null\r\n        var currentDropTarget = item.id === this.inputItem.id ? this.inputItem : this.items[item.id];\r\n        if (this.shouldInvalidateDropReaction || this.currentDropTarget !== currentDropTarget || !reactionEquals(this.currentDropElementReaction, reaction)) {\r\n            this.shouldInvalidateDropReaction = false;\r\n            if (this.currentDropTarget) {\r\n                this.currentDropTargets.forEach(function (i) { return i.dropTarget = false; });\r\n                this.currentDropTargets = [];\r\n                this.currentDropDisposable.dispose();\r\n            }\r\n            this.currentDropTarget = currentDropTarget;\r\n            this.currentDropElementReaction = reaction;\r\n            if (canDrop) {\r\n                // setup hover feedback for drop target\r\n                if (this.currentDropTarget) {\r\n                    this.currentDropTarget.dropTarget = true;\r\n                    this.currentDropTargets.push(this.currentDropTarget);\r\n                }\r\n                if (reaction.bubble === 0 /* BUBBLE_DOWN */) {\r\n                    var nav = item.getNavigator();\r\n                    var child = void 0;\r\n                    while (child = nav.next()) {\r\n                        viewItem = this.items[child.id];\r\n                        if (viewItem) {\r\n                            viewItem.dropTarget = true;\r\n                            this.currentDropTargets.push(viewItem);\r\n                        }\r\n                    }\r\n                }\r\n                if (reaction.autoExpand) {\r\n                    var timeoutPromise_1 = timeout(500);\r\n                    this.currentDropDisposable = Lifecycle.toDisposable(function () { return timeoutPromise_1.cancel(); });\r\n                    timeoutPromise_1\r\n                        .then(function () { return _this.context.tree.expand(_this.currentDropElement); })\r\n                        .then(function () { return _this.shouldInvalidateDropReaction = true; });\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    TreeView.prototype.onDrop = function (e) {\r\n        if (this.currentDropElement) {\r\n            var event_1 = new Mouse.DragMouseEvent(e);\r\n            event_1.preventDefault();\r\n            this.currentDragAndDropData.update(event_1.browserEvent.dataTransfer);\r\n            this.context.dnd.drop(this.context.tree, this.currentDragAndDropData, this.currentDropElement, event_1);\r\n            this.onDragEnd(e);\r\n        }\r\n        this.cancelDragAndDropScrollInterval();\r\n    };\r\n    TreeView.prototype.onDragEnd = function (e) {\r\n        if (this.currentDropTarget) {\r\n            this.currentDropTargets.forEach(function (i) { return i.dropTarget = false; });\r\n            this.currentDropTargets = [];\r\n        }\r\n        this.currentDropDisposable.dispose();\r\n        this.cancelDragAndDropScrollInterval();\r\n        this.currentDragAndDropData = null;\r\n        StaticDND.CurrentDragAndDropData = undefined;\r\n        this.currentDropElement = null;\r\n        this.currentDropTarget = null;\r\n        this.dragAndDropMouseY = null;\r\n    };\r\n    TreeView.prototype.onFocus = function () {\r\n        if (!this.context.options.alwaysFocused) {\r\n            DOM.addClass(this.domNode, 'focused');\r\n        }\r\n        this._onDOMFocus.fire();\r\n    };\r\n    TreeView.prototype.onBlur = function () {\r\n        if (!this.context.options.alwaysFocused) {\r\n            DOM.removeClass(this.domNode, 'focused');\r\n        }\r\n        this.domNode.removeAttribute('aria-activedescendant'); // ARIA\r\n        this._onDOMBlur.fire();\r\n    };\r\n    // MS specific DOM Events\r\n    TreeView.prototype.onMsPointerDown = function (event) {\r\n        if (!this.msGesture) {\r\n            return;\r\n        }\r\n        // Circumvent IE11 breaking change in e.pointerType & TypeScript's stale definitions\r\n        var pointerType = event.pointerType;\r\n        if (pointerType === (event.MSPOINTER_TYPE_MOUSE || 'mouse')) {\r\n            this.lastPointerType = 'mouse';\r\n            return;\r\n        }\r\n        else if (pointerType === (event.MSPOINTER_TYPE_TOUCH || 'touch')) {\r\n            this.lastPointerType = 'touch';\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        this.msGesture.addPointer(event.pointerId);\r\n    };\r\n    TreeView.prototype.onThrottledMsGestureChange = function (event) {\r\n        this.scrollTop -= event.translationY;\r\n    };\r\n    TreeView.prototype.onMsGestureTap = function (event) {\r\n        event.initialTarget = document.elementFromPoint(event.clientX, event.clientY);\r\n        this.onTap(event);\r\n    };\r\n    // DOM changes\r\n    TreeView.prototype.insertItemInDOM = function (item) {\r\n        var elementAfter = null;\r\n        var itemAfter = this.itemAfter(item);\r\n        if (itemAfter && itemAfter.element) {\r\n            elementAfter = itemAfter.element;\r\n        }\r\n        item.insertInDOM(this.rowsContainer, elementAfter);\r\n    };\r\n    TreeView.prototype.removeItemFromDOM = function (item) {\r\n        if (!item) {\r\n            return;\r\n        }\r\n        item.removeFromDOM();\r\n    };\r\n    // Helpers\r\n    TreeView.prototype.shouldBeRendered = function (item) {\r\n        return item.top < this.lastRenderTop + this.lastRenderHeight && item.top + item.height > this.lastRenderTop;\r\n    };\r\n    TreeView.prototype.getItemAround = function (element) {\r\n        var candidate = this.inputItem;\r\n        var el = element;\r\n        do {\r\n            if (el[TreeView.BINDING]) {\r\n                candidate = el[TreeView.BINDING];\r\n            }\r\n            if (el === this.wrapper || el === this.domNode) {\r\n                return candidate;\r\n            }\r\n            if (el === this.scrollableElement.getDomNode() || el === document.body) {\r\n                return undefined;\r\n            }\r\n        } while (el = el.parentElement);\r\n        return undefined;\r\n    };\r\n    // Cleanup\r\n    TreeView.prototype.releaseModel = function () {\r\n        if (this.model) {\r\n            this.modelListeners = Lifecycle.dispose(this.modelListeners);\r\n            this.model = null;\r\n        }\r\n    };\r\n    TreeView.prototype.dispose = function () {\r\n        var _this = this;\r\n        // TODO@joao: improve\r\n        this.scrollableElement.dispose();\r\n        this.releaseModel();\r\n        this.viewListeners = Lifecycle.dispose(this.viewListeners);\r\n        this._onDOMFocus.dispose();\r\n        this._onDOMBlur.dispose();\r\n        if (this.domNode.parentNode) {\r\n            this.domNode.parentNode.removeChild(this.domNode);\r\n        }\r\n        if (this.items) {\r\n            Object.keys(this.items).forEach(function (key) { return _this.items[key].removeFromDOM(); });\r\n        }\r\n        if (this.context.cache) {\r\n            this.context.cache.dispose();\r\n        }\r\n        this.gestureDisposable.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    TreeView.BINDING = 'monaco-tree-row';\r\n    TreeView.LOADING_DECORATION_DELAY = 800;\r\n    TreeView.counter = 0;\r\n    return TreeView;\r\n}(HeightMap));\r\nexport { TreeView };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}