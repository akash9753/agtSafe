{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n          case 7:\n            op = _.ops.pop();\n            _.trys.pop();\n            continue;\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n              _.ops.push(op);\n              break;\n            }\n            if (t[2]) _.ops.pop();\n            _.trys.pop();\n            continue;\n        }\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport './media/suggest.css';\nimport './media/suggestStatusBar.css';\nimport '../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\nimport * as nls from '../../../nls.js';\nimport { createMatches } from '../../../base/common/filters.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Event, Emitter } from '../../../base/common/event.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { dispose, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass, addDisposableListener, addStandardDisposableListener, addClasses } from '../../../base/browser/dom.js';\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { TimeoutTimer, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { completionKindToCssClass } from '../../common/modes.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { flatten } from '../../../base/common/arrays.js';\nimport { Position } from '../../common/core/position.js';\nvar expandSuggestionDocsByDefault = false;\n/**\r\n * Suggest widget colors\r\n */\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', {\n  dark: editorWidgetBackground,\n  light: editorWidgetBackground,\n  hc: editorWidgetBackground\n}, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', {\n  dark: editorWidgetBorder,\n  light: editorWidgetBorder,\n  hc: editorWidgetBorder\n}, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', {\n  dark: editorForeground,\n  light: editorForeground,\n  hc: editorForeground\n}, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', {\n  dark: listFocusBackground,\n  light: listFocusBackground,\n  hc: listFocusBackground\n}, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', {\n  dark: listHighlightForeground,\n  light: listHighlightForeground,\n  hc: listHighlightForeground\n}, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\nfunction extractColor(item, out) {\n  var label = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\n  if (label.match(colorRegExp)) {\n    out[0] = label;\n    return true;\n  }\n  if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\n    out[0] = item.completion.documentation;\n    return true;\n  }\n  return false;\n}\nfunction canExpandCompletionItem(item) {\n  if (!item) {\n    return false;\n  }\n  var suggestion = item.completion;\n  if (suggestion.documentation) {\n    return true;\n  }\n  return suggestion.detail && suggestion.detail !== suggestion.label;\n}\nfunction getAriaId(index) {\n  return \"suggest-aria-id:\" + index;\n}\nvar ItemRenderer = /** @class */function () {\n  function ItemRenderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\n    this.widget = widget;\n    this.editor = editor;\n    this.triggerKeybindingLabel = triggerKeybindingLabel;\n    this._modelService = _modelService;\n    this._modeService = _modeService;\n    this._themeService = _themeService;\n  }\n  Object.defineProperty(ItemRenderer.prototype, \"templateId\", {\n    get: function get() {\n      return 'suggestion';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ItemRenderer.prototype.renderTemplate = function (container) {\n    var _this = this;\n    var data = Object.create(null);\n    data.disposables = new DisposableStore();\n    data.root = container;\n    addClass(data.root, 'show-file-icons');\n    data.icon = append(container, $('.icon'));\n    data.colorspan = append(data.icon, $('span.colorspan'));\n    var text = append(container, $('.contents'));\n    var main = append(text, $('.main'));\n    data.left = append(main, $('span.left'));\n    data.right = append(main, $('span.right'));\n    data.iconContainer = append(data.left, $('.icon-label.codicon'));\n    data.iconLabel = new IconLabel(data.left, {\n      supportHighlights: true,\n      supportCodicons: true\n    });\n    data.disposables.add(data.iconLabel);\n    data.signatureLabel = append(data.left, $('span.signature-label'));\n    data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n    data.detailsLabel = append(data.right, $('span.details-label'));\n    data.readMore = append(data.right, $('span.readMore.codicon.codicon-info'));\n    data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\n    var configureFont = function configureFont() {\n      var options = _this.editor.getOptions();\n      var fontInfo = options.get(34 /* fontInfo */);\n      var fontFamily = fontInfo.fontFamily;\n      var fontFeatureSettings = fontInfo.fontFeatureSettings;\n      var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\n      var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\n      var fontWeight = fontInfo.fontWeight;\n      var fontSizePx = fontSize + \"px\";\n      var lineHeightPx = lineHeight + \"px\";\n      data.root.style.fontSize = fontSizePx;\n      data.root.style.fontWeight = fontWeight;\n      main.style.fontFamily = fontFamily;\n      main.style.fontFeatureSettings = fontFeatureSettings;\n      main.style.lineHeight = lineHeightPx;\n      data.icon.style.height = lineHeightPx;\n      data.icon.style.width = lineHeightPx;\n      data.readMore.style.height = lineHeightPx;\n      data.readMore.style.width = lineHeightPx;\n    };\n    configureFont();\n    data.disposables.add(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.hasChanged(34 /* fontInfo */) || e.hasChanged(90 /* suggestFontSize */) || e.hasChanged(91 /* suggestLineHeight */);\n    }).on(configureFont, null));\n    return data;\n  };\n  ItemRenderer.prototype.renderElement = function (element, index, templateData) {\n    var _this = this;\n    var data = templateData;\n    var suggestion = element.completion;\n    var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\n    data.root.id = getAriaId(index);\n    data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\n    data.colorspan.style.backgroundColor = '';\n    var labelOptions = {\n      labelEscapeNewLines: true,\n      matches: createMatches(element.score)\n    };\n    var color = [];\n    if (suggestion.kind === 19 /* Color */ && extractColor(element, color)) {\n      // special logic for 'color' completion items\n      data.icon.className = 'icon customcolor';\n      data.iconContainer.className = 'icon hide';\n      data.colorspan.style.backgroundColor = color[0];\n    } else if (suggestion.kind === 20 /* File */ && this._themeService.getIconTheme().hasFileIcons) {\n      // special logic for 'file' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      var labelClasses = getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: textLabel\n      }), FileKind.FILE);\n      var detailClasses = getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FILE);\n      labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n    } else if (suggestion.kind === 23 /* Folder */ && this._themeService.getIconTheme().hasFolderIcons) {\n      // special logic for 'folder' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      labelOptions.extraClasses = flatten([getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: textLabel\n      }), FileKind.FOLDER), getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FOLDER)]);\n    } else {\n      // normal icon\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = '';\n      addClasses(data.iconContainer, \"suggest-icon codicon codicon-symbol-\" + completionKindToCssClass(suggestion.kind));\n    }\n    if (suggestion.tags && suggestion.tags.indexOf(1 /* Deprecated */) >= 0) {\n      labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n      labelOptions.matches = [];\n    }\n    data.iconLabel.setLabel(textLabel, undefined, labelOptions);\n    if (typeof suggestion.label === 'string') {\n      data.signatureLabel.textContent = '';\n      data.qualifierLabel.textContent = '';\n      data.detailsLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\n      removeClass(data.right, 'always-show-details');\n    } else {\n      data.signatureLabel.textContent = (suggestion.label.signature || '').replace(/\\n.*$/m, '');\n      data.qualifierLabel.textContent = (suggestion.label.qualifier || '').replace(/\\n.*$/m, '');\n      data.detailsLabel.textContent = (suggestion.label.type || '').replace(/\\n.*$/m, '');\n      addClass(data.right, 'always-show-details');\n    }\n    if (canExpandCompletionItem(element)) {\n      addClass(data.right, 'can-expand-details');\n      show(data.readMore);\n      data.readMore.onmousedown = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      };\n      data.readMore.onclick = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        _this.widget.toggleDetails();\n      };\n    } else {\n      removeClass(data.right, 'can-expand-details');\n      hide(data.readMore);\n      data.readMore.onmousedown = null;\n      data.readMore.onclick = null;\n    }\n  };\n  ItemRenderer.prototype.disposeTemplate = function (templateData) {\n    templateData.disposables.dispose();\n  };\n  ItemRenderer = __decorate([__param(3, IModelService), __param(4, IModeService), __param(5, IThemeService)], ItemRenderer);\n  return ItemRenderer;\n}();\nvar SuggestionDetails = /** @class */function () {\n  function SuggestionDetails(container, widget, editor, markdownRenderer, kbToggleDetails) {\n    var _this = this;\n    this.widget = widget;\n    this.editor = editor;\n    this.markdownRenderer = markdownRenderer;\n    this.kbToggleDetails = kbToggleDetails;\n    this.borderWidth = 1;\n    this.disposables = new DisposableStore();\n    this.el = append(container, $('.details'));\n    this.disposables.add(toDisposable(function () {\n      return container.removeChild(_this.el);\n    }));\n    this.body = $('.body');\n    this.scrollbar = new DomScrollableElement(this.body, {});\n    append(this.el, this.scrollbar.getDomNode());\n    this.disposables.add(this.scrollbar);\n    this.header = append(this.body, $('.header'));\n    this.close = append(this.header, $('span.codicon.codicon-close'));\n    this.close.title = nls.localize('readLess', \"Read less...{0}\", this.kbToggleDetails);\n    this.type = append(this.header, $('p.type'));\n    this.docs = append(this.body, $('p.docs'));\n    this.configureFont();\n    Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.hasChanged(34 /* fontInfo */);\n    }).on(this.configureFont, this, this.disposables);\n    markdownRenderer.onDidRenderCodeBlock(function () {\n      return _this.scrollbar.scanDomNode();\n    }, this, this.disposables);\n  }\n  Object.defineProperty(SuggestionDetails.prototype, \"element\", {\n    get: function get() {\n      return this.el;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  SuggestionDetails.prototype.renderLoading = function () {\n    this.type.textContent = nls.localize('loading', \"Loading...\");\n    this.docs.textContent = '';\n  };\n  SuggestionDetails.prototype.renderItem = function (item, explainMode) {\n    var _this = this;\n    this.renderDisposeable = dispose(this.renderDisposeable);\n    var _a = item.completion,\n      documentation = _a.documentation,\n      detail = _a.detail;\n    // --- documentation\n    if (explainMode) {\n      var md = '';\n      md += \"score: \" + item.score[0] + (item.word ? \", compared '\" + (item.completion.filterText && item.completion.filterText + ' (filterText)' || item.completion.label) + \"' with '\" + item.word + \"'\" : ' (no prefix)') + \"\\n\";\n      md += \"distance: \" + item.distance + \", see localityBonus-setting\\n\";\n      md += \"index: \" + item.idx + \", based on \" + (item.completion.sortText && \"sortText: \\\"\" + item.completion.sortText + \"\\\"\" || 'label') + \"\\n\";\n      documentation = new MarkdownString().appendCodeblock('empty', md);\n      detail = \"Provider: \" + item.provider._debugDisplayName;\n    }\n    if (!explainMode && !canExpandCompletionItem(item)) {\n      this.type.textContent = '';\n      this.docs.textContent = '';\n      addClass(this.el, 'no-docs');\n      return;\n    }\n    removeClass(this.el, 'no-docs');\n    if (typeof documentation === 'string') {\n      removeClass(this.docs, 'markdown-docs');\n      this.docs.textContent = documentation;\n    } else {\n      addClass(this.docs, 'markdown-docs');\n      this.docs.innerHTML = '';\n      var renderedContents = this.markdownRenderer.render(documentation);\n      this.renderDisposeable = renderedContents;\n      this.docs.appendChild(renderedContents.element);\n    }\n    // --- details\n    if (detail) {\n      this.type.innerText = detail;\n      show(this.type);\n    } else {\n      this.type.innerText = '';\n      hide(this.type);\n    }\n    this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + this.borderWidth * 2 + 'px';\n    this.el.style.userSelect = 'text';\n    this.el.tabIndex = -1;\n    this.close.onmousedown = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    this.close.onclick = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this.widget.toggleDetails();\n    };\n    this.body.scrollTop = 0;\n    this.scrollbar.scanDomNode();\n  };\n  SuggestionDetails.prototype.scrollDown = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n    this.body.scrollTop += much;\n  };\n  SuggestionDetails.prototype.scrollUp = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n    this.body.scrollTop -= much;\n  };\n  SuggestionDetails.prototype.scrollTop = function () {\n    this.body.scrollTop = 0;\n  };\n  SuggestionDetails.prototype.scrollBottom = function () {\n    this.body.scrollTop = this.body.scrollHeight;\n  };\n  SuggestionDetails.prototype.pageDown = function () {\n    this.scrollDown(80);\n  };\n  SuggestionDetails.prototype.pageUp = function () {\n    this.scrollUp(80);\n  };\n  SuggestionDetails.prototype.setBorderWidth = function (width) {\n    this.borderWidth = width;\n  };\n  SuggestionDetails.prototype.configureFont = function () {\n    var options = this.editor.getOptions();\n    var fontInfo = options.get(34 /* fontInfo */);\n    var fontFamily = fontInfo.fontFamily;\n    var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\n    var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\n    var fontWeight = fontInfo.fontWeight;\n    var fontSizePx = fontSize + \"px\";\n    var lineHeightPx = lineHeight + \"px\";\n    this.el.style.fontSize = fontSizePx;\n    this.el.style.fontWeight = fontWeight;\n    this.el.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n    this.type.style.fontFamily = fontFamily;\n    this.close.style.height = lineHeightPx;\n    this.close.style.width = lineHeightPx;\n  };\n  SuggestionDetails.prototype.dispose = function () {\n    this.disposables.dispose();\n    this.renderDisposeable = dispose(this.renderDisposeable);\n  };\n  return SuggestionDetails;\n}();\nvar SuggestWidget = /** @class */function () {\n  function SuggestWidget(editor, telemetryService, keybindingService, contextKeyService, themeService, storageService, modeService, openerService, instantiationService) {\n    var _this = this;\n    var _a, _b;\n    this.editor = editor;\n    this.telemetryService = telemetryService;\n    this.keybindingService = keybindingService;\n    // Editor.IContentWidget.allowEditorOverflow\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this.state = null;\n    this.isAuto = false;\n    this.loadingTimeout = Disposable.None;\n    this.currentSuggestionDetails = null;\n    this.ignoreFocusEvents = false;\n    this.completionModel = null;\n    this.showTimeout = new TimeoutTimer();\n    this.toDispose = new DisposableStore();\n    this.onDidSelectEmitter = new Emitter();\n    this.onDidFocusEmitter = new Emitter();\n    this.onDidHideEmitter = new Emitter();\n    this.onDidShowEmitter = new Emitter();\n    this.onDidSelect = this.onDidSelectEmitter.event;\n    this.onDidFocus = this.onDidFocusEmitter.event;\n    this.onDidHide = this.onDidHideEmitter.event;\n    this.onDidShow = this.onDidShowEmitter.event;\n    this.maxWidgetWidth = 660;\n    this.listWidth = 330;\n    this.firstFocusInCurrentList = false;\n    this.preferDocPositionTop = false;\n    this.docsPositionPreviousWidgetY = null;\n    this.explainMode = false;\n    this._onDetailsKeydown = new Emitter();\n    this.onDetailsKeyDown = this._onDetailsKeydown.event;\n    var markdownRenderer = this.toDispose.add(new MarkdownRenderer(editor, modeService, openerService));\n    var kbToggleDetails = (_b = (_a = keybindingService.lookupKeybinding('toggleSuggestionDetails')) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : '';\n    this.msgDetailsLess = nls.localize('detail.less', \"{0} for less...\", kbToggleDetails);\n    this.msgDetailMore = nls.localize('detail.more', \"{0} for more...\", kbToggleDetails);\n    this.isAuto = false;\n    this.focusedItem = null;\n    this.storageService = storageService;\n    this.element = $('.editor-widget.suggest-widget');\n    this.toDispose.add(addDisposableListener(this.element, 'click', function (e) {\n      if (e.target === _this.element) {\n        _this.hideWidget();\n      }\n    }));\n    this.messageElement = append(this.element, $('.message'));\n    this.listElement = append(this.element, $('.tree'));\n    var applyStatusBarStyle = function applyStatusBarStyle() {\n      return toggleClass(_this.element, 'with-status-bar', !_this.editor.getOption(89 /* suggest */).hideStatusBar);\n    };\n    applyStatusBarStyle();\n    this.statusBarElement = append(this.element, $('.suggest-status-bar'));\n    this.statusBarLeftSpan = append(this.statusBarElement, $('span'));\n    this.statusBarRightSpan = append(this.statusBarElement, $('span'));\n    this.setStatusBarLeftText('');\n    this.setStatusBarRightText('');\n    this.details = instantiationService.createInstance(SuggestionDetails, this.element, this, this.editor, markdownRenderer, kbToggleDetails);\n    var applyIconStyle = function applyIconStyle() {\n      return toggleClass(_this.element, 'no-icons', !_this.editor.getOption(89 /* suggest */).showIcons);\n    };\n    applyIconStyle();\n    var renderer = instantiationService.createInstance(ItemRenderer, this, this.editor, kbToggleDetails);\n    this.list = new List('SuggestWidget', this.listElement, this, [renderer], {\n      useShadows: false,\n      openController: {\n        shouldOpen: function shouldOpen() {\n          return false;\n        }\n      },\n      mouseSupport: false,\n      accessibilityProvider: {\n        getAriaLabel: function getAriaLabel(item) {\n          var textLabel = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\n          if (item.isResolved && _this.expandDocsSettingFromStorage()) {\n            var _a = item.completion,\n              documentation = _a.documentation,\n              detail = _a.detail;\n            var docs = strings.format('{0}{1}', detail || '', documentation ? typeof documentation === 'string' ? documentation : documentation.value : '');\n            return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", textLabel, docs);\n          } else {\n            return textLabel;\n          }\n        }\n      }\n    });\n    this.toDispose.add(attachListStyler(this.list, themeService, {\n      listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n      listInactiveFocusOutline: activeContrastBorder\n    }));\n    this.toDispose.add(themeService.onThemeChange(function (t) {\n      return _this.onThemeChange(t);\n    }));\n    this.toDispose.add(editor.onDidLayoutChange(function () {\n      return _this.onEditorLayoutChange();\n    }));\n    this.toDispose.add(this.list.onMouseDown(function (e) {\n      return _this.onListMouseDownOrTap(e);\n    }));\n    this.toDispose.add(this.list.onTap(function (e) {\n      return _this.onListMouseDownOrTap(e);\n    }));\n    this.toDispose.add(this.list.onSelectionChange(function (e) {\n      return _this.onListSelection(e);\n    }));\n    this.toDispose.add(this.list.onFocusChange(function (e) {\n      return _this.onListFocus(e);\n    }));\n    this.toDispose.add(this.editor.onDidChangeCursorSelection(function () {\n      return _this.onCursorSelectionChanged();\n    }));\n    this.toDispose.add(this.editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(89 /* suggest */)) {\n        applyStatusBarStyle();\n        applyIconStyle();\n      }\n    }));\n    this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\n    this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\n    this.editor.addContentWidget(this);\n    this.setState(0 /* Hidden */);\n    this.onThemeChange(themeService.getTheme());\n    this.toDispose.add(addStandardDisposableListener(this.details.element, 'keydown', function (e) {\n      _this._onDetailsKeydown.fire(e);\n    }));\n    this.toDispose.add(this.editor.onMouseDown(function (e) {\n      return _this.onEditorMouseDown(e);\n    }));\n  }\n  SuggestWidget.prototype.onEditorMouseDown = function (mouseEvent) {\n    // Clicking inside details\n    if (this.details.element.contains(mouseEvent.target.element)) {\n      this.details.element.focus();\n    }\n    // Clicking outside details and inside suggest\n    else {\n      if (this.element.contains(mouseEvent.target.element)) {\n        this.editor.focus();\n      }\n    }\n  };\n  SuggestWidget.prototype.onCursorSelectionChanged = function () {\n    if (this.state === 0 /* Hidden */) {\n      return;\n    }\n    this.editor.layoutContentWidget(this);\n  };\n  SuggestWidget.prototype.onEditorLayoutChange = function () {\n    if ((this.state === 3 /* Open */ || this.state === 5 /* Details */) && this.expandDocsSettingFromStorage()) {\n      this.expandSideOrBelow();\n    }\n  };\n  SuggestWidget.prototype.onListMouseDownOrTap = function (e) {\n    if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n      return;\n    }\n    // prevent stealing browser focus from the editor\n    e.browserEvent.preventDefault();\n    e.browserEvent.stopPropagation();\n    this.select(e.element, e.index);\n  };\n  SuggestWidget.prototype.onListSelection = function (e) {\n    if (!e.elements.length) {\n      return;\n    }\n    this.select(e.elements[0], e.indexes[0]);\n  };\n  SuggestWidget.prototype.select = function (item, index) {\n    var completionModel = this.completionModel;\n    if (!completionModel) {\n      return;\n    }\n    this.onDidSelectEmitter.fire({\n      item: item,\n      index: index,\n      model: completionModel\n    });\n    this.editor.focus();\n  };\n  SuggestWidget.prototype.onThemeChange = function (theme) {\n    var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\n    if (backgroundColor) {\n      this.listElement.style.backgroundColor = backgroundColor.toString();\n      this.statusBarElement.style.backgroundColor = backgroundColor.toString();\n      this.details.element.style.backgroundColor = backgroundColor.toString();\n      this.messageElement.style.backgroundColor = backgroundColor.toString();\n    }\n    var borderColor = theme.getColor(editorSuggestWidgetBorder);\n    if (borderColor) {\n      this.listElement.style.borderColor = borderColor.toString();\n      this.statusBarElement.style.borderColor = borderColor.toString();\n      this.details.element.style.borderColor = borderColor.toString();\n      this.messageElement.style.borderColor = borderColor.toString();\n      this.detailsBorderColor = borderColor.toString();\n    }\n    var focusBorderColor = theme.getColor(focusBorder);\n    if (focusBorderColor) {\n      this.detailsFocusBorderColor = focusBorderColor.toString();\n    }\n    this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\n  };\n  SuggestWidget.prototype.onListFocus = function (e) {\n    var _this = this;\n    var _a, _b;\n    if (this.ignoreFocusEvents) {\n      return;\n    }\n    if (!e.elements.length) {\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n        this.focusedItem = null;\n      }\n      this.editor.setAriaOptions({\n        activeDescendant: undefined\n      });\n      return;\n    }\n    if (!this.completionModel) {\n      return;\n    }\n    var item = e.elements[0];\n    var index = e.indexes[0];\n    this.firstFocusInCurrentList = !this.focusedItem;\n    if (item !== this.focusedItem) {\n      // update statusbar\n      // todo@joh,pine -> this should a toolbar with actions so that these things become\n      // mouse clickable and fit for accessibility...\n      var wantsInsert = this.editor.getOption(89 /* suggest */).insertMode === 'insert';\n      var kbAccept = (_a = this.keybindingService.lookupKeybinding('acceptSelectedSuggestion')) === null || _a === void 0 ? void 0 : _a.getLabel();\n      var kbAcceptAlt = (_b = this.keybindingService.lookupKeybinding('acceptAlternativeSelectedSuggestion')) === null || _b === void 0 ? void 0 : _b.getLabel();\n      if (!Position.equals(item.editInsertEnd, item.editReplaceEnd)) {\n        // insert AND replace\n        if (wantsInsert) {\n          this.setStatusBarLeftText(nls.localize('insert', \"{0} to insert, {1} to replace\", kbAccept, kbAcceptAlt));\n        } else {\n          this.setStatusBarLeftText(nls.localize('replace', \"{0} to replace, {1} to insert\", kbAccept, kbAcceptAlt));\n        }\n      } else {\n        this.setStatusBarLeftText(nls.localize('accept', \"{0} to accept\", kbAccept));\n      }\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n      }\n      this.focusedItem = item;\n      this.list.reveal(index);\n      this.currentSuggestionDetails = createCancelablePromise(function (token) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var loading, result;\n          var _this = this;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                loading = disposableTimeout(function () {\n                  return _this.showDetails(true);\n                }, 250);\n                token.onCancellationRequested(function () {\n                  return loading.dispose();\n                });\n                return [4 /*yield*/, item.resolve(token)];\n              case 1:\n                result = _a.sent();\n                loading.dispose();\n                return [2 /*return*/, result];\n            }\n          });\n        });\n      });\n      this.currentSuggestionDetails.then(function () {\n        if (index >= _this.list.length || item !== _this.list.element(index)) {\n          return;\n        }\n        // item can have extra information, so re-render\n        _this.ignoreFocusEvents = true;\n        _this.list.splice(index, 1, [item]);\n        _this.list.setFocus([index]);\n        _this.ignoreFocusEvents = false;\n        if (_this.expandDocsSettingFromStorage()) {\n          _this.showDetails(false);\n        } else {\n          removeClass(_this.element, 'docs-side');\n        }\n        if (canExpandCompletionItem(_this.focusedItem)) {\n          if (_this.expandDocsSettingFromStorage()) {\n            _this.setStatusBarRightText(_this.msgDetailsLess);\n          } else {\n            _this.setStatusBarRightText(_this.msgDetailMore);\n          }\n        } else {\n          _this.statusBarRightSpan.innerText = '';\n        }\n        _this.editor.setAriaOptions({\n          activeDescendant: getAriaId(index)\n        });\n      }).catch(onUnexpectedError);\n    }\n    // emit an event\n    this.onDidFocusEmitter.fire({\n      item: item,\n      index: index,\n      model: this.completionModel\n    });\n  };\n  SuggestWidget.prototype.setState = function (state) {\n    if (!this.element) {\n      return;\n    }\n    var stateChanged = this.state !== state;\n    this.state = state;\n    toggleClass(this.element, 'frozen', state === 4 /* Frozen */);\n    switch (state) {\n      case 0 /* Hidden */:\n        hide(this.messageElement, this.details.element, this.listElement, this.statusBarElement);\n        this.hide();\n        this.listHeight = 0;\n        if (stateChanged) {\n          this.list.splice(0, this.list.length);\n        }\n        this.focusedItem = null;\n        break;\n      case 1 /* Loading */:\n        this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n        hide(this.listElement, this.details.element, this.statusBarElement);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n      case 2 /* Empty */:\n        this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n        hide(this.listElement, this.details.element, this.statusBarElement);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n      case 3 /* Open */:\n        hide(this.messageElement);\n        show(this.listElement, this.statusBarElement);\n        this.show();\n        break;\n      case 4 /* Frozen */:\n        hide(this.messageElement);\n        show(this.listElement);\n        this.show();\n        break;\n      case 5 /* Details */:\n        hide(this.messageElement);\n        show(this.details.element, this.listElement, this.statusBarElement);\n        this.show();\n        break;\n    }\n  };\n  SuggestWidget.prototype.showTriggered = function (auto, delay) {\n    var _this = this;\n    if (this.state !== 0 /* Hidden */) {\n      return;\n    }\n    this.isAuto = !!auto;\n    if (!this.isAuto) {\n      this.loadingTimeout = disposableTimeout(function () {\n        return _this.setState(1 /* Loading */);\n      }, delay);\n    }\n  };\n  SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\n    this.preferDocPositionTop = false;\n    this.docsPositionPreviousWidgetY = null;\n    this.loadingTimeout.dispose();\n    if (this.currentSuggestionDetails) {\n      this.currentSuggestionDetails.cancel();\n      this.currentSuggestionDetails = null;\n    }\n    if (this.completionModel !== completionModel) {\n      this.completionModel = completionModel;\n    }\n    if (isFrozen && this.state !== 2 /* Empty */ && this.state !== 0 /* Hidden */) {\n      this.setState(4 /* Frozen */);\n      return;\n    }\n    var visibleCount = this.completionModel.items.length;\n    var isEmpty = visibleCount === 0;\n    this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\n    if (isEmpty) {\n      if (isAuto) {\n        this.setState(0 /* Hidden */);\n      } else {\n        this.setState(2 /* Empty */);\n      }\n\n      this.completionModel = null;\n    } else {\n      if (this.state !== 3 /* Open */) {\n        var stats = this.completionModel.stats;\n        stats['wasAutomaticallyTriggered'] = !!isAuto;\n        /* __GDPR__\r\n            \"suggestWidget\" : {\r\n                \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\r\n                \"${include}\": [\r\n                    \"${ICompletionStats}\"\r\n                ]\r\n            }\r\n        */\n        this.telemetryService.publicLog('suggestWidget', __assign({}, stats));\n      }\n      this.focusedItem = null;\n      this.list.splice(0, this.list.length, this.completionModel.items);\n      if (isFrozen) {\n        this.setState(4 /* Frozen */);\n      } else {\n        this.setState(3 /* Open */);\n      }\n\n      this.list.reveal(selectionIndex, 0);\n      this.list.setFocus([selectionIndex]);\n      // Reset focus border\n      if (this.detailsBorderColor) {\n        this.details.element.style.borderColor = this.detailsBorderColor;\n      }\n    }\n  };\n  SuggestWidget.prototype.selectNextPage = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 5 /* Details */:\n        this.details.pageDown();\n        return true;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusNextPage();\n        return true;\n    }\n  };\n  SuggestWidget.prototype.selectNext = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusNext(1, true);\n        return true;\n    }\n  };\n  SuggestWidget.prototype.selectLast = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 5 /* Details */:\n        this.details.scrollBottom();\n        return true;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusLast();\n        return true;\n    }\n  };\n  SuggestWidget.prototype.selectPreviousPage = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 5 /* Details */:\n        this.details.pageUp();\n        return true;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusPreviousPage();\n        return true;\n    }\n  };\n  SuggestWidget.prototype.selectPrevious = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusPrevious(1, true);\n        return false;\n    }\n  };\n  SuggestWidget.prototype.selectFirst = function () {\n    switch (this.state) {\n      case 0 /* Hidden */:\n        return false;\n      case 5 /* Details */:\n        this.details.scrollTop();\n        return true;\n      case 1 /* Loading */:\n        return !this.isAuto;\n      default:\n        this.list.focusFirst();\n        return true;\n    }\n  };\n  SuggestWidget.prototype.getFocusedItem = function () {\n    if (this.state !== 0 /* Hidden */ && this.state !== 2 /* Empty */ && this.state !== 1 /* Loading */ && this.completionModel) {\n      return {\n        item: this.list.getFocusedElements()[0],\n        index: this.list.getFocus()[0],\n        model: this.completionModel\n      };\n    }\n    return undefined;\n  };\n  SuggestWidget.prototype.toggleDetailsFocus = function () {\n    if (this.state === 5 /* Details */) {\n      this.setState(3 /* Open */);\n      if (this.detailsBorderColor) {\n        this.details.element.style.borderColor = this.detailsBorderColor;\n      }\n    } else if (this.state === 3 /* Open */ && this.expandDocsSettingFromStorage()) {\n      this.setState(5 /* Details */);\n      if (this.detailsFocusBorderColor) {\n        this.details.element.style.borderColor = this.detailsFocusBorderColor;\n      }\n    }\n    this.telemetryService.publicLog2('suggestWidget:toggleDetailsFocus');\n  };\n  SuggestWidget.prototype.toggleDetails = function () {\n    if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\n      return;\n    }\n    if (this.expandDocsSettingFromStorage()) {\n      this.updateExpandDocsSetting(false);\n      hide(this.details.element);\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      this.editor.layoutContentWidget(this);\n      this.setStatusBarRightText(this.msgDetailMore);\n      this.telemetryService.publicLog2('suggestWidget:collapseDetails');\n    } else {\n      if (this.state !== 3 /* Open */ && this.state !== 5 /* Details */ && this.state !== 4 /* Frozen */) {\n        return;\n      }\n      this.updateExpandDocsSetting(true);\n      this.showDetails(false);\n      this.setStatusBarRightText(this.msgDetailsLess);\n      this.telemetryService.publicLog2('suggestWidget:expandDetails');\n    }\n  };\n  SuggestWidget.prototype.showDetails = function (loading) {\n    if (!loading) {\n      // When loading, don't re-layout docs, as item is not resolved yet #88731\n      this.expandSideOrBelow();\n    }\n    show(this.details.element);\n    this.details.element.style.maxHeight = this.maxWidgetHeight + 'px';\n    if (loading) {\n      this.details.renderLoading();\n    } else {\n      this.details.renderItem(this.list.getFocusedElements()[0], this.explainMode);\n    }\n    // Reset margin-top that was set as Fix for #26416\n    this.listElement.style.marginTop = '0px';\n    // with docs showing up widget width/height may change, so reposition the widget\n    this.editor.layoutContentWidget(this);\n    this.adjustDocsPosition();\n    this.editor.focus();\n  };\n  SuggestWidget.prototype.toggleExplainMode = function () {\n    if (this.list.getFocusedElements()[0] && this.expandDocsSettingFromStorage()) {\n      this.explainMode = !this.explainMode;\n      this.showDetails(false);\n    }\n  };\n  SuggestWidget.prototype.show = function () {\n    var _this = this;\n    var newHeight = this.updateListHeight();\n    if (newHeight !== this.listHeight) {\n      this.editor.layoutContentWidget(this);\n      this.listHeight = newHeight;\n    }\n    this.suggestWidgetVisible.set(true);\n    this.showTimeout.cancelAndSet(function () {\n      addClass(_this.element, 'visible');\n      _this.onDidShowEmitter.fire(_this);\n    }, 100);\n  };\n  SuggestWidget.prototype.hide = function () {\n    this.suggestWidgetVisible.reset();\n    this.suggestWidgetMultipleSuggestions.reset();\n    removeClass(this.element, 'visible');\n  };\n  SuggestWidget.prototype.hideWidget = function () {\n    this.loadingTimeout.dispose();\n    this.setState(0 /* Hidden */);\n    this.onDidHideEmitter.fire(this);\n  };\n  SuggestWidget.prototype.getPosition = function () {\n    if (this.state === 0 /* Hidden */) {\n      return null;\n    }\n    var preference = [2 /* BELOW */, 1 /* ABOVE */];\n    if (this.preferDocPositionTop) {\n      preference = [1 /* ABOVE */];\n    }\n\n    return {\n      position: this.editor.getPosition(),\n      preference: preference\n    };\n  };\n  SuggestWidget.prototype.getDomNode = function () {\n    return this.element;\n  };\n  SuggestWidget.prototype.getId = function () {\n    return SuggestWidget.ID;\n  };\n  SuggestWidget.prototype.isFrozen = function () {\n    return this.state === 4 /* Frozen */;\n  };\n\n  SuggestWidget.prototype.updateListHeight = function () {\n    var height = 0;\n    if (this.state === 2 /* Empty */ || this.state === 1 /* Loading */) {\n      height = this.unfocusedHeight;\n    } else {\n      var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\n      var maxVisibleSuggestions = this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\n      height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\n    }\n    this.element.style.lineHeight = this.unfocusedHeight + \"px\";\n    this.listElement.style.height = height + \"px\";\n    this.statusBarElement.style.top = height + \"px\";\n    this.list.layout(height);\n    return height;\n  };\n  /**\r\n   * Adds the propert classes, margins when positioning the docs to the side\r\n   */\n  SuggestWidget.prototype.adjustDocsPosition = function () {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    var lineHeight = this.editor.getOption(49 /* lineHeight */);\n    var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n    var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\n    var cursorX = editorCoords.left + cursorCoords.left;\n    var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\n    var widgetCoords = getDomNodePagePosition(this.element);\n    var widgetX = widgetCoords.left;\n    var widgetY = widgetCoords.top;\n    // Fixes #27649\n    // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\n    if (this.docsPositionPreviousWidgetY && this.docsPositionPreviousWidgetY < widgetY && !this.preferDocPositionTop) {\n      this.preferDocPositionTop = true;\n      this.adjustDocsPosition();\n      return;\n    }\n    this.docsPositionPreviousWidgetY = widgetY;\n    if (widgetX < cursorX - this.listWidth) {\n      // Widget is too far to the left of cursor, swap list and docs\n      addClass(this.element, 'list-right');\n    } else {\n      removeClass(this.element, 'list-right');\n    }\n    // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\n    // margin-top needs to be applied on list to make it appear right above the cursor\n    // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\n    if (hasClass(this.element, 'docs-side') && cursorY - lineHeight > widgetY && this.details.element.offsetHeight > this.listElement.offsetHeight) {\n      // Fix for #26416\n      // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\n      this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\n    }\n  };\n  /**\r\n   * Adds the proper classes for positioning the docs to the side or below depending on item\r\n   */\n  SuggestWidget.prototype.expandSideOrBelow = function () {\n    if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      return;\n    }\n    var matches = this.element.style.maxWidth.match(/(\\d+)px/);\n    if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\n      addClass(this.element, 'docs-below');\n      removeClass(this.element, 'docs-side');\n    } else if (canExpandCompletionItem(this.focusedItem)) {\n      addClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n    }\n  };\n  Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\n    // Heights\n    get: function get() {\n      return this.unfocusedHeight * this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\n    get: function get() {\n      var options = this.editor.getOptions();\n      return options.get(91 /* suggestLineHeight */) || options.get(34 /* fontInfo */).lineHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // IDelegate\n  SuggestWidget.prototype.getHeight = function (element) {\n    return this.unfocusedHeight;\n  };\n  SuggestWidget.prototype.getTemplateId = function (element) {\n    return 'suggestion';\n  };\n  SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\n    return this.storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, expandSuggestionDocsByDefault);\n  };\n  SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\n    this.storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */);\n  };\n\n  SuggestWidget.prototype.setStatusBarLeftText = function (s) {\n    this.statusBarLeftSpan.innerText = s;\n  };\n  SuggestWidget.prototype.setStatusBarRightText = function (s) {\n    this.statusBarRightSpan.innerText = s;\n  };\n  SuggestWidget.prototype.dispose = function () {\n    this.details.dispose();\n    this.list.dispose();\n    this.toDispose.dispose();\n    this.loadingTimeout.dispose();\n    this.showTimeout.dispose();\n  };\n  SuggestWidget.ID = 'editor.widget.suggestWidget';\n  SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\n  SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n  SuggestWidget = __decorate([__param(1, ITelemetryService), __param(2, IKeybindingService), __param(3, IContextKeyService), __param(4, IThemeService), __param(5, IStorageService), __param(6, IModeService), __param(7, IOpenerService), __param(8, IInstantiationService)], SuggestWidget);\n  return SuggestWidget;\n}();\nexport { SuggestWidget };\nregisterThemingParticipant(function (theme, collector) {\n  var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\n  if (matchHighlight) {\n    collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\n  }\n  var foreground = theme.getColor(editorSuggestWidgetForeground);\n  if (foreground) {\n    collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\n  }\n  var link = theme.getColor(textLinkForeground);\n  if (link) {\n    collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\n  }\n  var codeBackground = theme.getColor(textCodeBlockBackground);\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\n  }\n});","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","nls","createMatches","strings","Event","Emitter","onUnexpectedError","dispose","toDisposable","DisposableStore","Disposable","addClass","append","$","hide","removeClass","show","toggleClass","getDomNodePagePosition","hasClass","addDisposableListener","addStandardDisposableListener","addClasses","List","DomScrollableElement","IKeybindingService","IContextKeyService","Context","SuggestContext","ITelemetryService","attachListStyler","IThemeService","registerThemingParticipant","registerColor","editorWidgetBackground","listFocusBackground","activeContrastBorder","listHighlightForeground","editorForeground","editorWidgetBorder","focusBorder","textLinkForeground","textCodeBlockBackground","IStorageService","MarkdownRenderer","IModeService","IOpenerService","TimeoutTimer","createCancelablePromise","disposableTimeout","completionKindToCssClass","IconLabel","getIconClasses","IModelService","URI","IInstantiationService","FileKind","MarkdownString","flatten","Position","expandSuggestionDocsByDefault","editorSuggestWidgetBackground","dark","light","hc","localize","editorSuggestWidgetBorder","editorSuggestWidgetForeground","editorSuggestWidgetSelectedBackground","editorSuggestWidgetHighlightForeground","colorRegExp","extractColor","item","out","completion","name","match","documentation","canExpandCompletionItem","suggestion","detail","getAriaId","index","ItemRenderer","widget","editor","triggerKeybindingLabel","_modelService","_modeService","_themeService","get","enumerable","configurable","renderTemplate","container","_this","data","create","disposables","root","icon","colorspan","text","main","left","right","iconContainer","iconLabel","supportHighlights","supportCodicons","add","signatureLabel","qualifierLabel","detailsLabel","readMore","title","configureFont","options","getOptions","fontInfo","fontFamily","fontFeatureSettings","fontSize","lineHeight","fontWeight","fontSizePx","lineHeightPx","style","height","width","chain","onDidChangeConfiguration","bind","filter","hasChanged","on","renderElement","element","templateData","textLabel","id","className","kind","backgroundColor","labelOptions","labelEscapeNewLines","matches","score","color","getIconTheme","hasFileIcons","labelClasses","from","scheme","path","FILE","detailClasses","extraClasses","hasFolderIcons","FOLDER","tags","indexOf","concat","setLabel","undefined","textContent","replace","signature","qualifier","type","onmousedown","stopPropagation","preventDefault","onclick","toggleDetails","disposeTemplate","SuggestionDetails","markdownRenderer","kbToggleDetails","borderWidth","el","removeChild","scrollbar","getDomNode","header","close","docs","onDidRenderCodeBlock","scanDomNode","renderLoading","renderItem","explainMode","renderDisposeable","_a","md","word","filterText","distance","idx","sortText","appendCodeblock","provider","_debugDisplayName","innerHTML","renderedContents","render","appendChild","innerText","offsetHeight","userSelect","tabIndex","scrollTop","scrollDown","much","scrollUp","scrollBottom","scrollHeight","pageDown","pageUp","setBorderWidth","SuggestWidget","telemetryService","keybindingService","contextKeyService","themeService","storageService","modeService","openerService","instantiationService","_b","allowEditorOverflow","suppressMouseDown","state","isAuto","loadingTimeout","None","currentSuggestionDetails","ignoreFocusEvents","completionModel","showTimeout","toDispose","onDidSelectEmitter","onDidFocusEmitter","onDidHideEmitter","onDidShowEmitter","onDidSelect","event","onDidFocus","onDidHide","onDidShow","maxWidgetWidth","listWidth","firstFocusInCurrentList","preferDocPositionTop","docsPositionPreviousWidgetY","_onDetailsKeydown","onDetailsKeyDown","lookupKeybinding","getLabel","msgDetailsLess","msgDetailMore","focusedItem","hideWidget","messageElement","listElement","applyStatusBarStyle","getOption","hideStatusBar","statusBarElement","statusBarLeftSpan","statusBarRightSpan","setStatusBarLeftText","setStatusBarRightText","details","createInstance","applyIconStyle","showIcons","renderer","list","useShadows","openController","shouldOpen","mouseSupport","accessibilityProvider","getAriaLabel","isResolved","expandDocsSettingFromStorage","format","listInactiveFocusBackground","listInactiveFocusOutline","onThemeChange","onDidLayoutChange","onEditorLayoutChange","onMouseDown","onListMouseDownOrTap","onTap","onSelectionChange","onListSelection","onFocusChange","onListFocus","onDidChangeCursorSelection","onCursorSelectionChanged","suggestWidgetVisible","Visible","bindTo","suggestWidgetMultipleSuggestions","MultipleSuggestions","addContentWidget","setState","getTheme","fire","onEditorMouseDown","mouseEvent","contains","focus","layoutContentWidget","expandSideOrBelow","browserEvent","select","elements","indexes","model","theme","getColor","toString","borderColor","detailsBorderColor","focusBorderColor","detailsFocusBorderColor","cancel","setAriaOptions","activeDescendant","wantsInsert","insertMode","kbAccept","kbAcceptAlt","equals","editInsertEnd","editReplaceEnd","reveal","token","loading","showDetails","onCancellationRequested","splice","setFocus","catch","stateChanged","listHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","showTriggered","auto","delay","showSuggestions","selectionIndex","isFrozen","visibleCount","items","isEmpty","set","stats","publicLog","selectNextPage","focusNextPage","selectNext","focusNext","selectLast","focusLast","selectPreviousPage","focusPreviousPage","selectPrevious","focusPrevious","selectFirst","focusFirst","getFocusedItem","getFocusedElements","getFocus","toggleDetailsFocus","publicLog2","updateExpandDocsSetting","maxHeight","maxWidgetHeight","marginTop","adjustDocsPosition","toggleExplainMode","newHeight","updateListHeight","cancelAndSet","reset","getPosition","preference","position","getId","ID","unfocusedHeight","suggestionCount","contentHeight","maxVisibleSuggestions","Math","min","top","layout","hasModel","cursorCoords","getScrolledVisiblePosition","editorCoords","cursorX","cursorY","widgetCoords","widgetX","widgetY","maxWidth","Number","getHeight","getTemplateId","getBoolean","store","collector","matchHighlight","addRule","foreground","link","codeBackground"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport './media/suggest.css';\r\nimport './media/suggestStatusBar.css';\r\nimport '../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport '../documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\r\nimport * as nls from '../../../nls.js';\r\nimport { createMatches } from '../../../base/common/filters.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Event, Emitter } from '../../../base/common/event.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { dispose, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass, addDisposableListener, addStandardDisposableListener, addClasses } from '../../../base/browser/dom.js';\r\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { Context as SuggestContext } from './suggest.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { TimeoutTimer, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\r\nimport { completionKindToCssClass } from '../../common/modes.js';\r\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { FileKind } from '../../../platform/files/common/files.js';\r\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { flatten } from '../../../base/common/arrays.js';\r\nimport { Position } from '../../common/core/position.js';\r\nvar expandSuggestionDocsByDefault = false;\r\n/**\r\n * Suggest widget colors\r\n */\r\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\r\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\r\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\r\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: listFocusBackground, light: listFocusBackground, hc: listFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\r\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\r\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\r\nfunction extractColor(item, out) {\r\n    var label = typeof item.completion.label === 'string'\r\n        ? item.completion.label\r\n        : item.completion.label.name;\r\n    if (label.match(colorRegExp)) {\r\n        out[0] = label;\r\n        return true;\r\n    }\r\n    if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\r\n        out[0] = item.completion.documentation;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction canExpandCompletionItem(item) {\r\n    if (!item) {\r\n        return false;\r\n    }\r\n    var suggestion = item.completion;\r\n    if (suggestion.documentation) {\r\n        return true;\r\n    }\r\n    return (suggestion.detail && suggestion.detail !== suggestion.label);\r\n}\r\nfunction getAriaId(index) {\r\n    return \"suggest-aria-id:\" + index;\r\n}\r\nvar ItemRenderer = /** @class */ (function () {\r\n    function ItemRenderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.triggerKeybindingLabel = triggerKeybindingLabel;\r\n        this._modelService = _modelService;\r\n        this._modeService = _modeService;\r\n        this._themeService = _themeService;\r\n    }\r\n    Object.defineProperty(ItemRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return 'suggestion';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ItemRenderer.prototype.renderTemplate = function (container) {\r\n        var _this = this;\r\n        var data = Object.create(null);\r\n        data.disposables = new DisposableStore();\r\n        data.root = container;\r\n        addClass(data.root, 'show-file-icons');\r\n        data.icon = append(container, $('.icon'));\r\n        data.colorspan = append(data.icon, $('span.colorspan'));\r\n        var text = append(container, $('.contents'));\r\n        var main = append(text, $('.main'));\r\n        data.left = append(main, $('span.left'));\r\n        data.right = append(main, $('span.right'));\r\n        data.iconContainer = append(data.left, $('.icon-label.codicon'));\r\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportCodicons: true });\r\n        data.disposables.add(data.iconLabel);\r\n        data.signatureLabel = append(data.left, $('span.signature-label'));\r\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\r\n        data.detailsLabel = append(data.right, $('span.details-label'));\r\n        data.readMore = append(data.right, $('span.readMore.codicon.codicon-info'));\r\n        data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\r\n        var configureFont = function () {\r\n            var options = _this.editor.getOptions();\r\n            var fontInfo = options.get(34 /* fontInfo */);\r\n            var fontFamily = fontInfo.fontFamily;\r\n            var fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n            var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\r\n            var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n            var fontWeight = fontInfo.fontWeight;\r\n            var fontSizePx = fontSize + \"px\";\r\n            var lineHeightPx = lineHeight + \"px\";\r\n            data.root.style.fontSize = fontSizePx;\r\n            data.root.style.fontWeight = fontWeight;\r\n            main.style.fontFamily = fontFamily;\r\n            main.style.fontFeatureSettings = fontFeatureSettings;\r\n            main.style.lineHeight = lineHeightPx;\r\n            data.icon.style.height = lineHeightPx;\r\n            data.icon.style.width = lineHeightPx;\r\n            data.readMore.style.height = lineHeightPx;\r\n            data.readMore.style.width = lineHeightPx;\r\n        };\r\n        configureFont();\r\n        data.disposables.add(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(34 /* fontInfo */) || e.hasChanged(90 /* suggestFontSize */) || e.hasChanged(91 /* suggestLineHeight */); })\r\n            .on(configureFont, null));\r\n        return data;\r\n    };\r\n    ItemRenderer.prototype.renderElement = function (element, index, templateData) {\r\n        var _this = this;\r\n        var data = templateData;\r\n        var suggestion = element.completion;\r\n        var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\r\n        data.root.id = getAriaId(index);\r\n        data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\r\n        data.colorspan.style.backgroundColor = '';\r\n        var labelOptions = {\r\n            labelEscapeNewLines: true,\r\n            matches: createMatches(element.score)\r\n        };\r\n        var color = [];\r\n        if (suggestion.kind === 19 /* Color */ && extractColor(element, color)) {\r\n            // special logic for 'color' completion items\r\n            data.icon.className = 'icon customcolor';\r\n            data.iconContainer.className = 'icon hide';\r\n            data.colorspan.style.backgroundColor = color[0];\r\n        }\r\n        else if (suggestion.kind === 20 /* File */ && this._themeService.getIconTheme().hasFileIcons) {\r\n            // special logic for 'file' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            var labelClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: textLabel }), FileKind.FILE);\r\n            var detailClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FILE);\r\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\r\n        }\r\n        else if (suggestion.kind === 23 /* Folder */ && this._themeService.getIconTheme().hasFolderIcons) {\r\n            // special logic for 'folder' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            labelOptions.extraClasses = flatten([\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: textLabel }), FileKind.FOLDER),\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FOLDER)\r\n            ]);\r\n        }\r\n        else {\r\n            // normal icon\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = '';\r\n            addClasses(data.iconContainer, \"suggest-icon codicon codicon-symbol-\" + completionKindToCssClass(suggestion.kind));\r\n        }\r\n        if (suggestion.tags && suggestion.tags.indexOf(1 /* Deprecated */) >= 0) {\r\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\r\n            labelOptions.matches = [];\r\n        }\r\n        data.iconLabel.setLabel(textLabel, undefined, labelOptions);\r\n        if (typeof suggestion.label === 'string') {\r\n            data.signatureLabel.textContent = '';\r\n            data.qualifierLabel.textContent = '';\r\n            data.detailsLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\r\n            removeClass(data.right, 'always-show-details');\r\n        }\r\n        else {\r\n            data.signatureLabel.textContent = (suggestion.label.signature || '').replace(/\\n.*$/m, '');\r\n            data.qualifierLabel.textContent = (suggestion.label.qualifier || '').replace(/\\n.*$/m, '');\r\n            data.detailsLabel.textContent = (suggestion.label.type || '').replace(/\\n.*$/m, '');\r\n            addClass(data.right, 'always-show-details');\r\n        }\r\n        if (canExpandCompletionItem(element)) {\r\n            addClass(data.right, 'can-expand-details');\r\n            show(data.readMore);\r\n            data.readMore.onmousedown = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            };\r\n            data.readMore.onclick = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                _this.widget.toggleDetails();\r\n            };\r\n        }\r\n        else {\r\n            removeClass(data.right, 'can-expand-details');\r\n            hide(data.readMore);\r\n            data.readMore.onmousedown = null;\r\n            data.readMore.onclick = null;\r\n        }\r\n    };\r\n    ItemRenderer.prototype.disposeTemplate = function (templateData) {\r\n        templateData.disposables.dispose();\r\n    };\r\n    ItemRenderer = __decorate([\r\n        __param(3, IModelService),\r\n        __param(4, IModeService),\r\n        __param(5, IThemeService)\r\n    ], ItemRenderer);\r\n    return ItemRenderer;\r\n}());\r\nvar SuggestionDetails = /** @class */ (function () {\r\n    function SuggestionDetails(container, widget, editor, markdownRenderer, kbToggleDetails) {\r\n        var _this = this;\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.markdownRenderer = markdownRenderer;\r\n        this.kbToggleDetails = kbToggleDetails;\r\n        this.borderWidth = 1;\r\n        this.disposables = new DisposableStore();\r\n        this.el = append(container, $('.details'));\r\n        this.disposables.add(toDisposable(function () { return container.removeChild(_this.el); }));\r\n        this.body = $('.body');\r\n        this.scrollbar = new DomScrollableElement(this.body, {});\r\n        append(this.el, this.scrollbar.getDomNode());\r\n        this.disposables.add(this.scrollbar);\r\n        this.header = append(this.body, $('.header'));\r\n        this.close = append(this.header, $('span.codicon.codicon-close'));\r\n        this.close.title = nls.localize('readLess', \"Read less...{0}\", this.kbToggleDetails);\r\n        this.type = append(this.header, $('p.type'));\r\n        this.docs = append(this.body, $('p.docs'));\r\n        this.configureFont();\r\n        Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(34 /* fontInfo */); })\r\n            .on(this.configureFont, this, this.disposables);\r\n        markdownRenderer.onDidRenderCodeBlock(function () { return _this.scrollbar.scanDomNode(); }, this, this.disposables);\r\n    }\r\n    Object.defineProperty(SuggestionDetails.prototype, \"element\", {\r\n        get: function () {\r\n            return this.el;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestionDetails.prototype.renderLoading = function () {\r\n        this.type.textContent = nls.localize('loading', \"Loading...\");\r\n        this.docs.textContent = '';\r\n    };\r\n    SuggestionDetails.prototype.renderItem = function (item, explainMode) {\r\n        var _this = this;\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n        var _a = item.completion, documentation = _a.documentation, detail = _a.detail;\r\n        // --- documentation\r\n        if (explainMode) {\r\n            var md = '';\r\n            md += \"score: \" + item.score[0] + (item.word ? \", compared '\" + (item.completion.filterText && (item.completion.filterText + ' (filterText)') || item.completion.label) + \"' with '\" + item.word + \"'\" : ' (no prefix)') + \"\\n\";\r\n            md += \"distance: \" + item.distance + \", see localityBonus-setting\\n\";\r\n            md += \"index: \" + item.idx + \", based on \" + (item.completion.sortText && \"sortText: \\\"\" + item.completion.sortText + \"\\\"\" || 'label') + \"\\n\";\r\n            documentation = new MarkdownString().appendCodeblock('empty', md);\r\n            detail = \"Provider: \" + item.provider._debugDisplayName;\r\n        }\r\n        if (!explainMode && !canExpandCompletionItem(item)) {\r\n            this.type.textContent = '';\r\n            this.docs.textContent = '';\r\n            addClass(this.el, 'no-docs');\r\n            return;\r\n        }\r\n        removeClass(this.el, 'no-docs');\r\n        if (typeof documentation === 'string') {\r\n            removeClass(this.docs, 'markdown-docs');\r\n            this.docs.textContent = documentation;\r\n        }\r\n        else {\r\n            addClass(this.docs, 'markdown-docs');\r\n            this.docs.innerHTML = '';\r\n            var renderedContents = this.markdownRenderer.render(documentation);\r\n            this.renderDisposeable = renderedContents;\r\n            this.docs.appendChild(renderedContents.element);\r\n        }\r\n        // --- details\r\n        if (detail) {\r\n            this.type.innerText = detail;\r\n            show(this.type);\r\n        }\r\n        else {\r\n            this.type.innerText = '';\r\n            hide(this.type);\r\n        }\r\n        this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + (this.borderWidth * 2) + 'px';\r\n        this.el.style.userSelect = 'text';\r\n        this.el.tabIndex = -1;\r\n        this.close.onmousedown = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n        this.close.onclick = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            _this.widget.toggleDetails();\r\n        };\r\n        this.body.scrollTop = 0;\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    SuggestionDetails.prototype.scrollDown = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop += much;\r\n    };\r\n    SuggestionDetails.prototype.scrollUp = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop -= much;\r\n    };\r\n    SuggestionDetails.prototype.scrollTop = function () {\r\n        this.body.scrollTop = 0;\r\n    };\r\n    SuggestionDetails.prototype.scrollBottom = function () {\r\n        this.body.scrollTop = this.body.scrollHeight;\r\n    };\r\n    SuggestionDetails.prototype.pageDown = function () {\r\n        this.scrollDown(80);\r\n    };\r\n    SuggestionDetails.prototype.pageUp = function () {\r\n        this.scrollUp(80);\r\n    };\r\n    SuggestionDetails.prototype.setBorderWidth = function (width) {\r\n        this.borderWidth = width;\r\n    };\r\n    SuggestionDetails.prototype.configureFont = function () {\r\n        var options = this.editor.getOptions();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var fontFamily = fontInfo.fontFamily;\r\n        var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\r\n        var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n        var fontWeight = fontInfo.fontWeight;\r\n        var fontSizePx = fontSize + \"px\";\r\n        var lineHeightPx = lineHeight + \"px\";\r\n        this.el.style.fontSize = fontSizePx;\r\n        this.el.style.fontWeight = fontWeight;\r\n        this.el.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n        this.type.style.fontFamily = fontFamily;\r\n        this.close.style.height = lineHeightPx;\r\n        this.close.style.width = lineHeightPx;\r\n    };\r\n    SuggestionDetails.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n    };\r\n    return SuggestionDetails;\r\n}());\r\nvar SuggestWidget = /** @class */ (function () {\r\n    function SuggestWidget(editor, telemetryService, keybindingService, contextKeyService, themeService, storageService, modeService, openerService, instantiationService) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        this.editor = editor;\r\n        this.telemetryService = telemetryService;\r\n        this.keybindingService = keybindingService;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this.state = null;\r\n        this.isAuto = false;\r\n        this.loadingTimeout = Disposable.None;\r\n        this.currentSuggestionDetails = null;\r\n        this.ignoreFocusEvents = false;\r\n        this.completionModel = null;\r\n        this.showTimeout = new TimeoutTimer();\r\n        this.toDispose = new DisposableStore();\r\n        this.onDidSelectEmitter = new Emitter();\r\n        this.onDidFocusEmitter = new Emitter();\r\n        this.onDidHideEmitter = new Emitter();\r\n        this.onDidShowEmitter = new Emitter();\r\n        this.onDidSelect = this.onDidSelectEmitter.event;\r\n        this.onDidFocus = this.onDidFocusEmitter.event;\r\n        this.onDidHide = this.onDidHideEmitter.event;\r\n        this.onDidShow = this.onDidShowEmitter.event;\r\n        this.maxWidgetWidth = 660;\r\n        this.listWidth = 330;\r\n        this.firstFocusInCurrentList = false;\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.explainMode = false;\r\n        this._onDetailsKeydown = new Emitter();\r\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\r\n        var markdownRenderer = this.toDispose.add(new MarkdownRenderer(editor, modeService, openerService));\r\n        var kbToggleDetails = (_b = (_a = keybindingService.lookupKeybinding('toggleSuggestionDetails')) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : '';\r\n        this.msgDetailsLess = nls.localize('detail.less', \"{0} for less...\", kbToggleDetails);\r\n        this.msgDetailMore = nls.localize('detail.more', \"{0} for more...\", kbToggleDetails);\r\n        this.isAuto = false;\r\n        this.focusedItem = null;\r\n        this.storageService = storageService;\r\n        this.element = $('.editor-widget.suggest-widget');\r\n        this.toDispose.add(addDisposableListener(this.element, 'click', function (e) {\r\n            if (e.target === _this.element) {\r\n                _this.hideWidget();\r\n            }\r\n        }));\r\n        this.messageElement = append(this.element, $('.message'));\r\n        this.listElement = append(this.element, $('.tree'));\r\n        var applyStatusBarStyle = function () { return toggleClass(_this.element, 'with-status-bar', !_this.editor.getOption(89 /* suggest */).hideStatusBar); };\r\n        applyStatusBarStyle();\r\n        this.statusBarElement = append(this.element, $('.suggest-status-bar'));\r\n        this.statusBarLeftSpan = append(this.statusBarElement, $('span'));\r\n        this.statusBarRightSpan = append(this.statusBarElement, $('span'));\r\n        this.setStatusBarLeftText('');\r\n        this.setStatusBarRightText('');\r\n        this.details = instantiationService.createInstance(SuggestionDetails, this.element, this, this.editor, markdownRenderer, kbToggleDetails);\r\n        var applyIconStyle = function () { return toggleClass(_this.element, 'no-icons', !_this.editor.getOption(89 /* suggest */).showIcons); };\r\n        applyIconStyle();\r\n        var renderer = instantiationService.createInstance(ItemRenderer, this, this.editor, kbToggleDetails);\r\n        this.list = new List('SuggestWidget', this.listElement, this, [renderer], {\r\n            useShadows: false,\r\n            openController: { shouldOpen: function () { return false; } },\r\n            mouseSupport: false,\r\n            accessibilityProvider: {\r\n                getAriaLabel: function (item) {\r\n                    var textLabel = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\r\n                    if (item.isResolved && _this.expandDocsSettingFromStorage()) {\r\n                        var _a = item.completion, documentation = _a.documentation, detail = _a.detail;\r\n                        var docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\r\n                        return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", textLabel, docs);\r\n                    }\r\n                    else {\r\n                        return textLabel;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.toDispose.add(attachListStyler(this.list, themeService, {\r\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\r\n            listInactiveFocusOutline: activeContrastBorder\r\n        }));\r\n        this.toDispose.add(themeService.onThemeChange(function (t) { return _this.onThemeChange(t); }));\r\n        this.toDispose.add(editor.onDidLayoutChange(function () { return _this.onEditorLayoutChange(); }));\r\n        this.toDispose.add(this.list.onMouseDown(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onTap(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onSelectionChange(function (e) { return _this.onListSelection(e); }));\r\n        this.toDispose.add(this.list.onFocusChange(function (e) { return _this.onListFocus(e); }));\r\n        this.toDispose.add(this.editor.onDidChangeCursorSelection(function () { return _this.onCursorSelectionChanged(); }));\r\n        this.toDispose.add(this.editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(89 /* suggest */)) {\r\n                applyStatusBarStyle();\r\n                applyIconStyle();\r\n            }\r\n        }));\r\n        this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\r\n        this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\r\n        this.editor.addContentWidget(this);\r\n        this.setState(0 /* Hidden */);\r\n        this.onThemeChange(themeService.getTheme());\r\n        this.toDispose.add(addStandardDisposableListener(this.details.element, 'keydown', function (e) {\r\n            _this._onDetailsKeydown.fire(e);\r\n        }));\r\n        this.toDispose.add(this.editor.onMouseDown(function (e) { return _this.onEditorMouseDown(e); }));\r\n    }\r\n    SuggestWidget.prototype.onEditorMouseDown = function (mouseEvent) {\r\n        // Clicking inside details\r\n        if (this.details.element.contains(mouseEvent.target.element)) {\r\n            this.details.element.focus();\r\n        }\r\n        // Clicking outside details and inside suggest\r\n        else {\r\n            if (this.element.contains(mouseEvent.target.element)) {\r\n                this.editor.focus();\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onCursorSelectionChanged = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n    };\r\n    SuggestWidget.prototype.onEditorLayoutChange = function () {\r\n        if ((this.state === 3 /* Open */ || this.state === 5 /* Details */) && this.expandDocsSettingFromStorage()) {\r\n            this.expandSideOrBelow();\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onListMouseDownOrTap = function (e) {\r\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\r\n            return;\r\n        }\r\n        // prevent stealing browser focus from the editor\r\n        e.browserEvent.preventDefault();\r\n        e.browserEvent.stopPropagation();\r\n        this.select(e.element, e.index);\r\n    };\r\n    SuggestWidget.prototype.onListSelection = function (e) {\r\n        if (!e.elements.length) {\r\n            return;\r\n        }\r\n        this.select(e.elements[0], e.indexes[0]);\r\n    };\r\n    SuggestWidget.prototype.select = function (item, index) {\r\n        var completionModel = this.completionModel;\r\n        if (!completionModel) {\r\n            return;\r\n        }\r\n        this.onDidSelectEmitter.fire({ item: item, index: index, model: completionModel });\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype.onThemeChange = function (theme) {\r\n        var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\r\n        if (backgroundColor) {\r\n            this.listElement.style.backgroundColor = backgroundColor.toString();\r\n            this.statusBarElement.style.backgroundColor = backgroundColor.toString();\r\n            this.details.element.style.backgroundColor = backgroundColor.toString();\r\n            this.messageElement.style.backgroundColor = backgroundColor.toString();\r\n        }\r\n        var borderColor = theme.getColor(editorSuggestWidgetBorder);\r\n        if (borderColor) {\r\n            this.listElement.style.borderColor = borderColor.toString();\r\n            this.statusBarElement.style.borderColor = borderColor.toString();\r\n            this.details.element.style.borderColor = borderColor.toString();\r\n            this.messageElement.style.borderColor = borderColor.toString();\r\n            this.detailsBorderColor = borderColor.toString();\r\n        }\r\n        var focusBorderColor = theme.getColor(focusBorder);\r\n        if (focusBorderColor) {\r\n            this.detailsFocusBorderColor = focusBorderColor.toString();\r\n        }\r\n        this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\r\n    };\r\n    SuggestWidget.prototype.onListFocus = function (e) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        if (this.ignoreFocusEvents) {\r\n            return;\r\n        }\r\n        if (!e.elements.length) {\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n                this.focusedItem = null;\r\n            }\r\n            this.editor.setAriaOptions({ activeDescendant: undefined });\r\n            return;\r\n        }\r\n        if (!this.completionModel) {\r\n            return;\r\n        }\r\n        var item = e.elements[0];\r\n        var index = e.indexes[0];\r\n        this.firstFocusInCurrentList = !this.focusedItem;\r\n        if (item !== this.focusedItem) {\r\n            // update statusbar\r\n            // todo@joh,pine -> this should a toolbar with actions so that these things become\r\n            // mouse clickable and fit for accessibility...\r\n            var wantsInsert = this.editor.getOption(89 /* suggest */).insertMode === 'insert';\r\n            var kbAccept = (_a = this.keybindingService.lookupKeybinding('acceptSelectedSuggestion')) === null || _a === void 0 ? void 0 : _a.getLabel();\r\n            var kbAcceptAlt = (_b = this.keybindingService.lookupKeybinding('acceptAlternativeSelectedSuggestion')) === null || _b === void 0 ? void 0 : _b.getLabel();\r\n            if (!Position.equals(item.editInsertEnd, item.editReplaceEnd)) {\r\n                // insert AND replace\r\n                if (wantsInsert) {\r\n                    this.setStatusBarLeftText(nls.localize('insert', \"{0} to insert, {1} to replace\", kbAccept, kbAcceptAlt));\r\n                }\r\n                else {\r\n                    this.setStatusBarLeftText(nls.localize('replace', \"{0} to replace, {1} to insert\", kbAccept, kbAcceptAlt));\r\n                }\r\n            }\r\n            else {\r\n                this.setStatusBarLeftText(nls.localize('accept', \"{0} to accept\", kbAccept));\r\n            }\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n            }\r\n            this.focusedItem = item;\r\n            this.list.reveal(index);\r\n            this.currentSuggestionDetails = createCancelablePromise(function (token) { return __awaiter(_this, void 0, void 0, function () {\r\n                var loading, result;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            loading = disposableTimeout(function () { return _this.showDetails(true); }, 250);\r\n                            token.onCancellationRequested(function () { return loading.dispose(); });\r\n                            return [4 /*yield*/, item.resolve(token)];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            loading.dispose();\r\n                            return [2 /*return*/, result];\r\n                    }\r\n                });\r\n            }); });\r\n            this.currentSuggestionDetails.then(function () {\r\n                if (index >= _this.list.length || item !== _this.list.element(index)) {\r\n                    return;\r\n                }\r\n                // item can have extra information, so re-render\r\n                _this.ignoreFocusEvents = true;\r\n                _this.list.splice(index, 1, [item]);\r\n                _this.list.setFocus([index]);\r\n                _this.ignoreFocusEvents = false;\r\n                if (_this.expandDocsSettingFromStorage()) {\r\n                    _this.showDetails(false);\r\n                }\r\n                else {\r\n                    removeClass(_this.element, 'docs-side');\r\n                }\r\n                if (canExpandCompletionItem(_this.focusedItem)) {\r\n                    if (_this.expandDocsSettingFromStorage()) {\r\n                        _this.setStatusBarRightText(_this.msgDetailsLess);\r\n                    }\r\n                    else {\r\n                        _this.setStatusBarRightText(_this.msgDetailMore);\r\n                    }\r\n                }\r\n                else {\r\n                    _this.statusBarRightSpan.innerText = '';\r\n                }\r\n                _this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\r\n            }).catch(onUnexpectedError);\r\n        }\r\n        // emit an event\r\n        this.onDidFocusEmitter.fire({ item: item, index: index, model: this.completionModel });\r\n    };\r\n    SuggestWidget.prototype.setState = function (state) {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        var stateChanged = this.state !== state;\r\n        this.state = state;\r\n        toggleClass(this.element, 'frozen', state === 4 /* Frozen */);\r\n        switch (state) {\r\n            case 0 /* Hidden */:\r\n                hide(this.messageElement, this.details.element, this.listElement, this.statusBarElement);\r\n                this.hide();\r\n                this.listHeight = 0;\r\n                if (stateChanged) {\r\n                    this.list.splice(0, this.list.length);\r\n                }\r\n                this.focusedItem = null;\r\n                break;\r\n            case 1 /* Loading */:\r\n                this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\r\n                hide(this.listElement, this.details.element, this.statusBarElement);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 2 /* Empty */:\r\n                this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\r\n                hide(this.listElement, this.details.element, this.statusBarElement);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 3 /* Open */:\r\n                hide(this.messageElement);\r\n                show(this.listElement, this.statusBarElement);\r\n                this.show();\r\n                break;\r\n            case 4 /* Frozen */:\r\n                hide(this.messageElement);\r\n                show(this.listElement);\r\n                this.show();\r\n                break;\r\n            case 5 /* Details */:\r\n                hide(this.messageElement);\r\n                show(this.details.element, this.listElement, this.statusBarElement);\r\n                this.show();\r\n                break;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showTriggered = function (auto, delay) {\r\n        var _this = this;\r\n        if (this.state !== 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.isAuto = !!auto;\r\n        if (!this.isAuto) {\r\n            this.loadingTimeout = disposableTimeout(function () { return _this.setState(1 /* Loading */); }, delay);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.loadingTimeout.dispose();\r\n        if (this.currentSuggestionDetails) {\r\n            this.currentSuggestionDetails.cancel();\r\n            this.currentSuggestionDetails = null;\r\n        }\r\n        if (this.completionModel !== completionModel) {\r\n            this.completionModel = completionModel;\r\n        }\r\n        if (isFrozen && this.state !== 2 /* Empty */ && this.state !== 0 /* Hidden */) {\r\n            this.setState(4 /* Frozen */);\r\n            return;\r\n        }\r\n        var visibleCount = this.completionModel.items.length;\r\n        var isEmpty = visibleCount === 0;\r\n        this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\r\n        if (isEmpty) {\r\n            if (isAuto) {\r\n                this.setState(0 /* Hidden */);\r\n            }\r\n            else {\r\n                this.setState(2 /* Empty */);\r\n            }\r\n            this.completionModel = null;\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */) {\r\n                var stats = this.completionModel.stats;\r\n                stats['wasAutomaticallyTriggered'] = !!isAuto;\r\n                /* __GDPR__\r\n                    \"suggestWidget\" : {\r\n                        \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\r\n                        \"${include}\": [\r\n                            \"${ICompletionStats}\"\r\n                        ]\r\n                    }\r\n                */\r\n                this.telemetryService.publicLog('suggestWidget', __assign({}, stats));\r\n            }\r\n            this.focusedItem = null;\r\n            this.list.splice(0, this.list.length, this.completionModel.items);\r\n            if (isFrozen) {\r\n                this.setState(4 /* Frozen */);\r\n            }\r\n            else {\r\n                this.setState(3 /* Open */);\r\n            }\r\n            this.list.reveal(selectionIndex, 0);\r\n            this.list.setFocus([selectionIndex]);\r\n            // Reset focus border\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNextPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageDown();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNextPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNext = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNext(1, true);\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectLast = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollBottom();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusLast();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPreviousPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageUp();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPreviousPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPrevious = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPrevious(1, true);\r\n                return false;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectFirst = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollTop();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusFirst();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.getFocusedItem = function () {\r\n        if (this.state !== 0 /* Hidden */\r\n            && this.state !== 2 /* Empty */\r\n            && this.state !== 1 /* Loading */\r\n            && this.completionModel) {\r\n            return {\r\n                item: this.list.getFocusedElements()[0],\r\n                index: this.list.getFocus()[0],\r\n                model: this.completionModel\r\n            };\r\n        }\r\n        return undefined;\r\n    };\r\n    SuggestWidget.prototype.toggleDetailsFocus = function () {\r\n        if (this.state === 5 /* Details */) {\r\n            this.setState(3 /* Open */);\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n        else if (this.state === 3 /* Open */ && this.expandDocsSettingFromStorage()) {\r\n            this.setState(5 /* Details */);\r\n            if (this.detailsFocusBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsFocusBorderColor;\r\n            }\r\n        }\r\n        this.telemetryService.publicLog2('suggestWidget:toggleDetailsFocus');\r\n    };\r\n    SuggestWidget.prototype.toggleDetails = function () {\r\n        if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\r\n            return;\r\n        }\r\n        if (this.expandDocsSettingFromStorage()) {\r\n            this.updateExpandDocsSetting(false);\r\n            hide(this.details.element);\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            this.editor.layoutContentWidget(this);\r\n            this.setStatusBarRightText(this.msgDetailMore);\r\n            this.telemetryService.publicLog2('suggestWidget:collapseDetails');\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */ && this.state !== 5 /* Details */ && this.state !== 4 /* Frozen */) {\r\n                return;\r\n            }\r\n            this.updateExpandDocsSetting(true);\r\n            this.showDetails(false);\r\n            this.setStatusBarRightText(this.msgDetailsLess);\r\n            this.telemetryService.publicLog2('suggestWidget:expandDetails');\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showDetails = function (loading) {\r\n        if (!loading) {\r\n            // When loading, don't re-layout docs, as item is not resolved yet #88731\r\n            this.expandSideOrBelow();\r\n        }\r\n        show(this.details.element);\r\n        this.details.element.style.maxHeight = this.maxWidgetHeight + 'px';\r\n        if (loading) {\r\n            this.details.renderLoading();\r\n        }\r\n        else {\r\n            this.details.renderItem(this.list.getFocusedElements()[0], this.explainMode);\r\n        }\r\n        // Reset margin-top that was set as Fix for #26416\r\n        this.listElement.style.marginTop = '0px';\r\n        // with docs showing up widget width/height may change, so reposition the widget\r\n        this.editor.layoutContentWidget(this);\r\n        this.adjustDocsPosition();\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype.toggleExplainMode = function () {\r\n        if (this.list.getFocusedElements()[0] && this.expandDocsSettingFromStorage()) {\r\n            this.explainMode = !this.explainMode;\r\n            this.showDetails(false);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.show = function () {\r\n        var _this = this;\r\n        var newHeight = this.updateListHeight();\r\n        if (newHeight !== this.listHeight) {\r\n            this.editor.layoutContentWidget(this);\r\n            this.listHeight = newHeight;\r\n        }\r\n        this.suggestWidgetVisible.set(true);\r\n        this.showTimeout.cancelAndSet(function () {\r\n            addClass(_this.element, 'visible');\r\n            _this.onDidShowEmitter.fire(_this);\r\n        }, 100);\r\n    };\r\n    SuggestWidget.prototype.hide = function () {\r\n        this.suggestWidgetVisible.reset();\r\n        this.suggestWidgetMultipleSuggestions.reset();\r\n        removeClass(this.element, 'visible');\r\n    };\r\n    SuggestWidget.prototype.hideWidget = function () {\r\n        this.loadingTimeout.dispose();\r\n        this.setState(0 /* Hidden */);\r\n        this.onDidHideEmitter.fire(this);\r\n    };\r\n    SuggestWidget.prototype.getPosition = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return null;\r\n        }\r\n        var preference = [2 /* BELOW */, 1 /* ABOVE */];\r\n        if (this.preferDocPositionTop) {\r\n            preference = [1 /* ABOVE */];\r\n        }\r\n        return {\r\n            position: this.editor.getPosition(),\r\n            preference: preference\r\n        };\r\n    };\r\n    SuggestWidget.prototype.getDomNode = function () {\r\n        return this.element;\r\n    };\r\n    SuggestWidget.prototype.getId = function () {\r\n        return SuggestWidget.ID;\r\n    };\r\n    SuggestWidget.prototype.isFrozen = function () {\r\n        return this.state === 4 /* Frozen */;\r\n    };\r\n    SuggestWidget.prototype.updateListHeight = function () {\r\n        var height = 0;\r\n        if (this.state === 2 /* Empty */ || this.state === 1 /* Loading */) {\r\n            height = this.unfocusedHeight;\r\n        }\r\n        else {\r\n            var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\r\n            var maxVisibleSuggestions = this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\r\n            height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\r\n        }\r\n        this.element.style.lineHeight = this.unfocusedHeight + \"px\";\r\n        this.listElement.style.height = height + \"px\";\r\n        this.statusBarElement.style.top = height + \"px\";\r\n        this.list.layout(height);\r\n        return height;\r\n    };\r\n    /**\r\n     * Adds the propert classes, margins when positioning the docs to the side\r\n     */\r\n    SuggestWidget.prototype.adjustDocsPosition = function () {\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var lineHeight = this.editor.getOption(49 /* lineHeight */);\r\n        var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\r\n        var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\r\n        var cursorX = editorCoords.left + cursorCoords.left;\r\n        var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        var widgetCoords = getDomNodePagePosition(this.element);\r\n        var widgetX = widgetCoords.left;\r\n        var widgetY = widgetCoords.top;\r\n        // Fixes #27649\r\n        // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\r\n        if (this.docsPositionPreviousWidgetY &&\r\n            this.docsPositionPreviousWidgetY < widgetY &&\r\n            !this.preferDocPositionTop) {\r\n            this.preferDocPositionTop = true;\r\n            this.adjustDocsPosition();\r\n            return;\r\n        }\r\n        this.docsPositionPreviousWidgetY = widgetY;\r\n        if (widgetX < cursorX - this.listWidth) {\r\n            // Widget is too far to the left of cursor, swap list and docs\r\n            addClass(this.element, 'list-right');\r\n        }\r\n        else {\r\n            removeClass(this.element, 'list-right');\r\n        }\r\n        // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\r\n        // margin-top needs to be applied on list to make it appear right above the cursor\r\n        // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\r\n        if (hasClass(this.element, 'docs-side')\r\n            && cursorY - lineHeight > widgetY\r\n            && this.details.element.offsetHeight > this.listElement.offsetHeight) {\r\n            // Fix for #26416\r\n            // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\r\n            this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\r\n        }\r\n    };\r\n    /**\r\n     * Adds the proper classes for positioning the docs to the side or below depending on item\r\n     */\r\n    SuggestWidget.prototype.expandSideOrBelow = function () {\r\n        if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            return;\r\n        }\r\n        var matches = this.element.style.maxWidth.match(/(\\d+)px/);\r\n        if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\r\n            addClass(this.element, 'docs-below');\r\n            removeClass(this.element, 'docs-side');\r\n        }\r\n        else if (canExpandCompletionItem(this.focusedItem)) {\r\n            addClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n        }\r\n    };\r\n    Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\r\n        // Heights\r\n        get: function () {\r\n            return this.unfocusedHeight * this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\r\n        get: function () {\r\n            var options = this.editor.getOptions();\r\n            return options.get(91 /* suggestLineHeight */) || options.get(34 /* fontInfo */).lineHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // IDelegate\r\n    SuggestWidget.prototype.getHeight = function (element) {\r\n        return this.unfocusedHeight;\r\n    };\r\n    SuggestWidget.prototype.getTemplateId = function (element) {\r\n        return 'suggestion';\r\n    };\r\n    SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\r\n        return this.storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, expandSuggestionDocsByDefault);\r\n    };\r\n    SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\r\n        this.storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */);\r\n    };\r\n    SuggestWidget.prototype.setStatusBarLeftText = function (s) {\r\n        this.statusBarLeftSpan.innerText = s;\r\n    };\r\n    SuggestWidget.prototype.setStatusBarRightText = function (s) {\r\n        this.statusBarRightSpan.innerText = s;\r\n    };\r\n    SuggestWidget.prototype.dispose = function () {\r\n        this.details.dispose();\r\n        this.list.dispose();\r\n        this.toDispose.dispose();\r\n        this.loadingTimeout.dispose();\r\n        this.showTimeout.dispose();\r\n    };\r\n    SuggestWidget.ID = 'editor.widget.suggestWidget';\r\n    SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\r\n    SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\r\n    SuggestWidget = __decorate([\r\n        __param(1, ITelemetryService),\r\n        __param(2, IKeybindingService),\r\n        __param(3, IContextKeyService),\r\n        __param(4, IThemeService),\r\n        __param(5, IStorageService),\r\n        __param(6, IModeService),\r\n        __param(7, IOpenerService),\r\n        __param(8, IInstantiationService)\r\n    ], SuggestWidget);\r\n    return SuggestWidget;\r\n}());\r\nexport { SuggestWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\r\n    if (matchHighlight) {\r\n        collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorSuggestWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}