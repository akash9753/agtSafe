{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler, createCancelablePromise } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nvar HoverOperation = /** @class */function () {\n  function HoverOperation(computer, success, error, progress, hoverTime) {\n    var _this = this;\n    this._computer = computer;\n    this._state = 0 /* IDLE */;\n    this._hoverTime = hoverTime;\n    this._firstWaitScheduler = new RunOnceScheduler(function () {\n      return _this._triggerAsyncComputation();\n    }, 0);\n    this._secondWaitScheduler = new RunOnceScheduler(function () {\n      return _this._triggerSyncComputation();\n    }, 0);\n    this._loadingMessageScheduler = new RunOnceScheduler(function () {\n      return _this._showLoadingMessage();\n    }, 0);\n    this._asyncComputationPromise = null;\n    this._asyncComputationPromiseDone = false;\n    this._completeCallback = success;\n    this._errorCallback = error;\n    this._progressCallback = progress;\n  }\n  HoverOperation.prototype.setHoverTime = function (hoverTime) {\n    this._hoverTime = hoverTime;\n  };\n  HoverOperation.prototype._firstWaitTime = function () {\n    return this._hoverTime / 2;\n  };\n  HoverOperation.prototype._secondWaitTime = function () {\n    return this._hoverTime / 2;\n  };\n  HoverOperation.prototype._loadingMessageTime = function () {\n    return 3 * this._hoverTime;\n  };\n  HoverOperation.prototype._triggerAsyncComputation = function () {\n    var _this = this;\n    this._state = 2 /* SECOND_WAIT */;\n    this._secondWaitScheduler.schedule(this._secondWaitTime());\n    if (this._computer.computeAsync) {\n      this._asyncComputationPromiseDone = false;\n      this._asyncComputationPromise = createCancelablePromise(function (token) {\n        return _this._computer.computeAsync(token);\n      });\n      this._asyncComputationPromise.then(function (asyncResult) {\n        _this._asyncComputationPromiseDone = true;\n        _this._withAsyncResult(asyncResult);\n      }, function (e) {\n        return _this._onError(e);\n      });\n    } else {\n      this._asyncComputationPromiseDone = true;\n    }\n  };\n  HoverOperation.prototype._triggerSyncComputation = function () {\n    if (this._computer.computeSync) {\n      this._computer.onResult(this._computer.computeSync(), true);\n    }\n    if (this._asyncComputationPromiseDone) {\n      this._state = 0 /* IDLE */;\n      this._onComplete(this._computer.getResult());\n    } else {\n      this._state = 3 /* WAITING_FOR_ASYNC_COMPUTATION */;\n      this._onProgress(this._computer.getResult());\n    }\n  };\n  HoverOperation.prototype._showLoadingMessage = function () {\n    if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\n      this._onProgress(this._computer.getResultWithLoadingMessage());\n    }\n  };\n  HoverOperation.prototype._withAsyncResult = function (asyncResult) {\n    if (asyncResult) {\n      this._computer.onResult(asyncResult, false);\n    }\n    if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\n      this._state = 0 /* IDLE */;\n      this._onComplete(this._computer.getResult());\n    }\n  };\n  HoverOperation.prototype._onComplete = function (value) {\n    if (this._completeCallback) {\n      this._completeCallback(value);\n    }\n  };\n  HoverOperation.prototype._onError = function (error) {\n    if (this._errorCallback) {\n      this._errorCallback(error);\n    } else {\n      onUnexpectedError(error);\n    }\n  };\n  HoverOperation.prototype._onProgress = function (value) {\n    if (this._progressCallback) {\n      this._progressCallback(value);\n    }\n  };\n  HoverOperation.prototype.start = function (mode) {\n    if (mode === 0 /* Delayed */) {\n      if (this._state === 0 /* IDLE */) {\n        this._state = 1 /* FIRST_WAIT */;\n        this._firstWaitScheduler.schedule(this._firstWaitTime());\n        this._loadingMessageScheduler.schedule(this._loadingMessageTime());\n      }\n    } else {\n      switch (this._state) {\n        case 0 /* IDLE */:\n          this._triggerAsyncComputation();\n          this._secondWaitScheduler.cancel();\n          this._triggerSyncComputation();\n          break;\n        case 2 /* SECOND_WAIT */:\n          this._secondWaitScheduler.cancel();\n          this._triggerSyncComputation();\n          break;\n      }\n    }\n  };\n  HoverOperation.prototype.cancel = function () {\n    this._loadingMessageScheduler.cancel();\n    if (this._state === 1 /* FIRST_WAIT */) {\n      this._firstWaitScheduler.cancel();\n    }\n    if (this._state === 2 /* SECOND_WAIT */) {\n      this._secondWaitScheduler.cancel();\n      if (this._asyncComputationPromise) {\n        this._asyncComputationPromise.cancel();\n        this._asyncComputationPromise = null;\n      }\n    }\n    if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\n      if (this._asyncComputationPromise) {\n        this._asyncComputationPromise.cancel();\n        this._asyncComputationPromise = null;\n      }\n    }\n    this._state = 0 /* IDLE */;\n  };\n\n  return HoverOperation;\n}();\nexport { HoverOperation };","map":{"version":3,"names":["RunOnceScheduler","createCancelablePromise","onUnexpectedError","HoverOperation","computer","success","error","progress","hoverTime","_this","_computer","_state","_hoverTime","_firstWaitScheduler","_triggerAsyncComputation","_secondWaitScheduler","_triggerSyncComputation","_loadingMessageScheduler","_showLoadingMessage","_asyncComputationPromise","_asyncComputationPromiseDone","_completeCallback","_errorCallback","_progressCallback","prototype","setHoverTime","_firstWaitTime","_secondWaitTime","_loadingMessageTime","schedule","computeAsync","token","then","asyncResult","_withAsyncResult","e","_onError","computeSync","onResult","_onComplete","getResult","_onProgress","getResultWithLoadingMessage","value","start","mode","cancel"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, createCancelablePromise } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nvar HoverOperation = /** @class */ (function () {\r\n    function HoverOperation(computer, success, error, progress, hoverTime) {\r\n        var _this = this;\r\n        this._computer = computer;\r\n        this._state = 0 /* IDLE */;\r\n        this._hoverTime = hoverTime;\r\n        this._firstWaitScheduler = new RunOnceScheduler(function () { return _this._triggerAsyncComputation(); }, 0);\r\n        this._secondWaitScheduler = new RunOnceScheduler(function () { return _this._triggerSyncComputation(); }, 0);\r\n        this._loadingMessageScheduler = new RunOnceScheduler(function () { return _this._showLoadingMessage(); }, 0);\r\n        this._asyncComputationPromise = null;\r\n        this._asyncComputationPromiseDone = false;\r\n        this._completeCallback = success;\r\n        this._errorCallback = error;\r\n        this._progressCallback = progress;\r\n    }\r\n    HoverOperation.prototype.setHoverTime = function (hoverTime) {\r\n        this._hoverTime = hoverTime;\r\n    };\r\n    HoverOperation.prototype._firstWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._secondWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._loadingMessageTime = function () {\r\n        return 3 * this._hoverTime;\r\n    };\r\n    HoverOperation.prototype._triggerAsyncComputation = function () {\r\n        var _this = this;\r\n        this._state = 2 /* SECOND_WAIT */;\r\n        this._secondWaitScheduler.schedule(this._secondWaitTime());\r\n        if (this._computer.computeAsync) {\r\n            this._asyncComputationPromiseDone = false;\r\n            this._asyncComputationPromise = createCancelablePromise(function (token) { return _this._computer.computeAsync(token); });\r\n            this._asyncComputationPromise.then(function (asyncResult) {\r\n                _this._asyncComputationPromiseDone = true;\r\n                _this._withAsyncResult(asyncResult);\r\n            }, function (e) { return _this._onError(e); });\r\n        }\r\n        else {\r\n            this._asyncComputationPromiseDone = true;\r\n        }\r\n    };\r\n    HoverOperation.prototype._triggerSyncComputation = function () {\r\n        if (this._computer.computeSync) {\r\n            this._computer.onResult(this._computer.computeSync(), true);\r\n        }\r\n        if (this._asyncComputationPromiseDone) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n        else {\r\n            this._state = 3 /* WAITING_FOR_ASYNC_COMPUTATION */;\r\n            this._onProgress(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._showLoadingMessage = function () {\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._onProgress(this._computer.getResultWithLoadingMessage());\r\n        }\r\n    };\r\n    HoverOperation.prototype._withAsyncResult = function (asyncResult) {\r\n        if (asyncResult) {\r\n            this._computer.onResult(asyncResult, false);\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._onComplete = function (value) {\r\n        if (this._completeCallback) {\r\n            this._completeCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onError = function (error) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback(error);\r\n        }\r\n        else {\r\n            onUnexpectedError(error);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onProgress = function (value) {\r\n        if (this._progressCallback) {\r\n            this._progressCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype.start = function (mode) {\r\n        if (mode === 0 /* Delayed */) {\r\n            if (this._state === 0 /* IDLE */) {\r\n                this._state = 1 /* FIRST_WAIT */;\r\n                this._firstWaitScheduler.schedule(this._firstWaitTime());\r\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime());\r\n            }\r\n        }\r\n        else {\r\n            switch (this._state) {\r\n                case 0 /* IDLE */:\r\n                    this._triggerAsyncComputation();\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n                case 2 /* SECOND_WAIT */:\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    HoverOperation.prototype.cancel = function () {\r\n        this._loadingMessageScheduler.cancel();\r\n        if (this._state === 1 /* FIRST_WAIT */) {\r\n            this._firstWaitScheduler.cancel();\r\n        }\r\n        if (this._state === 2 /* SECOND_WAIT */) {\r\n            this._secondWaitScheduler.cancel();\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        this._state = 0 /* IDLE */;\r\n    };\r\n    return HoverOperation;\r\n}());\r\nexport { HoverOperation };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}