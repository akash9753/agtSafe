{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n          case 7:\n            op = _.ops.pop();\n            _.trys.pop();\n            continue;\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n              _.ops.push(op);\n              break;\n            }\n            if (t[2]) _.ops.pop();\n            _.trys.pop();\n            continue;\n        }\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../browser/core/editorState.js';\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { DocumentFormattingEditProviderRegistry, DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../common/modes.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../nls.js';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { assertType } from '../../../base/common/types.js';\nexport function alertFormattingEdits(edits) {\n  edits = edits.filter(function (edit) {\n    return edit.range;\n  });\n  if (!edits.length) {\n    return;\n  }\n  var range = edits[0].range;\n  for (var i = 1; i < edits.length; i++) {\n    range = Range.plusRange(range, edits[i].range);\n  }\n  var startLineNumber = range.startLineNumber,\n    endLineNumber = range.endLineNumber;\n  if (startLineNumber === endLineNumber) {\n    if (edits.length === 1) {\n      alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n    } else {\n      alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n    }\n  } else {\n    if (edits.length === 1) {\n      alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n    } else {\n      alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n    }\n  }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(model) {\n  var result = [];\n  var seen = new Set();\n  // (1) add all document formatter\n  var docFormatter = DocumentFormattingEditProviderRegistry.ordered(model);\n  for (var _i = 0, docFormatter_1 = docFormatter; _i < docFormatter_1.length; _i++) {\n    var formatter = docFormatter_1[_i];\n    result.push(formatter);\n    if (formatter.extensionId) {\n      seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n    }\n  }\n  // (2) add all range formatter as document formatter (unless the same extension already did that)\n  var rangeFormatter = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n  var _loop_1 = function _loop_1(formatter) {\n    if (formatter.extensionId) {\n      if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\n        return \"continue\";\n      }\n      seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n    }\n    result.push({\n      displayName: formatter.displayName,\n      extensionId: formatter.extensionId,\n      provideDocumentFormattingEdits: function provideDocumentFormattingEdits(model, options, token) {\n        return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n      }\n    });\n  };\n  for (var _a = 0, rangeFormatter_1 = rangeFormatter; _a < rangeFormatter_1.length; _a++) {\n    var formatter = rangeFormatter_1[_a];\n    _loop_1(formatter);\n  }\n  return result;\n}\nvar FormattingConflicts = /** @class */function () {\n  function FormattingConflicts() {}\n  FormattingConflicts.select = function (formatter, document, mode) {\n    return __awaiter(this, void 0, void 0, function () {\n      var selector;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (formatter.length === 0) {\n              return [2 /*return*/, undefined];\n            }\n            selector = FormattingConflicts._selectors.iterator().next().value;\n            if (!selector) return [3 /*break*/, 2];\n            return [4 /*yield*/, selector(formatter, document, mode)];\n          case 1:\n            return [2 /*return*/, _a.sent()];\n          case 2:\n            return [2 /*return*/, formatter[0]];\n        }\n      });\n    });\n  };\n  FormattingConflicts._selectors = new LinkedList();\n  return FormattingConflicts;\n}();\nexport { FormattingConflicts };\nexport function formatDocumentRangeWithSelectedProvider(accessor, editorOrModel, range, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var instaService, model, provider, selected;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          instaService = accessor.get(IInstantiationService);\n          model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n          provider = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n          return [4 /*yield*/, FormattingConflicts.select(provider, model, mode)];\n        case 1:\n          selected = _a.sent();\n          if (!selected) return [3 /*break*/, 3];\n          return [4 /*yield*/, instaService.invokeFunction(formatDocumentRangeWithProvider, selected, editorOrModel, range, token)];\n        case 2:\n          _a.sent();\n          _a.label = 3;\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\n\nexport function formatDocumentRangeWithProvider(accessor, provider, editorOrModel, range, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var workerService, model, cts, edits, rawEdits, range_1, initialSelection_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          workerService = accessor.get(IEditorWorkerService);\n          if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, token);\n          } else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n          }\n          _a.label = 1;\n        case 1:\n          _a.trys.push([1,, 4, 5]);\n          return [4 /*yield*/, provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)];\n        case 2:\n          rawEdits = _a.sent();\n          return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n        case 3:\n          edits = _a.sent();\n          if (cts.token.isCancellationRequested) {\n            return [2 /*return*/, true];\n          }\n          return [3 /*break*/, 5];\n        case 4:\n          cts.dispose();\n          return [7 /*endfinally*/];\n        case 5:\n          if (!edits || edits.length === 0) {\n            return [2 /*return*/, false];\n          }\n          if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits);\n            alertFormattingEdits(edits);\n            editorOrModel.pushUndoStop();\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\n          } else {\n            range_1 = edits[0].range;\n            initialSelection_1 = new Selection(range_1.startLineNumber, range_1.startColumn, range_1.endLineNumber, range_1.endColumn);\n            model.pushEditOperations([initialSelection_1], edits.map(function (edit) {\n              return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n              };\n            }), function (undoEdits) {\n              for (var _i = 0, undoEdits_1 = undoEdits; _i < undoEdits_1.length; _i++) {\n                var range_2 = undoEdits_1[_i].range;\n                if (Range.areIntersectingOrTouching(range_2, initialSelection_1)) {\n                  return [new Selection(range_2.startLineNumber, range_2.startColumn, range_2.endLineNumber, range_2.endColumn)];\n                }\n              }\n              return null;\n            });\n          }\n          return [2 /*return*/, true];\n      }\n    });\n  });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var instaService, model, provider, selected;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          instaService = accessor.get(IInstantiationService);\n          model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n          provider = getRealAndSyntheticDocumentFormattersOrdered(model);\n          return [4 /*yield*/, FormattingConflicts.select(provider, model, mode)];\n        case 1:\n          selected = _a.sent();\n          if (!selected) return [3 /*break*/, 3];\n          return [4 /*yield*/, instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token)];\n        case 2:\n          _a.sent();\n          _a.label = 3;\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\n\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var workerService, model, cts, edits, rawEdits, range, initialSelection_2;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          workerService = accessor.get(IEditorWorkerService);\n          if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, token);\n          } else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n          }\n          _a.label = 1;\n        case 1:\n          _a.trys.push([1,, 4, 5]);\n          return [4 /*yield*/, provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token)];\n        case 2:\n          rawEdits = _a.sent();\n          return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n        case 3:\n          edits = _a.sent();\n          if (cts.token.isCancellationRequested) {\n            return [2 /*return*/, true];\n          }\n          return [3 /*break*/, 5];\n        case 4:\n          cts.dispose();\n          return [7 /*endfinally*/];\n        case 5:\n          if (!edits || edits.length === 0) {\n            return [2 /*return*/, false];\n          }\n          if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits);\n            if (mode !== 2 /* Silent */) {\n              alertFormattingEdits(edits);\n              editorOrModel.pushUndoStop();\n              editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\n            }\n          } else {\n            range = edits[0].range;\n            initialSelection_2 = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection_2], edits.map(function (edit) {\n              return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n              };\n            }), function (undoEdits) {\n              for (var _i = 0, undoEdits_2 = undoEdits; _i < undoEdits_2.length; _i++) {\n                var range_3 = undoEdits_2[_i].range;\n                if (Range.areIntersectingOrTouching(range_3, initialSelection_2)) {\n                  return [new Selection(range_3.startLineNumber, range_3.startColumn, range_3.endLineNumber, range_3.endColumn)];\n                }\n              }\n              return null;\n            });\n          }\n          return [2 /*return*/, true];\n      }\n    });\n  });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, model, range, options, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var providers, _i, providers_1, provider, rawEdits;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          providers = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n          _i = 0, providers_1 = providers;\n          _a.label = 1;\n        case 1:\n          if (!(_i < providers_1.length)) return [3 /*break*/, 5];\n          provider = providers_1[_i];\n          return [4 /*yield*/, Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError)];\n        case 2:\n          rawEdits = _a.sent();\n          if (!isNonEmptyArray(rawEdits)) return [3 /*break*/, 4];\n          return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n        case 3:\n          return [2 /*return*/, _a.sent()];\n        case 4:\n          _i++;\n          return [3 /*break*/, 1];\n        case 5:\n          return [2 /*return*/, undefined];\n      }\n    });\n  });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, model, options, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var providers, _i, providers_2, provider, rawEdits;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          providers = getRealAndSyntheticDocumentFormattersOrdered(model);\n          _i = 0, providers_2 = providers;\n          _a.label = 1;\n        case 1:\n          if (!(_i < providers_2.length)) return [3 /*break*/, 5];\n          provider = providers_2[_i];\n          return [4 /*yield*/, Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError)];\n        case 2:\n          rawEdits = _a.sent();\n          if (!isNonEmptyArray(rawEdits)) return [3 /*break*/, 4];\n          return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n        case 3:\n          return [2 /*return*/, _a.sent()];\n        case 4:\n          _i++;\n          return [3 /*break*/, 1];\n        case 5:\n          return [2 /*return*/, undefined];\n      }\n    });\n  });\n}\nexport function getOnTypeFormattingEdits(workerService, model, position, ch, options) {\n  var providers = OnTypeFormattingEditProviderRegistry.ordered(model);\n  if (providers.length === 0) {\n    return Promise.resolve(undefined);\n  }\n  if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n    return Promise.resolve(undefined);\n  }\n  return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, CancellationToken.None)).catch(onUnexpectedExternalError).then(function (edits) {\n    return workerService.computeMoreMinimalEdits(model.uri, edits);\n  });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  var resource = args[0],\n    range = args[1],\n    options = args[2];\n  assertType(URI.isUri(resource));\n  assertType(Range.isIRange(range));\n  var model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n  return getDocumentRangeFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, Range.lift(range), options, CancellationToken.None);\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  var resource = args[0],\n    options = args[1];\n  assertType(URI.isUri(resource));\n  var model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n  return getDocumentFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, options, CancellationToken.None);\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  var resource = args[0],\n    position = args[1],\n    ch = args[2],\n    options = args[3];\n  assertType(URI.isUri(resource));\n  assertType(Position.isIPosition(position));\n  assertType(typeof ch === 'string');\n  var model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n  return getOnTypeFormattingEdits(accessor.get(IEditorWorkerService), model, Position.lift(position), ch, options);\n});","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","alert","isNonEmptyArray","CancellationToken","illegalArgument","onUnexpectedExternalError","URI","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","isCodeEditor","Position","Range","Selection","DocumentFormattingEditProviderRegistry","DocumentRangeFormattingEditProviderRegistry","OnTypeFormattingEditProviderRegistry","IEditorWorkerService","IModelService","FormattingEdit","nls","ExtensionIdentifier","IInstantiationService","LinkedList","CommandsRegistry","assertType","alertFormattingEdits","edits","filter","edit","range","i","plusRange","startLineNumber","endLineNumber","localize","getRealAndSyntheticDocumentFormattersOrdered","model","seen","Set","docFormatter","ordered","_i","docFormatter_1","formatter","extensionId","add","toKey","rangeFormatter","_loop_1","has","displayName","provideDocumentFormattingEdits","options","token","provideDocumentRangeFormattingEdits","getFullModelRange","_a","rangeFormatter_1","FormattingConflicts","select","document","mode","selector","undefined","_selectors","formatDocumentRangeWithSelectedProvider","accessor","editorOrModel","instaService","provider","selected","get","getModel","invokeFunction","formatDocumentRangeWithProvider","workerService","cts","rawEdits","range_1","initialSelection_1","getFormattingOptions","computeMoreMinimalEdits","uri","isCancellationRequested","dispose","execute","pushUndoStop","revealPositionInCenterIfOutsideViewport","getPosition","startColumn","endColumn","pushEditOperations","map","text","lift","forceMoveMarkers","undoEdits","undoEdits_1","range_2","areIntersectingOrTouching","formatDocumentWithSelectedProvider","formatDocumentWithProvider","initialSelection_2","undoEdits_2","range_3","getDocumentRangeFormattingEditsUntilResult","providers","providers_1","catch","getDocumentFormattingEditsUntilResult","providers_2","getOnTypeFormattingEdits","position","ch","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","None","registerCommand","args","arguments","resource","isUri","isIRange","isIPosition"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/format/format.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { illegalArgument, onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../browser/core/editorState.js';\r\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { DocumentFormattingEditProviderRegistry, DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../common/modes.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { FormattingEdit } from './formattingEdit.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { assertType } from '../../../base/common/types.js';\r\nexport function alertFormattingEdits(edits) {\r\n    edits = edits.filter(function (edit) { return edit.range; });\r\n    if (!edits.length) {\r\n        return;\r\n    }\r\n    var range = edits[0].range;\r\n    for (var i = 1; i < edits.length; i++) {\r\n        range = Range.plusRange(range, edits[i].range);\r\n    }\r\n    var startLineNumber = range.startLineNumber, endLineNumber = range.endLineNumber;\r\n    if (startLineNumber === endLineNumber) {\r\n        if (edits.length === 1) {\r\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\r\n        }\r\n        else {\r\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\r\n        }\r\n    }\r\n    else {\r\n        if (edits.length === 1) {\r\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\r\n        }\r\n        else {\r\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\r\n        }\r\n    }\r\n}\r\nexport function getRealAndSyntheticDocumentFormattersOrdered(model) {\r\n    var result = [];\r\n    var seen = new Set();\r\n    // (1) add all document formatter\r\n    var docFormatter = DocumentFormattingEditProviderRegistry.ordered(model);\r\n    for (var _i = 0, docFormatter_1 = docFormatter; _i < docFormatter_1.length; _i++) {\r\n        var formatter = docFormatter_1[_i];\r\n        result.push(formatter);\r\n        if (formatter.extensionId) {\r\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\r\n        }\r\n    }\r\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\r\n    var rangeFormatter = DocumentRangeFormattingEditProviderRegistry.ordered(model);\r\n    var _loop_1 = function (formatter) {\r\n        if (formatter.extensionId) {\r\n            if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\r\n                return \"continue\";\r\n            }\r\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\r\n        }\r\n        result.push({\r\n            displayName: formatter.displayName,\r\n            extensionId: formatter.extensionId,\r\n            provideDocumentFormattingEdits: function (model, options, token) {\r\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\r\n            }\r\n        });\r\n    };\r\n    for (var _a = 0, rangeFormatter_1 = rangeFormatter; _a < rangeFormatter_1.length; _a++) {\r\n        var formatter = rangeFormatter_1[_a];\r\n        _loop_1(formatter);\r\n    }\r\n    return result;\r\n}\r\nvar FormattingConflicts = /** @class */ (function () {\r\n    function FormattingConflicts() {\r\n    }\r\n    FormattingConflicts.select = function (formatter, document, mode) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var selector;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (formatter.length === 0) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        selector = FormattingConflicts._selectors.iterator().next().value;\r\n                        if (!selector) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, selector(formatter, document, mode)];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2: return [2 /*return*/, formatter[0]];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FormattingConflicts._selectors = new LinkedList();\r\n    return FormattingConflicts;\r\n}());\r\nexport { FormattingConflicts };\r\nexport function formatDocumentRangeWithSelectedProvider(accessor, editorOrModel, range, mode, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var instaService, model, provider, selected;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    instaService = accessor.get(IInstantiationService);\r\n                    model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\r\n                    provider = DocumentRangeFormattingEditProviderRegistry.ordered(model);\r\n                    return [4 /*yield*/, FormattingConflicts.select(provider, model, mode)];\r\n                case 1:\r\n                    selected = _a.sent();\r\n                    if (!selected) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, instaService.invokeFunction(formatDocumentRangeWithProvider, selected, editorOrModel, range, token)];\r\n                case 2:\r\n                    _a.sent();\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function formatDocumentRangeWithProvider(accessor, provider, editorOrModel, range, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var workerService, model, cts, edits, rawEdits, range_1, initialSelection_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    workerService = accessor.get(IEditorWorkerService);\r\n                    if (isCodeEditor(editorOrModel)) {\r\n                        model = editorOrModel.getModel();\r\n                        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, token);\r\n                    }\r\n                    else {\r\n                        model = editorOrModel;\r\n                        cts = new TextModelCancellationTokenSource(editorOrModel, token);\r\n                    }\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 4, 5]);\r\n                    return [4 /*yield*/, provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)];\r\n                case 2:\r\n                    rawEdits = _a.sent();\r\n                    return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\r\n                case 3:\r\n                    edits = _a.sent();\r\n                    if (cts.token.isCancellationRequested) {\r\n                        return [2 /*return*/, true];\r\n                    }\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    cts.dispose();\r\n                    return [7 /*endfinally*/];\r\n                case 5:\r\n                    if (!edits || edits.length === 0) {\r\n                        return [2 /*return*/, false];\r\n                    }\r\n                    if (isCodeEditor(editorOrModel)) {\r\n                        // use editor to apply edits\r\n                        FormattingEdit.execute(editorOrModel, edits);\r\n                        alertFormattingEdits(edits);\r\n                        editorOrModel.pushUndoStop();\r\n                        editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\r\n                    }\r\n                    else {\r\n                        range_1 = edits[0].range;\r\n                        initialSelection_1 = new Selection(range_1.startLineNumber, range_1.startColumn, range_1.endLineNumber, range_1.endColumn);\r\n                        model.pushEditOperations([initialSelection_1], edits.map(function (edit) {\r\n                            return {\r\n                                text: edit.text,\r\n                                range: Range.lift(edit.range),\r\n                                forceMoveMarkers: true\r\n                            };\r\n                        }), function (undoEdits) {\r\n                            for (var _i = 0, undoEdits_1 = undoEdits; _i < undoEdits_1.length; _i++) {\r\n                                var range_2 = undoEdits_1[_i].range;\r\n                                if (Range.areIntersectingOrTouching(range_2, initialSelection_1)) {\r\n                                    return [new Selection(range_2.startLineNumber, range_2.startColumn, range_2.endLineNumber, range_2.endColumn)];\r\n                                }\r\n                            }\r\n                            return null;\r\n                        });\r\n                    }\r\n                    return [2 /*return*/, true];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var instaService, model, provider, selected;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    instaService = accessor.get(IInstantiationService);\r\n                    model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\r\n                    provider = getRealAndSyntheticDocumentFormattersOrdered(model);\r\n                    return [4 /*yield*/, FormattingConflicts.select(provider, model, mode)];\r\n                case 1:\r\n                    selected = _a.sent();\r\n                    if (!selected) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token)];\r\n                case 2:\r\n                    _a.sent();\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var workerService, model, cts, edits, rawEdits, range, initialSelection_2;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    workerService = accessor.get(IEditorWorkerService);\r\n                    if (isCodeEditor(editorOrModel)) {\r\n                        model = editorOrModel.getModel();\r\n                        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, token);\r\n                    }\r\n                    else {\r\n                        model = editorOrModel;\r\n                        cts = new TextModelCancellationTokenSource(editorOrModel, token);\r\n                    }\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 4, 5]);\r\n                    return [4 /*yield*/, provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token)];\r\n                case 2:\r\n                    rawEdits = _a.sent();\r\n                    return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\r\n                case 3:\r\n                    edits = _a.sent();\r\n                    if (cts.token.isCancellationRequested) {\r\n                        return [2 /*return*/, true];\r\n                    }\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    cts.dispose();\r\n                    return [7 /*endfinally*/];\r\n                case 5:\r\n                    if (!edits || edits.length === 0) {\r\n                        return [2 /*return*/, false];\r\n                    }\r\n                    if (isCodeEditor(editorOrModel)) {\r\n                        // use editor to apply edits\r\n                        FormattingEdit.execute(editorOrModel, edits);\r\n                        if (mode !== 2 /* Silent */) {\r\n                            alertFormattingEdits(edits);\r\n                            editorOrModel.pushUndoStop();\r\n                            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\r\n                        }\r\n                    }\r\n                    else {\r\n                        range = edits[0].range;\r\n                        initialSelection_2 = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\r\n                        model.pushEditOperations([initialSelection_2], edits.map(function (edit) {\r\n                            return {\r\n                                text: edit.text,\r\n                                range: Range.lift(edit.range),\r\n                                forceMoveMarkers: true\r\n                            };\r\n                        }), function (undoEdits) {\r\n                            for (var _i = 0, undoEdits_2 = undoEdits; _i < undoEdits_2.length; _i++) {\r\n                                var range_3 = undoEdits_2[_i].range;\r\n                                if (Range.areIntersectingOrTouching(range_3, initialSelection_2)) {\r\n                                    return [new Selection(range_3.startLineNumber, range_3.startColumn, range_3.endLineNumber, range_3.endColumn)];\r\n                                }\r\n                            }\r\n                            return null;\r\n                        });\r\n                    }\r\n                    return [2 /*return*/, true];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, model, range, options, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var providers, _i, providers_1, provider, rawEdits;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    providers = DocumentRangeFormattingEditProviderRegistry.ordered(model);\r\n                    _i = 0, providers_1 = providers;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    if (!(_i < providers_1.length)) return [3 /*break*/, 5];\r\n                    provider = providers_1[_i];\r\n                    return [4 /*yield*/, Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError)];\r\n                case 2:\r\n                    rawEdits = _a.sent();\r\n                    if (!isNonEmptyArray(rawEdits)) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\r\n                case 3: return [2 /*return*/, _a.sent()];\r\n                case 4:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 5: return [2 /*return*/, undefined];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function getDocumentFormattingEditsUntilResult(workerService, model, options, token) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var providers, _i, providers_2, provider, rawEdits;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    providers = getRealAndSyntheticDocumentFormattersOrdered(model);\r\n                    _i = 0, providers_2 = providers;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    if (!(_i < providers_2.length)) return [3 /*break*/, 5];\r\n                    provider = providers_2[_i];\r\n                    return [4 /*yield*/, Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError)];\r\n                case 2:\r\n                    rawEdits = _a.sent();\r\n                    if (!isNonEmptyArray(rawEdits)) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\r\n                case 3: return [2 /*return*/, _a.sent()];\r\n                case 4:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 5: return [2 /*return*/, undefined];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function getOnTypeFormattingEdits(workerService, model, position, ch, options) {\r\n    var providers = OnTypeFormattingEditProviderRegistry.ordered(model);\r\n    if (providers.length === 0) {\r\n        return Promise.resolve(undefined);\r\n    }\r\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\r\n        return Promise.resolve(undefined);\r\n    }\r\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, CancellationToken.None)).catch(onUnexpectedExternalError).then(function (edits) {\r\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var resource = args[0], range = args[1], options = args[2];\r\n    assertType(URI.isUri(resource));\r\n    assertType(Range.isIRange(range));\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument('resource');\r\n    }\r\n    return getDocumentRangeFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, Range.lift(range), options, CancellationToken.None);\r\n});\r\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var resource = args[0], options = args[1];\r\n    assertType(URI.isUri(resource));\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument('resource');\r\n    }\r\n    return getDocumentFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, options, CancellationToken.None);\r\n});\r\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var resource = args[0], position = args[1], ch = args[2], options = args[3];\r\n    assertType(URI.isUri(resource));\r\n    assertType(Position.isIPosition(position));\r\n    assertType(typeof ch === 'string');\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument('resource');\r\n    }\r\n    return getOnTypeFormattingEdits(accessor.get(IEditorWorkerService), model, Position.lift(position), ch, options);\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}