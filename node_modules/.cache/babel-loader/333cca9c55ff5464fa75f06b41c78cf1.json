{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { SearchParams } from '../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { ReplacePattern, parseReplaceString } from './replacePattern.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nexport var CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport var CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport var CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport var ToggleCaseSensitiveKeybinding = {\n  primary: 512 /* Alt */ | 33 /* KEY_C */,\n  mac: {\n    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 33 /* KEY_C */\n  }\n};\n\nexport var ToggleWholeWordKeybinding = {\n  primary: 512 /* Alt */ | 53 /* KEY_W */,\n  mac: {\n    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 53 /* KEY_W */\n  }\n};\n\nexport var ToggleRegexKeybinding = {\n  primary: 512 /* Alt */ | 48 /* KEY_R */,\n  mac: {\n    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 48 /* KEY_R */\n  }\n};\n\nexport var ToggleSearchScopeKeybinding = {\n  primary: 512 /* Alt */ | 42 /* KEY_L */,\n  mac: {\n    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 42 /* KEY_L */\n  }\n};\n\nexport var FIND_IDS = {\n  StartFindAction: 'actions.find',\n  StartFindWithSelection: 'actions.findWithSelection',\n  NextMatchFindAction: 'editor.action.nextMatchFindAction',\n  PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n  NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n  PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n  StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n  CloseFindWidgetCommand: 'closeFindWidget',\n  ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n  ToggleWholeWordCommand: 'toggleFindWholeWord',\n  ToggleRegexCommand: 'toggleFindRegex',\n  ToggleSearchScopeCommand: 'toggleFindInSelection',\n  TogglePreserveCaseCommand: 'togglePreserveCase',\n  ReplaceOneAction: 'editor.action.replaceOne',\n  ReplaceAllAction: 'editor.action.replaceAll',\n  SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport var MATCHES_LIMIT = 19999;\nvar RESEARCH_DELAY = 240;\nvar FindModelBoundToEditorModel = /** @class */function () {\n  function FindModelBoundToEditorModel(editor, state) {\n    var _this = this;\n    this._toDispose = new DisposableStore();\n    this._editor = editor;\n    this._state = state;\n    this._isDisposed = false;\n    this._startSearchingTimer = new TimeoutTimer();\n    this._decorations = new FindDecorations(editor);\n    this._toDispose.add(this._decorations);\n    this._updateDecorationsScheduler = new RunOnceScheduler(function () {\n      return _this.research(false);\n    }, 100);\n    this._toDispose.add(this._updateDecorationsScheduler);\n    this._toDispose.add(this._editor.onDidChangeCursorPosition(function (e) {\n      if (e.reason === 3 /* Explicit */ || e.reason === 5 /* Undo */ || e.reason === 6 /* Redo */) {\n        _this._decorations.setStartPosition(_this._editor.getPosition());\n      }\n    }));\n    this._ignoreModelContentChanged = false;\n    this._toDispose.add(this._editor.onDidChangeModelContent(function (e) {\n      if (_this._ignoreModelContentChanged) {\n        return;\n      }\n      if (e.isFlush) {\n        // a model.setValue() was called\n        _this._decorations.reset();\n      }\n      _this._decorations.setStartPosition(_this._editor.getPosition());\n      _this._updateDecorationsScheduler.schedule();\n    }));\n    this._toDispose.add(this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n    this.research(false, this._state.searchScope);\n  }\n  FindModelBoundToEditorModel.prototype.dispose = function () {\n    this._isDisposed = true;\n    dispose(this._startSearchingTimer);\n    this._toDispose.dispose();\n  };\n  FindModelBoundToEditorModel.prototype._onStateChanged = function (e) {\n    var _this = this;\n    if (this._isDisposed) {\n      // The find model is disposed during a find state changed event\n      return;\n    }\n    if (!this._editor.hasModel()) {\n      // The find model will be disposed momentarily\n      return;\n    }\n    if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n      var model = this._editor.getModel();\n      if (model.isTooLargeForSyncing()) {\n        this._startSearchingTimer.cancel();\n        this._startSearchingTimer.setIfNotSet(function () {\n          if (e.searchScope) {\n            _this.research(e.moveCursor, _this._state.searchScope);\n          } else {\n            _this.research(e.moveCursor);\n          }\n        }, RESEARCH_DELAY);\n      } else {\n        if (e.searchScope) {\n          this.research(e.moveCursor, this._state.searchScope);\n        } else {\n          this.research(e.moveCursor);\n        }\n      }\n    }\n  };\n  FindModelBoundToEditorModel._getSearchRange = function (model, findScope) {\n    // If we have set now or before a find scope, use it for computing the search range\n    if (findScope) {\n      return findScope;\n    }\n    return model.getFullModelRange();\n  };\n  FindModelBoundToEditorModel.prototype.research = function (moveCursor, newFindScope) {\n    var findScope = null;\n    if (typeof newFindScope !== 'undefined') {\n      findScope = newFindScope;\n    } else {\n      findScope = this._decorations.getFindScope();\n    }\n    if (findScope !== null) {\n      if (findScope.startLineNumber !== findScope.endLineNumber) {\n        if (findScope.endColumn === 1) {\n          findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber - 1));\n        } else {\n          // multiline find scope => expand to line starts / ends\n          findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\n        }\n      }\n    }\n    var findMatches = this._findMatches(findScope, false, MATCHES_LIMIT);\n    this._decorations.set(findMatches, findScope);\n    this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount(), undefined);\n    if (moveCursor) {\n      this._moveToNextMatch(this._decorations.getStartPosition());\n    }\n  };\n  FindModelBoundToEditorModel.prototype._hasMatches = function () {\n    return this._state.matchesCount > 0;\n  };\n  FindModelBoundToEditorModel.prototype._cannotFind = function () {\n    if (!this._hasMatches()) {\n      var findScope = this._decorations.getFindScope();\n      if (findScope) {\n        // Reveal the selection so user is reminded that 'selection find' is on.\n        this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* Smooth */);\n      }\n\n      return true;\n    }\n    return false;\n  };\n  FindModelBoundToEditorModel.prototype._setCurrentFindMatch = function (match) {\n    var matchesPosition = this._decorations.setCurrentFindMatch(match);\n    this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n    this._editor.setSelection(match);\n    this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* Smooth */);\n  };\n\n  FindModelBoundToEditorModel.prototype._prevSearchPosition = function (before) {\n    var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    var lineNumber = before.lineNumber,\n      column = before.column;\n    var model = this._editor.getModel();\n    if (isUsingLineStops || column === 1) {\n      if (lineNumber === 1) {\n        lineNumber = model.getLineCount();\n      } else {\n        lineNumber--;\n      }\n      column = model.getLineMaxColumn(lineNumber);\n    } else {\n      column--;\n    }\n    return new Position(lineNumber, column);\n  };\n  FindModelBoundToEditorModel.prototype._moveToPrevMatch = function (before, isRecursed) {\n    if (isRecursed === void 0) {\n      isRecursed = false;\n    }\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      var prevMatchRange = this._decorations.matchBeforePosition(before);\n      if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n        before = this._prevSearchPosition(before);\n        prevMatchRange = this._decorations.matchBeforePosition(before);\n      }\n      if (prevMatchRange) {\n        this._setCurrentFindMatch(prevMatchRange);\n      }\n      return;\n    }\n    if (this._cannotFind()) {\n      return;\n    }\n    var findScope = this._decorations.getFindScope();\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n    // ...(----)...|...\n    if (searchRange.getEndPosition().isBefore(before)) {\n      before = searchRange.getEndPosition();\n    }\n    // ...|...(----)...\n    if (before.isBefore(searchRange.getStartPosition())) {\n      before = searchRange.getEndPosition();\n    }\n    var lineNumber = before.lineNumber,\n      column = before.column;\n    var model = this._editor.getModel();\n    var position = new Position(lineNumber, column);\n    var prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\n    if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._prevSearchPosition(position);\n      prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\n    }\n    if (!prevMatch) {\n      // there is precisely one match and selection is on top of it\n      return;\n    }\n    if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n      return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n    }\n    this._setCurrentFindMatch(prevMatch.range);\n  };\n  FindModelBoundToEditorModel.prototype.moveToPrevMatch = function () {\n    this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n  };\n  FindModelBoundToEditorModel.prototype._nextSearchPosition = function (after) {\n    var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    var lineNumber = after.lineNumber,\n      column = after.column;\n    var model = this._editor.getModel();\n    if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n      if (lineNumber === model.getLineCount()) {\n        lineNumber = 1;\n      } else {\n        lineNumber++;\n      }\n      column = 1;\n    } else {\n      column++;\n    }\n    return new Position(lineNumber, column);\n  };\n  FindModelBoundToEditorModel.prototype._moveToNextMatch = function (after) {\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      var nextMatchRange = this._decorations.matchAfterPosition(after);\n      if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n        // Looks like we're stuck at this position, unacceptable!\n        after = this._nextSearchPosition(after);\n        nextMatchRange = this._decorations.matchAfterPosition(after);\n      }\n      if (nextMatchRange) {\n        this._setCurrentFindMatch(nextMatchRange);\n      }\n      return;\n    }\n    var nextMatch = this._getNextMatch(after, false, true);\n    if (nextMatch) {\n      this._setCurrentFindMatch(nextMatch.range);\n    }\n  };\n  FindModelBoundToEditorModel.prototype._getNextMatch = function (after, captureMatches, forceMove, isRecursed) {\n    if (isRecursed === void 0) {\n      isRecursed = false;\n    }\n    if (this._cannotFind()) {\n      return null;\n    }\n    var findScope = this._decorations.getFindScope();\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n    // ...(----)...|...\n    if (searchRange.getEndPosition().isBefore(after)) {\n      after = searchRange.getStartPosition();\n    }\n    // ...|...(----)...\n    if (after.isBefore(searchRange.getStartPosition())) {\n      after = searchRange.getStartPosition();\n    }\n    var lineNumber = after.lineNumber,\n      column = after.column;\n    var model = this._editor.getModel();\n    var position = new Position(lineNumber, column);\n    var nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\n    if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._nextSearchPosition(position);\n      nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\n    }\n    if (!nextMatch) {\n      // there is precisely one match and selection is on top of it\n      return null;\n    }\n    if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n      return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n    }\n    return nextMatch;\n  };\n  FindModelBoundToEditorModel.prototype.moveToNextMatch = function () {\n    this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n  };\n  FindModelBoundToEditorModel.prototype._getReplacePattern = function () {\n    if (this._state.isRegex) {\n      return parseReplaceString(this._state.replaceString);\n    }\n    return ReplacePattern.fromStaticValue(this._state.replaceString);\n  };\n  FindModelBoundToEditorModel.prototype.replace = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n    var replacePattern = this._getReplacePattern();\n    var selection = this._editor.getSelection();\n    var nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n    if (nextMatch) {\n      if (selection.equalsRange(nextMatch.range)) {\n        // selection sits on a find match => replace it!\n        var replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n        var command = new ReplaceCommand(selection, replaceString);\n        this._executeEditorCommand('replace', command);\n        this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n        this.research(true);\n      } else {\n        this._decorations.setStartPosition(this._editor.getPosition());\n        this._setCurrentFindMatch(nextMatch.range);\n      }\n    }\n  };\n  FindModelBoundToEditorModel.prototype._findMatches = function (findScope, captureMatches, limitResultCount) {\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n    return this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches, limitResultCount);\n  };\n  FindModelBoundToEditorModel.prototype.replaceAll = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n    var findScope = this._decorations.getFindScope();\n    if (findScope === null && this._state.matchesCount >= MATCHES_LIMIT) {\n      // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n      this._largeReplaceAll();\n    } else {\n      this._regularReplaceAll(findScope);\n    }\n    this.research(false);\n  };\n  FindModelBoundToEditorModel.prototype._largeReplaceAll = function () {\n    var searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null);\n    var searchData = searchParams.parseSearchRequest();\n    if (!searchData) {\n      return;\n    }\n    var searchRegex = searchData.regex;\n    if (!searchRegex.multiline) {\n      var mod = 'mu';\n      if (searchRegex.ignoreCase) {\n        mod += 'i';\n      }\n      if (searchRegex.global) {\n        mod += 'g';\n      }\n      searchRegex = new RegExp(searchRegex.source, mod);\n    }\n    var model = this._editor.getModel();\n    var modelText = model.getValue(1 /* LF */);\n    var fullModelRange = model.getFullModelRange();\n    var replacePattern = this._getReplacePattern();\n    var resultText;\n    var preserveCase = this._state.preserveCase;\n    if (replacePattern.hasReplacementPatterns || preserveCase) {\n      resultText = modelText.replace(searchRegex, function () {\n        return replacePattern.buildReplaceString(arguments, preserveCase);\n      });\n    } else {\n      resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n    }\n    var command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n    this._executeEditorCommand('replaceAll', command);\n  };\n  FindModelBoundToEditorModel.prototype._regularReplaceAll = function (findScope) {\n    var replacePattern = this._getReplacePattern();\n    // Get all the ranges (even more than the highlighted ones)\n    var matches = this._findMatches(findScope, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n    var replaceStrings = [];\n    for (var i = 0, len = matches.length; i < len; i++) {\n      replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n    }\n    var command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(function (m) {\n      return m.range;\n    }), replaceStrings);\n    this._executeEditorCommand('replaceAll', command);\n  };\n  FindModelBoundToEditorModel.prototype.selectAllMatches = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n    var findScope = this._decorations.getFindScope();\n    // Get all the ranges (even more than the highlighted ones)\n    var matches = this._findMatches(findScope, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\n    var selections = matches.map(function (m) {\n      return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn);\n    });\n    // If one of the ranges is the editor selection, then maintain it as primary\n    var editorSelection = this._editor.getSelection();\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var sel = selections[i];\n      if (sel.equalsRange(editorSelection)) {\n        selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n        break;\n      }\n    }\n    this._editor.setSelections(selections);\n  };\n  FindModelBoundToEditorModel.prototype._executeEditorCommand = function (source, command) {\n    try {\n      this._ignoreModelContentChanged = true;\n      this._editor.pushUndoStop();\n      this._editor.executeCommand(source, command);\n      this._editor.pushUndoStop();\n    } finally {\n      this._ignoreModelContentChanged = false;\n    }\n  };\n  return FindModelBoundToEditorModel;\n}();\nexport { FindModelBoundToEditorModel };","map":{"version":3,"names":["RunOnceScheduler","TimeoutTimer","dispose","DisposableStore","ReplaceCommand","ReplaceCommandThatPreservesSelection","Position","Range","Selection","SearchParams","FindDecorations","ReplaceAllCommand","ReplacePattern","parseReplaceString","RawContextKey","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","primary","mac","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","FIND_IDS","StartFindAction","StartFindWithSelection","NextMatchFindAction","PreviousMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","CloseFindWidgetCommand","ToggleCaseSensitiveCommand","ToggleWholeWordCommand","ToggleRegexCommand","ToggleSearchScopeCommand","TogglePreserveCaseCommand","ReplaceOneAction","ReplaceAllAction","SelectAllMatchesAction","MATCHES_LIMIT","RESEARCH_DELAY","FindModelBoundToEditorModel","editor","state","_this","_toDispose","_editor","_state","_isDisposed","_startSearchingTimer","_decorations","add","_updateDecorationsScheduler","research","onDidChangeCursorPosition","e","reason","setStartPosition","getPosition","_ignoreModelContentChanged","onDidChangeModelContent","isFlush","reset","schedule","onFindReplaceStateChange","_onStateChanged","searchScope","prototype","hasModel","searchString","isReplaceRevealed","isRegex","wholeWord","matchCase","model","getModel","isTooLargeForSyncing","cancel","setIfNotSet","moveCursor","_getSearchRange","findScope","getFullModelRange","newFindScope","getFindScope","startLineNumber","endLineNumber","endColumn","getLineMaxColumn","findMatches","_findMatches","set","changeMatchInfo","getCurrentMatchesPosition","getSelection","getCount","undefined","_moveToNextMatch","getStartPosition","_hasMatches","matchesCount","_cannotFind","revealRangeInCenterIfOutsideViewport","_setCurrentFindMatch","match","matchesPosition","setCurrentFindMatch","setSelection","_prevSearchPosition","before","isUsingLineStops","indexOf","lineNumber","column","getLineCount","_moveToPrevMatch","isRecursed","prevMatchRange","matchBeforePosition","isEmpty","equals","searchRange","getEndPosition","isBefore","position","prevMatch","findPreviousMatch","getOption","range","containsRange","moveToPrevMatch","_nextSearchPosition","after","nextMatchRange","matchAfterPosition","nextMatch","_getNextMatch","captureMatches","forceMove","findNextMatch","moveToNextMatch","_getReplacePattern","replaceString","fromStaticValue","replace","replacePattern","selection","equalsRange","buildReplaceString","matches","preserveCase","command","_executeEditorCommand","startColumn","length","limitResultCount","replaceAll","_largeReplaceAll","_regularReplaceAll","searchParams","searchData","parseSearchRequest","searchRegex","regex","multiline","mod","ignoreCase","global","RegExp","source","modelText","getValue","fullModelRange","resultText","hasReplacementPatterns","arguments","replaceStrings","i","len","map","m","selectAllMatches","selections","editorSelection","sel","concat","slice","setSelections","pushUndoStop","executeCommand"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/find/findModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { SearchParams } from '../../common/model/textModelSearch.js';\r\nimport { FindDecorations } from './findDecorations.js';\r\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\r\nimport { ReplacePattern, parseReplaceString } from './replacePattern.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nexport var CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\r\n// Keep ContextKey use of 'Focussed' to not break when clauses\r\nexport var CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\r\nexport var CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\r\nexport var ToggleCaseSensitiveKeybinding = {\r\n    primary: 512 /* Alt */ | 33 /* KEY_C */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 33 /* KEY_C */ }\r\n};\r\nexport var ToggleWholeWordKeybinding = {\r\n    primary: 512 /* Alt */ | 53 /* KEY_W */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 53 /* KEY_W */ }\r\n};\r\nexport var ToggleRegexKeybinding = {\r\n    primary: 512 /* Alt */ | 48 /* KEY_R */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 48 /* KEY_R */ }\r\n};\r\nexport var ToggleSearchScopeKeybinding = {\r\n    primary: 512 /* Alt */ | 42 /* KEY_L */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 42 /* KEY_L */ }\r\n};\r\nexport var FIND_IDS = {\r\n    StartFindAction: 'actions.find',\r\n    StartFindWithSelection: 'actions.findWithSelection',\r\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\r\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\r\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\r\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\r\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\r\n    CloseFindWidgetCommand: 'closeFindWidget',\r\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\r\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\r\n    ToggleRegexCommand: 'toggleFindRegex',\r\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\r\n    TogglePreserveCaseCommand: 'togglePreserveCase',\r\n    ReplaceOneAction: 'editor.action.replaceOne',\r\n    ReplaceAllAction: 'editor.action.replaceAll',\r\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\r\n};\r\nexport var MATCHES_LIMIT = 19999;\r\nvar RESEARCH_DELAY = 240;\r\nvar FindModelBoundToEditorModel = /** @class */ (function () {\r\n    function FindModelBoundToEditorModel(editor, state) {\r\n        var _this = this;\r\n        this._toDispose = new DisposableStore();\r\n        this._editor = editor;\r\n        this._state = state;\r\n        this._isDisposed = false;\r\n        this._startSearchingTimer = new TimeoutTimer();\r\n        this._decorations = new FindDecorations(editor);\r\n        this._toDispose.add(this._decorations);\r\n        this._updateDecorationsScheduler = new RunOnceScheduler(function () { return _this.research(false); }, 100);\r\n        this._toDispose.add(this._updateDecorationsScheduler);\r\n        this._toDispose.add(this._editor.onDidChangeCursorPosition(function (e) {\r\n            if (e.reason === 3 /* Explicit */\r\n                || e.reason === 5 /* Undo */\r\n                || e.reason === 6 /* Redo */) {\r\n                _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            }\r\n        }));\r\n        this._ignoreModelContentChanged = false;\r\n        this._toDispose.add(this._editor.onDidChangeModelContent(function (e) {\r\n            if (_this._ignoreModelContentChanged) {\r\n                return;\r\n            }\r\n            if (e.isFlush) {\r\n                // a model.setValue() was called\r\n                _this._decorations.reset();\r\n            }\r\n            _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            _this._updateDecorationsScheduler.schedule();\r\n        }));\r\n        this._toDispose.add(this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        this.research(false, this._state.searchScope);\r\n    }\r\n    FindModelBoundToEditorModel.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        dispose(this._startSearchingTimer);\r\n        this._toDispose.dispose();\r\n    };\r\n    FindModelBoundToEditorModel.prototype._onStateChanged = function (e) {\r\n        var _this = this;\r\n        if (this._isDisposed) {\r\n            // The find model is disposed during a find state changed event\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            // The find model will be disposed momentarily\r\n            return;\r\n        }\r\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\r\n            var model = this._editor.getModel();\r\n            if (model.isTooLargeForSyncing()) {\r\n                this._startSearchingTimer.cancel();\r\n                this._startSearchingTimer.setIfNotSet(function () {\r\n                    if (e.searchScope) {\r\n                        _this.research(e.moveCursor, _this._state.searchScope);\r\n                    }\r\n                    else {\r\n                        _this.research(e.moveCursor);\r\n                    }\r\n                }, RESEARCH_DELAY);\r\n            }\r\n            else {\r\n                if (e.searchScope) {\r\n                    this.research(e.moveCursor, this._state.searchScope);\r\n                }\r\n                else {\r\n                    this.research(e.moveCursor);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel._getSearchRange = function (model, findScope) {\r\n        // If we have set now or before a find scope, use it for computing the search range\r\n        if (findScope) {\r\n            return findScope;\r\n        }\r\n        return model.getFullModelRange();\r\n    };\r\n    FindModelBoundToEditorModel.prototype.research = function (moveCursor, newFindScope) {\r\n        var findScope = null;\r\n        if (typeof newFindScope !== 'undefined') {\r\n            findScope = newFindScope;\r\n        }\r\n        else {\r\n            findScope = this._decorations.getFindScope();\r\n        }\r\n        if (findScope !== null) {\r\n            if (findScope.startLineNumber !== findScope.endLineNumber) {\r\n                if (findScope.endColumn === 1) {\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber - 1));\r\n                }\r\n                else {\r\n                    // multiline find scope => expand to line starts / ends\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\r\n                }\r\n            }\r\n        }\r\n        var findMatches = this._findMatches(findScope, false, MATCHES_LIMIT);\r\n        this._decorations.set(findMatches, findScope);\r\n        this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount(), undefined);\r\n        if (moveCursor) {\r\n            this._moveToNextMatch(this._decorations.getStartPosition());\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._hasMatches = function () {\r\n        return (this._state.matchesCount > 0);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._cannotFind = function () {\r\n        if (!this._hasMatches()) {\r\n            var findScope = this._decorations.getFindScope();\r\n            if (findScope) {\r\n                // Reveal the selection so user is reminded that 'selection find' is on.\r\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* Smooth */);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    FindModelBoundToEditorModel.prototype._setCurrentFindMatch = function (match) {\r\n        var matchesPosition = this._decorations.setCurrentFindMatch(match);\r\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\r\n        this._editor.setSelection(match);\r\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* Smooth */);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._prevSearchPosition = function (before) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === 1) {\r\n            if (lineNumber === 1) {\r\n                lineNumber = model.getLineCount();\r\n            }\r\n            else {\r\n                lineNumber--;\r\n            }\r\n            column = model.getLineMaxColumn(lineNumber);\r\n        }\r\n        else {\r\n            column--;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToPrevMatch = function (before, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\r\n                before = this._prevSearchPosition(before);\r\n                prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            }\r\n            if (prevMatchRange) {\r\n                this._setCurrentFindMatch(prevMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._cannotFind()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(before)) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (before.isBefore(searchRange.getStartPosition())) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._prevSearchPosition(position);\r\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        }\r\n        if (!prevMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\r\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\r\n        }\r\n        this._setCurrentFindMatch(prevMatch.range);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToPrevMatch = function () {\r\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._nextSearchPosition = function (after) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\r\n            if (lineNumber === model.getLineCount()) {\r\n                lineNumber = 1;\r\n            }\r\n            else {\r\n                lineNumber++;\r\n            }\r\n            column = 1;\r\n        }\r\n        else {\r\n            column++;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToNextMatch = function (after) {\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\r\n                // Looks like we're stuck at this position, unacceptable!\r\n                after = this._nextSearchPosition(after);\r\n                nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            }\r\n            if (nextMatchRange) {\r\n                this._setCurrentFindMatch(nextMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        var nextMatch = this._getNextMatch(after, false, true);\r\n        if (nextMatch) {\r\n            this._setCurrentFindMatch(nextMatch.range);\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getNextMatch = function (after, captureMatches, forceMove, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._cannotFind()) {\r\n            return null;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(after)) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (after.isBefore(searchRange.getStartPosition())) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\r\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._nextSearchPosition(position);\r\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\r\n        }\r\n        if (!nextMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return null;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\r\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\r\n        }\r\n        return nextMatch;\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToNextMatch = function () {\r\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getReplacePattern = function () {\r\n        if (this._state.isRegex) {\r\n            return parseReplaceString(this._state.replaceString);\r\n        }\r\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replace = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var replacePattern = this._getReplacePattern();\r\n        var selection = this._editor.getSelection();\r\n        var nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\r\n        if (nextMatch) {\r\n            if (selection.equalsRange(nextMatch.range)) {\r\n                // selection sits on a find match => replace it!\r\n                var replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\r\n                var command = new ReplaceCommand(selection, replaceString);\r\n                this._executeEditorCommand('replace', command);\r\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\r\n                this.research(true);\r\n            }\r\n            else {\r\n                this._decorations.setStartPosition(this._editor.getPosition());\r\n                this._setCurrentFindMatch(nextMatch.range);\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._findMatches = function (findScope, captureMatches, limitResultCount) {\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        return this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches, limitResultCount);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replaceAll = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        if (findScope === null && this._state.matchesCount >= MATCHES_LIMIT) {\r\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\r\n            this._largeReplaceAll();\r\n        }\r\n        else {\r\n            this._regularReplaceAll(findScope);\r\n        }\r\n        this.research(false);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._largeReplaceAll = function () {\r\n        var searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null);\r\n        var searchData = searchParams.parseSearchRequest();\r\n        if (!searchData) {\r\n            return;\r\n        }\r\n        var searchRegex = searchData.regex;\r\n        if (!searchRegex.multiline) {\r\n            var mod = 'mu';\r\n            if (searchRegex.ignoreCase) {\r\n                mod += 'i';\r\n            }\r\n            if (searchRegex.global) {\r\n                mod += 'g';\r\n            }\r\n            searchRegex = new RegExp(searchRegex.source, mod);\r\n        }\r\n        var model = this._editor.getModel();\r\n        var modelText = model.getValue(1 /* LF */);\r\n        var fullModelRange = model.getFullModelRange();\r\n        var replacePattern = this._getReplacePattern();\r\n        var resultText;\r\n        var preserveCase = this._state.preserveCase;\r\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\r\n            resultText = modelText.replace(searchRegex, function () {\r\n                return replacePattern.buildReplaceString(arguments, preserveCase);\r\n            });\r\n        }\r\n        else {\r\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\r\n        }\r\n        var command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._regularReplaceAll = function (findScope) {\r\n        var replacePattern = this._getReplacePattern();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var replaceStrings = [];\r\n        for (var i = 0, len = matches.length; i < len; i++) {\r\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\r\n        }\r\n        var command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(function (m) { return m.range; }), replaceStrings);\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.selectAllMatches = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var selections = matches.map(function (m) { return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn); });\r\n        // If one of the ranges is the editor selection, then maintain it as primary\r\n        var editorSelection = this._editor.getSelection();\r\n        for (var i = 0, len = selections.length; i < len; i++) {\r\n            var sel = selections[i];\r\n            if (sel.equalsRange(editorSelection)) {\r\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\r\n                break;\r\n            }\r\n        }\r\n        this._editor.setSelections(selections);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._executeEditorCommand = function (source, command) {\r\n        try {\r\n            this._ignoreModelContentChanged = true;\r\n            this._editor.pushUndoStop();\r\n            this._editor.executeCommand(source, command);\r\n            this._editor.pushUndoStop();\r\n        }\r\n        finally {\r\n            this._ignoreModelContentChanged = false;\r\n        }\r\n    };\r\n    return FindModelBoundToEditorModel;\r\n}());\r\nexport { FindModelBoundToEditorModel };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}