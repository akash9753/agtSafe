{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as Assert from '../../../common/assert.js';\nimport { onUnexpectedError } from '../../../common/errors.js';\nimport { combinedDisposable, Disposable } from '../../../common/lifecycle.js';\nimport { Event, Emitter, EventMultiplexer, Relay } from '../../../common/event.js';\nvar LockData = /** @class */function () {\n  function LockData(item) {\n    this._onDispose = new Emitter();\n    this.onDispose = this._onDispose.event;\n    this._item = item;\n  }\n  Object.defineProperty(LockData.prototype, \"item\", {\n    get: function get() {\n      return this._item;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  LockData.prototype.dispose = function () {\n    if (this._onDispose) {\n      this._onDispose.fire();\n      this._onDispose.dispose();\n      this._onDispose = undefined;\n    }\n  };\n  return LockData;\n}();\nexport { LockData };\nvar Lock = /** @class */function () {\n  function Lock() {\n    this.locks = Object.create({});\n  }\n  Lock.prototype.isLocked = function (item) {\n    return !!this.locks[item.id];\n  };\n  Lock.prototype.run = function (item, fn) {\n    var _this = this;\n    var lock = this.getLock(item);\n    if (lock) {\n      return new Promise(function (c, e) {\n        Event.once(lock.onDispose)(function () {\n          return _this.run(item, fn).then(c, e);\n        });\n      });\n    }\n    var result;\n    return new Promise(function (c, e) {\n      if (item.isDisposed()) {\n        return e(new Error('Item is disposed.'));\n      }\n      var lock = _this.locks[item.id] = new LockData(item);\n      result = fn().then(function (r) {\n        delete _this.locks[item.id];\n        lock.dispose();\n        return r;\n      }).then(c, e);\n      return result;\n    });\n  };\n  Lock.prototype.getLock = function (item) {\n    var key;\n    for (key in this.locks) {\n      var lock = this.locks[key];\n      if (item.intersects(lock.item)) {\n        return lock;\n      }\n    }\n    return null;\n  };\n  return Lock;\n}();\nexport { Lock };\nvar ItemRegistry = /** @class */function () {\n  function ItemRegistry() {\n    this._isDisposed = false;\n    this._onDidRevealItem = new EventMultiplexer();\n    this.onDidRevealItem = this._onDidRevealItem.event;\n    this._onExpandItem = new EventMultiplexer();\n    this.onExpandItem = this._onExpandItem.event;\n    this._onDidExpandItem = new EventMultiplexer();\n    this.onDidExpandItem = this._onDidExpandItem.event;\n    this._onCollapseItem = new EventMultiplexer();\n    this.onCollapseItem = this._onCollapseItem.event;\n    this._onDidCollapseItem = new EventMultiplexer();\n    this.onDidCollapseItem = this._onDidCollapseItem.event;\n    this._onDidAddTraitItem = new EventMultiplexer();\n    this.onDidAddTraitItem = this._onDidAddTraitItem.event;\n    this._onDidRemoveTraitItem = new EventMultiplexer();\n    this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\n    this._onDidRefreshItem = new EventMultiplexer();\n    this.onDidRefreshItem = this._onDidRefreshItem.event;\n    this._onRefreshItemChildren = new EventMultiplexer();\n    this.onRefreshItemChildren = this._onRefreshItemChildren.event;\n    this._onDidRefreshItemChildren = new EventMultiplexer();\n    this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\n    this._onDidDisposeItem = new EventMultiplexer();\n    this.onDidDisposeItem = this._onDidDisposeItem.event;\n    this.items = {};\n  }\n  ItemRegistry.prototype.register = function (item) {\n    Assert.ok(!this.isRegistered(item.id), 'item already registered: ' + item.id);\n    var disposable = combinedDisposable(this._onDidRevealItem.add(item.onDidReveal), this._onExpandItem.add(item.onExpand), this._onDidExpandItem.add(item.onDidExpand), this._onCollapseItem.add(item.onCollapse), this._onDidCollapseItem.add(item.onDidCollapse), this._onDidAddTraitItem.add(item.onDidAddTrait), this._onDidRemoveTraitItem.add(item.onDidRemoveTrait), this._onDidRefreshItem.add(item.onDidRefresh), this._onRefreshItemChildren.add(item.onRefreshChildren), this._onDidRefreshItemChildren.add(item.onDidRefreshChildren), this._onDidDisposeItem.add(item.onDidDispose));\n    this.items[item.id] = {\n      item: item,\n      disposable: disposable\n    };\n  };\n  ItemRegistry.prototype.deregister = function (item) {\n    Assert.ok(this.isRegistered(item.id), 'item not registered: ' + item.id);\n    this.items[item.id].disposable.dispose();\n    delete this.items[item.id];\n  };\n  ItemRegistry.prototype.isRegistered = function (id) {\n    return this.items.hasOwnProperty(id);\n  };\n  ItemRegistry.prototype.getItem = function (id) {\n    var result = this.items[id];\n    return result ? result.item : null;\n  };\n  ItemRegistry.prototype.dispose = function () {\n    this.items = {};\n    this._onDidRevealItem.dispose();\n    this._onExpandItem.dispose();\n    this._onDidExpandItem.dispose();\n    this._onCollapseItem.dispose();\n    this._onDidCollapseItem.dispose();\n    this._onDidAddTraitItem.dispose();\n    this._onDidRemoveTraitItem.dispose();\n    this._onDidRefreshItem.dispose();\n    this._onRefreshItemChildren.dispose();\n    this._onDidRefreshItemChildren.dispose();\n    this._isDisposed = true;\n  };\n  ItemRegistry.prototype.isDisposed = function () {\n    return this._isDisposed;\n  };\n  return ItemRegistry;\n}();\nexport { ItemRegistry };\nvar Item = /** @class */function () {\n  function Item(id, registry, context, lock, element) {\n    this._onDidCreate = new Emitter();\n    this._onDidReveal = new Emitter();\n    this.onDidReveal = this._onDidReveal.event;\n    this._onExpand = new Emitter();\n    this.onExpand = this._onExpand.event;\n    this._onDidExpand = new Emitter();\n    this.onDidExpand = this._onDidExpand.event;\n    this._onCollapse = new Emitter();\n    this.onCollapse = this._onCollapse.event;\n    this._onDidCollapse = new Emitter();\n    this.onDidCollapse = this._onDidCollapse.event;\n    this._onDidAddTrait = new Emitter();\n    this.onDidAddTrait = this._onDidAddTrait.event;\n    this._onDidRemoveTrait = new Emitter();\n    this.onDidRemoveTrait = this._onDidRemoveTrait.event;\n    this._onDidRefresh = new Emitter();\n    this.onDidRefresh = this._onDidRefresh.event;\n    this._onRefreshChildren = new Emitter();\n    this.onRefreshChildren = this._onRefreshChildren.event;\n    this._onDidRefreshChildren = new Emitter();\n    this.onDidRefreshChildren = this._onDidRefreshChildren.event;\n    this._onDidDispose = new Emitter();\n    this.onDidDispose = this._onDidDispose.event;\n    this.registry = registry;\n    this.context = context;\n    this.lock = lock;\n    this.element = element;\n    this.id = id;\n    this.registry.register(this);\n    this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\n    this.needsChildrenRefresh = true;\n    this.parent = null;\n    this.previous = null;\n    this.next = null;\n    this.firstChild = null;\n    this.lastChild = null;\n    this.traits = {};\n    this.depth = 0;\n    this.expanded = !!(this.context.dataSource.shouldAutoexpand && this.context.dataSource.shouldAutoexpand(this.context.tree, element));\n    this._onDidCreate.fire(this);\n    this.visible = this._isVisible();\n    this.height = this._getHeight();\n    this._isDisposed = false;\n  }\n  Item.prototype.getElement = function () {\n    return this.element;\n  };\n  Item.prototype.hasChildren = function () {\n    return this.doesHaveChildren;\n  };\n  Item.prototype.getDepth = function () {\n    return this.depth;\n  };\n  Item.prototype.isVisible = function () {\n    return this.visible;\n  };\n  Item.prototype.setVisible = function (value) {\n    this.visible = value;\n  };\n  Item.prototype.isExpanded = function () {\n    return this.expanded;\n  };\n  /* protected */\n  Item.prototype._setExpanded = function (value) {\n    this.expanded = value;\n  };\n  Item.prototype.reveal = function (relativeTop) {\n    if (relativeTop === void 0) {\n      relativeTop = null;\n    }\n    var eventData = {\n      item: this,\n      relativeTop: relativeTop\n    };\n    this._onDidReveal.fire(eventData);\n  };\n  Item.prototype.expand = function () {\n    var _this = this;\n    if (this.isExpanded() || !this.doesHaveChildren || this.lock.isLocked(this)) {\n      return Promise.resolve(false);\n    }\n    var result = this.lock.run(this, function () {\n      if (_this.isExpanded() || !_this.doesHaveChildren) {\n        return Promise.resolve(false);\n      }\n      var eventData = {\n        item: _this\n      };\n      var result;\n      _this._onExpand.fire(eventData);\n      if (_this.needsChildrenRefresh) {\n        result = _this.refreshChildren(false, true, true);\n      } else {\n        result = Promise.resolve(null);\n      }\n      return result.then(function () {\n        _this._setExpanded(true);\n        _this._onDidExpand.fire(eventData);\n        return true;\n      });\n    });\n    return result.then(function (r) {\n      if (_this.isDisposed()) {\n        return false;\n      }\n      // Auto expand single child folders\n      if (_this.context.options.autoExpandSingleChildren && r && _this.firstChild !== null && _this.firstChild === _this.lastChild && _this.firstChild.isVisible()) {\n        return _this.firstChild.expand().then(function () {\n          return true;\n        });\n      }\n      return r;\n    });\n  };\n  Item.prototype.collapse = function (recursive) {\n    var _this = this;\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    if (recursive) {\n      var collapseChildrenPromise_1 = Promise.resolve(null);\n      this.forEachChild(function (child) {\n        collapseChildrenPromise_1 = collapseChildrenPromise_1.then(function () {\n          return child.collapse(true);\n        });\n      });\n      return collapseChildrenPromise_1.then(function () {\n        return _this.collapse(false);\n      });\n    } else {\n      if (!this.isExpanded() || this.lock.isLocked(this)) {\n        return Promise.resolve(false);\n      }\n      return this.lock.run(this, function () {\n        var eventData = {\n          item: _this\n        };\n        _this._onCollapse.fire(eventData);\n        _this._setExpanded(false);\n        _this._onDidCollapse.fire(eventData);\n        return Promise.resolve(true);\n      });\n    }\n  };\n  Item.prototype.addTrait = function (trait) {\n    var eventData = {\n      item: this,\n      trait: trait\n    };\n    this.traits[trait] = true;\n    this._onDidAddTrait.fire(eventData);\n  };\n  Item.prototype.removeTrait = function (trait) {\n    var eventData = {\n      item: this,\n      trait: trait\n    };\n    delete this.traits[trait];\n    this._onDidRemoveTrait.fire(eventData);\n  };\n  Item.prototype.hasTrait = function (trait) {\n    return this.traits[trait] || false;\n  };\n  Item.prototype.getAllTraits = function () {\n    var result = [];\n    var trait;\n    for (trait in this.traits) {\n      if (this.traits.hasOwnProperty(trait) && this.traits[trait]) {\n        result.push(trait);\n      }\n    }\n    return result;\n  };\n  Item.prototype.getHeight = function () {\n    return this.height;\n  };\n  Item.prototype.refreshChildren = function (recursive, safe, force) {\n    var _this = this;\n    if (safe === void 0) {\n      safe = false;\n    }\n    if (force === void 0) {\n      force = false;\n    }\n    if (!force && !this.isExpanded()) {\n      var setNeedsChildrenRefresh_1 = function setNeedsChildrenRefresh_1(item) {\n        item.needsChildrenRefresh = true;\n        item.forEachChild(setNeedsChildrenRefresh_1);\n      };\n      setNeedsChildrenRefresh_1(this);\n      return Promise.resolve(this);\n    }\n    this.needsChildrenRefresh = false;\n    var doRefresh = function doRefresh() {\n      var eventData = {\n        item: _this,\n        isNested: safe\n      };\n      _this._onRefreshChildren.fire(eventData);\n      var childrenPromise;\n      if (_this.doesHaveChildren) {\n        childrenPromise = _this.context.dataSource.getChildren(_this.context.tree, _this.element);\n      } else {\n        childrenPromise = Promise.resolve([]);\n      }\n      var result = childrenPromise.then(function (elements) {\n        if (_this.isDisposed() || _this.registry.isDisposed()) {\n          return Promise.resolve(null);\n        }\n        if (!Array.isArray(elements)) {\n          return Promise.reject(new Error('Please return an array of children.'));\n        }\n        elements = !elements ? [] : elements.slice(0);\n        elements = _this.sort(elements);\n        var staleItems = {};\n        while (_this.firstChild !== null) {\n          staleItems[_this.firstChild.id] = _this.firstChild;\n          _this.removeChild(_this.firstChild);\n        }\n        for (var i = 0, len = elements.length; i < len; i++) {\n          var element = elements[i];\n          var id = _this.context.dataSource.getId(_this.context.tree, element);\n          var item = staleItems[id] || new Item(id, _this.registry, _this.context, _this.lock, element);\n          item.element = element;\n          if (recursive) {\n            item.needsChildrenRefresh = recursive;\n          }\n          delete staleItems[id];\n          _this.addChild(item);\n        }\n        for (var staleItemId in staleItems) {\n          if (staleItems.hasOwnProperty(staleItemId)) {\n            staleItems[staleItemId].dispose();\n          }\n        }\n        if (recursive) {\n          return Promise.all(_this.mapEachChild(function (child) {\n            return child.doRefresh(recursive, true);\n          }));\n        } else {\n          return Promise.all(_this.mapEachChild(function (child) {\n            if (child.isExpanded() && child.needsChildrenRefresh) {\n              return child.doRefresh(recursive, true);\n            } else {\n              child.updateVisibility();\n              return Promise.resolve(null);\n            }\n          }));\n        }\n      });\n      return result.then(undefined, onUnexpectedError).then(function () {\n        return _this._onDidRefreshChildren.fire(eventData);\n      });\n    };\n    return safe ? doRefresh() : this.lock.run(this, doRefresh);\n  };\n  Item.prototype.doRefresh = function (recursive, safe) {\n    if (safe === void 0) {\n      safe = false;\n    }\n    this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\n    this.height = this._getHeight();\n    this.updateVisibility();\n    this._onDidRefresh.fire(this);\n    return this.refreshChildren(recursive, safe);\n  };\n  Item.prototype.updateVisibility = function () {\n    this.setVisible(this._isVisible());\n  };\n  Item.prototype.refresh = function (recursive) {\n    return this.doRefresh(recursive);\n  };\n  Item.prototype.getNavigator = function () {\n    return new TreeNavigator(this);\n  };\n  Item.prototype.intersects = function (other) {\n    return this.isAncestorOf(other) || other.isAncestorOf(this);\n  };\n  Item.prototype.isAncestorOf = function (startItem) {\n    var item = startItem;\n    while (item) {\n      if (item.id === this.id) {\n        return true;\n      }\n      item = item.parent;\n    }\n    return false;\n  };\n  Item.prototype.addChild = function (item, afterItem) {\n    if (afterItem === void 0) {\n      afterItem = this.lastChild;\n    }\n    var isEmpty = this.firstChild === null;\n    var atHead = afterItem === null;\n    var atTail = afterItem === this.lastChild;\n    if (isEmpty) {\n      this.firstChild = this.lastChild = item;\n      item.next = item.previous = null;\n    } else if (atHead) {\n      if (!this.firstChild) {\n        throw new Error('Invalid tree state');\n      }\n      this.firstChild.previous = item;\n      item.next = this.firstChild;\n      item.previous = null;\n      this.firstChild = item;\n    } else if (atTail) {\n      if (!this.lastChild) {\n        throw new Error('Invalid tree state');\n      }\n      this.lastChild.next = item;\n      item.next = null;\n      item.previous = this.lastChild;\n      this.lastChild = item;\n    } else {\n      item.previous = afterItem;\n      if (!afterItem) {\n        throw new Error('Invalid tree state');\n      }\n      item.next = afterItem.next;\n      if (!afterItem.next) {\n        throw new Error('Invalid tree state');\n      }\n      afterItem.next.previous = item;\n      afterItem.next = item;\n    }\n    item.parent = this;\n    item.depth = this.depth + 1;\n  };\n  Item.prototype.removeChild = function (item) {\n    var isFirstChild = this.firstChild === item;\n    var isLastChild = this.lastChild === item;\n    if (isFirstChild && isLastChild) {\n      this.firstChild = this.lastChild = null;\n    } else if (isFirstChild) {\n      if (!item.next) {\n        throw new Error('Invalid tree state');\n      }\n      item.next.previous = null;\n      this.firstChild = item.next;\n    } else if (isLastChild) {\n      if (!item.previous) {\n        throw new Error('Invalid tree state');\n      }\n      item.previous.next = null;\n      this.lastChild = item.previous;\n    } else {\n      if (!item.next) {\n        throw new Error('Invalid tree state');\n      }\n      item.next.previous = item.previous;\n      if (!item.previous) {\n        throw new Error('Invalid tree state');\n      }\n      item.previous.next = item.next;\n    }\n    item.parent = null;\n    item.depth = NaN;\n  };\n  Item.prototype.forEachChild = function (fn) {\n    var child = this.firstChild;\n    var next;\n    while (child) {\n      next = child.next;\n      fn(child);\n      child = next;\n    }\n  };\n  Item.prototype.mapEachChild = function (fn) {\n    var result = [];\n    this.forEachChild(function (child) {\n      result.push(fn(child));\n    });\n    return result;\n  };\n  Item.prototype.sort = function (elements) {\n    var _this = this;\n    var sorter = this.context.sorter;\n    if (sorter) {\n      return elements.sort(function (element, otherElement) {\n        return sorter.compare(_this.context.tree, element, otherElement);\n      });\n    }\n    return elements;\n  };\n  /* protected */\n  Item.prototype._getHeight = function () {\n    if (!this.context.renderer) {\n      return 0;\n    }\n    return this.context.renderer.getHeight(this.context.tree, this.element);\n  };\n  /* protected */\n  Item.prototype._isVisible = function () {\n    if (!this.context.filter) {\n      return false;\n    }\n    return this.context.filter.isVisible(this.context.tree, this.element);\n  };\n  Item.prototype.isDisposed = function () {\n    return this._isDisposed;\n  };\n  Item.prototype.dispose = function () {\n    this.forEachChild(function (child) {\n      return child.dispose();\n    });\n    this.parent = null;\n    this.previous = null;\n    this.next = null;\n    this.firstChild = null;\n    this.lastChild = null;\n    this._onDidDispose.fire(this);\n    this.registry.deregister(this);\n    this._onDidCreate.dispose();\n    this._onDidReveal.dispose();\n    this._onExpand.dispose();\n    this._onDidExpand.dispose();\n    this._onCollapse.dispose();\n    this._onDidCollapse.dispose();\n    this._onDidAddTrait.dispose();\n    this._onDidRemoveTrait.dispose();\n    this._onDidRefresh.dispose();\n    this._onRefreshChildren.dispose();\n    this._onDidRefreshChildren.dispose();\n    this._onDidDispose.dispose();\n    this._isDisposed = true;\n  };\n  return Item;\n}();\nexport { Item };\nvar RootItem = /** @class */function (_super) {\n  __extends(RootItem, _super);\n  function RootItem(id, registry, context, lock, element) {\n    return _super.call(this, id, registry, context, lock, element) || this;\n  }\n  RootItem.prototype.isVisible = function () {\n    return false;\n  };\n  RootItem.prototype.setVisible = function (value) {\n    // no-op\n  };\n  RootItem.prototype.isExpanded = function () {\n    return true;\n  };\n  /* protected */\n  RootItem.prototype._setExpanded = function (value) {\n    // no-op\n  };\n  /* protected */\n  RootItem.prototype._getHeight = function () {\n    return 0;\n  };\n  /* protected */\n  RootItem.prototype._isVisible = function () {\n    return false;\n  };\n  return RootItem;\n}(Item);\nvar TreeNavigator = /** @class */function () {\n  function TreeNavigator(item, subTreeOnly) {\n    if (subTreeOnly === void 0) {\n      subTreeOnly = true;\n    }\n    this.item = item;\n    this.start = subTreeOnly ? item : null;\n  }\n  TreeNavigator.lastDescendantOf = function (item) {\n    if (!item) {\n      return null;\n    }\n    if (item instanceof RootItem) {\n      return TreeNavigator.lastDescendantOf(item.lastChild);\n    }\n    if (!item.isVisible()) {\n      return TreeNavigator.lastDescendantOf(item.previous);\n    }\n    if (!item.isExpanded() || item.lastChild === null) {\n      return item;\n    }\n    return TreeNavigator.lastDescendantOf(item.lastChild);\n  };\n  TreeNavigator.prototype.current = function () {\n    return this.item || null;\n  };\n  TreeNavigator.prototype.next = function () {\n    if (this.item) {\n      do {\n        if ((this.item instanceof RootItem || this.item.isVisible() && this.item.isExpanded()) && this.item.firstChild) {\n          this.item = this.item.firstChild;\n        } else if (this.item === this.start) {\n          this.item = null;\n        } else {\n          // select next brother, next uncle, next great-uncle, etc...\n          while (this.item && this.item !== this.start && !this.item.next) {\n            this.item = this.item.parent;\n          }\n          if (this.item === this.start) {\n            this.item = null;\n          }\n          this.item = !this.item ? null : this.item.next;\n        }\n      } while (this.item && !this.item.isVisible());\n    }\n    return this.item || null;\n  };\n  TreeNavigator.prototype.previous = function () {\n    if (this.item) {\n      do {\n        var previous = TreeNavigator.lastDescendantOf(this.item.previous);\n        if (previous) {\n          this.item = previous;\n        } else if (this.item.parent && this.item.parent !== this.start && this.item.parent.isVisible()) {\n          this.item = this.item.parent;\n        } else {\n          this.item = null;\n        }\n      } while (this.item && !this.item.isVisible());\n    }\n    return this.item || null;\n  };\n  TreeNavigator.prototype.parent = function () {\n    if (this.item) {\n      var parent_1 = this.item.parent;\n      if (parent_1 && parent_1 !== this.start && parent_1.isVisible()) {\n        this.item = parent_1;\n      } else {\n        this.item = null;\n      }\n    }\n    return this.item || null;\n  };\n  TreeNavigator.prototype.first = function () {\n    this.item = this.start;\n    this.next();\n    return this.item || null;\n  };\n  TreeNavigator.prototype.last = function () {\n    return TreeNavigator.lastDescendantOf(this.start);\n  };\n  return TreeNavigator;\n}();\nexport { TreeNavigator };\nvar TreeModel = /** @class */function () {\n  function TreeModel(context) {\n    this.registry = new ItemRegistry();\n    this.registryDisposable = Disposable.None;\n    this._onSetInput = new Emitter();\n    this.onSetInput = this._onSetInput.event;\n    this._onDidSetInput = new Emitter();\n    this.onDidSetInput = this._onDidSetInput.event;\n    this._onRefresh = new Emitter();\n    this.onRefresh = this._onRefresh.event;\n    this._onDidRefresh = new Emitter();\n    this.onDidRefresh = this._onDidRefresh.event;\n    this._onDidHighlight = new Emitter();\n    this.onDidHighlight = this._onDidHighlight.event;\n    this._onDidSelect = new Emitter();\n    this.onDidSelect = this._onDidSelect.event;\n    this._onDidFocus = new Emitter();\n    this.onDidFocus = this._onDidFocus.event;\n    this._onDidRevealItem = new Relay();\n    this.onDidRevealItem = this._onDidRevealItem.event;\n    this._onExpandItem = new Relay();\n    this.onExpandItem = this._onExpandItem.event;\n    this._onDidExpandItem = new Relay();\n    this.onDidExpandItem = this._onDidExpandItem.event;\n    this._onCollapseItem = new Relay();\n    this.onCollapseItem = this._onCollapseItem.event;\n    this._onDidCollapseItem = new Relay();\n    this.onDidCollapseItem = this._onDidCollapseItem.event;\n    this._onDidAddTraitItem = new Relay();\n    this.onDidAddTraitItem = this._onDidAddTraitItem.event;\n    this._onDidRemoveTraitItem = new Relay();\n    this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\n    this._onDidRefreshItem = new Relay();\n    this.onDidRefreshItem = this._onDidRefreshItem.event;\n    this._onRefreshItemChildren = new Relay();\n    this.onRefreshItemChildren = this._onRefreshItemChildren.event;\n    this._onDidRefreshItemChildren = new Relay();\n    this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\n    this._onDidDisposeItem = new Relay();\n    this.context = context;\n    this.input = null;\n    this.traitsToItems = {};\n  }\n  TreeModel.prototype.setInput = function (element) {\n    var _this = this;\n    var eventData = {\n      item: this.input\n    };\n    this._onSetInput.fire(eventData);\n    this.setSelection([]);\n    this.setFocus();\n    this.setHighlight();\n    this.lock = new Lock();\n    if (this.input) {\n      this.input.dispose();\n    }\n    if (this.registry) {\n      this.registry.dispose();\n      this.registryDisposable.dispose();\n    }\n    this.registry = new ItemRegistry();\n    this._onDidRevealItem.input = this.registry.onDidRevealItem;\n    this._onExpandItem.input = this.registry.onExpandItem;\n    this._onDidExpandItem.input = this.registry.onDidExpandItem;\n    this._onCollapseItem.input = this.registry.onCollapseItem;\n    this._onDidCollapseItem.input = this.registry.onDidCollapseItem;\n    this._onDidAddTraitItem.input = this.registry.onDidAddTraitItem;\n    this._onDidRemoveTraitItem.input = this.registry.onDidRemoveTraitItem;\n    this._onDidRefreshItem.input = this.registry.onDidRefreshItem;\n    this._onRefreshItemChildren.input = this.registry.onRefreshItemChildren;\n    this._onDidRefreshItemChildren.input = this.registry.onDidRefreshItemChildren;\n    this._onDidDisposeItem.input = this.registry.onDidDisposeItem;\n    this.registryDisposable = this.registry.onDidDisposeItem(function (item) {\n      return item.getAllTraits().forEach(function (trait) {\n        return delete _this.traitsToItems[trait][item.id];\n      });\n    });\n    var id = this.context.dataSource.getId(this.context.tree, element);\n    this.input = new RootItem(id, this.registry, this.context, this.lock, element);\n    eventData = {\n      item: this.input\n    };\n    this._onDidSetInput.fire(eventData);\n    return this.refresh(this.input);\n  };\n  TreeModel.prototype.getInput = function () {\n    return this.input ? this.input.getElement() : null;\n  };\n  TreeModel.prototype.refresh = function (element, recursive) {\n    var _this = this;\n    if (element === void 0) {\n      element = null;\n    }\n    if (recursive === void 0) {\n      recursive = true;\n    }\n    var item = this.getItem(element);\n    if (!item) {\n      return Promise.resolve(null);\n    }\n    var eventData = {\n      item: item,\n      recursive: recursive\n    };\n    this._onRefresh.fire(eventData);\n    return item.refresh(recursive).then(function () {\n      _this._onDidRefresh.fire(eventData);\n    });\n  };\n  TreeModel.prototype.expand = function (element) {\n    var item = this.getItem(element);\n    if (!item) {\n      return Promise.resolve(false);\n    }\n    return item.expand();\n  };\n  TreeModel.prototype.collapse = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    var item = this.getItem(element);\n    if (!item) {\n      return Promise.resolve(false);\n    }\n    return item.collapse(recursive);\n  };\n  TreeModel.prototype.toggleExpansion = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    return this.isExpanded(element) ? this.collapse(element, recursive) : this.expand(element);\n  };\n  TreeModel.prototype.isExpanded = function (element) {\n    var item = this.getItem(element);\n    if (!item) {\n      return false;\n    }\n    return item.isExpanded();\n  };\n  TreeModel.prototype.reveal = function (element, relativeTop) {\n    var _this = this;\n    if (relativeTop === void 0) {\n      relativeTop = null;\n    }\n    return this.resolveUnknownParentChain(element).then(function (chain) {\n      var result = Promise.resolve(null);\n      chain.forEach(function (e) {\n        result = result.then(function () {\n          return _this.expand(e);\n        });\n      });\n      return result;\n    }).then(function () {\n      var item = _this.getItem(element);\n      if (item) {\n        return item.reveal(relativeTop);\n      }\n    });\n  };\n  TreeModel.prototype.resolveUnknownParentChain = function (element) {\n    var _this = this;\n    return this.context.dataSource.getParent(this.context.tree, element).then(function (parent) {\n      if (!parent) {\n        return Promise.resolve([]);\n      }\n      return _this.resolveUnknownParentChain(parent).then(function (result) {\n        result.push(parent);\n        return result;\n      });\n    });\n  };\n  TreeModel.prototype.setHighlight = function (element, eventPayload) {\n    this.setTraits('highlighted', element ? [element] : []);\n    var eventData = {\n      highlight: this.getHighlight(),\n      payload: eventPayload\n    };\n    this._onDidHighlight.fire(eventData);\n  };\n  TreeModel.prototype.getHighlight = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n    var result = this.getElementsWithTrait('highlighted', includeHidden);\n    return result.length === 0 ? null : result[0];\n  };\n  TreeModel.prototype.setSelection = function (elements, eventPayload) {\n    this.setTraits('selected', elements);\n    var eventData = {\n      selection: this.getSelection(),\n      payload: eventPayload\n    };\n    this._onDidSelect.fire(eventData);\n  };\n  TreeModel.prototype.getSelection = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n    return this.getElementsWithTrait('selected', includeHidden);\n  };\n  TreeModel.prototype.setFocus = function (element, eventPayload) {\n    this.setTraits('focused', element ? [element] : []);\n    var eventData = {\n      focus: this.getFocus(),\n      payload: eventPayload\n    };\n    this._onDidFocus.fire(eventData);\n  };\n  TreeModel.prototype.getFocus = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n    var result = this.getElementsWithTrait('focused', includeHidden);\n    return result.length === 0 ? null : result[0];\n  };\n  TreeModel.prototype.focusNext = function (count, eventPayload) {\n    if (count === void 0) {\n      count = 1;\n    }\n    var item = this.getFocus() || this.input;\n    var nextItem;\n    var nav = this.getNavigator(item, false);\n    for (var i = 0; i < count; i++) {\n      nextItem = nav.next();\n      if (!nextItem) {\n        break;\n      }\n      item = nextItem;\n    }\n    this.setFocus(item, eventPayload);\n  };\n  TreeModel.prototype.focusPrevious = function (count, eventPayload) {\n    if (count === void 0) {\n      count = 1;\n    }\n    var item = this.getFocus() || this.input;\n    var previousItem;\n    var nav = this.getNavigator(item, false);\n    for (var i = 0; i < count; i++) {\n      previousItem = nav.previous();\n      if (!previousItem) {\n        break;\n      }\n      item = previousItem;\n    }\n    this.setFocus(item, eventPayload);\n  };\n  TreeModel.prototype.focusParent = function (eventPayload) {\n    var item = this.getFocus() || this.input;\n    var nav = this.getNavigator(item, false);\n    var parent = nav.parent();\n    if (parent) {\n      this.setFocus(parent, eventPayload);\n    }\n  };\n  TreeModel.prototype.focusFirstChild = function (eventPayload) {\n    var item = this.getItem(this.getFocus() || this.input);\n    var nav = this.getNavigator(item, false);\n    var next = nav.next();\n    var parent = nav.parent();\n    if (parent === item) {\n      this.setFocus(next, eventPayload);\n    }\n  };\n  TreeModel.prototype.focusFirst = function (eventPayload, from) {\n    this.focusNth(0, eventPayload, from);\n  };\n  TreeModel.prototype.focusNth = function (index, eventPayload, from) {\n    var navItem = this.getParent(from);\n    var nav = this.getNavigator(navItem);\n    var item = nav.first();\n    for (var i = 0; i < index; i++) {\n      item = nav.next();\n    }\n    if (item) {\n      this.setFocus(item, eventPayload);\n    }\n  };\n  TreeModel.prototype.focusLast = function (eventPayload, from) {\n    var navItem = this.getParent(from);\n    var item;\n    if (from && navItem) {\n      item = navItem.lastChild;\n    } else {\n      var nav = this.getNavigator(navItem);\n      item = nav.last();\n    }\n    if (item) {\n      this.setFocus(item, eventPayload);\n    }\n  };\n  TreeModel.prototype.getParent = function (from) {\n    if (from) {\n      var fromItem = this.getItem(from);\n      if (fromItem && fromItem.parent) {\n        return fromItem.parent;\n      }\n    }\n    return this.getItem(this.input);\n  };\n  TreeModel.prototype.getNavigator = function (element, subTreeOnly) {\n    if (element === void 0) {\n      element = null;\n    }\n    if (subTreeOnly === void 0) {\n      subTreeOnly = true;\n    }\n    return new TreeNavigator(this.getItem(element), subTreeOnly);\n  };\n  TreeModel.prototype.getItem = function (element) {\n    if (element === void 0) {\n      element = null;\n    }\n    if (element === null) {\n      return this.input;\n    } else if (element instanceof Item) {\n      return element;\n    } else if (typeof element === 'string') {\n      return this.registry.getItem(element);\n    } else {\n      return this.registry.getItem(this.context.dataSource.getId(this.context.tree, element));\n    }\n  };\n  TreeModel.prototype.removeTraits = function (trait, elements) {\n    var items = this.traitsToItems[trait] || {};\n    var item;\n    var id;\n    if (elements.length === 0) {\n      for (id in items) {\n        if (items.hasOwnProperty(id)) {\n          item = items[id];\n          item.removeTrait(trait);\n        }\n      }\n      delete this.traitsToItems[trait];\n    } else {\n      for (var i = 0, len = elements.length; i < len; i++) {\n        item = this.getItem(elements[i]);\n        if (item) {\n          item.removeTrait(trait);\n          delete items[item.id];\n        }\n      }\n    }\n  };\n  TreeModel.prototype.setTraits = function (trait, elements) {\n    if (elements.length === 0) {\n      this.removeTraits(trait, elements);\n    } else {\n      var items = {};\n      var item = void 0;\n      for (var i = 0, len = elements.length; i < len; i++) {\n        item = this.getItem(elements[i]);\n        if (item) {\n          items[item.id] = item;\n        }\n      }\n      var traitItems = this.traitsToItems[trait] || {};\n      var itemsToRemoveTrait = [];\n      var id = void 0;\n      for (id in traitItems) {\n        if (traitItems.hasOwnProperty(id)) {\n          if (items.hasOwnProperty(id)) {\n            delete items[id];\n          } else {\n            itemsToRemoveTrait.push(traitItems[id]);\n          }\n        }\n      }\n      for (var i = 0, len = itemsToRemoveTrait.length; i < len; i++) {\n        item = itemsToRemoveTrait[i];\n        item.removeTrait(trait);\n        delete traitItems[item.id];\n      }\n      for (id in items) {\n        if (items.hasOwnProperty(id)) {\n          item = items[id];\n          item.addTrait(trait);\n          traitItems[id] = item;\n        }\n      }\n      this.traitsToItems[trait] = traitItems;\n    }\n  };\n  TreeModel.prototype.getElementsWithTrait = function (trait, includeHidden) {\n    var elements = [];\n    var items = this.traitsToItems[trait] || {};\n    var id;\n    for (id in items) {\n      if (items.hasOwnProperty(id) && (items[id].isVisible() || includeHidden)) {\n        elements.push(items[id].getElement());\n      }\n    }\n    return elements;\n  };\n  TreeModel.prototype.dispose = function () {\n    this.registry.dispose();\n    this._onSetInput.dispose();\n    this._onDidSetInput.dispose();\n    this._onRefresh.dispose();\n    this._onDidRefresh.dispose();\n    this._onDidHighlight.dispose();\n    this._onDidSelect.dispose();\n    this._onDidFocus.dispose();\n    this._onDidRevealItem.dispose();\n    this._onExpandItem.dispose();\n    this._onDidExpandItem.dispose();\n    this._onCollapseItem.dispose();\n    this._onDidCollapseItem.dispose();\n    this._onDidAddTraitItem.dispose();\n    this._onDidRemoveTraitItem.dispose();\n    this._onDidRefreshItem.dispose();\n    this._onRefreshItemChildren.dispose();\n    this._onDidRefreshItemChildren.dispose();\n    this._onDidDisposeItem.dispose();\n  };\n  return TreeModel;\n}();\nexport { TreeModel };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Assert","onUnexpectedError","combinedDisposable","Disposable","Event","Emitter","EventMultiplexer","Relay","LockData","item","_onDispose","onDispose","event","_item","defineProperty","get","enumerable","configurable","dispose","fire","undefined","Lock","locks","isLocked","id","run","fn","_this","lock","getLock","Promise","c","e","once","then","result","isDisposed","Error","r","key","intersects","ItemRegistry","_isDisposed","_onDidRevealItem","onDidRevealItem","_onExpandItem","onExpandItem","_onDidExpandItem","onDidExpandItem","_onCollapseItem","onCollapseItem","_onDidCollapseItem","onDidCollapseItem","_onDidAddTraitItem","onDidAddTraitItem","_onDidRemoveTraitItem","onDidRemoveTraitItem","_onDidRefreshItem","onDidRefreshItem","_onRefreshItemChildren","onRefreshItemChildren","_onDidRefreshItemChildren","onDidRefreshItemChildren","_onDidDisposeItem","onDidDisposeItem","items","register","ok","isRegistered","disposable","add","onDidReveal","onExpand","onDidExpand","onCollapse","onDidCollapse","onDidAddTrait","onDidRemoveTrait","onDidRefresh","onRefreshChildren","onDidRefreshChildren","onDidDispose","deregister","getItem","Item","registry","context","element","_onDidCreate","_onDidReveal","_onExpand","_onDidExpand","_onCollapse","_onDidCollapse","_onDidAddTrait","_onDidRemoveTrait","_onDidRefresh","_onRefreshChildren","_onDidRefreshChildren","_onDidDispose","doesHaveChildren","dataSource","hasChildren","tree","needsChildrenRefresh","parent","previous","next","firstChild","lastChild","traits","depth","expanded","shouldAutoexpand","visible","_isVisible","height","_getHeight","getElement","getDepth","isVisible","setVisible","value","isExpanded","_setExpanded","reveal","relativeTop","eventData","expand","resolve","refreshChildren","options","autoExpandSingleChildren","collapse","recursive","collapseChildrenPromise_1","forEachChild","child","addTrait","trait","removeTrait","hasTrait","getAllTraits","push","getHeight","safe","force","setNeedsChildrenRefresh_1","doRefresh","isNested","childrenPromise","getChildren","elements","isArray","reject","slice","sort","staleItems","removeChild","i","len","length","getId","addChild","staleItemId","all","mapEachChild","updateVisibility","refresh","getNavigator","TreeNavigator","other","isAncestorOf","startItem","afterItem","isEmpty","atHead","atTail","isFirstChild","isLastChild","NaN","sorter","otherElement","compare","renderer","filter","RootItem","_super","call","subTreeOnly","start","lastDescendantOf","current","parent_1","first","last","TreeModel","registryDisposable","None","_onSetInput","onSetInput","_onDidSetInput","onDidSetInput","_onRefresh","onRefresh","_onDidHighlight","onDidHighlight","_onDidSelect","onDidSelect","_onDidFocus","onDidFocus","input","traitsToItems","setInput","setSelection","setFocus","setHighlight","forEach","getInput","toggleExpansion","resolveUnknownParentChain","chain","getParent","eventPayload","setTraits","highlight","getHighlight","payload","includeHidden","getElementsWithTrait","selection","getSelection","focus","getFocus","focusNext","count","nextItem","nav","focusPrevious","previousItem","focusParent","focusFirstChild","focusFirst","from","focusNth","index","navItem","focusLast","fromItem","removeTraits","traitItems","itemsToRemoveTrait"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Assert from '../../../common/assert.js';\r\nimport { onUnexpectedError } from '../../../common/errors.js';\r\nimport { combinedDisposable, Disposable } from '../../../common/lifecycle.js';\r\nimport { Event, Emitter, EventMultiplexer, Relay } from '../../../common/event.js';\r\nvar LockData = /** @class */ (function () {\r\n    function LockData(item) {\r\n        this._onDispose = new Emitter();\r\n        this.onDispose = this._onDispose.event;\r\n        this._item = item;\r\n    }\r\n    Object.defineProperty(LockData.prototype, \"item\", {\r\n        get: function () {\r\n            return this._item;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LockData.prototype.dispose = function () {\r\n        if (this._onDispose) {\r\n            this._onDispose.fire();\r\n            this._onDispose.dispose();\r\n            this._onDispose = undefined;\r\n        }\r\n    };\r\n    return LockData;\r\n}());\r\nexport { LockData };\r\nvar Lock = /** @class */ (function () {\r\n    function Lock() {\r\n        this.locks = Object.create({});\r\n    }\r\n    Lock.prototype.isLocked = function (item) {\r\n        return !!this.locks[item.id];\r\n    };\r\n    Lock.prototype.run = function (item, fn) {\r\n        var _this = this;\r\n        var lock = this.getLock(item);\r\n        if (lock) {\r\n            return new Promise(function (c, e) {\r\n                Event.once(lock.onDispose)(function () {\r\n                    return _this.run(item, fn).then(c, e);\r\n                });\r\n            });\r\n        }\r\n        var result;\r\n        return new Promise(function (c, e) {\r\n            if (item.isDisposed()) {\r\n                return e(new Error('Item is disposed.'));\r\n            }\r\n            var lock = _this.locks[item.id] = new LockData(item);\r\n            result = fn().then(function (r) {\r\n                delete _this.locks[item.id];\r\n                lock.dispose();\r\n                return r;\r\n            }).then(c, e);\r\n            return result;\r\n        });\r\n    };\r\n    Lock.prototype.getLock = function (item) {\r\n        var key;\r\n        for (key in this.locks) {\r\n            var lock = this.locks[key];\r\n            if (item.intersects(lock.item)) {\r\n                return lock;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return Lock;\r\n}());\r\nexport { Lock };\r\nvar ItemRegistry = /** @class */ (function () {\r\n    function ItemRegistry() {\r\n        this._isDisposed = false;\r\n        this._onDidRevealItem = new EventMultiplexer();\r\n        this.onDidRevealItem = this._onDidRevealItem.event;\r\n        this._onExpandItem = new EventMultiplexer();\r\n        this.onExpandItem = this._onExpandItem.event;\r\n        this._onDidExpandItem = new EventMultiplexer();\r\n        this.onDidExpandItem = this._onDidExpandItem.event;\r\n        this._onCollapseItem = new EventMultiplexer();\r\n        this.onCollapseItem = this._onCollapseItem.event;\r\n        this._onDidCollapseItem = new EventMultiplexer();\r\n        this.onDidCollapseItem = this._onDidCollapseItem.event;\r\n        this._onDidAddTraitItem = new EventMultiplexer();\r\n        this.onDidAddTraitItem = this._onDidAddTraitItem.event;\r\n        this._onDidRemoveTraitItem = new EventMultiplexer();\r\n        this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\r\n        this._onDidRefreshItem = new EventMultiplexer();\r\n        this.onDidRefreshItem = this._onDidRefreshItem.event;\r\n        this._onRefreshItemChildren = new EventMultiplexer();\r\n        this.onRefreshItemChildren = this._onRefreshItemChildren.event;\r\n        this._onDidRefreshItemChildren = new EventMultiplexer();\r\n        this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\r\n        this._onDidDisposeItem = new EventMultiplexer();\r\n        this.onDidDisposeItem = this._onDidDisposeItem.event;\r\n        this.items = {};\r\n    }\r\n    ItemRegistry.prototype.register = function (item) {\r\n        Assert.ok(!this.isRegistered(item.id), 'item already registered: ' + item.id);\r\n        var disposable = combinedDisposable(this._onDidRevealItem.add(item.onDidReveal), this._onExpandItem.add(item.onExpand), this._onDidExpandItem.add(item.onDidExpand), this._onCollapseItem.add(item.onCollapse), this._onDidCollapseItem.add(item.onDidCollapse), this._onDidAddTraitItem.add(item.onDidAddTrait), this._onDidRemoveTraitItem.add(item.onDidRemoveTrait), this._onDidRefreshItem.add(item.onDidRefresh), this._onRefreshItemChildren.add(item.onRefreshChildren), this._onDidRefreshItemChildren.add(item.onDidRefreshChildren), this._onDidDisposeItem.add(item.onDidDispose));\r\n        this.items[item.id] = { item: item, disposable: disposable };\r\n    };\r\n    ItemRegistry.prototype.deregister = function (item) {\r\n        Assert.ok(this.isRegistered(item.id), 'item not registered: ' + item.id);\r\n        this.items[item.id].disposable.dispose();\r\n        delete this.items[item.id];\r\n    };\r\n    ItemRegistry.prototype.isRegistered = function (id) {\r\n        return this.items.hasOwnProperty(id);\r\n    };\r\n    ItemRegistry.prototype.getItem = function (id) {\r\n        var result = this.items[id];\r\n        return result ? result.item : null;\r\n    };\r\n    ItemRegistry.prototype.dispose = function () {\r\n        this.items = {};\r\n        this._onDidRevealItem.dispose();\r\n        this._onExpandItem.dispose();\r\n        this._onDidExpandItem.dispose();\r\n        this._onCollapseItem.dispose();\r\n        this._onDidCollapseItem.dispose();\r\n        this._onDidAddTraitItem.dispose();\r\n        this._onDidRemoveTraitItem.dispose();\r\n        this._onDidRefreshItem.dispose();\r\n        this._onRefreshItemChildren.dispose();\r\n        this._onDidRefreshItemChildren.dispose();\r\n        this._isDisposed = true;\r\n    };\r\n    ItemRegistry.prototype.isDisposed = function () {\r\n        return this._isDisposed;\r\n    };\r\n    return ItemRegistry;\r\n}());\r\nexport { ItemRegistry };\r\nvar Item = /** @class */ (function () {\r\n    function Item(id, registry, context, lock, element) {\r\n        this._onDidCreate = new Emitter();\r\n        this._onDidReveal = new Emitter();\r\n        this.onDidReveal = this._onDidReveal.event;\r\n        this._onExpand = new Emitter();\r\n        this.onExpand = this._onExpand.event;\r\n        this._onDidExpand = new Emitter();\r\n        this.onDidExpand = this._onDidExpand.event;\r\n        this._onCollapse = new Emitter();\r\n        this.onCollapse = this._onCollapse.event;\r\n        this._onDidCollapse = new Emitter();\r\n        this.onDidCollapse = this._onDidCollapse.event;\r\n        this._onDidAddTrait = new Emitter();\r\n        this.onDidAddTrait = this._onDidAddTrait.event;\r\n        this._onDidRemoveTrait = new Emitter();\r\n        this.onDidRemoveTrait = this._onDidRemoveTrait.event;\r\n        this._onDidRefresh = new Emitter();\r\n        this.onDidRefresh = this._onDidRefresh.event;\r\n        this._onRefreshChildren = new Emitter();\r\n        this.onRefreshChildren = this._onRefreshChildren.event;\r\n        this._onDidRefreshChildren = new Emitter();\r\n        this.onDidRefreshChildren = this._onDidRefreshChildren.event;\r\n        this._onDidDispose = new Emitter();\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        this.registry = registry;\r\n        this.context = context;\r\n        this.lock = lock;\r\n        this.element = element;\r\n        this.id = id;\r\n        this.registry.register(this);\r\n        this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\r\n        this.needsChildrenRefresh = true;\r\n        this.parent = null;\r\n        this.previous = null;\r\n        this.next = null;\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this.traits = {};\r\n        this.depth = 0;\r\n        this.expanded = !!(this.context.dataSource.shouldAutoexpand && this.context.dataSource.shouldAutoexpand(this.context.tree, element));\r\n        this._onDidCreate.fire(this);\r\n        this.visible = this._isVisible();\r\n        this.height = this._getHeight();\r\n        this._isDisposed = false;\r\n    }\r\n    Item.prototype.getElement = function () {\r\n        return this.element;\r\n    };\r\n    Item.prototype.hasChildren = function () {\r\n        return this.doesHaveChildren;\r\n    };\r\n    Item.prototype.getDepth = function () {\r\n        return this.depth;\r\n    };\r\n    Item.prototype.isVisible = function () {\r\n        return this.visible;\r\n    };\r\n    Item.prototype.setVisible = function (value) {\r\n        this.visible = value;\r\n    };\r\n    Item.prototype.isExpanded = function () {\r\n        return this.expanded;\r\n    };\r\n    /* protected */ Item.prototype._setExpanded = function (value) {\r\n        this.expanded = value;\r\n    };\r\n    Item.prototype.reveal = function (relativeTop) {\r\n        if (relativeTop === void 0) { relativeTop = null; }\r\n        var eventData = { item: this, relativeTop: relativeTop };\r\n        this._onDidReveal.fire(eventData);\r\n    };\r\n    Item.prototype.expand = function () {\r\n        var _this = this;\r\n        if (this.isExpanded() || !this.doesHaveChildren || this.lock.isLocked(this)) {\r\n            return Promise.resolve(false);\r\n        }\r\n        var result = this.lock.run(this, function () {\r\n            if (_this.isExpanded() || !_this.doesHaveChildren) {\r\n                return Promise.resolve(false);\r\n            }\r\n            var eventData = { item: _this };\r\n            var result;\r\n            _this._onExpand.fire(eventData);\r\n            if (_this.needsChildrenRefresh) {\r\n                result = _this.refreshChildren(false, true, true);\r\n            }\r\n            else {\r\n                result = Promise.resolve(null);\r\n            }\r\n            return result.then(function () {\r\n                _this._setExpanded(true);\r\n                _this._onDidExpand.fire(eventData);\r\n                return true;\r\n            });\r\n        });\r\n        return result.then(function (r) {\r\n            if (_this.isDisposed()) {\r\n                return false;\r\n            }\r\n            // Auto expand single child folders\r\n            if (_this.context.options.autoExpandSingleChildren && r && _this.firstChild !== null && _this.firstChild === _this.lastChild && _this.firstChild.isVisible()) {\r\n                return _this.firstChild.expand().then(function () { return true; });\r\n            }\r\n            return r;\r\n        });\r\n    };\r\n    Item.prototype.collapse = function (recursive) {\r\n        var _this = this;\r\n        if (recursive === void 0) { recursive = false; }\r\n        if (recursive) {\r\n            var collapseChildrenPromise_1 = Promise.resolve(null);\r\n            this.forEachChild(function (child) {\r\n                collapseChildrenPromise_1 = collapseChildrenPromise_1.then(function () { return child.collapse(true); });\r\n            });\r\n            return collapseChildrenPromise_1.then(function () {\r\n                return _this.collapse(false);\r\n            });\r\n        }\r\n        else {\r\n            if (!this.isExpanded() || this.lock.isLocked(this)) {\r\n                return Promise.resolve(false);\r\n            }\r\n            return this.lock.run(this, function () {\r\n                var eventData = { item: _this };\r\n                _this._onCollapse.fire(eventData);\r\n                _this._setExpanded(false);\r\n                _this._onDidCollapse.fire(eventData);\r\n                return Promise.resolve(true);\r\n            });\r\n        }\r\n    };\r\n    Item.prototype.addTrait = function (trait) {\r\n        var eventData = { item: this, trait: trait };\r\n        this.traits[trait] = true;\r\n        this._onDidAddTrait.fire(eventData);\r\n    };\r\n    Item.prototype.removeTrait = function (trait) {\r\n        var eventData = { item: this, trait: trait };\r\n        delete this.traits[trait];\r\n        this._onDidRemoveTrait.fire(eventData);\r\n    };\r\n    Item.prototype.hasTrait = function (trait) {\r\n        return this.traits[trait] || false;\r\n    };\r\n    Item.prototype.getAllTraits = function () {\r\n        var result = [];\r\n        var trait;\r\n        for (trait in this.traits) {\r\n            if (this.traits.hasOwnProperty(trait) && this.traits[trait]) {\r\n                result.push(trait);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Item.prototype.getHeight = function () {\r\n        return this.height;\r\n    };\r\n    Item.prototype.refreshChildren = function (recursive, safe, force) {\r\n        var _this = this;\r\n        if (safe === void 0) { safe = false; }\r\n        if (force === void 0) { force = false; }\r\n        if (!force && !this.isExpanded()) {\r\n            var setNeedsChildrenRefresh_1 = function (item) {\r\n                item.needsChildrenRefresh = true;\r\n                item.forEachChild(setNeedsChildrenRefresh_1);\r\n            };\r\n            setNeedsChildrenRefresh_1(this);\r\n            return Promise.resolve(this);\r\n        }\r\n        this.needsChildrenRefresh = false;\r\n        var doRefresh = function () {\r\n            var eventData = { item: _this, isNested: safe };\r\n            _this._onRefreshChildren.fire(eventData);\r\n            var childrenPromise;\r\n            if (_this.doesHaveChildren) {\r\n                childrenPromise = _this.context.dataSource.getChildren(_this.context.tree, _this.element);\r\n            }\r\n            else {\r\n                childrenPromise = Promise.resolve([]);\r\n            }\r\n            var result = childrenPromise.then(function (elements) {\r\n                if (_this.isDisposed() || _this.registry.isDisposed()) {\r\n                    return Promise.resolve(null);\r\n                }\r\n                if (!Array.isArray(elements)) {\r\n                    return Promise.reject(new Error('Please return an array of children.'));\r\n                }\r\n                elements = !elements ? [] : elements.slice(0);\r\n                elements = _this.sort(elements);\r\n                var staleItems = {};\r\n                while (_this.firstChild !== null) {\r\n                    staleItems[_this.firstChild.id] = _this.firstChild;\r\n                    _this.removeChild(_this.firstChild);\r\n                }\r\n                for (var i = 0, len = elements.length; i < len; i++) {\r\n                    var element = elements[i];\r\n                    var id = _this.context.dataSource.getId(_this.context.tree, element);\r\n                    var item = staleItems[id] || new Item(id, _this.registry, _this.context, _this.lock, element);\r\n                    item.element = element;\r\n                    if (recursive) {\r\n                        item.needsChildrenRefresh = recursive;\r\n                    }\r\n                    delete staleItems[id];\r\n                    _this.addChild(item);\r\n                }\r\n                for (var staleItemId in staleItems) {\r\n                    if (staleItems.hasOwnProperty(staleItemId)) {\r\n                        staleItems[staleItemId].dispose();\r\n                    }\r\n                }\r\n                if (recursive) {\r\n                    return Promise.all(_this.mapEachChild(function (child) {\r\n                        return child.doRefresh(recursive, true);\r\n                    }));\r\n                }\r\n                else {\r\n                    return Promise.all(_this.mapEachChild(function (child) {\r\n                        if (child.isExpanded() && child.needsChildrenRefresh) {\r\n                            return child.doRefresh(recursive, true);\r\n                        }\r\n                        else {\r\n                            child.updateVisibility();\r\n                            return Promise.resolve(null);\r\n                        }\r\n                    }));\r\n                }\r\n            });\r\n            return result\r\n                .then(undefined, onUnexpectedError)\r\n                .then(function () { return _this._onDidRefreshChildren.fire(eventData); });\r\n        };\r\n        return safe ? doRefresh() : this.lock.run(this, doRefresh);\r\n    };\r\n    Item.prototype.doRefresh = function (recursive, safe) {\r\n        if (safe === void 0) { safe = false; }\r\n        this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\r\n        this.height = this._getHeight();\r\n        this.updateVisibility();\r\n        this._onDidRefresh.fire(this);\r\n        return this.refreshChildren(recursive, safe);\r\n    };\r\n    Item.prototype.updateVisibility = function () {\r\n        this.setVisible(this._isVisible());\r\n    };\r\n    Item.prototype.refresh = function (recursive) {\r\n        return this.doRefresh(recursive);\r\n    };\r\n    Item.prototype.getNavigator = function () {\r\n        return new TreeNavigator(this);\r\n    };\r\n    Item.prototype.intersects = function (other) {\r\n        return this.isAncestorOf(other) || other.isAncestorOf(this);\r\n    };\r\n    Item.prototype.isAncestorOf = function (startItem) {\r\n        var item = startItem;\r\n        while (item) {\r\n            if (item.id === this.id) {\r\n                return true;\r\n            }\r\n            item = item.parent;\r\n        }\r\n        return false;\r\n    };\r\n    Item.prototype.addChild = function (item, afterItem) {\r\n        if (afterItem === void 0) { afterItem = this.lastChild; }\r\n        var isEmpty = this.firstChild === null;\r\n        var atHead = afterItem === null;\r\n        var atTail = afterItem === this.lastChild;\r\n        if (isEmpty) {\r\n            this.firstChild = this.lastChild = item;\r\n            item.next = item.previous = null;\r\n        }\r\n        else if (atHead) {\r\n            if (!this.firstChild) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            this.firstChild.previous = item;\r\n            item.next = this.firstChild;\r\n            item.previous = null;\r\n            this.firstChild = item;\r\n        }\r\n        else if (atTail) {\r\n            if (!this.lastChild) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            this.lastChild.next = item;\r\n            item.next = null;\r\n            item.previous = this.lastChild;\r\n            this.lastChild = item;\r\n        }\r\n        else {\r\n            item.previous = afterItem;\r\n            if (!afterItem) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            item.next = afterItem.next;\r\n            if (!afterItem.next) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            afterItem.next.previous = item;\r\n            afterItem.next = item;\r\n        }\r\n        item.parent = this;\r\n        item.depth = this.depth + 1;\r\n    };\r\n    Item.prototype.removeChild = function (item) {\r\n        var isFirstChild = this.firstChild === item;\r\n        var isLastChild = this.lastChild === item;\r\n        if (isFirstChild && isLastChild) {\r\n            this.firstChild = this.lastChild = null;\r\n        }\r\n        else if (isFirstChild) {\r\n            if (!item.next) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            item.next.previous = null;\r\n            this.firstChild = item.next;\r\n        }\r\n        else if (isLastChild) {\r\n            if (!item.previous) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            item.previous.next = null;\r\n            this.lastChild = item.previous;\r\n        }\r\n        else {\r\n            if (!item.next) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            item.next.previous = item.previous;\r\n            if (!item.previous) {\r\n                throw new Error('Invalid tree state');\r\n            }\r\n            item.previous.next = item.next;\r\n        }\r\n        item.parent = null;\r\n        item.depth = NaN;\r\n    };\r\n    Item.prototype.forEachChild = function (fn) {\r\n        var child = this.firstChild;\r\n        var next;\r\n        while (child) {\r\n            next = child.next;\r\n            fn(child);\r\n            child = next;\r\n        }\r\n    };\r\n    Item.prototype.mapEachChild = function (fn) {\r\n        var result = [];\r\n        this.forEachChild(function (child) {\r\n            result.push(fn(child));\r\n        });\r\n        return result;\r\n    };\r\n    Item.prototype.sort = function (elements) {\r\n        var _this = this;\r\n        var sorter = this.context.sorter;\r\n        if (sorter) {\r\n            return elements.sort(function (element, otherElement) {\r\n                return sorter.compare(_this.context.tree, element, otherElement);\r\n            });\r\n        }\r\n        return elements;\r\n    };\r\n    /* protected */ Item.prototype._getHeight = function () {\r\n        if (!this.context.renderer) {\r\n            return 0;\r\n        }\r\n        return this.context.renderer.getHeight(this.context.tree, this.element);\r\n    };\r\n    /* protected */ Item.prototype._isVisible = function () {\r\n        if (!this.context.filter) {\r\n            return false;\r\n        }\r\n        return this.context.filter.isVisible(this.context.tree, this.element);\r\n    };\r\n    Item.prototype.isDisposed = function () {\r\n        return this._isDisposed;\r\n    };\r\n    Item.prototype.dispose = function () {\r\n        this.forEachChild(function (child) { return child.dispose(); });\r\n        this.parent = null;\r\n        this.previous = null;\r\n        this.next = null;\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this._onDidDispose.fire(this);\r\n        this.registry.deregister(this);\r\n        this._onDidCreate.dispose();\r\n        this._onDidReveal.dispose();\r\n        this._onExpand.dispose();\r\n        this._onDidExpand.dispose();\r\n        this._onCollapse.dispose();\r\n        this._onDidCollapse.dispose();\r\n        this._onDidAddTrait.dispose();\r\n        this._onDidRemoveTrait.dispose();\r\n        this._onDidRefresh.dispose();\r\n        this._onRefreshChildren.dispose();\r\n        this._onDidRefreshChildren.dispose();\r\n        this._onDidDispose.dispose();\r\n        this._isDisposed = true;\r\n    };\r\n    return Item;\r\n}());\r\nexport { Item };\r\nvar RootItem = /** @class */ (function (_super) {\r\n    __extends(RootItem, _super);\r\n    function RootItem(id, registry, context, lock, element) {\r\n        return _super.call(this, id, registry, context, lock, element) || this;\r\n    }\r\n    RootItem.prototype.isVisible = function () {\r\n        return false;\r\n    };\r\n    RootItem.prototype.setVisible = function (value) {\r\n        // no-op\r\n    };\r\n    RootItem.prototype.isExpanded = function () {\r\n        return true;\r\n    };\r\n    /* protected */ RootItem.prototype._setExpanded = function (value) {\r\n        // no-op\r\n    };\r\n    /* protected */ RootItem.prototype._getHeight = function () {\r\n        return 0;\r\n    };\r\n    /* protected */ RootItem.prototype._isVisible = function () {\r\n        return false;\r\n    };\r\n    return RootItem;\r\n}(Item));\r\nvar TreeNavigator = /** @class */ (function () {\r\n    function TreeNavigator(item, subTreeOnly) {\r\n        if (subTreeOnly === void 0) { subTreeOnly = true; }\r\n        this.item = item;\r\n        this.start = subTreeOnly ? item : null;\r\n    }\r\n    TreeNavigator.lastDescendantOf = function (item) {\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        if (item instanceof RootItem) {\r\n            return TreeNavigator.lastDescendantOf(item.lastChild);\r\n        }\r\n        if (!item.isVisible()) {\r\n            return TreeNavigator.lastDescendantOf(item.previous);\r\n        }\r\n        if (!item.isExpanded() || item.lastChild === null) {\r\n            return item;\r\n        }\r\n        return TreeNavigator.lastDescendantOf(item.lastChild);\r\n    };\r\n    TreeNavigator.prototype.current = function () {\r\n        return this.item || null;\r\n    };\r\n    TreeNavigator.prototype.next = function () {\r\n        if (this.item) {\r\n            do {\r\n                if ((this.item instanceof RootItem || (this.item.isVisible() && this.item.isExpanded())) && this.item.firstChild) {\r\n                    this.item = this.item.firstChild;\r\n                }\r\n                else if (this.item === this.start) {\r\n                    this.item = null;\r\n                }\r\n                else {\r\n                    // select next brother, next uncle, next great-uncle, etc...\r\n                    while (this.item && this.item !== this.start && !this.item.next) {\r\n                        this.item = this.item.parent;\r\n                    }\r\n                    if (this.item === this.start) {\r\n                        this.item = null;\r\n                    }\r\n                    this.item = !this.item ? null : this.item.next;\r\n                }\r\n            } while (this.item && !this.item.isVisible());\r\n        }\r\n        return this.item || null;\r\n    };\r\n    TreeNavigator.prototype.previous = function () {\r\n        if (this.item) {\r\n            do {\r\n                var previous = TreeNavigator.lastDescendantOf(this.item.previous);\r\n                if (previous) {\r\n                    this.item = previous;\r\n                }\r\n                else if (this.item.parent && this.item.parent !== this.start && this.item.parent.isVisible()) {\r\n                    this.item = this.item.parent;\r\n                }\r\n                else {\r\n                    this.item = null;\r\n                }\r\n            } while (this.item && !this.item.isVisible());\r\n        }\r\n        return this.item || null;\r\n    };\r\n    TreeNavigator.prototype.parent = function () {\r\n        if (this.item) {\r\n            var parent_1 = this.item.parent;\r\n            if (parent_1 && parent_1 !== this.start && parent_1.isVisible()) {\r\n                this.item = parent_1;\r\n            }\r\n            else {\r\n                this.item = null;\r\n            }\r\n        }\r\n        return this.item || null;\r\n    };\r\n    TreeNavigator.prototype.first = function () {\r\n        this.item = this.start;\r\n        this.next();\r\n        return this.item || null;\r\n    };\r\n    TreeNavigator.prototype.last = function () {\r\n        return TreeNavigator.lastDescendantOf(this.start);\r\n    };\r\n    return TreeNavigator;\r\n}());\r\nexport { TreeNavigator };\r\nvar TreeModel = /** @class */ (function () {\r\n    function TreeModel(context) {\r\n        this.registry = new ItemRegistry();\r\n        this.registryDisposable = Disposable.None;\r\n        this._onSetInput = new Emitter();\r\n        this.onSetInput = this._onSetInput.event;\r\n        this._onDidSetInput = new Emitter();\r\n        this.onDidSetInput = this._onDidSetInput.event;\r\n        this._onRefresh = new Emitter();\r\n        this.onRefresh = this._onRefresh.event;\r\n        this._onDidRefresh = new Emitter();\r\n        this.onDidRefresh = this._onDidRefresh.event;\r\n        this._onDidHighlight = new Emitter();\r\n        this.onDidHighlight = this._onDidHighlight.event;\r\n        this._onDidSelect = new Emitter();\r\n        this.onDidSelect = this._onDidSelect.event;\r\n        this._onDidFocus = new Emitter();\r\n        this.onDidFocus = this._onDidFocus.event;\r\n        this._onDidRevealItem = new Relay();\r\n        this.onDidRevealItem = this._onDidRevealItem.event;\r\n        this._onExpandItem = new Relay();\r\n        this.onExpandItem = this._onExpandItem.event;\r\n        this._onDidExpandItem = new Relay();\r\n        this.onDidExpandItem = this._onDidExpandItem.event;\r\n        this._onCollapseItem = new Relay();\r\n        this.onCollapseItem = this._onCollapseItem.event;\r\n        this._onDidCollapseItem = new Relay();\r\n        this.onDidCollapseItem = this._onDidCollapseItem.event;\r\n        this._onDidAddTraitItem = new Relay();\r\n        this.onDidAddTraitItem = this._onDidAddTraitItem.event;\r\n        this._onDidRemoveTraitItem = new Relay();\r\n        this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\r\n        this._onDidRefreshItem = new Relay();\r\n        this.onDidRefreshItem = this._onDidRefreshItem.event;\r\n        this._onRefreshItemChildren = new Relay();\r\n        this.onRefreshItemChildren = this._onRefreshItemChildren.event;\r\n        this._onDidRefreshItemChildren = new Relay();\r\n        this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\r\n        this._onDidDisposeItem = new Relay();\r\n        this.context = context;\r\n        this.input = null;\r\n        this.traitsToItems = {};\r\n    }\r\n    TreeModel.prototype.setInput = function (element) {\r\n        var _this = this;\r\n        var eventData = { item: this.input };\r\n        this._onSetInput.fire(eventData);\r\n        this.setSelection([]);\r\n        this.setFocus();\r\n        this.setHighlight();\r\n        this.lock = new Lock();\r\n        if (this.input) {\r\n            this.input.dispose();\r\n        }\r\n        if (this.registry) {\r\n            this.registry.dispose();\r\n            this.registryDisposable.dispose();\r\n        }\r\n        this.registry = new ItemRegistry();\r\n        this._onDidRevealItem.input = this.registry.onDidRevealItem;\r\n        this._onExpandItem.input = this.registry.onExpandItem;\r\n        this._onDidExpandItem.input = this.registry.onDidExpandItem;\r\n        this._onCollapseItem.input = this.registry.onCollapseItem;\r\n        this._onDidCollapseItem.input = this.registry.onDidCollapseItem;\r\n        this._onDidAddTraitItem.input = this.registry.onDidAddTraitItem;\r\n        this._onDidRemoveTraitItem.input = this.registry.onDidRemoveTraitItem;\r\n        this._onDidRefreshItem.input = this.registry.onDidRefreshItem;\r\n        this._onRefreshItemChildren.input = this.registry.onRefreshItemChildren;\r\n        this._onDidRefreshItemChildren.input = this.registry.onDidRefreshItemChildren;\r\n        this._onDidDisposeItem.input = this.registry.onDidDisposeItem;\r\n        this.registryDisposable = this.registry\r\n            .onDidDisposeItem(function (item) { return item.getAllTraits().forEach(function (trait) { return delete _this.traitsToItems[trait][item.id]; }); });\r\n        var id = this.context.dataSource.getId(this.context.tree, element);\r\n        this.input = new RootItem(id, this.registry, this.context, this.lock, element);\r\n        eventData = { item: this.input };\r\n        this._onDidSetInput.fire(eventData);\r\n        return this.refresh(this.input);\r\n    };\r\n    TreeModel.prototype.getInput = function () {\r\n        return this.input ? this.input.getElement() : null;\r\n    };\r\n    TreeModel.prototype.refresh = function (element, recursive) {\r\n        var _this = this;\r\n        if (element === void 0) { element = null; }\r\n        if (recursive === void 0) { recursive = true; }\r\n        var item = this.getItem(element);\r\n        if (!item) {\r\n            return Promise.resolve(null);\r\n        }\r\n        var eventData = { item: item, recursive: recursive };\r\n        this._onRefresh.fire(eventData);\r\n        return item.refresh(recursive).then(function () {\r\n            _this._onDidRefresh.fire(eventData);\r\n        });\r\n    };\r\n    TreeModel.prototype.expand = function (element) {\r\n        var item = this.getItem(element);\r\n        if (!item) {\r\n            return Promise.resolve(false);\r\n        }\r\n        return item.expand();\r\n    };\r\n    TreeModel.prototype.collapse = function (element, recursive) {\r\n        if (recursive === void 0) { recursive = false; }\r\n        var item = this.getItem(element);\r\n        if (!item) {\r\n            return Promise.resolve(false);\r\n        }\r\n        return item.collapse(recursive);\r\n    };\r\n    TreeModel.prototype.toggleExpansion = function (element, recursive) {\r\n        if (recursive === void 0) { recursive = false; }\r\n        return this.isExpanded(element) ? this.collapse(element, recursive) : this.expand(element);\r\n    };\r\n    TreeModel.prototype.isExpanded = function (element) {\r\n        var item = this.getItem(element);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        return item.isExpanded();\r\n    };\r\n    TreeModel.prototype.reveal = function (element, relativeTop) {\r\n        var _this = this;\r\n        if (relativeTop === void 0) { relativeTop = null; }\r\n        return this.resolveUnknownParentChain(element).then(function (chain) {\r\n            var result = Promise.resolve(null);\r\n            chain.forEach(function (e) {\r\n                result = result.then(function () { return _this.expand(e); });\r\n            });\r\n            return result;\r\n        }).then(function () {\r\n            var item = _this.getItem(element);\r\n            if (item) {\r\n                return item.reveal(relativeTop);\r\n            }\r\n        });\r\n    };\r\n    TreeModel.prototype.resolveUnknownParentChain = function (element) {\r\n        var _this = this;\r\n        return this.context.dataSource.getParent(this.context.tree, element).then(function (parent) {\r\n            if (!parent) {\r\n                return Promise.resolve([]);\r\n            }\r\n            return _this.resolveUnknownParentChain(parent).then(function (result) {\r\n                result.push(parent);\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    TreeModel.prototype.setHighlight = function (element, eventPayload) {\r\n        this.setTraits('highlighted', element ? [element] : []);\r\n        var eventData = { highlight: this.getHighlight(), payload: eventPayload };\r\n        this._onDidHighlight.fire(eventData);\r\n    };\r\n    TreeModel.prototype.getHighlight = function (includeHidden) {\r\n        if (includeHidden === void 0) { includeHidden = false; }\r\n        var result = this.getElementsWithTrait('highlighted', includeHidden);\r\n        return result.length === 0 ? null : result[0];\r\n    };\r\n    TreeModel.prototype.setSelection = function (elements, eventPayload) {\r\n        this.setTraits('selected', elements);\r\n        var eventData = { selection: this.getSelection(), payload: eventPayload };\r\n        this._onDidSelect.fire(eventData);\r\n    };\r\n    TreeModel.prototype.getSelection = function (includeHidden) {\r\n        if (includeHidden === void 0) { includeHidden = false; }\r\n        return this.getElementsWithTrait('selected', includeHidden);\r\n    };\r\n    TreeModel.prototype.setFocus = function (element, eventPayload) {\r\n        this.setTraits('focused', element ? [element] : []);\r\n        var eventData = { focus: this.getFocus(), payload: eventPayload };\r\n        this._onDidFocus.fire(eventData);\r\n    };\r\n    TreeModel.prototype.getFocus = function (includeHidden) {\r\n        if (includeHidden === void 0) { includeHidden = false; }\r\n        var result = this.getElementsWithTrait('focused', includeHidden);\r\n        return result.length === 0 ? null : result[0];\r\n    };\r\n    TreeModel.prototype.focusNext = function (count, eventPayload) {\r\n        if (count === void 0) { count = 1; }\r\n        var item = this.getFocus() || this.input;\r\n        var nextItem;\r\n        var nav = this.getNavigator(item, false);\r\n        for (var i = 0; i < count; i++) {\r\n            nextItem = nav.next();\r\n            if (!nextItem) {\r\n                break;\r\n            }\r\n            item = nextItem;\r\n        }\r\n        this.setFocus(item, eventPayload);\r\n    };\r\n    TreeModel.prototype.focusPrevious = function (count, eventPayload) {\r\n        if (count === void 0) { count = 1; }\r\n        var item = this.getFocus() || this.input;\r\n        var previousItem;\r\n        var nav = this.getNavigator(item, false);\r\n        for (var i = 0; i < count; i++) {\r\n            previousItem = nav.previous();\r\n            if (!previousItem) {\r\n                break;\r\n            }\r\n            item = previousItem;\r\n        }\r\n        this.setFocus(item, eventPayload);\r\n    };\r\n    TreeModel.prototype.focusParent = function (eventPayload) {\r\n        var item = this.getFocus() || this.input;\r\n        var nav = this.getNavigator(item, false);\r\n        var parent = nav.parent();\r\n        if (parent) {\r\n            this.setFocus(parent, eventPayload);\r\n        }\r\n    };\r\n    TreeModel.prototype.focusFirstChild = function (eventPayload) {\r\n        var item = this.getItem(this.getFocus() || this.input);\r\n        var nav = this.getNavigator(item, false);\r\n        var next = nav.next();\r\n        var parent = nav.parent();\r\n        if (parent === item) {\r\n            this.setFocus(next, eventPayload);\r\n        }\r\n    };\r\n    TreeModel.prototype.focusFirst = function (eventPayload, from) {\r\n        this.focusNth(0, eventPayload, from);\r\n    };\r\n    TreeModel.prototype.focusNth = function (index, eventPayload, from) {\r\n        var navItem = this.getParent(from);\r\n        var nav = this.getNavigator(navItem);\r\n        var item = nav.first();\r\n        for (var i = 0; i < index; i++) {\r\n            item = nav.next();\r\n        }\r\n        if (item) {\r\n            this.setFocus(item, eventPayload);\r\n        }\r\n    };\r\n    TreeModel.prototype.focusLast = function (eventPayload, from) {\r\n        var navItem = this.getParent(from);\r\n        var item;\r\n        if (from && navItem) {\r\n            item = navItem.lastChild;\r\n        }\r\n        else {\r\n            var nav = this.getNavigator(navItem);\r\n            item = nav.last();\r\n        }\r\n        if (item) {\r\n            this.setFocus(item, eventPayload);\r\n        }\r\n    };\r\n    TreeModel.prototype.getParent = function (from) {\r\n        if (from) {\r\n            var fromItem = this.getItem(from);\r\n            if (fromItem && fromItem.parent) {\r\n                return fromItem.parent;\r\n            }\r\n        }\r\n        return this.getItem(this.input);\r\n    };\r\n    TreeModel.prototype.getNavigator = function (element, subTreeOnly) {\r\n        if (element === void 0) { element = null; }\r\n        if (subTreeOnly === void 0) { subTreeOnly = true; }\r\n        return new TreeNavigator(this.getItem(element), subTreeOnly);\r\n    };\r\n    TreeModel.prototype.getItem = function (element) {\r\n        if (element === void 0) { element = null; }\r\n        if (element === null) {\r\n            return this.input;\r\n        }\r\n        else if (element instanceof Item) {\r\n            return element;\r\n        }\r\n        else if (typeof element === 'string') {\r\n            return this.registry.getItem(element);\r\n        }\r\n        else {\r\n            return this.registry.getItem(this.context.dataSource.getId(this.context.tree, element));\r\n        }\r\n    };\r\n    TreeModel.prototype.removeTraits = function (trait, elements) {\r\n        var items = this.traitsToItems[trait] || {};\r\n        var item;\r\n        var id;\r\n        if (elements.length === 0) {\r\n            for (id in items) {\r\n                if (items.hasOwnProperty(id)) {\r\n                    item = items[id];\r\n                    item.removeTrait(trait);\r\n                }\r\n            }\r\n            delete this.traitsToItems[trait];\r\n        }\r\n        else {\r\n            for (var i = 0, len = elements.length; i < len; i++) {\r\n                item = this.getItem(elements[i]);\r\n                if (item) {\r\n                    item.removeTrait(trait);\r\n                    delete items[item.id];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TreeModel.prototype.setTraits = function (trait, elements) {\r\n        if (elements.length === 0) {\r\n            this.removeTraits(trait, elements);\r\n        }\r\n        else {\r\n            var items = {};\r\n            var item = void 0;\r\n            for (var i = 0, len = elements.length; i < len; i++) {\r\n                item = this.getItem(elements[i]);\r\n                if (item) {\r\n                    items[item.id] = item;\r\n                }\r\n            }\r\n            var traitItems = this.traitsToItems[trait] || {};\r\n            var itemsToRemoveTrait = [];\r\n            var id = void 0;\r\n            for (id in traitItems) {\r\n                if (traitItems.hasOwnProperty(id)) {\r\n                    if (items.hasOwnProperty(id)) {\r\n                        delete items[id];\r\n                    }\r\n                    else {\r\n                        itemsToRemoveTrait.push(traitItems[id]);\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0, len = itemsToRemoveTrait.length; i < len; i++) {\r\n                item = itemsToRemoveTrait[i];\r\n                item.removeTrait(trait);\r\n                delete traitItems[item.id];\r\n            }\r\n            for (id in items) {\r\n                if (items.hasOwnProperty(id)) {\r\n                    item = items[id];\r\n                    item.addTrait(trait);\r\n                    traitItems[id] = item;\r\n                }\r\n            }\r\n            this.traitsToItems[trait] = traitItems;\r\n        }\r\n    };\r\n    TreeModel.prototype.getElementsWithTrait = function (trait, includeHidden) {\r\n        var elements = [];\r\n        var items = this.traitsToItems[trait] || {};\r\n        var id;\r\n        for (id in items) {\r\n            if (items.hasOwnProperty(id) && (items[id].isVisible() || includeHidden)) {\r\n                elements.push(items[id].getElement());\r\n            }\r\n        }\r\n        return elements;\r\n    };\r\n    TreeModel.prototype.dispose = function () {\r\n        this.registry.dispose();\r\n        this._onSetInput.dispose();\r\n        this._onDidSetInput.dispose();\r\n        this._onRefresh.dispose();\r\n        this._onDidRefresh.dispose();\r\n        this._onDidHighlight.dispose();\r\n        this._onDidSelect.dispose();\r\n        this._onDidFocus.dispose();\r\n        this._onDidRevealItem.dispose();\r\n        this._onExpandItem.dispose();\r\n        this._onDidExpandItem.dispose();\r\n        this._onCollapseItem.dispose();\r\n        this._onDidCollapseItem.dispose();\r\n        this._onDidAddTraitItem.dispose();\r\n        this._onDidRemoveTraitItem.dispose();\r\n        this._onDidRefreshItem.dispose();\r\n        this._onRefreshItemChildren.dispose();\r\n        this._onDidRefreshItemChildren.dispose();\r\n        this._onDidDisposeItem.dispose();\r\n    };\r\n    return TreeModel;\r\n}());\r\nexport { TreeModel };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}