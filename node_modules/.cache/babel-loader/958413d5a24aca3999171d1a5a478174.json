{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Configuration } from '../config/configuration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view/viewImpl.js';\nimport { ViewOutgoingEvents } from '../view/viewOutgoingEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { Cursor } from '../../common/controller/cursor.js';\nimport { CursorColumns } from '../../common/controller/cursorCommon.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport * as modes from '../../common/modes.js';\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/view/editorColorRegistry.js';\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nvar EDITOR_ID = 0;\nvar ModelData = /** @class */function () {\n  function ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove) {\n    this.model = model;\n    this.viewModel = viewModel;\n    this.cursor = cursor;\n    this.view = view;\n    this.hasRealView = hasRealView;\n    this.listenersToRemove = listenersToRemove;\n  }\n  ModelData.prototype.dispose = function () {\n    dispose(this.listenersToRemove);\n    this.model.onBeforeDetached();\n    if (this.hasRealView) {\n      this.view.dispose();\n    }\n    this.cursor.dispose();\n    this.viewModel.dispose();\n  };\n  return ModelData;\n}();\nvar CodeEditorWidget = /** @class */function (_super) {\n  __extends(CodeEditorWidget, _super);\n  function CodeEditorWidget(domElement, options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\n    var _this = _super.call(this) || this;\n    //#region Eventing\n    _this._onDidDispose = _this._register(new Emitter());\n    _this.onDidDispose = _this._onDidDispose.event;\n    _this._onDidChangeModelContent = _this._register(new Emitter());\n    _this.onDidChangeModelContent = _this._onDidChangeModelContent.event;\n    _this._onDidChangeModelLanguage = _this._register(new Emitter());\n    _this.onDidChangeModelLanguage = _this._onDidChangeModelLanguage.event;\n    _this._onDidChangeModelLanguageConfiguration = _this._register(new Emitter());\n    _this.onDidChangeModelLanguageConfiguration = _this._onDidChangeModelLanguageConfiguration.event;\n    _this._onDidChangeModelOptions = _this._register(new Emitter());\n    _this.onDidChangeModelOptions = _this._onDidChangeModelOptions.event;\n    _this._onDidChangeModelDecorations = _this._register(new Emitter());\n    _this.onDidChangeModelDecorations = _this._onDidChangeModelDecorations.event;\n    _this._onDidChangeConfiguration = _this._register(new Emitter());\n    _this.onDidChangeConfiguration = _this._onDidChangeConfiguration.event;\n    _this._onDidChangeModel = _this._register(new Emitter());\n    _this.onDidChangeModel = _this._onDidChangeModel.event;\n    _this._onDidChangeCursorPosition = _this._register(new Emitter());\n    _this.onDidChangeCursorPosition = _this._onDidChangeCursorPosition.event;\n    _this._onDidChangeCursorSelection = _this._register(new Emitter());\n    _this.onDidChangeCursorSelection = _this._onDidChangeCursorSelection.event;\n    _this._onDidAttemptReadOnlyEdit = _this._register(new Emitter());\n    _this.onDidAttemptReadOnlyEdit = _this._onDidAttemptReadOnlyEdit.event;\n    _this._onDidLayoutChange = _this._register(new Emitter());\n    _this.onDidLayoutChange = _this._onDidLayoutChange.event;\n    _this._editorTextFocus = _this._register(new BooleanEventEmitter());\n    _this.onDidFocusEditorText = _this._editorTextFocus.onDidChangeToTrue;\n    _this.onDidBlurEditorText = _this._editorTextFocus.onDidChangeToFalse;\n    _this._editorWidgetFocus = _this._register(new BooleanEventEmitter());\n    _this.onDidFocusEditorWidget = _this._editorWidgetFocus.onDidChangeToTrue;\n    _this.onDidBlurEditorWidget = _this._editorWidgetFocus.onDidChangeToFalse;\n    _this._onWillType = _this._register(new Emitter());\n    _this.onWillType = _this._onWillType.event;\n    _this._onDidType = _this._register(new Emitter());\n    _this.onDidType = _this._onDidType.event;\n    _this._onDidCompositionStart = _this._register(new Emitter());\n    _this.onDidCompositionStart = _this._onDidCompositionStart.event;\n    _this._onDidCompositionEnd = _this._register(new Emitter());\n    _this.onDidCompositionEnd = _this._onDidCompositionEnd.event;\n    _this._onDidPaste = _this._register(new Emitter());\n    _this.onDidPaste = _this._onDidPaste.event;\n    _this._onMouseUp = _this._register(new Emitter());\n    _this.onMouseUp = _this._onMouseUp.event;\n    _this._onMouseDown = _this._register(new Emitter());\n    _this.onMouseDown = _this._onMouseDown.event;\n    _this._onMouseDrag = _this._register(new Emitter());\n    _this.onMouseDrag = _this._onMouseDrag.event;\n    _this._onMouseDrop = _this._register(new Emitter());\n    _this.onMouseDrop = _this._onMouseDrop.event;\n    _this._onContextMenu = _this._register(new Emitter());\n    _this.onContextMenu = _this._onContextMenu.event;\n    _this._onMouseMove = _this._register(new Emitter());\n    _this.onMouseMove = _this._onMouseMove.event;\n    _this._onMouseLeave = _this._register(new Emitter());\n    _this.onMouseLeave = _this._onMouseLeave.event;\n    _this._onMouseWheel = _this._register(new Emitter());\n    _this.onMouseWheel = _this._onMouseWheel.event;\n    _this._onKeyUp = _this._register(new Emitter());\n    _this.onKeyUp = _this._onKeyUp.event;\n    _this._onKeyDown = _this._register(new Emitter());\n    _this.onKeyDown = _this._onKeyDown.event;\n    _this._onDidContentSizeChange = _this._register(new Emitter());\n    _this.onDidContentSizeChange = _this._onDidContentSizeChange.event;\n    _this._onDidScrollChange = _this._register(new Emitter());\n    _this.onDidScrollChange = _this._onDidScrollChange.event;\n    _this._onDidChangeViewZones = _this._register(new Emitter());\n    _this.onDidChangeViewZones = _this._onDidChangeViewZones.event;\n    _this._domElement = domElement;\n    _this._id = ++EDITOR_ID;\n    _this._decorationTypeKeysToIds = {};\n    _this._decorationTypeSubtypes = {};\n    _this.isSimpleWidget = codeEditorWidgetOptions.isSimpleWidget || false;\n    _this._telemetryData = codeEditorWidgetOptions.telemetryData;\n    options = options || {};\n    _this._configuration = _this._register(_this._createConfiguration(options, accessibilityService));\n    _this._register(_this._configuration.onDidChange(function (e) {\n      _this._onDidChangeConfiguration.fire(e);\n      var options = _this._configuration.options;\n      if (e.hasChanged(107 /* layoutInfo */)) {\n        var layoutInfo = options.get(107 /* layoutInfo */);\n        _this._onDidLayoutChange.fire(layoutInfo);\n      }\n    }));\n    _this._contextKeyService = _this._register(contextKeyService.createScoped(_this._domElement));\n    _this._notificationService = notificationService;\n    _this._codeEditorService = codeEditorService;\n    _this._commandService = commandService;\n    _this._themeService = themeService;\n    _this._register(new EditorContextKeysManager(_this, _this._contextKeyService));\n    _this._register(new EditorModeContext(_this, _this._contextKeyService));\n    _this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, _this._contextKeyService]));\n    _this._modelData = null;\n    _this._contributions = {};\n    _this._actions = {};\n    _this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n    _this._focusTracker.onChange(function () {\n      _this._editorWidgetFocus.setValue(_this._focusTracker.hasFocus());\n    });\n    _this._contentWidgets = {};\n    _this._overlayWidgets = {};\n    var contributions;\n    if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n      contributions = codeEditorWidgetOptions.contributions;\n    } else {\n      contributions = EditorExtensionsRegistry.getEditorContributions();\n    }\n    for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\n      var desc = contributions_1[_i];\n      try {\n        var contribution = _this._instantiationService.createInstance(desc.ctor, _this);\n        _this._contributions[desc.id] = contribution;\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    EditorExtensionsRegistry.getEditorActions().forEach(function (action) {\n      var internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), function () {\n        return _this._instantiationService.invokeFunction(function (accessor) {\n          return Promise.resolve(action.runEditorCommand(accessor, _this, null));\n        });\n      }, _this._contextKeyService);\n      _this._actions[internalAction.id] = internalAction;\n    });\n    _this._codeEditorService.addCodeEditor(_this);\n    return _this;\n  }\n  CodeEditorWidget.prototype._createConfiguration = function (options, accessibilityService) {\n    return new Configuration(this.isSimpleWidget, options, this._domElement, accessibilityService);\n  };\n  CodeEditorWidget.prototype.getId = function () {\n    return this.getEditorType() + ':' + this._id;\n  };\n  CodeEditorWidget.prototype.getEditorType = function () {\n    return editorCommon.EditorType.ICodeEditor;\n  };\n  CodeEditorWidget.prototype.dispose = function () {\n    this._codeEditorService.removeCodeEditor(this);\n    this._focusTracker.dispose();\n    var keys = Object.keys(this._contributions);\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var contributionId = keys[i];\n      this._contributions[contributionId].dispose();\n    }\n    this._removeDecorationTypes();\n    this._postDetachModelCleanup(this._detachModel());\n    this._onDidDispose.fire();\n    _super.prototype.dispose.call(this);\n  };\n  CodeEditorWidget.prototype.invokeWithinContext = function (fn) {\n    return this._instantiationService.invokeFunction(fn);\n  };\n  CodeEditorWidget.prototype.updateOptions = function (newOptions) {\n    this._configuration.updateOptions(newOptions);\n  };\n  CodeEditorWidget.prototype.getOptions = function () {\n    return this._configuration.options;\n  };\n  CodeEditorWidget.prototype.getOption = function (id) {\n    return this._configuration.options.get(id);\n  };\n  CodeEditorWidget.prototype.getRawOptions = function () {\n    return this._configuration.getRawOptions();\n  };\n  CodeEditorWidget.prototype.getValue = function (options) {\n    if (options === void 0) {\n      options = null;\n    }\n    if (!this._modelData) {\n      return '';\n    }\n    var preserveBOM = options && options.preserveBOM ? true : false;\n    var eolPreference = 0 /* TextDefined */;\n    if (options && options.lineEnding && options.lineEnding === '\\n') {\n      eolPreference = 1 /* LF */;\n    } else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n      eolPreference = 2 /* CRLF */;\n    }\n\n    return this._modelData.model.getValue(eolPreference, preserveBOM);\n  };\n  CodeEditorWidget.prototype.setValue = function (newValue) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.model.setValue(newValue);\n  };\n  CodeEditorWidget.prototype.getModel = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.model;\n  };\n  CodeEditorWidget.prototype.setModel = function (_model) {\n    if (_model === void 0) {\n      _model = null;\n    }\n    var model = _model;\n    if (this._modelData === null && model === null) {\n      // Current model is the new model\n      return;\n    }\n    if (this._modelData && this._modelData.model === model) {\n      // Current model is the new model\n      return;\n    }\n    var hasTextFocus = this.hasTextFocus();\n    var detachedModel = this._detachModel();\n    this._attachModel(model);\n    if (hasTextFocus && this.hasModel()) {\n      this.focus();\n    }\n    var e = {\n      oldModelUrl: detachedModel ? detachedModel.uri : null,\n      newModelUrl: model ? model.uri : null\n    };\n    this._removeDecorationTypes();\n    this._onDidChangeModel.fire(e);\n    this._postDetachModelCleanup(detachedModel);\n  };\n  CodeEditorWidget.prototype._removeDecorationTypes = function () {\n    this._decorationTypeKeysToIds = {};\n    if (this._decorationTypeSubtypes) {\n      for (var decorationType in this._decorationTypeSubtypes) {\n        var subTypes = this._decorationTypeSubtypes[decorationType];\n        for (var subType in subTypes) {\n          this._removeDecorationType(decorationType + '-' + subType);\n        }\n      }\n      this._decorationTypeSubtypes = {};\n    }\n  };\n  CodeEditorWidget.prototype.getVisibleRanges = function () {\n    if (!this._modelData) {\n      return [];\n    }\n    return this._modelData.viewModel.getVisibleRanges();\n  };\n  CodeEditorWidget.prototype.getWhitespaces = function () {\n    if (!this._modelData) {\n      return [];\n    }\n    return this._modelData.viewModel.viewLayout.getWhitespaces();\n  };\n  CodeEditorWidget._getVerticalOffsetForPosition = function (modelData, modelLineNumber, modelColumn) {\n    var modelPosition = modelData.model.validatePosition({\n      lineNumber: modelLineNumber,\n      column: modelColumn\n    });\n    var viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n    return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n  };\n  CodeEditorWidget.prototype.getTopForLineNumber = function (lineNumber) {\n    if (!this._modelData) {\n      return -1;\n    }\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\n  };\n  CodeEditorWidget.prototype.getTopForPosition = function (lineNumber, column) {\n    if (!this._modelData) {\n      return -1;\n    }\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\n  };\n  CodeEditorWidget.prototype.setHiddenAreas = function (ranges) {\n    if (this._modelData) {\n      this._modelData.viewModel.setHiddenAreas(ranges.map(function (r) {\n        return Range.lift(r);\n      }));\n    }\n  };\n  CodeEditorWidget.prototype.getVisibleColumnFromPosition = function (rawPosition) {\n    if (!this._modelData) {\n      return rawPosition.column;\n    }\n    var position = this._modelData.model.validatePosition(rawPosition);\n    var tabSize = this._modelData.model.getOptions().tabSize;\n    return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n  };\n  CodeEditorWidget.prototype.getPosition = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.cursor.getPosition();\n  };\n  CodeEditorWidget.prototype.setPosition = function (position) {\n    if (!this._modelData) {\n      return;\n    }\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.cursor.setSelections('api', [{\n      selectionStartLineNumber: position.lineNumber,\n      selectionStartColumn: position.column,\n      positionLineNumber: position.lineNumber,\n      positionColumn: position.column\n    }]);\n  };\n  CodeEditorWidget.prototype._sendRevealRange = function (modelRange, verticalType, revealHorizontal, scrollType) {\n    if (!this._modelData) {\n      return;\n    }\n    if (!Range.isIRange(modelRange)) {\n      throw new Error('Invalid arguments');\n    }\n    var validatedModelRange = this._modelData.model.validateRange(modelRange);\n    var viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n    this._modelData.cursor.emitCursorRevealRange('api', viewRange, verticalType, revealHorizontal, scrollType);\n  };\n  CodeEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLine(lineNumber, 0 /* Simple */, scrollType);\n  };\n  CodeEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLine(lineNumber, 1 /* Center */, scrollType);\n  };\n  CodeEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n  };\n  CodeEditorWidget.prototype._revealLine = function (lineNumber, revealType, scrollType) {\n    if (typeof lineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n  };\n  CodeEditorWidget.prototype.revealPosition = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealPosition(position, 0 /* Simple */, true, scrollType);\n  };\n  CodeEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealPosition(position, 1 /* Center */, true, scrollType);\n  };\n  CodeEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\n  };\n  CodeEditorWidget.prototype._revealPosition = function (position, verticalType, revealHorizontal, scrollType) {\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n  };\n  CodeEditorWidget.prototype.getSelection = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.cursor.getSelection();\n  };\n  CodeEditorWidget.prototype.getSelections = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.cursor.getSelections();\n  };\n  CodeEditorWidget.prototype.setSelection = function (something) {\n    var isSelection = Selection.isISelection(something);\n    var isRange = Range.isIRange(something);\n    if (!isSelection && !isRange) {\n      throw new Error('Invalid arguments');\n    }\n    if (isSelection) {\n      this._setSelectionImpl(something);\n    } else if (isRange) {\n      // act as if it was an IRange\n      var selection = {\n        selectionStartLineNumber: something.startLineNumber,\n        selectionStartColumn: something.startColumn,\n        positionLineNumber: something.endLineNumber,\n        positionColumn: something.endColumn\n      };\n      this._setSelectionImpl(selection);\n    }\n  };\n  CodeEditorWidget.prototype._setSelectionImpl = function (sel) {\n    if (!this._modelData) {\n      return;\n    }\n    var selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n    this._modelData.cursor.setSelections('api', [selection]);\n  };\n  CodeEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\n  };\n  CodeEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\n  };\n  CodeEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n  };\n  CodeEditorWidget.prototype._revealLines = function (startLineNumber, endLineNumber, verticalType, scrollType) {\n    if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n  };\n  CodeEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    if (revealVerticalInCenter === void 0) {\n      revealVerticalInCenter = false;\n    }\n    if (revealHorizontal === void 0) {\n      revealHorizontal = true;\n    }\n    this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\n  };\n  CodeEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealRange(range, 1 /* Center */, true, scrollType);\n  };\n  CodeEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\n  };\n  CodeEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\n    if (scrollType === void 0) {\n      scrollType = 0 /* Smooth */;\n    }\n    this._revealRange(range, 3 /* Top */, true, scrollType);\n  };\n  CodeEditorWidget.prototype._revealRange = function (range, verticalType, revealHorizontal, scrollType) {\n    if (!Range.isIRange(range)) {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n  };\n  CodeEditorWidget.prototype.setSelections = function (ranges, source) {\n    if (source === void 0) {\n      source = 'api';\n    }\n    if (!this._modelData) {\n      return;\n    }\n    if (!ranges || ranges.length === 0) {\n      throw new Error('Invalid arguments');\n    }\n    for (var i = 0, len = ranges.length; i < len; i++) {\n      if (!Selection.isISelection(ranges[i])) {\n        throw new Error('Invalid arguments');\n      }\n    }\n    this._modelData.cursor.setSelections(source, ranges);\n  };\n  CodeEditorWidget.prototype.getContentWidth = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getContentWidth();\n  };\n  CodeEditorWidget.prototype.getScrollWidth = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getScrollWidth();\n  };\n  CodeEditorWidget.prototype.getScrollLeft = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n  };\n  CodeEditorWidget.prototype.getContentHeight = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getContentHeight();\n  };\n  CodeEditorWidget.prototype.getScrollHeight = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getScrollHeight();\n  };\n  CodeEditorWidget.prototype.getScrollTop = function () {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n  };\n  CodeEditorWidget.prototype.setScrollLeft = function (newScrollLeft) {\n    if (!this._modelData) {\n      return;\n    }\n    if (typeof newScrollLeft !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.viewModel.viewLayout.setScrollPositionNow({\n      scrollLeft: newScrollLeft\n    });\n  };\n  CodeEditorWidget.prototype.setScrollTop = function (newScrollTop) {\n    if (!this._modelData) {\n      return;\n    }\n    if (typeof newScrollTop !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.viewModel.viewLayout.setScrollPositionNow({\n      scrollTop: newScrollTop\n    });\n  };\n  CodeEditorWidget.prototype.setScrollPosition = function (position) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.viewLayout.setScrollPositionNow(position);\n  };\n  CodeEditorWidget.prototype.saveViewState = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    var contributionsState = {};\n    var keys = Object.keys(this._contributions);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n      var id = keys_1[_i];\n      var contribution = this._contributions[id];\n      if (typeof contribution.saveViewState === 'function') {\n        contributionsState[id] = contribution.saveViewState();\n      }\n    }\n    var cursorState = this._modelData.cursor.saveState();\n    var viewState = this._modelData.viewModel.saveState();\n    return {\n      cursorState: cursorState,\n      viewState: viewState,\n      contributionsState: contributionsState\n    };\n  };\n  CodeEditorWidget.prototype.restoreViewState = function (s) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    var codeEditorState = s;\n    if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n      var cursorState = codeEditorState.cursorState;\n      if (Array.isArray(cursorState)) {\n        this._modelData.cursor.restoreState(cursorState);\n      } else {\n        // Backwards compatibility\n        this._modelData.cursor.restoreState([cursorState]);\n      }\n      var contributionsState = codeEditorState.contributionsState || {};\n      var keys = Object.keys(this._contributions);\n      for (var i = 0, len = keys.length; i < len; i++) {\n        var id = keys[i];\n        var contribution = this._contributions[id];\n        if (typeof contribution.restoreViewState === 'function') {\n          contribution.restoreViewState(contributionsState[id]);\n        }\n      }\n      var reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n      this._modelData.view.restoreState(reducedState);\n    }\n  };\n  CodeEditorWidget.prototype.getContribution = function (id) {\n    return this._contributions[id] || null;\n  };\n  CodeEditorWidget.prototype.getActions = function () {\n    var result = [];\n    var keys = Object.keys(this._actions);\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var id = keys[i];\n      result.push(this._actions[id]);\n    }\n    return result;\n  };\n  CodeEditorWidget.prototype.getSupportedActions = function () {\n    var result = this.getActions();\n    result = result.filter(function (action) {\n      return action.isSupported();\n    });\n    return result;\n  };\n  CodeEditorWidget.prototype.getAction = function (id) {\n    return this._actions[id] || null;\n  };\n  CodeEditorWidget.prototype.trigger = function (source, handlerId, payload) {\n    payload = payload || {};\n    // Special case for typing\n    if (handlerId === editorCommon.Handler.Type) {\n      if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\n        // nothing to do\n        return;\n      }\n      if (source === 'keyboard') {\n        this._onWillType.fire(payload.text);\n      }\n      this._modelData.cursor.trigger(source, handlerId, payload);\n      if (source === 'keyboard') {\n        this._onDidType.fire(payload.text);\n      }\n      return;\n    }\n    // Special case for pasting\n    if (handlerId === editorCommon.Handler.Paste) {\n      if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\n        // nothing to do\n        return;\n      }\n      var startPosition = this._modelData.cursor.getSelection().getStartPosition();\n      this._modelData.cursor.trigger(source, handlerId, payload);\n      var endPosition = this._modelData.cursor.getSelection().getStartPosition();\n      if (source === 'keyboard') {\n        this._onDidPaste.fire({\n          range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n          mode: payload.mode\n        });\n      }\n      return;\n    }\n    var action = this.getAction(handlerId);\n    if (action) {\n      Promise.resolve(action.run()).then(undefined, onUnexpectedError);\n      return;\n    }\n    if (!this._modelData) {\n      return;\n    }\n    if (this._triggerEditorCommand(source, handlerId, payload)) {\n      return;\n    }\n    this._modelData.cursor.trigger(source, handlerId, payload);\n    if (handlerId === editorCommon.Handler.CompositionStart) {\n      this._onDidCompositionStart.fire();\n    }\n    if (handlerId === editorCommon.Handler.CompositionEnd) {\n      this._onDidCompositionEnd.fire();\n    }\n  };\n  CodeEditorWidget.prototype._triggerEditorCommand = function (source, handlerId, payload) {\n    var _this = this;\n    var command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n    if (command) {\n      payload = payload || {};\n      payload.source = source;\n      this._instantiationService.invokeFunction(function (accessor) {\n        Promise.resolve(command.runEditorCommand(accessor, _this, payload)).then(undefined, onUnexpectedError);\n      });\n      return true;\n    }\n    return false;\n  };\n  CodeEditorWidget.prototype._getCursors = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.cursor;\n  };\n  CodeEditorWidget.prototype.pushUndoStop = function () {\n    if (!this._modelData) {\n      return false;\n    }\n    if (this._configuration.options.get(68 /* readOnly */)) {\n      // read only editor => sorry!\n      return false;\n    }\n    this._modelData.model.pushStackElement();\n    return true;\n  };\n  CodeEditorWidget.prototype.executeEdits = function (source, edits, endCursorState) {\n    if (!this._modelData) {\n      return false;\n    }\n    if (this._configuration.options.get(68 /* readOnly */)) {\n      // read only editor => sorry!\n      return false;\n    }\n    var cursorStateComputer;\n    if (!endCursorState) {\n      cursorStateComputer = function cursorStateComputer() {\n        return null;\n      };\n    } else if (Array.isArray(endCursorState)) {\n      cursorStateComputer = function cursorStateComputer() {\n        return endCursorState;\n      };\n    } else {\n      cursorStateComputer = endCursorState;\n    }\n    this._modelData.cursor.executeEdits(source, edits, cursorStateComputer);\n    return true;\n  };\n  CodeEditorWidget.prototype.executeCommand = function (source, command) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommand, command);\n  };\n  CodeEditorWidget.prototype.executeCommands = function (source, commands) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommands, commands);\n  };\n  CodeEditorWidget.prototype.changeDecorations = function (callback) {\n    if (!this._modelData) {\n      // callback will not be called\n      return null;\n    }\n    return this._modelData.model.changeDecorations(callback, this._id);\n  };\n  CodeEditorWidget.prototype.getLineDecorations = function (lineNumber) {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n  };\n  CodeEditorWidget.prototype.deltaDecorations = function (oldDecorations, newDecorations) {\n    if (!this._modelData) {\n      return [];\n    }\n    if (oldDecorations.length === 0 && newDecorations.length === 0) {\n      return oldDecorations;\n    }\n    return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n  };\n  CodeEditorWidget.prototype.removeDecorations = function (decorationTypeKey) {\n    // remove decorations for type and sub type\n    var oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n    if (oldDecorationsIds) {\n      this.deltaDecorations(oldDecorationsIds, []);\n    }\n    if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeKeysToIds[decorationTypeKey];\n    }\n    if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeSubtypes[decorationTypeKey];\n    }\n  };\n  CodeEditorWidget.prototype.getLayoutInfo = function () {\n    var options = this._configuration.options;\n    var layoutInfo = options.get(107 /* layoutInfo */);\n    return layoutInfo;\n  };\n  CodeEditorWidget.prototype.createOverviewRuler = function (cssClassName) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.createOverviewRuler(cssClassName);\n  };\n  CodeEditorWidget.prototype.getContainerDomNode = function () {\n    return this._domElement;\n  };\n  CodeEditorWidget.prototype.getDomNode = function () {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.domNode.domNode;\n  };\n  CodeEditorWidget.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\n  };\n  CodeEditorWidget.prototype.layout = function (dimension) {\n    this._configuration.observeReferenceElement(dimension);\n    this.render();\n  };\n  CodeEditorWidget.prototype.focus = function () {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.focus();\n  };\n  CodeEditorWidget.prototype.hasTextFocus = function () {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return false;\n    }\n    return this._modelData.view.isFocused();\n  };\n  CodeEditorWidget.prototype.hasWidgetFocus = function () {\n    return this._focusTracker && this._focusTracker.hasFocus();\n  };\n  CodeEditorWidget.prototype.addContentWidget = function (widget) {\n    var widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n    if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting a content widget with the same id.');\n    }\n    this._contentWidgets[widget.getId()] = widgetData;\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addContentWidget(widgetData);\n    }\n  };\n  CodeEditorWidget.prototype.layoutContentWidget = function (widget) {\n    var widgetId = widget.getId();\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      var widgetData = this._contentWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutContentWidget(widgetData);\n      }\n    }\n  };\n  CodeEditorWidget.prototype.removeContentWidget = function (widget) {\n    var widgetId = widget.getId();\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      var widgetData = this._contentWidgets[widgetId];\n      delete this._contentWidgets[widgetId];\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeContentWidget(widgetData);\n      }\n    }\n  };\n  CodeEditorWidget.prototype.addOverlayWidget = function (widget) {\n    var widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n    if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting an overlay widget with the same id.');\n    }\n    this._overlayWidgets[widget.getId()] = widgetData;\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addOverlayWidget(widgetData);\n    }\n  };\n  CodeEditorWidget.prototype.layoutOverlayWidget = function (widget) {\n    var widgetId = widget.getId();\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      var widgetData = this._overlayWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutOverlayWidget(widgetData);\n      }\n    }\n  };\n  CodeEditorWidget.prototype.removeOverlayWidget = function (widget) {\n    var widgetId = widget.getId();\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      var widgetData = this._overlayWidgets[widgetId];\n      delete this._overlayWidgets[widgetId];\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeOverlayWidget(widgetData);\n      }\n    }\n  };\n  CodeEditorWidget.prototype.changeViewZones = function (callback) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    var hasChanges = this._modelData.view.change(callback);\n    if (hasChanges) {\n      this._onDidChangeViewZones.fire();\n    }\n  };\n  CodeEditorWidget.prototype.getTargetAtClientPoint = function (clientX, clientY) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n  };\n  CodeEditorWidget.prototype.getScrolledVisiblePosition = function (rawPosition) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    var position = this._modelData.model.validatePosition(rawPosition);\n    var options = this._configuration.options;\n    var layoutInfo = options.get(107 /* layoutInfo */);\n    var top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n    var left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n    return {\n      top: top,\n      left: left,\n      height: options.get(49 /* lineHeight */)\n    };\n  };\n\n  CodeEditorWidget.prototype.getOffsetForColumn = function (lineNumber, column) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return -1;\n    }\n    return this._modelData.view.getOffsetForColumn(lineNumber, column);\n  };\n  CodeEditorWidget.prototype.render = function (forceRedraw) {\n    if (forceRedraw === void 0) {\n      forceRedraw = false;\n    }\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.render(true, forceRedraw);\n  };\n  CodeEditorWidget.prototype.setAriaOptions = function (options) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.setAriaOptions(options);\n  };\n  CodeEditorWidget.prototype.applyFontInfo = function (target) {\n    Configuration.applyFontInfoSlow(target, this._configuration.options.get(34 /* fontInfo */));\n  };\n\n  CodeEditorWidget.prototype._attachModel = function (model) {\n    var _this = this;\n    if (!model) {\n      this._modelData = null;\n      return;\n    }\n    var listenersToRemove = [];\n    this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\n    this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n    this._configuration.setMaxLineNumber(model.getLineCount());\n    model.onBeforeAttached();\n    var viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), function (callback) {\n      return dom.scheduleAtNextAnimationFrame(callback);\n    });\n    listenersToRemove.push(model.onDidChangeDecorations(function (e) {\n      return _this._onDidChangeModelDecorations.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeLanguage(function (e) {\n      _this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\n      _this._onDidChangeModelLanguage.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeLanguageConfiguration(function (e) {\n      return _this._onDidChangeModelLanguageConfiguration.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeContent(function (e) {\n      return _this._onDidChangeModelContent.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeOptions(function (e) {\n      return _this._onDidChangeModelOptions.fire(e);\n    }));\n    // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n    listenersToRemove.push(model.onWillDispose(function () {\n      return _this.setModel(null);\n    }));\n    var cursor = new Cursor(this._configuration, model, viewModel);\n    listenersToRemove.push(cursor.onDidReachMaxCursorCount(function () {\n      _this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", Cursor.MAX_CURSOR_COUNT));\n    }));\n    listenersToRemove.push(cursor.onDidAttemptReadOnlyEdit(function () {\n      _this._onDidAttemptReadOnlyEdit.fire(undefined);\n    }));\n    listenersToRemove.push(cursor.onDidChange(function (e) {\n      var positions = [];\n      for (var i = 0, len = e.selections.length; i < len; i++) {\n        positions[i] = e.selections[i].getPosition();\n      }\n      var e1 = {\n        position: positions[0],\n        secondaryPositions: positions.slice(1),\n        reason: e.reason,\n        source: e.source\n      };\n      _this._onDidChangeCursorPosition.fire(e1);\n      var e2 = {\n        selection: e.selections[0],\n        secondarySelections: e.selections.slice(1),\n        modelVersionId: e.modelVersionId,\n        oldSelections: e.oldSelections,\n        oldModelVersionId: e.oldModelVersionId,\n        source: e.source,\n        reason: e.reason\n      };\n      _this._onDidChangeCursorSelection.fire(e2);\n    }));\n    var _a = this._createView(viewModel, cursor),\n      view = _a[0],\n      hasRealView = _a[1];\n    if (hasRealView) {\n      this._domElement.appendChild(view.domNode.domNode);\n      var keys = Object.keys(this._contentWidgets);\n      for (var i = 0, len = keys.length; i < len; i++) {\n        var widgetId = keys[i];\n        view.addContentWidget(this._contentWidgets[widgetId]);\n      }\n      keys = Object.keys(this._overlayWidgets);\n      for (var i = 0, len = keys.length; i < len; i++) {\n        var widgetId = keys[i];\n        view.addOverlayWidget(this._overlayWidgets[widgetId]);\n      }\n      view.render(false, true);\n      view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n    }\n    this._modelData = new ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove);\n  };\n  CodeEditorWidget.prototype._createView = function (viewModel, cursor) {\n    var _this = this;\n    var commandDelegate;\n    if (this.isSimpleWidget) {\n      commandDelegate = {\n        executeEditorCommand: function executeEditorCommand(editorCommand, args) {\n          editorCommand.runCoreEditorCommand(cursor, args);\n        },\n        paste: function paste(source, text, pasteOnNewLine, multicursorText, mode) {\n          _this.trigger(source, editorCommon.Handler.Paste, {\n            text: text,\n            pasteOnNewLine: pasteOnNewLine,\n            multicursorText: multicursorText,\n            mode: mode\n          });\n        },\n        type: function type(source, text) {\n          _this.trigger(source, editorCommon.Handler.Type, {\n            text: text\n          });\n        },\n        replacePreviousChar: function replacePreviousChar(source, text, replaceCharCnt) {\n          _this.trigger(source, editorCommon.Handler.ReplacePreviousChar, {\n            text: text,\n            replaceCharCnt: replaceCharCnt\n          });\n        },\n        compositionStart: function compositionStart(source) {\n          _this.trigger(source, editorCommon.Handler.CompositionStart, undefined);\n        },\n        compositionEnd: function compositionEnd(source) {\n          _this.trigger(source, editorCommon.Handler.CompositionEnd, undefined);\n        },\n        cut: function cut(source) {\n          _this.trigger(source, editorCommon.Handler.Cut, undefined);\n        }\n      };\n    } else {\n      commandDelegate = {\n        executeEditorCommand: function executeEditorCommand(editorCommand, args) {\n          editorCommand.runCoreEditorCommand(cursor, args);\n        },\n        paste: function paste(source, text, pasteOnNewLine, multicursorText, mode) {\n          _this._commandService.executeCommand(editorCommon.Handler.Paste, {\n            text: text,\n            pasteOnNewLine: pasteOnNewLine,\n            multicursorText: multicursorText,\n            mode: mode\n          });\n        },\n        type: function type(source, text) {\n          _this._commandService.executeCommand(editorCommon.Handler.Type, {\n            text: text\n          });\n        },\n        replacePreviousChar: function replacePreviousChar(source, text, replaceCharCnt) {\n          _this._commandService.executeCommand(editorCommon.Handler.ReplacePreviousChar, {\n            text: text,\n            replaceCharCnt: replaceCharCnt\n          });\n        },\n        compositionStart: function compositionStart(source) {\n          _this._commandService.executeCommand(editorCommon.Handler.CompositionStart, {});\n        },\n        compositionEnd: function compositionEnd(source) {\n          _this._commandService.executeCommand(editorCommon.Handler.CompositionEnd, {});\n        },\n        cut: function cut(source) {\n          _this._commandService.executeCommand(editorCommon.Handler.Cut, {});\n        }\n      };\n    }\n    var viewOutgoingEvents = new ViewOutgoingEvents(viewModel);\n    viewOutgoingEvents.onDidContentSizeChange = function (e) {\n      return _this._onDidContentSizeChange.fire(e);\n    };\n    viewOutgoingEvents.onDidScroll = function (e) {\n      return _this._onDidScrollChange.fire(e);\n    };\n    viewOutgoingEvents.onDidGainFocus = function () {\n      return _this._editorTextFocus.setValue(true);\n    };\n    viewOutgoingEvents.onDidLoseFocus = function () {\n      return _this._editorTextFocus.setValue(false);\n    };\n    viewOutgoingEvents.onContextMenu = function (e) {\n      return _this._onContextMenu.fire(e);\n    };\n    viewOutgoingEvents.onMouseDown = function (e) {\n      return _this._onMouseDown.fire(e);\n    };\n    viewOutgoingEvents.onMouseUp = function (e) {\n      return _this._onMouseUp.fire(e);\n    };\n    viewOutgoingEvents.onMouseDrag = function (e) {\n      return _this._onMouseDrag.fire(e);\n    };\n    viewOutgoingEvents.onMouseDrop = function (e) {\n      return _this._onMouseDrop.fire(e);\n    };\n    viewOutgoingEvents.onKeyUp = function (e) {\n      return _this._onKeyUp.fire(e);\n    };\n    viewOutgoingEvents.onMouseMove = function (e) {\n      return _this._onMouseMove.fire(e);\n    };\n    viewOutgoingEvents.onMouseLeave = function (e) {\n      return _this._onMouseLeave.fire(e);\n    };\n    viewOutgoingEvents.onMouseWheel = function (e) {\n      return _this._onMouseWheel.fire(e);\n    };\n    viewOutgoingEvents.onKeyDown = function (e) {\n      return _this._onKeyDown.fire(e);\n    };\n    var view = new View(commandDelegate, this._configuration, this._themeService, viewModel, cursor, viewOutgoingEvents);\n    return [view, true];\n  };\n  CodeEditorWidget.prototype._postDetachModelCleanup = function (detachedModel) {\n    if (detachedModel) {\n      detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n  };\n  CodeEditorWidget.prototype._detachModel = function () {\n    if (!this._modelData) {\n      return null;\n    }\n    var model = this._modelData.model;\n    var removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n    this._modelData.dispose();\n    this._modelData = null;\n    this._domElement.removeAttribute('data-mode-id');\n    if (removeDomNode) {\n      this._domElement.removeChild(removeDomNode);\n    }\n    return model;\n  };\n  CodeEditorWidget.prototype._removeDecorationType = function (key) {\n    this._codeEditorService.removeDecorationType(key);\n  };\n  CodeEditorWidget.prototype.hasModel = function () {\n    return this._modelData !== null;\n  };\n  CodeEditorWidget = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService)], CodeEditorWidget);\n  return CodeEditorWidget;\n}(Disposable);\nexport { CodeEditorWidget };\nvar BooleanEventEmitter = /** @class */function (_super) {\n  __extends(BooleanEventEmitter, _super);\n  function BooleanEventEmitter() {\n    var _this = _super.call(this) || this;\n    _this._onDidChangeToTrue = _this._register(new Emitter());\n    _this.onDidChangeToTrue = _this._onDidChangeToTrue.event;\n    _this._onDidChangeToFalse = _this._register(new Emitter());\n    _this.onDidChangeToFalse = _this._onDidChangeToFalse.event;\n    _this._value = 0 /* NotSet */;\n    return _this;\n  }\n  BooleanEventEmitter.prototype.setValue = function (_value) {\n    var value = _value ? 2 /* True */ : 1 /* False */;\n    if (this._value === value) {\n      return;\n    }\n    this._value = value;\n    if (this._value === 2 /* True */) {\n      this._onDidChangeToTrue.fire();\n    } else if (this._value === 1 /* False */) {\n      this._onDidChangeToFalse.fire();\n    }\n  };\n  return BooleanEventEmitter;\n}(Disposable);\nexport { BooleanEventEmitter };\nvar EditorContextKeysManager = /** @class */function (_super) {\n  __extends(EditorContextKeysManager, _super);\n  function EditorContextKeysManager(editor, contextKeyService) {\n    var _this = _super.call(this) || this;\n    _this._editor = editor;\n    contextKeyService.createKey('editorId', editor.getId());\n    _this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n    _this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n    _this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n    _this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n    _this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n    _this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n    _this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n    _this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n    _this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n    _this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n    _this._register(_this._editor.onDidChangeConfiguration(function () {\n      return _this._updateFromConfig();\n    }));\n    _this._register(_this._editor.onDidChangeCursorSelection(function () {\n      return _this._updateFromSelection();\n    }));\n    _this._register(_this._editor.onDidFocusEditorWidget(function () {\n      return _this._updateFromFocus();\n    }));\n    _this._register(_this._editor.onDidBlurEditorWidget(function () {\n      return _this._updateFromFocus();\n    }));\n    _this._register(_this._editor.onDidFocusEditorText(function () {\n      return _this._updateFromFocus();\n    }));\n    _this._register(_this._editor.onDidBlurEditorText(function () {\n      return _this._updateFromFocus();\n    }));\n    _this._register(_this._editor.onDidChangeModel(function () {\n      return _this._updateFromModel();\n    }));\n    _this._register(_this._editor.onDidChangeConfiguration(function () {\n      return _this._updateFromModel();\n    }));\n    _this._updateFromConfig();\n    _this._updateFromSelection();\n    _this._updateFromFocus();\n    _this._updateFromModel();\n    _this._editorSimpleInput.set(_this._editor.isSimpleWidget);\n    return _this;\n  }\n  EditorContextKeysManager.prototype._updateFromConfig = function () {\n    var options = this._editor.getOptions();\n    this._editorTabMovesFocus.set(options.get(106 /* tabFocusMode */));\n    this._editorReadonly.set(options.get(68 /* readOnly */));\n  };\n\n  EditorContextKeysManager.prototype._updateFromSelection = function () {\n    var selections = this._editor.getSelections();\n    if (!selections) {\n      this._hasMultipleSelections.reset();\n      this._hasNonEmptySelection.reset();\n    } else {\n      this._hasMultipleSelections.set(selections.length > 1);\n      this._hasNonEmptySelection.set(selections.some(function (s) {\n        return !s.isEmpty();\n      }));\n    }\n  };\n  EditorContextKeysManager.prototype._updateFromFocus = function () {\n    this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n    this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n    this._textInputFocus.set(this._editor.hasTextFocus());\n  };\n  EditorContextKeysManager.prototype._updateFromModel = function () {\n    var model = this._editor.getModel();\n    this._canUndo.set(Boolean(model && model.canUndo()));\n    this._canRedo.set(Boolean(model && model.canRedo()));\n  };\n  return EditorContextKeysManager;\n}(Disposable);\nvar EditorModeContext = /** @class */function (_super) {\n  __extends(EditorModeContext, _super);\n  function EditorModeContext(_editor, _contextKeyService) {\n    var _this = _super.call(this) || this;\n    _this._editor = _editor;\n    _this._contextKeyService = _contextKeyService;\n    _this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n    _this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n    _this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n    _this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n    _this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n    _this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n    _this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n    _this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n    _this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n    _this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n    _this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n    _this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n    _this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n    _this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n    _this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n    _this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    _this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n    _this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    _this._isInWalkThrough = EditorContextKeys.isInEmbeddedEditor.bindTo(_contextKeyService);\n    var update = function update() {\n      return _this._update();\n    };\n    // update when model/mode changes\n    _this._register(_editor.onDidChangeModel(update));\n    _this._register(_editor.onDidChangeModelLanguage(update));\n    // update when registries change\n    _this._register(modes.CompletionProviderRegistry.onDidChange(update));\n    _this._register(modes.CodeActionProviderRegistry.onDidChange(update));\n    _this._register(modes.CodeLensProviderRegistry.onDidChange(update));\n    _this._register(modes.DefinitionProviderRegistry.onDidChange(update));\n    _this._register(modes.DeclarationProviderRegistry.onDidChange(update));\n    _this._register(modes.ImplementationProviderRegistry.onDidChange(update));\n    _this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\n    _this._register(modes.HoverProviderRegistry.onDidChange(update));\n    _this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\n    _this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\n    _this._register(modes.ReferenceProviderRegistry.onDidChange(update));\n    _this._register(modes.RenameProviderRegistry.onDidChange(update));\n    _this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\n    _this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\n    _this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\n    update();\n    return _this;\n  }\n  EditorModeContext.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n  EditorModeContext.prototype.reset = function () {\n    var _this = this;\n    this._contextKeyService.bufferChangeEvents(function () {\n      _this._langId.reset();\n      _this._hasCompletionItemProvider.reset();\n      _this._hasCodeActionsProvider.reset();\n      _this._hasCodeLensProvider.reset();\n      _this._hasDefinitionProvider.reset();\n      _this._hasDeclarationProvider.reset();\n      _this._hasImplementationProvider.reset();\n      _this._hasTypeDefinitionProvider.reset();\n      _this._hasHoverProvider.reset();\n      _this._hasDocumentHighlightProvider.reset();\n      _this._hasDocumentSymbolProvider.reset();\n      _this._hasReferenceProvider.reset();\n      _this._hasRenameProvider.reset();\n      _this._hasDocumentFormattingProvider.reset();\n      _this._hasDocumentSelectionFormattingProvider.reset();\n      _this._hasSignatureHelpProvider.reset();\n      _this._isInWalkThrough.reset();\n    });\n  };\n  EditorModeContext.prototype._update = function () {\n    var _this = this;\n    var model = this._editor.getModel();\n    if (!model) {\n      this.reset();\n      return;\n    }\n    this._contextKeyService.bufferChangeEvents(function () {\n      _this._langId.set(model.getLanguageIdentifier().language);\n      _this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\n      _this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\n      _this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\n      _this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\n      _this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\n      _this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\n      _this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\n      _this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\n      _this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\n      _this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\n      _this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\n      _this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\n      _this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\n      _this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n      _this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n      _this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n      _this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n      _this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n    });\n  };\n  return EditorModeContext;\n}(Disposable);\nexport { EditorModeContext };\nvar CodeEditorWidgetFocusTracker = /** @class */function (_super) {\n  __extends(CodeEditorWidgetFocusTracker, _super);\n  function CodeEditorWidgetFocusTracker(domElement) {\n    var _this = _super.call(this) || this;\n    _this._onChange = _this._register(new Emitter());\n    _this.onChange = _this._onChange.event;\n    _this._hasFocus = false;\n    _this._domFocusTracker = _this._register(dom.trackFocus(domElement));\n    _this._register(_this._domFocusTracker.onDidFocus(function () {\n      _this._hasFocus = true;\n      _this._onChange.fire(undefined);\n    }));\n    _this._register(_this._domFocusTracker.onDidBlur(function () {\n      _this._hasFocus = false;\n      _this._onChange.fire(undefined);\n    }));\n    return _this;\n  }\n  CodeEditorWidgetFocusTracker.prototype.hasFocus = function () {\n    return this._hasFocus;\n  };\n  return CodeEditorWidgetFocusTracker;\n}(Disposable);\nvar squigglyStart = encodeURIComponent(\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='\");\nvar squigglyEnd = encodeURIComponent(\"'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>\");\nfunction getSquigglySVGData(color) {\n  return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nvar dotdotdotStart = encodeURIComponent(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"3\\\" width=\\\"12\\\"><g fill=\\\"\");\nvar dotdotdotEnd = encodeURIComponent(\"\\\"><circle cx=\\\"1\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"5\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"9\\\" cy=\\\"1\\\" r=\\\"1\\\"/></g></svg>\");\nfunction getDotDotDotSVGData(color) {\n  return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant(function (theme, collector) {\n  var errorBorderColor = theme.getColor(editorErrorBorder);\n  if (errorBorderColor) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { border-bottom: 4px double \" + errorBorderColor + \"; }\");\n  }\n  var errorForeground = theme.getColor(editorErrorForeground);\n  if (errorForeground) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(errorForeground) + \"\\\") repeat-x bottom left; }\");\n  }\n  var warningBorderColor = theme.getColor(editorWarningBorder);\n  if (warningBorderColor) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { border-bottom: 4px double \" + warningBorderColor + \"; }\");\n  }\n  var warningForeground = theme.getColor(editorWarningForeground);\n  if (warningForeground) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(warningForeground) + \"\\\") repeat-x bottom left; }\");\n  }\n  var infoBorderColor = theme.getColor(editorInfoBorder);\n  if (infoBorderColor) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { border-bottom: 4px double \" + infoBorderColor + \"; }\");\n  }\n  var infoForeground = theme.getColor(editorInfoForeground);\n  if (infoForeground) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(infoForeground) + \"\\\") repeat-x bottom left; }\");\n  }\n  var hintBorderColor = theme.getColor(editorHintBorder);\n  if (hintBorderColor) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { border-bottom: 2px dotted \" + hintBorderColor + \"; }\");\n  }\n  var hintForeground = theme.getColor(editorHintForeground);\n  if (hintForeground) {\n    collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getDotDotDotSVGData(hintForeground) + \"\\\") no-repeat bottom left; }\");\n  }\n  var unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n  if (unnecessaryForeground) {\n    collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */ + \" { opacity: \" + unnecessaryForeground.rgba.a + \"; }\");\n  }\n  var unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\n  if (unnecessaryBorder) {\n    collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */ + \" { border-bottom: 2px dashed \" + unnecessaryBorder + \"; }\");\n  }\n  var deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\n  collector.addRule(\".monaco-editor .\" + \"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */ + \" { text-decoration: line-through; text-decoration-color: \" + deprecatedForeground + \"}\");\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","dom","onUnexpectedError","Emitter","Disposable","dispose","Schemas","Configuration","EditorExtensionsRegistry","ICodeEditorService","View","ViewOutgoingEvents","filterValidationDecorations","Cursor","CursorColumns","Position","Range","Selection","InternalEditorAction","editorCommon","EditorContextKeys","modes","editorUnnecessaryCodeBorder","editorUnnecessaryCodeOpacity","editorErrorBorder","editorErrorForeground","editorHintBorder","editorHintForeground","editorInfoBorder","editorInfoForeground","editorWarningBorder","editorWarningForeground","editorForeground","ViewModel","ICommandService","IContextKeyService","IInstantiationService","ServiceCollection","INotificationService","IThemeService","registerThemingParticipant","IAccessibilityService","withNullAsUndefined","MonospaceLineBreaksComputerFactory","DOMLineBreaksComputerFactory","EDITOR_ID","ModelData","model","viewModel","cursor","view","hasRealView","listenersToRemove","onBeforeDetached","CodeEditorWidget","_super","domElement","options","codeEditorWidgetOptions","instantiationService","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","_this","call","_onDidDispose","_register","onDidDispose","event","_onDidChangeModelContent","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","onMouseUp","_onMouseDown","onMouseDown","_onMouseDrag","onMouseDrag","_onMouseDrop","onMouseDrop","_onContextMenu","onContextMenu","_onMouseMove","onMouseMove","_onMouseLeave","onMouseLeave","_onMouseWheel","onMouseWheel","_onKeyUp","onKeyUp","_onKeyDown","onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_domElement","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","isSimpleWidget","_telemetryData","telemetryData","_configuration","_createConfiguration","onDidChange","e","fire","hasChanged","layoutInfo","get","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","_instantiationService","createChild","_modelData","_contributions","_actions","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","contributions","isArray","getEditorContributions","_i","contributions_1","contribution","createInstance","ctor","id","err","getEditorActions","forEach","action","internalAction","label","alias","precondition","invokeFunction","accessor","Promise","resolve","runEditorCommand","addCodeEditor","getId","getEditorType","EditorType","ICodeEditor","removeCodeEditor","keys","len","contributionId","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","updateOptions","newOptions","getOptions","getOption","getRawOptions","getValue","preserveBOM","eolPreference","lineEnding","newValue","getModel","setModel","_model","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getWhitespaces","viewLayout","_getVerticalOffsetForPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","lineNumber","column","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","getVerticalOffsetForLineNumber","getTopForLineNumber","getTopForPosition","setHiddenAreas","ranges","map","lift","getVisibleColumnFromPosition","rawPosition","position","tabSize","visibleColumnFromColumn","getLineContent","getPosition","setPosition","isIPosition","Error","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","emitCursorRevealRange","revealLine","_revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealType","revealPosition","_revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","getSelection","getSelections","setSelection","something","isSelection","isISelection","isRange","_setSelectionImpl","selection","startLineNumber","startColumn","endLineNumber","endColumn","sel","revealLines","_revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealRange","range","revealVerticalInCenter","_revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeAtTop","source","getContentWidth","getScrollWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getScrollHeight","getScrollTop","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPositionNow","scrollLeft","setScrollTop","newScrollTop","scrollTop","setScrollPosition","saveViewState","contributionsState","keys_1","cursorState","saveState","viewState","restoreViewState","s","codeEditorState","restoreState","reducedState","reduceRestoreState","getContribution","getActions","result","push","getSupportedActions","filter","isSupported","getAction","trigger","handlerId","payload","Handler","Type","text","Paste","startPosition","getStartPosition","endPosition","mode","run","then","undefined","_triggerEditorCommand","CompositionStart","CompositionEnd","command","getEditorCommand","_getCursors","pushUndoStop","pushStackElement","executeEdits","edits","endCursorState","cursorStateComputer","executeCommand","ExecuteCommand","executeCommands","commands","ExecuteCommands","changeDecorations","callback","getLineDecorations","deltaDecorations","oldDecorations","newDecorations","removeDecorations","decorationTypeKey","oldDecorationsIds","getLayoutInfo","createOverviewRuler","cssClassName","getContainerDomNode","getDomNode","domNode","delegateVerticalScrollbarMouseDown","browserEvent","layout","dimension","observeReferenceElement","render","isFocused","hasWidgetFocus","addContentWidget","widget","widgetData","console","warn","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","changeViewZones","hasChanges","change","getTargetAtClientPoint","clientX","clientY","getScrolledVisiblePosition","top","left","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","height","forceRedraw","setAriaOptions","applyFontInfo","applyFontInfoSlow","setAttribute","getLanguageIdentifier","language","setIsDominatedByLongLines","isDominatedByLongLines","setMaxLineNumber","getLineCount","onBeforeAttached","scheduleAtNextAnimationFrame","onDidChangeDecorations","onDidChangeLanguage","onDidChangeLanguageConfiguration","onDidChangeContent","onDidChangeOptions","onWillDispose","onDidReachMaxCursorCount","localize","MAX_CURSOR_COUNT","positions","selections","e1","secondaryPositions","slice","reason","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_a","_createView","appendChild","toString","commandDelegate","executeEditorCommand","editorCommand","args","runCoreEditorCommand","paste","pasteOnNewLine","multicursorText","type","replacePreviousChar","replaceCharCnt","ReplacePreviousChar","compositionStart","compositionEnd","cut","Cut","viewOutgoingEvents","onDidScroll","onDidGainFocus","onDidLoseFocus","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeChild","removeDecorationType","_onDidChangeToTrue","_onDidChangeToFalse","_value","value","editor","_editor","createKey","_editorSimpleInput","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","set","reset","some","isEmpty","Boolean","_langId","languageId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInEmbeddedEditor","update","_update","CompletionProviderRegistry","CodeActionProviderRegistry","CodeLensProviderRegistry","DefinitionProviderRegistry","DeclarationProviderRegistry","ImplementationProviderRegistry","TypeDefinitionProviderRegistry","HoverProviderRegistry","DocumentHighlightProviderRegistry","DocumentSymbolProviderRegistry","ReferenceProviderRegistry","RenameProviderRegistry","DocumentFormattingEditProviderRegistry","DocumentRangeFormattingEditProviderRegistry","SignatureHelpProviderRegistry","bufferChangeEvents","has","all","scheme","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","getDotDotDotSVGData","theme","collector","errorBorderColor","getColor","addRule","errorForeground","warningBorderColor","warningForeground","infoBorderColor","infoForeground","hintBorderColor","hintForeground","unnecessaryForeground","rgba","a","unnecessaryBorder","deprecatedForeground"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/editor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { View } from '../view/viewImpl.js';\r\nimport { ViewOutgoingEvents } from '../view/viewOutgoingEvents.js';\r\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\r\nimport { Cursor } from '../../common/controller/cursor.js';\r\nimport { CursorColumns } from '../../common/controller/cursorCommon.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/view/editorColorRegistry.js';\r\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { withNullAsUndefined } from '../../../base/common/types.js';\r\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\r\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\r\nvar EDITOR_ID = 0;\r\nvar ModelData = /** @class */ (function () {\r\n    function ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove) {\r\n        this.model = model;\r\n        this.viewModel = viewModel;\r\n        this.cursor = cursor;\r\n        this.view = view;\r\n        this.hasRealView = hasRealView;\r\n        this.listenersToRemove = listenersToRemove;\r\n    }\r\n    ModelData.prototype.dispose = function () {\r\n        dispose(this.listenersToRemove);\r\n        this.model.onBeforeDetached();\r\n        if (this.hasRealView) {\r\n            this.view.dispose();\r\n        }\r\n        this.cursor.dispose();\r\n        this.viewModel.dispose();\r\n    };\r\n    return ModelData;\r\n}());\r\nvar CodeEditorWidget = /** @class */ (function (_super) {\r\n    __extends(CodeEditorWidget, _super);\r\n    function CodeEditorWidget(domElement, options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\r\n        var _this = _super.call(this) || this;\r\n        //#region Eventing\r\n        _this._onDidDispose = _this._register(new Emitter());\r\n        _this.onDidDispose = _this._onDidDispose.event;\r\n        _this._onDidChangeModelContent = _this._register(new Emitter());\r\n        _this.onDidChangeModelContent = _this._onDidChangeModelContent.event;\r\n        _this._onDidChangeModelLanguage = _this._register(new Emitter());\r\n        _this.onDidChangeModelLanguage = _this._onDidChangeModelLanguage.event;\r\n        _this._onDidChangeModelLanguageConfiguration = _this._register(new Emitter());\r\n        _this.onDidChangeModelLanguageConfiguration = _this._onDidChangeModelLanguageConfiguration.event;\r\n        _this._onDidChangeModelOptions = _this._register(new Emitter());\r\n        _this.onDidChangeModelOptions = _this._onDidChangeModelOptions.event;\r\n        _this._onDidChangeModelDecorations = _this._register(new Emitter());\r\n        _this.onDidChangeModelDecorations = _this._onDidChangeModelDecorations.event;\r\n        _this._onDidChangeConfiguration = _this._register(new Emitter());\r\n        _this.onDidChangeConfiguration = _this._onDidChangeConfiguration.event;\r\n        _this._onDidChangeModel = _this._register(new Emitter());\r\n        _this.onDidChangeModel = _this._onDidChangeModel.event;\r\n        _this._onDidChangeCursorPosition = _this._register(new Emitter());\r\n        _this.onDidChangeCursorPosition = _this._onDidChangeCursorPosition.event;\r\n        _this._onDidChangeCursorSelection = _this._register(new Emitter());\r\n        _this.onDidChangeCursorSelection = _this._onDidChangeCursorSelection.event;\r\n        _this._onDidAttemptReadOnlyEdit = _this._register(new Emitter());\r\n        _this.onDidAttemptReadOnlyEdit = _this._onDidAttemptReadOnlyEdit.event;\r\n        _this._onDidLayoutChange = _this._register(new Emitter());\r\n        _this.onDidLayoutChange = _this._onDidLayoutChange.event;\r\n        _this._editorTextFocus = _this._register(new BooleanEventEmitter());\r\n        _this.onDidFocusEditorText = _this._editorTextFocus.onDidChangeToTrue;\r\n        _this.onDidBlurEditorText = _this._editorTextFocus.onDidChangeToFalse;\r\n        _this._editorWidgetFocus = _this._register(new BooleanEventEmitter());\r\n        _this.onDidFocusEditorWidget = _this._editorWidgetFocus.onDidChangeToTrue;\r\n        _this.onDidBlurEditorWidget = _this._editorWidgetFocus.onDidChangeToFalse;\r\n        _this._onWillType = _this._register(new Emitter());\r\n        _this.onWillType = _this._onWillType.event;\r\n        _this._onDidType = _this._register(new Emitter());\r\n        _this.onDidType = _this._onDidType.event;\r\n        _this._onDidCompositionStart = _this._register(new Emitter());\r\n        _this.onDidCompositionStart = _this._onDidCompositionStart.event;\r\n        _this._onDidCompositionEnd = _this._register(new Emitter());\r\n        _this.onDidCompositionEnd = _this._onDidCompositionEnd.event;\r\n        _this._onDidPaste = _this._register(new Emitter());\r\n        _this.onDidPaste = _this._onDidPaste.event;\r\n        _this._onMouseUp = _this._register(new Emitter());\r\n        _this.onMouseUp = _this._onMouseUp.event;\r\n        _this._onMouseDown = _this._register(new Emitter());\r\n        _this.onMouseDown = _this._onMouseDown.event;\r\n        _this._onMouseDrag = _this._register(new Emitter());\r\n        _this.onMouseDrag = _this._onMouseDrag.event;\r\n        _this._onMouseDrop = _this._register(new Emitter());\r\n        _this.onMouseDrop = _this._onMouseDrop.event;\r\n        _this._onContextMenu = _this._register(new Emitter());\r\n        _this.onContextMenu = _this._onContextMenu.event;\r\n        _this._onMouseMove = _this._register(new Emitter());\r\n        _this.onMouseMove = _this._onMouseMove.event;\r\n        _this._onMouseLeave = _this._register(new Emitter());\r\n        _this.onMouseLeave = _this._onMouseLeave.event;\r\n        _this._onMouseWheel = _this._register(new Emitter());\r\n        _this.onMouseWheel = _this._onMouseWheel.event;\r\n        _this._onKeyUp = _this._register(new Emitter());\r\n        _this.onKeyUp = _this._onKeyUp.event;\r\n        _this._onKeyDown = _this._register(new Emitter());\r\n        _this.onKeyDown = _this._onKeyDown.event;\r\n        _this._onDidContentSizeChange = _this._register(new Emitter());\r\n        _this.onDidContentSizeChange = _this._onDidContentSizeChange.event;\r\n        _this._onDidScrollChange = _this._register(new Emitter());\r\n        _this.onDidScrollChange = _this._onDidScrollChange.event;\r\n        _this._onDidChangeViewZones = _this._register(new Emitter());\r\n        _this.onDidChangeViewZones = _this._onDidChangeViewZones.event;\r\n        _this._domElement = domElement;\r\n        _this._id = (++EDITOR_ID);\r\n        _this._decorationTypeKeysToIds = {};\r\n        _this._decorationTypeSubtypes = {};\r\n        _this.isSimpleWidget = codeEditorWidgetOptions.isSimpleWidget || false;\r\n        _this._telemetryData = codeEditorWidgetOptions.telemetryData;\r\n        options = options || {};\r\n        _this._configuration = _this._register(_this._createConfiguration(options, accessibilityService));\r\n        _this._register(_this._configuration.onDidChange(function (e) {\r\n            _this._onDidChangeConfiguration.fire(e);\r\n            var options = _this._configuration.options;\r\n            if (e.hasChanged(107 /* layoutInfo */)) {\r\n                var layoutInfo = options.get(107 /* layoutInfo */);\r\n                _this._onDidLayoutChange.fire(layoutInfo);\r\n            }\r\n        }));\r\n        _this._contextKeyService = _this._register(contextKeyService.createScoped(_this._domElement));\r\n        _this._notificationService = notificationService;\r\n        _this._codeEditorService = codeEditorService;\r\n        _this._commandService = commandService;\r\n        _this._themeService = themeService;\r\n        _this._register(new EditorContextKeysManager(_this, _this._contextKeyService));\r\n        _this._register(new EditorModeContext(_this, _this._contextKeyService));\r\n        _this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, _this._contextKeyService]));\r\n        _this._modelData = null;\r\n        _this._contributions = {};\r\n        _this._actions = {};\r\n        _this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\r\n        _this._focusTracker.onChange(function () {\r\n            _this._editorWidgetFocus.setValue(_this._focusTracker.hasFocus());\r\n        });\r\n        _this._contentWidgets = {};\r\n        _this._overlayWidgets = {};\r\n        var contributions;\r\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\r\n            contributions = codeEditorWidgetOptions.contributions;\r\n        }\r\n        else {\r\n            contributions = EditorExtensionsRegistry.getEditorContributions();\r\n        }\r\n        for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\r\n            var desc = contributions_1[_i];\r\n            try {\r\n                var contribution = _this._instantiationService.createInstance(desc.ctor, _this);\r\n                _this._contributions[desc.id] = contribution;\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        EditorExtensionsRegistry.getEditorActions().forEach(function (action) {\r\n            var internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), function () {\r\n                return _this._instantiationService.invokeFunction(function (accessor) {\r\n                    return Promise.resolve(action.runEditorCommand(accessor, _this, null));\r\n                });\r\n            }, _this._contextKeyService);\r\n            _this._actions[internalAction.id] = internalAction;\r\n        });\r\n        _this._codeEditorService.addCodeEditor(_this);\r\n        return _this;\r\n    }\r\n    CodeEditorWidget.prototype._createConfiguration = function (options, accessibilityService) {\r\n        return new Configuration(this.isSimpleWidget, options, this._domElement, accessibilityService);\r\n    };\r\n    CodeEditorWidget.prototype.getId = function () {\r\n        return this.getEditorType() + ':' + this._id;\r\n    };\r\n    CodeEditorWidget.prototype.getEditorType = function () {\r\n        return editorCommon.EditorType.ICodeEditor;\r\n    };\r\n    CodeEditorWidget.prototype.dispose = function () {\r\n        this._codeEditorService.removeCodeEditor(this);\r\n        this._focusTracker.dispose();\r\n        var keys = Object.keys(this._contributions);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var contributionId = keys[i];\r\n            this._contributions[contributionId].dispose();\r\n        }\r\n        this._removeDecorationTypes();\r\n        this._postDetachModelCleanup(this._detachModel());\r\n        this._onDidDispose.fire();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    CodeEditorWidget.prototype.invokeWithinContext = function (fn) {\r\n        return this._instantiationService.invokeFunction(fn);\r\n    };\r\n    CodeEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        this._configuration.updateOptions(newOptions);\r\n    };\r\n    CodeEditorWidget.prototype.getOptions = function () {\r\n        return this._configuration.options;\r\n    };\r\n    CodeEditorWidget.prototype.getOption = function (id) {\r\n        return this._configuration.options.get(id);\r\n    };\r\n    CodeEditorWidget.prototype.getRawOptions = function () {\r\n        return this._configuration.getRawOptions();\r\n    };\r\n    CodeEditorWidget.prototype.getValue = function (options) {\r\n        if (options === void 0) { options = null; }\r\n        if (!this._modelData) {\r\n            return '';\r\n        }\r\n        var preserveBOM = (options && options.preserveBOM) ? true : false;\r\n        var eolPreference = 0 /* TextDefined */;\r\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\r\n            eolPreference = 1 /* LF */;\r\n        }\r\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\r\n            eolPreference = 2 /* CRLF */;\r\n        }\r\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\r\n    };\r\n    CodeEditorWidget.prototype.setValue = function (newValue) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.model.setValue(newValue);\r\n    };\r\n    CodeEditorWidget.prototype.getModel = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model;\r\n    };\r\n    CodeEditorWidget.prototype.setModel = function (_model) {\r\n        if (_model === void 0) { _model = null; }\r\n        var model = _model;\r\n        if (this._modelData === null && model === null) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        if (this._modelData && this._modelData.model === model) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        var hasTextFocus = this.hasTextFocus();\r\n        var detachedModel = this._detachModel();\r\n        this._attachModel(model);\r\n        if (hasTextFocus && this.hasModel()) {\r\n            this.focus();\r\n        }\r\n        var e = {\r\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\r\n            newModelUrl: model ? model.uri : null\r\n        };\r\n        this._removeDecorationTypes();\r\n        this._onDidChangeModel.fire(e);\r\n        this._postDetachModelCleanup(detachedModel);\r\n    };\r\n    CodeEditorWidget.prototype._removeDecorationTypes = function () {\r\n        this._decorationTypeKeysToIds = {};\r\n        if (this._decorationTypeSubtypes) {\r\n            for (var decorationType in this._decorationTypeSubtypes) {\r\n                var subTypes = this._decorationTypeSubtypes[decorationType];\r\n                for (var subType in subTypes) {\r\n                    this._removeDecorationType(decorationType + '-' + subType);\r\n                }\r\n            }\r\n            this._decorationTypeSubtypes = {};\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getVisibleRanges = function () {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.getVisibleRanges();\r\n    };\r\n    CodeEditorWidget.prototype.getWhitespaces = function () {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\r\n    };\r\n    CodeEditorWidget._getVerticalOffsetForPosition = function (modelData, modelLineNumber, modelColumn) {\r\n        var modelPosition = modelData.model.validatePosition({\r\n            lineNumber: modelLineNumber,\r\n            column: modelColumn\r\n        });\r\n        var viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\r\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\r\n    };\r\n    CodeEditorWidget.prototype.getTopForLineNumber = function (lineNumber) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\r\n    };\r\n    CodeEditorWidget.prototype.getTopForPosition = function (lineNumber, column) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\r\n    };\r\n    CodeEditorWidget.prototype.setHiddenAreas = function (ranges) {\r\n        if (this._modelData) {\r\n            this._modelData.viewModel.setHiddenAreas(ranges.map(function (r) { return Range.lift(r); }));\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getVisibleColumnFromPosition = function (rawPosition) {\r\n        if (!this._modelData) {\r\n            return rawPosition.column;\r\n        }\r\n        var position = this._modelData.model.validatePosition(rawPosition);\r\n        var tabSize = this._modelData.model.getOptions().tabSize;\r\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\r\n    };\r\n    CodeEditorWidget.prototype.getPosition = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getPosition();\r\n    };\r\n    CodeEditorWidget.prototype.setPosition = function (position) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.cursor.setSelections('api', [{\r\n                selectionStartLineNumber: position.lineNumber,\r\n                selectionStartColumn: position.column,\r\n                positionLineNumber: position.lineNumber,\r\n                positionColumn: position.column\r\n            }]);\r\n    };\r\n    CodeEditorWidget.prototype._sendRevealRange = function (modelRange, verticalType, revealHorizontal, scrollType) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Range.isIRange(modelRange)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        var validatedModelRange = this._modelData.model.validateRange(modelRange);\r\n        var viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\r\n        this._modelData.cursor.emitCursorRevealRange('api', viewRange, verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 0 /* Simple */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 1 /* Center */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealLine = function (lineNumber, revealType, scrollType) {\r\n        if (typeof lineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPosition = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 0 /* Simple */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 1 /* Center */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealPosition = function (position, verticalType, revealHorizontal, scrollType) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.getSelection = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getSelection();\r\n    };\r\n    CodeEditorWidget.prototype.getSelections = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getSelections();\r\n    };\r\n    CodeEditorWidget.prototype.setSelection = function (something) {\r\n        var isSelection = Selection.isISelection(something);\r\n        var isRange = Range.isIRange(something);\r\n        if (!isSelection && !isRange) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        if (isSelection) {\r\n            this._setSelectionImpl(something);\r\n        }\r\n        else if (isRange) {\r\n            // act as if it was an IRange\r\n            var selection = {\r\n                selectionStartLineNumber: something.startLineNumber,\r\n                selectionStartColumn: something.startColumn,\r\n                positionLineNumber: something.endLineNumber,\r\n                positionColumn: something.endColumn\r\n            };\r\n            this._setSelectionImpl(selection);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._setSelectionImpl = function (sel) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        var selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\r\n        this._modelData.cursor.setSelections('api', [selection]);\r\n    };\r\n    CodeEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealLines = function (startLineNumber, endLineNumber, verticalType, scrollType) {\r\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        if (revealVerticalInCenter === void 0) { revealVerticalInCenter = false; }\r\n        if (revealHorizontal === void 0) { revealHorizontal = true; }\r\n        this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 1 /* Center */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 3 /* Top */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealRange = function (range, verticalType, revealHorizontal, scrollType) {\r\n        if (!Range.isIRange(range)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.setSelections = function (ranges, source) {\r\n        if (source === void 0) { source = 'api'; }\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!ranges || ranges.length === 0) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        for (var i = 0, len = ranges.length; i < len; i++) {\r\n            if (!Selection.isISelection(ranges[i])) {\r\n                throw new Error('Invalid arguments');\r\n            }\r\n        }\r\n        this._modelData.cursor.setSelections(source, ranges);\r\n    };\r\n    CodeEditorWidget.prototype.getContentWidth = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentWidth();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollWidth = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollLeft = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\r\n    };\r\n    CodeEditorWidget.prototype.getContentHeight = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentHeight();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollHeight = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollTop = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\r\n    };\r\n    CodeEditorWidget.prototype.setScrollLeft = function (newScrollLeft) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollLeft !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow({\r\n            scrollLeft: newScrollLeft\r\n        });\r\n    };\r\n    CodeEditorWidget.prototype.setScrollTop = function (newScrollTop) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollTop !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow({\r\n            scrollTop: newScrollTop\r\n        });\r\n    };\r\n    CodeEditorWidget.prototype.setScrollPosition = function (position) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow(position);\r\n    };\r\n    CodeEditorWidget.prototype.saveViewState = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        var contributionsState = {};\r\n        var keys = Object.keys(this._contributions);\r\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n            var id = keys_1[_i];\r\n            var contribution = this._contributions[id];\r\n            if (typeof contribution.saveViewState === 'function') {\r\n                contributionsState[id] = contribution.saveViewState();\r\n            }\r\n        }\r\n        var cursorState = this._modelData.cursor.saveState();\r\n        var viewState = this._modelData.viewModel.saveState();\r\n        return {\r\n            cursorState: cursorState,\r\n            viewState: viewState,\r\n            contributionsState: contributionsState\r\n        };\r\n    };\r\n    CodeEditorWidget.prototype.restoreViewState = function (s) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        var codeEditorState = s;\r\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\r\n            var cursorState = codeEditorState.cursorState;\r\n            if (Array.isArray(cursorState)) {\r\n                this._modelData.cursor.restoreState(cursorState);\r\n            }\r\n            else {\r\n                // Backwards compatibility\r\n                this._modelData.cursor.restoreState([cursorState]);\r\n            }\r\n            var contributionsState = codeEditorState.contributionsState || {};\r\n            var keys = Object.keys(this._contributions);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var id = keys[i];\r\n                var contribution = this._contributions[id];\r\n                if (typeof contribution.restoreViewState === 'function') {\r\n                    contribution.restoreViewState(contributionsState[id]);\r\n                }\r\n            }\r\n            var reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\r\n            this._modelData.view.restoreState(reducedState);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getContribution = function (id) {\r\n        return (this._contributions[id] || null);\r\n    };\r\n    CodeEditorWidget.prototype.getActions = function () {\r\n        var result = [];\r\n        var keys = Object.keys(this._actions);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var id = keys[i];\r\n            result.push(this._actions[id]);\r\n        }\r\n        return result;\r\n    };\r\n    CodeEditorWidget.prototype.getSupportedActions = function () {\r\n        var result = this.getActions();\r\n        result = result.filter(function (action) { return action.isSupported(); });\r\n        return result;\r\n    };\r\n    CodeEditorWidget.prototype.getAction = function (id) {\r\n        return this._actions[id] || null;\r\n    };\r\n    CodeEditorWidget.prototype.trigger = function (source, handlerId, payload) {\r\n        payload = payload || {};\r\n        // Special case for typing\r\n        if (handlerId === editorCommon.Handler.Type) {\r\n            if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\r\n                // nothing to do\r\n                return;\r\n            }\r\n            if (source === 'keyboard') {\r\n                this._onWillType.fire(payload.text);\r\n            }\r\n            this._modelData.cursor.trigger(source, handlerId, payload);\r\n            if (source === 'keyboard') {\r\n                this._onDidType.fire(payload.text);\r\n            }\r\n            return;\r\n        }\r\n        // Special case for pasting\r\n        if (handlerId === editorCommon.Handler.Paste) {\r\n            if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\r\n                // nothing to do\r\n                return;\r\n            }\r\n            var startPosition = this._modelData.cursor.getSelection().getStartPosition();\r\n            this._modelData.cursor.trigger(source, handlerId, payload);\r\n            var endPosition = this._modelData.cursor.getSelection().getStartPosition();\r\n            if (source === 'keyboard') {\r\n                this._onDidPaste.fire({\r\n                    range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\r\n                    mode: payload.mode\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        var action = this.getAction(handlerId);\r\n        if (action) {\r\n            Promise.resolve(action.run()).then(undefined, onUnexpectedError);\r\n            return;\r\n        }\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, handlerId, payload);\r\n        if (handlerId === editorCommon.Handler.CompositionStart) {\r\n            this._onDidCompositionStart.fire();\r\n        }\r\n        if (handlerId === editorCommon.Handler.CompositionEnd) {\r\n            this._onDidCompositionEnd.fire();\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._triggerEditorCommand = function (source, handlerId, payload) {\r\n        var _this = this;\r\n        var command = EditorExtensionsRegistry.getEditorCommand(handlerId);\r\n        if (command) {\r\n            payload = payload || {};\r\n            payload.source = source;\r\n            this._instantiationService.invokeFunction(function (accessor) {\r\n                Promise.resolve(command.runEditorCommand(accessor, _this, payload)).then(undefined, onUnexpectedError);\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CodeEditorWidget.prototype._getCursors = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor;\r\n    };\r\n    CodeEditorWidget.prototype.pushUndoStop = function () {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(68 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        this._modelData.model.pushStackElement();\r\n        return true;\r\n    };\r\n    CodeEditorWidget.prototype.executeEdits = function (source, edits, endCursorState) {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(68 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        var cursorStateComputer;\r\n        if (!endCursorState) {\r\n            cursorStateComputer = function () { return null; };\r\n        }\r\n        else if (Array.isArray(endCursorState)) {\r\n            cursorStateComputer = function () { return endCursorState; };\r\n        }\r\n        else {\r\n            cursorStateComputer = endCursorState;\r\n        }\r\n        this._modelData.cursor.executeEdits(source, edits, cursorStateComputer);\r\n        return true;\r\n    };\r\n    CodeEditorWidget.prototype.executeCommand = function (source, command) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommand, command);\r\n    };\r\n    CodeEditorWidget.prototype.executeCommands = function (source, commands) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommands, commands);\r\n    };\r\n    CodeEditorWidget.prototype.changeDecorations = function (callback) {\r\n        if (!this._modelData) {\r\n            // callback will not be called\r\n            return null;\r\n        }\r\n        return this._modelData.model.changeDecorations(callback, this._id);\r\n    };\r\n    CodeEditorWidget.prototype.getLineDecorations = function (lineNumber) {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\r\n    };\r\n    CodeEditorWidget.prototype.deltaDecorations = function (oldDecorations, newDecorations) {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\r\n            return oldDecorations;\r\n        }\r\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\r\n    };\r\n    CodeEditorWidget.prototype.removeDecorations = function (decorationTypeKey) {\r\n        // remove decorations for type and sub type\r\n        var oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\r\n        if (oldDecorationsIds) {\r\n            this.deltaDecorations(oldDecorationsIds, []);\r\n        }\r\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\r\n        }\r\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeSubtypes[decorationTypeKey];\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getLayoutInfo = function () {\r\n        var options = this._configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        return layoutInfo;\r\n    };\r\n    CodeEditorWidget.prototype.createOverviewRuler = function (cssClassName) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.createOverviewRuler(cssClassName);\r\n    };\r\n    CodeEditorWidget.prototype.getContainerDomNode = function () {\r\n        return this._domElement;\r\n    };\r\n    CodeEditorWidget.prototype.getDomNode = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.domNode.domNode;\r\n    };\r\n    CodeEditorWidget.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\r\n    };\r\n    CodeEditorWidget.prototype.layout = function (dimension) {\r\n        this._configuration.observeReferenceElement(dimension);\r\n        this.render();\r\n    };\r\n    CodeEditorWidget.prototype.focus = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.focus();\r\n    };\r\n    CodeEditorWidget.prototype.hasTextFocus = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return false;\r\n        }\r\n        return this._modelData.view.isFocused();\r\n    };\r\n    CodeEditorWidget.prototype.hasWidgetFocus = function () {\r\n        return this._focusTracker && this._focusTracker.hasFocus();\r\n    };\r\n    CodeEditorWidget.prototype.addContentWidget = function (widget) {\r\n        var widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting a content widget with the same id.');\r\n        }\r\n        this._contentWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addContentWidget(widgetData);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.layoutContentWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._contentWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutContentWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.removeContentWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._contentWidgets[widgetId];\r\n            delete this._contentWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeContentWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.addOverlayWidget = function (widget) {\r\n        var widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting an overlay widget with the same id.');\r\n        }\r\n        this._overlayWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addOverlayWidget(widgetData);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.layoutOverlayWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._overlayWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.removeOverlayWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._overlayWidgets[widgetId];\r\n            delete this._overlayWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.changeViewZones = function (callback) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        var hasChanges = this._modelData.view.change(callback);\r\n        if (hasChanges) {\r\n            this._onDidChangeViewZones.fire();\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getTargetAtClientPoint = function (clientX, clientY) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\r\n    };\r\n    CodeEditorWidget.prototype.getScrolledVisiblePosition = function (rawPosition) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        var position = this._modelData.model.validatePosition(rawPosition);\r\n        var options = this._configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        var top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\r\n        var left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\r\n        return {\r\n            top: top,\r\n            left: left,\r\n            height: options.get(49 /* lineHeight */)\r\n        };\r\n    };\r\n    CodeEditorWidget.prototype.getOffsetForColumn = function (lineNumber, column) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return -1;\r\n        }\r\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\r\n    };\r\n    CodeEditorWidget.prototype.render = function (forceRedraw) {\r\n        if (forceRedraw === void 0) { forceRedraw = false; }\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.render(true, forceRedraw);\r\n    };\r\n    CodeEditorWidget.prototype.setAriaOptions = function (options) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.setAriaOptions(options);\r\n    };\r\n    CodeEditorWidget.prototype.applyFontInfo = function (target) {\r\n        Configuration.applyFontInfoSlow(target, this._configuration.options.get(34 /* fontInfo */));\r\n    };\r\n    CodeEditorWidget.prototype._attachModel = function (model) {\r\n        var _this = this;\r\n        if (!model) {\r\n            this._modelData = null;\r\n            return;\r\n        }\r\n        var listenersToRemove = [];\r\n        this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\r\n        this._configuration.setMaxLineNumber(model.getLineCount());\r\n        model.onBeforeAttached();\r\n        var viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), function (callback) { return dom.scheduleAtNextAnimationFrame(callback); });\r\n        listenersToRemove.push(model.onDidChangeDecorations(function (e) { return _this._onDidChangeModelDecorations.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeLanguage(function (e) {\r\n            _this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n            _this._onDidChangeModelLanguage.fire(e);\r\n        }));\r\n        listenersToRemove.push(model.onDidChangeLanguageConfiguration(function (e) { return _this._onDidChangeModelLanguageConfiguration.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeContent(function (e) { return _this._onDidChangeModelContent.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeOptions(function (e) { return _this._onDidChangeModelOptions.fire(e); }));\r\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\r\n        listenersToRemove.push(model.onWillDispose(function () { return _this.setModel(null); }));\r\n        var cursor = new Cursor(this._configuration, model, viewModel);\r\n        listenersToRemove.push(cursor.onDidReachMaxCursorCount(function () {\r\n            _this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", Cursor.MAX_CURSOR_COUNT));\r\n        }));\r\n        listenersToRemove.push(cursor.onDidAttemptReadOnlyEdit(function () {\r\n            _this._onDidAttemptReadOnlyEdit.fire(undefined);\r\n        }));\r\n        listenersToRemove.push(cursor.onDidChange(function (e) {\r\n            var positions = [];\r\n            for (var i = 0, len = e.selections.length; i < len; i++) {\r\n                positions[i] = e.selections[i].getPosition();\r\n            }\r\n            var e1 = {\r\n                position: positions[0],\r\n                secondaryPositions: positions.slice(1),\r\n                reason: e.reason,\r\n                source: e.source\r\n            };\r\n            _this._onDidChangeCursorPosition.fire(e1);\r\n            var e2 = {\r\n                selection: e.selections[0],\r\n                secondarySelections: e.selections.slice(1),\r\n                modelVersionId: e.modelVersionId,\r\n                oldSelections: e.oldSelections,\r\n                oldModelVersionId: e.oldModelVersionId,\r\n                source: e.source,\r\n                reason: e.reason\r\n            };\r\n            _this._onDidChangeCursorSelection.fire(e2);\r\n        }));\r\n        var _a = this._createView(viewModel, cursor), view = _a[0], hasRealView = _a[1];\r\n        if (hasRealView) {\r\n            this._domElement.appendChild(view.domNode.domNode);\r\n            var keys = Object.keys(this._contentWidgets);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var widgetId = keys[i];\r\n                view.addContentWidget(this._contentWidgets[widgetId]);\r\n            }\r\n            keys = Object.keys(this._overlayWidgets);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var widgetId = keys[i];\r\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\r\n            }\r\n            view.render(false, true);\r\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\r\n        }\r\n        this._modelData = new ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove);\r\n    };\r\n    CodeEditorWidget.prototype._createView = function (viewModel, cursor) {\r\n        var _this = this;\r\n        var commandDelegate;\r\n        if (this.isSimpleWidget) {\r\n            commandDelegate = {\r\n                executeEditorCommand: function (editorCommand, args) {\r\n                    editorCommand.runCoreEditorCommand(cursor, args);\r\n                },\r\n                paste: function (source, text, pasteOnNewLine, multicursorText, mode) {\r\n                    _this.trigger(source, editorCommon.Handler.Paste, { text: text, pasteOnNewLine: pasteOnNewLine, multicursorText: multicursorText, mode: mode });\r\n                },\r\n                type: function (source, text) {\r\n                    _this.trigger(source, editorCommon.Handler.Type, { text: text });\r\n                },\r\n                replacePreviousChar: function (source, text, replaceCharCnt) {\r\n                    _this.trigger(source, editorCommon.Handler.ReplacePreviousChar, { text: text, replaceCharCnt: replaceCharCnt });\r\n                },\r\n                compositionStart: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.CompositionStart, undefined);\r\n                },\r\n                compositionEnd: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.CompositionEnd, undefined);\r\n                },\r\n                cut: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.Cut, undefined);\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            commandDelegate = {\r\n                executeEditorCommand: function (editorCommand, args) {\r\n                    editorCommand.runCoreEditorCommand(cursor, args);\r\n                },\r\n                paste: function (source, text, pasteOnNewLine, multicursorText, mode) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Paste, {\r\n                        text: text,\r\n                        pasteOnNewLine: pasteOnNewLine,\r\n                        multicursorText: multicursorText,\r\n                        mode: mode\r\n                    });\r\n                },\r\n                type: function (source, text) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Type, {\r\n                        text: text\r\n                    });\r\n                },\r\n                replacePreviousChar: function (source, text, replaceCharCnt) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.ReplacePreviousChar, {\r\n                        text: text,\r\n                        replaceCharCnt: replaceCharCnt\r\n                    });\r\n                },\r\n                compositionStart: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.CompositionStart, {});\r\n                },\r\n                compositionEnd: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.CompositionEnd, {});\r\n                },\r\n                cut: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Cut, {});\r\n                }\r\n            };\r\n        }\r\n        var viewOutgoingEvents = new ViewOutgoingEvents(viewModel);\r\n        viewOutgoingEvents.onDidContentSizeChange = function (e) { return _this._onDidContentSizeChange.fire(e); };\r\n        viewOutgoingEvents.onDidScroll = function (e) { return _this._onDidScrollChange.fire(e); };\r\n        viewOutgoingEvents.onDidGainFocus = function () { return _this._editorTextFocus.setValue(true); };\r\n        viewOutgoingEvents.onDidLoseFocus = function () { return _this._editorTextFocus.setValue(false); };\r\n        viewOutgoingEvents.onContextMenu = function (e) { return _this._onContextMenu.fire(e); };\r\n        viewOutgoingEvents.onMouseDown = function (e) { return _this._onMouseDown.fire(e); };\r\n        viewOutgoingEvents.onMouseUp = function (e) { return _this._onMouseUp.fire(e); };\r\n        viewOutgoingEvents.onMouseDrag = function (e) { return _this._onMouseDrag.fire(e); };\r\n        viewOutgoingEvents.onMouseDrop = function (e) { return _this._onMouseDrop.fire(e); };\r\n        viewOutgoingEvents.onKeyUp = function (e) { return _this._onKeyUp.fire(e); };\r\n        viewOutgoingEvents.onMouseMove = function (e) { return _this._onMouseMove.fire(e); };\r\n        viewOutgoingEvents.onMouseLeave = function (e) { return _this._onMouseLeave.fire(e); };\r\n        viewOutgoingEvents.onMouseWheel = function (e) { return _this._onMouseWheel.fire(e); };\r\n        viewOutgoingEvents.onKeyDown = function (e) { return _this._onKeyDown.fire(e); };\r\n        var view = new View(commandDelegate, this._configuration, this._themeService, viewModel, cursor, viewOutgoingEvents);\r\n        return [view, true];\r\n    };\r\n    CodeEditorWidget.prototype._postDetachModelCleanup = function (detachedModel) {\r\n        if (detachedModel) {\r\n            detachedModel.removeAllDecorationsWithOwnerId(this._id);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._detachModel = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        var model = this._modelData.model;\r\n        var removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\r\n        this._modelData.dispose();\r\n        this._modelData = null;\r\n        this._domElement.removeAttribute('data-mode-id');\r\n        if (removeDomNode) {\r\n            this._domElement.removeChild(removeDomNode);\r\n        }\r\n        return model;\r\n    };\r\n    CodeEditorWidget.prototype._removeDecorationType = function (key) {\r\n        this._codeEditorService.removeDecorationType(key);\r\n    };\r\n    CodeEditorWidget.prototype.hasModel = function () {\r\n        return (this._modelData !== null);\r\n    };\r\n    CodeEditorWidget = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], CodeEditorWidget);\r\n    return CodeEditorWidget;\r\n}(Disposable));\r\nexport { CodeEditorWidget };\r\nvar BooleanEventEmitter = /** @class */ (function (_super) {\r\n    __extends(BooleanEventEmitter, _super);\r\n    function BooleanEventEmitter() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidChangeToTrue = _this._register(new Emitter());\r\n        _this.onDidChangeToTrue = _this._onDidChangeToTrue.event;\r\n        _this._onDidChangeToFalse = _this._register(new Emitter());\r\n        _this.onDidChangeToFalse = _this._onDidChangeToFalse.event;\r\n        _this._value = 0 /* NotSet */;\r\n        return _this;\r\n    }\r\n    BooleanEventEmitter.prototype.setValue = function (_value) {\r\n        var value = (_value ? 2 /* True */ : 1 /* False */);\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n        this._value = value;\r\n        if (this._value === 2 /* True */) {\r\n            this._onDidChangeToTrue.fire();\r\n        }\r\n        else if (this._value === 1 /* False */) {\r\n            this._onDidChangeToFalse.fire();\r\n        }\r\n    };\r\n    return BooleanEventEmitter;\r\n}(Disposable));\r\nexport { BooleanEventEmitter };\r\nvar EditorContextKeysManager = /** @class */ (function (_super) {\r\n    __extends(EditorContextKeysManager, _super);\r\n    function EditorContextKeysManager(editor, contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        contextKeyService.createKey('editorId', editor.getId());\r\n        _this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\r\n        _this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\r\n        _this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\r\n        _this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\r\n        _this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\r\n        _this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\r\n        _this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\r\n        _this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\r\n        _this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\r\n        _this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\r\n        _this._register(_this._editor.onDidChangeConfiguration(function () { return _this._updateFromConfig(); }));\r\n        _this._register(_this._editor.onDidChangeCursorSelection(function () { return _this._updateFromSelection(); }));\r\n        _this._register(_this._editor.onDidFocusEditorWidget(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidBlurEditorWidget(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidFocusEditorText(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidBlurEditorText(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidChangeModel(function () { return _this._updateFromModel(); }));\r\n        _this._register(_this._editor.onDidChangeConfiguration(function () { return _this._updateFromModel(); }));\r\n        _this._updateFromConfig();\r\n        _this._updateFromSelection();\r\n        _this._updateFromFocus();\r\n        _this._updateFromModel();\r\n        _this._editorSimpleInput.set(_this._editor.isSimpleWidget);\r\n        return _this;\r\n    }\r\n    EditorContextKeysManager.prototype._updateFromConfig = function () {\r\n        var options = this._editor.getOptions();\r\n        this._editorTabMovesFocus.set(options.get(106 /* tabFocusMode */));\r\n        this._editorReadonly.set(options.get(68 /* readOnly */));\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromSelection = function () {\r\n        var selections = this._editor.getSelections();\r\n        if (!selections) {\r\n            this._hasMultipleSelections.reset();\r\n            this._hasNonEmptySelection.reset();\r\n        }\r\n        else {\r\n            this._hasMultipleSelections.set(selections.length > 1);\r\n            this._hasNonEmptySelection.set(selections.some(function (s) { return !s.isEmpty(); }));\r\n        }\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromFocus = function () {\r\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\r\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\r\n        this._textInputFocus.set(this._editor.hasTextFocus());\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromModel = function () {\r\n        var model = this._editor.getModel();\r\n        this._canUndo.set(Boolean(model && model.canUndo()));\r\n        this._canRedo.set(Boolean(model && model.canRedo()));\r\n    };\r\n    return EditorContextKeysManager;\r\n}(Disposable));\r\nvar EditorModeContext = /** @class */ (function (_super) {\r\n    __extends(EditorModeContext, _super);\r\n    function EditorModeContext(_editor, _contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._contextKeyService = _contextKeyService;\r\n        _this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\r\n        _this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\r\n        _this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\r\n        _this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\r\n        _this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\r\n        _this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\r\n        _this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\r\n        _this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\r\n        _this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\r\n        _this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\r\n        _this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\r\n        _this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        _this._isInWalkThrough = EditorContextKeys.isInEmbeddedEditor.bindTo(_contextKeyService);\r\n        var update = function () { return _this._update(); };\r\n        // update when model/mode changes\r\n        _this._register(_editor.onDidChangeModel(update));\r\n        _this._register(_editor.onDidChangeModelLanguage(update));\r\n        // update when registries change\r\n        _this._register(modes.CompletionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.CodeActionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.CodeLensProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DefinitionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DeclarationProviderRegistry.onDidChange(update));\r\n        _this._register(modes.ImplementationProviderRegistry.onDidChange(update));\r\n        _this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.HoverProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\r\n        _this._register(modes.ReferenceProviderRegistry.onDidChange(update));\r\n        _this._register(modes.RenameProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\r\n        _this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\r\n        update();\r\n        return _this;\r\n    }\r\n    EditorModeContext.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    EditorModeContext.prototype.reset = function () {\r\n        var _this = this;\r\n        this._contextKeyService.bufferChangeEvents(function () {\r\n            _this._langId.reset();\r\n            _this._hasCompletionItemProvider.reset();\r\n            _this._hasCodeActionsProvider.reset();\r\n            _this._hasCodeLensProvider.reset();\r\n            _this._hasDefinitionProvider.reset();\r\n            _this._hasDeclarationProvider.reset();\r\n            _this._hasImplementationProvider.reset();\r\n            _this._hasTypeDefinitionProvider.reset();\r\n            _this._hasHoverProvider.reset();\r\n            _this._hasDocumentHighlightProvider.reset();\r\n            _this._hasDocumentSymbolProvider.reset();\r\n            _this._hasReferenceProvider.reset();\r\n            _this._hasRenameProvider.reset();\r\n            _this._hasDocumentFormattingProvider.reset();\r\n            _this._hasDocumentSelectionFormattingProvider.reset();\r\n            _this._hasSignatureHelpProvider.reset();\r\n            _this._isInWalkThrough.reset();\r\n        });\r\n    };\r\n    EditorModeContext.prototype._update = function () {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._contextKeyService.bufferChangeEvents(function () {\r\n            _this._langId.set(model.getLanguageIdentifier().language);\r\n            _this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\r\n            _this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\r\n            _this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\r\n            _this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\r\n            _this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\r\n            _this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\r\n            _this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\r\n            _this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\r\n            _this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\r\n            _this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\r\n            _this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\r\n            _this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\r\n            _this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\r\n            _this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            _this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            _this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            _this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            _this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\r\n        });\r\n    };\r\n    return EditorModeContext;\r\n}(Disposable));\r\nexport { EditorModeContext };\r\nvar CodeEditorWidgetFocusTracker = /** @class */ (function (_super) {\r\n    __extends(CodeEditorWidgetFocusTracker, _super);\r\n    function CodeEditorWidgetFocusTracker(domElement) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onChange = _this._register(new Emitter());\r\n        _this.onChange = _this._onChange.event;\r\n        _this._hasFocus = false;\r\n        _this._domFocusTracker = _this._register(dom.trackFocus(domElement));\r\n        _this._register(_this._domFocusTracker.onDidFocus(function () {\r\n            _this._hasFocus = true;\r\n            _this._onChange.fire(undefined);\r\n        }));\r\n        _this._register(_this._domFocusTracker.onDidBlur(function () {\r\n            _this._hasFocus = false;\r\n            _this._onChange.fire(undefined);\r\n        }));\r\n        return _this;\r\n    }\r\n    CodeEditorWidgetFocusTracker.prototype.hasFocus = function () {\r\n        return this._hasFocus;\r\n    };\r\n    return CodeEditorWidgetFocusTracker;\r\n}(Disposable));\r\nvar squigglyStart = encodeURIComponent(\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='\");\r\nvar squigglyEnd = encodeURIComponent(\"'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>\");\r\nfunction getSquigglySVGData(color) {\r\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\r\n}\r\nvar dotdotdotStart = encodeURIComponent(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"3\\\" width=\\\"12\\\"><g fill=\\\"\");\r\nvar dotdotdotEnd = encodeURIComponent(\"\\\"><circle cx=\\\"1\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"5\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"9\\\" cy=\\\"1\\\" r=\\\"1\\\"/></g></svg>\");\r\nfunction getDotDotDotSVGData(color) {\r\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var errorBorderColor = theme.getColor(editorErrorBorder);\r\n    if (errorBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { border-bottom: 4px double \" + errorBorderColor + \"; }\");\r\n    }\r\n    var errorForeground = theme.getColor(editorErrorForeground);\r\n    if (errorForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(errorForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var warningBorderColor = theme.getColor(editorWarningBorder);\r\n    if (warningBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { border-bottom: 4px double \" + warningBorderColor + \"; }\");\r\n    }\r\n    var warningForeground = theme.getColor(editorWarningForeground);\r\n    if (warningForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(warningForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var infoBorderColor = theme.getColor(editorInfoBorder);\r\n    if (infoBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { border-bottom: 4px double \" + infoBorderColor + \"; }\");\r\n    }\r\n    var infoForeground = theme.getColor(editorInfoForeground);\r\n    if (infoForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(infoForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var hintBorderColor = theme.getColor(editorHintBorder);\r\n    if (hintBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { border-bottom: 2px dotted \" + hintBorderColor + \"; }\");\r\n    }\r\n    var hintForeground = theme.getColor(editorHintForeground);\r\n    if (hintForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getDotDotDotSVGData(hintForeground) + \"\\\") no-repeat bottom left; }\");\r\n    }\r\n    var unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\r\n    if (unnecessaryForeground) {\r\n        collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */ + \" { opacity: \" + unnecessaryForeground.rgba.a + \"; }\");\r\n    }\r\n    var unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\r\n    if (unnecessaryBorder) {\r\n        collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */ + \" { border-bottom: 2px dashed \" + unnecessaryBorder + \"; }\");\r\n    }\r\n    var deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\r\n    collector.addRule(\".monaco-editor .\" + \"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */ + \" { text-decoration: line-through; text-decoration-color: \" + deprecatedForeground + \"}\");\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}