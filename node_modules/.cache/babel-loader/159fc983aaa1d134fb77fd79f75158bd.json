{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './contextMenuHandler.css';\nimport { ActionRunner } from '../../../base/common/actions.js';\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\nimport { EventType, $, removeNode } from '../../../base/browser/dom.js';\nimport { attachMenuStyler } from '../../theme/common/styler.js';\nimport { domEvent } from '../../../base/browser/event.js';\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\nvar ContextMenuHandler = /** @class */function () {\n  function ContextMenuHandler(contextViewService, telemetryService, notificationService, keybindingService, themeService) {\n    this.contextViewService = contextViewService;\n    this.telemetryService = telemetryService;\n    this.notificationService = notificationService;\n    this.keybindingService = keybindingService;\n    this.themeService = themeService;\n    this.focusToReturn = null;\n    this.block = null;\n    this.options = {\n      blockMouse: true\n    };\n  }\n  ContextMenuHandler.prototype.configure = function (options) {\n    this.options = options;\n  };\n  ContextMenuHandler.prototype.showContextMenu = function (delegate) {\n    var _this = this;\n    var actions = delegate.getActions();\n    if (!actions.length) {\n      return; // Don't render an empty context menu\n    }\n\n    this.focusToReturn = document.activeElement;\n    var menu;\n    this.contextViewService.showContextView({\n      getAnchor: function getAnchor() {\n        return delegate.getAnchor();\n      },\n      canRelayout: false,\n      anchorAlignment: delegate.anchorAlignment,\n      render: function render(container) {\n        var className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\n        if (className) {\n          container.className += ' ' + className;\n        }\n        // Render invisible div to block mouse interaction in the rest of the UI\n        if (_this.options.blockMouse) {\n          _this.block = container.appendChild($('.context-view-block'));\n        }\n        var menuDisposables = new DisposableStore();\n        var actionRunner = delegate.actionRunner || new ActionRunner();\n        actionRunner.onDidBeforeRun(_this.onActionRun, _this, menuDisposables);\n        actionRunner.onDidRun(_this.onDidActionRun, _this, menuDisposables);\n        menu = new Menu(container, actions, {\n          actionViewItemProvider: delegate.getActionViewItem,\n          context: delegate.getActionsContext ? delegate.getActionsContext() : null,\n          actionRunner: actionRunner,\n          getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : function (action) {\n            return _this.keybindingService.lookupKeybinding(action.id);\n          }\n        });\n        menuDisposables.add(attachMenuStyler(menu, _this.themeService));\n        menu.onDidCancel(function () {\n          return _this.contextViewService.hideContextView(true);\n        }, null, menuDisposables);\n        menu.onDidBlur(function () {\n          return _this.contextViewService.hideContextView(true);\n        }, null, menuDisposables);\n        domEvent(window, EventType.BLUR)(function () {\n          _this.contextViewService.hideContextView(true);\n        }, null, menuDisposables);\n        domEvent(window, EventType.MOUSE_DOWN)(function (e) {\n          if (e.defaultPrevented) {\n            return;\n          }\n          var event = new StandardMouseEvent(e);\n          var element = event.target;\n          // Don't do anything as we are likely creating a context menu\n          if (event.rightButton) {\n            return;\n          }\n          while (element) {\n            if (element === container) {\n              return;\n            }\n            element = element.parentElement;\n          }\n          _this.contextViewService.hideContextView(true);\n        }, null, menuDisposables);\n        return combinedDisposable(menuDisposables, menu);\n      },\n      focus: function focus() {\n        if (menu) {\n          menu.focus(!!delegate.autoSelectFirstItem);\n        }\n      },\n      onHide: function onHide(didCancel) {\n        if (delegate.onHide) {\n          delegate.onHide(!!didCancel);\n        }\n        if (_this.block) {\n          removeNode(_this.block);\n          _this.block = null;\n        }\n        if (_this.focusToReturn) {\n          _this.focusToReturn.focus();\n        }\n      }\n    });\n  };\n  ContextMenuHandler.prototype.onActionRun = function (e) {\n    if (this.telemetryService) {\n      this.telemetryService.publicLog2('workbenchActionExecuted', {\n        id: e.action.id,\n        from: 'contextMenu'\n      });\n    }\n    this.contextViewService.hideContextView(false);\n    // Restore focus here\n    if (this.focusToReturn) {\n      this.focusToReturn.focus();\n    }\n  };\n  ContextMenuHandler.prototype.onDidActionRun = function (e) {\n    if (e.error && this.notificationService) {\n      this.notificationService.error(e.error);\n    }\n  };\n  return ContextMenuHandler;\n}();\nexport { ContextMenuHandler };","map":{"version":3,"names":["ActionRunner","combinedDisposable","DisposableStore","Menu","EventType","$","removeNode","attachMenuStyler","domEvent","StandardMouseEvent","ContextMenuHandler","contextViewService","telemetryService","notificationService","keybindingService","themeService","focusToReturn","block","options","blockMouse","prototype","configure","showContextMenu","delegate","_this","actions","getActions","length","document","activeElement","menu","showContextView","getAnchor","canRelayout","anchorAlignment","render","container","className","getMenuClassName","appendChild","menuDisposables","actionRunner","onDidBeforeRun","onActionRun","onDidRun","onDidActionRun","actionViewItemProvider","getActionViewItem","context","getActionsContext","getKeyBinding","action","lookupKeybinding","id","add","onDidCancel","hideContextView","onDidBlur","window","BLUR","MOUSE_DOWN","e","defaultPrevented","event","element","target","rightButton","parentElement","focus","autoSelectFirstItem","onHide","didCancel","publicLog2","from","error"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextMenuHandler.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './contextMenuHandler.css';\r\nimport { ActionRunner } from '../../../base/common/actions.js';\r\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\r\nimport { EventType, $, removeNode } from '../../../base/browser/dom.js';\r\nimport { attachMenuStyler } from '../../theme/common/styler.js';\r\nimport { domEvent } from '../../../base/browser/event.js';\r\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\r\nvar ContextMenuHandler = /** @class */ (function () {\r\n    function ContextMenuHandler(contextViewService, telemetryService, notificationService, keybindingService, themeService) {\r\n        this.contextViewService = contextViewService;\r\n        this.telemetryService = telemetryService;\r\n        this.notificationService = notificationService;\r\n        this.keybindingService = keybindingService;\r\n        this.themeService = themeService;\r\n        this.focusToReturn = null;\r\n        this.block = null;\r\n        this.options = { blockMouse: true };\r\n    }\r\n    ContextMenuHandler.prototype.configure = function (options) {\r\n        this.options = options;\r\n    };\r\n    ContextMenuHandler.prototype.showContextMenu = function (delegate) {\r\n        var _this = this;\r\n        var actions = delegate.getActions();\r\n        if (!actions.length) {\r\n            return; // Don't render an empty context menu\r\n        }\r\n        this.focusToReturn = document.activeElement;\r\n        var menu;\r\n        this.contextViewService.showContextView({\r\n            getAnchor: function () { return delegate.getAnchor(); },\r\n            canRelayout: false,\r\n            anchorAlignment: delegate.anchorAlignment,\r\n            render: function (container) {\r\n                var className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\r\n                if (className) {\r\n                    container.className += ' ' + className;\r\n                }\r\n                // Render invisible div to block mouse interaction in the rest of the UI\r\n                if (_this.options.blockMouse) {\r\n                    _this.block = container.appendChild($('.context-view-block'));\r\n                }\r\n                var menuDisposables = new DisposableStore();\r\n                var actionRunner = delegate.actionRunner || new ActionRunner();\r\n                actionRunner.onDidBeforeRun(_this.onActionRun, _this, menuDisposables);\r\n                actionRunner.onDidRun(_this.onDidActionRun, _this, menuDisposables);\r\n                menu = new Menu(container, actions, {\r\n                    actionViewItemProvider: delegate.getActionViewItem,\r\n                    context: delegate.getActionsContext ? delegate.getActionsContext() : null,\r\n                    actionRunner: actionRunner,\r\n                    getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : function (action) { return _this.keybindingService.lookupKeybinding(action.id); }\r\n                });\r\n                menuDisposables.add(attachMenuStyler(menu, _this.themeService));\r\n                menu.onDidCancel(function () { return _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                menu.onDidBlur(function () { return _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                domEvent(window, EventType.BLUR)(function () { _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                domEvent(window, EventType.MOUSE_DOWN)(function (e) {\r\n                    if (e.defaultPrevented) {\r\n                        return;\r\n                    }\r\n                    var event = new StandardMouseEvent(e);\r\n                    var element = event.target;\r\n                    // Don't do anything as we are likely creating a context menu\r\n                    if (event.rightButton) {\r\n                        return;\r\n                    }\r\n                    while (element) {\r\n                        if (element === container) {\r\n                            return;\r\n                        }\r\n                        element = element.parentElement;\r\n                    }\r\n                    _this.contextViewService.hideContextView(true);\r\n                }, null, menuDisposables);\r\n                return combinedDisposable(menuDisposables, menu);\r\n            },\r\n            focus: function () {\r\n                if (menu) {\r\n                    menu.focus(!!delegate.autoSelectFirstItem);\r\n                }\r\n            },\r\n            onHide: function (didCancel) {\r\n                if (delegate.onHide) {\r\n                    delegate.onHide(!!didCancel);\r\n                }\r\n                if (_this.block) {\r\n                    removeNode(_this.block);\r\n                    _this.block = null;\r\n                }\r\n                if (_this.focusToReturn) {\r\n                    _this.focusToReturn.focus();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ContextMenuHandler.prototype.onActionRun = function (e) {\r\n        if (this.telemetryService) {\r\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'contextMenu' });\r\n        }\r\n        this.contextViewService.hideContextView(false);\r\n        // Restore focus here\r\n        if (this.focusToReturn) {\r\n            this.focusToReturn.focus();\r\n        }\r\n    };\r\n    ContextMenuHandler.prototype.onDidActionRun = function (e) {\r\n        if (e.error && this.notificationService) {\r\n            this.notificationService.error(e.error);\r\n        }\r\n    };\r\n    return ContextMenuHandler;\r\n}());\r\nexport { ContextMenuHandler };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}