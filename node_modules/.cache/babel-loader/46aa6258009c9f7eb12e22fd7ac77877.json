{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport { RunOnceScheduler, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { toDisposable, DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../browser/core/editorState.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { CodeLensProviderRegistry } from '../../common/modes.js';\nimport { getCodeLensData } from './codelens.js';\nimport { CodeLensWidget, CodeLensHelper } from './codelensWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { hash } from '../../../base/common/hash.js';\nvar CodeLensContribution = /** @class */function () {\n  function CodeLensContribution(_editor, _commandService, _notificationService, _codeLensCache) {\n    var _this = this;\n    this._editor = _editor;\n    this._commandService = _commandService;\n    this._notificationService = _notificationService;\n    this._codeLensCache = _codeLensCache;\n    this._globalToDispose = new DisposableStore();\n    this._localToDispose = new DisposableStore();\n    this._lenses = [];\n    this._oldCodeLensModels = new DisposableStore();\n    this._modelChangeCounter = 0;\n    this._isEnabled = this._editor.getOption(11 /* codeLens */);\n    this._globalToDispose.add(this._editor.onDidChangeModel(function () {\n      return _this._onModelChange();\n    }));\n    this._globalToDispose.add(this._editor.onDidChangeModelLanguage(function () {\n      return _this._onModelChange();\n    }));\n    this._globalToDispose.add(this._editor.onDidChangeConfiguration(function () {\n      var prevIsEnabled = _this._isEnabled;\n      _this._isEnabled = _this._editor.getOption(11 /* codeLens */);\n      if (prevIsEnabled !== _this._isEnabled) {\n        _this._onModelChange();\n      }\n    }));\n    this._globalToDispose.add(CodeLensProviderRegistry.onDidChange(this._onModelChange, this));\n    this._globalToDispose.add(this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(34 /* fontInfo */)) {\n        _this._updateLensStyle();\n      }\n    }));\n    this._onModelChange();\n    this._styleClassName = hash(this._editor.getId()).toString(16);\n    this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode()) ? this._editor.getContainerDomNode() : undefined);\n    this._updateLensStyle();\n  }\n  CodeLensContribution.prototype.dispose = function () {\n    this._localDispose();\n    this._globalToDispose.dispose();\n    this._oldCodeLensModels.dispose();\n    dispose(this._currentCodeLensModel);\n  };\n  CodeLensContribution.prototype._updateLensStyle = function () {\n    var options = this._editor.getOptions();\n    var fontInfo = options.get(34 /* fontInfo */);\n    var lineHeight = options.get(49 /* lineHeight */);\n    var height = Math.round(lineHeight * 1.1);\n    var fontSize = Math.round(fontInfo.fontSize * 0.9);\n    var newStyle = \"\\n\\t\\t.monaco-editor .codelens-decoration.\" + this._styleClassName + \" { height: \" + height + \"px; line-height: \" + lineHeight + \"px; font-size: \" + fontSize + \"px; padding-right: \" + Math.round(fontInfo.fontSize * 0.45) + \"px;}\\n\\t\\t.monaco-editor .codelens-decoration.\" + this._styleClassName + \" > a > .codicon { line-height: \" + lineHeight + \"px; font-size: \" + fontSize + \"px; }\\n\\t\\t\";\n    this._styleElement.innerHTML = newStyle;\n  };\n  CodeLensContribution.prototype._localDispose = function () {\n    if (this._currentFindCodeLensSymbolsPromise) {\n      this._currentFindCodeLensSymbolsPromise.cancel();\n      this._currentFindCodeLensSymbolsPromise = undefined;\n      this._modelChangeCounter++;\n    }\n    if (this._currentResolveCodeLensSymbolsPromise) {\n      this._currentResolveCodeLensSymbolsPromise.cancel();\n      this._currentResolveCodeLensSymbolsPromise = undefined;\n    }\n    this._localToDispose.clear();\n    this._oldCodeLensModels.clear();\n    dispose(this._currentCodeLensModel);\n  };\n  CodeLensContribution.prototype._onModelChange = function () {\n    var _this = this;\n    this._localDispose();\n    var model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    if (!this._isEnabled) {\n      return;\n    }\n    var cachedLenses = this._codeLensCache.get(model);\n    if (cachedLenses) {\n      this._renderCodeLensSymbols(cachedLenses);\n    }\n    if (!CodeLensProviderRegistry.has(model)) {\n      // no provider -> return but check with\n      // cached lenses. they expire after 30 seconds\n      if (cachedLenses) {\n        this._localToDispose.add(disposableTimeout(function () {\n          var cachedLensesNow = _this._codeLensCache.get(model);\n          if (cachedLenses === cachedLensesNow) {\n            _this._codeLensCache.delete(model);\n            _this._onModelChange();\n          }\n        }, 30 * 1000));\n      }\n      return;\n    }\n    for (var _i = 0, _a = CodeLensProviderRegistry.all(model); _i < _a.length; _i++) {\n      var provider = _a[_i];\n      if (typeof provider.onDidChange === 'function') {\n        var registration = provider.onDidChange(function () {\n          return scheduler.schedule();\n        });\n        this._localToDispose.add(registration);\n      }\n    }\n    var detectVisibleLenses = this._detectVisibleLenses = new RunOnceScheduler(function () {\n      return _this._onViewportChanged();\n    }, 250);\n    var scheduler = new RunOnceScheduler(function () {\n      var counterValue = ++_this._modelChangeCounter;\n      if (_this._currentFindCodeLensSymbolsPromise) {\n        _this._currentFindCodeLensSymbolsPromise.cancel();\n      }\n      _this._currentFindCodeLensSymbolsPromise = createCancelablePromise(function (token) {\n        return getCodeLensData(model, token);\n      });\n      _this._currentFindCodeLensSymbolsPromise.then(function (result) {\n        if (counterValue === _this._modelChangeCounter) {\n          // only the last one wins\n          if (_this._currentCodeLensModel) {\n            _this._oldCodeLensModels.add(_this._currentCodeLensModel);\n          }\n          _this._currentCodeLensModel = result;\n          // cache model to reduce flicker\n          _this._codeLensCache.put(model, result);\n          // render lenses\n          _this._renderCodeLensSymbols(result);\n          detectVisibleLenses.schedule();\n        }\n      }, onUnexpectedError);\n    }, 250);\n    this._localToDispose.add(scheduler);\n    this._localToDispose.add(detectVisibleLenses);\n    this._localToDispose.add(this._editor.onDidChangeModelContent(function () {\n      _this._editor.changeDecorations(function (decorationsAccessor) {\n        _this._editor.changeViewZones(function (viewZonesAccessor) {\n          var toDispose = [];\n          var lastLensLineNumber = -1;\n          _this._lenses.forEach(function (lens) {\n            if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n              // invalid -> lens collapsed, attach range doesn't exist anymore\n              // line_number -> lenses should never be on the same line\n              toDispose.push(lens);\n            } else {\n              lens.update(viewZonesAccessor);\n              lastLensLineNumber = lens.getLineNumber();\n            }\n          });\n          var helper = new CodeLensHelper();\n          toDispose.forEach(function (l) {\n            l.dispose(helper, viewZonesAccessor);\n            _this._lenses.splice(_this._lenses.indexOf(l), 1);\n          });\n          helper.commit(decorationsAccessor);\n        });\n      });\n      // Compute new `visible` code lenses\n      detectVisibleLenses.schedule();\n      // Ask for all references again\n      scheduler.schedule();\n    }));\n    this._localToDispose.add(this._editor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged && _this._lenses.length > 0) {\n        detectVisibleLenses.schedule();\n      }\n    }));\n    this._localToDispose.add(this._editor.onDidLayoutChange(function () {\n      detectVisibleLenses.schedule();\n    }));\n    this._localToDispose.add(toDisposable(function () {\n      if (_this._editor.getModel()) {\n        var scrollState = StableEditorScrollState.capture(_this._editor);\n        _this._editor.changeDecorations(function (decorationsAccessor) {\n          _this._editor.changeViewZones(function (viewZonesAccessor) {\n            _this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n          });\n        });\n        scrollState.restore(_this._editor);\n      } else {\n        // No accessors available\n        _this._disposeAllLenses(undefined, undefined);\n      }\n    }));\n    this._localToDispose.add(this._editor.onMouseUp(function (e) {\n      var _a;\n      if (e.target.type !== 9 /* CONTENT_WIDGET */) {\n        return;\n      }\n      var target = e.target.element;\n      if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n        target = target.parentElement;\n      }\n      if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n        for (var _i = 0, _b = _this._lenses; _i < _b.length; _i++) {\n          var lens = _b[_i];\n          var command = lens.getCommand(target);\n          if (command) {\n            (_a = _this._commandService).executeCommand.apply(_a, __spreadArrays([command.id], command.arguments || [])).catch(function (err) {\n              return _this._notificationService.error(err);\n            });\n            break;\n          }\n        }\n      }\n    }));\n    scheduler.schedule();\n  };\n  CodeLensContribution.prototype._disposeAllLenses = function (decChangeAccessor, viewZoneChangeAccessor) {\n    var helper = new CodeLensHelper();\n    for (var _i = 0, _a = this._lenses; _i < _a.length; _i++) {\n      var lens = _a[_i];\n      lens.dispose(helper, viewZoneChangeAccessor);\n    }\n    if (decChangeAccessor) {\n      helper.commit(decChangeAccessor);\n    }\n    this._lenses = [];\n  };\n  CodeLensContribution.prototype._renderCodeLensSymbols = function (symbols) {\n    var _this = this;\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    var maxLineNumber = this._editor.getModel().getLineCount();\n    var groups = [];\n    var lastGroup;\n    for (var _i = 0, _a = symbols.lenses; _i < _a.length; _i++) {\n      var symbol = _a[_i];\n      var line = symbol.symbol.range.startLineNumber;\n      if (line < 1 || line > maxLineNumber) {\n        // invalid code lens\n        continue;\n      } else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n        // on same line as previous\n        lastGroup.push(symbol);\n      } else {\n        // on later line as previous\n        lastGroup = [symbol];\n        groups.push(lastGroup);\n      }\n    }\n    var scrollState = StableEditorScrollState.capture(this._editor);\n    this._editor.changeDecorations(function (decorationsAccessor) {\n      _this._editor.changeViewZones(function (viewZoneAccessor) {\n        var helper = new CodeLensHelper();\n        var codeLensIndex = 0;\n        var groupsIndex = 0;\n        while (groupsIndex < groups.length && codeLensIndex < _this._lenses.length) {\n          var symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n          var codeLensLineNumber = _this._lenses[codeLensIndex].getLineNumber();\n          if (codeLensLineNumber < symbolsLineNumber) {\n            _this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n            _this._lenses.splice(codeLensIndex, 1);\n          } else if (codeLensLineNumber === symbolsLineNumber) {\n            _this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n            groupsIndex++;\n            codeLensIndex++;\n          } else {\n            _this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], _this._editor, _this._styleClassName, helper, viewZoneAccessor, function () {\n              return _this._detectVisibleLenses && _this._detectVisibleLenses.schedule();\n            }));\n            codeLensIndex++;\n            groupsIndex++;\n          }\n        }\n        // Delete extra code lenses\n        while (codeLensIndex < _this._lenses.length) {\n          _this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n          _this._lenses.splice(codeLensIndex, 1);\n        }\n        // Create extra symbols\n        while (groupsIndex < groups.length) {\n          _this._lenses.push(new CodeLensWidget(groups[groupsIndex], _this._editor, _this._styleClassName, helper, viewZoneAccessor, function () {\n            return _this._detectVisibleLenses && _this._detectVisibleLenses.schedule();\n          }));\n          groupsIndex++;\n        }\n        helper.commit(decorationsAccessor);\n      });\n    });\n    scrollState.restore(this._editor);\n  };\n  CodeLensContribution.prototype._onViewportChanged = function () {\n    var _this = this;\n    if (this._currentResolveCodeLensSymbolsPromise) {\n      this._currentResolveCodeLensSymbolsPromise.cancel();\n      this._currentResolveCodeLensSymbolsPromise = undefined;\n    }\n    var model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    var toResolve = [];\n    var lenses = [];\n    this._lenses.forEach(function (lens) {\n      var request = lens.computeIfNecessary(model);\n      if (request) {\n        toResolve.push(request);\n        lenses.push(lens);\n      }\n    });\n    if (toResolve.length === 0) {\n      return;\n    }\n    var resolvePromise = createCancelablePromise(function (token) {\n      var promises = toResolve.map(function (request, i) {\n        var resolvedSymbols = new Array(request.length);\n        var promises = request.map(function (request, i) {\n          if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n            return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(function (symbol) {\n              resolvedSymbols[i] = symbol;\n            }, onUnexpectedExternalError);\n          } else {\n            resolvedSymbols[i] = request.symbol;\n            return Promise.resolve(undefined);\n          }\n        });\n        return Promise.all(promises).then(function () {\n          if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n            lenses[i].updateCommands(resolvedSymbols);\n          }\n        });\n      });\n      return Promise.all(promises);\n    });\n    this._currentResolveCodeLensSymbolsPromise = resolvePromise;\n    this._currentResolveCodeLensSymbolsPromise.then(function () {\n      if (_this._currentCodeLensModel) {\n        // update the cached state with new resolved items\n        _this._codeLensCache.put(model, _this._currentCodeLensModel);\n      }\n      _this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n      if (resolvePromise === _this._currentResolveCodeLensSymbolsPromise) {\n        _this._currentResolveCodeLensSymbolsPromise = undefined;\n      }\n    }, function (err) {\n      onUnexpectedError(err); // can also be cancellation!\n      if (resolvePromise === _this._currentResolveCodeLensSymbolsPromise) {\n        _this._currentResolveCodeLensSymbolsPromise = undefined;\n      }\n    });\n  };\n  CodeLensContribution.ID = 'css.editor.codeLens';\n  CodeLensContribution = __decorate([__param(1, ICommandService), __param(2, INotificationService), __param(3, ICodeLensCache)], CodeLensContribution);\n  return CodeLensContribution;\n}();\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__spreadArrays","s","il","Array","k","a","j","jl","RunOnceScheduler","createCancelablePromise","disposableTimeout","onUnexpectedError","onUnexpectedExternalError","toDisposable","DisposableStore","dispose","StableEditorScrollState","registerEditorContribution","CodeLensProviderRegistry","getCodeLensData","CodeLensWidget","CodeLensHelper","ICommandService","INotificationService","ICodeLensCache","dom","hash","CodeLensContribution","_editor","_commandService","_notificationService","_codeLensCache","_this","_globalToDispose","_localToDispose","_lenses","_oldCodeLensModels","_modelChangeCounter","_isEnabled","getOption","add","onDidChangeModel","_onModelChange","onDidChangeModelLanguage","onDidChangeConfiguration","prevIsEnabled","onDidChange","e","hasChanged","_updateLensStyle","_styleClassName","getId","toString","_styleElement","createStyleSheet","isInShadowDOM","getContainerDomNode","undefined","prototype","_localDispose","_currentCodeLensModel","options","getOptions","fontInfo","get","lineHeight","height","Math","round","fontSize","newStyle","innerHTML","_currentFindCodeLensSymbolsPromise","cancel","_currentResolveCodeLensSymbolsPromise","clear","model","getModel","cachedLenses","_renderCodeLensSymbols","has","cachedLensesNow","delete","_i","_a","all","provider","registration","scheduler","schedule","detectVisibleLenses","_detectVisibleLenses","_onViewportChanged","counterValue","token","then","result","put","onDidChangeModelContent","changeDecorations","decorationsAccessor","changeViewZones","viewZonesAccessor","toDispose","lastLensLineNumber","forEach","lens","isValid","getLineNumber","push","update","helper","l","splice","indexOf","commit","onDidScrollChange","scrollTopChanged","onDidLayoutChange","scrollState","capture","_disposeAllLenses","restore","onMouseUp","type","element","tagName","parentElement","_b","command","getCommand","executeCommand","apply","id","catch","err","error","decChangeAccessor","viewZoneChangeAccessor","symbols","hasModel","maxLineNumber","getLineCount","groups","lastGroup","lenses","symbol","line","range","startLineNumber","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","toResolve","request","computeIfNecessary","resolvePromise","promises","map","resolvedSymbols","resolveCodeLens","Promise","resolve","isCancellationRequested","isDisposed","updateCommands","ID"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { RunOnceScheduler, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\r\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { toDisposable, DisposableStore, dispose } from '../../../base/common/lifecycle.js';\r\nimport { StableEditorScrollState } from '../../browser/core/editorState.js';\r\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { CodeLensProviderRegistry } from '../../common/modes.js';\r\nimport { getCodeLensData } from './codelens.js';\r\nimport { CodeLensWidget, CodeLensHelper } from './codelensWidget.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { ICodeLensCache } from './codeLensCache.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { hash } from '../../../base/common/hash.js';\r\nvar CodeLensContribution = /** @class */ (function () {\r\n    function CodeLensContribution(_editor, _commandService, _notificationService, _codeLensCache) {\r\n        var _this = this;\r\n        this._editor = _editor;\r\n        this._commandService = _commandService;\r\n        this._notificationService = _notificationService;\r\n        this._codeLensCache = _codeLensCache;\r\n        this._globalToDispose = new DisposableStore();\r\n        this._localToDispose = new DisposableStore();\r\n        this._lenses = [];\r\n        this._oldCodeLensModels = new DisposableStore();\r\n        this._modelChangeCounter = 0;\r\n        this._isEnabled = this._editor.getOption(11 /* codeLens */);\r\n        this._globalToDispose.add(this._editor.onDidChangeModel(function () { return _this._onModelChange(); }));\r\n        this._globalToDispose.add(this._editor.onDidChangeModelLanguage(function () { return _this._onModelChange(); }));\r\n        this._globalToDispose.add(this._editor.onDidChangeConfiguration(function () {\r\n            var prevIsEnabled = _this._isEnabled;\r\n            _this._isEnabled = _this._editor.getOption(11 /* codeLens */);\r\n            if (prevIsEnabled !== _this._isEnabled) {\r\n                _this._onModelChange();\r\n            }\r\n        }));\r\n        this._globalToDispose.add(CodeLensProviderRegistry.onDidChange(this._onModelChange, this));\r\n        this._globalToDispose.add(this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */)) {\r\n                _this._updateLensStyle();\r\n            }\r\n        }));\r\n        this._onModelChange();\r\n        this._styleClassName = hash(this._editor.getId()).toString(16);\r\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\r\n            ? this._editor.getContainerDomNode()\r\n            : undefined);\r\n        this._updateLensStyle();\r\n    }\r\n    CodeLensContribution.prototype.dispose = function () {\r\n        this._localDispose();\r\n        this._globalToDispose.dispose();\r\n        this._oldCodeLensModels.dispose();\r\n        dispose(this._currentCodeLensModel);\r\n    };\r\n    CodeLensContribution.prototype._updateLensStyle = function () {\r\n        var options = this._editor.getOptions();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var lineHeight = options.get(49 /* lineHeight */);\r\n        var height = Math.round(lineHeight * 1.1);\r\n        var fontSize = Math.round(fontInfo.fontSize * 0.9);\r\n        var newStyle = \"\\n\\t\\t.monaco-editor .codelens-decoration.\" + this._styleClassName + \" { height: \" + height + \"px; line-height: \" + lineHeight + \"px; font-size: \" + fontSize + \"px; padding-right: \" + Math.round(fontInfo.fontSize * 0.45) + \"px;}\\n\\t\\t.monaco-editor .codelens-decoration.\" + this._styleClassName + \" > a > .codicon { line-height: \" + lineHeight + \"px; font-size: \" + fontSize + \"px; }\\n\\t\\t\";\r\n        this._styleElement.innerHTML = newStyle;\r\n    };\r\n    CodeLensContribution.prototype._localDispose = function () {\r\n        if (this._currentFindCodeLensSymbolsPromise) {\r\n            this._currentFindCodeLensSymbolsPromise.cancel();\r\n            this._currentFindCodeLensSymbolsPromise = undefined;\r\n            this._modelChangeCounter++;\r\n        }\r\n        if (this._currentResolveCodeLensSymbolsPromise) {\r\n            this._currentResolveCodeLensSymbolsPromise.cancel();\r\n            this._currentResolveCodeLensSymbolsPromise = undefined;\r\n        }\r\n        this._localToDispose.clear();\r\n        this._oldCodeLensModels.clear();\r\n        dispose(this._currentCodeLensModel);\r\n    };\r\n    CodeLensContribution.prototype._onModelChange = function () {\r\n        var _this = this;\r\n        this._localDispose();\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        var cachedLenses = this._codeLensCache.get(model);\r\n        if (cachedLenses) {\r\n            this._renderCodeLensSymbols(cachedLenses);\r\n        }\r\n        if (!CodeLensProviderRegistry.has(model)) {\r\n            // no provider -> return but check with\r\n            // cached lenses. they expire after 30 seconds\r\n            if (cachedLenses) {\r\n                this._localToDispose.add(disposableTimeout(function () {\r\n                    var cachedLensesNow = _this._codeLensCache.get(model);\r\n                    if (cachedLenses === cachedLensesNow) {\r\n                        _this._codeLensCache.delete(model);\r\n                        _this._onModelChange();\r\n                    }\r\n                }, 30 * 1000));\r\n            }\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = CodeLensProviderRegistry.all(model); _i < _a.length; _i++) {\r\n            var provider = _a[_i];\r\n            if (typeof provider.onDidChange === 'function') {\r\n                var registration = provider.onDidChange(function () { return scheduler.schedule(); });\r\n                this._localToDispose.add(registration);\r\n            }\r\n        }\r\n        var detectVisibleLenses = this._detectVisibleLenses = new RunOnceScheduler(function () { return _this._onViewportChanged(); }, 250);\r\n        var scheduler = new RunOnceScheduler(function () {\r\n            var counterValue = ++_this._modelChangeCounter;\r\n            if (_this._currentFindCodeLensSymbolsPromise) {\r\n                _this._currentFindCodeLensSymbolsPromise.cancel();\r\n            }\r\n            _this._currentFindCodeLensSymbolsPromise = createCancelablePromise(function (token) { return getCodeLensData(model, token); });\r\n            _this._currentFindCodeLensSymbolsPromise.then(function (result) {\r\n                if (counterValue === _this._modelChangeCounter) { // only the last one wins\r\n                    if (_this._currentCodeLensModel) {\r\n                        _this._oldCodeLensModels.add(_this._currentCodeLensModel);\r\n                    }\r\n                    _this._currentCodeLensModel = result;\r\n                    // cache model to reduce flicker\r\n                    _this._codeLensCache.put(model, result);\r\n                    // render lenses\r\n                    _this._renderCodeLensSymbols(result);\r\n                    detectVisibleLenses.schedule();\r\n                }\r\n            }, onUnexpectedError);\r\n        }, 250);\r\n        this._localToDispose.add(scheduler);\r\n        this._localToDispose.add(detectVisibleLenses);\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent(function () {\r\n            _this._editor.changeDecorations(function (decorationsAccessor) {\r\n                _this._editor.changeViewZones(function (viewZonesAccessor) {\r\n                    var toDispose = [];\r\n                    var lastLensLineNumber = -1;\r\n                    _this._lenses.forEach(function (lens) {\r\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\r\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\r\n                            // line_number -> lenses should never be on the same line\r\n                            toDispose.push(lens);\r\n                        }\r\n                        else {\r\n                            lens.update(viewZonesAccessor);\r\n                            lastLensLineNumber = lens.getLineNumber();\r\n                        }\r\n                    });\r\n                    var helper = new CodeLensHelper();\r\n                    toDispose.forEach(function (l) {\r\n                        l.dispose(helper, viewZonesAccessor);\r\n                        _this._lenses.splice(_this._lenses.indexOf(l), 1);\r\n                    });\r\n                    helper.commit(decorationsAccessor);\r\n                });\r\n            });\r\n            // Compute new `visible` code lenses\r\n            detectVisibleLenses.schedule();\r\n            // Ask for all references again\r\n            scheduler.schedule();\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidScrollChange(function (e) {\r\n            if (e.scrollTopChanged && _this._lenses.length > 0) {\r\n                detectVisibleLenses.schedule();\r\n            }\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidLayoutChange(function () {\r\n            detectVisibleLenses.schedule();\r\n        }));\r\n        this._localToDispose.add(toDisposable(function () {\r\n            if (_this._editor.getModel()) {\r\n                var scrollState = StableEditorScrollState.capture(_this._editor);\r\n                _this._editor.changeDecorations(function (decorationsAccessor) {\r\n                    _this._editor.changeViewZones(function (viewZonesAccessor) {\r\n                        _this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\r\n                    });\r\n                });\r\n                scrollState.restore(_this._editor);\r\n            }\r\n            else {\r\n                // No accessors available\r\n                _this._disposeAllLenses(undefined, undefined);\r\n            }\r\n        }));\r\n        this._localToDispose.add(this._editor.onMouseUp(function (e) {\r\n            var _a;\r\n            if (e.target.type !== 9 /* CONTENT_WIDGET */) {\r\n                return;\r\n            }\r\n            var target = e.target.element;\r\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\r\n                target = target.parentElement;\r\n            }\r\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\r\n                for (var _i = 0, _b = _this._lenses; _i < _b.length; _i++) {\r\n                    var lens = _b[_i];\r\n                    var command = lens.getCommand(target);\r\n                    if (command) {\r\n                        (_a = _this._commandService).executeCommand.apply(_a, __spreadArrays([command.id], (command.arguments || []))).catch(function (err) { return _this._notificationService.error(err); });\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        scheduler.schedule();\r\n    };\r\n    CodeLensContribution.prototype._disposeAllLenses = function (decChangeAccessor, viewZoneChangeAccessor) {\r\n        var helper = new CodeLensHelper();\r\n        for (var _i = 0, _a = this._lenses; _i < _a.length; _i++) {\r\n            var lens = _a[_i];\r\n            lens.dispose(helper, viewZoneChangeAccessor);\r\n        }\r\n        if (decChangeAccessor) {\r\n            helper.commit(decChangeAccessor);\r\n        }\r\n        this._lenses = [];\r\n    };\r\n    CodeLensContribution.prototype._renderCodeLensSymbols = function (symbols) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var maxLineNumber = this._editor.getModel().getLineCount();\r\n        var groups = [];\r\n        var lastGroup;\r\n        for (var _i = 0, _a = symbols.lenses; _i < _a.length; _i++) {\r\n            var symbol = _a[_i];\r\n            var line = symbol.symbol.range.startLineNumber;\r\n            if (line < 1 || line > maxLineNumber) {\r\n                // invalid code lens\r\n                continue;\r\n            }\r\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\r\n                // on same line as previous\r\n                lastGroup.push(symbol);\r\n            }\r\n            else {\r\n                // on later line as previous\r\n                lastGroup = [symbol];\r\n                groups.push(lastGroup);\r\n            }\r\n        }\r\n        var scrollState = StableEditorScrollState.capture(this._editor);\r\n        this._editor.changeDecorations(function (decorationsAccessor) {\r\n            _this._editor.changeViewZones(function (viewZoneAccessor) {\r\n                var helper = new CodeLensHelper();\r\n                var codeLensIndex = 0;\r\n                var groupsIndex = 0;\r\n                while (groupsIndex < groups.length && codeLensIndex < _this._lenses.length) {\r\n                    var symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\r\n                    var codeLensLineNumber = _this._lenses[codeLensIndex].getLineNumber();\r\n                    if (codeLensLineNumber < symbolsLineNumber) {\r\n                        _this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\r\n                        _this._lenses.splice(codeLensIndex, 1);\r\n                    }\r\n                    else if (codeLensLineNumber === symbolsLineNumber) {\r\n                        _this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\r\n                        groupsIndex++;\r\n                        codeLensIndex++;\r\n                    }\r\n                    else {\r\n                        _this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], _this._editor, _this._styleClassName, helper, viewZoneAccessor, function () { return _this._detectVisibleLenses && _this._detectVisibleLenses.schedule(); }));\r\n                        codeLensIndex++;\r\n                        groupsIndex++;\r\n                    }\r\n                }\r\n                // Delete extra code lenses\r\n                while (codeLensIndex < _this._lenses.length) {\r\n                    _this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\r\n                    _this._lenses.splice(codeLensIndex, 1);\r\n                }\r\n                // Create extra symbols\r\n                while (groupsIndex < groups.length) {\r\n                    _this._lenses.push(new CodeLensWidget(groups[groupsIndex], _this._editor, _this._styleClassName, helper, viewZoneAccessor, function () { return _this._detectVisibleLenses && _this._detectVisibleLenses.schedule(); }));\r\n                    groupsIndex++;\r\n                }\r\n                helper.commit(decorationsAccessor);\r\n            });\r\n        });\r\n        scrollState.restore(this._editor);\r\n    };\r\n    CodeLensContribution.prototype._onViewportChanged = function () {\r\n        var _this = this;\r\n        if (this._currentResolveCodeLensSymbolsPromise) {\r\n            this._currentResolveCodeLensSymbolsPromise.cancel();\r\n            this._currentResolveCodeLensSymbolsPromise = undefined;\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        var toResolve = [];\r\n        var lenses = [];\r\n        this._lenses.forEach(function (lens) {\r\n            var request = lens.computeIfNecessary(model);\r\n            if (request) {\r\n                toResolve.push(request);\r\n                lenses.push(lens);\r\n            }\r\n        });\r\n        if (toResolve.length === 0) {\r\n            return;\r\n        }\r\n        var resolvePromise = createCancelablePromise(function (token) {\r\n            var promises = toResolve.map(function (request, i) {\r\n                var resolvedSymbols = new Array(request.length);\r\n                var promises = request.map(function (request, i) {\r\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\r\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(function (symbol) {\r\n                            resolvedSymbols[i] = symbol;\r\n                        }, onUnexpectedExternalError);\r\n                    }\r\n                    else {\r\n                        resolvedSymbols[i] = request.symbol;\r\n                        return Promise.resolve(undefined);\r\n                    }\r\n                });\r\n                return Promise.all(promises).then(function () {\r\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\r\n                        lenses[i].updateCommands(resolvedSymbols);\r\n                    }\r\n                });\r\n            });\r\n            return Promise.all(promises);\r\n        });\r\n        this._currentResolveCodeLensSymbolsPromise = resolvePromise;\r\n        this._currentResolveCodeLensSymbolsPromise.then(function () {\r\n            if (_this._currentCodeLensModel) { // update the cached state with new resolved items\r\n                _this._codeLensCache.put(model, _this._currentCodeLensModel);\r\n            }\r\n            _this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\r\n            if (resolvePromise === _this._currentResolveCodeLensSymbolsPromise) {\r\n                _this._currentResolveCodeLensSymbolsPromise = undefined;\r\n            }\r\n        }, function (err) {\r\n            onUnexpectedError(err); // can also be cancellation!\r\n            if (resolvePromise === _this._currentResolveCodeLensSymbolsPromise) {\r\n                _this._currentResolveCodeLensSymbolsPromise = undefined;\r\n            }\r\n        });\r\n    };\r\n    CodeLensContribution.ID = 'css.editor.codeLens';\r\n    CodeLensContribution = __decorate([\r\n        __param(1, ICommandService),\r\n        __param(2, INotificationService),\r\n        __param(3, ICodeLensCache)\r\n    ], CodeLensContribution);\r\n    return CodeLensContribution;\r\n}());\r\nexport { CodeLensContribution };\r\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}