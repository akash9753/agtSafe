{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { toUint32 } from '../../../base/common/uint.js';\nvar PrefixSumIndexOfResult = /** @class */function () {\n  function PrefixSumIndexOfResult(index, remainder) {\n    this.index = index;\n    this.remainder = remainder;\n  }\n  return PrefixSumIndexOfResult;\n}();\nexport { PrefixSumIndexOfResult };\nvar PrefixSumComputer = /** @class */function () {\n  function PrefixSumComputer(values) {\n    this.values = values;\n    this.prefixSum = new Uint32Array(values.length);\n    this.prefixSumValidIndex = new Int32Array(1);\n    this.prefixSumValidIndex[0] = -1;\n  }\n  PrefixSumComputer.prototype.insertValues = function (insertIndex, insertValues) {\n    insertIndex = toUint32(insertIndex);\n    var oldValues = this.values;\n    var oldPrefixSum = this.prefixSum;\n    var insertValuesLen = insertValues.length;\n    if (insertValuesLen === 0) {\n      return false;\n    }\n    this.values = new Uint32Array(oldValues.length + insertValuesLen);\n    this.values.set(oldValues.subarray(0, insertIndex), 0);\n    this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n    this.values.set(insertValues, insertIndex);\n    if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = insertIndex - 1;\n    }\n    this.prefixSum = new Uint32Array(this.values.length);\n    if (this.prefixSumValidIndex[0] >= 0) {\n      this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n    }\n    return true;\n  };\n  PrefixSumComputer.prototype.changeValue = function (index, value) {\n    index = toUint32(index);\n    value = toUint32(value);\n    if (this.values[index] === value) {\n      return false;\n    }\n    this.values[index] = value;\n    if (index - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = index - 1;\n    }\n    return true;\n  };\n  PrefixSumComputer.prototype.removeValues = function (startIndex, cnt) {\n    startIndex = toUint32(startIndex);\n    cnt = toUint32(cnt);\n    var oldValues = this.values;\n    var oldPrefixSum = this.prefixSum;\n    if (startIndex >= oldValues.length) {\n      return false;\n    }\n    var maxCnt = oldValues.length - startIndex;\n    if (cnt >= maxCnt) {\n      cnt = maxCnt;\n    }\n    if (cnt === 0) {\n      return false;\n    }\n    this.values = new Uint32Array(oldValues.length - cnt);\n    this.values.set(oldValues.subarray(0, startIndex), 0);\n    this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\n    this.prefixSum = new Uint32Array(this.values.length);\n    if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = startIndex - 1;\n    }\n    if (this.prefixSumValidIndex[0] >= 0) {\n      this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n    }\n    return true;\n  };\n  PrefixSumComputer.prototype.getTotalValue = function () {\n    if (this.values.length === 0) {\n      return 0;\n    }\n    return this._getAccumulatedValue(this.values.length - 1);\n  };\n  PrefixSumComputer.prototype.getAccumulatedValue = function (index) {\n    if (index < 0) {\n      return 0;\n    }\n    index = toUint32(index);\n    return this._getAccumulatedValue(index);\n  };\n  PrefixSumComputer.prototype._getAccumulatedValue = function (index) {\n    if (index <= this.prefixSumValidIndex[0]) {\n      return this.prefixSum[index];\n    }\n    var startIndex = this.prefixSumValidIndex[0] + 1;\n    if (startIndex === 0) {\n      this.prefixSum[0] = this.values[0];\n      startIndex++;\n    }\n    if (index >= this.values.length) {\n      index = this.values.length - 1;\n    }\n    for (var i = startIndex; i <= index; i++) {\n      this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n    }\n    this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n    return this.prefixSum[index];\n  };\n  PrefixSumComputer.prototype.getIndexOf = function (accumulatedValue) {\n    accumulatedValue = Math.floor(accumulatedValue); //@perf\n    // Compute all sums (to get a fully valid prefixSum)\n    this.getTotalValue();\n    var low = 0;\n    var high = this.values.length - 1;\n    var mid = 0;\n    var midStop = 0;\n    var midStart = 0;\n    while (low <= high) {\n      mid = low + (high - low) / 2 | 0;\n      midStop = this.prefixSum[mid];\n      midStart = midStop - this.values[mid];\n      if (accumulatedValue < midStart) {\n        high = mid - 1;\n      } else if (accumulatedValue >= midStop) {\n        low = mid + 1;\n      } else {\n        break;\n      }\n    }\n    return new PrefixSumIndexOfResult(mid, accumulatedValue - midStart);\n  };\n  return PrefixSumComputer;\n}();\nexport { PrefixSumComputer };","map":{"version":3,"names":["toUint32","PrefixSumIndexOfResult","index","remainder","PrefixSumComputer","values","prefixSum","Uint32Array","length","prefixSumValidIndex","Int32Array","prototype","insertValues","insertIndex","oldValues","oldPrefixSum","insertValuesLen","set","subarray","changeValue","value","removeValues","startIndex","cnt","maxCnt","getTotalValue","_getAccumulatedValue","getAccumulatedValue","i","Math","max","getIndexOf","accumulatedValue","floor","low","high","mid","midStop","midStart"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/common/viewModel/prefixSumComputer.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { toUint32 } from '../../../base/common/uint.js';\r\nvar PrefixSumIndexOfResult = /** @class */ (function () {\r\n    function PrefixSumIndexOfResult(index, remainder) {\r\n        this.index = index;\r\n        this.remainder = remainder;\r\n    }\r\n    return PrefixSumIndexOfResult;\r\n}());\r\nexport { PrefixSumIndexOfResult };\r\nvar PrefixSumComputer = /** @class */ (function () {\r\n    function PrefixSumComputer(values) {\r\n        this.values = values;\r\n        this.prefixSum = new Uint32Array(values.length);\r\n        this.prefixSumValidIndex = new Int32Array(1);\r\n        this.prefixSumValidIndex[0] = -1;\r\n    }\r\n    PrefixSumComputer.prototype.insertValues = function (insertIndex, insertValues) {\r\n        insertIndex = toUint32(insertIndex);\r\n        var oldValues = this.values;\r\n        var oldPrefixSum = this.prefixSum;\r\n        var insertValuesLen = insertValues.length;\r\n        if (insertValuesLen === 0) {\r\n            return false;\r\n        }\r\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\r\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\r\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\r\n        this.values.set(insertValues, insertIndex);\r\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = insertIndex - 1;\r\n        }\r\n        this.prefixSum = new Uint32Array(this.values.length);\r\n        if (this.prefixSumValidIndex[0] >= 0) {\r\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.changeValue = function (index, value) {\r\n        index = toUint32(index);\r\n        value = toUint32(value);\r\n        if (this.values[index] === value) {\r\n            return false;\r\n        }\r\n        this.values[index] = value;\r\n        if (index - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = index - 1;\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.removeValues = function (startIndex, cnt) {\r\n        startIndex = toUint32(startIndex);\r\n        cnt = toUint32(cnt);\r\n        var oldValues = this.values;\r\n        var oldPrefixSum = this.prefixSum;\r\n        if (startIndex >= oldValues.length) {\r\n            return false;\r\n        }\r\n        var maxCnt = oldValues.length - startIndex;\r\n        if (cnt >= maxCnt) {\r\n            cnt = maxCnt;\r\n        }\r\n        if (cnt === 0) {\r\n            return false;\r\n        }\r\n        this.values = new Uint32Array(oldValues.length - cnt);\r\n        this.values.set(oldValues.subarray(0, startIndex), 0);\r\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\r\n        this.prefixSum = new Uint32Array(this.values.length);\r\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = startIndex - 1;\r\n        }\r\n        if (this.prefixSumValidIndex[0] >= 0) {\r\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.getTotalValue = function () {\r\n        if (this.values.length === 0) {\r\n            return 0;\r\n        }\r\n        return this._getAccumulatedValue(this.values.length - 1);\r\n    };\r\n    PrefixSumComputer.prototype.getAccumulatedValue = function (index) {\r\n        if (index < 0) {\r\n            return 0;\r\n        }\r\n        index = toUint32(index);\r\n        return this._getAccumulatedValue(index);\r\n    };\r\n    PrefixSumComputer.prototype._getAccumulatedValue = function (index) {\r\n        if (index <= this.prefixSumValidIndex[0]) {\r\n            return this.prefixSum[index];\r\n        }\r\n        var startIndex = this.prefixSumValidIndex[0] + 1;\r\n        if (startIndex === 0) {\r\n            this.prefixSum[0] = this.values[0];\r\n            startIndex++;\r\n        }\r\n        if (index >= this.values.length) {\r\n            index = this.values.length - 1;\r\n        }\r\n        for (var i = startIndex; i <= index; i++) {\r\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\r\n        }\r\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\r\n        return this.prefixSum[index];\r\n    };\r\n    PrefixSumComputer.prototype.getIndexOf = function (accumulatedValue) {\r\n        accumulatedValue = Math.floor(accumulatedValue); //@perf\r\n        // Compute all sums (to get a fully valid prefixSum)\r\n        this.getTotalValue();\r\n        var low = 0;\r\n        var high = this.values.length - 1;\r\n        var mid = 0;\r\n        var midStop = 0;\r\n        var midStart = 0;\r\n        while (low <= high) {\r\n            mid = low + ((high - low) / 2) | 0;\r\n            midStop = this.prefixSum[mid];\r\n            midStart = midStop - this.values[mid];\r\n            if (accumulatedValue < midStart) {\r\n                high = mid - 1;\r\n            }\r\n            else if (accumulatedValue >= midStop) {\r\n                low = mid + 1;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return new PrefixSumIndexOfResult(mid, accumulatedValue - midStart);\r\n    };\r\n    return PrefixSumComputer;\r\n}());\r\nexport { PrefixSumComputer };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}