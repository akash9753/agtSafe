{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n          case 7:\n            op = _.ops.pop();\n            _.trys.pop();\n            continue;\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n              _.ops.push(op);\n              break;\n            }\n            if (t[2]) _.ops.pop();\n            _.trys.pop();\n            continue;\n        }\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport './links.css';\nimport * as nls from '../../../nls.js';\nimport * as async from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { LinkProviderRegistry } from '../../common/modes.js';\nimport { ClickLinkGesture } from '../gotoSymbol/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nfunction getHoverMessage(link, useMetaKey) {\n  var executeCmd = link.url && /^command:/i.test(link.url.toString());\n  var label = link.tooltip ? link.tooltip : executeCmd ? nls.localize('links.navigate.executeCmd', 'Execute command') : nls.localize('links.navigate.follow', 'Follow link');\n  var kb = useMetaKey ? platform.isMacintosh ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\") : nls.localize('links.navigate.kb.meta', \"ctrl + click\") : platform.isMacintosh ? nls.localize('links.navigate.kb.alt.mac', \"option + click\") : nls.localize('links.navigate.kb.alt', \"alt + click\");\n  if (link.url) {\n    var hoverMessage = new MarkdownString('', true).appendMarkdown(\"[\" + label + \"](\" + link.url.toString() + \") (\" + kb + \")\");\n    return hoverMessage;\n  } else {\n    return new MarkdownString().appendText(label + \" (\" + kb + \")\");\n  }\n}\nvar decoration = {\n  general: ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link'\n  }),\n  active: ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active'\n  })\n};\nvar LinkOccurrence = /** @class */function () {\n  function LinkOccurrence(link, decorationId) {\n    this.link = link;\n    this.decorationId = decorationId;\n  }\n  LinkOccurrence.decoration = function (link, useMetaKey) {\n    return {\n      range: link.range,\n      options: LinkOccurrence._getOptions(link, useMetaKey, false)\n    };\n  };\n  LinkOccurrence._getOptions = function (link, useMetaKey, isActive) {\n    var options = __assign({}, isActive ? decoration.active : decoration.general);\n    options.hoverMessage = getHoverMessage(link, useMetaKey);\n    return options;\n  };\n  LinkOccurrence.prototype.activate = function (changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n  };\n  LinkOccurrence.prototype.deactivate = function (changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n  };\n  return LinkOccurrence;\n}();\nvar LinkDetector = /** @class */function () {\n  function LinkDetector(editor, openerService, notificationService) {\n    var _this = this;\n    this.listenersToRemove = new DisposableStore();\n    this.editor = editor;\n    this.openerService = openerService;\n    this.notificationService = notificationService;\n    var clickLinkGesture = new ClickLinkGesture(editor);\n    this.listenersToRemove.add(clickLinkGesture);\n    this.listenersToRemove.add(clickLinkGesture.onMouseMoveOrRelevantKeyDown(function (_a) {\n      var mouseEvent = _a[0],\n        keyboardEvent = _a[1];\n      _this._onEditorMouseMove(mouseEvent, keyboardEvent);\n    }));\n    this.listenersToRemove.add(clickLinkGesture.onExecute(function (e) {\n      _this.onEditorMouseUp(e);\n    }));\n    this.listenersToRemove.add(clickLinkGesture.onCancel(function (e) {\n      _this.cleanUpActiveLinkDecoration();\n    }));\n    this.enabled = editor.getOption(52 /* links */);\n    this.listenersToRemove.add(editor.onDidChangeConfiguration(function (e) {\n      var enabled = editor.getOption(52 /* links */);\n      if (_this.enabled === enabled) {\n        // No change in our configuration option\n        return;\n      }\n      _this.enabled = enabled;\n      // Remove any links (for the getting disabled case)\n      _this.updateDecorations([]);\n      // Stop any computation (for the getting disabled case)\n      _this.stop();\n      // Start computing (for the getting enabled case)\n      _this.beginCompute();\n    }));\n    this.listenersToRemove.add(editor.onDidChangeModelContent(function (e) {\n      return _this.onChange();\n    }));\n    this.listenersToRemove.add(editor.onDidChangeModel(function (e) {\n      return _this.onModelChanged();\n    }));\n    this.listenersToRemove.add(editor.onDidChangeModelLanguage(function (e) {\n      return _this.onModelModeChanged();\n    }));\n    this.listenersToRemove.add(LinkProviderRegistry.onDidChange(function (e) {\n      return _this.onModelModeChanged();\n    }));\n    this.timeout = new async.TimeoutTimer();\n    this.computePromise = null;\n    this.activeLinksList = null;\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n    this.beginCompute();\n  }\n  LinkDetector.get = function (editor) {\n    return editor.getContribution(LinkDetector.ID);\n  };\n  LinkDetector.prototype.onModelChanged = function () {\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n    this.stop();\n    this.beginCompute();\n  };\n  LinkDetector.prototype.onModelModeChanged = function () {\n    this.stop();\n    this.beginCompute();\n  };\n  LinkDetector.prototype.onChange = function () {\n    var _this = this;\n    this.timeout.setIfNotSet(function () {\n      return _this.beginCompute();\n    }, LinkDetector.RECOMPUTE_TIME);\n  };\n  LinkDetector.prototype.beginCompute = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var model, _a, err_1;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.editor.hasModel() || !this.enabled) {\n              return [2 /*return*/];\n            }\n\n            model = this.editor.getModel();\n            if (!LinkProviderRegistry.has(model)) {\n              return [2 /*return*/];\n            }\n\n            if (this.activeLinksList) {\n              this.activeLinksList.dispose();\n              this.activeLinksList = null;\n            }\n            this.computePromise = async.createCancelablePromise(function (token) {\n              return getLinks(model, token);\n            });\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 3, 4, 5]);\n            _a = this;\n            return [4 /*yield*/, this.computePromise];\n          case 2:\n            _a.activeLinksList = _b.sent();\n            this.updateDecorations(this.activeLinksList.links);\n            return [3 /*break*/, 5];\n          case 3:\n            err_1 = _b.sent();\n            onUnexpectedError(err_1);\n            return [3 /*break*/, 5];\n          case 4:\n            this.computePromise = null;\n            return [7 /*endfinally*/];\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  LinkDetector.prototype.updateDecorations = function (links) {\n    var useMetaKey = this.editor.getOption(59 /* multiCursorModifier */) === 'altKey';\n    var oldDecorations = [];\n    var keys = Object.keys(this.currentOccurrences);\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var decorationId = keys[i];\n      var occurance = this.currentOccurrences[decorationId];\n      oldDecorations.push(occurance.decorationId);\n    }\n    var newDecorations = [];\n    if (links) {\n      // Not sure why this is sometimes null\n      for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n        var link = links_1[_i];\n        newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n      }\n    }\n    var decorations = this.editor.deltaDecorations(oldDecorations, newDecorations);\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n    for (var i = 0, len = decorations.length; i < len; i++) {\n      var occurance = new LinkOccurrence(links[i], decorations[i]);\n      this.currentOccurrences[occurance.decorationId] = occurance;\n    }\n  };\n  LinkDetector.prototype._onEditorMouseMove = function (mouseEvent, withKey) {\n    var _this = this;\n    var useMetaKey = this.editor.getOption(59 /* multiCursorModifier */) === 'altKey';\n    if (this.isEnabled(mouseEvent, withKey)) {\n      this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n      var occurrence_1 = this.getLinkOccurrence(mouseEvent.target.position);\n      if (occurrence_1) {\n        this.editor.changeDecorations(function (changeAccessor) {\n          occurrence_1.activate(changeAccessor, useMetaKey);\n          _this.activeLinkDecorationId = occurrence_1.decorationId;\n        });\n      }\n    } else {\n      this.cleanUpActiveLinkDecoration();\n    }\n  };\n  LinkDetector.prototype.cleanUpActiveLinkDecoration = function () {\n    var useMetaKey = this.editor.getOption(59 /* multiCursorModifier */) === 'altKey';\n    if (this.activeLinkDecorationId) {\n      var occurrence_2 = this.currentOccurrences[this.activeLinkDecorationId];\n      if (occurrence_2) {\n        this.editor.changeDecorations(function (changeAccessor) {\n          occurrence_2.deactivate(changeAccessor, useMetaKey);\n        });\n      }\n      this.activeLinkDecorationId = null;\n    }\n  };\n  LinkDetector.prototype.onEditorMouseUp = function (mouseEvent) {\n    if (!this.isEnabled(mouseEvent)) {\n      return;\n    }\n    var occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n    if (!occurrence) {\n      return;\n    }\n    this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n  };\n\n  LinkDetector.prototype.openLinkOccurrence = function (occurrence, openToSide, fromUserGesture) {\n    var _this = this;\n    if (fromUserGesture === void 0) {\n      fromUserGesture = false;\n    }\n    if (!this.openerService) {\n      return;\n    }\n    var link = occurrence.link;\n    link.resolve(CancellationToken.None).then(function (uri) {\n      // open the uri\n      return _this.openerService.open(uri, {\n        openToSide: openToSide,\n        fromUserGesture: fromUserGesture\n      });\n    }, function (err) {\n      var messageOrError = err instanceof Error ? err.message : err;\n      // different error cases\n      if (messageOrError === 'invalid') {\n        _this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n      } else if (messageOrError === 'missing') {\n        _this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n      } else {\n        onUnexpectedError(err);\n      }\n    });\n  };\n  LinkDetector.prototype.getLinkOccurrence = function (position) {\n    if (!this.editor.hasModel() || !position) {\n      return null;\n    }\n    var decorations = this.editor.getModel().getDecorationsInRange({\n      startLineNumber: position.lineNumber,\n      startColumn: position.column,\n      endLineNumber: position.lineNumber,\n      endColumn: position.column\n    }, 0, true);\n    for (var _i = 0, decorations_1 = decorations; _i < decorations_1.length; _i++) {\n      var decoration_1 = decorations_1[_i];\n      var currentOccurrence = this.currentOccurrences[decoration_1.id];\n      if (currentOccurrence) {\n        return currentOccurrence;\n      }\n    }\n    return null;\n  };\n  LinkDetector.prototype.isEnabled = function (mouseEvent, withKey) {\n    return Boolean(mouseEvent.target.type === 6 /* CONTENT_TEXT */ && (mouseEvent.hasTriggerModifier || withKey && withKey.keyCodeIsTriggerKey));\n  };\n  LinkDetector.prototype.stop = function () {\n    this.timeout.cancel();\n    if (this.activeLinksList) {\n      this.activeLinksList.dispose();\n    }\n    if (this.computePromise) {\n      this.computePromise.cancel();\n      this.computePromise = null;\n    }\n  };\n  LinkDetector.prototype.dispose = function () {\n    this.listenersToRemove.dispose();\n    this.stop();\n    this.timeout.dispose();\n  };\n  LinkDetector.ID = 'editor.linkDetector';\n  LinkDetector.RECOMPUTE_TIME = 1000; // ms\n  LinkDetector = __decorate([__param(1, IOpenerService), __param(2, INotificationService)], LinkDetector);\n  return LinkDetector;\n}();\nvar OpenLinkAction = /** @class */function (_super) {\n  __extends(OpenLinkAction, _super);\n  function OpenLinkAction() {\n    return _super.call(this, {\n      id: 'editor.action.openLink',\n      label: nls.localize('label', \"Open Link\"),\n      alias: 'Open Link',\n      precondition: undefined\n    }) || this;\n  }\n  OpenLinkAction.prototype.run = function (accessor, editor) {\n    var linkDetector = LinkDetector.get(editor);\n    if (!linkDetector) {\n      return;\n    }\n    if (!editor.hasModel()) {\n      return;\n    }\n    var selections = editor.getSelections();\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var sel = selections_1[_i];\n      var link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n      if (link) {\n        linkDetector.openLinkOccurrence(link, false);\n      }\n    }\n  };\n  return OpenLinkAction;\n}(EditorAction);\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant(function (theme, collector) {\n  var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n  if (activeLinkForeground) {\n    collector.addRule(\".monaco-editor .detected-link-active { color: \" + activeLinkForeground + \" !important; }\");\n  }\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","nls","async","CancellationToken","onUnexpectedError","MarkdownString","DisposableStore","platform","EditorAction","registerEditorAction","registerEditorContribution","ModelDecorationOptions","LinkProviderRegistry","ClickLinkGesture","getLinks","INotificationService","IOpenerService","editorActiveLinkForeground","registerThemingParticipant","getHoverMessage","link","useMetaKey","executeCmd","url","test","toString","tooltip","localize","kb","isMacintosh","hoverMessage","appendMarkdown","appendText","decoration","general","register","stickiness","collapseOnReplaceEdit","inlineClassName","active","LinkOccurrence","decorationId","range","options","_getOptions","isActive","activate","changeAccessor","changeDecorationOptions","deactivate","LinkDetector","editor","openerService","notificationService","_this","listenersToRemove","clickLinkGesture","add","onMouseMoveOrRelevantKeyDown","_a","mouseEvent","keyboardEvent","_onEditorMouseMove","onExecute","onEditorMouseUp","onCancel","cleanUpActiveLinkDecoration","enabled","getOption","onDidChangeConfiguration","updateDecorations","stop","beginCompute","onDidChangeModelContent","onChange","onDidChangeModel","onModelChanged","onDidChangeModelLanguage","onModelModeChanged","onDidChange","timeout","TimeoutTimer","computePromise","activeLinksList","currentOccurrences","activeLinkDecorationId","get","getContribution","ID","setIfNotSet","RECOMPUTE_TIME","model","err_1","_b","hasModel","getModel","has","dispose","createCancelablePromise","token","links","oldDecorations","keys","len","occurance","newDecorations","_i","links_1","decorations","deltaDecorations","withKey","isEnabled","occurrence_1","getLinkOccurrence","position","changeDecorations","occurrence_2","occurrence","openLinkOccurrence","hasSideBySideModifier","openToSide","fromUserGesture","None","uri","open","err","messageOrError","Error","message","warn","getDecorationsInRange","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","decorations_1","decoration_1","currentOccurrence","id","Boolean","type","hasTriggerModifier","keyCodeIsTriggerKey","cancel","OpenLinkAction","_super","alias","precondition","undefined","run","accessor","linkDetector","selections","getSelections","selections_1","sel","getEndPosition","theme","collector","activeLinkForeground","getColor","addRule"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/links/links.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport './links.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as async from '../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { LinkProviderRegistry } from '../../common/modes.js';\r\nimport { ClickLinkGesture } from '../gotoSymbol/link/clickLinkGesture.js';\r\nimport { getLinks } from './getLinks.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { editorActiveLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nfunction getHoverMessage(link, useMetaKey) {\r\n    var executeCmd = link.url && /^command:/i.test(link.url.toString());\r\n    var label = link.tooltip\r\n        ? link.tooltip\r\n        : executeCmd\r\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\r\n            : nls.localize('links.navigate.follow', 'Follow link');\r\n    var kb = useMetaKey\r\n        ? platform.isMacintosh\r\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\r\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\r\n        : platform.isMacintosh\r\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\r\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\r\n    if (link.url) {\r\n        var hoverMessage = new MarkdownString('', true).appendMarkdown(\"[\" + label + \"](\" + link.url.toString() + \") (\" + kb + \")\");\r\n        return hoverMessage;\r\n    }\r\n    else {\r\n        return new MarkdownString().appendText(label + \" (\" + kb + \")\");\r\n    }\r\n}\r\nvar decoration = {\r\n    general: ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        collapseOnReplaceEdit: true,\r\n        inlineClassName: 'detected-link'\r\n    }),\r\n    active: ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        collapseOnReplaceEdit: true,\r\n        inlineClassName: 'detected-link-active'\r\n    })\r\n};\r\nvar LinkOccurrence = /** @class */ (function () {\r\n    function LinkOccurrence(link, decorationId) {\r\n        this.link = link;\r\n        this.decorationId = decorationId;\r\n    }\r\n    LinkOccurrence.decoration = function (link, useMetaKey) {\r\n        return {\r\n            range: link.range,\r\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\r\n        };\r\n    };\r\n    LinkOccurrence._getOptions = function (link, useMetaKey, isActive) {\r\n        var options = __assign({}, (isActive ? decoration.active : decoration.general));\r\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\r\n        return options;\r\n    };\r\n    LinkOccurrence.prototype.activate = function (changeAccessor, useMetaKey) {\r\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\r\n    };\r\n    LinkOccurrence.prototype.deactivate = function (changeAccessor, useMetaKey) {\r\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\r\n    };\r\n    return LinkOccurrence;\r\n}());\r\nvar LinkDetector = /** @class */ (function () {\r\n    function LinkDetector(editor, openerService, notificationService) {\r\n        var _this = this;\r\n        this.listenersToRemove = new DisposableStore();\r\n        this.editor = editor;\r\n        this.openerService = openerService;\r\n        this.notificationService = notificationService;\r\n        var clickLinkGesture = new ClickLinkGesture(editor);\r\n        this.listenersToRemove.add(clickLinkGesture);\r\n        this.listenersToRemove.add(clickLinkGesture.onMouseMoveOrRelevantKeyDown(function (_a) {\r\n            var mouseEvent = _a[0], keyboardEvent = _a[1];\r\n            _this._onEditorMouseMove(mouseEvent, keyboardEvent);\r\n        }));\r\n        this.listenersToRemove.add(clickLinkGesture.onExecute(function (e) {\r\n            _this.onEditorMouseUp(e);\r\n        }));\r\n        this.listenersToRemove.add(clickLinkGesture.onCancel(function (e) {\r\n            _this.cleanUpActiveLinkDecoration();\r\n        }));\r\n        this.enabled = editor.getOption(52 /* links */);\r\n        this.listenersToRemove.add(editor.onDidChangeConfiguration(function (e) {\r\n            var enabled = editor.getOption(52 /* links */);\r\n            if (_this.enabled === enabled) {\r\n                // No change in our configuration option\r\n                return;\r\n            }\r\n            _this.enabled = enabled;\r\n            // Remove any links (for the getting disabled case)\r\n            _this.updateDecorations([]);\r\n            // Stop any computation (for the getting disabled case)\r\n            _this.stop();\r\n            // Start computing (for the getting enabled case)\r\n            _this.beginCompute();\r\n        }));\r\n        this.listenersToRemove.add(editor.onDidChangeModelContent(function (e) { return _this.onChange(); }));\r\n        this.listenersToRemove.add(editor.onDidChangeModel(function (e) { return _this.onModelChanged(); }));\r\n        this.listenersToRemove.add(editor.onDidChangeModelLanguage(function (e) { return _this.onModelModeChanged(); }));\r\n        this.listenersToRemove.add(LinkProviderRegistry.onDidChange(function (e) { return _this.onModelModeChanged(); }));\r\n        this.timeout = new async.TimeoutTimer();\r\n        this.computePromise = null;\r\n        this.activeLinksList = null;\r\n        this.currentOccurrences = {};\r\n        this.activeLinkDecorationId = null;\r\n        this.beginCompute();\r\n    }\r\n    LinkDetector.get = function (editor) {\r\n        return editor.getContribution(LinkDetector.ID);\r\n    };\r\n    LinkDetector.prototype.onModelChanged = function () {\r\n        this.currentOccurrences = {};\r\n        this.activeLinkDecorationId = null;\r\n        this.stop();\r\n        this.beginCompute();\r\n    };\r\n    LinkDetector.prototype.onModelModeChanged = function () {\r\n        this.stop();\r\n        this.beginCompute();\r\n    };\r\n    LinkDetector.prototype.onChange = function () {\r\n        var _this = this;\r\n        this.timeout.setIfNotSet(function () { return _this.beginCompute(); }, LinkDetector.RECOMPUTE_TIME);\r\n    };\r\n    LinkDetector.prototype.beginCompute = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, _a, err_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!this.editor.hasModel() || !this.enabled) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        model = this.editor.getModel();\r\n                        if (!LinkProviderRegistry.has(model)) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (this.activeLinksList) {\r\n                            this.activeLinksList.dispose();\r\n                            this.activeLinksList = null;\r\n                        }\r\n                        this.computePromise = async.createCancelablePromise(function (token) { return getLinks(model, token); });\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, 4, 5]);\r\n                        _a = this;\r\n                        return [4 /*yield*/, this.computePromise];\r\n                    case 2:\r\n                        _a.activeLinksList = _b.sent();\r\n                        this.updateDecorations(this.activeLinksList.links);\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        err_1 = _b.sent();\r\n                        onUnexpectedError(err_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        this.computePromise = null;\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LinkDetector.prototype.updateDecorations = function (links) {\r\n        var useMetaKey = (this.editor.getOption(59 /* multiCursorModifier */) === 'altKey');\r\n        var oldDecorations = [];\r\n        var keys = Object.keys(this.currentOccurrences);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var decorationId = keys[i];\r\n            var occurance = this.currentOccurrences[decorationId];\r\n            oldDecorations.push(occurance.decorationId);\r\n        }\r\n        var newDecorations = [];\r\n        if (links) {\r\n            // Not sure why this is sometimes null\r\n            for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\r\n                var link = links_1[_i];\r\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\r\n            }\r\n        }\r\n        var decorations = this.editor.deltaDecorations(oldDecorations, newDecorations);\r\n        this.currentOccurrences = {};\r\n        this.activeLinkDecorationId = null;\r\n        for (var i = 0, len = decorations.length; i < len; i++) {\r\n            var occurance = new LinkOccurrence(links[i], decorations[i]);\r\n            this.currentOccurrences[occurance.decorationId] = occurance;\r\n        }\r\n    };\r\n    LinkDetector.prototype._onEditorMouseMove = function (mouseEvent, withKey) {\r\n        var _this = this;\r\n        var useMetaKey = (this.editor.getOption(59 /* multiCursorModifier */) === 'altKey');\r\n        if (this.isEnabled(mouseEvent, withKey)) {\r\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\r\n            var occurrence_1 = this.getLinkOccurrence(mouseEvent.target.position);\r\n            if (occurrence_1) {\r\n                this.editor.changeDecorations(function (changeAccessor) {\r\n                    occurrence_1.activate(changeAccessor, useMetaKey);\r\n                    _this.activeLinkDecorationId = occurrence_1.decorationId;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.cleanUpActiveLinkDecoration();\r\n        }\r\n    };\r\n    LinkDetector.prototype.cleanUpActiveLinkDecoration = function () {\r\n        var useMetaKey = (this.editor.getOption(59 /* multiCursorModifier */) === 'altKey');\r\n        if (this.activeLinkDecorationId) {\r\n            var occurrence_2 = this.currentOccurrences[this.activeLinkDecorationId];\r\n            if (occurrence_2) {\r\n                this.editor.changeDecorations(function (changeAccessor) {\r\n                    occurrence_2.deactivate(changeAccessor, useMetaKey);\r\n                });\r\n            }\r\n            this.activeLinkDecorationId = null;\r\n        }\r\n    };\r\n    LinkDetector.prototype.onEditorMouseUp = function (mouseEvent) {\r\n        if (!this.isEnabled(mouseEvent)) {\r\n            return;\r\n        }\r\n        var occurrence = this.getLinkOccurrence(mouseEvent.target.position);\r\n        if (!occurrence) {\r\n            return;\r\n        }\r\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\r\n    };\r\n    LinkDetector.prototype.openLinkOccurrence = function (occurrence, openToSide, fromUserGesture) {\r\n        var _this = this;\r\n        if (fromUserGesture === void 0) { fromUserGesture = false; }\r\n        if (!this.openerService) {\r\n            return;\r\n        }\r\n        var link = occurrence.link;\r\n        link.resolve(CancellationToken.None).then(function (uri) {\r\n            // open the uri\r\n            return _this.openerService.open(uri, { openToSide: openToSide, fromUserGesture: fromUserGesture });\r\n        }, function (err) {\r\n            var messageOrError = err instanceof Error ? err.message : err;\r\n            // different error cases\r\n            if (messageOrError === 'invalid') {\r\n                _this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\r\n            }\r\n            else if (messageOrError === 'missing') {\r\n                _this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\r\n            }\r\n            else {\r\n                onUnexpectedError(err);\r\n            }\r\n        });\r\n    };\r\n    LinkDetector.prototype.getLinkOccurrence = function (position) {\r\n        if (!this.editor.hasModel() || !position) {\r\n            return null;\r\n        }\r\n        var decorations = this.editor.getModel().getDecorationsInRange({\r\n            startLineNumber: position.lineNumber,\r\n            startColumn: position.column,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        }, 0, true);\r\n        for (var _i = 0, decorations_1 = decorations; _i < decorations_1.length; _i++) {\r\n            var decoration_1 = decorations_1[_i];\r\n            var currentOccurrence = this.currentOccurrences[decoration_1.id];\r\n            if (currentOccurrence) {\r\n                return currentOccurrence;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    LinkDetector.prototype.isEnabled = function (mouseEvent, withKey) {\r\n        return Boolean((mouseEvent.target.type === 6 /* CONTENT_TEXT */)\r\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\r\n    };\r\n    LinkDetector.prototype.stop = function () {\r\n        this.timeout.cancel();\r\n        if (this.activeLinksList) {\r\n            this.activeLinksList.dispose();\r\n        }\r\n        if (this.computePromise) {\r\n            this.computePromise.cancel();\r\n            this.computePromise = null;\r\n        }\r\n    };\r\n    LinkDetector.prototype.dispose = function () {\r\n        this.listenersToRemove.dispose();\r\n        this.stop();\r\n        this.timeout.dispose();\r\n    };\r\n    LinkDetector.ID = 'editor.linkDetector';\r\n    LinkDetector.RECOMPUTE_TIME = 1000; // ms\r\n    LinkDetector = __decorate([\r\n        __param(1, IOpenerService),\r\n        __param(2, INotificationService)\r\n    ], LinkDetector);\r\n    return LinkDetector;\r\n}());\r\nvar OpenLinkAction = /** @class */ (function (_super) {\r\n    __extends(OpenLinkAction, _super);\r\n    function OpenLinkAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.openLink',\r\n            label: nls.localize('label', \"Open Link\"),\r\n            alias: 'Open Link',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    OpenLinkAction.prototype.run = function (accessor, editor) {\r\n        var linkDetector = LinkDetector.get(editor);\r\n        if (!linkDetector) {\r\n            return;\r\n        }\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var selections = editor.getSelections();\r\n        for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\r\n            var sel = selections_1[_i];\r\n            var link = linkDetector.getLinkOccurrence(sel.getEndPosition());\r\n            if (link) {\r\n                linkDetector.openLinkOccurrence(link, false);\r\n            }\r\n        }\r\n    };\r\n    return OpenLinkAction;\r\n}(EditorAction));\r\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\r\nregisterEditorAction(OpenLinkAction);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\r\n    if (activeLinkForeground) {\r\n        collector.addRule(\".monaco-editor .detected-link-active { color: \" + activeLinkForeground + \" !important; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}