{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { score } from './languageSelector.js';\nimport { shouldSynchronizeModel } from '../services/modelService.js';\nfunction isExclusive(selector) {\n  if (typeof selector === 'string') {\n    return false;\n  } else if (Array.isArray(selector)) {\n    return selector.every(isExclusive);\n  } else {\n    return !!selector.exclusive;\n  }\n}\nvar LanguageFeatureRegistry = /** @class */function () {\n  function LanguageFeatureRegistry() {\n    this._clock = 0;\n    this._entries = [];\n    this._onDidChange = new Emitter();\n  }\n  Object.defineProperty(LanguageFeatureRegistry.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  LanguageFeatureRegistry.prototype.register = function (selector, provider) {\n    var _this = this;\n    var entry = {\n      selector: selector,\n      provider: provider,\n      _score: -1,\n      _time: this._clock++\n    };\n    this._entries.push(entry);\n    this._lastCandidate = undefined;\n    this._onDidChange.fire(this._entries.length);\n    return toDisposable(function () {\n      if (entry) {\n        var idx = _this._entries.indexOf(entry);\n        if (idx >= 0) {\n          _this._entries.splice(idx, 1);\n          _this._lastCandidate = undefined;\n          _this._onDidChange.fire(_this._entries.length);\n          entry = undefined;\n        }\n      }\n    });\n  };\n  LanguageFeatureRegistry.prototype.has = function (model) {\n    return this.all(model).length > 0;\n  };\n  LanguageFeatureRegistry.prototype.all = function (model) {\n    if (!model) {\n      return [];\n    }\n    this._updateScores(model);\n    var result = [];\n    // from registry\n    for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\n      var entry = _a[_i];\n      if (entry._score > 0) {\n        result.push(entry.provider);\n      }\n    }\n    return result;\n  };\n  LanguageFeatureRegistry.prototype.ordered = function (model) {\n    var result = [];\n    this._orderedForEach(model, function (entry) {\n      return result.push(entry.provider);\n    });\n    return result;\n  };\n  LanguageFeatureRegistry.prototype.orderedGroups = function (model) {\n    var result = [];\n    var lastBucket;\n    var lastBucketScore;\n    this._orderedForEach(model, function (entry) {\n      if (lastBucket && lastBucketScore === entry._score) {\n        lastBucket.push(entry.provider);\n      } else {\n        lastBucketScore = entry._score;\n        lastBucket = [entry.provider];\n        result.push(lastBucket);\n      }\n    });\n    return result;\n  };\n  LanguageFeatureRegistry.prototype._orderedForEach = function (model, callback) {\n    if (!model) {\n      return;\n    }\n    this._updateScores(model);\n    for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\n      var entry = _a[_i];\n      if (entry._score > 0) {\n        callback(entry);\n      }\n    }\n  };\n  LanguageFeatureRegistry.prototype._updateScores = function (model) {\n    var candidate = {\n      uri: model.uri.toString(),\n      language: model.getLanguageIdentifier().language\n    };\n    if (this._lastCandidate && this._lastCandidate.language === candidate.language && this._lastCandidate.uri === candidate.uri) {\n      // nothing has changed\n      return;\n    }\n    this._lastCandidate = candidate;\n    for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\n      var entry = _a[_i];\n      entry._score = score(entry.selector, model.uri, model.getLanguageIdentifier().language, shouldSynchronizeModel(model));\n      if (isExclusive(entry.selector) && entry._score > 0) {\n        // support for one exclusive selector that overwrites\n        // any other selector\n        for (var _b = 0, _c = this._entries; _b < _c.length; _b++) {\n          var entry_1 = _c[_b];\n          entry_1._score = 0;\n        }\n        entry._score = 1000;\n        break;\n      }\n    }\n    // needs sorting\n    this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);\n  };\n  LanguageFeatureRegistry._compareByScoreAndTime = function (a, b) {\n    if (a._score < b._score) {\n      return 1;\n    } else if (a._score > b._score) {\n      return -1;\n    } else if (a._time < b._time) {\n      return 1;\n    } else if (a._time > b._time) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n  return LanguageFeatureRegistry;\n}();\nexport { LanguageFeatureRegistry };","map":{"version":3,"names":["Emitter","toDisposable","score","shouldSynchronizeModel","isExclusive","selector","Array","isArray","every","exclusive","LanguageFeatureRegistry","_clock","_entries","_onDidChange","Object","defineProperty","prototype","get","event","enumerable","configurable","register","provider","_this","entry","_score","_time","push","_lastCandidate","undefined","fire","length","idx","indexOf","splice","has","model","all","_updateScores","result","_i","_a","ordered","_orderedForEach","orderedGroups","lastBucket","lastBucketScore","callback","candidate","uri","toString","language","getLanguageIdentifier","_b","_c","entry_1","sort","_compareByScoreAndTime","a","b"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/common/modes/languageFeatureRegistry.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { score } from './languageSelector.js';\r\nimport { shouldSynchronizeModel } from '../services/modelService.js';\r\nfunction isExclusive(selector) {\r\n    if (typeof selector === 'string') {\r\n        return false;\r\n    }\r\n    else if (Array.isArray(selector)) {\r\n        return selector.every(isExclusive);\r\n    }\r\n    else {\r\n        return !!selector.exclusive;\r\n    }\r\n}\r\nvar LanguageFeatureRegistry = /** @class */ (function () {\r\n    function LanguageFeatureRegistry() {\r\n        this._clock = 0;\r\n        this._entries = [];\r\n        this._onDidChange = new Emitter();\r\n    }\r\n    Object.defineProperty(LanguageFeatureRegistry.prototype, \"onDidChange\", {\r\n        get: function () {\r\n            return this._onDidChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LanguageFeatureRegistry.prototype.register = function (selector, provider) {\r\n        var _this = this;\r\n        var entry = {\r\n            selector: selector,\r\n            provider: provider,\r\n            _score: -1,\r\n            _time: this._clock++\r\n        };\r\n        this._entries.push(entry);\r\n        this._lastCandidate = undefined;\r\n        this._onDidChange.fire(this._entries.length);\r\n        return toDisposable(function () {\r\n            if (entry) {\r\n                var idx = _this._entries.indexOf(entry);\r\n                if (idx >= 0) {\r\n                    _this._entries.splice(idx, 1);\r\n                    _this._lastCandidate = undefined;\r\n                    _this._onDidChange.fire(_this._entries.length);\r\n                    entry = undefined;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LanguageFeatureRegistry.prototype.has = function (model) {\r\n        return this.all(model).length > 0;\r\n    };\r\n    LanguageFeatureRegistry.prototype.all = function (model) {\r\n        if (!model) {\r\n            return [];\r\n        }\r\n        this._updateScores(model);\r\n        var result = [];\r\n        // from registry\r\n        for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\r\n            var entry = _a[_i];\r\n            if (entry._score > 0) {\r\n                result.push(entry.provider);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    LanguageFeatureRegistry.prototype.ordered = function (model) {\r\n        var result = [];\r\n        this._orderedForEach(model, function (entry) { return result.push(entry.provider); });\r\n        return result;\r\n    };\r\n    LanguageFeatureRegistry.prototype.orderedGroups = function (model) {\r\n        var result = [];\r\n        var lastBucket;\r\n        var lastBucketScore;\r\n        this._orderedForEach(model, function (entry) {\r\n            if (lastBucket && lastBucketScore === entry._score) {\r\n                lastBucket.push(entry.provider);\r\n            }\r\n            else {\r\n                lastBucketScore = entry._score;\r\n                lastBucket = [entry.provider];\r\n                result.push(lastBucket);\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    LanguageFeatureRegistry.prototype._orderedForEach = function (model, callback) {\r\n        if (!model) {\r\n            return;\r\n        }\r\n        this._updateScores(model);\r\n        for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\r\n            var entry = _a[_i];\r\n            if (entry._score > 0) {\r\n                callback(entry);\r\n            }\r\n        }\r\n    };\r\n    LanguageFeatureRegistry.prototype._updateScores = function (model) {\r\n        var candidate = {\r\n            uri: model.uri.toString(),\r\n            language: model.getLanguageIdentifier().language\r\n        };\r\n        if (this._lastCandidate\r\n            && this._lastCandidate.language === candidate.language\r\n            && this._lastCandidate.uri === candidate.uri) {\r\n            // nothing has changed\r\n            return;\r\n        }\r\n        this._lastCandidate = candidate;\r\n        for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {\r\n            var entry = _a[_i];\r\n            entry._score = score(entry.selector, model.uri, model.getLanguageIdentifier().language, shouldSynchronizeModel(model));\r\n            if (isExclusive(entry.selector) && entry._score > 0) {\r\n                // support for one exclusive selector that overwrites\r\n                // any other selector\r\n                for (var _b = 0, _c = this._entries; _b < _c.length; _b++) {\r\n                    var entry_1 = _c[_b];\r\n                    entry_1._score = 0;\r\n                }\r\n                entry._score = 1000;\r\n                break;\r\n            }\r\n        }\r\n        // needs sorting\r\n        this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);\r\n    };\r\n    LanguageFeatureRegistry._compareByScoreAndTime = function (a, b) {\r\n        if (a._score < b._score) {\r\n            return 1;\r\n        }\r\n        else if (a._score > b._score) {\r\n            return -1;\r\n        }\r\n        else if (a._time < b._time) {\r\n            return 1;\r\n        }\r\n        else if (a._time > b._time) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    return LanguageFeatureRegistry;\r\n}());\r\nexport { LanguageFeatureRegistry };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}