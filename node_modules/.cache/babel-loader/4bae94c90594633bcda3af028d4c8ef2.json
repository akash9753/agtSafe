{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as nls from '../../../nls.js';\nimport * as arrays from '../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { DocumentHighlightKind, DocumentHighlightProviderRegistry } from '../../common/modes.js';\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, overviewRulerSelectionHighlightForeground, registerColor } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../platform/theme/common/themeService.js';\nvar editorWordHighlight = registerColor('editor.wordHighlightBackground', {\n  dark: '#575757B8',\n  light: '#57575740',\n  hc: null\n}, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nvar editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', {\n  dark: '#004972B8',\n  light: '#0e639c40',\n  hc: null\n}, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nvar editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', {\n  light: null,\n  dark: null,\n  hc: activeContrastBorder\n}, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nvar editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', {\n  light: null,\n  dark: null,\n  hc: activeContrastBorder\n}, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nvar overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', {\n  dark: '#A0A0A0CC',\n  light: '#A0A0A0CC',\n  hc: '#A0A0A0CC'\n}, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nvar overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', {\n  dark: '#C0A0C0CC',\n  light: '#C0A0C0CC',\n  hc: '#C0A0C0CC'\n}, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nvar ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(model, position, token) {\n  var orderedByScore = DocumentHighlightProviderRegistry.ordered(model);\n  // in order of score ask the occurrences provider\n  // until someone response with a good result\n  // (good = none empty array)\n  return first(orderedByScore.map(function (provider) {\n    return function () {\n      return Promise.resolve(provider.provideDocumentHighlights(model, position, token)).then(undefined, onUnexpectedExternalError);\n    };\n  }), arrays.isNonEmptyArray);\n}\nvar OccurenceAtPositionRequest = /** @class */function () {\n  function OccurenceAtPositionRequest(model, selection, wordSeparators) {\n    var _this = this;\n    this._wordRange = this._getCurrentWordRange(model, selection);\n    this.result = createCancelablePromise(function (token) {\n      return _this._compute(model, selection, wordSeparators, token);\n    });\n  }\n  OccurenceAtPositionRequest.prototype._getCurrentWordRange = function (model, selection) {\n    var word = model.getWordAtPosition(selection.getPosition());\n    if (word) {\n      return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    return null;\n  };\n  OccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\n    var lineNumber = selection.startLineNumber;\n    var startColumn = selection.startColumn;\n    var endColumn = selection.endColumn;\n    var currentWordRange = this._getCurrentWordRange(model, selection);\n    var requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n    // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n    // (Same symbol)\n    for (var i = 0, len = decorationIds.length; !requestIsValid && i < len; i++) {\n      var range = model.getDecorationRange(decorationIds[i]);\n      if (range && range.startLineNumber === lineNumber) {\n        if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n          requestIsValid = true;\n        }\n      }\n    }\n    return requestIsValid;\n  };\n  OccurenceAtPositionRequest.prototype.cancel = function () {\n    this.result.cancel();\n  };\n  return OccurenceAtPositionRequest;\n}();\nvar SemanticOccurenceAtPositionRequest = /** @class */function (_super) {\n  __extends(SemanticOccurenceAtPositionRequest, _super);\n  function SemanticOccurenceAtPositionRequest() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SemanticOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\n    return getOccurrencesAtPosition(model, selection.getPosition(), token).then(function (value) {\n      return value || [];\n    });\n  };\n  return SemanticOccurenceAtPositionRequest;\n}(OccurenceAtPositionRequest);\nvar TextualOccurenceAtPositionRequest = /** @class */function (_super) {\n  __extends(TextualOccurenceAtPositionRequest, _super);\n  function TextualOccurenceAtPositionRequest(model, selection, wordSeparators) {\n    var _this = _super.call(this, model, selection, wordSeparators) || this;\n    _this._selectionIsEmpty = selection.isEmpty();\n    return _this;\n  }\n  TextualOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\n    return timeout(250, token).then(function () {\n      if (!selection.isEmpty()) {\n        return [];\n      }\n      var word = model.getWordAtPosition(selection.getPosition());\n      if (!word) {\n        return [];\n      }\n      var matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n      return matches.map(function (m) {\n        return {\n          range: m.range,\n          kind: DocumentHighlightKind.Text\n        };\n      });\n    });\n  };\n  TextualOccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\n    var currentSelectionIsEmpty = selection.isEmpty();\n    if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n      return false;\n    }\n    return _super.prototype.isValid.call(this, model, selection, decorationIds);\n  };\n  return TextualOccurenceAtPositionRequest;\n}(OccurenceAtPositionRequest);\nfunction computeOccurencesAtPosition(model, selection, wordSeparators) {\n  if (DocumentHighlightProviderRegistry.has(model)) {\n    return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators);\n  }\n  return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', function (model, position) {\n  return getOccurrencesAtPosition(model, position, CancellationToken.None);\n});\nvar WordHighlighter = /** @class */function () {\n  function WordHighlighter(editor, contextKeyService) {\n    var _this = this;\n    this.toUnhook = new DisposableStore();\n    this.workerRequestTokenId = 0;\n    this.workerRequestCompleted = false;\n    this.workerRequestValue = [];\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n    this.editor = editor;\n    this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n    this._ignorePositionChangeEvent = false;\n    this.occurrencesHighlight = this.editor.getOption(61 /* occurrencesHighlight */);\n    this.model = this.editor.getModel();\n    this.toUnhook.add(editor.onDidChangeCursorPosition(function (e) {\n      if (_this._ignorePositionChangeEvent) {\n        // We are changing the position => ignore this event\n        return;\n      }\n      if (!_this.occurrencesHighlight) {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n      _this._onPositionChanged(e);\n    }));\n    this.toUnhook.add(editor.onDidChangeModelContent(function (e) {\n      _this._stopAll();\n    }));\n    this.toUnhook.add(editor.onDidChangeConfiguration(function (e) {\n      var newValue = _this.editor.getOption(61 /* occurrencesHighlight */);\n      if (_this.occurrencesHighlight !== newValue) {\n        _this.occurrencesHighlight = newValue;\n        _this._stopAll();\n      }\n    }));\n    this._decorationIds = [];\n    this.workerRequestTokenId = 0;\n    this.workerRequest = null;\n    this.workerRequestCompleted = false;\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n  }\n  WordHighlighter.prototype.hasDecorations = function () {\n    return this._decorationIds.length > 0;\n  };\n  WordHighlighter.prototype.restore = function () {\n    if (!this.occurrencesHighlight) {\n      return;\n    }\n    this._run();\n  };\n  WordHighlighter.prototype._getSortedHighlights = function () {\n    var _this = this;\n    return arrays.coalesce(this._decorationIds.map(function (id) {\n      return _this.model.getDecorationRange(id);\n    }).sort(Range.compareRangesUsingStarts));\n  };\n  WordHighlighter.prototype.moveNext = function () {\n    var _this = this;\n    var highlights = this._getSortedHighlights();\n    var index = arrays.firstIndex(highlights, function (range) {\n      return range.containsPosition(_this.editor.getPosition());\n    });\n    var newIndex = (index + 1) % highlights.length;\n    var dest = highlights[newIndex];\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  };\n  WordHighlighter.prototype.moveBack = function () {\n    var _this = this;\n    var highlights = this._getSortedHighlights();\n    var index = arrays.firstIndex(highlights, function (range) {\n      return range.containsPosition(_this.editor.getPosition());\n    });\n    var newIndex = (index - 1 + highlights.length) % highlights.length;\n    var dest = highlights[newIndex];\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  };\n  WordHighlighter.prototype._removeDecorations = function () {\n    if (this._decorationIds.length > 0) {\n      // remove decorations\n      this._decorationIds = this.editor.deltaDecorations(this._decorationIds, []);\n      this._hasWordHighlights.set(false);\n    }\n  };\n  WordHighlighter.prototype._stopAll = function () {\n    // Remove any existing decorations\n    this._removeDecorations();\n    // Cancel any renderDecorationsTimer\n    if (this.renderDecorationsTimer !== -1) {\n      clearTimeout(this.renderDecorationsTimer);\n      this.renderDecorationsTimer = -1;\n    }\n    // Cancel any worker request\n    if (this.workerRequest !== null) {\n      this.workerRequest.cancel();\n      this.workerRequest = null;\n    }\n    // Invalidate any worker request callback\n    if (!this.workerRequestCompleted) {\n      this.workerRequestTokenId++;\n      this.workerRequestCompleted = true;\n    }\n  };\n  WordHighlighter.prototype._onPositionChanged = function (e) {\n    // disabled\n    if (!this.occurrencesHighlight) {\n      this._stopAll();\n      return;\n    }\n    // ignore typing & other\n    if (e.reason !== 3 /* Explicit */) {\n      this._stopAll();\n      return;\n    }\n    this._run();\n  };\n  WordHighlighter.prototype._run = function () {\n    var _this = this;\n    var editorSelection = this.editor.getSelection();\n    // ignore multiline selection\n    if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n      this._stopAll();\n      return;\n    }\n    var lineNumber = editorSelection.startLineNumber;\n    var startColumn = editorSelection.startColumn;\n    var endColumn = editorSelection.endColumn;\n    var word = this.model.getWordAtPosition({\n      lineNumber: lineNumber,\n      column: startColumn\n    });\n    // The selection must be inside a word or surround one word at most\n    if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n      this._stopAll();\n      return;\n    }\n    // All the effort below is trying to achieve this:\n    // - when cursor is moved to a word, trigger immediately a findOccurrences request\n    // - 250ms later after the last cursor move event, render the occurrences\n    // - no flickering!\n    var workerRequestIsValid = this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this._decorationIds);\n    // There are 4 cases:\n    // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n    // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n    // c) old workerRequest is valid, but not completed\n    // d) old workerRequest is not valid\n    // For a) no action is needed\n    // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n    this.lastCursorPositionChangeTime = new Date().getTime();\n    if (workerRequestIsValid) {\n      if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n        // case b)\n        // Delay the firing of renderDecorationsTimer by an extra 250 ms\n        clearTimeout(this.renderDecorationsTimer);\n        this.renderDecorationsTimer = -1;\n        this._beginRenderDecorations();\n      }\n    } else {\n      // case d)\n      // Stop all previous actions and start fresh\n      this._stopAll();\n      var myRequestId_1 = ++this.workerRequestTokenId;\n      this.workerRequestCompleted = false;\n      this.workerRequest = computeOccurencesAtPosition(this.model, this.editor.getSelection(), this.editor.getOption(96 /* wordSeparators */));\n      this.workerRequest.result.then(function (data) {\n        if (myRequestId_1 === _this.workerRequestTokenId) {\n          _this.workerRequestCompleted = true;\n          _this.workerRequestValue = data || [];\n          _this._beginRenderDecorations();\n        }\n      }, onUnexpectedError);\n    }\n  };\n  WordHighlighter.prototype._beginRenderDecorations = function () {\n    var _this = this;\n    var currentTime = new Date().getTime();\n    var minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n    if (currentTime >= minimumRenderTime) {\n      // Synchronous\n      this.renderDecorationsTimer = -1;\n      this.renderDecorations();\n    } else {\n      // Asynchronous\n      this.renderDecorationsTimer = setTimeout(function () {\n        _this.renderDecorations();\n      }, minimumRenderTime - currentTime);\n    }\n  };\n  WordHighlighter.prototype.renderDecorations = function () {\n    this.renderDecorationsTimer = -1;\n    var decorations = [];\n    for (var i = 0, len = this.workerRequestValue.length; i < len; i++) {\n      var info = this.workerRequestValue[i];\n      decorations.push({\n        range: info.range,\n        options: WordHighlighter._getDecorationOptions(info.kind)\n      });\n    }\n    this._decorationIds = this.editor.deltaDecorations(this._decorationIds, decorations);\n    this._hasWordHighlights.set(this.hasDecorations());\n  };\n  WordHighlighter._getDecorationOptions = function (kind) {\n    if (kind === DocumentHighlightKind.Write) {\n      return this._WRITE_OPTIONS;\n    } else if (kind === DocumentHighlightKind.Text) {\n      return this._TEXT_OPTIONS;\n    } else {\n      return this._REGULAR_OPTIONS;\n    }\n  };\n  WordHighlighter.prototype.dispose = function () {\n    this._stopAll();\n    this.toUnhook.dispose();\n  };\n  WordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  WordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  WordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerWordHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  return WordHighlighter;\n}();\nvar WordHighlighterContribution = /** @class */function (_super) {\n  __extends(WordHighlighterContribution, _super);\n  function WordHighlighterContribution(editor, contextKeyService) {\n    var _this = _super.call(this) || this;\n    _this.wordHighligher = null;\n    var createWordHighlighterIfPossible = function createWordHighlighterIfPossible() {\n      if (editor.hasModel()) {\n        _this.wordHighligher = new WordHighlighter(editor, contextKeyService);\n      }\n    };\n    _this._register(editor.onDidChangeModel(function (e) {\n      if (_this.wordHighligher) {\n        _this.wordHighligher.dispose();\n        _this.wordHighligher = null;\n      }\n      createWordHighlighterIfPossible();\n    }));\n    createWordHighlighterIfPossible();\n    return _this;\n  }\n  WordHighlighterContribution.get = function (editor) {\n    return editor.getContribution(WordHighlighterContribution.ID);\n  };\n  WordHighlighterContribution.prototype.saveViewState = function () {\n    if (this.wordHighligher && this.wordHighligher.hasDecorations()) {\n      return true;\n    }\n    return false;\n  };\n  WordHighlighterContribution.prototype.moveNext = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.moveNext();\n    }\n  };\n  WordHighlighterContribution.prototype.moveBack = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.moveBack();\n    }\n  };\n  WordHighlighterContribution.prototype.restoreViewState = function (state) {\n    if (this.wordHighligher && state) {\n      this.wordHighligher.restore();\n    }\n  };\n  WordHighlighterContribution.prototype.dispose = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.dispose();\n      this.wordHighligher = null;\n    }\n    _super.prototype.dispose.call(this);\n  };\n  WordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\n  WordHighlighterContribution = __decorate([__param(1, IContextKeyService)], WordHighlighterContribution);\n  return WordHighlighterContribution;\n}(Disposable);\nvar WordHighlightNavigationAction = /** @class */function (_super) {\n  __extends(WordHighlightNavigationAction, _super);\n  function WordHighlightNavigationAction(next, opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._isNext = next;\n    return _this;\n  }\n  WordHighlightNavigationAction.prototype.run = function (accessor, editor) {\n    var controller = WordHighlighterContribution.get(editor);\n    if (!controller) {\n      return;\n    }\n    if (this._isNext) {\n      controller.moveNext();\n    } else {\n      controller.moveBack();\n    }\n  };\n  return WordHighlightNavigationAction;\n}(EditorAction);\nvar NextWordHighlightAction = /** @class */function (_super) {\n  __extends(NextWordHighlightAction, _super);\n  function NextWordHighlightAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.wordHighlight.next',\n      label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n      alias: 'Go to Next Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 65 /* F7 */,\n        weight: 100 /* EditorContrib */\n      }\n    }) || this;\n  }\n  return NextWordHighlightAction;\n}(WordHighlightNavigationAction);\nvar PrevWordHighlightAction = /** @class */function (_super) {\n  __extends(PrevWordHighlightAction, _super);\n  function PrevWordHighlightAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.wordHighlight.prev',\n      label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n      alias: 'Go to Previous Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* Shift */ | 65 /* F7 */,\n        weight: 100 /* EditorContrib */\n      }\n    }) || this;\n  }\n  return PrevWordHighlightAction;\n}(WordHighlightNavigationAction);\nvar TriggerWordHighlightAction = /** @class */function (_super) {\n  __extends(TriggerWordHighlightAction, _super);\n  function TriggerWordHighlightAction() {\n    return _super.call(this, {\n      id: 'editor.action.wordHighlight.trigger',\n      label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n      alias: 'Trigger Symbol Highlight',\n      precondition: ctxHasWordHighlights.toNegated(),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100 /* EditorContrib */\n      }\n    }) || this;\n  }\n  TriggerWordHighlightAction.prototype.run = function (accessor, editor, args) {\n    var controller = WordHighlighterContribution.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.restoreViewState(true);\n  };\n  return TriggerWordHighlightAction;\n}(EditorAction);\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant(function (theme, collector) {\n  var selectionHighlight = theme.getColor(editorSelectionHighlight);\n  if (selectionHighlight) {\n    collector.addRule(\".monaco-editor .focused .selectionHighlight { background-color: \" + selectionHighlight + \"; }\");\n    collector.addRule(\".monaco-editor .selectionHighlight { background-color: \" + selectionHighlight.transparent(0.5) + \"; }\");\n  }\n  var wordHighlight = theme.getColor(editorWordHighlight);\n  if (wordHighlight) {\n    collector.addRule(\".monaco-editor .wordHighlight { background-color: \" + wordHighlight + \"; }\");\n  }\n  var wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n  if (wordHighlightStrong) {\n    collector.addRule(\".monaco-editor .wordHighlightStrong { background-color: \" + wordHighlightStrong + \"; }\");\n  }\n  var selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n  if (selectionHighlightBorder) {\n    collector.addRule(\".monaco-editor .selectionHighlight { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + selectionHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n  var wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n  if (wordHighlightBorder) {\n    collector.addRule(\".monaco-editor .wordHighlight { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n  var wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n  if (wordHighlightStrongBorder) {\n    collector.addRule(\".monaco-editor .wordHighlightStrong { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightStrongBorder + \"; box-sizing: border-box; }\");\n  }\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","arrays","createCancelablePromise","first","timeout","CancellationToken","onUnexpectedError","onUnexpectedExternalError","Disposable","DisposableStore","EditorAction","registerEditorAction","registerEditorContribution","registerModelAndPositionCommand","Range","EditorContextKeys","OverviewRulerLane","ModelDecorationOptions","DocumentHighlightKind","DocumentHighlightProviderRegistry","IContextKeyService","RawContextKey","activeContrastBorder","editorSelectionHighlight","editorSelectionHighlightBorder","overviewRulerSelectionHighlightForeground","registerColor","registerThemingParticipant","themeColorFromId","editorWordHighlight","dark","light","hc","localize","editorWordHighlightStrong","editorWordHighlightBorder","editorWordHighlightStrongBorder","overviewRulerWordHighlightForeground","overviewRulerWordHighlightStrongForeground","ctxHasWordHighlights","getOccurrencesAtPosition","model","position","token","orderedByScore","ordered","map","provider","Promise","resolve","provideDocumentHighlights","then","undefined","isNonEmptyArray","OccurenceAtPositionRequest","selection","wordSeparators","_this","_wordRange","_getCurrentWordRange","result","_compute","word","getWordAtPosition","getPosition","startLineNumber","startColumn","endColumn","isValid","decorationIds","lineNumber","currentWordRange","requestIsValid","Boolean","equalsRange","len","range","getDecorationRange","cancel","SemanticOccurenceAtPositionRequest","_super","apply","value","TextualOccurenceAtPositionRequest","call","_selectionIsEmpty","isEmpty","matches","findMatches","m","kind","Text","currentSelectionIsEmpty","computeOccurencesAtPosition","has","None","WordHighlighter","editor","contextKeyService","toUnhook","workerRequestTokenId","workerRequestCompleted","workerRequestValue","lastCursorPositionChangeTime","renderDecorationsTimer","_hasWordHighlights","bindTo","_ignorePositionChangeEvent","occurrencesHighlight","getOption","getModel","add","onDidChangeCursorPosition","e","_onPositionChanged","onDidChangeModelContent","_stopAll","onDidChangeConfiguration","newValue","_decorationIds","workerRequest","hasDecorations","restore","_run","_getSortedHighlights","coalesce","id","sort","compareRangesUsingStarts","moveNext","highlights","index","firstIndex","containsPosition","newIndex","dest","setPosition","getStartPosition","revealRangeInCenterIfOutsideViewport","moveBack","_removeDecorations","deltaDecorations","set","clearTimeout","reason","editorSelection","getSelection","endLineNumber","column","workerRequestIsValid","Date","getTime","_beginRenderDecorations","myRequestId_1","data","currentTime","minimumRenderTime","renderDecorations","setTimeout","decorations","info","push","options","_getDecorationOptions","Write","_WRITE_OPTIONS","_TEXT_OPTIONS","_REGULAR_OPTIONS","dispose","register","stickiness","className","overviewRuler","color","Center","WordHighlighterContribution","wordHighligher","createWordHighlighterIfPossible","hasModel","_register","onDidChangeModel","get","getContribution","ID","saveViewState","restoreViewState","state","WordHighlightNavigationAction","next","opts","_isNext","run","accessor","controller","NextWordHighlightAction","label","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","weight","PrevWordHighlightAction","TriggerWordHighlightAction","toNegated","args","theme","collector","selectionHighlight","getColor","addRule","transparent","wordHighlight","wordHighlightStrong","selectionHighlightBorder","type","wordHighlightBorder","wordHighlightStrongBorder"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/wordHighlighter.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport { createCancelablePromise, first, timeout } from '../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { OverviewRulerLane } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { DocumentHighlightKind, DocumentHighlightProviderRegistry } from '../../common/modes.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, overviewRulerSelectionHighlightForeground, registerColor } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant, themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nvar editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hc: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nvar editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hc: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nvar editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\r\nvar editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\r\nvar overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hc: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nvar overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hc: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nvar ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\r\nexport function getOccurrencesAtPosition(model, position, token) {\r\n    var orderedByScore = DocumentHighlightProviderRegistry.ordered(model);\r\n    // in order of score ask the occurrences provider\r\n    // until someone response with a good result\r\n    // (good = none empty array)\r\n    return first(orderedByScore.map(function (provider) { return function () {\r\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\r\n            .then(undefined, onUnexpectedExternalError);\r\n    }; }), arrays.isNonEmptyArray);\r\n}\r\nvar OccurenceAtPositionRequest = /** @class */ (function () {\r\n    function OccurenceAtPositionRequest(model, selection, wordSeparators) {\r\n        var _this = this;\r\n        this._wordRange = this._getCurrentWordRange(model, selection);\r\n        this.result = createCancelablePromise(function (token) { return _this._compute(model, selection, wordSeparators, token); });\r\n    }\r\n    OccurenceAtPositionRequest.prototype._getCurrentWordRange = function (model, selection) {\r\n        var word = model.getWordAtPosition(selection.getPosition());\r\n        if (word) {\r\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\r\n        }\r\n        return null;\r\n    };\r\n    OccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\r\n        var lineNumber = selection.startLineNumber;\r\n        var startColumn = selection.startColumn;\r\n        var endColumn = selection.endColumn;\r\n        var currentWordRange = this._getCurrentWordRange(model, selection);\r\n        var requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\r\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\r\n        // (Same symbol)\r\n        for (var i = 0, len = decorationIds.length; !requestIsValid && i < len; i++) {\r\n            var range = model.getDecorationRange(decorationIds[i]);\r\n            if (range && range.startLineNumber === lineNumber) {\r\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\r\n                    requestIsValid = true;\r\n                }\r\n            }\r\n        }\r\n        return requestIsValid;\r\n    };\r\n    OccurenceAtPositionRequest.prototype.cancel = function () {\r\n        this.result.cancel();\r\n    };\r\n    return OccurenceAtPositionRequest;\r\n}());\r\nvar SemanticOccurenceAtPositionRequest = /** @class */ (function (_super) {\r\n    __extends(SemanticOccurenceAtPositionRequest, _super);\r\n    function SemanticOccurenceAtPositionRequest() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SemanticOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\r\n        return getOccurrencesAtPosition(model, selection.getPosition(), token).then(function (value) { return value || []; });\r\n    };\r\n    return SemanticOccurenceAtPositionRequest;\r\n}(OccurenceAtPositionRequest));\r\nvar TextualOccurenceAtPositionRequest = /** @class */ (function (_super) {\r\n    __extends(TextualOccurenceAtPositionRequest, _super);\r\n    function TextualOccurenceAtPositionRequest(model, selection, wordSeparators) {\r\n        var _this = _super.call(this, model, selection, wordSeparators) || this;\r\n        _this._selectionIsEmpty = selection.isEmpty();\r\n        return _this;\r\n    }\r\n    TextualOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\r\n        return timeout(250, token).then(function () {\r\n            if (!selection.isEmpty()) {\r\n                return [];\r\n            }\r\n            var word = model.getWordAtPosition(selection.getPosition());\r\n            if (!word) {\r\n                return [];\r\n            }\r\n            var matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\r\n            return matches.map(function (m) {\r\n                return {\r\n                    range: m.range,\r\n                    kind: DocumentHighlightKind.Text\r\n                };\r\n            });\r\n        });\r\n    };\r\n    TextualOccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\r\n        var currentSelectionIsEmpty = selection.isEmpty();\r\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\r\n            return false;\r\n        }\r\n        return _super.prototype.isValid.call(this, model, selection, decorationIds);\r\n    };\r\n    return TextualOccurenceAtPositionRequest;\r\n}(OccurenceAtPositionRequest));\r\nfunction computeOccurencesAtPosition(model, selection, wordSeparators) {\r\n    if (DocumentHighlightProviderRegistry.has(model)) {\r\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators);\r\n    }\r\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\r\n}\r\nregisterModelAndPositionCommand('_executeDocumentHighlights', function (model, position) { return getOccurrencesAtPosition(model, position, CancellationToken.None); });\r\nvar WordHighlighter = /** @class */ (function () {\r\n    function WordHighlighter(editor, contextKeyService) {\r\n        var _this = this;\r\n        this.toUnhook = new DisposableStore();\r\n        this.workerRequestTokenId = 0;\r\n        this.workerRequestCompleted = false;\r\n        this.workerRequestValue = [];\r\n        this.lastCursorPositionChangeTime = 0;\r\n        this.renderDecorationsTimer = -1;\r\n        this.editor = editor;\r\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\r\n        this._ignorePositionChangeEvent = false;\r\n        this.occurrencesHighlight = this.editor.getOption(61 /* occurrencesHighlight */);\r\n        this.model = this.editor.getModel();\r\n        this.toUnhook.add(editor.onDidChangeCursorPosition(function (e) {\r\n            if (_this._ignorePositionChangeEvent) {\r\n                // We are changing the position => ignore this event\r\n                return;\r\n            }\r\n            if (!_this.occurrencesHighlight) {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            _this._onPositionChanged(e);\r\n        }));\r\n        this.toUnhook.add(editor.onDidChangeModelContent(function (e) {\r\n            _this._stopAll();\r\n        }));\r\n        this.toUnhook.add(editor.onDidChangeConfiguration(function (e) {\r\n            var newValue = _this.editor.getOption(61 /* occurrencesHighlight */);\r\n            if (_this.occurrencesHighlight !== newValue) {\r\n                _this.occurrencesHighlight = newValue;\r\n                _this._stopAll();\r\n            }\r\n        }));\r\n        this._decorationIds = [];\r\n        this.workerRequestTokenId = 0;\r\n        this.workerRequest = null;\r\n        this.workerRequestCompleted = false;\r\n        this.lastCursorPositionChangeTime = 0;\r\n        this.renderDecorationsTimer = -1;\r\n    }\r\n    WordHighlighter.prototype.hasDecorations = function () {\r\n        return (this._decorationIds.length > 0);\r\n    };\r\n    WordHighlighter.prototype.restore = function () {\r\n        if (!this.occurrencesHighlight) {\r\n            return;\r\n        }\r\n        this._run();\r\n    };\r\n    WordHighlighter.prototype._getSortedHighlights = function () {\r\n        var _this = this;\r\n        return arrays.coalesce(this._decorationIds\r\n            .map(function (id) { return _this.model.getDecorationRange(id); })\r\n            .sort(Range.compareRangesUsingStarts));\r\n    };\r\n    WordHighlighter.prototype.moveNext = function () {\r\n        var _this = this;\r\n        var highlights = this._getSortedHighlights();\r\n        var index = arrays.firstIndex(highlights, function (range) { return range.containsPosition(_this.editor.getPosition()); });\r\n        var newIndex = ((index + 1) % highlights.length);\r\n        var dest = highlights[newIndex];\r\n        try {\r\n            this._ignorePositionChangeEvent = true;\r\n            this.editor.setPosition(dest.getStartPosition());\r\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\r\n        }\r\n        finally {\r\n            this._ignorePositionChangeEvent = false;\r\n        }\r\n    };\r\n    WordHighlighter.prototype.moveBack = function () {\r\n        var _this = this;\r\n        var highlights = this._getSortedHighlights();\r\n        var index = arrays.firstIndex(highlights, function (range) { return range.containsPosition(_this.editor.getPosition()); });\r\n        var newIndex = ((index - 1 + highlights.length) % highlights.length);\r\n        var dest = highlights[newIndex];\r\n        try {\r\n            this._ignorePositionChangeEvent = true;\r\n            this.editor.setPosition(dest.getStartPosition());\r\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\r\n        }\r\n        finally {\r\n            this._ignorePositionChangeEvent = false;\r\n        }\r\n    };\r\n    WordHighlighter.prototype._removeDecorations = function () {\r\n        if (this._decorationIds.length > 0) {\r\n            // remove decorations\r\n            this._decorationIds = this.editor.deltaDecorations(this._decorationIds, []);\r\n            this._hasWordHighlights.set(false);\r\n        }\r\n    };\r\n    WordHighlighter.prototype._stopAll = function () {\r\n        // Remove any existing decorations\r\n        this._removeDecorations();\r\n        // Cancel any renderDecorationsTimer\r\n        if (this.renderDecorationsTimer !== -1) {\r\n            clearTimeout(this.renderDecorationsTimer);\r\n            this.renderDecorationsTimer = -1;\r\n        }\r\n        // Cancel any worker request\r\n        if (this.workerRequest !== null) {\r\n            this.workerRequest.cancel();\r\n            this.workerRequest = null;\r\n        }\r\n        // Invalidate any worker request callback\r\n        if (!this.workerRequestCompleted) {\r\n            this.workerRequestTokenId++;\r\n            this.workerRequestCompleted = true;\r\n        }\r\n    };\r\n    WordHighlighter.prototype._onPositionChanged = function (e) {\r\n        // disabled\r\n        if (!this.occurrencesHighlight) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        // ignore typing & other\r\n        if (e.reason !== 3 /* Explicit */) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        this._run();\r\n    };\r\n    WordHighlighter.prototype._run = function () {\r\n        var _this = this;\r\n        var editorSelection = this.editor.getSelection();\r\n        // ignore multiline selection\r\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        var lineNumber = editorSelection.startLineNumber;\r\n        var startColumn = editorSelection.startColumn;\r\n        var endColumn = editorSelection.endColumn;\r\n        var word = this.model.getWordAtPosition({\r\n            lineNumber: lineNumber,\r\n            column: startColumn\r\n        });\r\n        // The selection must be inside a word or surround one word at most\r\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        // All the effort below is trying to achieve this:\r\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\r\n        // - 250ms later after the last cursor move event, render the occurrences\r\n        // - no flickering!\r\n        var workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this._decorationIds));\r\n        // There are 4 cases:\r\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\r\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\r\n        // c) old workerRequest is valid, but not completed\r\n        // d) old workerRequest is not valid\r\n        // For a) no action is needed\r\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\r\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\r\n        if (workerRequestIsValid) {\r\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\r\n                // case b)\r\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\r\n                clearTimeout(this.renderDecorationsTimer);\r\n                this.renderDecorationsTimer = -1;\r\n                this._beginRenderDecorations();\r\n            }\r\n        }\r\n        else {\r\n            // case d)\r\n            // Stop all previous actions and start fresh\r\n            this._stopAll();\r\n            var myRequestId_1 = ++this.workerRequestTokenId;\r\n            this.workerRequestCompleted = false;\r\n            this.workerRequest = computeOccurencesAtPosition(this.model, this.editor.getSelection(), this.editor.getOption(96 /* wordSeparators */));\r\n            this.workerRequest.result.then(function (data) {\r\n                if (myRequestId_1 === _this.workerRequestTokenId) {\r\n                    _this.workerRequestCompleted = true;\r\n                    _this.workerRequestValue = data || [];\r\n                    _this._beginRenderDecorations();\r\n                }\r\n            }, onUnexpectedError);\r\n        }\r\n    };\r\n    WordHighlighter.prototype._beginRenderDecorations = function () {\r\n        var _this = this;\r\n        var currentTime = (new Date()).getTime();\r\n        var minimumRenderTime = this.lastCursorPositionChangeTime + 250;\r\n        if (currentTime >= minimumRenderTime) {\r\n            // Synchronous\r\n            this.renderDecorationsTimer = -1;\r\n            this.renderDecorations();\r\n        }\r\n        else {\r\n            // Asynchronous\r\n            this.renderDecorationsTimer = setTimeout(function () {\r\n                _this.renderDecorations();\r\n            }, (minimumRenderTime - currentTime));\r\n        }\r\n    };\r\n    WordHighlighter.prototype.renderDecorations = function () {\r\n        this.renderDecorationsTimer = -1;\r\n        var decorations = [];\r\n        for (var i = 0, len = this.workerRequestValue.length; i < len; i++) {\r\n            var info = this.workerRequestValue[i];\r\n            decorations.push({\r\n                range: info.range,\r\n                options: WordHighlighter._getDecorationOptions(info.kind)\r\n            });\r\n        }\r\n        this._decorationIds = this.editor.deltaDecorations(this._decorationIds, decorations);\r\n        this._hasWordHighlights.set(this.hasDecorations());\r\n    };\r\n    WordHighlighter._getDecorationOptions = function (kind) {\r\n        if (kind === DocumentHighlightKind.Write) {\r\n            return this._WRITE_OPTIONS;\r\n        }\r\n        else if (kind === DocumentHighlightKind.Text) {\r\n            return this._TEXT_OPTIONS;\r\n        }\r\n        else {\r\n            return this._REGULAR_OPTIONS;\r\n        }\r\n    };\r\n    WordHighlighter.prototype.dispose = function () {\r\n        this._stopAll();\r\n        this.toUnhook.dispose();\r\n    };\r\n    WordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'wordHighlightStrong',\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    WordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'selectionHighlight',\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerSelectionHighlightForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    WordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'wordHighlight',\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerWordHighlightForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    return WordHighlighter;\r\n}());\r\nvar WordHighlighterContribution = /** @class */ (function (_super) {\r\n    __extends(WordHighlighterContribution, _super);\r\n    function WordHighlighterContribution(editor, contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.wordHighligher = null;\r\n        var createWordHighlighterIfPossible = function () {\r\n            if (editor.hasModel()) {\r\n                _this.wordHighligher = new WordHighlighter(editor, contextKeyService);\r\n            }\r\n        };\r\n        _this._register(editor.onDidChangeModel(function (e) {\r\n            if (_this.wordHighligher) {\r\n                _this.wordHighligher.dispose();\r\n                _this.wordHighligher = null;\r\n            }\r\n            createWordHighlighterIfPossible();\r\n        }));\r\n        createWordHighlighterIfPossible();\r\n        return _this;\r\n    }\r\n    WordHighlighterContribution.get = function (editor) {\r\n        return editor.getContribution(WordHighlighterContribution.ID);\r\n    };\r\n    WordHighlighterContribution.prototype.saveViewState = function () {\r\n        if (this.wordHighligher && this.wordHighligher.hasDecorations()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    WordHighlighterContribution.prototype.moveNext = function () {\r\n        if (this.wordHighligher) {\r\n            this.wordHighligher.moveNext();\r\n        }\r\n    };\r\n    WordHighlighterContribution.prototype.moveBack = function () {\r\n        if (this.wordHighligher) {\r\n            this.wordHighligher.moveBack();\r\n        }\r\n    };\r\n    WordHighlighterContribution.prototype.restoreViewState = function (state) {\r\n        if (this.wordHighligher && state) {\r\n            this.wordHighligher.restore();\r\n        }\r\n    };\r\n    WordHighlighterContribution.prototype.dispose = function () {\r\n        if (this.wordHighligher) {\r\n            this.wordHighligher.dispose();\r\n            this.wordHighligher = null;\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    WordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\r\n    WordHighlighterContribution = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], WordHighlighterContribution);\r\n    return WordHighlighterContribution;\r\n}(Disposable));\r\nvar WordHighlightNavigationAction = /** @class */ (function (_super) {\r\n    __extends(WordHighlightNavigationAction, _super);\r\n    function WordHighlightNavigationAction(next, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._isNext = next;\r\n        return _this;\r\n    }\r\n    WordHighlightNavigationAction.prototype.run = function (accessor, editor) {\r\n        var controller = WordHighlighterContribution.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        if (this._isNext) {\r\n            controller.moveNext();\r\n        }\r\n        else {\r\n            controller.moveBack();\r\n        }\r\n    };\r\n    return WordHighlightNavigationAction;\r\n}(EditorAction));\r\nvar NextWordHighlightAction = /** @class */ (function (_super) {\r\n    __extends(NextWordHighlightAction, _super);\r\n    function NextWordHighlightAction() {\r\n        return _super.call(this, true, {\r\n            id: 'editor.action.wordHighlight.next',\r\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\r\n            alias: 'Go to Next Symbol Highlight',\r\n            precondition: ctxHasWordHighlights,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    return NextWordHighlightAction;\r\n}(WordHighlightNavigationAction));\r\nvar PrevWordHighlightAction = /** @class */ (function (_super) {\r\n    __extends(PrevWordHighlightAction, _super);\r\n    function PrevWordHighlightAction() {\r\n        return _super.call(this, false, {\r\n            id: 'editor.action.wordHighlight.prev',\r\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\r\n            alias: 'Go to Previous Symbol Highlight',\r\n            precondition: ctxHasWordHighlights,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    return PrevWordHighlightAction;\r\n}(WordHighlightNavigationAction));\r\nvar TriggerWordHighlightAction = /** @class */ (function (_super) {\r\n    __extends(TriggerWordHighlightAction, _super);\r\n    function TriggerWordHighlightAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.wordHighlight.trigger',\r\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\r\n            alias: 'Trigger Symbol Highlight',\r\n            precondition: ctxHasWordHighlights.toNegated(),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 0,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    TriggerWordHighlightAction.prototype.run = function (accessor, editor, args) {\r\n        var controller = WordHighlighterContribution.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.restoreViewState(true);\r\n    };\r\n    return TriggerWordHighlightAction;\r\n}(EditorAction));\r\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\r\nregisterEditorAction(NextWordHighlightAction);\r\nregisterEditorAction(PrevWordHighlightAction);\r\nregisterEditorAction(TriggerWordHighlightAction);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var selectionHighlight = theme.getColor(editorSelectionHighlight);\r\n    if (selectionHighlight) {\r\n        collector.addRule(\".monaco-editor .focused .selectionHighlight { background-color: \" + selectionHighlight + \"; }\");\r\n        collector.addRule(\".monaco-editor .selectionHighlight { background-color: \" + selectionHighlight.transparent(0.5) + \"; }\");\r\n    }\r\n    var wordHighlight = theme.getColor(editorWordHighlight);\r\n    if (wordHighlight) {\r\n        collector.addRule(\".monaco-editor .wordHighlight { background-color: \" + wordHighlight + \"; }\");\r\n    }\r\n    var wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\r\n    if (wordHighlightStrong) {\r\n        collector.addRule(\".monaco-editor .wordHighlightStrong { background-color: \" + wordHighlightStrong + \"; }\");\r\n    }\r\n    var selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\r\n    if (selectionHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .selectionHighlight { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + selectionHighlightBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n    var wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\r\n    if (wordHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .wordHighlight { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n    var wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\r\n    if (wordHighlightStrongBorder) {\r\n        collector.addRule(\".monaco-editor .wordHighlightStrong { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightStrongBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}