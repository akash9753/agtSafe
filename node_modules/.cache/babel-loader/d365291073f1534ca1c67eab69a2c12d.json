{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport { getOrDefault } from '../../../common/objects.js';\nimport { dispose, Disposable, toDisposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\nimport * as DOM from '../../dom.js';\nimport { Event, Emitter } from '../../../common/event.js';\nimport { domEvent } from '../../event.js';\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Range } from '../../../common/range.js';\nimport { equals, distinct } from '../../../common/arrays.js';\nimport { DataTransfers, StaticDND } from '../../dnd.js';\nimport { disposableTimeout, Delayer } from '../../../common/async.js';\nimport { isFirefox } from '../../browser.js';\nvar DefaultOptions = {\n  useShadows: true,\n  verticalScrollMode: 1 /* Auto */,\n  setRowLineHeight: true,\n  supportDynamicHeights: false,\n  dnd: {\n    getDragElements: function getDragElements(e) {\n      return [e];\n    },\n    getDragURI: function getDragURI() {\n      return null;\n    },\n    onDragStart: function onDragStart() {},\n    onDragOver: function onDragOver() {\n      return false;\n    },\n    drop: function drop() {}\n  },\n  horizontalScrolling: false\n};\nvar ElementsDragAndDropData = /** @class */function () {\n  function ElementsDragAndDropData(elements) {\n    this.elements = elements;\n  }\n  ElementsDragAndDropData.prototype.update = function () {};\n  ElementsDragAndDropData.prototype.getData = function () {\n    return this.elements;\n  };\n  return ElementsDragAndDropData;\n}();\nexport { ElementsDragAndDropData };\nvar ExternalElementsDragAndDropData = /** @class */function () {\n  function ExternalElementsDragAndDropData(elements) {\n    this.elements = elements;\n  }\n  ExternalElementsDragAndDropData.prototype.update = function () {};\n  ExternalElementsDragAndDropData.prototype.getData = function () {\n    return this.elements;\n  };\n  return ExternalElementsDragAndDropData;\n}();\nexport { ExternalElementsDragAndDropData };\nvar DesktopDragAndDropData = /** @class */function () {\n  function DesktopDragAndDropData() {\n    this.types = [];\n    this.files = [];\n  }\n  DesktopDragAndDropData.prototype.update = function (dataTransfer) {\n    var _a;\n    if (dataTransfer.types) {\n      (_a = this.types).splice.apply(_a, __spreadArrays([0, this.types.length], dataTransfer.types));\n    }\n    if (dataTransfer.files) {\n      this.files.splice(0, this.files.length);\n      for (var i = 0; i < dataTransfer.files.length; i++) {\n        var file = dataTransfer.files.item(i);\n        if (file && (file.size || file.type)) {\n          this.files.push(file);\n        }\n      }\n    }\n  };\n  DesktopDragAndDropData.prototype.getData = function () {\n    return {\n      types: this.types,\n      files: this.files\n    };\n  };\n  return DesktopDragAndDropData;\n}();\nexport { DesktopDragAndDropData };\nfunction equalsDragFeedback(f1, f2) {\n  if (Array.isArray(f1) && Array.isArray(f2)) {\n    return equals(f1, f2);\n  }\n  return f1 === f2;\n}\nvar ListView = /** @class */function () {\n  function ListView(container, virtualDelegate, renderers, options) {\n    var _this = this;\n    if (options === void 0) {\n      options = DefaultOptions;\n    }\n    this.virtualDelegate = virtualDelegate;\n    this.domId = \"list_id_\" + ++ListView.InstanceCount;\n    this.renderers = new Map();\n    this.renderWidth = 0;\n    this._scrollHeight = 0;\n    this.scrollableElementUpdateDisposable = null;\n    this.scrollableElementWidthDelayer = new Delayer(50);\n    this.splicing = false;\n    this.dragOverAnimationStopDisposable = Disposable.None;\n    this.dragOverMouseY = 0;\n    this.canDrop = false;\n    this.currentDragFeedbackDisposable = Disposable.None;\n    this.onDragLeaveTimeout = Disposable.None;\n    this.disposables = new DisposableStore();\n    this._onDidChangeContentHeight = new Emitter();\n    if (options.horizontalScrolling && options.supportDynamicHeights) {\n      throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n    }\n    this.items = [];\n    this.itemId = 0;\n    this.rangeMap = new RangeMap();\n    for (var _i = 0, renderers_1 = renderers; _i < renderers_1.length; _i++) {\n      var renderer = renderers_1[_i];\n      this.renderers.set(renderer.templateId, renderer);\n    }\n    this.cache = this.disposables.add(new RowCache(this.renderers));\n    this.lastRenderTop = 0;\n    this.lastRenderHeight = 0;\n    this.domNode = document.createElement('div');\n    this.domNode.className = 'monaco-list';\n    DOM.addClass(this.domNode, this.domId);\n    this.domNode.tabIndex = 0;\n    DOM.toggleClass(this.domNode, 'mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n    this.horizontalScrolling = getOrDefault(options, function (o) {\n      return o.horizontalScrolling;\n    }, DefaultOptions.horizontalScrolling);\n    DOM.toggleClass(this.domNode, 'horizontal-scrolling', this.horizontalScrolling);\n    this.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\n    this.ariaProvider = options.ariaProvider || {\n      getSetSize: function getSetSize(e, i, length) {\n        return length;\n      },\n      getPosInSet: function getPosInSet(_, index) {\n        return index + 1;\n      }\n    };\n    this.rowsContainer = document.createElement('div');\n    this.rowsContainer.className = 'monaco-list-rows';\n    this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n    this.disposables.add(Gesture.addTarget(this.rowsContainer));\n    this.scrollableElement = this.disposables.add(new ScrollableElement(this.rowsContainer, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: this.horizontalScrolling ? 1 /* Auto */ : 2 /* Hidden */,\n      vertical: getOrDefault(options, function (o) {\n        return o.verticalScrollMode;\n      }, DefaultOptions.verticalScrollMode),\n      useShadows: getOrDefault(options, function (o) {\n        return o.useShadows;\n      }, DefaultOptions.useShadows)\n    }));\n    this.domNode.appendChild(this.scrollableElement.getDomNode());\n    container.appendChild(this.domNode);\n    this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n    domEvent(this.rowsContainer, TouchEventType.Change)(this.onTouchChange, this, this.disposables);\n    // Prevent the monaco-scrollable-element from scrolling\n    // https://github.com/Microsoft/vscode/issues/44181\n    domEvent(this.scrollableElement.getDomNode(), 'scroll')(function (e) {\n      return e.target.scrollTop = 0;\n    }, null, this.disposables);\n    Event.map(domEvent(this.domNode, 'dragover'), function (e) {\n      return _this.toDragEvent(e);\n    })(this.onDragOver, this, this.disposables);\n    Event.map(domEvent(this.domNode, 'drop'), function (e) {\n      return _this.toDragEvent(e);\n    })(this.onDrop, this, this.disposables);\n    domEvent(this.domNode, 'dragleave')(this.onDragLeave, this, this.disposables);\n    domEvent(window, 'dragend')(this.onDragEnd, this, this.disposables);\n    this.setRowLineHeight = getOrDefault(options, function (o) {\n      return o.setRowLineHeight;\n    }, DefaultOptions.setRowLineHeight);\n    this.supportDynamicHeights = getOrDefault(options, function (o) {\n      return o.supportDynamicHeights;\n    }, DefaultOptions.supportDynamicHeights);\n    this.dnd = getOrDefault(options, function (o) {\n      return o.dnd;\n    }, DefaultOptions.dnd);\n    this.layout();\n  }\n  Object.defineProperty(ListView.prototype, \"contentHeight\", {\n    get: function get() {\n      return this.rangeMap.size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ListView.prototype.splice = function (start, deleteCount, elements) {\n    if (elements === void 0) {\n      elements = [];\n    }\n    if (this.splicing) {\n      throw new Error('Can\\'t run recursive splices.');\n    }\n    this.splicing = true;\n    try {\n      return this._splice(start, deleteCount, elements);\n    } finally {\n      this.splicing = false;\n      this._onDidChangeContentHeight.fire(this.contentHeight);\n    }\n  };\n  ListView.prototype._splice = function (start, deleteCount, elements) {\n    var _a;\n    var _this = this;\n    if (elements === void 0) {\n      elements = [];\n    }\n    var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    var deleteRange = {\n      start: start,\n      end: start + deleteCount\n    };\n    var removeRange = Range.intersect(previousRenderRange, deleteRange);\n    for (var i = removeRange.start; i < removeRange.end; i++) {\n      this.removeItemFromDOM(i);\n    }\n    var previousRestRange = {\n      start: start + deleteCount,\n      end: this.items.length\n    };\n    var previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n    var previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n    var inserted = elements.map(function (element) {\n      return {\n        id: String(_this.itemId++),\n        element: element,\n        templateId: _this.virtualDelegate.getTemplateId(element),\n        size: _this.virtualDelegate.getHeight(element),\n        width: undefined,\n        hasDynamicHeight: !!_this.virtualDelegate.hasDynamicHeight && _this.virtualDelegate.hasDynamicHeight(element),\n        lastDynamicHeightWidth: undefined,\n        row: null,\n        uri: undefined,\n        dropTarget: false,\n        dragStartDisposable: Disposable.None\n      };\n    });\n    var deleted;\n    // TODO@joao: improve this optimization to catch even more cases\n    if (start === 0 && deleteCount >= this.items.length) {\n      this.rangeMap = new RangeMap();\n      this.rangeMap.splice(0, 0, inserted);\n      this.items = inserted;\n      deleted = [];\n    } else {\n      this.rangeMap.splice(start, deleteCount, inserted);\n      deleted = (_a = this.items).splice.apply(_a, __spreadArrays([start, deleteCount], inserted));\n    }\n    var delta = elements.length - deleteCount;\n    var renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    var renderedRestRange = shift(previousRenderedRestRange, delta);\n    var updateRange = Range.intersect(renderRange, renderedRestRange);\n    for (var i = updateRange.start; i < updateRange.end; i++) {\n      this.updateItemInDOM(this.items[i], i);\n    }\n    var removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n    for (var _i = 0, removeRanges_1 = removeRanges; _i < removeRanges_1.length; _i++) {\n      var range = removeRanges_1[_i];\n      for (var i = range.start; i < range.end; i++) {\n        this.removeItemFromDOM(i);\n      }\n    }\n    var unrenderedRestRanges = previousUnrenderedRestRanges.map(function (r) {\n      return shift(r, delta);\n    });\n    var elementsRange = {\n      start: start,\n      end: start + elements.length\n    };\n    var insertRanges = __spreadArrays([elementsRange], unrenderedRestRanges).map(function (r) {\n      return Range.intersect(renderRange, r);\n    });\n    var beforeElement = this.getNextToLastElement(insertRanges);\n    for (var _b = 0, insertRanges_1 = insertRanges; _b < insertRanges_1.length; _b++) {\n      var range = insertRanges_1[_b];\n      for (var i = range.start; i < range.end; i++) {\n        this.insertItemInDOM(i, beforeElement);\n      }\n    }\n    this.eventuallyUpdateScrollDimensions();\n    if (this.supportDynamicHeights) {\n      this._rerender(this.scrollTop, this.renderHeight);\n    }\n    return deleted.map(function (i) {\n      return i.element;\n    });\n  };\n  ListView.prototype.eventuallyUpdateScrollDimensions = function () {\n    var _this = this;\n    this._scrollHeight = this.contentHeight;\n    this.rowsContainer.style.height = this._scrollHeight + \"px\";\n    if (!this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable = DOM.scheduleAtNextAnimationFrame(function () {\n        _this.scrollableElement.setScrollDimensions({\n          scrollHeight: _this.scrollHeight\n        });\n        _this.updateScrollWidth();\n        _this.scrollableElementUpdateDisposable = null;\n      });\n    }\n  };\n  ListView.prototype.eventuallyUpdateScrollWidth = function () {\n    var _this = this;\n    if (!this.horizontalScrolling) {\n      return;\n    }\n    this.scrollableElementWidthDelayer.trigger(function () {\n      return _this.updateScrollWidth();\n    });\n  };\n  ListView.prototype.updateScrollWidth = function () {\n    if (!this.horizontalScrolling) {\n      return;\n    }\n    if (this.items.length === 0) {\n      this.scrollableElement.setScrollDimensions({\n        scrollWidth: 0\n      });\n    }\n    var scrollWidth = 0;\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      if (typeof item.width !== 'undefined') {\n        scrollWidth = Math.max(scrollWidth, item.width);\n      }\n    }\n    this.scrollWidth = scrollWidth;\n    this.scrollableElement.setScrollDimensions({\n      scrollWidth: scrollWidth + 10\n    });\n  };\n  ListView.prototype.rerender = function () {\n    if (!this.supportDynamicHeights) {\n      return;\n    }\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item.lastDynamicHeightWidth = undefined;\n    }\n    this._rerender(this.lastRenderTop, this.lastRenderHeight);\n  };\n  Object.defineProperty(ListView.prototype, \"length\", {\n    get: function get() {\n      return this.items.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"renderHeight\", {\n    get: function get() {\n      var scrollDimensions = this.scrollableElement.getScrollDimensions();\n      return scrollDimensions.height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ListView.prototype.element = function (index) {\n    return this.items[index].element;\n  };\n  ListView.prototype.domElement = function (index) {\n    var row = this.items[index].row;\n    return row && row.domNode;\n  };\n  ListView.prototype.elementHeight = function (index) {\n    return this.items[index].size;\n  };\n  ListView.prototype.elementTop = function (index) {\n    return this.rangeMap.positionAt(index);\n  };\n  ListView.prototype.indexAt = function (position) {\n    return this.rangeMap.indexAt(position);\n  };\n  ListView.prototype.indexAfter = function (position) {\n    return this.rangeMap.indexAfter(position);\n  };\n  ListView.prototype.layout = function (height, width) {\n    var scrollDimensions = {\n      height: typeof height === 'number' ? height : DOM.getContentHeight(this.domNode)\n    };\n    if (this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable.dispose();\n      this.scrollableElementUpdateDisposable = null;\n      scrollDimensions.scrollHeight = this.scrollHeight;\n    }\n    this.scrollableElement.setScrollDimensions(scrollDimensions);\n    if (typeof width !== 'undefined') {\n      this.renderWidth = width;\n      if (this.supportDynamicHeights) {\n        this._rerender(this.scrollTop, this.renderHeight);\n      }\n      if (this.horizontalScrolling) {\n        this.scrollableElement.setScrollDimensions({\n          width: typeof width === 'number' ? width : DOM.getContentWidth(this.domNode)\n        });\n      }\n    }\n  };\n  // Render\n  ListView.prototype.render = function (renderTop, renderHeight, renderLeft, scrollWidth) {\n    var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    var renderRange = this.getRenderRange(renderTop, renderHeight);\n    var rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n    var rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n    var beforeElement = this.getNextToLastElement(rangesToInsert);\n    for (var _i = 0, rangesToInsert_1 = rangesToInsert; _i < rangesToInsert_1.length; _i++) {\n      var range = rangesToInsert_1[_i];\n      for (var i = range.start; i < range.end; i++) {\n        this.insertItemInDOM(i, beforeElement);\n      }\n    }\n    for (var _a = 0, rangesToRemove_1 = rangesToRemove; _a < rangesToRemove_1.length; _a++) {\n      var range = rangesToRemove_1[_a];\n      for (var i = range.start; i < range.end; i++) {\n        this.removeItemFromDOM(i);\n      }\n    }\n    this.rowsContainer.style.left = \"-\" + renderLeft + \"px\";\n    this.rowsContainer.style.top = \"-\" + renderTop + \"px\";\n    if (this.horizontalScrolling) {\n      this.rowsContainer.style.width = Math.max(scrollWidth, this.renderWidth) + \"px\";\n    }\n    this.lastRenderTop = renderTop;\n    this.lastRenderHeight = renderHeight;\n  };\n  // DOM operations\n  ListView.prototype.insertItemInDOM = function (index, beforeElement) {\n    var _this = this;\n    var item = this.items[index];\n    if (!item.row) {\n      item.row = this.cache.alloc(item.templateId);\n      var role = this.ariaProvider.getRole ? this.ariaProvider.getRole(item.element) : 'treeitem';\n      item.row.domNode.setAttribute('role', role);\n      var checked = this.ariaProvider.isChecked ? this.ariaProvider.isChecked(item.element) : undefined;\n      if (typeof checked !== 'undefined') {\n        item.row.domNode.setAttribute('aria-checked', String(checked));\n      }\n    }\n    if (!item.row.domNode.parentElement) {\n      if (beforeElement) {\n        this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n      } else {\n        this.rowsContainer.appendChild(item.row.domNode);\n      }\n    }\n    this.updateItemInDOM(item, index);\n    var renderer = this.renderers.get(item.templateId);\n    if (!renderer) {\n      throw new Error(\"No renderer found for template id \" + item.templateId);\n    }\n    if (renderer) {\n      renderer.renderElement(item.element, index, item.row.templateData, item.size);\n    }\n    var uri = this.dnd.getDragURI(item.element);\n    item.dragStartDisposable.dispose();\n    item.row.domNode.draggable = !!uri;\n    if (uri) {\n      var onDragStart = domEvent(item.row.domNode, 'dragstart');\n      item.dragStartDisposable = onDragStart(function (event) {\n        return _this.onDragStart(item.element, uri, event);\n      });\n    }\n    if (this.horizontalScrolling) {\n      this.measureItemWidth(item);\n      this.eventuallyUpdateScrollWidth();\n    }\n  };\n  ListView.prototype.measureItemWidth = function (item) {\n    if (!item.row || !item.row.domNode) {\n      return;\n    }\n    item.row.domNode.style.width = isFirefox ? '-moz-fit-content' : 'fit-content';\n    item.width = DOM.getContentWidth(item.row.domNode);\n    var style = window.getComputedStyle(item.row.domNode);\n    if (style.paddingLeft) {\n      item.width += parseFloat(style.paddingLeft);\n    }\n    if (style.paddingRight) {\n      item.width += parseFloat(style.paddingRight);\n    }\n    item.row.domNode.style.width = '';\n  };\n  ListView.prototype.updateItemInDOM = function (item, index) {\n    item.row.domNode.style.top = this.elementTop(index) + \"px\";\n    item.row.domNode.style.height = item.size + \"px\";\n    if (this.setRowLineHeight) {\n      item.row.domNode.style.lineHeight = item.size + \"px\";\n    }\n    item.row.domNode.setAttribute('data-index', \"\" + index);\n    item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n    item.row.domNode.setAttribute('aria-setsize', String(this.ariaProvider.getSetSize(item.element, index, this.length)));\n    item.row.domNode.setAttribute('aria-posinset', String(this.ariaProvider.getPosInSet(item.element, index)));\n    item.row.domNode.setAttribute('id', this.getElementDomId(index));\n    DOM.toggleClass(item.row.domNode, 'drop-target', item.dropTarget);\n  };\n  ListView.prototype.removeItemFromDOM = function (index) {\n    var item = this.items[index];\n    item.dragStartDisposable.dispose();\n    var renderer = this.renderers.get(item.templateId);\n    if (renderer && renderer.disposeElement) {\n      renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n    }\n    this.cache.release(item.row);\n    item.row = null;\n    if (this.horizontalScrolling) {\n      this.eventuallyUpdateScrollWidth();\n    }\n  };\n  ListView.prototype.getScrollTop = function () {\n    var scrollPosition = this.scrollableElement.getScrollPosition();\n    return scrollPosition.scrollTop;\n  };\n  ListView.prototype.setScrollTop = function (scrollTop) {\n    if (this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable.dispose();\n      this.scrollableElementUpdateDisposable = null;\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: this.scrollHeight\n      });\n    }\n    this.scrollableElement.setScrollPosition({\n      scrollTop: scrollTop\n    });\n  };\n  Object.defineProperty(ListView.prototype, \"scrollTop\", {\n    get: function get() {\n      return this.getScrollTop();\n    },\n    set: function set(scrollTop) {\n      this.setScrollTop(scrollTop);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"scrollHeight\", {\n    get: function get() {\n      return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onMouseClick\", {\n    // Events\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.domNode, 'click'), function (e) {\n        return _this.toMouseEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onMouseDblClick\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.domNode, 'dblclick'), function (e) {\n        return _this.toMouseEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onMouseMiddleClick\", {\n    get: function get() {\n      var _this = this;\n      return Event.filter(Event.map(domEvent(this.domNode, 'auxclick'), function (e) {\n        return _this.toMouseEvent(e);\n      }), function (e) {\n        return e.browserEvent.button === 1;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onMouseDown\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.domNode, 'mousedown'), function (e) {\n        return _this.toMouseEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onContextMenu\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.domNode, 'contextmenu'), function (e) {\n        return _this.toMouseEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onTouchStart\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.domNode, 'touchstart'), function (e) {\n        return _this.toTouchEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ListView.prototype, \"onTap\", {\n    get: function get() {\n      var _this = this;\n      return Event.map(domEvent(this.rowsContainer, TouchEventType.Tap), function (e) {\n        return _this.toGestureEvent(e);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ListView.prototype.toMouseEvent = function (browserEvent) {\n    var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    var item = typeof index === 'undefined' ? undefined : this.items[index];\n    var element = item && item.element;\n    return {\n      browserEvent: browserEvent,\n      index: index,\n      element: element\n    };\n  };\n  ListView.prototype.toTouchEvent = function (browserEvent) {\n    var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    var item = typeof index === 'undefined' ? undefined : this.items[index];\n    var element = item && item.element;\n    return {\n      browserEvent: browserEvent,\n      index: index,\n      element: element\n    };\n  };\n  ListView.prototype.toGestureEvent = function (browserEvent) {\n    var index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n    var item = typeof index === 'undefined' ? undefined : this.items[index];\n    var element = item && item.element;\n    return {\n      browserEvent: browserEvent,\n      index: index,\n      element: element\n    };\n  };\n  ListView.prototype.toDragEvent = function (browserEvent) {\n    var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    var item = typeof index === 'undefined' ? undefined : this.items[index];\n    var element = item && item.element;\n    return {\n      browserEvent: browserEvent,\n      index: index,\n      element: element\n    };\n  };\n  ListView.prototype.onScroll = function (e) {\n    try {\n      this.render(e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n      if (this.supportDynamicHeights) {\n        this._rerender(e.scrollTop, e.height);\n      }\n    } catch (err) {\n      console.error('Got bad scroll event:', e);\n      throw err;\n    }\n  };\n  ListView.prototype.onTouchChange = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.scrollTop -= event.translationY;\n  };\n  // DND\n  ListView.prototype.onDragStart = function (element, uri, event) {\n    if (!event.dataTransfer) {\n      return;\n    }\n    var elements = this.dnd.getDragElements(element);\n    event.dataTransfer.effectAllowed = 'copyMove';\n    event.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([uri]));\n    if (event.dataTransfer.setDragImage) {\n      var label = void 0;\n      if (this.dnd.getDragLabel) {\n        label = this.dnd.getDragLabel(elements, event);\n      }\n      if (typeof label === 'undefined') {\n        label = String(elements.length);\n      }\n      var dragImage_1 = DOM.$('.monaco-drag-image');\n      dragImage_1.textContent = label;\n      document.body.appendChild(dragImage_1);\n      event.dataTransfer.setDragImage(dragImage_1, -10, -10);\n      setTimeout(function () {\n        return document.body.removeChild(dragImage_1);\n      }, 0);\n    }\n    this.currentDragData = new ElementsDragAndDropData(elements);\n    StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n    if (this.dnd.onDragStart) {\n      this.dnd.onDragStart(this.currentDragData, event);\n    }\n  };\n  ListView.prototype.onDragOver = function (event) {\n    var _this = this;\n    event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n    this.onDragLeaveTimeout.dispose();\n    if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n      return false;\n    }\n    this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n    if (!event.browserEvent.dataTransfer) {\n      return false;\n    }\n    // Drag over from outside\n    if (!this.currentDragData) {\n      if (StaticDND.CurrentDragAndDropData) {\n        // Drag over from another list\n        this.currentDragData = StaticDND.CurrentDragAndDropData;\n      } else {\n        // Drag over from the desktop\n        if (!event.browserEvent.dataTransfer.types) {\n          return false;\n        }\n        this.currentDragData = new DesktopDragAndDropData();\n      }\n    }\n    var result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n    this.canDrop = typeof result === 'boolean' ? result : result.accept;\n    if (!this.canDrop) {\n      this.currentDragFeedback = undefined;\n      this.currentDragFeedbackDisposable.dispose();\n      return false;\n    }\n    event.browserEvent.dataTransfer.dropEffect = typeof result !== 'boolean' && result.effect === 0 /* Copy */ ? 'copy' : 'move';\n    var feedback;\n    if (typeof result !== 'boolean' && result.feedback) {\n      feedback = result.feedback;\n    } else {\n      if (typeof event.index === 'undefined') {\n        feedback = [-1];\n      } else {\n        feedback = [event.index];\n      }\n    }\n    // sanitize feedback list\n    feedback = distinct(feedback).filter(function (i) {\n      return i >= -1 && i < _this.length;\n    }).sort(function (a, b) {\n      return a - b;\n    });\n    feedback = feedback[0] === -1 ? [-1] : feedback;\n    if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n      return true;\n    }\n    this.currentDragFeedback = feedback;\n    this.currentDragFeedbackDisposable.dispose();\n    if (feedback[0] === -1) {\n      // entire list feedback\n      DOM.addClass(this.domNode, 'drop-target');\n      DOM.addClass(this.rowsContainer, 'drop-target');\n      this.currentDragFeedbackDisposable = toDisposable(function () {\n        DOM.removeClass(_this.domNode, 'drop-target');\n        DOM.removeClass(_this.rowsContainer, 'drop-target');\n      });\n    } else {\n      for (var _i = 0, feedback_1 = feedback; _i < feedback_1.length; _i++) {\n        var index = feedback_1[_i];\n        var item = this.items[index];\n        item.dropTarget = true;\n        if (item.row && item.row.domNode) {\n          DOM.addClass(item.row.domNode, 'drop-target');\n        }\n      }\n      this.currentDragFeedbackDisposable = toDisposable(function () {\n        for (var _i = 0, feedback_2 = feedback; _i < feedback_2.length; _i++) {\n          var index = feedback_2[_i];\n          var item = _this.items[index];\n          item.dropTarget = false;\n          if (item.row && item.row.domNode) {\n            DOM.removeClass(item.row.domNode, 'drop-target');\n          }\n        }\n      });\n    }\n    return true;\n  };\n  ListView.prototype.onDragLeave = function () {\n    var _this = this;\n    this.onDragLeaveTimeout.dispose();\n    this.onDragLeaveTimeout = disposableTimeout(function () {\n      return _this.clearDragOverFeedback();\n    }, 100);\n  };\n  ListView.prototype.onDrop = function (event) {\n    if (!this.canDrop) {\n      return;\n    }\n    var dragData = this.currentDragData;\n    this.teardownDragAndDropScrollTopAnimation();\n    this.clearDragOverFeedback();\n    this.currentDragData = undefined;\n    StaticDND.CurrentDragAndDropData = undefined;\n    if (!dragData || !event.browserEvent.dataTransfer) {\n      return;\n    }\n    event.browserEvent.preventDefault();\n    dragData.update(event.browserEvent.dataTransfer);\n    this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n  };\n  ListView.prototype.onDragEnd = function (event) {\n    this.canDrop = false;\n    this.teardownDragAndDropScrollTopAnimation();\n    this.clearDragOverFeedback();\n    this.currentDragData = undefined;\n    StaticDND.CurrentDragAndDropData = undefined;\n    if (this.dnd.onDragEnd) {\n      this.dnd.onDragEnd(event);\n    }\n  };\n  ListView.prototype.clearDragOverFeedback = function () {\n    this.currentDragFeedback = undefined;\n    this.currentDragFeedbackDisposable.dispose();\n    this.currentDragFeedbackDisposable = Disposable.None;\n  };\n  // DND scroll top animation\n  ListView.prototype.setupDragAndDropScrollTopAnimation = function (event) {\n    var _this = this;\n    if (!this.dragOverAnimationDisposable) {\n      var viewTop = DOM.getTopLeftOffset(this.domNode).top;\n      this.dragOverAnimationDisposable = DOM.animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n    }\n    this.dragOverAnimationStopDisposable.dispose();\n    this.dragOverAnimationStopDisposable = disposableTimeout(function () {\n      if (_this.dragOverAnimationDisposable) {\n        _this.dragOverAnimationDisposable.dispose();\n        _this.dragOverAnimationDisposable = undefined;\n      }\n    }, 1000);\n    this.dragOverMouseY = event.pageY;\n  };\n  ListView.prototype.animateDragAndDropScrollTop = function (viewTop) {\n    if (this.dragOverMouseY === undefined) {\n      return;\n    }\n    var diff = this.dragOverMouseY - viewTop;\n    var upperLimit = this.renderHeight - 35;\n    if (diff < 35) {\n      this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n    } else if (diff > upperLimit) {\n      this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n    }\n  };\n  ListView.prototype.teardownDragAndDropScrollTopAnimation = function () {\n    this.dragOverAnimationStopDisposable.dispose();\n    if (this.dragOverAnimationDisposable) {\n      this.dragOverAnimationDisposable.dispose();\n      this.dragOverAnimationDisposable = undefined;\n    }\n  };\n  // Util\n  ListView.prototype.getItemIndexFromEventTarget = function (target) {\n    var element = target;\n    while (element instanceof HTMLElement && element !== this.rowsContainer) {\n      var rawIndex = element.getAttribute('data-index');\n      if (rawIndex) {\n        var index = Number(rawIndex);\n        if (!isNaN(index)) {\n          return index;\n        }\n      }\n      element = element.parentElement;\n    }\n    return undefined;\n  };\n  ListView.prototype.getRenderRange = function (renderTop, renderHeight) {\n    return {\n      start: this.rangeMap.indexAt(renderTop),\n      end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n    };\n  };\n  /**\r\n   * Given a stable rendered state, checks every rendered element whether it needs\r\n   * to be probed for dynamic height. Adjusts scroll height and top if necessary.\r\n   */\n  ListView.prototype._rerender = function (renderTop, renderHeight) {\n    var previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n    // Let's remember the second element's position, this helps in scrolling up\n    // and preserving a linear upwards scroll movement\n    var anchorElementIndex;\n    var anchorElementTopDelta;\n    if (renderTop === this.elementTop(previousRenderRange.start)) {\n      anchorElementIndex = previousRenderRange.start;\n      anchorElementTopDelta = 0;\n    } else if (previousRenderRange.end - previousRenderRange.start > 1) {\n      anchorElementIndex = previousRenderRange.start + 1;\n      anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n    }\n    var heightDiff = 0;\n    while (true) {\n      var renderRange = this.getRenderRange(renderTop, renderHeight);\n      var didChange = false;\n      for (var i = renderRange.start; i < renderRange.end; i++) {\n        var diff = this.probeDynamicHeight(i);\n        if (diff !== 0) {\n          this.rangeMap.splice(i, 1, [this.items[i]]);\n        }\n        heightDiff += diff;\n        didChange = didChange || diff !== 0;\n      }\n      if (!didChange) {\n        if (heightDiff !== 0) {\n          this.eventuallyUpdateScrollDimensions();\n        }\n        var unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n        for (var _i = 0, unrenderRanges_1 = unrenderRanges; _i < unrenderRanges_1.length; _i++) {\n          var range = unrenderRanges_1[_i];\n          for (var i = range.start; i < range.end; i++) {\n            if (this.items[i].row) {\n              this.removeItemFromDOM(i);\n            }\n          }\n        }\n        var renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n        for (var _a = 0, renderRanges_1 = renderRanges; _a < renderRanges_1.length; _a++) {\n          var range = renderRanges_1[_a];\n          for (var i = range.start; i < range.end; i++) {\n            var afterIndex = i + 1;\n            var beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n            var beforeElement = beforeRow ? beforeRow.domNode : null;\n            this.insertItemInDOM(i, beforeElement);\n          }\n        }\n        for (var i = renderRange.start; i < renderRange.end; i++) {\n          if (this.items[i].row) {\n            this.updateItemInDOM(this.items[i], i);\n          }\n        }\n        if (typeof anchorElementIndex === 'number') {\n          this.scrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta;\n        }\n        this._onDidChangeContentHeight.fire(this.contentHeight);\n        return;\n      }\n    }\n  };\n  ListView.prototype.probeDynamicHeight = function (index) {\n    var item = this.items[index];\n    if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n      return 0;\n    }\n    var size = item.size;\n    var row = this.cache.alloc(item.templateId);\n    row.domNode.style.height = '';\n    this.rowsContainer.appendChild(row.domNode);\n    var renderer = this.renderers.get(item.templateId);\n    if (renderer) {\n      renderer.renderElement(item.element, index, row.templateData, undefined);\n      if (renderer.disposeElement) {\n        renderer.disposeElement(item.element, index, row.templateData, undefined);\n      }\n    }\n    item.size = row.domNode.offsetHeight;\n    if (this.virtualDelegate.setDynamicHeight) {\n      this.virtualDelegate.setDynamicHeight(item.element, item.size);\n    }\n    item.lastDynamicHeightWidth = this.renderWidth;\n    this.rowsContainer.removeChild(row.domNode);\n    this.cache.release(row);\n    return item.size - size;\n  };\n  ListView.prototype.getNextToLastElement = function (ranges) {\n    var lastRange = ranges[ranges.length - 1];\n    if (!lastRange) {\n      return null;\n    }\n    var nextToLastItem = this.items[lastRange.end];\n    if (!nextToLastItem) {\n      return null;\n    }\n    if (!nextToLastItem.row) {\n      return null;\n    }\n    return nextToLastItem.row.domNode;\n  };\n  ListView.prototype.getElementDomId = function (index) {\n    return this.domId + \"_\" + index;\n  };\n  // Dispose\n  ListView.prototype.dispose = function () {\n    if (this.items) {\n      for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n        var item = _a[_i];\n        if (item.row) {\n          var renderer = this.renderers.get(item.row.templateId);\n          if (renderer) {\n            renderer.disposeTemplate(item.row.templateData);\n          }\n        }\n      }\n      this.items = [];\n    }\n    if (this.domNode && this.domNode.parentNode) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    dispose(this.disposables);\n  };\n  ListView.InstanceCount = 0;\n  __decorate([memoize], ListView.prototype, \"onMouseClick\", null);\n  __decorate([memoize], ListView.prototype, \"onMouseDblClick\", null);\n  __decorate([memoize], ListView.prototype, \"onMouseMiddleClick\", null);\n  __decorate([memoize], ListView.prototype, \"onMouseDown\", null);\n  __decorate([memoize], ListView.prototype, \"onContextMenu\", null);\n  __decorate([memoize], ListView.prototype, \"onTouchStart\", null);\n  __decorate([memoize], ListView.prototype, \"onTap\", null);\n  return ListView;\n}();\nexport { ListView };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__spreadArrays","s","il","Array","k","a","j","jl","getOrDefault","dispose","Disposable","toDisposable","DisposableStore","Gesture","EventType","TouchEventType","DOM","Event","Emitter","domEvent","ScrollableElement","RangeMap","shift","RowCache","memoize","Range","equals","distinct","DataTransfers","StaticDND","disposableTimeout","Delayer","isFirefox","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","supportDynamicHeights","dnd","getDragElements","e","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","ElementsDragAndDropData","elements","prototype","update","getData","ExternalElementsDragAndDropData","DesktopDragAndDropData","types","files","dataTransfer","_a","splice","apply","file","item","size","type","push","equalsDragFeedback","f1","f2","isArray","ListView","container","virtualDelegate","renderers","options","_this","domId","InstanceCount","Map","renderWidth","_scrollHeight","scrollableElementUpdateDisposable","scrollableElementWidthDelayer","splicing","dragOverAnimationStopDisposable","None","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","_onDidChangeContentHeight","Error","items","itemId","rangeMap","_i","renderers_1","renderer","set","templateId","cache","add","lastRenderTop","lastRenderHeight","domNode","document","createElement","className","addClass","tabIndex","toggleClass","mouseSupport","o","additionalScrollHeight","ariaProvider","getSetSize","getPosInSet","_","index","rowsContainer","style","transform","addTarget","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","appendChild","getDomNode","onScroll","Change","onTouchChange","scrollTop","map","toDragEvent","onDrop","onDragLeave","window","onDragEnd","layout","get","enumerable","configurable","start","deleteCount","_splice","fire","contentHeight","previousRenderRange","getRenderRange","deleteRange","end","removeRange","intersect","removeItemFromDOM","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","element","id","String","getTemplateId","getHeight","width","undefined","hasDynamicHeight","lastDynamicHeightWidth","row","uri","dropTarget","dragStartDisposable","deleted","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeRanges_1","range","unrenderedRestRanges","elementsRange","insertRanges","beforeElement","getNextToLastElement","_b","insertRanges_1","insertItemInDOM","eventuallyUpdateScrollDimensions","_rerender","renderHeight","height","scheduleAtNextAnimationFrame","setScrollDimensions","scrollHeight","updateScrollWidth","eventuallyUpdateScrollWidth","trigger","scrollWidth","Math","max","rerender","scrollDimensions","getScrollDimensions","domElement","elementHeight","elementTop","positionAt","indexAt","position","indexAfter","getContentHeight","getContentWidth","render","renderTop","renderLeft","rangesToInsert","rangesToRemove","rangesToInsert_1","rangesToRemove_1","left","top","alloc","role","getRole","setAttribute","checked","isChecked","parentElement","insertBefore","renderElement","templateData","draggable","event","measureItemWidth","getComputedStyle","paddingLeft","parseFloat","paddingRight","lineHeight","getElementDomId","disposeElement","release","getScrollTop","scrollPosition","getScrollPosition","setScrollTop","setScrollPosition","toMouseEvent","filter","browserEvent","button","toTouchEvent","Tap","toGestureEvent","getItemIndexFromEventTarget","initialTarget","scrollLeft","err","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","RESOURCES","JSON","stringify","setDragImage","label","getDragLabel","dragImage_1","$","textContent","body","setTimeout","removeChild","currentDragData","CurrentDragAndDropData","setupDragAndDropScrollTopAnimation","result","accept","currentDragFeedback","dropEffect","effect","feedback","sort","b","removeClass","feedback_1","feedback_2","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","bind","pageY","diff","upperLimit","floor","min","HTMLElement","rawIndex","getAttribute","Number","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","unrenderRanges_1","renderRanges","renderRanges_1","afterIndex","beforeRow","offsetHeight","setDynamicHeight","ranges","lastRange","nextToLastItem","disposeTemplate","parentNode"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { getOrDefault } from '../../../common/objects.js';\r\nimport { dispose, Disposable, toDisposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\r\nimport * as DOM from '../../dom.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { RangeMap, shift } from './rangeMap.js';\r\nimport { RowCache } from './rowCache.js';\r\nimport { memoize } from '../../../common/decorators.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport { equals, distinct } from '../../../common/arrays.js';\r\nimport { DataTransfers, StaticDND } from '../../dnd.js';\r\nimport { disposableTimeout, Delayer } from '../../../common/async.js';\r\nimport { isFirefox } from '../../browser.js';\r\nvar DefaultOptions = {\r\n    useShadows: true,\r\n    verticalScrollMode: 1 /* Auto */,\r\n    setRowLineHeight: true,\r\n    supportDynamicHeights: false,\r\n    dnd: {\r\n        getDragElements: function (e) { return [e]; },\r\n        getDragURI: function () { return null; },\r\n        onDragStart: function () { },\r\n        onDragOver: function () { return false; },\r\n        drop: function () { }\r\n    },\r\n    horizontalScrolling: false\r\n};\r\nvar ElementsDragAndDropData = /** @class */ (function () {\r\n    function ElementsDragAndDropData(elements) {\r\n        this.elements = elements;\r\n    }\r\n    ElementsDragAndDropData.prototype.update = function () { };\r\n    ElementsDragAndDropData.prototype.getData = function () {\r\n        return this.elements;\r\n    };\r\n    return ElementsDragAndDropData;\r\n}());\r\nexport { ElementsDragAndDropData };\r\nvar ExternalElementsDragAndDropData = /** @class */ (function () {\r\n    function ExternalElementsDragAndDropData(elements) {\r\n        this.elements = elements;\r\n    }\r\n    ExternalElementsDragAndDropData.prototype.update = function () { };\r\n    ExternalElementsDragAndDropData.prototype.getData = function () {\r\n        return this.elements;\r\n    };\r\n    return ExternalElementsDragAndDropData;\r\n}());\r\nexport { ExternalElementsDragAndDropData };\r\nvar DesktopDragAndDropData = /** @class */ (function () {\r\n    function DesktopDragAndDropData() {\r\n        this.types = [];\r\n        this.files = [];\r\n    }\r\n    DesktopDragAndDropData.prototype.update = function (dataTransfer) {\r\n        var _a;\r\n        if (dataTransfer.types) {\r\n            (_a = this.types).splice.apply(_a, __spreadArrays([0, this.types.length], dataTransfer.types));\r\n        }\r\n        if (dataTransfer.files) {\r\n            this.files.splice(0, this.files.length);\r\n            for (var i = 0; i < dataTransfer.files.length; i++) {\r\n                var file = dataTransfer.files.item(i);\r\n                if (file && (file.size || file.type)) {\r\n                    this.files.push(file);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    DesktopDragAndDropData.prototype.getData = function () {\r\n        return {\r\n            types: this.types,\r\n            files: this.files\r\n        };\r\n    };\r\n    return DesktopDragAndDropData;\r\n}());\r\nexport { DesktopDragAndDropData };\r\nfunction equalsDragFeedback(f1, f2) {\r\n    if (Array.isArray(f1) && Array.isArray(f2)) {\r\n        return equals(f1, f2);\r\n    }\r\n    return f1 === f2;\r\n}\r\nvar ListView = /** @class */ (function () {\r\n    function ListView(container, virtualDelegate, renderers, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = DefaultOptions; }\r\n        this.virtualDelegate = virtualDelegate;\r\n        this.domId = \"list_id_\" + ++ListView.InstanceCount;\r\n        this.renderers = new Map();\r\n        this.renderWidth = 0;\r\n        this._scrollHeight = 0;\r\n        this.scrollableElementUpdateDisposable = null;\r\n        this.scrollableElementWidthDelayer = new Delayer(50);\r\n        this.splicing = false;\r\n        this.dragOverAnimationStopDisposable = Disposable.None;\r\n        this.dragOverMouseY = 0;\r\n        this.canDrop = false;\r\n        this.currentDragFeedbackDisposable = Disposable.None;\r\n        this.onDragLeaveTimeout = Disposable.None;\r\n        this.disposables = new DisposableStore();\r\n        this._onDidChangeContentHeight = new Emitter();\r\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\r\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\r\n        }\r\n        this.items = [];\r\n        this.itemId = 0;\r\n        this.rangeMap = new RangeMap();\r\n        for (var _i = 0, renderers_1 = renderers; _i < renderers_1.length; _i++) {\r\n            var renderer = renderers_1[_i];\r\n            this.renderers.set(renderer.templateId, renderer);\r\n        }\r\n        this.cache = this.disposables.add(new RowCache(this.renderers));\r\n        this.lastRenderTop = 0;\r\n        this.lastRenderHeight = 0;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.className = 'monaco-list';\r\n        DOM.addClass(this.domNode, this.domId);\r\n        this.domNode.tabIndex = 0;\r\n        DOM.toggleClass(this.domNode, 'mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\r\n        this.horizontalScrolling = getOrDefault(options, function (o) { return o.horizontalScrolling; }, DefaultOptions.horizontalScrolling);\r\n        DOM.toggleClass(this.domNode, 'horizontal-scrolling', this.horizontalScrolling);\r\n        this.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\r\n        this.ariaProvider = options.ariaProvider || { getSetSize: function (e, i, length) { return length; }, getPosInSet: function (_, index) { return index + 1; } };\r\n        this.rowsContainer = document.createElement('div');\r\n        this.rowsContainer.className = 'monaco-list-rows';\r\n        this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\r\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\r\n        this.scrollableElement = this.disposables.add(new ScrollableElement(this.rowsContainer, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: this.horizontalScrolling ? 1 /* Auto */ : 2 /* Hidden */,\r\n            vertical: getOrDefault(options, function (o) { return o.verticalScrollMode; }, DefaultOptions.verticalScrollMode),\r\n            useShadows: getOrDefault(options, function (o) { return o.useShadows; }, DefaultOptions.useShadows)\r\n        }));\r\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\r\n        container.appendChild(this.domNode);\r\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\r\n        domEvent(this.rowsContainer, TouchEventType.Change)(this.onTouchChange, this, this.disposables);\r\n        // Prevent the monaco-scrollable-element from scrolling\r\n        // https://github.com/Microsoft/vscode/issues/44181\r\n        domEvent(this.scrollableElement.getDomNode(), 'scroll')(function (e) { return e.target.scrollTop = 0; }, null, this.disposables);\r\n        Event.map(domEvent(this.domNode, 'dragover'), function (e) { return _this.toDragEvent(e); })(this.onDragOver, this, this.disposables);\r\n        Event.map(domEvent(this.domNode, 'drop'), function (e) { return _this.toDragEvent(e); })(this.onDrop, this, this.disposables);\r\n        domEvent(this.domNode, 'dragleave')(this.onDragLeave, this, this.disposables);\r\n        domEvent(window, 'dragend')(this.onDragEnd, this, this.disposables);\r\n        this.setRowLineHeight = getOrDefault(options, function (o) { return o.setRowLineHeight; }, DefaultOptions.setRowLineHeight);\r\n        this.supportDynamicHeights = getOrDefault(options, function (o) { return o.supportDynamicHeights; }, DefaultOptions.supportDynamicHeights);\r\n        this.dnd = getOrDefault(options, function (o) { return o.dnd; }, DefaultOptions.dnd);\r\n        this.layout();\r\n    }\r\n    Object.defineProperty(ListView.prototype, \"contentHeight\", {\r\n        get: function () { return this.rangeMap.size; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.splice = function (start, deleteCount, elements) {\r\n        if (elements === void 0) { elements = []; }\r\n        if (this.splicing) {\r\n            throw new Error('Can\\'t run recursive splices.');\r\n        }\r\n        this.splicing = true;\r\n        try {\r\n            return this._splice(start, deleteCount, elements);\r\n        }\r\n        finally {\r\n            this.splicing = false;\r\n            this._onDidChangeContentHeight.fire(this.contentHeight);\r\n        }\r\n    };\r\n    ListView.prototype._splice = function (start, deleteCount, elements) {\r\n        var _a;\r\n        var _this = this;\r\n        if (elements === void 0) { elements = []; }\r\n        var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var deleteRange = { start: start, end: start + deleteCount };\r\n        var removeRange = Range.intersect(previousRenderRange, deleteRange);\r\n        for (var i = removeRange.start; i < removeRange.end; i++) {\r\n            this.removeItemFromDOM(i);\r\n        }\r\n        var previousRestRange = { start: start + deleteCount, end: this.items.length };\r\n        var previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\r\n        var previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\r\n        var inserted = elements.map(function (element) { return ({\r\n            id: String(_this.itemId++),\r\n            element: element,\r\n            templateId: _this.virtualDelegate.getTemplateId(element),\r\n            size: _this.virtualDelegate.getHeight(element),\r\n            width: undefined,\r\n            hasDynamicHeight: !!_this.virtualDelegate.hasDynamicHeight && _this.virtualDelegate.hasDynamicHeight(element),\r\n            lastDynamicHeightWidth: undefined,\r\n            row: null,\r\n            uri: undefined,\r\n            dropTarget: false,\r\n            dragStartDisposable: Disposable.None\r\n        }); });\r\n        var deleted;\r\n        // TODO@joao: improve this optimization to catch even more cases\r\n        if (start === 0 && deleteCount >= this.items.length) {\r\n            this.rangeMap = new RangeMap();\r\n            this.rangeMap.splice(0, 0, inserted);\r\n            this.items = inserted;\r\n            deleted = [];\r\n        }\r\n        else {\r\n            this.rangeMap.splice(start, deleteCount, inserted);\r\n            deleted = (_a = this.items).splice.apply(_a, __spreadArrays([start, deleteCount], inserted));\r\n        }\r\n        var delta = elements.length - deleteCount;\r\n        var renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var renderedRestRange = shift(previousRenderedRestRange, delta);\r\n        var updateRange = Range.intersect(renderRange, renderedRestRange);\r\n        for (var i = updateRange.start; i < updateRange.end; i++) {\r\n            this.updateItemInDOM(this.items[i], i);\r\n        }\r\n        var removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\r\n        for (var _i = 0, removeRanges_1 = removeRanges; _i < removeRanges_1.length; _i++) {\r\n            var range = removeRanges_1[_i];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.removeItemFromDOM(i);\r\n            }\r\n        }\r\n        var unrenderedRestRanges = previousUnrenderedRestRanges.map(function (r) { return shift(r, delta); });\r\n        var elementsRange = { start: start, end: start + elements.length };\r\n        var insertRanges = __spreadArrays([elementsRange], unrenderedRestRanges).map(function (r) { return Range.intersect(renderRange, r); });\r\n        var beforeElement = this.getNextToLastElement(insertRanges);\r\n        for (var _b = 0, insertRanges_1 = insertRanges; _b < insertRanges_1.length; _b++) {\r\n            var range = insertRanges_1[_b];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.insertItemInDOM(i, beforeElement);\r\n            }\r\n        }\r\n        this.eventuallyUpdateScrollDimensions();\r\n        if (this.supportDynamicHeights) {\r\n            this._rerender(this.scrollTop, this.renderHeight);\r\n        }\r\n        return deleted.map(function (i) { return i.element; });\r\n    };\r\n    ListView.prototype.eventuallyUpdateScrollDimensions = function () {\r\n        var _this = this;\r\n        this._scrollHeight = this.contentHeight;\r\n        this.rowsContainer.style.height = this._scrollHeight + \"px\";\r\n        if (!this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable = DOM.scheduleAtNextAnimationFrame(function () {\r\n                _this.scrollableElement.setScrollDimensions({ scrollHeight: _this.scrollHeight });\r\n                _this.updateScrollWidth();\r\n                _this.scrollableElementUpdateDisposable = null;\r\n            });\r\n        }\r\n    };\r\n    ListView.prototype.eventuallyUpdateScrollWidth = function () {\r\n        var _this = this;\r\n        if (!this.horizontalScrolling) {\r\n            return;\r\n        }\r\n        this.scrollableElementWidthDelayer.trigger(function () { return _this.updateScrollWidth(); });\r\n    };\r\n    ListView.prototype.updateScrollWidth = function () {\r\n        if (!this.horizontalScrolling) {\r\n            return;\r\n        }\r\n        if (this.items.length === 0) {\r\n            this.scrollableElement.setScrollDimensions({ scrollWidth: 0 });\r\n        }\r\n        var scrollWidth = 0;\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (typeof item.width !== 'undefined') {\r\n                scrollWidth = Math.max(scrollWidth, item.width);\r\n            }\r\n        }\r\n        this.scrollWidth = scrollWidth;\r\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth + 10 });\r\n    };\r\n    ListView.prototype.rerender = function () {\r\n        if (!this.supportDynamicHeights) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.lastDynamicHeightWidth = undefined;\r\n        }\r\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\r\n    };\r\n    Object.defineProperty(ListView.prototype, \"length\", {\r\n        get: function () {\r\n            return this.items.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"renderHeight\", {\r\n        get: function () {\r\n            var scrollDimensions = this.scrollableElement.getScrollDimensions();\r\n            return scrollDimensions.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.element = function (index) {\r\n        return this.items[index].element;\r\n    };\r\n    ListView.prototype.domElement = function (index) {\r\n        var row = this.items[index].row;\r\n        return row && row.domNode;\r\n    };\r\n    ListView.prototype.elementHeight = function (index) {\r\n        return this.items[index].size;\r\n    };\r\n    ListView.prototype.elementTop = function (index) {\r\n        return this.rangeMap.positionAt(index);\r\n    };\r\n    ListView.prototype.indexAt = function (position) {\r\n        return this.rangeMap.indexAt(position);\r\n    };\r\n    ListView.prototype.indexAfter = function (position) {\r\n        return this.rangeMap.indexAfter(position);\r\n    };\r\n    ListView.prototype.layout = function (height, width) {\r\n        var scrollDimensions = {\r\n            height: typeof height === 'number' ? height : DOM.getContentHeight(this.domNode)\r\n        };\r\n        if (this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable.dispose();\r\n            this.scrollableElementUpdateDisposable = null;\r\n            scrollDimensions.scrollHeight = this.scrollHeight;\r\n        }\r\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\r\n        if (typeof width !== 'undefined') {\r\n            this.renderWidth = width;\r\n            if (this.supportDynamicHeights) {\r\n                this._rerender(this.scrollTop, this.renderHeight);\r\n            }\r\n            if (this.horizontalScrolling) {\r\n                this.scrollableElement.setScrollDimensions({\r\n                    width: typeof width === 'number' ? width : DOM.getContentWidth(this.domNode)\r\n                });\r\n            }\r\n        }\r\n    };\r\n    // Render\r\n    ListView.prototype.render = function (renderTop, renderHeight, renderLeft, scrollWidth) {\r\n        var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var renderRange = this.getRenderRange(renderTop, renderHeight);\r\n        var rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\r\n        var rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\r\n        var beforeElement = this.getNextToLastElement(rangesToInsert);\r\n        for (var _i = 0, rangesToInsert_1 = rangesToInsert; _i < rangesToInsert_1.length; _i++) {\r\n            var range = rangesToInsert_1[_i];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.insertItemInDOM(i, beforeElement);\r\n            }\r\n        }\r\n        for (var _a = 0, rangesToRemove_1 = rangesToRemove; _a < rangesToRemove_1.length; _a++) {\r\n            var range = rangesToRemove_1[_a];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.removeItemFromDOM(i);\r\n            }\r\n        }\r\n        this.rowsContainer.style.left = \"-\" + renderLeft + \"px\";\r\n        this.rowsContainer.style.top = \"-\" + renderTop + \"px\";\r\n        if (this.horizontalScrolling) {\r\n            this.rowsContainer.style.width = Math.max(scrollWidth, this.renderWidth) + \"px\";\r\n        }\r\n        this.lastRenderTop = renderTop;\r\n        this.lastRenderHeight = renderHeight;\r\n    };\r\n    // DOM operations\r\n    ListView.prototype.insertItemInDOM = function (index, beforeElement) {\r\n        var _this = this;\r\n        var item = this.items[index];\r\n        if (!item.row) {\r\n            item.row = this.cache.alloc(item.templateId);\r\n            var role = this.ariaProvider.getRole ? this.ariaProvider.getRole(item.element) : 'treeitem';\r\n            item.row.domNode.setAttribute('role', role);\r\n            var checked = this.ariaProvider.isChecked ? this.ariaProvider.isChecked(item.element) : undefined;\r\n            if (typeof checked !== 'undefined') {\r\n                item.row.domNode.setAttribute('aria-checked', String(checked));\r\n            }\r\n        }\r\n        if (!item.row.domNode.parentElement) {\r\n            if (beforeElement) {\r\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\r\n            }\r\n            else {\r\n                this.rowsContainer.appendChild(item.row.domNode);\r\n            }\r\n        }\r\n        this.updateItemInDOM(item, index);\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (!renderer) {\r\n            throw new Error(\"No renderer found for template id \" + item.templateId);\r\n        }\r\n        if (renderer) {\r\n            renderer.renderElement(item.element, index, item.row.templateData, item.size);\r\n        }\r\n        var uri = this.dnd.getDragURI(item.element);\r\n        item.dragStartDisposable.dispose();\r\n        item.row.domNode.draggable = !!uri;\r\n        if (uri) {\r\n            var onDragStart = domEvent(item.row.domNode, 'dragstart');\r\n            item.dragStartDisposable = onDragStart(function (event) { return _this.onDragStart(item.element, uri, event); });\r\n        }\r\n        if (this.horizontalScrolling) {\r\n            this.measureItemWidth(item);\r\n            this.eventuallyUpdateScrollWidth();\r\n        }\r\n    };\r\n    ListView.prototype.measureItemWidth = function (item) {\r\n        if (!item.row || !item.row.domNode) {\r\n            return;\r\n        }\r\n        item.row.domNode.style.width = isFirefox ? '-moz-fit-content' : 'fit-content';\r\n        item.width = DOM.getContentWidth(item.row.domNode);\r\n        var style = window.getComputedStyle(item.row.domNode);\r\n        if (style.paddingLeft) {\r\n            item.width += parseFloat(style.paddingLeft);\r\n        }\r\n        if (style.paddingRight) {\r\n            item.width += parseFloat(style.paddingRight);\r\n        }\r\n        item.row.domNode.style.width = '';\r\n    };\r\n    ListView.prototype.updateItemInDOM = function (item, index) {\r\n        item.row.domNode.style.top = this.elementTop(index) + \"px\";\r\n        item.row.domNode.style.height = item.size + \"px\";\r\n        if (this.setRowLineHeight) {\r\n            item.row.domNode.style.lineHeight = item.size + \"px\";\r\n        }\r\n        item.row.domNode.setAttribute('data-index', \"\" + index);\r\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\r\n        item.row.domNode.setAttribute('aria-setsize', String(this.ariaProvider.getSetSize(item.element, index, this.length)));\r\n        item.row.domNode.setAttribute('aria-posinset', String(this.ariaProvider.getPosInSet(item.element, index)));\r\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\r\n        DOM.toggleClass(item.row.domNode, 'drop-target', item.dropTarget);\r\n    };\r\n    ListView.prototype.removeItemFromDOM = function (index) {\r\n        var item = this.items[index];\r\n        item.dragStartDisposable.dispose();\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (renderer && renderer.disposeElement) {\r\n            renderer.disposeElement(item.element, index, item.row.templateData, item.size);\r\n        }\r\n        this.cache.release(item.row);\r\n        item.row = null;\r\n        if (this.horizontalScrolling) {\r\n            this.eventuallyUpdateScrollWidth();\r\n        }\r\n    };\r\n    ListView.prototype.getScrollTop = function () {\r\n        var scrollPosition = this.scrollableElement.getScrollPosition();\r\n        return scrollPosition.scrollTop;\r\n    };\r\n    ListView.prototype.setScrollTop = function (scrollTop) {\r\n        if (this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable.dispose();\r\n            this.scrollableElementUpdateDisposable = null;\r\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\r\n        }\r\n        this.scrollableElement.setScrollPosition({ scrollTop: scrollTop });\r\n    };\r\n    Object.defineProperty(ListView.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            return this.getScrollTop();\r\n        },\r\n        set: function (scrollTop) {\r\n            this.setScrollTop(scrollTop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"scrollHeight\", {\r\n        get: function () {\r\n            return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseClick\", {\r\n        // Events\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'click'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseDblClick\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'dblclick'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseMiddleClick\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.filter(Event.map(domEvent(this.domNode, 'auxclick'), function (e) { return _this.toMouseEvent(e); }), function (e) { return e.browserEvent.button === 1; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseDown\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'mousedown'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onContextMenu\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'contextmenu'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onTouchStart\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'touchstart'), function (e) { return _this.toTouchEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onTap\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.rowsContainer, TouchEventType.Tap), function (e) { return _this.toGestureEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.toMouseEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toTouchEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toGestureEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toDragEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.onScroll = function (e) {\r\n        try {\r\n            this.render(e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\r\n            if (this.supportDynamicHeights) {\r\n                this._rerender(e.scrollTop, e.height);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.error('Got bad scroll event:', e);\r\n            throw err;\r\n        }\r\n    };\r\n    ListView.prototype.onTouchChange = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.scrollTop -= event.translationY;\r\n    };\r\n    // DND\r\n    ListView.prototype.onDragStart = function (element, uri, event) {\r\n        if (!event.dataTransfer) {\r\n            return;\r\n        }\r\n        var elements = this.dnd.getDragElements(element);\r\n        event.dataTransfer.effectAllowed = 'copyMove';\r\n        event.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([uri]));\r\n        if (event.dataTransfer.setDragImage) {\r\n            var label = void 0;\r\n            if (this.dnd.getDragLabel) {\r\n                label = this.dnd.getDragLabel(elements, event);\r\n            }\r\n            if (typeof label === 'undefined') {\r\n                label = String(elements.length);\r\n            }\r\n            var dragImage_1 = DOM.$('.monaco-drag-image');\r\n            dragImage_1.textContent = label;\r\n            document.body.appendChild(dragImage_1);\r\n            event.dataTransfer.setDragImage(dragImage_1, -10, -10);\r\n            setTimeout(function () { return document.body.removeChild(dragImage_1); }, 0);\r\n        }\r\n        this.currentDragData = new ElementsDragAndDropData(elements);\r\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(this.currentDragData, event);\r\n        }\r\n    };\r\n    ListView.prototype.onDragOver = function (event) {\r\n        var _this = this;\r\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\r\n        this.onDragLeaveTimeout.dispose();\r\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\r\n            return false;\r\n        }\r\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\r\n        if (!event.browserEvent.dataTransfer) {\r\n            return false;\r\n        }\r\n        // Drag over from outside\r\n        if (!this.currentDragData) {\r\n            if (StaticDND.CurrentDragAndDropData) {\r\n                // Drag over from another list\r\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\r\n            }\r\n            else {\r\n                // Drag over from the desktop\r\n                if (!event.browserEvent.dataTransfer.types) {\r\n                    return false;\r\n                }\r\n                this.currentDragData = new DesktopDragAndDropData();\r\n            }\r\n        }\r\n        var result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\r\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\r\n        if (!this.canDrop) {\r\n            this.currentDragFeedback = undefined;\r\n            this.currentDragFeedbackDisposable.dispose();\r\n            return false;\r\n        }\r\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* Copy */) ? 'copy' : 'move';\r\n        var feedback;\r\n        if (typeof result !== 'boolean' && result.feedback) {\r\n            feedback = result.feedback;\r\n        }\r\n        else {\r\n            if (typeof event.index === 'undefined') {\r\n                feedback = [-1];\r\n            }\r\n            else {\r\n                feedback = [event.index];\r\n            }\r\n        }\r\n        // sanitize feedback list\r\n        feedback = distinct(feedback).filter(function (i) { return i >= -1 && i < _this.length; }).sort(function (a, b) { return a - b; });\r\n        feedback = feedback[0] === -1 ? [-1] : feedback;\r\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\r\n            return true;\r\n        }\r\n        this.currentDragFeedback = feedback;\r\n        this.currentDragFeedbackDisposable.dispose();\r\n        if (feedback[0] === -1) { // entire list feedback\r\n            DOM.addClass(this.domNode, 'drop-target');\r\n            DOM.addClass(this.rowsContainer, 'drop-target');\r\n            this.currentDragFeedbackDisposable = toDisposable(function () {\r\n                DOM.removeClass(_this.domNode, 'drop-target');\r\n                DOM.removeClass(_this.rowsContainer, 'drop-target');\r\n            });\r\n        }\r\n        else {\r\n            for (var _i = 0, feedback_1 = feedback; _i < feedback_1.length; _i++) {\r\n                var index = feedback_1[_i];\r\n                var item = this.items[index];\r\n                item.dropTarget = true;\r\n                if (item.row && item.row.domNode) {\r\n                    DOM.addClass(item.row.domNode, 'drop-target');\r\n                }\r\n            }\r\n            this.currentDragFeedbackDisposable = toDisposable(function () {\r\n                for (var _i = 0, feedback_2 = feedback; _i < feedback_2.length; _i++) {\r\n                    var index = feedback_2[_i];\r\n                    var item = _this.items[index];\r\n                    item.dropTarget = false;\r\n                    if (item.row && item.row.domNode) {\r\n                        DOM.removeClass(item.row.domNode, 'drop-target');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return true;\r\n    };\r\n    ListView.prototype.onDragLeave = function () {\r\n        var _this = this;\r\n        this.onDragLeaveTimeout.dispose();\r\n        this.onDragLeaveTimeout = disposableTimeout(function () { return _this.clearDragOverFeedback(); }, 100);\r\n    };\r\n    ListView.prototype.onDrop = function (event) {\r\n        if (!this.canDrop) {\r\n            return;\r\n        }\r\n        var dragData = this.currentDragData;\r\n        this.teardownDragAndDropScrollTopAnimation();\r\n        this.clearDragOverFeedback();\r\n        this.currentDragData = undefined;\r\n        StaticDND.CurrentDragAndDropData = undefined;\r\n        if (!dragData || !event.browserEvent.dataTransfer) {\r\n            return;\r\n        }\r\n        event.browserEvent.preventDefault();\r\n        dragData.update(event.browserEvent.dataTransfer);\r\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\r\n    };\r\n    ListView.prototype.onDragEnd = function (event) {\r\n        this.canDrop = false;\r\n        this.teardownDragAndDropScrollTopAnimation();\r\n        this.clearDragOverFeedback();\r\n        this.currentDragData = undefined;\r\n        StaticDND.CurrentDragAndDropData = undefined;\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(event);\r\n        }\r\n    };\r\n    ListView.prototype.clearDragOverFeedback = function () {\r\n        this.currentDragFeedback = undefined;\r\n        this.currentDragFeedbackDisposable.dispose();\r\n        this.currentDragFeedbackDisposable = Disposable.None;\r\n    };\r\n    // DND scroll top animation\r\n    ListView.prototype.setupDragAndDropScrollTopAnimation = function (event) {\r\n        var _this = this;\r\n        if (!this.dragOverAnimationDisposable) {\r\n            var viewTop = DOM.getTopLeftOffset(this.domNode).top;\r\n            this.dragOverAnimationDisposable = DOM.animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\r\n        }\r\n        this.dragOverAnimationStopDisposable.dispose();\r\n        this.dragOverAnimationStopDisposable = disposableTimeout(function () {\r\n            if (_this.dragOverAnimationDisposable) {\r\n                _this.dragOverAnimationDisposable.dispose();\r\n                _this.dragOverAnimationDisposable = undefined;\r\n            }\r\n        }, 1000);\r\n        this.dragOverMouseY = event.pageY;\r\n    };\r\n    ListView.prototype.animateDragAndDropScrollTop = function (viewTop) {\r\n        if (this.dragOverMouseY === undefined) {\r\n            return;\r\n        }\r\n        var diff = this.dragOverMouseY - viewTop;\r\n        var upperLimit = this.renderHeight - 35;\r\n        if (diff < 35) {\r\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\r\n        }\r\n        else if (diff > upperLimit) {\r\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\r\n        }\r\n    };\r\n    ListView.prototype.teardownDragAndDropScrollTopAnimation = function () {\r\n        this.dragOverAnimationStopDisposable.dispose();\r\n        if (this.dragOverAnimationDisposable) {\r\n            this.dragOverAnimationDisposable.dispose();\r\n            this.dragOverAnimationDisposable = undefined;\r\n        }\r\n    };\r\n    // Util\r\n    ListView.prototype.getItemIndexFromEventTarget = function (target) {\r\n        var element = target;\r\n        while (element instanceof HTMLElement && element !== this.rowsContainer) {\r\n            var rawIndex = element.getAttribute('data-index');\r\n            if (rawIndex) {\r\n                var index = Number(rawIndex);\r\n                if (!isNaN(index)) {\r\n                    return index;\r\n                }\r\n            }\r\n            element = element.parentElement;\r\n        }\r\n        return undefined;\r\n    };\r\n    ListView.prototype.getRenderRange = function (renderTop, renderHeight) {\r\n        return {\r\n            start: this.rangeMap.indexAt(renderTop),\r\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\r\n        };\r\n    };\r\n    /**\r\n     * Given a stable rendered state, checks every rendered element whether it needs\r\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\r\n     */\r\n    ListView.prototype._rerender = function (renderTop, renderHeight) {\r\n        var previousRenderRange = this.getRenderRange(renderTop, renderHeight);\r\n        // Let's remember the second element's position, this helps in scrolling up\r\n        // and preserving a linear upwards scroll movement\r\n        var anchorElementIndex;\r\n        var anchorElementTopDelta;\r\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\r\n            anchorElementIndex = previousRenderRange.start;\r\n            anchorElementTopDelta = 0;\r\n        }\r\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\r\n            anchorElementIndex = previousRenderRange.start + 1;\r\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\r\n        }\r\n        var heightDiff = 0;\r\n        while (true) {\r\n            var renderRange = this.getRenderRange(renderTop, renderHeight);\r\n            var didChange = false;\r\n            for (var i = renderRange.start; i < renderRange.end; i++) {\r\n                var diff = this.probeDynamicHeight(i);\r\n                if (diff !== 0) {\r\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\r\n                }\r\n                heightDiff += diff;\r\n                didChange = didChange || diff !== 0;\r\n            }\r\n            if (!didChange) {\r\n                if (heightDiff !== 0) {\r\n                    this.eventuallyUpdateScrollDimensions();\r\n                }\r\n                var unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\r\n                for (var _i = 0, unrenderRanges_1 = unrenderRanges; _i < unrenderRanges_1.length; _i++) {\r\n                    var range = unrenderRanges_1[_i];\r\n                    for (var i = range.start; i < range.end; i++) {\r\n                        if (this.items[i].row) {\r\n                            this.removeItemFromDOM(i);\r\n                        }\r\n                    }\r\n                }\r\n                var renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\r\n                for (var _a = 0, renderRanges_1 = renderRanges; _a < renderRanges_1.length; _a++) {\r\n                    var range = renderRanges_1[_a];\r\n                    for (var i = range.start; i < range.end; i++) {\r\n                        var afterIndex = i + 1;\r\n                        var beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\r\n                        var beforeElement = beforeRow ? beforeRow.domNode : null;\r\n                        this.insertItemInDOM(i, beforeElement);\r\n                    }\r\n                }\r\n                for (var i = renderRange.start; i < renderRange.end; i++) {\r\n                    if (this.items[i].row) {\r\n                        this.updateItemInDOM(this.items[i], i);\r\n                    }\r\n                }\r\n                if (typeof anchorElementIndex === 'number') {\r\n                    this.scrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta;\r\n                }\r\n                this._onDidChangeContentHeight.fire(this.contentHeight);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    ListView.prototype.probeDynamicHeight = function (index) {\r\n        var item = this.items[index];\r\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\r\n            return 0;\r\n        }\r\n        var size = item.size;\r\n        var row = this.cache.alloc(item.templateId);\r\n        row.domNode.style.height = '';\r\n        this.rowsContainer.appendChild(row.domNode);\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (renderer) {\r\n            renderer.renderElement(item.element, index, row.templateData, undefined);\r\n            if (renderer.disposeElement) {\r\n                renderer.disposeElement(item.element, index, row.templateData, undefined);\r\n            }\r\n        }\r\n        item.size = row.domNode.offsetHeight;\r\n        if (this.virtualDelegate.setDynamicHeight) {\r\n            this.virtualDelegate.setDynamicHeight(item.element, item.size);\r\n        }\r\n        item.lastDynamicHeightWidth = this.renderWidth;\r\n        this.rowsContainer.removeChild(row.domNode);\r\n        this.cache.release(row);\r\n        return item.size - size;\r\n    };\r\n    ListView.prototype.getNextToLastElement = function (ranges) {\r\n        var lastRange = ranges[ranges.length - 1];\r\n        if (!lastRange) {\r\n            return null;\r\n        }\r\n        var nextToLastItem = this.items[lastRange.end];\r\n        if (!nextToLastItem) {\r\n            return null;\r\n        }\r\n        if (!nextToLastItem.row) {\r\n            return null;\r\n        }\r\n        return nextToLastItem.row.domNode;\r\n    };\r\n    ListView.prototype.getElementDomId = function (index) {\r\n        return this.domId + \"_\" + index;\r\n    };\r\n    // Dispose\r\n    ListView.prototype.dispose = function () {\r\n        if (this.items) {\r\n            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (item.row) {\r\n                    var renderer = this.renderers.get(item.row.templateId);\r\n                    if (renderer) {\r\n                        renderer.disposeTemplate(item.row.templateData);\r\n                    }\r\n                }\r\n            }\r\n            this.items = [];\r\n        }\r\n        if (this.domNode && this.domNode.parentNode) {\r\n            this.domNode.parentNode.removeChild(this.domNode);\r\n        }\r\n        dispose(this.disposables);\r\n    };\r\n    ListView.InstanceCount = 0;\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseDblClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseMiddleClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseDown\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onContextMenu\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onTouchStart\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onTap\", null);\r\n    return ListView;\r\n}());\r\nexport { ListView };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}