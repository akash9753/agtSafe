{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.showMissingCaptcha = showMissingCaptcha;\nexports.setCaptchaParams = setCaptchaParams;\nexports.swapCaptcha = swapCaptcha;\nvar _index = require('../core/index');\nvar l = _interopRequireWildcard(_index);\nvar _index2 = require('../field/index');\nvar c = _interopRequireWildcard(_index2);\nvar _i18n = require('../i18n');\nvar i18n = _interopRequireWildcard(_i18n);\nvar _index3 = require('../store/index');\nvar _web_api = require('../core/web_api');\nvar _web_api2 = _interopRequireDefault(_web_api);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\n/**\n * Display the error message of missing captcha in the header of lock.\n *\n * @param {Object} m model\n * @param {Number} id\n */\nfunction showMissingCaptcha(m, id) {\n  var captchaConfig = l.captcha(m);\n  var captchaError = captchaConfig.get('provider') === 'recaptcha_v2' ? 'invalid_recaptcha' : 'invalid_captcha';\n  var errorMessage = i18n.html(m, ['error', 'login', captchaError]);\n  (0, _index3.swap)(_index3.updateEntity, 'lock', id, function (m) {\n    m = l.setSubmitting(m, false, errorMessage);\n    return c.showInvalidField(m, 'captcha');\n  });\n  return m;\n}\n\n/**\n * Set the captcha value in the fields object before sending the request.\n *\n * @param {Object} m model\n * @param {Object} params\n * @param {Object} fields\n *\n * @returns {Boolean} returns true if is required and missing the response from the user\n */\nfunction setCaptchaParams(m, params, fields) {\n  var captchaConfig = l.captcha(m);\n  var isCaptchaRequired = captchaConfig && l.captcha(m).get('required');\n  if (!isCaptchaRequired) {\n    return true;\n  }\n  var captcha = c.getFieldValue(m, 'captcha');\n  //captcha required and missing\n  if (!captcha) {\n    return false;\n  }\n  params['captcha'] = captcha;\n  fields.push('captcha');\n  return true;\n}\n\n/**\n * Get a new challenge and display the new captcha image.\n *\n * @param {number} id The id of the Lock instance.\n * @param {boolean} wasInvalid A boolean indicating if the previous captcha was invalid.\n * @param {Function} [next] A callback.\n */\nfunction swapCaptcha(id, wasInvalid, next) {\n  return _web_api2.default.getChallenge(id, function (err, newCaptcha) {\n    if (!err && newCaptcha) {\n      (0, _index3.swap)(_index3.updateEntity, 'lock', id, l.setCaptcha, newCaptcha, wasInvalid);\n    }\n    if (next) {\n      next();\n    }\n  });\n}","map":{"version":3,"names":["exports","__esModule","showMissingCaptcha","setCaptchaParams","swapCaptcha","_index","require","l","_interopRequireWildcard","_index2","c","_i18n","i18n","_index3","_web_api","_web_api2","_interopRequireDefault","obj","default","newObj","key","Object","prototype","hasOwnProperty","call","m","id","captchaConfig","captcha","captchaError","get","errorMessage","html","swap","updateEntity","setSubmitting","showInvalidField","params","fields","isCaptchaRequired","getFieldValue","push","wasInvalid","next","getChallenge","err","newCaptcha","setCaptcha"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/auth0-lock/lib/connection/captcha.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.showMissingCaptcha = showMissingCaptcha;\nexports.setCaptchaParams = setCaptchaParams;\nexports.swapCaptcha = swapCaptcha;\n\nvar _index = require('../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../field/index');\n\nvar c = _interopRequireWildcard(_index2);\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _index3 = require('../store/index');\n\nvar _web_api = require('../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Display the error message of missing captcha in the header of lock.\n *\n * @param {Object} m model\n * @param {Number} id\n */\nfunction showMissingCaptcha(m, id) {\n  var captchaConfig = l.captcha(m);\n\n  var captchaError = captchaConfig.get('provider') === 'recaptcha_v2' ? 'invalid_recaptcha' : 'invalid_captcha';\n\n  var errorMessage = i18n.html(m, ['error', 'login', captchaError]);\n\n  (0, _index3.swap)(_index3.updateEntity, 'lock', id, function (m) {\n    m = l.setSubmitting(m, false, errorMessage);\n    return c.showInvalidField(m, 'captcha');\n  });\n\n  return m;\n}\n\n/**\n * Set the captcha value in the fields object before sending the request.\n *\n * @param {Object} m model\n * @param {Object} params\n * @param {Object} fields\n *\n * @returns {Boolean} returns true if is required and missing the response from the user\n */\nfunction setCaptchaParams(m, params, fields) {\n  var captchaConfig = l.captcha(m);\n  var isCaptchaRequired = captchaConfig && l.captcha(m).get('required');\n\n  if (!isCaptchaRequired) {\n    return true;\n  }\n  var captcha = c.getFieldValue(m, 'captcha');\n  //captcha required and missing\n  if (!captcha) {\n    return false;\n  }\n\n  params['captcha'] = captcha;\n  fields.push('captcha');\n  return true;\n}\n\n/**\n * Get a new challenge and display the new captcha image.\n *\n * @param {number} id The id of the Lock instance.\n * @param {boolean} wasInvalid A boolean indicating if the previous captcha was invalid.\n * @param {Function} [next] A callback.\n */\nfunction swapCaptcha(id, wasInvalid, next) {\n  return _web_api2.default.getChallenge(id, function (err, newCaptcha) {\n    if (!err && newCaptcha) {\n      (0, _index3.swap)(_index3.updateEntity, 'lock', id, l.setCaptcha, newCaptcha, wasInvalid);\n    }\n    if (next) {\n      next();\n    }\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}