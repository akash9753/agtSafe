{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { Event, PauseableEmitter } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { keys } from '../../../base/common/map.js';\nimport { CommandsRegistry } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService, SET_CONTEXT_COMMAND_ID } from '../common/contextkey.js';\nimport { KeybindingResolver } from '../../keybinding/common/keybindingResolver.js';\nvar KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\nvar Context = /** @class */function () {\n  function Context(id, parent) {\n    this._id = id;\n    this._parent = parent;\n    this._value = Object.create(null);\n    this._value['_contextId'] = id;\n  }\n  Context.prototype.setValue = function (key, value) {\n    // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\n    if (this._value[key] !== value) {\n      this._value[key] = value;\n      return true;\n    }\n    return false;\n  };\n  Context.prototype.removeValue = function (key) {\n    // console.log('REMOVE ' + key + ' FROM ' + this._id);\n    if (key in this._value) {\n      delete this._value[key];\n      return true;\n    }\n    return false;\n  };\n  Context.prototype.getValue = function (key) {\n    var ret = this._value[key];\n    if (typeof ret === 'undefined' && this._parent) {\n      return this._parent.getValue(key);\n    }\n    return ret;\n  };\n  return Context;\n}();\nexport { Context };\nvar NullContext = /** @class */function (_super) {\n  __extends(NullContext, _super);\n  function NullContext() {\n    return _super.call(this, -1, null) || this;\n  }\n  NullContext.prototype.setValue = function (key, value) {\n    return false;\n  };\n  NullContext.prototype.removeValue = function (key) {\n    return false;\n  };\n  NullContext.prototype.getValue = function (key) {\n    return undefined;\n  };\n  NullContext.INSTANCE = new NullContext();\n  return NullContext;\n}(Context);\nvar ConfigAwareContextValuesContainer = /** @class */function (_super) {\n  __extends(ConfigAwareContextValuesContainer, _super);\n  function ConfigAwareContextValuesContainer(id, _configurationService, emitter) {\n    var _this = _super.call(this, id, null) || this;\n    _this._configurationService = _configurationService;\n    _this._values = new Map();\n    _this._listener = _this._configurationService.onDidChangeConfiguration(function (event) {\n      if (event.source === 6 /* DEFAULT */) {\n        // new setting, reset everything\n        var allKeys = keys(_this._values);\n        _this._values.clear();\n        emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\n      } else {\n        var changedKeys = [];\n        for (var _i = 0, _a = event.affectedKeys; _i < _a.length; _i++) {\n          var configKey = _a[_i];\n          var contextKey = \"config.\" + configKey;\n          if (_this._values.has(contextKey)) {\n            _this._values.delete(contextKey);\n            changedKeys.push(contextKey);\n          }\n        }\n        emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\n      }\n    });\n    return _this;\n  }\n  ConfigAwareContextValuesContainer.prototype.dispose = function () {\n    this._listener.dispose();\n  };\n  ConfigAwareContextValuesContainer.prototype.getValue = function (key) {\n    if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\n      return _super.prototype.getValue.call(this, key);\n    }\n    if (this._values.has(key)) {\n      return this._values.get(key);\n    }\n    var configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\n    var configValue = this._configurationService.getValue(configKey);\n    var value = undefined;\n    switch (typeof configValue) {\n      case 'number':\n      case 'boolean':\n      case 'string':\n        value = configValue;\n        break;\n    }\n    this._values.set(key, value);\n    return value;\n  };\n  ConfigAwareContextValuesContainer.prototype.setValue = function (key, value) {\n    return _super.prototype.setValue.call(this, key, value);\n  };\n  ConfigAwareContextValuesContainer.prototype.removeValue = function (key) {\n    return _super.prototype.removeValue.call(this, key);\n  };\n  ConfigAwareContextValuesContainer._keyPrefix = 'config.';\n  return ConfigAwareContextValuesContainer;\n}(Context);\nvar ContextKey = /** @class */function () {\n  function ContextKey(service, key, defaultValue) {\n    this._service = service;\n    this._key = key;\n    this._defaultValue = defaultValue;\n    this.reset();\n  }\n  ContextKey.prototype.set = function (value) {\n    this._service.setContext(this._key, value);\n  };\n  ContextKey.prototype.reset = function () {\n    if (typeof this._defaultValue === 'undefined') {\n      this._service.removeContext(this._key);\n    } else {\n      this._service.setContext(this._key, this._defaultValue);\n    }\n  };\n  ContextKey.prototype.get = function () {\n    return this._service.getContextKeyValue(this._key);\n  };\n  return ContextKey;\n}();\nvar SimpleContextKeyChangeEvent = /** @class */function () {\n  function SimpleContextKeyChangeEvent(key) {\n    this.key = key;\n  }\n  SimpleContextKeyChangeEvent.prototype.affectsSome = function (keys) {\n    return keys.has(this.key);\n  };\n  return SimpleContextKeyChangeEvent;\n}();\nvar ArrayContextKeyChangeEvent = /** @class */function () {\n  function ArrayContextKeyChangeEvent(keys) {\n    this.keys = keys;\n  }\n  ArrayContextKeyChangeEvent.prototype.affectsSome = function (keys) {\n    for (var _i = 0, _a = this.keys; _i < _a.length; _i++) {\n      var key = _a[_i];\n      if (keys.has(key)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  return ArrayContextKeyChangeEvent;\n}();\nvar CompositeContextKeyChangeEvent = /** @class */function () {\n  function CompositeContextKeyChangeEvent(events) {\n    this.events = events;\n  }\n  CompositeContextKeyChangeEvent.prototype.affectsSome = function (keys) {\n    for (var _i = 0, _a = this.events; _i < _a.length; _i++) {\n      var e = _a[_i];\n      if (e.affectsSome(keys)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  return CompositeContextKeyChangeEvent;\n}();\nvar AbstractContextKeyService = /** @class */function () {\n  function AbstractContextKeyService(myContextId) {\n    this._onDidChangeContext = new PauseableEmitter({\n      merge: function merge(input) {\n        return new CompositeContextKeyChangeEvent(input);\n      }\n    });\n    this._isDisposed = false;\n    this._myContextId = myContextId;\n  }\n  AbstractContextKeyService.prototype.createKey = function (key, defaultValue) {\n    if (this._isDisposed) {\n      throw new Error(\"AbstractContextKeyService has been disposed\");\n    }\n    return new ContextKey(this, key, defaultValue);\n  };\n  Object.defineProperty(AbstractContextKeyService.prototype, \"onDidChangeContext\", {\n    get: function get() {\n      return this._onDidChangeContext.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AbstractContextKeyService.prototype.bufferChangeEvents = function (callback) {\n    this._onDidChangeContext.pause();\n    try {\n      callback();\n    } finally {\n      this._onDidChangeContext.resume();\n    }\n  };\n  AbstractContextKeyService.prototype.createScoped = function (domNode) {\n    if (this._isDisposed) {\n      throw new Error(\"AbstractContextKeyService has been disposed\");\n    }\n    return new ScopedContextKeyService(this, domNode);\n  };\n  AbstractContextKeyService.prototype.contextMatchesRules = function (rules) {\n    if (this._isDisposed) {\n      throw new Error(\"AbstractContextKeyService has been disposed\");\n    }\n    var context = this.getContextValuesContainer(this._myContextId);\n    var result = KeybindingResolver.contextMatchesRules(context, rules);\n    // console.group(rules.serialize() + ' -> ' + result);\n    // rules.keys().forEach(key => { console.log(key, ctx[key]); });\n    // console.groupEnd();\n    return result;\n  };\n  AbstractContextKeyService.prototype.getContextKeyValue = function (key) {\n    if (this._isDisposed) {\n      return undefined;\n    }\n    return this.getContextValuesContainer(this._myContextId).getValue(key);\n  };\n  AbstractContextKeyService.prototype.setContext = function (key, value) {\n    if (this._isDisposed) {\n      return;\n    }\n    var myContext = this.getContextValuesContainer(this._myContextId);\n    if (!myContext) {\n      return;\n    }\n    if (myContext.setValue(key, value)) {\n      this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n    }\n  };\n  AbstractContextKeyService.prototype.removeContext = function (key) {\n    if (this._isDisposed) {\n      return;\n    }\n    if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\n      this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n    }\n  };\n  AbstractContextKeyService.prototype.getContext = function (target) {\n    if (this._isDisposed) {\n      return NullContext.INSTANCE;\n    }\n    return this.getContextValuesContainer(findContextAttr(target));\n  };\n  return AbstractContextKeyService;\n}();\nexport { AbstractContextKeyService };\nvar ContextKeyService = /** @class */function (_super) {\n  __extends(ContextKeyService, _super);\n  function ContextKeyService(configurationService) {\n    var _this = _super.call(this, 0) || this;\n    _this._contexts = new Map();\n    _this._toDispose = new DisposableStore();\n    _this._lastContextId = 0;\n    var myContext = new ConfigAwareContextValuesContainer(_this._myContextId, configurationService, _this._onDidChangeContext);\n    _this._contexts.set(_this._myContextId, myContext);\n    _this._toDispose.add(myContext);\n    return _this;\n    // Uncomment this to see the contexts continuously logged\n    // let lastLoggedValue: string | null = null;\n    // setInterval(() => {\n    // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\n    // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\n    // \tif (lastLoggedValue !== logValue) {\n    // \t\tlastLoggedValue = logValue;\n    // \t\tconsole.log(lastLoggedValue);\n    // \t}\n    // }, 2000);\n  }\n\n  ContextKeyService.prototype.dispose = function () {\n    this._isDisposed = true;\n    this._toDispose.dispose();\n  };\n  ContextKeyService.prototype.getContextValuesContainer = function (contextId) {\n    if (this._isDisposed) {\n      return NullContext.INSTANCE;\n    }\n    return this._contexts.get(contextId) || NullContext.INSTANCE;\n  };\n  ContextKeyService.prototype.createChildContext = function (parentContextId) {\n    if (parentContextId === void 0) {\n      parentContextId = this._myContextId;\n    }\n    if (this._isDisposed) {\n      throw new Error(\"ContextKeyService has been disposed\");\n    }\n    var id = ++this._lastContextId;\n    this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\n    return id;\n  };\n  ContextKeyService.prototype.disposeContext = function (contextId) {\n    if (!this._isDisposed) {\n      this._contexts.delete(contextId);\n    }\n  };\n  ContextKeyService = __decorate([__param(0, IConfigurationService)], ContextKeyService);\n  return ContextKeyService;\n}(AbstractContextKeyService);\nexport { ContextKeyService };\nvar ScopedContextKeyService = /** @class */function (_super) {\n  __extends(ScopedContextKeyService, _super);\n  function ScopedContextKeyService(parent, domNode) {\n    var _this = _super.call(this, parent.createChildContext()) || this;\n    _this._parent = parent;\n    if (domNode) {\n      _this._domNode = domNode;\n      _this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(_this._myContextId));\n    }\n    return _this;\n  }\n  ScopedContextKeyService.prototype.dispose = function () {\n    this._isDisposed = true;\n    this._parent.disposeContext(this._myContextId);\n    if (this._domNode) {\n      this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\n      this._domNode = undefined;\n    }\n  };\n  Object.defineProperty(ScopedContextKeyService.prototype, \"onDidChangeContext\", {\n    get: function get() {\n      return Event.any(this._parent.onDidChangeContext, this._onDidChangeContext.event);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ScopedContextKeyService.prototype.getContextValuesContainer = function (contextId) {\n    if (this._isDisposed) {\n      return NullContext.INSTANCE;\n    }\n    return this._parent.getContextValuesContainer(contextId);\n  };\n  ScopedContextKeyService.prototype.createChildContext = function (parentContextId) {\n    if (parentContextId === void 0) {\n      parentContextId = this._myContextId;\n    }\n    if (this._isDisposed) {\n      throw new Error(\"ScopedContextKeyService has been disposed\");\n    }\n    return this._parent.createChildContext(parentContextId);\n  };\n  ScopedContextKeyService.prototype.disposeContext = function (contextId) {\n    if (this._isDisposed) {\n      return;\n    }\n    this._parent.disposeContext(contextId);\n  };\n  return ScopedContextKeyService;\n}(AbstractContextKeyService);\nfunction findContextAttr(domNode) {\n  while (domNode) {\n    if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\n      var attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\n      if (attr) {\n        return parseInt(attr, 10);\n      }\n      return NaN;\n    }\n    domNode = domNode.parentElement;\n  }\n  return 0;\n}\nCommandsRegistry.registerCommand(SET_CONTEXT_COMMAND_ID, function (accessor, contextKey, contextValue) {\n  accessor.get(IContextKeyService).createKey(String(contextKey), contextValue);\n});","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","Event","PauseableEmitter","DisposableStore","keys","CommandsRegistry","IConfigurationService","IContextKeyService","SET_CONTEXT_COMMAND_ID","KeybindingResolver","KEYBINDING_CONTEXT_ATTR","Context","id","parent","_id","_parent","_value","setValue","value","removeValue","getValue","ret","NullContext","_super","call","undefined","INSTANCE","ConfigAwareContextValuesContainer","_configurationService","emitter","_this","_values","Map","_listener","onDidChangeConfiguration","event","source","allKeys","clear","fire","ArrayContextKeyChangeEvent","changedKeys","_i","_a","affectedKeys","configKey","contextKey","has","delete","push","dispose","indexOf","_keyPrefix","get","substr","configValue","set","ContextKey","service","defaultValue","_service","_key","_defaultValue","reset","setContext","removeContext","getContextKeyValue","SimpleContextKeyChangeEvent","affectsSome","CompositeContextKeyChangeEvent","events","e","AbstractContextKeyService","myContextId","_onDidChangeContext","merge","input","_isDisposed","_myContextId","createKey","Error","enumerable","configurable","bufferChangeEvents","callback","pause","resume","createScoped","domNode","ScopedContextKeyService","contextMatchesRules","rules","context","getContextValuesContainer","result","myContext","getContext","findContextAttr","ContextKeyService","configurationService","_contexts","_toDispose","_lastContextId","add","contextId","createChildContext","parentContextId","disposeContext","_domNode","setAttribute","String","removeAttribute","any","onDidChangeContext","hasAttribute","attr","getAttribute","parseInt","NaN","parentElement","registerCommand","accessor","contextValue"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/platform/contextkey/browser/contextKeyService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Event, PauseableEmitter } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { keys } from '../../../base/common/map.js';\r\nimport { CommandsRegistry } from '../../commands/common/commands.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nimport { IContextKeyService, SET_CONTEXT_COMMAND_ID } from '../common/contextkey.js';\r\nimport { KeybindingResolver } from '../../keybinding/common/keybindingResolver.js';\r\nvar KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\r\nvar Context = /** @class */ (function () {\r\n    function Context(id, parent) {\r\n        this._id = id;\r\n        this._parent = parent;\r\n        this._value = Object.create(null);\r\n        this._value['_contextId'] = id;\r\n    }\r\n    Context.prototype.setValue = function (key, value) {\r\n        // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\r\n        if (this._value[key] !== value) {\r\n            this._value[key] = value;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Context.prototype.removeValue = function (key) {\r\n        // console.log('REMOVE ' + key + ' FROM ' + this._id);\r\n        if (key in this._value) {\r\n            delete this._value[key];\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Context.prototype.getValue = function (key) {\r\n        var ret = this._value[key];\r\n        if (typeof ret === 'undefined' && this._parent) {\r\n            return this._parent.getValue(key);\r\n        }\r\n        return ret;\r\n    };\r\n    return Context;\r\n}());\r\nexport { Context };\r\nvar NullContext = /** @class */ (function (_super) {\r\n    __extends(NullContext, _super);\r\n    function NullContext() {\r\n        return _super.call(this, -1, null) || this;\r\n    }\r\n    NullContext.prototype.setValue = function (key, value) {\r\n        return false;\r\n    };\r\n    NullContext.prototype.removeValue = function (key) {\r\n        return false;\r\n    };\r\n    NullContext.prototype.getValue = function (key) {\r\n        return undefined;\r\n    };\r\n    NullContext.INSTANCE = new NullContext();\r\n    return NullContext;\r\n}(Context));\r\nvar ConfigAwareContextValuesContainer = /** @class */ (function (_super) {\r\n    __extends(ConfigAwareContextValuesContainer, _super);\r\n    function ConfigAwareContextValuesContainer(id, _configurationService, emitter) {\r\n        var _this = _super.call(this, id, null) || this;\r\n        _this._configurationService = _configurationService;\r\n        _this._values = new Map();\r\n        _this._listener = _this._configurationService.onDidChangeConfiguration(function (event) {\r\n            if (event.source === 6 /* DEFAULT */) {\r\n                // new setting, reset everything\r\n                var allKeys = keys(_this._values);\r\n                _this._values.clear();\r\n                emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\r\n            }\r\n            else {\r\n                var changedKeys = [];\r\n                for (var _i = 0, _a = event.affectedKeys; _i < _a.length; _i++) {\r\n                    var configKey = _a[_i];\r\n                    var contextKey = \"config.\" + configKey;\r\n                    if (_this._values.has(contextKey)) {\r\n                        _this._values.delete(contextKey);\r\n                        changedKeys.push(contextKey);\r\n                    }\r\n                }\r\n                emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    ConfigAwareContextValuesContainer.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.getValue = function (key) {\r\n        if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\r\n            return _super.prototype.getValue.call(this, key);\r\n        }\r\n        if (this._values.has(key)) {\r\n            return this._values.get(key);\r\n        }\r\n        var configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\r\n        var configValue = this._configurationService.getValue(configKey);\r\n        var value = undefined;\r\n        switch (typeof configValue) {\r\n            case 'number':\r\n            case 'boolean':\r\n            case 'string':\r\n                value = configValue;\r\n                break;\r\n        }\r\n        this._values.set(key, value);\r\n        return value;\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.setValue = function (key, value) {\r\n        return _super.prototype.setValue.call(this, key, value);\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.removeValue = function (key) {\r\n        return _super.prototype.removeValue.call(this, key);\r\n    };\r\n    ConfigAwareContextValuesContainer._keyPrefix = 'config.';\r\n    return ConfigAwareContextValuesContainer;\r\n}(Context));\r\nvar ContextKey = /** @class */ (function () {\r\n    function ContextKey(service, key, defaultValue) {\r\n        this._service = service;\r\n        this._key = key;\r\n        this._defaultValue = defaultValue;\r\n        this.reset();\r\n    }\r\n    ContextKey.prototype.set = function (value) {\r\n        this._service.setContext(this._key, value);\r\n    };\r\n    ContextKey.prototype.reset = function () {\r\n        if (typeof this._defaultValue === 'undefined') {\r\n            this._service.removeContext(this._key);\r\n        }\r\n        else {\r\n            this._service.setContext(this._key, this._defaultValue);\r\n        }\r\n    };\r\n    ContextKey.prototype.get = function () {\r\n        return this._service.getContextKeyValue(this._key);\r\n    };\r\n    return ContextKey;\r\n}());\r\nvar SimpleContextKeyChangeEvent = /** @class */ (function () {\r\n    function SimpleContextKeyChangeEvent(key) {\r\n        this.key = key;\r\n    }\r\n    SimpleContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        return keys.has(this.key);\r\n    };\r\n    return SimpleContextKeyChangeEvent;\r\n}());\r\nvar ArrayContextKeyChangeEvent = /** @class */ (function () {\r\n    function ArrayContextKeyChangeEvent(keys) {\r\n        this.keys = keys;\r\n    }\r\n    ArrayContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        for (var _i = 0, _a = this.keys; _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (keys.has(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return ArrayContextKeyChangeEvent;\r\n}());\r\nvar CompositeContextKeyChangeEvent = /** @class */ (function () {\r\n    function CompositeContextKeyChangeEvent(events) {\r\n        this.events = events;\r\n    }\r\n    CompositeContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        for (var _i = 0, _a = this.events; _i < _a.length; _i++) {\r\n            var e = _a[_i];\r\n            if (e.affectsSome(keys)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return CompositeContextKeyChangeEvent;\r\n}());\r\nvar AbstractContextKeyService = /** @class */ (function () {\r\n    function AbstractContextKeyService(myContextId) {\r\n        this._onDidChangeContext = new PauseableEmitter({ merge: function (input) { return new CompositeContextKeyChangeEvent(input); } });\r\n        this._isDisposed = false;\r\n        this._myContextId = myContextId;\r\n    }\r\n    AbstractContextKeyService.prototype.createKey = function (key, defaultValue) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        return new ContextKey(this, key, defaultValue);\r\n    };\r\n    Object.defineProperty(AbstractContextKeyService.prototype, \"onDidChangeContext\", {\r\n        get: function () {\r\n            return this._onDidChangeContext.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractContextKeyService.prototype.bufferChangeEvents = function (callback) {\r\n        this._onDidChangeContext.pause();\r\n        try {\r\n            callback();\r\n        }\r\n        finally {\r\n            this._onDidChangeContext.resume();\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.createScoped = function (domNode) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        return new ScopedContextKeyService(this, domNode);\r\n    };\r\n    AbstractContextKeyService.prototype.contextMatchesRules = function (rules) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        var context = this.getContextValuesContainer(this._myContextId);\r\n        var result = KeybindingResolver.contextMatchesRules(context, rules);\r\n        // console.group(rules.serialize() + ' -> ' + result);\r\n        // rules.keys().forEach(key => { console.log(key, ctx[key]); });\r\n        // console.groupEnd();\r\n        return result;\r\n    };\r\n    AbstractContextKeyService.prototype.getContextKeyValue = function (key) {\r\n        if (this._isDisposed) {\r\n            return undefined;\r\n        }\r\n        return this.getContextValuesContainer(this._myContextId).getValue(key);\r\n    };\r\n    AbstractContextKeyService.prototype.setContext = function (key, value) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        var myContext = this.getContextValuesContainer(this._myContextId);\r\n        if (!myContext) {\r\n            return;\r\n        }\r\n        if (myContext.setValue(key, value)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.removeContext = function (key) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.getContext = function (target) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this.getContextValuesContainer(findContextAttr(target));\r\n    };\r\n    return AbstractContextKeyService;\r\n}());\r\nexport { AbstractContextKeyService };\r\nvar ContextKeyService = /** @class */ (function (_super) {\r\n    __extends(ContextKeyService, _super);\r\n    function ContextKeyService(configurationService) {\r\n        var _this = _super.call(this, 0) || this;\r\n        _this._contexts = new Map();\r\n        _this._toDispose = new DisposableStore();\r\n        _this._lastContextId = 0;\r\n        var myContext = new ConfigAwareContextValuesContainer(_this._myContextId, configurationService, _this._onDidChangeContext);\r\n        _this._contexts.set(_this._myContextId, myContext);\r\n        _this._toDispose.add(myContext);\r\n        return _this;\r\n        // Uncomment this to see the contexts continuously logged\r\n        // let lastLoggedValue: string | null = null;\r\n        // setInterval(() => {\r\n        // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\r\n        // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\r\n        // \tif (lastLoggedValue !== logValue) {\r\n        // \t\tlastLoggedValue = logValue;\r\n        // \t\tconsole.log(lastLoggedValue);\r\n        // \t}\r\n        // }, 2000);\r\n    }\r\n    ContextKeyService.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        this._toDispose.dispose();\r\n    };\r\n    ContextKeyService.prototype.getContextValuesContainer = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._contexts.get(contextId) || NullContext.INSTANCE;\r\n    };\r\n    ContextKeyService.prototype.createChildContext = function (parentContextId) {\r\n        if (parentContextId === void 0) { parentContextId = this._myContextId; }\r\n        if (this._isDisposed) {\r\n            throw new Error(\"ContextKeyService has been disposed\");\r\n        }\r\n        var id = (++this._lastContextId);\r\n        this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\r\n        return id;\r\n    };\r\n    ContextKeyService.prototype.disposeContext = function (contextId) {\r\n        if (!this._isDisposed) {\r\n            this._contexts.delete(contextId);\r\n        }\r\n    };\r\n    ContextKeyService = __decorate([\r\n        __param(0, IConfigurationService)\r\n    ], ContextKeyService);\r\n    return ContextKeyService;\r\n}(AbstractContextKeyService));\r\nexport { ContextKeyService };\r\nvar ScopedContextKeyService = /** @class */ (function (_super) {\r\n    __extends(ScopedContextKeyService, _super);\r\n    function ScopedContextKeyService(parent, domNode) {\r\n        var _this = _super.call(this, parent.createChildContext()) || this;\r\n        _this._parent = parent;\r\n        if (domNode) {\r\n            _this._domNode = domNode;\r\n            _this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(_this._myContextId));\r\n        }\r\n        return _this;\r\n    }\r\n    ScopedContextKeyService.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        this._parent.disposeContext(this._myContextId);\r\n        if (this._domNode) {\r\n            this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\r\n            this._domNode = undefined;\r\n        }\r\n    };\r\n    Object.defineProperty(ScopedContextKeyService.prototype, \"onDidChangeContext\", {\r\n        get: function () {\r\n            return Event.any(this._parent.onDidChangeContext, this._onDidChangeContext.event);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScopedContextKeyService.prototype.getContextValuesContainer = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._parent.getContextValuesContainer(contextId);\r\n    };\r\n    ScopedContextKeyService.prototype.createChildContext = function (parentContextId) {\r\n        if (parentContextId === void 0) { parentContextId = this._myContextId; }\r\n        if (this._isDisposed) {\r\n            throw new Error(\"ScopedContextKeyService has been disposed\");\r\n        }\r\n        return this._parent.createChildContext(parentContextId);\r\n    };\r\n    ScopedContextKeyService.prototype.disposeContext = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        this._parent.disposeContext(contextId);\r\n    };\r\n    return ScopedContextKeyService;\r\n}(AbstractContextKeyService));\r\nfunction findContextAttr(domNode) {\r\n    while (domNode) {\r\n        if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\r\n            var attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\r\n            if (attr) {\r\n                return parseInt(attr, 10);\r\n            }\r\n            return NaN;\r\n        }\r\n        domNode = domNode.parentElement;\r\n    }\r\n    return 0;\r\n}\r\nCommandsRegistry.registerCommand(SET_CONTEXT_COMMAND_ID, function (accessor, contextKey, contextValue) {\r\n    accessor.get(IContextKeyService).createKey(String(contextKey), contextValue);\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}