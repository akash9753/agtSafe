{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport './menu.css';\nimport * as nls from '../../../../nls.js';\nimport * as strings from '../../../common/strings.js';\nimport { Action } from '../../../common/actions.js';\nimport { ActionBar, Separator, ActionViewItem, BaseActionViewItem } from '../actionbar/actionbar.js';\nimport { addClass, EventType, EventHelper, removeTabIndexAndUpdateFocus, isAncestor, hasClass, addDisposableListener, removeClass, append, $, addClasses, removeClasses } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nexport var MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport var MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n  Direction[Direction[\"Right\"] = 0] = \"Right\";\n  Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nvar SubmenuAction = /** @class */function (_super) {\n  __extends(SubmenuAction, _super);\n  function SubmenuAction(label, entries, cssClass) {\n    var _this = _super.call(this, !!cssClass ? cssClass : 'submenu', label, '', true) || this;\n    _this.entries = entries;\n    return _this;\n  }\n  return SubmenuAction;\n}(Action);\nexport { SubmenuAction };\nvar Menu = /** @class */function (_super) {\n  __extends(Menu, _super);\n  function Menu(container, actions, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = this;\n    addClass(container, 'monaco-menu-container');\n    container.setAttribute('role', 'presentation');\n    var menuElement = document.createElement('div');\n    addClass(menuElement, 'monaco-menu');\n    menuElement.setAttribute('role', 'presentation');\n    _this = _super.call(this, menuElement, {\n      orientation: 2 /* VERTICAL */,\n      actionViewItemProvider: function actionViewItemProvider(action) {\n        return _this.doGetActionViewItem(action, options, parentData);\n      },\n      context: options.context,\n      actionRunner: options.actionRunner,\n      ariaLabel: options.ariaLabel,\n      triggerKeys: {\n        keys: __spreadArrays([3 /* Enter */], isMacintosh ? [10 /* Space */] : []),\n        keyDown: true\n      }\n    }) || this;\n    _this.menuElement = menuElement;\n    _this.actionsList.setAttribute('role', 'menu');\n    _this.actionsList.tabIndex = 0;\n    _this.menuDisposables = _this._register(new DisposableStore());\n    addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n      var event = new StandardKeyboardEvent(e);\n      // Stop tab navigation of menus\n      if (event.equals(2 /* Tab */)) {\n        e.preventDefault();\n      }\n    });\n    if (options.enableMnemonics) {\n      _this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n        var key = e.key.toLocaleLowerCase();\n        if (_this.mnemonics.has(key)) {\n          EventHelper.stop(e, true);\n          var actions_1 = _this.mnemonics.get(key);\n          if (actions_1.length === 1) {\n            if (actions_1[0] instanceof SubmenuMenuActionViewItem && actions_1[0].container) {\n              _this.focusItemByElement(actions_1[0].container);\n            }\n            actions_1[0].onClick(e);\n          }\n          if (actions_1.length > 1) {\n            var action = actions_1.shift();\n            if (action && action.container) {\n              _this.focusItemByElement(action.container);\n              actions_1.push(action);\n            }\n            _this.mnemonics.set(key, actions_1);\n          }\n        }\n      }));\n    }\n    if (isLinux) {\n      _this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n        var event = new StandardKeyboardEvent(e);\n        if (event.equals(14 /* Home */) || event.equals(11 /* PageUp */)) {\n          _this.focusedItem = _this.viewItems.length - 1;\n          _this.focusNext();\n          EventHelper.stop(e, true);\n        } else if (event.equals(13 /* End */) || event.equals(12 /* PageDown */)) {\n          _this.focusedItem = 0;\n          _this.focusPrevious();\n          EventHelper.stop(e, true);\n        }\n      }));\n    }\n    _this._register(addDisposableListener(_this.domNode, EventType.MOUSE_OUT, function (e) {\n      var relatedTarget = e.relatedTarget;\n      if (!isAncestor(relatedTarget, _this.domNode)) {\n        _this.focusedItem = undefined;\n        _this.updateFocus();\n        e.stopPropagation();\n      }\n    }));\n    _this._register(addDisposableListener(_this.actionsList, EventType.MOUSE_OVER, function (e) {\n      var target = e.target;\n      if (!target || !isAncestor(target, _this.actionsList) || target === _this.actionsList) {\n        return;\n      }\n      while (target.parentElement !== _this.actionsList && target.parentElement !== null) {\n        target = target.parentElement;\n      }\n      if (hasClass(target, 'action-item')) {\n        var lastFocusedItem = _this.focusedItem;\n        _this.setFocusedItem(target);\n        if (lastFocusedItem !== _this.focusedItem) {\n          _this.updateFocus();\n        }\n      }\n    }));\n    var parentData = {\n      parent: _this\n    };\n    _this.mnemonics = new Map();\n    // Scroll Logic\n    _this.scrollableElement = _this._register(new DomScrollableElement(menuElement, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: 2 /* Hidden */,\n      vertical: 3 /* Visible */,\n      verticalScrollbarSize: 7,\n      handleMouseWheel: true,\n      useShadows: true\n    }));\n    var scrollElement = _this.scrollableElement.getDomNode();\n    scrollElement.style.position = '';\n    _this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, function (e) {\n      // Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575\n      // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n      e.preventDefault();\n    }));\n    menuElement.style.maxHeight = Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 30) + \"px\";\n    _this.push(actions, {\n      icon: true,\n      label: true,\n      isMenu: true\n    });\n    container.appendChild(_this.scrollableElement.getDomNode());\n    _this.scrollableElement.scanDomNode();\n    _this.viewItems.filter(function (item) {\n      return !(item instanceof MenuSeparatorActionViewItem);\n    }).forEach(function (item, index, array) {\n      item.updatePositionInSet(index + 1, array.length);\n    });\n    return _this;\n  }\n  Menu.prototype.style = function (style) {\n    var container = this.getContainer();\n    var fgColor = style.foregroundColor ? \"\" + style.foregroundColor : '';\n    var bgColor = style.backgroundColor ? \"\" + style.backgroundColor : '';\n    var border = style.borderColor ? \"1px solid \" + style.borderColor : '';\n    var shadow = style.shadowColor ? \"0 2px 4px \" + style.shadowColor : '';\n    container.style.border = border;\n    this.domNode.style.color = fgColor;\n    this.domNode.style.backgroundColor = bgColor;\n    container.style.boxShadow = shadow;\n    if (this.viewItems) {\n      this.viewItems.forEach(function (item) {\n        if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\n          item.style(style);\n        }\n      });\n    }\n  };\n  Menu.prototype.getContainer = function () {\n    return this.scrollableElement.getDomNode();\n  };\n  Object.defineProperty(Menu.prototype, \"onScroll\", {\n    get: function get() {\n      return this.scrollableElement.onScroll;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Menu.prototype, \"scrollOffset\", {\n    get: function get() {\n      return this.menuElement.scrollTop;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Menu.prototype.focusItemByElement = function (element) {\n    var lastFocusedItem = this.focusedItem;\n    this.setFocusedItem(element);\n    if (lastFocusedItem !== this.focusedItem) {\n      this.updateFocus();\n    }\n  };\n  Menu.prototype.setFocusedItem = function (element) {\n    for (var i = 0; i < this.actionsList.children.length; i++) {\n      var elem = this.actionsList.children[i];\n      if (element === elem) {\n        this.focusedItem = i;\n        break;\n      }\n    }\n  };\n  Menu.prototype.updateFocus = function (fromRight) {\n    _super.prototype.updateFocus.call(this, fromRight, true);\n    if (typeof this.focusedItem !== 'undefined') {\n      // Workaround for #80047 caused by an issue in chromium\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n      // When that's fixed, just call this.scrollableElement.scanDomNode()\n      this.scrollableElement.setScrollPosition({\n        scrollTop: Math.round(this.menuElement.scrollTop)\n      });\n    }\n  };\n  Menu.prototype.doGetActionViewItem = function (action, options, parentData) {\n    if (action instanceof Separator) {\n      return new MenuSeparatorActionViewItem(options.context, action, {\n        icon: true\n      });\n    } else if (action instanceof SubmenuAction) {\n      var menuActionViewItem = new SubmenuMenuActionViewItem(action, action.entries, parentData, options);\n      if (options.enableMnemonics) {\n        var mnemonic = menuActionViewItem.getMnemonic();\n        if (mnemonic && menuActionViewItem.isEnabled()) {\n          var actionViewItems = [];\n          if (this.mnemonics.has(mnemonic)) {\n            actionViewItems = this.mnemonics.get(mnemonic);\n          }\n          actionViewItems.push(menuActionViewItem);\n          this.mnemonics.set(mnemonic, actionViewItems);\n        }\n      }\n      return menuActionViewItem;\n    } else {\n      var menuItemOptions = {\n        enableMnemonics: options.enableMnemonics\n      };\n      if (options.getKeyBinding) {\n        var keybinding = options.getKeyBinding(action);\n        if (keybinding) {\n          var keybindingLabel = keybinding.getLabel();\n          if (keybindingLabel) {\n            menuItemOptions.keybinding = keybindingLabel;\n          }\n        }\n      }\n      var menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\n      if (options.enableMnemonics) {\n        var mnemonic = menuActionViewItem.getMnemonic();\n        if (mnemonic && menuActionViewItem.isEnabled()) {\n          var actionViewItems = [];\n          if (this.mnemonics.has(mnemonic)) {\n            actionViewItems = this.mnemonics.get(mnemonic);\n          }\n          actionViewItems.push(menuActionViewItem);\n          this.mnemonics.set(mnemonic, actionViewItems);\n        }\n      }\n      return menuActionViewItem;\n    }\n  };\n  return Menu;\n}(ActionBar);\nexport { Menu };\nvar BaseMenuActionViewItem = /** @class */function (_super) {\n  __extends(BaseMenuActionViewItem, _super);\n  function BaseMenuActionViewItem(ctx, action, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = this;\n    options.isMenu = true;\n    _this = _super.call(this, action, action, options) || this;\n    _this.options = options;\n    _this.options.icon = options.icon !== undefined ? options.icon : false;\n    _this.options.label = options.label !== undefined ? options.label : true;\n    _this.cssClass = '';\n    // Set mnemonic\n    if (_this.options.label && options.enableMnemonics) {\n      var label = _this.getAction().label;\n      if (label) {\n        var matches = MENU_MNEMONIC_REGEX.exec(label);\n        if (matches) {\n          _this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n        }\n      }\n    }\n    // Add mouse up listener later to avoid accidental clicks\n    _this.runOnceToEnableMouseUp = new RunOnceScheduler(function () {\n      if (!_this.element) {\n        return;\n      }\n      _this._register(addDisposableListener(_this.element, EventType.MOUSE_UP, function (e) {\n        if (e.defaultPrevented) {\n          return;\n        }\n        EventHelper.stop(e, true);\n        _this.onClick(e);\n      }));\n    }, 100);\n    _this._register(_this.runOnceToEnableMouseUp);\n    return _this;\n  }\n  BaseMenuActionViewItem.prototype.render = function (container) {\n    _super.prototype.render.call(this, container);\n    if (!this.element) {\n      return;\n    }\n    this.container = container;\n    this.item = append(this.element, $('a.action-menu-item'));\n    if (this._action.id === Separator.ID) {\n      // A separator is a presentation item\n      this.item.setAttribute('role', 'presentation');\n    } else {\n      this.item.setAttribute('role', 'menuitem');\n      if (this.mnemonic) {\n        this.item.setAttribute('aria-keyshortcuts', \"\" + this.mnemonic);\n      }\n    }\n    this.check = append(this.item, $('span.menu-item-check.codicon.codicon-check'));\n    this.check.setAttribute('role', 'none');\n    this.label = append(this.item, $('span.action-label'));\n    if (this.options.label && this.options.keybinding) {\n      append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n    }\n    // Adds mouse up listener to actually run the action\n    this.runOnceToEnableMouseUp.schedule();\n    this.updateClass();\n    this.updateLabel();\n    this.updateTooltip();\n    this.updateEnabled();\n    this.updateChecked();\n  };\n  BaseMenuActionViewItem.prototype.blur = function () {\n    _super.prototype.blur.call(this);\n    this.applyStyle();\n  };\n  BaseMenuActionViewItem.prototype.focus = function () {\n    _super.prototype.focus.call(this);\n    if (this.item) {\n      this.item.focus();\n    }\n    this.applyStyle();\n  };\n  BaseMenuActionViewItem.prototype.updatePositionInSet = function (pos, setSize) {\n    if (this.item) {\n      this.item.setAttribute('aria-posinset', \"\" + pos);\n      this.item.setAttribute('aria-setsize', \"\" + setSize);\n    }\n  };\n  BaseMenuActionViewItem.prototype.updateLabel = function () {\n    if (this.options.label) {\n      var label = this.getAction().label;\n      if (label) {\n        var cleanLabel = cleanMnemonic(label);\n        if (!this.options.enableMnemonics) {\n          label = cleanLabel;\n        }\n        if (this.label) {\n          this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n        }\n        var matches = MENU_MNEMONIC_REGEX.exec(label);\n        if (matches) {\n          label = strings.escape(label);\n          // This is global, reset it\n          MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n          var escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n          // We can't use negative lookbehind so if we match our negative and skip\n          while (escMatch && escMatch[1]) {\n            escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n          }\n          if (escMatch) {\n            label = label.substr(0, escMatch.index) + \"<u aria-hidden=\\\"true\\\">\" + escMatch[3] + \"</u>\" + label.substr(escMatch.index + escMatch[0].length);\n          }\n          label = label.replace(/&amp;&amp;/g, '&amp;');\n          if (this.item) {\n            this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n          }\n        } else {\n          label = label.replace(/&&/g, '&');\n        }\n      }\n      if (this.label) {\n        this.label.innerHTML = label.trim();\n      }\n    }\n  };\n  BaseMenuActionViewItem.prototype.updateTooltip = function () {\n    var title = null;\n    if (this.getAction().tooltip) {\n      title = this.getAction().tooltip;\n    } else if (!this.options.label && this.getAction().label && this.options.icon) {\n      title = this.getAction().label;\n      if (this.options.keybinding) {\n        title = nls.localize({\n          key: 'titleLabel',\n          comment: ['action title', 'action keybinding']\n        }, \"{0} ({1})\", title, this.options.keybinding);\n      }\n    }\n    if (title && this.item) {\n      this.item.title = title;\n    }\n  };\n  BaseMenuActionViewItem.prototype.updateClass = function () {\n    if (this.cssClass && this.item) {\n      removeClasses(this.item, this.cssClass);\n    }\n    if (this.options.icon && this.label) {\n      this.cssClass = this.getAction().class || '';\n      addClass(this.label, 'icon');\n      if (this.cssClass) {\n        addClasses(this.label, this.cssClass);\n      }\n      this.updateEnabled();\n    } else if (this.label) {\n      removeClass(this.label, 'icon');\n    }\n  };\n  BaseMenuActionViewItem.prototype.updateEnabled = function () {\n    if (this.getAction().enabled) {\n      if (this.element) {\n        removeClass(this.element, 'disabled');\n      }\n      if (this.item) {\n        removeClass(this.item, 'disabled');\n        this.item.tabIndex = 0;\n      }\n    } else {\n      if (this.element) {\n        addClass(this.element, 'disabled');\n      }\n      if (this.item) {\n        addClass(this.item, 'disabled');\n        removeTabIndexAndUpdateFocus(this.item);\n      }\n    }\n  };\n  BaseMenuActionViewItem.prototype.updateChecked = function () {\n    if (!this.item) {\n      return;\n    }\n    if (this.getAction().checked) {\n      addClass(this.item, 'checked');\n      this.item.setAttribute('role', 'menuitemcheckbox');\n      this.item.setAttribute('aria-checked', 'true');\n    } else {\n      removeClass(this.item, 'checked');\n      this.item.setAttribute('role', 'menuitem');\n      this.item.setAttribute('aria-checked', 'false');\n    }\n  };\n  BaseMenuActionViewItem.prototype.getMnemonic = function () {\n    return this.mnemonic;\n  };\n  BaseMenuActionViewItem.prototype.applyStyle = function () {\n    if (!this.menuStyle) {\n      return;\n    }\n    var isSelected = this.element && hasClass(this.element, 'focused');\n    var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n    var bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n    var border = isSelected && this.menuStyle.selectionBorderColor ? \"thin solid \" + this.menuStyle.selectionBorderColor : '';\n    if (this.item) {\n      this.item.style.color = fgColor ? fgColor.toString() : '';\n      this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\n    }\n    if (this.check) {\n      this.check.style.color = fgColor ? fgColor.toString() : '';\n    }\n    if (this.container) {\n      this.container.style.border = border;\n    }\n  };\n  BaseMenuActionViewItem.prototype.style = function (style) {\n    this.menuStyle = style;\n    this.applyStyle();\n  };\n  return BaseMenuActionViewItem;\n}(BaseActionViewItem);\nvar SubmenuMenuActionViewItem = /** @class */function (_super) {\n  __extends(SubmenuMenuActionViewItem, _super);\n  function SubmenuMenuActionViewItem(action, submenuActions, parentData, submenuOptions) {\n    var _this = _super.call(this, action, action, submenuOptions) || this;\n    _this.submenuActions = submenuActions;\n    _this.parentData = parentData;\n    _this.submenuOptions = submenuOptions;\n    _this.mysubmenu = null;\n    _this.submenuDisposables = _this._register(new DisposableStore());\n    _this.mouseOver = false;\n    _this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n    _this.showScheduler = new RunOnceScheduler(function () {\n      if (_this.mouseOver) {\n        _this.cleanupExistingSubmenu(false);\n        _this.createSubmenu(false);\n      }\n    }, 250);\n    _this.hideScheduler = new RunOnceScheduler(function () {\n      if (_this.element && !isAncestor(document.activeElement, _this.element) && _this.parentData.submenu === _this.mysubmenu) {\n        _this.parentData.parent.focus(false);\n        _this.cleanupExistingSubmenu(true);\n      }\n    }, 750);\n    return _this;\n  }\n  SubmenuMenuActionViewItem.prototype.render = function (container) {\n    var _this = this;\n    _super.prototype.render.call(this, container);\n    if (!this.element) {\n      return;\n    }\n    if (this.item) {\n      addClass(this.item, 'monaco-submenu-item');\n      this.item.setAttribute('aria-haspopup', 'true');\n      this.updateAriaExpanded('false');\n      this.submenuIndicator = append(this.item, $('span.submenu-indicator.codicon.codicon-chevron-right'));\n      this.submenuIndicator.setAttribute('aria-hidden', 'true');\n    }\n    this._register(addDisposableListener(this.element, EventType.KEY_UP, function (e) {\n      var event = new StandardKeyboardEvent(e);\n      if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\n        EventHelper.stop(e, true);\n        _this.createSubmenu(true);\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.KEY_DOWN, function (e) {\n      var event = new StandardKeyboardEvent(e);\n      if (document.activeElement === _this.item) {\n        if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\n          EventHelper.stop(e, true);\n        }\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, function (e) {\n      if (!_this.mouseOver) {\n        _this.mouseOver = true;\n        _this.showScheduler.schedule();\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, function (e) {\n      _this.mouseOver = false;\n    }));\n    this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, function (e) {\n      if (_this.element && !isAncestor(document.activeElement, _this.element)) {\n        _this.hideScheduler.schedule();\n      }\n    }));\n    this._register(this.parentData.parent.onScroll(function () {\n      _this.parentData.parent.focus(false);\n      _this.cleanupExistingSubmenu(false);\n    }));\n  };\n  SubmenuMenuActionViewItem.prototype.onClick = function (e) {\n    // stop clicking from trying to run an action\n    EventHelper.stop(e, true);\n    this.cleanupExistingSubmenu(false);\n    this.createSubmenu(true);\n  };\n  SubmenuMenuActionViewItem.prototype.cleanupExistingSubmenu = function (force) {\n    if (this.parentData.submenu && (force || this.parentData.submenu !== this.mysubmenu)) {\n      this.parentData.submenu.dispose();\n      this.parentData.submenu = undefined;\n      this.updateAriaExpanded('false');\n      if (this.submenuContainer) {\n        this.submenuDisposables.clear();\n        this.submenuContainer = undefined;\n      }\n    }\n  };\n  SubmenuMenuActionViewItem.prototype.createSubmenu = function (selectFirstItem) {\n    var _this = this;\n    if (selectFirstItem === void 0) {\n      selectFirstItem = true;\n    }\n    if (!this.element) {\n      return;\n    }\n    if (!this.parentData.submenu) {\n      this.updateAriaExpanded('true');\n      this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n      addClasses(this.submenuContainer, 'menubar-menu-items-holder', 'context-view');\n      // Set the top value of the menu container before construction\n      // This allows the menu constructor to calculate the proper max height\n      var computedStyles = getComputedStyle(this.parentData.parent.domNode);\n      var paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n      this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\n      this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions, this.submenuOptions);\n      if (this.menuStyle) {\n        this.parentData.submenu.style(this.menuStyle);\n      }\n      var boundingRect = this.element.getBoundingClientRect();\n      var childBoundingRect = this.submenuContainer.getBoundingClientRect();\n      if (this.expandDirection === Direction.Right) {\n        if (window.innerWidth <= boundingRect.right + childBoundingRect.width) {\n          this.submenuContainer.style.left = '10px';\n          this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset + boundingRect.height + \"px\";\n        } else {\n          this.submenuContainer.style.left = this.element.offsetWidth + \"px\";\n          this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\n        }\n      } else if (this.expandDirection === Direction.Left) {\n        this.submenuContainer.style.right = this.element.offsetWidth + \"px\";\n        this.submenuContainer.style.left = 'auto';\n        this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\n      }\n      this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, function (e) {\n        var event = new StandardKeyboardEvent(e);\n        if (event.equals(15 /* LeftArrow */)) {\n          EventHelper.stop(e, true);\n          _this.parentData.parent.focus();\n          _this.cleanupExistingSubmenu(true);\n        }\n      }));\n      this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, function (e) {\n        var event = new StandardKeyboardEvent(e);\n        if (event.equals(15 /* LeftArrow */)) {\n          EventHelper.stop(e, true);\n        }\n      }));\n      this.submenuDisposables.add(this.parentData.submenu.onDidCancel(function () {\n        _this.parentData.parent.focus();\n        _this.cleanupExistingSubmenu(true);\n      }));\n      this.parentData.submenu.focus(selectFirstItem);\n      this.mysubmenu = this.parentData.submenu;\n    } else {\n      this.parentData.submenu.focus(false);\n    }\n  };\n  SubmenuMenuActionViewItem.prototype.updateAriaExpanded = function (value) {\n    var _a;\n    if (this.item) {\n      (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n    }\n  };\n  SubmenuMenuActionViewItem.prototype.applyStyle = function () {\n    _super.prototype.applyStyle.call(this);\n    if (!this.menuStyle) {\n      return;\n    }\n    var isSelected = this.element && hasClass(this.element, 'focused');\n    var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n    if (this.submenuIndicator) {\n      this.submenuIndicator.style.color = fgColor ? \"\" + fgColor : '';\n    }\n    if (this.parentData.submenu) {\n      this.parentData.submenu.style(this.menuStyle);\n    }\n  };\n  SubmenuMenuActionViewItem.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n    this.hideScheduler.dispose();\n    if (this.mysubmenu) {\n      this.mysubmenu.dispose();\n      this.mysubmenu = null;\n    }\n    if (this.submenuContainer) {\n      this.submenuContainer = undefined;\n    }\n  };\n  return SubmenuMenuActionViewItem;\n}(BaseMenuActionViewItem);\nvar MenuSeparatorActionViewItem = /** @class */function (_super) {\n  __extends(MenuSeparatorActionViewItem, _super);\n  function MenuSeparatorActionViewItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MenuSeparatorActionViewItem.prototype.style = function (style) {\n    if (this.label) {\n      this.label.style.borderBottomColor = style.separatorColor ? \"\" + style.separatorColor : '';\n    }\n  };\n  return MenuSeparatorActionViewItem;\n}(ActionViewItem);\nexport function cleanMnemonic(label) {\n  var regex = MENU_MNEMONIC_REGEX;\n  var matches = regex.exec(label);\n  if (!matches) {\n    return label;\n  }\n  var mnemonicInText = !matches[1];\n  return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","nls","strings","Action","ActionBar","Separator","ActionViewItem","BaseActionViewItem","addClass","EventType","EventHelper","removeTabIndexAndUpdateFocus","isAncestor","hasClass","addDisposableListener","removeClass","append","$","addClasses","removeClasses","StandardKeyboardEvent","RunOnceScheduler","DisposableStore","DomScrollableElement","isLinux","isMacintosh","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","Direction","SubmenuAction","_super","label","entries","cssClass","_this","call","Menu","container","actions","options","setAttribute","menuElement","document","createElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaLabel","triggerKeys","keys","keyDown","actionsList","tabIndex","menuDisposables","_register","KEY_DOWN","e","event","equals","preventDefault","enableMnemonics","add","key","toLocaleLowerCase","mnemonics","has","stop","actions_1","get","SubmenuMenuActionViewItem","focusItemByElement","onClick","shift","push","set","focusedItem","viewItems","focusNext","focusPrevious","domNode","MOUSE_OUT","relatedTarget","undefined","updateFocus","stopPropagation","MOUSE_OVER","target","parentElement","lastFocusedItem","setFocusedItem","parent","Map","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","verticalScrollbarSize","handleMouseWheel","useShadows","scrollElement","getDomNode","style","position","MOUSE_UP","maxHeight","Math","max","window","innerHeight","getBoundingClientRect","top","icon","isMenu","appendChild","scanDomNode","filter","item","MenuSeparatorActionViewItem","forEach","index","array","updatePositionInSet","getContainer","fgColor","foregroundColor","bgColor","backgroundColor","border","borderColor","shadow","shadowColor","color","boxShadow","BaseMenuActionViewItem","defineProperty","onScroll","enumerable","configurable","scrollTop","element","children","elem","fromRight","setScrollPosition","round","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","getKeyBinding","keybinding","keybindingLabel","getLabel","ctx","getAction","matches","exec","runOnceToEnableMouseUp","defaultPrevented","render","_action","id","ID","check","textContent","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","blur","applyStyle","focus","pos","setSize","cleanLabel","cleanMnemonic","replace","escape","lastIndex","escMatch","substr","innerHTML","trim","title","tooltip","localize","comment","class","enabled","checked","menuStyle","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","toString","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","activeElement","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","dispose","submenuContainer","clear","selectFirstItem","computedStyles","getComputedStyle","paddingTop","parseFloat","offsetTop","scrollOffset","boundingRect","childBoundingRect","innerWidth","right","width","left","height","offsetWidth","Left","onDidCancel","value","_a","apply","borderBottomColor","separatorColor","regex","mnemonicInText"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './menu.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as strings from '../../../common/strings.js';\r\nimport { Action } from '../../../common/actions.js';\r\nimport { ActionBar, Separator, ActionViewItem, BaseActionViewItem } from '../actionbar/actionbar.js';\r\nimport { addClass, EventType, EventHelper, removeTabIndexAndUpdateFocus, isAncestor, hasClass, addDisposableListener, removeClass, append, $, addClasses, removeClasses } from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { RunOnceScheduler } from '../../../common/async.js';\r\nimport { DisposableStore } from '../../../common/lifecycle.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\r\nexport var MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\r\nexport var MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\r\nexport var Direction;\r\n(function (Direction) {\r\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\r\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\r\n})(Direction || (Direction = {}));\r\nvar SubmenuAction = /** @class */ (function (_super) {\r\n    __extends(SubmenuAction, _super);\r\n    function SubmenuAction(label, entries, cssClass) {\r\n        var _this = _super.call(this, !!cssClass ? cssClass : 'submenu', label, '', true) || this;\r\n        _this.entries = entries;\r\n        return _this;\r\n    }\r\n    return SubmenuAction;\r\n}(Action));\r\nexport { SubmenuAction };\r\nvar Menu = /** @class */ (function (_super) {\r\n    __extends(Menu, _super);\r\n    function Menu(container, actions, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = this;\r\n        addClass(container, 'monaco-menu-container');\r\n        container.setAttribute('role', 'presentation');\r\n        var menuElement = document.createElement('div');\r\n        addClass(menuElement, 'monaco-menu');\r\n        menuElement.setAttribute('role', 'presentation');\r\n        _this = _super.call(this, menuElement, {\r\n            orientation: 2 /* VERTICAL */,\r\n            actionViewItemProvider: function (action) { return _this.doGetActionViewItem(action, options, parentData); },\r\n            context: options.context,\r\n            actionRunner: options.actionRunner,\r\n            ariaLabel: options.ariaLabel,\r\n            triggerKeys: { keys: __spreadArrays([3 /* Enter */], (isMacintosh ? [10 /* Space */] : [])), keyDown: true }\r\n        }) || this;\r\n        _this.menuElement = menuElement;\r\n        _this.actionsList.setAttribute('role', 'menu');\r\n        _this.actionsList.tabIndex = 0;\r\n        _this.menuDisposables = _this._register(new DisposableStore());\r\n        addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            // Stop tab navigation of menus\r\n            if (event.equals(2 /* Tab */)) {\r\n                e.preventDefault();\r\n            }\r\n        });\r\n        if (options.enableMnemonics) {\r\n            _this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n                var key = e.key.toLocaleLowerCase();\r\n                if (_this.mnemonics.has(key)) {\r\n                    EventHelper.stop(e, true);\r\n                    var actions_1 = _this.mnemonics.get(key);\r\n                    if (actions_1.length === 1) {\r\n                        if (actions_1[0] instanceof SubmenuMenuActionViewItem && actions_1[0].container) {\r\n                            _this.focusItemByElement(actions_1[0].container);\r\n                        }\r\n                        actions_1[0].onClick(e);\r\n                    }\r\n                    if (actions_1.length > 1) {\r\n                        var action = actions_1.shift();\r\n                        if (action && action.container) {\r\n                            _this.focusItemByElement(action.container);\r\n                            actions_1.push(action);\r\n                        }\r\n                        _this.mnemonics.set(key, actions_1);\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        if (isLinux) {\r\n            _this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(14 /* Home */) || event.equals(11 /* PageUp */)) {\r\n                    _this.focusedItem = _this.viewItems.length - 1;\r\n                    _this.focusNext();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n                else if (event.equals(13 /* End */) || event.equals(12 /* PageDown */)) {\r\n                    _this.focusedItem = 0;\r\n                    _this.focusPrevious();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n        }\r\n        _this._register(addDisposableListener(_this.domNode, EventType.MOUSE_OUT, function (e) {\r\n            var relatedTarget = e.relatedTarget;\r\n            if (!isAncestor(relatedTarget, _this.domNode)) {\r\n                _this.focusedItem = undefined;\r\n                _this.updateFocus();\r\n                e.stopPropagation();\r\n            }\r\n        }));\r\n        _this._register(addDisposableListener(_this.actionsList, EventType.MOUSE_OVER, function (e) {\r\n            var target = e.target;\r\n            if (!target || !isAncestor(target, _this.actionsList) || target === _this.actionsList) {\r\n                return;\r\n            }\r\n            while (target.parentElement !== _this.actionsList && target.parentElement !== null) {\r\n                target = target.parentElement;\r\n            }\r\n            if (hasClass(target, 'action-item')) {\r\n                var lastFocusedItem = _this.focusedItem;\r\n                _this.setFocusedItem(target);\r\n                if (lastFocusedItem !== _this.focusedItem) {\r\n                    _this.updateFocus();\r\n                }\r\n            }\r\n        }));\r\n        var parentData = {\r\n            parent: _this\r\n        };\r\n        _this.mnemonics = new Map();\r\n        // Scroll Logic\r\n        _this.scrollableElement = _this._register(new DomScrollableElement(menuElement, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: 2 /* Hidden */,\r\n            vertical: 3 /* Visible */,\r\n            verticalScrollbarSize: 7,\r\n            handleMouseWheel: true,\r\n            useShadows: true\r\n        }));\r\n        var scrollElement = _this.scrollableElement.getDomNode();\r\n        scrollElement.style.position = '';\r\n        _this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, function (e) {\r\n            // Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575\r\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\r\n            e.preventDefault();\r\n        }));\r\n        menuElement.style.maxHeight = Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 30) + \"px\";\r\n        _this.push(actions, { icon: true, label: true, isMenu: true });\r\n        container.appendChild(_this.scrollableElement.getDomNode());\r\n        _this.scrollableElement.scanDomNode();\r\n        _this.viewItems.filter(function (item) { return !(item instanceof MenuSeparatorActionViewItem); }).forEach(function (item, index, array) {\r\n            item.updatePositionInSet(index + 1, array.length);\r\n        });\r\n        return _this;\r\n    }\r\n    Menu.prototype.style = function (style) {\r\n        var container = this.getContainer();\r\n        var fgColor = style.foregroundColor ? \"\" + style.foregroundColor : '';\r\n        var bgColor = style.backgroundColor ? \"\" + style.backgroundColor : '';\r\n        var border = style.borderColor ? \"1px solid \" + style.borderColor : '';\r\n        var shadow = style.shadowColor ? \"0 2px 4px \" + style.shadowColor : '';\r\n        container.style.border = border;\r\n        this.domNode.style.color = fgColor;\r\n        this.domNode.style.backgroundColor = bgColor;\r\n        container.style.boxShadow = shadow;\r\n        if (this.viewItems) {\r\n            this.viewItems.forEach(function (item) {\r\n                if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\r\n                    item.style(style);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Menu.prototype.getContainer = function () {\r\n        return this.scrollableElement.getDomNode();\r\n    };\r\n    Object.defineProperty(Menu.prototype, \"onScroll\", {\r\n        get: function () {\r\n            return this.scrollableElement.onScroll;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Menu.prototype, \"scrollOffset\", {\r\n        get: function () {\r\n            return this.menuElement.scrollTop;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Menu.prototype.focusItemByElement = function (element) {\r\n        var lastFocusedItem = this.focusedItem;\r\n        this.setFocusedItem(element);\r\n        if (lastFocusedItem !== this.focusedItem) {\r\n            this.updateFocus();\r\n        }\r\n    };\r\n    Menu.prototype.setFocusedItem = function (element) {\r\n        for (var i = 0; i < this.actionsList.children.length; i++) {\r\n            var elem = this.actionsList.children[i];\r\n            if (element === elem) {\r\n                this.focusedItem = i;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    Menu.prototype.updateFocus = function (fromRight) {\r\n        _super.prototype.updateFocus.call(this, fromRight, true);\r\n        if (typeof this.focusedItem !== 'undefined') {\r\n            // Workaround for #80047 caused by an issue in chromium\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\r\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\r\n            this.scrollableElement.setScrollPosition({\r\n                scrollTop: Math.round(this.menuElement.scrollTop)\r\n            });\r\n        }\r\n    };\r\n    Menu.prototype.doGetActionViewItem = function (action, options, parentData) {\r\n        if (action instanceof Separator) {\r\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true });\r\n        }\r\n        else if (action instanceof SubmenuAction) {\r\n            var menuActionViewItem = new SubmenuMenuActionViewItem(action, action.entries, parentData, options);\r\n            if (options.enableMnemonics) {\r\n                var mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    var actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n        else {\r\n            var menuItemOptions = { enableMnemonics: options.enableMnemonics };\r\n            if (options.getKeyBinding) {\r\n                var keybinding = options.getKeyBinding(action);\r\n                if (keybinding) {\r\n                    var keybindingLabel = keybinding.getLabel();\r\n                    if (keybindingLabel) {\r\n                        menuItemOptions.keybinding = keybindingLabel;\r\n                    }\r\n                }\r\n            }\r\n            var menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\r\n            if (options.enableMnemonics) {\r\n                var mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    var actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n    };\r\n    return Menu;\r\n}(ActionBar));\r\nexport { Menu };\r\nvar BaseMenuActionViewItem = /** @class */ (function (_super) {\r\n    __extends(BaseMenuActionViewItem, _super);\r\n    function BaseMenuActionViewItem(ctx, action, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = this;\r\n        options.isMenu = true;\r\n        _this = _super.call(this, action, action, options) || this;\r\n        _this.options = options;\r\n        _this.options.icon = options.icon !== undefined ? options.icon : false;\r\n        _this.options.label = options.label !== undefined ? options.label : true;\r\n        _this.cssClass = '';\r\n        // Set mnemonic\r\n        if (_this.options.label && options.enableMnemonics) {\r\n            var label = _this.getAction().label;\r\n            if (label) {\r\n                var matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    _this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\r\n                }\r\n            }\r\n        }\r\n        // Add mouse up listener later to avoid accidental clicks\r\n        _this.runOnceToEnableMouseUp = new RunOnceScheduler(function () {\r\n            if (!_this.element) {\r\n                return;\r\n            }\r\n            _this._register(addDisposableListener(_this.element, EventType.MOUSE_UP, function (e) {\r\n                if (e.defaultPrevented) {\r\n                    return;\r\n                }\r\n                EventHelper.stop(e, true);\r\n                _this.onClick(e);\r\n            }));\r\n        }, 100);\r\n        _this._register(_this.runOnceToEnableMouseUp);\r\n        return _this;\r\n    }\r\n    BaseMenuActionViewItem.prototype.render = function (container) {\r\n        _super.prototype.render.call(this, container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.container = container;\r\n        this.item = append(this.element, $('a.action-menu-item'));\r\n        if (this._action.id === Separator.ID) {\r\n            // A separator is a presentation item\r\n            this.item.setAttribute('role', 'presentation');\r\n        }\r\n        else {\r\n            this.item.setAttribute('role', 'menuitem');\r\n            if (this.mnemonic) {\r\n                this.item.setAttribute('aria-keyshortcuts', \"\" + this.mnemonic);\r\n            }\r\n        }\r\n        this.check = append(this.item, $('span.menu-item-check.codicon.codicon-check'));\r\n        this.check.setAttribute('role', 'none');\r\n        this.label = append(this.item, $('span.action-label'));\r\n        if (this.options.label && this.options.keybinding) {\r\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\r\n        }\r\n        // Adds mouse up listener to actually run the action\r\n        this.runOnceToEnableMouseUp.schedule();\r\n        this.updateClass();\r\n        this.updateLabel();\r\n        this.updateTooltip();\r\n        this.updateEnabled();\r\n        this.updateChecked();\r\n    };\r\n    BaseMenuActionViewItem.prototype.blur = function () {\r\n        _super.prototype.blur.call(this);\r\n        this.applyStyle();\r\n    };\r\n    BaseMenuActionViewItem.prototype.focus = function () {\r\n        _super.prototype.focus.call(this);\r\n        if (this.item) {\r\n            this.item.focus();\r\n        }\r\n        this.applyStyle();\r\n    };\r\n    BaseMenuActionViewItem.prototype.updatePositionInSet = function (pos, setSize) {\r\n        if (this.item) {\r\n            this.item.setAttribute('aria-posinset', \"\" + pos);\r\n            this.item.setAttribute('aria-setsize', \"\" + setSize);\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateLabel = function () {\r\n        if (this.options.label) {\r\n            var label = this.getAction().label;\r\n            if (label) {\r\n                var cleanLabel = cleanMnemonic(label);\r\n                if (!this.options.enableMnemonics) {\r\n                    label = cleanLabel;\r\n                }\r\n                if (this.label) {\r\n                    this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\r\n                }\r\n                var matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    label = strings.escape(label);\r\n                    // This is global, reset it\r\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\r\n                    var escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    // We can't use negative lookbehind so if we match our negative and skip\r\n                    while (escMatch && escMatch[1]) {\r\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    }\r\n                    if (escMatch) {\r\n                        label = label.substr(0, escMatch.index) + \"<u aria-hidden=\\\"true\\\">\" + escMatch[3] + \"</u>\" + label.substr(escMatch.index + escMatch[0].length);\r\n                    }\r\n                    label = label.replace(/&amp;&amp;/g, '&amp;');\r\n                    if (this.item) {\r\n                        this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\r\n                    }\r\n                }\r\n                else {\r\n                    label = label.replace(/&&/g, '&');\r\n                }\r\n            }\r\n            if (this.label) {\r\n                this.label.innerHTML = label.trim();\r\n            }\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateTooltip = function () {\r\n        var title = null;\r\n        if (this.getAction().tooltip) {\r\n            title = this.getAction().tooltip;\r\n        }\r\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\r\n            title = this.getAction().label;\r\n            if (this.options.keybinding) {\r\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\r\n            }\r\n        }\r\n        if (title && this.item) {\r\n            this.item.title = title;\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateClass = function () {\r\n        if (this.cssClass && this.item) {\r\n            removeClasses(this.item, this.cssClass);\r\n        }\r\n        if (this.options.icon && this.label) {\r\n            this.cssClass = this.getAction().class || '';\r\n            addClass(this.label, 'icon');\r\n            if (this.cssClass) {\r\n                addClasses(this.label, this.cssClass);\r\n            }\r\n            this.updateEnabled();\r\n        }\r\n        else if (this.label) {\r\n            removeClass(this.label, 'icon');\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateEnabled = function () {\r\n        if (this.getAction().enabled) {\r\n            if (this.element) {\r\n                removeClass(this.element, 'disabled');\r\n            }\r\n            if (this.item) {\r\n                removeClass(this.item, 'disabled');\r\n                this.item.tabIndex = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (this.element) {\r\n                addClass(this.element, 'disabled');\r\n            }\r\n            if (this.item) {\r\n                addClass(this.item, 'disabled');\r\n                removeTabIndexAndUpdateFocus(this.item);\r\n            }\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateChecked = function () {\r\n        if (!this.item) {\r\n            return;\r\n        }\r\n        if (this.getAction().checked) {\r\n            addClass(this.item, 'checked');\r\n            this.item.setAttribute('role', 'menuitemcheckbox');\r\n            this.item.setAttribute('aria-checked', 'true');\r\n        }\r\n        else {\r\n            removeClass(this.item, 'checked');\r\n            this.item.setAttribute('role', 'menuitem');\r\n            this.item.setAttribute('aria-checked', 'false');\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.getMnemonic = function () {\r\n        return this.mnemonic;\r\n    };\r\n    BaseMenuActionViewItem.prototype.applyStyle = function () {\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        var isSelected = this.element && hasClass(this.element, 'focused');\r\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        var bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\r\n        var border = isSelected && this.menuStyle.selectionBorderColor ? \"thin solid \" + this.menuStyle.selectionBorderColor : '';\r\n        if (this.item) {\r\n            this.item.style.color = fgColor ? fgColor.toString() : '';\r\n            this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\r\n        }\r\n        if (this.check) {\r\n            this.check.style.color = fgColor ? fgColor.toString() : '';\r\n        }\r\n        if (this.container) {\r\n            this.container.style.border = border;\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.style = function (style) {\r\n        this.menuStyle = style;\r\n        this.applyStyle();\r\n    };\r\n    return BaseMenuActionViewItem;\r\n}(BaseActionViewItem));\r\nvar SubmenuMenuActionViewItem = /** @class */ (function (_super) {\r\n    __extends(SubmenuMenuActionViewItem, _super);\r\n    function SubmenuMenuActionViewItem(action, submenuActions, parentData, submenuOptions) {\r\n        var _this = _super.call(this, action, action, submenuOptions) || this;\r\n        _this.submenuActions = submenuActions;\r\n        _this.parentData = parentData;\r\n        _this.submenuOptions = submenuOptions;\r\n        _this.mysubmenu = null;\r\n        _this.submenuDisposables = _this._register(new DisposableStore());\r\n        _this.mouseOver = false;\r\n        _this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\r\n        _this.showScheduler = new RunOnceScheduler(function () {\r\n            if (_this.mouseOver) {\r\n                _this.cleanupExistingSubmenu(false);\r\n                _this.createSubmenu(false);\r\n            }\r\n        }, 250);\r\n        _this.hideScheduler = new RunOnceScheduler(function () {\r\n            if (_this.element && (!isAncestor(document.activeElement, _this.element) && _this.parentData.submenu === _this.mysubmenu)) {\r\n                _this.parentData.parent.focus(false);\r\n                _this.cleanupExistingSubmenu(true);\r\n            }\r\n        }, 750);\r\n        return _this;\r\n    }\r\n    SubmenuMenuActionViewItem.prototype.render = function (container) {\r\n        var _this = this;\r\n        _super.prototype.render.call(this, container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (this.item) {\r\n            addClass(this.item, 'monaco-submenu-item');\r\n            this.item.setAttribute('aria-haspopup', 'true');\r\n            this.updateAriaExpanded('false');\r\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator.codicon.codicon-chevron-right'));\r\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\r\n        }\r\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                EventHelper.stop(e, true);\r\n                _this.createSubmenu(true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            if (document.activeElement === _this.item) {\r\n                if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, function (e) {\r\n            if (!_this.mouseOver) {\r\n                _this.mouseOver = true;\r\n                _this.showScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, function (e) {\r\n            _this.mouseOver = false;\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, function (e) {\r\n            if (_this.element && !isAncestor(document.activeElement, _this.element)) {\r\n                _this.hideScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(this.parentData.parent.onScroll(function () {\r\n            _this.parentData.parent.focus(false);\r\n            _this.cleanupExistingSubmenu(false);\r\n        }));\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.onClick = function (e) {\r\n        // stop clicking from trying to run an action\r\n        EventHelper.stop(e, true);\r\n        this.cleanupExistingSubmenu(false);\r\n        this.createSubmenu(true);\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.cleanupExistingSubmenu = function (force) {\r\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\r\n            this.parentData.submenu.dispose();\r\n            this.parentData.submenu = undefined;\r\n            this.updateAriaExpanded('false');\r\n            if (this.submenuContainer) {\r\n                this.submenuDisposables.clear();\r\n                this.submenuContainer = undefined;\r\n            }\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.createSubmenu = function (selectFirstItem) {\r\n        var _this = this;\r\n        if (selectFirstItem === void 0) { selectFirstItem = true; }\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (!this.parentData.submenu) {\r\n            this.updateAriaExpanded('true');\r\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\r\n            addClasses(this.submenuContainer, 'menubar-menu-items-holder', 'context-view');\r\n            // Set the top value of the menu container before construction\r\n            // This allows the menu constructor to calculate the proper max height\r\n            var computedStyles = getComputedStyle(this.parentData.parent.domNode);\r\n            var paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\r\n            this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions, this.submenuOptions);\r\n            if (this.menuStyle) {\r\n                this.parentData.submenu.style(this.menuStyle);\r\n            }\r\n            var boundingRect = this.element.getBoundingClientRect();\r\n            var childBoundingRect = this.submenuContainer.getBoundingClientRect();\r\n            if (this.expandDirection === Direction.Right) {\r\n                if (window.innerWidth <= boundingRect.right + childBoundingRect.width) {\r\n                    this.submenuContainer.style.left = '10px';\r\n                    this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset + boundingRect.height + \"px\";\r\n                }\r\n                else {\r\n                    this.submenuContainer.style.left = this.element.offsetWidth + \"px\";\r\n                    this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n                }\r\n            }\r\n            else if (this.expandDirection === Direction.Left) {\r\n                this.submenuContainer.style.right = this.element.offsetWidth + \"px\";\r\n                this.submenuContainer.style.left = 'auto';\r\n                this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n            }\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                    _this.parentData.parent.focus();\r\n                    _this.cleanupExistingSubmenu(true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(function () {\r\n                _this.parentData.parent.focus();\r\n                _this.cleanupExistingSubmenu(true);\r\n            }));\r\n            this.parentData.submenu.focus(selectFirstItem);\r\n            this.mysubmenu = this.parentData.submenu;\r\n        }\r\n        else {\r\n            this.parentData.submenu.focus(false);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.updateAriaExpanded = function (value) {\r\n        var _a;\r\n        if (this.item) {\r\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.applyStyle = function () {\r\n        _super.prototype.applyStyle.call(this);\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        var isSelected = this.element && hasClass(this.element, 'focused');\r\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        if (this.submenuIndicator) {\r\n            this.submenuIndicator.style.color = fgColor ? \"\" + fgColor : '';\r\n        }\r\n        if (this.parentData.submenu) {\r\n            this.parentData.submenu.style(this.menuStyle);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.hideScheduler.dispose();\r\n        if (this.mysubmenu) {\r\n            this.mysubmenu.dispose();\r\n            this.mysubmenu = null;\r\n        }\r\n        if (this.submenuContainer) {\r\n            this.submenuContainer = undefined;\r\n        }\r\n    };\r\n    return SubmenuMenuActionViewItem;\r\n}(BaseMenuActionViewItem));\r\nvar MenuSeparatorActionViewItem = /** @class */ (function (_super) {\r\n    __extends(MenuSeparatorActionViewItem, _super);\r\n    function MenuSeparatorActionViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MenuSeparatorActionViewItem.prototype.style = function (style) {\r\n        if (this.label) {\r\n            this.label.style.borderBottomColor = style.separatorColor ? \"\" + style.separatorColor : '';\r\n        }\r\n    };\r\n    return MenuSeparatorActionViewItem;\r\n}(ActionViewItem));\r\nexport function cleanMnemonic(label) {\r\n    var regex = MENU_MNEMONIC_REGEX;\r\n    var matches = regex.exec(label);\r\n    if (!matches) {\r\n        return label;\r\n    }\r\n    var mnemonicInText = !matches[1];\r\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,cAAa,GAAG,uBAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,cAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC;QAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAC;IAAC,CAAC;IAC9E,OAAOP,cAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,cAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAE,GAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,EAAE,CAAC;EACxF,CAAC;AACL,CAAC,EAAG;AACJ,IAAII,cAAc,GAAI,IAAI,IAAI,IAAI,CAACA,cAAc,IAAK,YAAY;EAC9D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE;IAAED,CAAC,IAAIG,SAAS,CAACF,CAAC,CAAC,CAACG,MAAM;EAAC;EACpF,KAAK,IAAIC,CAAC,GAAGb,KAAK,CAACQ,CAAC,CAAC,EAAEM,CAAC,GAAG,CAAC,EAAEL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE;IAC5C,KAAK,IAAIM,CAAC,GAAGJ,SAAS,CAACF,CAAC,CAAC,EAAEO,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGF,CAAC,CAACH,MAAM,EAAEI,CAAC,GAAGC,EAAE,EAAED,CAAC,EAAE,EAAEF,CAAC,EAAE;MAC7DD,CAAC,CAACC,CAAC,CAAC,GAAGC,CAAC,CAACC,CAAC,CAAC;IAAC;EAAA;EACpB,OAAOH,CAAC;AACZ,CAAC;AACD,OAAO,YAAY;AACnB,OAAO,KAAKK,GAAG,MAAM,oBAAoB;AACzC,OAAO,KAAKC,OAAO,MAAM,4BAA4B;AACrD,SAASC,MAAM,QAAQ,4BAA4B;AACnD,SAASC,SAAS,EAAEC,SAAS,EAAEC,cAAc,EAAEC,kBAAkB,QAAQ,2BAA2B;AACpG,SAASC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,4BAA4B,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,qBAAqB,EAAEC,WAAW,EAAEC,MAAM,EAAEC,CAAC,EAAEC,UAAU,EAAEC,aAAa,QAAQ,cAAc;AAC7L,SAASC,qBAAqB,QAAQ,wBAAwB;AAC9D,SAASC,gBAAgB,QAAQ,0BAA0B;AAC3D,SAASC,eAAe,QAAQ,8BAA8B;AAC9D,SAASC,oBAAoB,QAAQ,mCAAmC;AACxE,SAASC,OAAO,EAAEC,WAAW,QAAQ,6BAA6B;AAClE,OAAO,IAAIC,mBAAmB,GAAG,iCAAiC;AAClE,OAAO,IAAIC,2BAA2B,GAAG,0BAA0B;AACnE,OAAO,IAAIC,SAAS;AACpB,CAAC,UAAUA,SAAS,EAAE;EAClBA,SAAS,CAACA,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO;EAC3CA,SAAS,CAACA,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM;AAC7C,CAAC,EAAEA,SAAS,KAAKA,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;AACjC,IAAIC,aAAa,GAAG,aAAe,UAAUC,MAAM,EAAE;EACjDtD,SAAS,CAACqD,aAAa,EAAEC,MAAM,CAAC;EAChC,SAASD,aAAa,CAACE,KAAK,EAAEC,OAAO,EAAEC,QAAQ,EAAE;IAC7C,IAAIC,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAE,CAAC,CAACF,QAAQ,GAAGA,QAAQ,GAAG,SAAS,EAAEF,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,IAAI;IACzFG,KAAK,CAACF,OAAO,GAAGA,OAAO;IACvB,OAAOE,KAAK;EAChB;EACA,OAAOL,aAAa;AACxB,CAAC,CAAC1B,MAAM,CAAE;AACV,SAAS0B,aAAa;AACtB,IAAIO,IAAI,GAAG,aAAe,UAAUN,MAAM,EAAE;EACxCtD,SAAS,CAAC4D,IAAI,EAAEN,MAAM,CAAC;EACvB,SAASM,IAAI,CAACC,SAAS,EAAEC,OAAO,EAAEC,OAAO,EAAE;IACvC,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,CAAC,CAAC;IAAE;IACxC,IAAIL,KAAK,GAAG,IAAI;IAChB1B,QAAQ,CAAC6B,SAAS,EAAE,uBAAuB,CAAC;IAC5CA,SAAS,CAACG,YAAY,CAAC,MAAM,EAAE,cAAc,CAAC;IAC9C,IAAIC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC/CnC,QAAQ,CAACiC,WAAW,EAAE,aAAa,CAAC;IACpCA,WAAW,CAACD,YAAY,CAAC,MAAM,EAAE,cAAc,CAAC;IAChDN,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEM,WAAW,EAAE;MACnCG,WAAW,EAAE,CAAC,CAAC;MACfC,sBAAsB,EAAE,gCAAUC,MAAM,EAAE;QAAE,OAAOZ,KAAK,CAACa,mBAAmB,CAACD,MAAM,EAAEP,OAAO,EAAES,UAAU,CAAC;MAAE,CAAC;MAC5GC,OAAO,EAAEV,OAAO,CAACU,OAAO;MACxBC,YAAY,EAAEX,OAAO,CAACW,YAAY;MAClCC,SAAS,EAAEZ,OAAO,CAACY,SAAS;MAC5BC,WAAW,EAAE;QAAEC,IAAI,EAAE/D,cAAc,CAAC,CAAC,CAAC,CAAC,YAAY,EAAGmC,WAAW,GAAG,CAAC,EAAE,CAAC,YAAY,GAAG,EAAE,CAAE;QAAE6B,OAAO,EAAE;MAAK;IAC/G,CAAC,CAAC,IAAI,IAAI;IACVpB,KAAK,CAACO,WAAW,GAAGA,WAAW;IAC/BP,KAAK,CAACqB,WAAW,CAACf,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IAC9CN,KAAK,CAACqB,WAAW,CAACC,QAAQ,GAAG,CAAC;IAC9BtB,KAAK,CAACuB,eAAe,GAAGvB,KAAK,CAACwB,SAAS,CAAC,IAAIpC,eAAe,EAAE,CAAC;IAC9DR,qBAAqB,CAAC2B,WAAW,EAAEhC,SAAS,CAACkD,QAAQ,EAAE,UAAUC,CAAC,EAAE;MAChE,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;MACxC;MACA,IAAIC,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,UAAU,EAAE;QAC3BF,CAAC,CAACG,cAAc,EAAE;MACtB;IACJ,CAAC,CAAC;IACF,IAAIxB,OAAO,CAACyB,eAAe,EAAE;MACzB9B,KAAK,CAACuB,eAAe,CAACQ,GAAG,CAACnD,qBAAqB,CAAC2B,WAAW,EAAEhC,SAAS,CAACkD,QAAQ,EAAE,UAAUC,CAAC,EAAE;QAC1F,IAAIM,GAAG,GAAGN,CAAC,CAACM,GAAG,CAACC,iBAAiB,EAAE;QACnC,IAAIjC,KAAK,CAACkC,SAAS,CAACC,GAAG,CAACH,GAAG,CAAC,EAAE;UAC1BxD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;UACzB,IAAIW,SAAS,GAAGrC,KAAK,CAACkC,SAAS,CAACI,GAAG,CAACN,GAAG,CAAC;UACxC,IAAIK,SAAS,CAAC5E,MAAM,KAAK,CAAC,EAAE;YACxB,IAAI4E,SAAS,CAAC,CAAC,CAAC,YAAYE,yBAAyB,IAAIF,SAAS,CAAC,CAAC,CAAC,CAAClC,SAAS,EAAE;cAC7EH,KAAK,CAACwC,kBAAkB,CAACH,SAAS,CAAC,CAAC,CAAC,CAAClC,SAAS,CAAC;YACpD;YACAkC,SAAS,CAAC,CAAC,CAAC,CAACI,OAAO,CAACf,CAAC,CAAC;UAC3B;UACA,IAAIW,SAAS,CAAC5E,MAAM,GAAG,CAAC,EAAE;YACtB,IAAImD,MAAM,GAAGyB,SAAS,CAACK,KAAK,EAAE;YAC9B,IAAI9B,MAAM,IAAIA,MAAM,CAACT,SAAS,EAAE;cAC5BH,KAAK,CAACwC,kBAAkB,CAAC5B,MAAM,CAACT,SAAS,CAAC;cAC1CkC,SAAS,CAACM,IAAI,CAAC/B,MAAM,CAAC;YAC1B;YACAZ,KAAK,CAACkC,SAAS,CAACU,GAAG,CAACZ,GAAG,EAAEK,SAAS,CAAC;UACvC;QACJ;MACJ,CAAC,CAAC,CAAC;IACP;IACA,IAAI/C,OAAO,EAAE;MACTU,KAAK,CAACwB,SAAS,CAAC5C,qBAAqB,CAAC2B,WAAW,EAAEhC,SAAS,CAACkD,QAAQ,EAAE,UAAUC,CAAC,EAAE;QAChF,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;QACxC,IAAIC,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,WAAW,IAAID,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE;UAC9D5B,KAAK,CAAC6C,WAAW,GAAG7C,KAAK,CAAC8C,SAAS,CAACrF,MAAM,GAAG,CAAC;UAC9CuC,KAAK,CAAC+C,SAAS,EAAE;UACjBvE,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QAC7B,CAAC,MACI,IAAIC,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,UAAU,IAAID,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE;UACpE5B,KAAK,CAAC6C,WAAW,GAAG,CAAC;UACrB7C,KAAK,CAACgD,aAAa,EAAE;UACrBxE,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QAC7B;MACJ,CAAC,CAAC,CAAC;IACP;IACA1B,KAAK,CAACwB,SAAS,CAAC5C,qBAAqB,CAACoB,KAAK,CAACiD,OAAO,EAAE1E,SAAS,CAAC2E,SAAS,EAAE,UAAUxB,CAAC,EAAE;MACnF,IAAIyB,aAAa,GAAGzB,CAAC,CAACyB,aAAa;MACnC,IAAI,CAACzE,UAAU,CAACyE,aAAa,EAAEnD,KAAK,CAACiD,OAAO,CAAC,EAAE;QAC3CjD,KAAK,CAAC6C,WAAW,GAAGO,SAAS;QAC7BpD,KAAK,CAACqD,WAAW,EAAE;QACnB3B,CAAC,CAAC4B,eAAe,EAAE;MACvB;IACJ,CAAC,CAAC,CAAC;IACHtD,KAAK,CAACwB,SAAS,CAAC5C,qBAAqB,CAACoB,KAAK,CAACqB,WAAW,EAAE9C,SAAS,CAACgF,UAAU,EAAE,UAAU7B,CAAC,EAAE;MACxF,IAAI8B,MAAM,GAAG9B,CAAC,CAAC8B,MAAM;MACrB,IAAI,CAACA,MAAM,IAAI,CAAC9E,UAAU,CAAC8E,MAAM,EAAExD,KAAK,CAACqB,WAAW,CAAC,IAAImC,MAAM,KAAKxD,KAAK,CAACqB,WAAW,EAAE;QACnF;MACJ;MACA,OAAOmC,MAAM,CAACC,aAAa,KAAKzD,KAAK,CAACqB,WAAW,IAAImC,MAAM,CAACC,aAAa,KAAK,IAAI,EAAE;QAChFD,MAAM,GAAGA,MAAM,CAACC,aAAa;MACjC;MACA,IAAI9E,QAAQ,CAAC6E,MAAM,EAAE,aAAa,CAAC,EAAE;QACjC,IAAIE,eAAe,GAAG1D,KAAK,CAAC6C,WAAW;QACvC7C,KAAK,CAAC2D,cAAc,CAACH,MAAM,CAAC;QAC5B,IAAIE,eAAe,KAAK1D,KAAK,CAAC6C,WAAW,EAAE;UACvC7C,KAAK,CAACqD,WAAW,EAAE;QACvB;MACJ;IACJ,CAAC,CAAC,CAAC;IACH,IAAIvC,UAAU,GAAG;MACb8C,MAAM,EAAE5D;IACZ,CAAC;IACDA,KAAK,CAACkC,SAAS,GAAG,IAAI2B,GAAG,EAAE;IAC3B;IACA7D,KAAK,CAAC8D,iBAAiB,GAAG9D,KAAK,CAACwB,SAAS,CAAC,IAAInC,oBAAoB,CAACkB,WAAW,EAAE;MAC5EwD,uBAAuB,EAAE,IAAI;MAC7BC,UAAU,EAAE,CAAC,CAAC;MACdC,QAAQ,EAAE,CAAC,CAAC;MACZC,qBAAqB,EAAE,CAAC;MACxBC,gBAAgB,EAAE,IAAI;MACtBC,UAAU,EAAE;IAChB,CAAC,CAAC,CAAC;IACH,IAAIC,aAAa,GAAGrE,KAAK,CAAC8D,iBAAiB,CAACQ,UAAU,EAAE;IACxDD,aAAa,CAACE,KAAK,CAACC,QAAQ,GAAG,EAAE;IACjCxE,KAAK,CAACwB,SAAS,CAAC5C,qBAAqB,CAACyF,aAAa,EAAE9F,SAAS,CAACkG,QAAQ,EAAE,UAAU/C,CAAC,EAAE;MAClF;MACA;MACAA,CAAC,CAACG,cAAc,EAAE;IACtB,CAAC,CAAC,CAAC;IACHtB,WAAW,CAACgE,KAAK,CAACG,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEC,MAAM,CAACC,WAAW,GAAG3E,SAAS,CAAC4E,qBAAqB,EAAE,CAACC,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;IAClHhF,KAAK,CAAC2C,IAAI,CAACvC,OAAO,EAAE;MAAE6E,IAAI,EAAE,IAAI;MAAEpF,KAAK,EAAE,IAAI;MAAEqF,MAAM,EAAE;IAAK,CAAC,CAAC;IAC9D/E,SAAS,CAACgF,WAAW,CAACnF,KAAK,CAAC8D,iBAAiB,CAACQ,UAAU,EAAE,CAAC;IAC3DtE,KAAK,CAAC8D,iBAAiB,CAACsB,WAAW,EAAE;IACrCpF,KAAK,CAAC8C,SAAS,CAACuC,MAAM,CAAC,UAAUC,IAAI,EAAE;MAAE,OAAO,EAAEA,IAAI,YAAYC,2BAA2B,CAAC;IAAE,CAAC,CAAC,CAACC,OAAO,CAAC,UAAUF,IAAI,EAAEG,KAAK,EAAEC,KAAK,EAAE;MACrIJ,IAAI,CAACK,mBAAmB,CAACF,KAAK,GAAG,CAAC,EAAEC,KAAK,CAACjI,MAAM,CAAC;IACrD,CAAC,CAAC;IACF,OAAOuC,KAAK;EAChB;EACAE,IAAI,CAAChD,SAAS,CAACqH,KAAK,GAAG,UAAUA,KAAK,EAAE;IACpC,IAAIpE,SAAS,GAAG,IAAI,CAACyF,YAAY,EAAE;IACnC,IAAIC,OAAO,GAAGtB,KAAK,CAACuB,eAAe,GAAG,EAAE,GAAGvB,KAAK,CAACuB,eAAe,GAAG,EAAE;IACrE,IAAIC,OAAO,GAAGxB,KAAK,CAACyB,eAAe,GAAG,EAAE,GAAGzB,KAAK,CAACyB,eAAe,GAAG,EAAE;IACrE,IAAIC,MAAM,GAAG1B,KAAK,CAAC2B,WAAW,GAAG,YAAY,GAAG3B,KAAK,CAAC2B,WAAW,GAAG,EAAE;IACtE,IAAIC,MAAM,GAAG5B,KAAK,CAAC6B,WAAW,GAAG,YAAY,GAAG7B,KAAK,CAAC6B,WAAW,GAAG,EAAE;IACtEjG,SAAS,CAACoE,KAAK,CAAC0B,MAAM,GAAGA,MAAM;IAC/B,IAAI,CAAChD,OAAO,CAACsB,KAAK,CAAC8B,KAAK,GAAGR,OAAO;IAClC,IAAI,CAAC5C,OAAO,CAACsB,KAAK,CAACyB,eAAe,GAAGD,OAAO;IAC5C5F,SAAS,CAACoE,KAAK,CAAC+B,SAAS,GAAGH,MAAM;IAClC,IAAI,IAAI,CAACrD,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAAC0C,OAAO,CAAC,UAAUF,IAAI,EAAE;QACnC,IAAIA,IAAI,YAAYiB,sBAAsB,IAAIjB,IAAI,YAAYC,2BAA2B,EAAE;UACvFD,IAAI,CAACf,KAAK,CAACA,KAAK,CAAC;QACrB;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;EACDrE,IAAI,CAAChD,SAAS,CAAC0I,YAAY,GAAG,YAAY;IACtC,OAAO,IAAI,CAAC9B,iBAAiB,CAACQ,UAAU,EAAE;EAC9C,CAAC;EACD5H,MAAM,CAAC8J,cAAc,CAACtG,IAAI,CAAChD,SAAS,EAAE,UAAU,EAAE;IAC9CoF,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAACwB,iBAAiB,CAAC2C,QAAQ;IAC1C,CAAC;IACDC,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFjK,MAAM,CAAC8J,cAAc,CAACtG,IAAI,CAAChD,SAAS,EAAE,cAAc,EAAE;IAClDoF,GAAG,EAAE,eAAY;MACb,OAAO,IAAI,CAAC/B,WAAW,CAACqG,SAAS;IACrC,CAAC;IACDF,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACFzG,IAAI,CAAChD,SAAS,CAACsF,kBAAkB,GAAG,UAAUqE,OAAO,EAAE;IACnD,IAAInD,eAAe,GAAG,IAAI,CAACb,WAAW;IACtC,IAAI,CAACc,cAAc,CAACkD,OAAO,CAAC;IAC5B,IAAInD,eAAe,KAAK,IAAI,CAACb,WAAW,EAAE;MACtC,IAAI,CAACQ,WAAW,EAAE;IACtB;EACJ,CAAC;EACDnD,IAAI,CAAChD,SAAS,CAACyG,cAAc,GAAG,UAAUkD,OAAO,EAAE;IAC/C,KAAK,IAAIvJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+D,WAAW,CAACyF,QAAQ,CAACrJ,MAAM,EAAEH,CAAC,EAAE,EAAE;MACvD,IAAIyJ,IAAI,GAAG,IAAI,CAAC1F,WAAW,CAACyF,QAAQ,CAACxJ,CAAC,CAAC;MACvC,IAAIuJ,OAAO,KAAKE,IAAI,EAAE;QAClB,IAAI,CAAClE,WAAW,GAAGvF,CAAC;QACpB;MACJ;IACJ;EACJ,CAAC;EACD4C,IAAI,CAAChD,SAAS,CAACmG,WAAW,GAAG,UAAU2D,SAAS,EAAE;IAC9CpH,MAAM,CAAC1C,SAAS,CAACmG,WAAW,CAACpD,IAAI,CAAC,IAAI,EAAE+G,SAAS,EAAE,IAAI,CAAC;IACxD,IAAI,OAAO,IAAI,CAACnE,WAAW,KAAK,WAAW,EAAE;MACzC;MACA;MACA;MACA,IAAI,CAACiB,iBAAiB,CAACmD,iBAAiB,CAAC;QACrCL,SAAS,EAAEjC,IAAI,CAACuC,KAAK,CAAC,IAAI,CAAC3G,WAAW,CAACqG,SAAS;MACpD,CAAC,CAAC;IACN;EACJ,CAAC;EACD1G,IAAI,CAAChD,SAAS,CAAC2D,mBAAmB,GAAG,UAAUD,MAAM,EAAEP,OAAO,EAAES,UAAU,EAAE;IACxE,IAAIF,MAAM,YAAYzC,SAAS,EAAE;MAC7B,OAAO,IAAIoH,2BAA2B,CAAClF,OAAO,CAACU,OAAO,EAAEH,MAAM,EAAE;QAAEqE,IAAI,EAAE;MAAK,CAAC,CAAC;IACnF,CAAC,MACI,IAAIrE,MAAM,YAAYjB,aAAa,EAAE;MACtC,IAAIwH,kBAAkB,GAAG,IAAI5E,yBAAyB,CAAC3B,MAAM,EAAEA,MAAM,CAACd,OAAO,EAAEgB,UAAU,EAAET,OAAO,CAAC;MACnG,IAAIA,OAAO,CAACyB,eAAe,EAAE;QACzB,IAAIsF,QAAQ,GAAGD,kBAAkB,CAACE,WAAW,EAAE;QAC/C,IAAID,QAAQ,IAAID,kBAAkB,CAACG,SAAS,EAAE,EAAE;UAC5C,IAAIC,eAAe,GAAG,EAAE;UACxB,IAAI,IAAI,CAACrF,SAAS,CAACC,GAAG,CAACiF,QAAQ,CAAC,EAAE;YAC9BG,eAAe,GAAG,IAAI,CAACrF,SAAS,CAACI,GAAG,CAAC8E,QAAQ,CAAC;UAClD;UACAG,eAAe,CAAC5E,IAAI,CAACwE,kBAAkB,CAAC;UACxC,IAAI,CAACjF,SAAS,CAACU,GAAG,CAACwE,QAAQ,EAAEG,eAAe,CAAC;QACjD;MACJ;MACA,OAAOJ,kBAAkB;IAC7B,CAAC,MACI;MACD,IAAIK,eAAe,GAAG;QAAE1F,eAAe,EAAEzB,OAAO,CAACyB;MAAgB,CAAC;MAClE,IAAIzB,OAAO,CAACoH,aAAa,EAAE;QACvB,IAAIC,UAAU,GAAGrH,OAAO,CAACoH,aAAa,CAAC7G,MAAM,CAAC;QAC9C,IAAI8G,UAAU,EAAE;UACZ,IAAIC,eAAe,GAAGD,UAAU,CAACE,QAAQ,EAAE;UAC3C,IAAID,eAAe,EAAE;YACjBH,eAAe,CAACE,UAAU,GAAGC,eAAe;UAChD;QACJ;MACJ;MACA,IAAIR,kBAAkB,GAAG,IAAIZ,sBAAsB,CAAClG,OAAO,CAACU,OAAO,EAAEH,MAAM,EAAE4G,eAAe,CAAC;MAC7F,IAAInH,OAAO,CAACyB,eAAe,EAAE;QACzB,IAAIsF,QAAQ,GAAGD,kBAAkB,CAACE,WAAW,EAAE;QAC/C,IAAID,QAAQ,IAAID,kBAAkB,CAACG,SAAS,EAAE,EAAE;UAC5C,IAAIC,eAAe,GAAG,EAAE;UACxB,IAAI,IAAI,CAACrF,SAAS,CAACC,GAAG,CAACiF,QAAQ,CAAC,EAAE;YAC9BG,eAAe,GAAG,IAAI,CAACrF,SAAS,CAACI,GAAG,CAAC8E,QAAQ,CAAC;UAClD;UACAG,eAAe,CAAC5E,IAAI,CAACwE,kBAAkB,CAAC;UACxC,IAAI,CAACjF,SAAS,CAACU,GAAG,CAACwE,QAAQ,EAAEG,eAAe,CAAC;QACjD;MACJ;MACA,OAAOJ,kBAAkB;IAC7B;EACJ,CAAC;EACD,OAAOjH,IAAI;AACf,CAAC,CAAChC,SAAS,CAAE;AACb,SAASgC,IAAI;AACb,IAAIqG,sBAAsB,GAAG,aAAe,UAAU3G,MAAM,EAAE;EAC1DtD,SAAS,CAACiK,sBAAsB,EAAE3G,MAAM,CAAC;EACzC,SAAS2G,sBAAsB,CAACsB,GAAG,EAAEjH,MAAM,EAAEP,OAAO,EAAE;IAClD,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,CAAC,CAAC;IAAE;IACxC,IAAIL,KAAK,GAAG,IAAI;IAChBK,OAAO,CAAC6E,MAAM,GAAG,IAAI;IACrBlF,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEW,MAAM,EAAEA,MAAM,EAAEP,OAAO,CAAC,IAAI,IAAI;IAC1DL,KAAK,CAACK,OAAO,GAAGA,OAAO;IACvBL,KAAK,CAACK,OAAO,CAAC4E,IAAI,GAAG5E,OAAO,CAAC4E,IAAI,KAAK7B,SAAS,GAAG/C,OAAO,CAAC4E,IAAI,GAAG,KAAK;IACtEjF,KAAK,CAACK,OAAO,CAACR,KAAK,GAAGQ,OAAO,CAACR,KAAK,KAAKuD,SAAS,GAAG/C,OAAO,CAACR,KAAK,GAAG,IAAI;IACxEG,KAAK,CAACD,QAAQ,GAAG,EAAE;IACnB;IACA,IAAIC,KAAK,CAACK,OAAO,CAACR,KAAK,IAAIQ,OAAO,CAACyB,eAAe,EAAE;MAChD,IAAIjC,KAAK,GAAGG,KAAK,CAAC8H,SAAS,EAAE,CAACjI,KAAK;MACnC,IAAIA,KAAK,EAAE;QACP,IAAIkI,OAAO,GAAGvI,mBAAmB,CAACwI,IAAI,CAACnI,KAAK,CAAC;QAC7C,IAAIkI,OAAO,EAAE;UACT/H,KAAK,CAACoH,QAAQ,GAAG,CAAC,CAAC,CAACW,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAAC,CAAC,CAAC,EAAE9F,iBAAiB,EAAE;QACjF;MACJ;IACJ;IACA;IACAjC,KAAK,CAACiI,sBAAsB,GAAG,IAAI9I,gBAAgB,CAAC,YAAY;MAC5D,IAAI,CAACa,KAAK,CAAC6G,OAAO,EAAE;QAChB;MACJ;MACA7G,KAAK,CAACwB,SAAS,CAAC5C,qBAAqB,CAACoB,KAAK,CAAC6G,OAAO,EAAEtI,SAAS,CAACkG,QAAQ,EAAE,UAAU/C,CAAC,EAAE;QAClF,IAAIA,CAAC,CAACwG,gBAAgB,EAAE;UACpB;QACJ;QACA1J,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QACzB1B,KAAK,CAACyC,OAAO,CAACf,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC;IACP,CAAC,EAAE,GAAG,CAAC;IACP1B,KAAK,CAACwB,SAAS,CAACxB,KAAK,CAACiI,sBAAsB,CAAC;IAC7C,OAAOjI,KAAK;EAChB;EACAuG,sBAAsB,CAACrJ,SAAS,CAACiL,MAAM,GAAG,UAAUhI,SAAS,EAAE;IAC3DP,MAAM,CAAC1C,SAAS,CAACiL,MAAM,CAAClI,IAAI,CAAC,IAAI,EAAEE,SAAS,CAAC;IAC7C,IAAI,CAAC,IAAI,CAAC0G,OAAO,EAAE;MACf;IACJ;IACA,IAAI,CAAC1G,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACmF,IAAI,GAAGxG,MAAM,CAAC,IAAI,CAAC+H,OAAO,EAAE9H,CAAC,CAAC,oBAAoB,CAAC,CAAC;IACzD,IAAI,IAAI,CAACqJ,OAAO,CAACC,EAAE,KAAKlK,SAAS,CAACmK,EAAE,EAAE;MAClC;MACA,IAAI,CAAChD,IAAI,CAAChF,YAAY,CAAC,MAAM,EAAE,cAAc,CAAC;IAClD,CAAC,MACI;MACD,IAAI,CAACgF,IAAI,CAAChF,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC;MAC1C,IAAI,IAAI,CAAC8G,QAAQ,EAAE;QACf,IAAI,CAAC9B,IAAI,CAAChF,YAAY,CAAC,mBAAmB,EAAE,EAAE,GAAG,IAAI,CAAC8G,QAAQ,CAAC;MACnE;IACJ;IACA,IAAI,CAACmB,KAAK,GAAGzJ,MAAM,CAAC,IAAI,CAACwG,IAAI,EAAEvG,CAAC,CAAC,4CAA4C,CAAC,CAAC;IAC/E,IAAI,CAACwJ,KAAK,CAACjI,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IACvC,IAAI,CAACT,KAAK,GAAGf,MAAM,CAAC,IAAI,CAACwG,IAAI,EAAEvG,CAAC,CAAC,mBAAmB,CAAC,CAAC;IACtD,IAAI,IAAI,CAACsB,OAAO,CAACR,KAAK,IAAI,IAAI,CAACQ,OAAO,CAACqH,UAAU,EAAE;MAC/C5I,MAAM,CAAC,IAAI,CAACwG,IAAI,EAAEvG,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAACyJ,WAAW,GAAG,IAAI,CAACnI,OAAO,CAACqH,UAAU;IACjF;IACA;IACA,IAAI,CAACO,sBAAsB,CAACQ,QAAQ,EAAE;IACtC,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACC,aAAa,EAAE;EACxB,CAAC;EACDvC,sBAAsB,CAACrJ,SAAS,CAAC6L,IAAI,GAAG,YAAY;IAChDnJ,MAAM,CAAC1C,SAAS,CAAC6L,IAAI,CAAC9I,IAAI,CAAC,IAAI,CAAC;IAChC,IAAI,CAAC+I,UAAU,EAAE;EACrB,CAAC;EACDzC,sBAAsB,CAACrJ,SAAS,CAAC+L,KAAK,GAAG,YAAY;IACjDrJ,MAAM,CAAC1C,SAAS,CAAC+L,KAAK,CAAChJ,IAAI,CAAC,IAAI,CAAC;IACjC,IAAI,IAAI,CAACqF,IAAI,EAAE;MACX,IAAI,CAACA,IAAI,CAAC2D,KAAK,EAAE;IACrB;IACA,IAAI,CAACD,UAAU,EAAE;EACrB,CAAC;EACDzC,sBAAsB,CAACrJ,SAAS,CAACyI,mBAAmB,GAAG,UAAUuD,GAAG,EAAEC,OAAO,EAAE;IAC3E,IAAI,IAAI,CAAC7D,IAAI,EAAE;MACX,IAAI,CAACA,IAAI,CAAChF,YAAY,CAAC,eAAe,EAAE,EAAE,GAAG4I,GAAG,CAAC;MACjD,IAAI,CAAC5D,IAAI,CAAChF,YAAY,CAAC,cAAc,EAAE,EAAE,GAAG6I,OAAO,CAAC;IACxD;EACJ,CAAC;EACD5C,sBAAsB,CAACrJ,SAAS,CAACyL,WAAW,GAAG,YAAY;IACvD,IAAI,IAAI,CAACtI,OAAO,CAACR,KAAK,EAAE;MACpB,IAAIA,KAAK,GAAG,IAAI,CAACiI,SAAS,EAAE,CAACjI,KAAK;MAClC,IAAIA,KAAK,EAAE;QACP,IAAIuJ,UAAU,GAAGC,aAAa,CAACxJ,KAAK,CAAC;QACrC,IAAI,CAAC,IAAI,CAACQ,OAAO,CAACyB,eAAe,EAAE;UAC/BjC,KAAK,GAAGuJ,UAAU;QACtB;QACA,IAAI,IAAI,CAACvJ,KAAK,EAAE;UACZ,IAAI,CAACA,KAAK,CAACS,YAAY,CAAC,YAAY,EAAE8I,UAAU,CAACE,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACzE;QACA,IAAIvB,OAAO,GAAGvI,mBAAmB,CAACwI,IAAI,CAACnI,KAAK,CAAC;QAC7C,IAAIkI,OAAO,EAAE;UACTlI,KAAK,GAAG7B,OAAO,CAACuL,MAAM,CAAC1J,KAAK,CAAC;UAC7B;UACAJ,2BAA2B,CAAC+J,SAAS,GAAG,CAAC;UACzC,IAAIC,QAAQ,GAAGhK,2BAA2B,CAACuI,IAAI,CAACnI,KAAK,CAAC;UACtD;UACA,OAAO4J,QAAQ,IAAIA,QAAQ,CAAC,CAAC,CAAC,EAAE;YAC5BA,QAAQ,GAAGhK,2BAA2B,CAACuI,IAAI,CAACnI,KAAK,CAAC;UACtD;UACA,IAAI4J,QAAQ,EAAE;YACV5J,KAAK,GAAGA,KAAK,CAAC6J,MAAM,CAAC,CAAC,EAAED,QAAQ,CAAChE,KAAK,CAAC,GAAG,0BAA0B,GAAGgE,QAAQ,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG5J,KAAK,CAAC6J,MAAM,CAACD,QAAQ,CAAChE,KAAK,GAAGgE,QAAQ,CAAC,CAAC,CAAC,CAAChM,MAAM,CAAC;UACnJ;UACAoC,KAAK,GAAGA,KAAK,CAACyJ,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC;UAC7C,IAAI,IAAI,CAAChE,IAAI,EAAE;YACX,IAAI,CAACA,IAAI,CAAChF,YAAY,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAACyH,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAAC,CAAC,CAAC,EAAE9F,iBAAiB,EAAE,CAAC;UAC7G;QACJ,CAAC,MACI;UACDpC,KAAK,GAAGA,KAAK,CAACyJ,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;QACrC;MACJ;MACA,IAAI,IAAI,CAACzJ,KAAK,EAAE;QACZ,IAAI,CAACA,KAAK,CAAC8J,SAAS,GAAG9J,KAAK,CAAC+J,IAAI,EAAE;MACvC;IACJ;EACJ,CAAC;EACDrD,sBAAsB,CAACrJ,SAAS,CAAC0L,aAAa,GAAG,YAAY;IACzD,IAAIiB,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAAC/B,SAAS,EAAE,CAACgC,OAAO,EAAE;MAC1BD,KAAK,GAAG,IAAI,CAAC/B,SAAS,EAAE,CAACgC,OAAO;IACpC,CAAC,MACI,IAAI,CAAC,IAAI,CAACzJ,OAAO,CAACR,KAAK,IAAI,IAAI,CAACiI,SAAS,EAAE,CAACjI,KAAK,IAAI,IAAI,CAACQ,OAAO,CAAC4E,IAAI,EAAE;MACzE4E,KAAK,GAAG,IAAI,CAAC/B,SAAS,EAAE,CAACjI,KAAK;MAC9B,IAAI,IAAI,CAACQ,OAAO,CAACqH,UAAU,EAAE;QACzBmC,KAAK,GAAG9L,GAAG,CAACgM,QAAQ,CAAC;UAAE/H,GAAG,EAAE,YAAY;UAAEgI,OAAO,EAAE,CAAC,cAAc,EAAE,mBAAmB;QAAE,CAAC,EAAE,WAAW,EAAEH,KAAK,EAAE,IAAI,CAACxJ,OAAO,CAACqH,UAAU,CAAC;MAC5I;IACJ;IACA,IAAImC,KAAK,IAAI,IAAI,CAACvE,IAAI,EAAE;MACpB,IAAI,CAACA,IAAI,CAACuE,KAAK,GAAGA,KAAK;IAC3B;EACJ,CAAC;EACDtD,sBAAsB,CAACrJ,SAAS,CAACwL,WAAW,GAAG,YAAY;IACvD,IAAI,IAAI,CAAC3I,QAAQ,IAAI,IAAI,CAACuF,IAAI,EAAE;MAC5BrG,aAAa,CAAC,IAAI,CAACqG,IAAI,EAAE,IAAI,CAACvF,QAAQ,CAAC;IAC3C;IACA,IAAI,IAAI,CAACM,OAAO,CAAC4E,IAAI,IAAI,IAAI,CAACpF,KAAK,EAAE;MACjC,IAAI,CAACE,QAAQ,GAAG,IAAI,CAAC+H,SAAS,EAAE,CAACmC,KAAK,IAAI,EAAE;MAC5C3L,QAAQ,CAAC,IAAI,CAACuB,KAAK,EAAE,MAAM,CAAC;MAC5B,IAAI,IAAI,CAACE,QAAQ,EAAE;QACff,UAAU,CAAC,IAAI,CAACa,KAAK,EAAE,IAAI,CAACE,QAAQ,CAAC;MACzC;MACA,IAAI,CAAC8I,aAAa,EAAE;IACxB,CAAC,MACI,IAAI,IAAI,CAAChJ,KAAK,EAAE;MACjBhB,WAAW,CAAC,IAAI,CAACgB,KAAK,EAAE,MAAM,CAAC;IACnC;EACJ,CAAC;EACD0G,sBAAsB,CAACrJ,SAAS,CAAC2L,aAAa,GAAG,YAAY;IACzD,IAAI,IAAI,CAACf,SAAS,EAAE,CAACoC,OAAO,EAAE;MAC1B,IAAI,IAAI,CAACrD,OAAO,EAAE;QACdhI,WAAW,CAAC,IAAI,CAACgI,OAAO,EAAE,UAAU,CAAC;MACzC;MACA,IAAI,IAAI,CAACvB,IAAI,EAAE;QACXzG,WAAW,CAAC,IAAI,CAACyG,IAAI,EAAE,UAAU,CAAC;QAClC,IAAI,CAACA,IAAI,CAAChE,QAAQ,GAAG,CAAC;MAC1B;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAACuF,OAAO,EAAE;QACdvI,QAAQ,CAAC,IAAI,CAACuI,OAAO,EAAE,UAAU,CAAC;MACtC;MACA,IAAI,IAAI,CAACvB,IAAI,EAAE;QACXhH,QAAQ,CAAC,IAAI,CAACgH,IAAI,EAAE,UAAU,CAAC;QAC/B7G,4BAA4B,CAAC,IAAI,CAAC6G,IAAI,CAAC;MAC3C;IACJ;EACJ,CAAC;EACDiB,sBAAsB,CAACrJ,SAAS,CAAC4L,aAAa,GAAG,YAAY;IACzD,IAAI,CAAC,IAAI,CAACxD,IAAI,EAAE;MACZ;IACJ;IACA,IAAI,IAAI,CAACwC,SAAS,EAAE,CAACqC,OAAO,EAAE;MAC1B7L,QAAQ,CAAC,IAAI,CAACgH,IAAI,EAAE,SAAS,CAAC;MAC9B,IAAI,CAACA,IAAI,CAAChF,YAAY,CAAC,MAAM,EAAE,kBAAkB,CAAC;MAClD,IAAI,CAACgF,IAAI,CAAChF,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC;IAClD,CAAC,MACI;MACDzB,WAAW,CAAC,IAAI,CAACyG,IAAI,EAAE,SAAS,CAAC;MACjC,IAAI,CAACA,IAAI,CAAChF,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC;MAC1C,IAAI,CAACgF,IAAI,CAAChF,YAAY,CAAC,cAAc,EAAE,OAAO,CAAC;IACnD;EACJ,CAAC;EACDiG,sBAAsB,CAACrJ,SAAS,CAACmK,WAAW,GAAG,YAAY;IACvD,OAAO,IAAI,CAACD,QAAQ;EACxB,CAAC;EACDb,sBAAsB,CAACrJ,SAAS,CAAC8L,UAAU,GAAG,YAAY;IACtD,IAAI,CAAC,IAAI,CAACoB,SAAS,EAAE;MACjB;IACJ;IACA,IAAIC,UAAU,GAAG,IAAI,CAACxD,OAAO,IAAIlI,QAAQ,CAAC,IAAI,CAACkI,OAAO,EAAE,SAAS,CAAC;IAClE,IAAIhB,OAAO,GAAGwE,UAAU,IAAI,IAAI,CAACD,SAAS,CAACE,wBAAwB,GAAG,IAAI,CAACF,SAAS,CAACE,wBAAwB,GAAG,IAAI,CAACF,SAAS,CAACtE,eAAe;IAC9I,IAAIC,OAAO,GAAGsE,UAAU,IAAI,IAAI,CAACD,SAAS,CAACG,wBAAwB,GAAG,IAAI,CAACH,SAAS,CAACG,wBAAwB,GAAGnH,SAAS;IACzH,IAAI6C,MAAM,GAAGoE,UAAU,IAAI,IAAI,CAACD,SAAS,CAACI,oBAAoB,GAAG,aAAa,GAAG,IAAI,CAACJ,SAAS,CAACI,oBAAoB,GAAG,EAAE;IACzH,IAAI,IAAI,CAAClF,IAAI,EAAE;MACX,IAAI,CAACA,IAAI,CAACf,KAAK,CAAC8B,KAAK,GAAGR,OAAO,GAAGA,OAAO,CAAC4E,QAAQ,EAAE,GAAG,EAAE;MACzD,IAAI,CAACnF,IAAI,CAACf,KAAK,CAACyB,eAAe,GAAGD,OAAO,GAAGA,OAAO,CAAC0E,QAAQ,EAAE,GAAG,EAAE;IACvE;IACA,IAAI,IAAI,CAAClC,KAAK,EAAE;MACZ,IAAI,CAACA,KAAK,CAAChE,KAAK,CAAC8B,KAAK,GAAGR,OAAO,GAAGA,OAAO,CAAC4E,QAAQ,EAAE,GAAG,EAAE;IAC9D;IACA,IAAI,IAAI,CAACtK,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAACoE,KAAK,CAAC0B,MAAM,GAAGA,MAAM;IACxC;EACJ,CAAC;EACDM,sBAAsB,CAACrJ,SAAS,CAACqH,KAAK,GAAG,UAAUA,KAAK,EAAE;IACtD,IAAI,CAAC6F,SAAS,GAAG7F,KAAK;IACtB,IAAI,CAACyE,UAAU,EAAE;EACrB,CAAC;EACD,OAAOzC,sBAAsB;AACjC,CAAC,CAAClI,kBAAkB,CAAE;AACtB,IAAIkE,yBAAyB,GAAG,aAAe,UAAU3C,MAAM,EAAE;EAC7DtD,SAAS,CAACiG,yBAAyB,EAAE3C,MAAM,CAAC;EAC5C,SAAS2C,yBAAyB,CAAC3B,MAAM,EAAE8J,cAAc,EAAE5J,UAAU,EAAE6J,cAAc,EAAE;IACnF,IAAI3K,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEW,MAAM,EAAEA,MAAM,EAAE+J,cAAc,CAAC,IAAI,IAAI;IACrE3K,KAAK,CAAC0K,cAAc,GAAGA,cAAc;IACrC1K,KAAK,CAACc,UAAU,GAAGA,UAAU;IAC7Bd,KAAK,CAAC2K,cAAc,GAAGA,cAAc;IACrC3K,KAAK,CAAC4K,SAAS,GAAG,IAAI;IACtB5K,KAAK,CAAC6K,kBAAkB,GAAG7K,KAAK,CAACwB,SAAS,CAAC,IAAIpC,eAAe,EAAE,CAAC;IACjEY,KAAK,CAAC8K,SAAS,GAAG,KAAK;IACvB9K,KAAK,CAAC+K,eAAe,GAAGJ,cAAc,IAAIA,cAAc,CAACI,eAAe,KAAK3H,SAAS,GAAGuH,cAAc,CAACI,eAAe,GAAGrL,SAAS,CAACsL,KAAK;IACzIhL,KAAK,CAACiL,aAAa,GAAG,IAAI9L,gBAAgB,CAAC,YAAY;MACnD,IAAIa,KAAK,CAAC8K,SAAS,EAAE;QACjB9K,KAAK,CAACkL,sBAAsB,CAAC,KAAK,CAAC;QACnClL,KAAK,CAACmL,aAAa,CAAC,KAAK,CAAC;MAC9B;IACJ,CAAC,EAAE,GAAG,CAAC;IACPnL,KAAK,CAACoL,aAAa,GAAG,IAAIjM,gBAAgB,CAAC,YAAY;MACnD,IAAIa,KAAK,CAAC6G,OAAO,IAAK,CAACnI,UAAU,CAAC8B,QAAQ,CAAC6K,aAAa,EAAErL,KAAK,CAAC6G,OAAO,CAAC,IAAI7G,KAAK,CAACc,UAAU,CAACwK,OAAO,KAAKtL,KAAK,CAAC4K,SAAU,EAAE;QACvH5K,KAAK,CAACc,UAAU,CAAC8C,MAAM,CAACqF,KAAK,CAAC,KAAK,CAAC;QACpCjJ,KAAK,CAACkL,sBAAsB,CAAC,IAAI,CAAC;MACtC;IACJ,CAAC,EAAE,GAAG,CAAC;IACP,OAAOlL,KAAK;EAChB;EACAuC,yBAAyB,CAACrF,SAAS,CAACiL,MAAM,GAAG,UAAUhI,SAAS,EAAE;IAC9D,IAAIH,KAAK,GAAG,IAAI;IAChBJ,MAAM,CAAC1C,SAAS,CAACiL,MAAM,CAAClI,IAAI,CAAC,IAAI,EAAEE,SAAS,CAAC;IAC7C,IAAI,CAAC,IAAI,CAAC0G,OAAO,EAAE;MACf;IACJ;IACA,IAAI,IAAI,CAACvB,IAAI,EAAE;MACXhH,QAAQ,CAAC,IAAI,CAACgH,IAAI,EAAE,qBAAqB,CAAC;MAC1C,IAAI,CAACA,IAAI,CAAChF,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;MAC/C,IAAI,CAACiL,kBAAkB,CAAC,OAAO,CAAC;MAChC,IAAI,CAACC,gBAAgB,GAAG1M,MAAM,CAAC,IAAI,CAACwG,IAAI,EAAEvG,CAAC,CAAC,sDAAsD,CAAC,CAAC;MACpG,IAAI,CAACyM,gBAAgB,CAAClL,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;IAC7D;IACA,IAAI,CAACkB,SAAS,CAAC5C,qBAAqB,CAAC,IAAI,CAACiI,OAAO,EAAEtI,SAAS,CAACkN,MAAM,EAAE,UAAU/J,CAAC,EAAE;MAC9E,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;MACxC,IAAIC,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,iBAAiB,IAAID,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,YAAY,EAAE;QAClEpD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QACzB1B,KAAK,CAACmL,aAAa,CAAC,IAAI,CAAC;MAC7B;IACJ,CAAC,CAAC,CAAC;IACH,IAAI,CAAC3J,SAAS,CAAC5C,qBAAqB,CAAC,IAAI,CAACiI,OAAO,EAAEtI,SAAS,CAACkD,QAAQ,EAAE,UAAUC,CAAC,EAAE;MAChF,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;MACxC,IAAIlB,QAAQ,CAAC6K,aAAa,KAAKrL,KAAK,CAACsF,IAAI,EAAE;QACvC,IAAI3D,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,iBAAiB,IAAID,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,YAAY,EAAE;UAClEpD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QAC7B;MACJ;IACJ,CAAC,CAAC,CAAC;IACH,IAAI,CAACF,SAAS,CAAC5C,qBAAqB,CAAC,IAAI,CAACiI,OAAO,EAAEtI,SAAS,CAACgF,UAAU,EAAE,UAAU7B,CAAC,EAAE;MAClF,IAAI,CAAC1B,KAAK,CAAC8K,SAAS,EAAE;QAClB9K,KAAK,CAAC8K,SAAS,GAAG,IAAI;QACtB9K,KAAK,CAACiL,aAAa,CAACxC,QAAQ,EAAE;MAClC;IACJ,CAAC,CAAC,CAAC;IACH,IAAI,CAACjH,SAAS,CAAC5C,qBAAqB,CAAC,IAAI,CAACiI,OAAO,EAAEtI,SAAS,CAACmN,WAAW,EAAE,UAAUhK,CAAC,EAAE;MACnF1B,KAAK,CAAC8K,SAAS,GAAG,KAAK;IAC3B,CAAC,CAAC,CAAC;IACH,IAAI,CAACtJ,SAAS,CAAC5C,qBAAqB,CAAC,IAAI,CAACiI,OAAO,EAAEtI,SAAS,CAACoN,SAAS,EAAE,UAAUjK,CAAC,EAAE;MACjF,IAAI1B,KAAK,CAAC6G,OAAO,IAAI,CAACnI,UAAU,CAAC8B,QAAQ,CAAC6K,aAAa,EAAErL,KAAK,CAAC6G,OAAO,CAAC,EAAE;QACrE7G,KAAK,CAACoL,aAAa,CAAC3C,QAAQ,EAAE;MAClC;IACJ,CAAC,CAAC,CAAC;IACH,IAAI,CAACjH,SAAS,CAAC,IAAI,CAACV,UAAU,CAAC8C,MAAM,CAAC6C,QAAQ,CAAC,YAAY;MACvDzG,KAAK,CAACc,UAAU,CAAC8C,MAAM,CAACqF,KAAK,CAAC,KAAK,CAAC;MACpCjJ,KAAK,CAACkL,sBAAsB,CAAC,KAAK,CAAC;IACvC,CAAC,CAAC,CAAC;EACP,CAAC;EACD3I,yBAAyB,CAACrF,SAAS,CAACuF,OAAO,GAAG,UAAUf,CAAC,EAAE;IACvD;IACAlD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;IACzB,IAAI,CAACwJ,sBAAsB,CAAC,KAAK,CAAC;IAClC,IAAI,CAACC,aAAa,CAAC,IAAI,CAAC;EAC5B,CAAC;EACD5I,yBAAyB,CAACrF,SAAS,CAACgO,sBAAsB,GAAG,UAAUU,KAAK,EAAE;IAC1E,IAAI,IAAI,CAAC9K,UAAU,CAACwK,OAAO,KAAKM,KAAK,IAAK,IAAI,CAAC9K,UAAU,CAACwK,OAAO,KAAK,IAAI,CAACV,SAAU,CAAC,EAAE;MACpF,IAAI,CAAC9J,UAAU,CAACwK,OAAO,CAACO,OAAO,EAAE;MACjC,IAAI,CAAC/K,UAAU,CAACwK,OAAO,GAAGlI,SAAS;MACnC,IAAI,CAACmI,kBAAkB,CAAC,OAAO,CAAC;MAChC,IAAI,IAAI,CAACO,gBAAgB,EAAE;QACvB,IAAI,CAACjB,kBAAkB,CAACkB,KAAK,EAAE;QAC/B,IAAI,CAACD,gBAAgB,GAAG1I,SAAS;MACrC;IACJ;EACJ,CAAC;EACDb,yBAAyB,CAACrF,SAAS,CAACiO,aAAa,GAAG,UAAUa,eAAe,EAAE;IAC3E,IAAIhM,KAAK,GAAG,IAAI;IAChB,IAAIgM,eAAe,KAAK,KAAK,CAAC,EAAE;MAAEA,eAAe,GAAG,IAAI;IAAE;IAC1D,IAAI,CAAC,IAAI,CAACnF,OAAO,EAAE;MACf;IACJ;IACA,IAAI,CAAC,IAAI,CAAC/F,UAAU,CAACwK,OAAO,EAAE;MAC1B,IAAI,CAACC,kBAAkB,CAAC,MAAM,CAAC;MAC/B,IAAI,CAACO,gBAAgB,GAAGhN,MAAM,CAAC,IAAI,CAAC+H,OAAO,EAAE9H,CAAC,CAAC,oBAAoB,CAAC,CAAC;MACrEC,UAAU,CAAC,IAAI,CAAC8M,gBAAgB,EAAE,2BAA2B,EAAE,cAAc,CAAC;MAC9E;MACA;MACA,IAAIG,cAAc,GAAGC,gBAAgB,CAAC,IAAI,CAACpL,UAAU,CAAC8C,MAAM,CAACX,OAAO,CAAC;MACrE,IAAIkJ,UAAU,GAAGC,UAAU,CAACH,cAAc,CAACE,UAAU,IAAI,GAAG,CAAC,IAAI,CAAC;MAClE,IAAI,CAACL,gBAAgB,CAACvH,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC6B,OAAO,CAACwF,SAAS,GAAG,IAAI,CAACvL,UAAU,CAAC8C,MAAM,CAAC0I,YAAY,GAAGH,UAAU,GAAG,IAAI;MAClH,IAAI,CAACrL,UAAU,CAACwK,OAAO,GAAG,IAAIpL,IAAI,CAAC,IAAI,CAAC4L,gBAAgB,EAAE,IAAI,CAACpB,cAAc,EAAE,IAAI,CAACC,cAAc,CAAC;MACnG,IAAI,IAAI,CAACP,SAAS,EAAE;QAChB,IAAI,CAACtJ,UAAU,CAACwK,OAAO,CAAC/G,KAAK,CAAC,IAAI,CAAC6F,SAAS,CAAC;MACjD;MACA,IAAImC,YAAY,GAAG,IAAI,CAAC1F,OAAO,CAAC9B,qBAAqB,EAAE;MACvD,IAAIyH,iBAAiB,GAAG,IAAI,CAACV,gBAAgB,CAAC/G,qBAAqB,EAAE;MACrE,IAAI,IAAI,CAACgG,eAAe,KAAKrL,SAAS,CAACsL,KAAK,EAAE;QAC1C,IAAInG,MAAM,CAAC4H,UAAU,IAAIF,YAAY,CAACG,KAAK,GAAGF,iBAAiB,CAACG,KAAK,EAAE;UACnE,IAAI,CAACb,gBAAgB,CAACvH,KAAK,CAACqI,IAAI,GAAG,MAAM;UACzC,IAAI,CAACd,gBAAgB,CAACvH,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC6B,OAAO,CAACwF,SAAS,GAAG,IAAI,CAACvL,UAAU,CAAC8C,MAAM,CAAC0I,YAAY,GAAGC,YAAY,CAACM,MAAM,GAAG,IAAI;QAC/H,CAAC,MACI;UACD,IAAI,CAACf,gBAAgB,CAACvH,KAAK,CAACqI,IAAI,GAAG,IAAI,CAAC/F,OAAO,CAACiG,WAAW,GAAG,IAAI;UAClE,IAAI,CAAChB,gBAAgB,CAACvH,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC6B,OAAO,CAACwF,SAAS,GAAG,IAAI,CAACvL,UAAU,CAAC8C,MAAM,CAAC0I,YAAY,GAAGH,UAAU,GAAG,IAAI;QACtH;MACJ,CAAC,MACI,IAAI,IAAI,CAACpB,eAAe,KAAKrL,SAAS,CAACqN,IAAI,EAAE;QAC9C,IAAI,CAACjB,gBAAgB,CAACvH,KAAK,CAACmI,KAAK,GAAG,IAAI,CAAC7F,OAAO,CAACiG,WAAW,GAAG,IAAI;QACnE,IAAI,CAAChB,gBAAgB,CAACvH,KAAK,CAACqI,IAAI,GAAG,MAAM;QACzC,IAAI,CAACd,gBAAgB,CAACvH,KAAK,CAACS,GAAG,GAAG,IAAI,CAAC6B,OAAO,CAACwF,SAAS,GAAG,IAAI,CAACvL,UAAU,CAAC8C,MAAM,CAAC0I,YAAY,GAAGH,UAAU,GAAG,IAAI;MACtH;MACA,IAAI,CAACtB,kBAAkB,CAAC9I,GAAG,CAACnD,qBAAqB,CAAC,IAAI,CAACkN,gBAAgB,EAAEvN,SAAS,CAACkN,MAAM,EAAE,UAAU/J,CAAC,EAAE;QACpG,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;QACxC,IAAIC,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE;UAClCpD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;UACzB1B,KAAK,CAACc,UAAU,CAAC8C,MAAM,CAACqF,KAAK,EAAE;UAC/BjJ,KAAK,CAACkL,sBAAsB,CAAC,IAAI,CAAC;QACtC;MACJ,CAAC,CAAC,CAAC;MACH,IAAI,CAACL,kBAAkB,CAAC9I,GAAG,CAACnD,qBAAqB,CAAC,IAAI,CAACkN,gBAAgB,EAAEvN,SAAS,CAACkD,QAAQ,EAAE,UAAUC,CAAC,EAAE;QACtG,IAAIC,KAAK,GAAG,IAAIzC,qBAAqB,CAACwC,CAAC,CAAC;QACxC,IAAIC,KAAK,CAACC,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE;UAClCpD,WAAW,CAAC4D,IAAI,CAACV,CAAC,EAAE,IAAI,CAAC;QAC7B;MACJ,CAAC,CAAC,CAAC;MACH,IAAI,CAACmJ,kBAAkB,CAAC9I,GAAG,CAAC,IAAI,CAACjB,UAAU,CAACwK,OAAO,CAAC0B,WAAW,CAAC,YAAY;QACxEhN,KAAK,CAACc,UAAU,CAAC8C,MAAM,CAACqF,KAAK,EAAE;QAC/BjJ,KAAK,CAACkL,sBAAsB,CAAC,IAAI,CAAC;MACtC,CAAC,CAAC,CAAC;MACH,IAAI,CAACpK,UAAU,CAACwK,OAAO,CAACrC,KAAK,CAAC+C,eAAe,CAAC;MAC9C,IAAI,CAACpB,SAAS,GAAG,IAAI,CAAC9J,UAAU,CAACwK,OAAO;IAC5C,CAAC,MACI;MACD,IAAI,CAACxK,UAAU,CAACwK,OAAO,CAACrC,KAAK,CAAC,KAAK,CAAC;IACxC;EACJ,CAAC;EACD1G,yBAAyB,CAACrF,SAAS,CAACqO,kBAAkB,GAAG,UAAU0B,KAAK,EAAE;IACtE,IAAIC,EAAE;IACN,IAAI,IAAI,CAAC5H,IAAI,EAAE;MACX,CAAC4H,EAAE,GAAG,IAAI,CAAC5H,IAAI,MAAM,IAAI,IAAI4H,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC5M,YAAY,CAAC,eAAe,EAAE2M,KAAK,CAAC;IACjG;EACJ,CAAC;EACD1K,yBAAyB,CAACrF,SAAS,CAAC8L,UAAU,GAAG,YAAY;IACzDpJ,MAAM,CAAC1C,SAAS,CAAC8L,UAAU,CAAC/I,IAAI,CAAC,IAAI,CAAC;IACtC,IAAI,CAAC,IAAI,CAACmK,SAAS,EAAE;MACjB;IACJ;IACA,IAAIC,UAAU,GAAG,IAAI,CAACxD,OAAO,IAAIlI,QAAQ,CAAC,IAAI,CAACkI,OAAO,EAAE,SAAS,CAAC;IAClE,IAAIhB,OAAO,GAAGwE,UAAU,IAAI,IAAI,CAACD,SAAS,CAACE,wBAAwB,GAAG,IAAI,CAACF,SAAS,CAACE,wBAAwB,GAAG,IAAI,CAACF,SAAS,CAACtE,eAAe;IAC9I,IAAI,IAAI,CAAC0F,gBAAgB,EAAE;MACvB,IAAI,CAACA,gBAAgB,CAACjH,KAAK,CAAC8B,KAAK,GAAGR,OAAO,GAAG,EAAE,GAAGA,OAAO,GAAG,EAAE;IACnE;IACA,IAAI,IAAI,CAAC/E,UAAU,CAACwK,OAAO,EAAE;MACzB,IAAI,CAACxK,UAAU,CAACwK,OAAO,CAAC/G,KAAK,CAAC,IAAI,CAAC6F,SAAS,CAAC;IACjD;EACJ,CAAC;EACD7H,yBAAyB,CAACrF,SAAS,CAAC2O,OAAO,GAAG,YAAY;IACtDjM,MAAM,CAAC1C,SAAS,CAAC2O,OAAO,CAAC5L,IAAI,CAAC,IAAI,CAAC;IACnC,IAAI,CAACmL,aAAa,CAACS,OAAO,EAAE;IAC5B,IAAI,IAAI,CAACjB,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAACiB,OAAO,EAAE;MACxB,IAAI,CAACjB,SAAS,GAAG,IAAI;IACzB;IACA,IAAI,IAAI,CAACkB,gBAAgB,EAAE;MACvB,IAAI,CAACA,gBAAgB,GAAG1I,SAAS;IACrC;EACJ,CAAC;EACD,OAAOb,yBAAyB;AACpC,CAAC,CAACgE,sBAAsB,CAAE;AAC1B,IAAIhB,2BAA2B,GAAG,aAAe,UAAU3F,MAAM,EAAE;EAC/DtD,SAAS,CAACiJ,2BAA2B,EAAE3F,MAAM,CAAC;EAC9C,SAAS2F,2BAA2B,GAAG;IACnC,OAAO3F,MAAM,KAAK,IAAI,IAAIA,MAAM,CAACuN,KAAK,CAAC,IAAI,EAAE3P,SAAS,CAAC,IAAI,IAAI;EACnE;EACA+H,2BAA2B,CAACrI,SAAS,CAACqH,KAAK,GAAG,UAAUA,KAAK,EAAE;IAC3D,IAAI,IAAI,CAAC1E,KAAK,EAAE;MACZ,IAAI,CAACA,KAAK,CAAC0E,KAAK,CAAC6I,iBAAiB,GAAG7I,KAAK,CAAC8I,cAAc,GAAG,EAAE,GAAG9I,KAAK,CAAC8I,cAAc,GAAG,EAAE;IAC9F;EACJ,CAAC;EACD,OAAO9H,2BAA2B;AACtC,CAAC,CAACnH,cAAc,CAAE;AAClB,OAAO,SAASiL,aAAa,CAACxJ,KAAK,EAAE;EACjC,IAAIyN,KAAK,GAAG9N,mBAAmB;EAC/B,IAAIuI,OAAO,GAAGuF,KAAK,CAACtF,IAAI,CAACnI,KAAK,CAAC;EAC/B,IAAI,CAACkI,OAAO,EAAE;IACV,OAAOlI,KAAK;EAChB;EACA,IAAI0N,cAAc,GAAG,CAACxF,OAAO,CAAC,CAAC,CAAC;EAChC,OAAOlI,KAAK,CAACyJ,OAAO,CAACgE,KAAK,EAAEC,cAAc,GAAG,MAAM,GAAG,EAAE,CAAC,CAAC3D,IAAI,EAAE;AACpE"},"metadata":{},"sourceType":"module"}