{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport './media/tree.css';\nimport { dispose, Disposable, toDisposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { List, MouseController, DefaultKeyboardNavigationDelegate } from '../list/listWidget.js';\nimport { append, $, toggleClass, getDomNodePagePosition, removeClass, addClass, hasClass, createStyleSheet, clearNode, addClasses, removeClasses } from '../../dom.js';\nimport { Event, Relay, Emitter, EventBufferer } from '../../../common/event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StaticDND, DragAndDropData } from '../../dnd.js';\nimport { range, equals, distinctES6, fromSet } from '../../../common/arrays.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { domEvent } from '../../event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { localize } from '../../../../nls.js';\nimport { disposableTimeout } from '../../../common/async.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport { values } from '../../../common/map.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { SetMap } from '../../../common/collections.js';\nvar TreeElementsDragAndDropData = /** @class */function (_super) {\n  __extends(TreeElementsDragAndDropData, _super);\n  function TreeElementsDragAndDropData(data) {\n    var _this = _super.call(this, data.elements.map(function (node) {\n      return node.element;\n    })) || this;\n    _this.data = data;\n    return _this;\n  }\n  return TreeElementsDragAndDropData;\n}(ElementsDragAndDropData);\nfunction asTreeDragAndDropData(data) {\n  if (data instanceof ElementsDragAndDropData) {\n    return new TreeElementsDragAndDropData(data);\n  }\n  return data;\n}\nvar TreeNodeListDragAndDrop = /** @class */function () {\n  function TreeNodeListDragAndDrop(modelProvider, dnd) {\n    this.modelProvider = modelProvider;\n    this.dnd = dnd;\n    this.autoExpandDisposable = Disposable.None;\n  }\n  TreeNodeListDragAndDrop.prototype.getDragURI = function (node) {\n    return this.dnd.getDragURI(node.element);\n  };\n  TreeNodeListDragAndDrop.prototype.getDragLabel = function (nodes, originalEvent) {\n    if (this.dnd.getDragLabel) {\n      return this.dnd.getDragLabel(nodes.map(function (node) {\n        return node.element;\n      }), originalEvent);\n    }\n    return undefined;\n  };\n  TreeNodeListDragAndDrop.prototype.onDragStart = function (data, originalEvent) {\n    if (this.dnd.onDragStart) {\n      this.dnd.onDragStart(asTreeDragAndDropData(data), originalEvent);\n    }\n  };\n  TreeNodeListDragAndDrop.prototype.onDragOver = function (data, targetNode, targetIndex, originalEvent, raw) {\n    var _this = this;\n    if (raw === void 0) {\n      raw = true;\n    }\n    var result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    var didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n    if (didChangeAutoExpandNode) {\n      this.autoExpandDisposable.dispose();\n      this.autoExpandNode = targetNode;\n    }\n    if (typeof targetNode === 'undefined') {\n      return result;\n    }\n    if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n      this.autoExpandDisposable = disposableTimeout(function () {\n        var model = _this.modelProvider();\n        var ref = model.getNodeLocation(targetNode);\n        if (model.isCollapsed(ref)) {\n          model.setCollapsed(ref, false);\n        }\n        _this.autoExpandNode = undefined;\n      }, 500);\n    }\n    if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n      if (!raw) {\n        var accept = typeof result === 'boolean' ? result : result.accept;\n        var effect = typeof result === 'boolean' ? undefined : result.effect;\n        return {\n          accept: accept,\n          effect: effect,\n          feedback: [targetIndex]\n        };\n      }\n      return result;\n    }\n    if (result.bubble === 1 /* Up */) {\n      var model_1 = this.modelProvider();\n      var ref_1 = model_1.getNodeLocation(targetNode);\n      var parentRef = model_1.getParentNodeLocation(ref_1);\n      var parentNode = model_1.getNode(parentRef);\n      var parentIndex = parentRef && model_1.getListIndex(parentRef);\n      return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n    }\n    var model = this.modelProvider();\n    var ref = model.getNodeLocation(targetNode);\n    var start = model.getListIndex(ref);\n    var length = model.getListRenderCount(ref);\n    return __assign(__assign({}, result), {\n      feedback: range(start, start + length)\n    });\n  };\n  TreeNodeListDragAndDrop.prototype.drop = function (data, targetNode, targetIndex, originalEvent) {\n    this.autoExpandDisposable.dispose();\n    this.autoExpandNode = undefined;\n    this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n  };\n  TreeNodeListDragAndDrop.prototype.onDragEnd = function (originalEvent) {\n    if (this.dnd.onDragEnd) {\n      this.dnd.onDragEnd(originalEvent);\n    }\n  };\n  return TreeNodeListDragAndDrop;\n}();\nfunction asListOptions(modelProvider, options) {\n  return options && __assign(__assign({}, options), {\n    identityProvider: options.identityProvider && {\n      getId: function getId(el) {\n        return options.identityProvider.getId(el.element);\n      }\n    },\n    dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd),\n    multipleSelectionController: options.multipleSelectionController && {\n      isSelectionSingleChangeEvent: function isSelectionSingleChangeEvent(e) {\n        return options.multipleSelectionController.isSelectionSingleChangeEvent(__assign(__assign({}, e), {\n          element: e.element\n        }));\n      },\n      isSelectionRangeChangeEvent: function isSelectionRangeChangeEvent(e) {\n        return options.multipleSelectionController.isSelectionRangeChangeEvent(__assign(__assign({}, e), {\n          element: e.element\n        }));\n      }\n    },\n    accessibilityProvider: options.accessibilityProvider && __assign(__assign({}, options.accessibilityProvider), {\n      getAriaLabel: function getAriaLabel(e) {\n        return options.accessibilityProvider.getAriaLabel(e.element);\n      },\n      getAriaLevel: function getAriaLevel(node) {\n        return node.depth;\n      },\n      getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && function (node) {\n        return options.accessibilityProvider.getActiveDescendantId(node.element);\n      }\n    }),\n    keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && __assign(__assign({}, options.keyboardNavigationLabelProvider), {\n      getKeyboardNavigationLabel: function getKeyboardNavigationLabel(node) {\n        return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n      }\n    }),\n    enableKeyboardNavigation: options.simpleKeyboardNavigation,\n    ariaProvider: {\n      getSetSize: function getSetSize(node) {\n        var model = modelProvider();\n        var ref = model.getNodeLocation(node);\n        var parentRef = model.getParentNodeLocation(ref);\n        var parentNode = model.getNode(parentRef);\n        return parentNode.visibleChildrenCount;\n      },\n      getPosInSet: function getPosInSet(node) {\n        return node.visibleChildIndex + 1;\n      },\n      isChecked: options.ariaProvider && options.ariaProvider.isChecked ? function (node) {\n        return options.ariaProvider.isChecked(node.element);\n      } : undefined,\n      getRole: options.ariaProvider && options.ariaProvider.getRole ? function (node) {\n        return options.ariaProvider.getRole(node.element);\n      } : undefined\n    }\n  });\n}\nvar ComposedTreeDelegate = /** @class */function () {\n  function ComposedTreeDelegate(delegate) {\n    this.delegate = delegate;\n  }\n  ComposedTreeDelegate.prototype.getHeight = function (element) {\n    return this.delegate.getHeight(element.element);\n  };\n  ComposedTreeDelegate.prototype.getTemplateId = function (element) {\n    return this.delegate.getTemplateId(element.element);\n  };\n  ComposedTreeDelegate.prototype.hasDynamicHeight = function (element) {\n    return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n  };\n  ComposedTreeDelegate.prototype.setDynamicHeight = function (element, height) {\n    if (this.delegate.setDynamicHeight) {\n      this.delegate.setDynamicHeight(element.element, height);\n    }\n  };\n  return ComposedTreeDelegate;\n}();\nexport { ComposedTreeDelegate };\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n  RenderIndentGuides[\"None\"] = \"none\";\n  RenderIndentGuides[\"OnHover\"] = \"onHover\";\n  RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nvar EventCollection = /** @class */function () {\n  function EventCollection(onDidChange, _elements) {\n    var _this = this;\n    if (_elements === void 0) {\n      _elements = [];\n    }\n    this._elements = _elements;\n    this.onDidChange = Event.forEach(onDidChange, function (elements) {\n      return _this._elements = elements;\n    });\n  }\n  Object.defineProperty(EventCollection.prototype, \"elements\", {\n    get: function get() {\n      return this._elements;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return EventCollection;\n}();\nvar TreeRenderer = /** @class */function () {\n  function TreeRenderer(renderer, modelProvider, onDidChangeCollapseState, activeNodes, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.renderer = renderer;\n    this.modelProvider = modelProvider;\n    this.activeNodes = activeNodes;\n    this.renderedElements = new Map();\n    this.renderedNodes = new Map();\n    this.indent = TreeRenderer.DefaultIndent;\n    this.hideTwistiesOfChildlessElements = false;\n    this.shouldRenderIndentGuides = false;\n    this.renderedIndentGuides = new SetMap();\n    this.activeIndentNodes = new Set();\n    this.indentGuidesDisposable = Disposable.None;\n    this.disposables = new DisposableStore();\n    this.templateId = renderer.templateId;\n    this.updateOptions(options);\n    Event.map(onDidChangeCollapseState, function (e) {\n      return e.node;\n    })(this.onDidChangeNodeTwistieState, this, this.disposables);\n    if (renderer.onDidChangeTwistieState) {\n      renderer.onDidChangeTwistieState(this.onDidChangeTwistieState, this, this.disposables);\n    }\n  }\n  TreeRenderer.prototype.updateOptions = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (typeof options.indent !== 'undefined') {\n      this.indent = clamp(options.indent, 0, 40);\n    }\n    if (typeof options.renderIndentGuides !== 'undefined') {\n      var shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n      if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n        this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n        this.indentGuidesDisposable.dispose();\n        if (shouldRenderIndentGuides) {\n          var disposables = new DisposableStore();\n          this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n          this.indentGuidesDisposable = disposables;\n          this._onDidChangeActiveNodes(this.activeNodes.elements);\n        }\n      }\n    }\n    if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n      this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n    }\n  };\n  TreeRenderer.prototype.renderTemplate = function (container) {\n    var el = append(container, $('.monaco-tl-row'));\n    var indent = append(el, $('.monaco-tl-indent'));\n    var twistie = append(el, $('.monaco-tl-twistie'));\n    var contents = append(el, $('.monaco-tl-contents'));\n    var templateData = this.renderer.renderTemplate(contents);\n    return {\n      container: container,\n      indent: indent,\n      twistie: twistie,\n      indentGuidesDisposable: Disposable.None,\n      templateData: templateData\n    };\n  };\n  TreeRenderer.prototype.renderElement = function (node, index, templateData, height) {\n    if (typeof height === 'number') {\n      this.renderedNodes.set(node, {\n        templateData: templateData,\n        height: height\n      });\n      this.renderedElements.set(node.element, node);\n    }\n    var indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n    templateData.twistie.style.paddingLeft = indent + \"px\";\n    templateData.indent.style.width = indent + this.indent - 16 + \"px\";\n    this.renderTwistie(node, templateData);\n    if (typeof height === 'number') {\n      this.renderIndentGuides(node, templateData);\n    }\n    this.renderer.renderElement(node, index, templateData.templateData, height);\n  };\n  TreeRenderer.prototype.disposeElement = function (node, index, templateData, height) {\n    templateData.indentGuidesDisposable.dispose();\n    if (this.renderer.disposeElement) {\n      this.renderer.disposeElement(node, index, templateData.templateData, height);\n    }\n    if (typeof height === 'number') {\n      this.renderedNodes.delete(node);\n      this.renderedElements.delete(node.element);\n    }\n  };\n  TreeRenderer.prototype.disposeTemplate = function (templateData) {\n    this.renderer.disposeTemplate(templateData.templateData);\n  };\n  TreeRenderer.prototype.onDidChangeTwistieState = function (element) {\n    var node = this.renderedElements.get(element);\n    if (!node) {\n      return;\n    }\n    this.onDidChangeNodeTwistieState(node);\n  };\n  TreeRenderer.prototype.onDidChangeNodeTwistieState = function (node) {\n    var data = this.renderedNodes.get(node);\n    if (!data) {\n      return;\n    }\n    this.renderTwistie(node, data.templateData);\n    this._onDidChangeActiveNodes(this.activeNodes.elements);\n    this.renderIndentGuides(node, data.templateData);\n  };\n  TreeRenderer.prototype.renderTwistie = function (node, templateData) {\n    if (this.renderer.renderTwistie) {\n      this.renderer.renderTwistie(node.element, templateData.twistie);\n    }\n    if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n      addClasses(templateData.twistie, 'codicon', 'codicon-chevron-down', 'collapsible');\n      toggleClass(templateData.twistie, 'collapsed', node.collapsed);\n    } else {\n      removeClasses(templateData.twistie, 'codicon', 'codicon-chevron-down', 'collapsible', 'collapsed');\n    }\n    if (node.collapsible) {\n      templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n    } else {\n      templateData.container.removeAttribute('aria-expanded');\n    }\n  };\n  TreeRenderer.prototype.renderIndentGuides = function (target, templateData) {\n    var _this = this;\n    clearNode(templateData.indent);\n    templateData.indentGuidesDisposable.dispose();\n    if (!this.shouldRenderIndentGuides) {\n      return;\n    }\n    var disposableStore = new DisposableStore();\n    var model = this.modelProvider();\n    var node = target;\n    var _loop_1 = function _loop_1() {\n      var ref = model.getNodeLocation(node);\n      var parentRef = model.getParentNodeLocation(ref);\n      if (!parentRef) {\n        return \"break\";\n      }\n      var parent_1 = model.getNode(parentRef);\n      var guide = $('.indent-guide', {\n        style: \"width: \" + this_1.indent + \"px\"\n      });\n      if (this_1.activeIndentNodes.has(parent_1)) {\n        addClass(guide, 'active');\n      }\n      if (templateData.indent.childElementCount === 0) {\n        templateData.indent.appendChild(guide);\n      } else {\n        templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n      }\n      this_1.renderedIndentGuides.add(parent_1, guide);\n      disposableStore.add(toDisposable(function () {\n        return _this.renderedIndentGuides.delete(parent_1, guide);\n      }));\n      node = parent_1;\n    };\n    var this_1 = this;\n    while (true) {\n      var state_1 = _loop_1();\n      if (state_1 === \"break\") break;\n    }\n    templateData.indentGuidesDisposable = disposableStore;\n  };\n  TreeRenderer.prototype._onDidChangeActiveNodes = function (nodes) {\n    var _this = this;\n    if (!this.shouldRenderIndentGuides) {\n      return;\n    }\n    var set = new Set();\n    var model = this.modelProvider();\n    nodes.forEach(function (node) {\n      var ref = model.getNodeLocation(node);\n      try {\n        var parentRef = model.getParentNodeLocation(ref);\n        if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n          set.add(node);\n        } else if (parentRef) {\n          set.add(model.getNode(parentRef));\n        }\n      } catch (_a) {\n        // noop\n      }\n    });\n    this.activeIndentNodes.forEach(function (node) {\n      if (!set.has(node)) {\n        _this.renderedIndentGuides.forEach(node, function (line) {\n          return removeClass(line, 'active');\n        });\n      }\n    });\n    set.forEach(function (node) {\n      if (!_this.activeIndentNodes.has(node)) {\n        _this.renderedIndentGuides.forEach(node, function (line) {\n          return addClass(line, 'active');\n        });\n      }\n    });\n    this.activeIndentNodes = set;\n  };\n  TreeRenderer.prototype.dispose = function () {\n    this.renderedNodes.clear();\n    this.renderedElements.clear();\n    this.indentGuidesDisposable.dispose();\n    dispose(this.disposables);\n  };\n  TreeRenderer.DefaultIndent = 8;\n  return TreeRenderer;\n}();\nvar TypeFilter = /** @class */function () {\n  function TypeFilter(tree, keyboardNavigationLabelProvider, _filter) {\n    this.tree = tree;\n    this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n    this._filter = _filter;\n    this._totalCount = 0;\n    this._matchCount = 0;\n    this._pattern = '';\n    this._lowercasePattern = '';\n    this.disposables = new DisposableStore();\n    tree.onWillRefilter(this.reset, this, this.disposables);\n  }\n  Object.defineProperty(TypeFilter.prototype, \"totalCount\", {\n    get: function get() {\n      return this._totalCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TypeFilter.prototype, \"matchCount\", {\n    get: function get() {\n      return this._matchCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TypeFilter.prototype, \"pattern\", {\n    set: function set(pattern) {\n      this._pattern = pattern;\n      this._lowercasePattern = pattern.toLowerCase();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TypeFilter.prototype.filter = function (element, parentVisibility) {\n    if (this._filter) {\n      var result = this._filter.filter(element, parentVisibility);\n      if (this.tree.options.simpleKeyboardNavigation) {\n        return result;\n      }\n      var visibility = void 0;\n      if (typeof result === 'boolean') {\n        visibility = result ? 1 /* Visible */ : 0 /* Hidden */;\n      } else if (isFilterResult(result)) {\n        visibility = getVisibleState(result.visibility);\n      } else {\n        visibility = result;\n      }\n      if (visibility === 0 /* Hidden */) {\n        return false;\n      }\n    }\n    this._totalCount++;\n    if (this.tree.options.simpleKeyboardNavigation || !this._pattern) {\n      this._matchCount++;\n      return {\n        data: FuzzyScore.Default,\n        visibility: true\n      };\n    }\n    var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n    var labelStr = label && label.toString();\n    if (typeof labelStr === 'undefined') {\n      return {\n        data: FuzzyScore.Default,\n        visibility: true\n      };\n    }\n    var score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, true);\n    if (!score) {\n      if (this.tree.options.filterOnType) {\n        return 2 /* Recurse */;\n      } else {\n        return {\n          data: FuzzyScore.Default,\n          visibility: true\n        };\n      }\n      // DEMO: smarter filter ?\n      // return parentVisibility === TreeVisibility.Visible ? true : TreeVisibility.Recurse;\n    }\n\n    this._matchCount++;\n    return {\n      data: score,\n      visibility: true\n    };\n  };\n  TypeFilter.prototype.reset = function () {\n    this._totalCount = 0;\n    this._matchCount = 0;\n  };\n  TypeFilter.prototype.dispose = function () {\n    dispose(this.disposables);\n  };\n  return TypeFilter;\n}();\nvar TypeFilterController = /** @class */function () {\n  function TypeFilterController(tree, model, view, filter, keyboardNavigationDelegate) {\n    this.tree = tree;\n    this.view = view;\n    this.filter = filter;\n    this.keyboardNavigationDelegate = keyboardNavigationDelegate;\n    this._enabled = false;\n    this._pattern = '';\n    this._empty = false;\n    this._onDidChangeEmptyState = new Emitter();\n    this.positionClassName = 'ne';\n    this.automaticKeyboardNavigation = true;\n    this.triggered = false;\n    this._onDidChangePattern = new Emitter();\n    this.enabledDisposables = new DisposableStore();\n    this.disposables = new DisposableStore();\n    this.domNode = $(\".monaco-list-type-filter.\" + this.positionClassName);\n    this.domNode.draggable = true;\n    domEvent(this.domNode, 'dragstart')(this.onDragStart, this, this.disposables);\n    this.messageDomNode = append(view.getHTMLElement(), $(\".monaco-list-type-filter-message\"));\n    this.labelDomNode = append(this.domNode, $('span.label'));\n    var controls = append(this.domNode, $('.controls'));\n    this._filterOnType = !!tree.options.filterOnType;\n    this.filterOnTypeDomNode = append(controls, $('input.filter.codicon.codicon-list-selection'));\n    this.filterOnTypeDomNode.type = 'checkbox';\n    this.filterOnTypeDomNode.checked = this._filterOnType;\n    this.filterOnTypeDomNode.tabIndex = -1;\n    this.updateFilterOnTypeTitle();\n    domEvent(this.filterOnTypeDomNode, 'input')(this.onDidChangeFilterOnType, this, this.disposables);\n    this.clearDomNode = append(controls, $('button.clear.codicon.codicon-close'));\n    this.clearDomNode.tabIndex = -1;\n    this.clearDomNode.title = localize('clear', \"Clear\");\n    this.keyboardNavigationEventFilter = tree.options.keyboardNavigationEventFilter;\n    model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    this.updateOptions(tree.options);\n  }\n  Object.defineProperty(TypeFilterController.prototype, \"enabled\", {\n    get: function get() {\n      return this._enabled;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TypeFilterController.prototype, \"pattern\", {\n    get: function get() {\n      return this._pattern;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TypeFilterController.prototype, \"filterOnType\", {\n    get: function get() {\n      return this._filterOnType;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TypeFilterController.prototype.updateOptions = function (options) {\n    if (options.simpleKeyboardNavigation) {\n      this.disable();\n    } else {\n      this.enable();\n    }\n    if (typeof options.filterOnType !== 'undefined') {\n      this._filterOnType = !!options.filterOnType;\n      this.filterOnTypeDomNode.checked = this._filterOnType;\n    }\n    if (typeof options.automaticKeyboardNavigation !== 'undefined') {\n      this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\n    }\n    this.tree.refilter();\n    this.render();\n    if (!this.automaticKeyboardNavigation) {\n      this.onEventOrInput('');\n    }\n  };\n  TypeFilterController.prototype.enable = function () {\n    var _this = this;\n    if (this._enabled) {\n      return;\n    }\n    var onKeyDown = Event.chain(domEvent(this.view.getHTMLElement(), 'keydown')).filter(function (e) {\n      return !isInputElement(e.target) || e.target === _this.filterOnTypeDomNode;\n    }).filter(function (e) {\n      return e.key !== 'Dead' && !/^Media/.test(e.key);\n    }).map(function (e) {\n      return new StandardKeyboardEvent(e);\n    }).filter(this.keyboardNavigationEventFilter || function () {\n      return true;\n    }).filter(function () {\n      return _this.automaticKeyboardNavigation || _this.triggered;\n    }).filter(function (e) {\n      return _this.keyboardNavigationDelegate.mightProducePrintableCharacter(e) || (_this.pattern.length > 0 || _this.triggered) && (e.keyCode === 9 /* Escape */ || e.keyCode === 1 /* Backspace */) && !e.altKey && !e.ctrlKey && !e.metaKey || e.keyCode === 1 /* Backspace */ && (isMacintosh ? e.altKey && !e.metaKey : e.ctrlKey) && !e.shiftKey;\n    }).forEach(function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n    }).event;\n    var onClear = domEvent(this.clearDomNode, 'click');\n    Event.chain(Event.any(onKeyDown, onClear)).event(this.onEventOrInput, this, this.enabledDisposables);\n    this.filter.pattern = '';\n    this.tree.refilter();\n    this.render();\n    this._enabled = true;\n    this.triggered = false;\n  };\n  TypeFilterController.prototype.disable = function () {\n    if (!this._enabled) {\n      return;\n    }\n    this.domNode.remove();\n    this.enabledDisposables.clear();\n    this.tree.refilter();\n    this.render();\n    this._enabled = false;\n    this.triggered = false;\n  };\n  TypeFilterController.prototype.onEventOrInput = function (e) {\n    if (typeof e === 'string') {\n      this.onInput(e);\n    } else if (e instanceof MouseEvent || e.keyCode === 9 /* Escape */ || e.keyCode === 1 /* Backspace */ && (isMacintosh ? e.altKey : e.ctrlKey)) {\n      this.onInput('');\n    } else if (e.keyCode === 1 /* Backspace */) {\n      this.onInput(this.pattern.length === 0 ? '' : this.pattern.substr(0, this.pattern.length - 1));\n    } else {\n      this.onInput(this.pattern + e.browserEvent.key);\n    }\n  };\n  TypeFilterController.prototype.onInput = function (pattern) {\n    var container = this.view.getHTMLElement();\n    if (pattern && !this.domNode.parentElement) {\n      container.append(this.domNode);\n    } else if (!pattern && this.domNode.parentElement) {\n      this.domNode.remove();\n      this.tree.domFocus();\n    }\n    this._pattern = pattern;\n    this._onDidChangePattern.fire(pattern);\n    this.filter.pattern = pattern;\n    this.tree.refilter();\n    if (pattern) {\n      this.tree.focusNext(0, true, undefined, function (node) {\n        return !FuzzyScore.isDefault(node.filterData);\n      });\n    }\n    var focus = this.tree.getFocus();\n    if (focus.length > 0) {\n      var element = focus[0];\n      if (this.tree.getRelativeTop(element) === null) {\n        this.tree.reveal(element, 0.5);\n      }\n    }\n    this.render();\n    if (!pattern) {\n      this.triggered = false;\n    }\n  };\n  TypeFilterController.prototype.onDragStart = function () {\n    var _this = this;\n    var container = this.view.getHTMLElement();\n    var left = getDomNodePagePosition(container).left;\n    var containerWidth = container.clientWidth;\n    var midContainerWidth = containerWidth / 2;\n    var width = this.domNode.clientWidth;\n    var disposables = new DisposableStore();\n    var positionClassName = this.positionClassName;\n    var updatePosition = function updatePosition() {\n      switch (positionClassName) {\n        case 'nw':\n          _this.domNode.style.top = \"4px\";\n          _this.domNode.style.left = \"4px\";\n          break;\n        case 'ne':\n          _this.domNode.style.top = \"4px\";\n          _this.domNode.style.left = containerWidth - width - 6 + \"px\";\n          break;\n      }\n    };\n    var onDragOver = function onDragOver(event) {\n      event.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n      var x = event.screenX - left;\n      if (event.dataTransfer) {\n        event.dataTransfer.dropEffect = 'none';\n      }\n      if (x < midContainerWidth) {\n        positionClassName = 'nw';\n      } else {\n        positionClassName = 'ne';\n      }\n      updatePosition();\n    };\n    var onDragEnd = function onDragEnd() {\n      _this.positionClassName = positionClassName;\n      _this.domNode.className = \"monaco-list-type-filter \" + _this.positionClassName;\n      _this.domNode.style.top = '';\n      _this.domNode.style.left = '';\n      dispose(disposables);\n    };\n    updatePosition();\n    removeClass(this.domNode, positionClassName);\n    addClass(this.domNode, 'dragging');\n    disposables.add(toDisposable(function () {\n      return removeClass(_this.domNode, 'dragging');\n    }));\n    domEvent(document, 'dragover')(onDragOver, null, disposables);\n    domEvent(this.domNode, 'dragend')(onDragEnd, null, disposables);\n    StaticDND.CurrentDragAndDropData = new DragAndDropData('vscode-ui');\n    disposables.add(toDisposable(function () {\n      return StaticDND.CurrentDragAndDropData = undefined;\n    }));\n  };\n  TypeFilterController.prototype.onDidSpliceModel = function () {\n    if (!this._enabled || this.pattern.length === 0) {\n      return;\n    }\n    this.tree.refilter();\n    this.render();\n  };\n  TypeFilterController.prototype.onDidChangeFilterOnType = function () {\n    this.tree.updateOptions({\n      filterOnType: this.filterOnTypeDomNode.checked\n    });\n    this.tree.refilter();\n    this.tree.domFocus();\n    this.render();\n    this.updateFilterOnTypeTitle();\n  };\n  TypeFilterController.prototype.updateFilterOnTypeTitle = function () {\n    if (this.filterOnType) {\n      this.filterOnTypeDomNode.title = localize('disable filter on type', \"Disable Filter on Type\");\n    } else {\n      this.filterOnTypeDomNode.title = localize('enable filter on type', \"Enable Filter on Type\");\n    }\n  };\n  TypeFilterController.prototype.render = function () {\n    var noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n    if (this.pattern && this.tree.options.filterOnType && noMatches) {\n      this.messageDomNode.textContent = localize('empty', \"No elements found\");\n      this._empty = true;\n    } else {\n      this.messageDomNode.innerHTML = '';\n      this._empty = false;\n    }\n    toggleClass(this.domNode, 'no-matches', noMatches);\n    this.domNode.title = localize('found', \"Matched {0} out of {1} elements\", this.filter.matchCount, this.filter.totalCount);\n    this.labelDomNode.textContent = this.pattern.length > 16 ? '…' + this.pattern.substr(this.pattern.length - 16) : this.pattern;\n    this._onDidChangeEmptyState.fire(this._empty);\n  };\n  TypeFilterController.prototype.shouldAllowFocus = function (node) {\n    if (!this.enabled || !this.pattern || this.filterOnType) {\n      return true;\n    }\n    if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n      return true;\n    }\n    return !FuzzyScore.isDefault(node.filterData);\n  };\n  TypeFilterController.prototype.dispose = function () {\n    if (this._enabled) {\n      this.domNode.remove();\n      this.enabledDisposables.dispose();\n      this._enabled = false;\n      this.triggered = false;\n    }\n    this._onDidChangePattern.dispose();\n    dispose(this.disposables);\n  };\n  return TypeFilterController;\n}();\nfunction isInputElement(e) {\n  return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nfunction asTreeEvent(event) {\n  return {\n    elements: event.elements.map(function (node) {\n      return node.element;\n    }),\n    browserEvent: event.browserEvent\n  };\n}\nfunction dfs(node, fn) {\n  fn(node);\n  node.children.forEach(function (child) {\n    return dfs(child, fn);\n  });\n}\n/**\r\n * The trait concept needs to exist at the tree level, because collapsed\r\n * tree nodes will not be known by the list.\r\n */\nvar Trait = /** @class */function () {\n  function Trait(identityProvider) {\n    this.identityProvider = identityProvider;\n    this.nodes = [];\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n  }\n  Object.defineProperty(Trait.prototype, \"nodeSet\", {\n    get: function get() {\n      if (!this._nodeSet) {\n        this._nodeSet = this.createNodeSet();\n      }\n      return this._nodeSet;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Trait.prototype.set = function (nodes, browserEvent) {\n    if (equals(this.nodes, nodes)) {\n      return;\n    }\n    this._set(nodes, false, browserEvent);\n  };\n  Trait.prototype._set = function (nodes, silent, browserEvent) {\n    this.nodes = __spreadArrays(nodes);\n    this.elements = undefined;\n    this._nodeSet = undefined;\n    if (!silent) {\n      var that_1 = this;\n      this._onDidChange.fire({\n        get elements() {\n          return that_1.get();\n        },\n        browserEvent: browserEvent\n      });\n    }\n  };\n  Trait.prototype.get = function () {\n    if (!this.elements) {\n      this.elements = this.nodes.map(function (node) {\n        return node.element;\n      });\n    }\n    return __spreadArrays(this.elements);\n  };\n  Trait.prototype.getNodes = function () {\n    return this.nodes;\n  };\n  Trait.prototype.has = function (node) {\n    return this.nodeSet.has(node);\n  };\n  Trait.prototype.onDidModelSplice = function (_a) {\n    var _this = this;\n    var insertedNodes = _a.insertedNodes,\n      deletedNodes = _a.deletedNodes;\n    if (!this.identityProvider) {\n      var set_1 = this.createNodeSet();\n      var visit_1 = function visit_1(node) {\n        return set_1.delete(node);\n      };\n      deletedNodes.forEach(function (node) {\n        return dfs(node, visit_1);\n      });\n      this.set(values(set_1));\n      return;\n    }\n    var deletedNodesIdSet = new Set();\n    var deletedNodesVisitor = function deletedNodesVisitor(node) {\n      return deletedNodesIdSet.add(_this.identityProvider.getId(node.element).toString());\n    };\n    deletedNodes.forEach(function (node) {\n      return dfs(node, deletedNodesVisitor);\n    });\n    var insertedNodesMap = new Map();\n    var insertedNodesVisitor = function insertedNodesVisitor(node) {\n      return insertedNodesMap.set(_this.identityProvider.getId(node.element).toString(), node);\n    };\n    insertedNodes.forEach(function (node) {\n      return dfs(node, insertedNodesVisitor);\n    });\n    var nodes = [];\n    for (var _i = 0, _b = this.nodes; _i < _b.length; _i++) {\n      var node = _b[_i];\n      var id = this.identityProvider.getId(node.element).toString();\n      var wasDeleted = deletedNodesIdSet.has(id);\n      if (!wasDeleted) {\n        nodes.push(node);\n      } else {\n        var insertedNode = insertedNodesMap.get(id);\n        if (insertedNode) {\n          nodes.push(insertedNode);\n        }\n      }\n    }\n    this._set(nodes, true);\n  };\n  Trait.prototype.createNodeSet = function () {\n    var set = new Set();\n    for (var _i = 0, _a = this.nodes; _i < _a.length; _i++) {\n      var node = _a[_i];\n      set.add(node);\n    }\n    return set;\n  };\n  return Trait;\n}();\nvar TreeNodeListMouseController = /** @class */function (_super) {\n  __extends(TreeNodeListMouseController, _super);\n  function TreeNodeListMouseController(list, tree) {\n    var _this = _super.call(this, list) || this;\n    _this.tree = tree;\n    return _this;\n  }\n  TreeNodeListMouseController.prototype.onPointer = function (e) {\n    if (isInputElement(e.browserEvent.target)) {\n      return;\n    }\n    var node = e.element;\n    if (!node) {\n      return _super.prototype.onPointer.call(this, e);\n    }\n    if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n      return _super.prototype.onPointer.call(this, e);\n    }\n    var onTwistie = hasClass(e.browserEvent.target, 'monaco-tl-twistie');\n    if (!this.tree.openOnSingleClick && e.browserEvent.detail !== 2 && !onTwistie) {\n      return _super.prototype.onPointer.call(this, e);\n    }\n    var expandOnlyOnTwistieClick = false;\n    if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n      expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n    } else {\n      expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n    }\n    if (expandOnlyOnTwistieClick && !onTwistie) {\n      return _super.prototype.onPointer.call(this, e);\n    }\n    if (node.collapsible) {\n      var model = this.tree.model; // internal\n      var location_1 = model.getNodeLocation(node);\n      var recursive = e.browserEvent.altKey;\n      model.setCollapsed(location_1, undefined, recursive);\n      if (expandOnlyOnTwistieClick && onTwistie) {\n        return;\n      }\n    }\n    _super.prototype.onPointer.call(this, e);\n  };\n  TreeNodeListMouseController.prototype.onDoubleClick = function (e) {\n    var onTwistie = hasClass(e.browserEvent.target, 'monaco-tl-twistie');\n    if (onTwistie) {\n      return;\n    }\n    _super.prototype.onDoubleClick.call(this, e);\n  };\n  return TreeNodeListMouseController;\n}(MouseController);\n/**\r\n * We use this List subclass to restore selection and focus as nodes\r\n * get rendered in the list, possibly due to a node expand() call.\r\n */\nvar TreeNodeList = /** @class */function (_super) {\n  __extends(TreeNodeList, _super);\n  function TreeNodeList(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, options) {\n    var _this = _super.call(this, user, container, virtualDelegate, renderers, options) || this;\n    _this.focusTrait = focusTrait;\n    _this.selectionTrait = selectionTrait;\n    return _this;\n  }\n  TreeNodeList.prototype.createMouseController = function (options) {\n    return new TreeNodeListMouseController(this, options.tree);\n  };\n  TreeNodeList.prototype.splice = function (start, deleteCount, elements) {\n    var _this = this;\n    if (elements === void 0) {\n      elements = [];\n    }\n    _super.prototype.splice.call(this, start, deleteCount, elements);\n    if (elements.length === 0) {\n      return;\n    }\n    var additionalFocus = [];\n    var additionalSelection = [];\n    elements.forEach(function (node, index) {\n      if (_this.focusTrait.has(node)) {\n        additionalFocus.push(start + index);\n      }\n      if (_this.selectionTrait.has(node)) {\n        additionalSelection.push(start + index);\n      }\n    });\n    if (additionalFocus.length > 0) {\n      _super.prototype.setFocus.call(this, distinctES6(__spreadArrays(_super.prototype.getFocus.call(this), additionalFocus)));\n    }\n    if (additionalSelection.length > 0) {\n      _super.prototype.setSelection.call(this, distinctES6(__spreadArrays(_super.prototype.getSelection.call(this), additionalSelection)));\n    }\n  };\n  TreeNodeList.prototype.setFocus = function (indexes, browserEvent, fromAPI) {\n    var _this = this;\n    if (fromAPI === void 0) {\n      fromAPI = false;\n    }\n    _super.prototype.setFocus.call(this, indexes, browserEvent);\n    if (!fromAPI) {\n      this.focusTrait.set(indexes.map(function (i) {\n        return _this.element(i);\n      }), browserEvent);\n    }\n  };\n  TreeNodeList.prototype.setSelection = function (indexes, browserEvent, fromAPI) {\n    var _this = this;\n    if (fromAPI === void 0) {\n      fromAPI = false;\n    }\n    _super.prototype.setSelection.call(this, indexes, browserEvent);\n    if (!fromAPI) {\n      this.selectionTrait.set(indexes.map(function (i) {\n        return _this.element(i);\n      }), browserEvent);\n    }\n  };\n  return TreeNodeList;\n}(List);\nvar AbstractTree = /** @class */function () {\n  function AbstractTree(user, container, delegate, renderers, _options) {\n    var _this = this;\n    if (_options === void 0) {\n      _options = {};\n    }\n    this._options = _options;\n    this.eventBufferer = new EventBufferer();\n    this.disposables = new DisposableStore();\n    this._onWillRefilter = new Emitter();\n    this.onWillRefilter = this._onWillRefilter.event;\n    this._onDidUpdateOptions = new Emitter();\n    var treeDelegate = new ComposedTreeDelegate(delegate);\n    var onDidChangeCollapseStateRelay = new Relay();\n    var onDidChangeActiveNodes = new Relay();\n    var activeNodes = new EventCollection(onDidChangeActiveNodes.event);\n    this.renderers = renderers.map(function (r) {\n      return new TreeRenderer(r, function () {\n        return _this.model;\n      }, onDidChangeCollapseStateRelay.event, activeNodes, _options);\n    });\n    for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\n      var r = _a[_i];\n      this.disposables.add(r);\n    }\n    var filter;\n    if (_options.keyboardNavigationLabelProvider) {\n      filter = new TypeFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n      _options = __assign(__assign({}, _options), {\n        filter: filter\n      }); // TODO need typescript help here\n      this.disposables.add(filter);\n    }\n    this.focus = new Trait(_options.identityProvider);\n    this.selection = new Trait(_options.identityProvider);\n    this.view = new TreeNodeList(user, container, treeDelegate, this.renderers, this.focus, this.selection, __assign(__assign({}, asListOptions(function () {\n      return _this.model;\n    }, _options)), {\n      tree: this\n    }));\n    this.model = this.createModel(user, this.view, _options);\n    onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n    var onDidModelSplice = Event.forEach(this.model.onDidSplice, function (e) {\n      _this.eventBufferer.bufferEvents(function () {\n        _this.focus.onDidModelSplice(e);\n        _this.selection.onDidModelSplice(e);\n      });\n    });\n    // Make sure the `forEach` always runs\n    onDidModelSplice(function () {\n      return null;\n    }, null, this.disposables);\n    // Active nodes can change when the model changes or when focus or selection change.\n    // We debounce it with 0 delay since these events may fire in the same stack and we only\n    // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n    // a nice to have UI feature.\n    onDidChangeActiveNodes.input = Event.chain(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange)).debounce(function () {\n      return null;\n    }, 0).map(function () {\n      var set = new Set();\n      for (var _i = 0, _a = _this.focus.getNodes(); _i < _a.length; _i++) {\n        var node = _a[_i];\n        set.add(node);\n      }\n      for (var _b = 0, _c = _this.selection.getNodes(); _b < _c.length; _b++) {\n        var node = _c[_b];\n        set.add(node);\n      }\n      return fromSet(set);\n    }).event;\n    if (_options.keyboardSupport !== false) {\n      var onKeyDown = Event.chain(this.view.onKeyDown).filter(function (e) {\n        return !isInputElement(e.target);\n      }).map(function (e) {\n        return new StandardKeyboardEvent(e);\n      });\n      onKeyDown.filter(function (e) {\n        return e.keyCode === 15 /* LeftArrow */;\n      }).on(this.onLeftArrow, this, this.disposables);\n      onKeyDown.filter(function (e) {\n        return e.keyCode === 17 /* RightArrow */;\n      }).on(this.onRightArrow, this, this.disposables);\n      onKeyDown.filter(function (e) {\n        return e.keyCode === 10 /* Space */;\n      }).on(this.onSpace, this, this.disposables);\n    }\n    if (_options.keyboardNavigationLabelProvider) {\n      var delegate_1 = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n      this.typeFilterController = new TypeFilterController(this, this.model, this.view, filter, delegate_1);\n      this.focusNavigationFilter = function (node) {\n        return _this.typeFilterController.shouldAllowFocus(node);\n      };\n      this.disposables.add(this.typeFilterController);\n    }\n    this.styleElement = createStyleSheet(this.view.getHTMLElement());\n    toggleClass(this.getHTMLElement(), 'always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n  }\n  Object.defineProperty(AbstractTree.prototype, \"onDidChangeFocus\", {\n    get: function get() {\n      return this.eventBufferer.wrapEvent(this.focus.onDidChange);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"onDidChangeSelection\", {\n    get: function get() {\n      return this.eventBufferer.wrapEvent(this.selection.onDidChange);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"onDidOpen\", {\n    get: function get() {\n      return Event.map(this.view.onDidOpen, asTreeEvent);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"onDidFocus\", {\n    get: function get() {\n      return this.view.onDidFocus;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"onDidChangeCollapseState\", {\n    get: function get() {\n      return this.model.onDidChangeCollapseState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"openOnSingleClick\", {\n    get: function get() {\n      return typeof this._options.openOnSingleClick === 'undefined' ? true : this._options.openOnSingleClick;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"expandOnlyOnTwistieClick\", {\n    get: function get() {\n      return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? false : this._options.expandOnlyOnTwistieClick;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTree.prototype, \"onDidDispose\", {\n    get: function get() {\n      return this.view.onDidDispose;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AbstractTree.prototype.updateOptions = function (optionsUpdate) {\n    if (optionsUpdate === void 0) {\n      optionsUpdate = {};\n    }\n    this._options = __assign(__assign({}, this._options), optionsUpdate);\n    for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\n      var renderer = _a[_i];\n      renderer.updateOptions(optionsUpdate);\n    }\n    this.view.updateOptions({\n      enableKeyboardNavigation: this._options.simpleKeyboardNavigation,\n      automaticKeyboardNavigation: this._options.automaticKeyboardNavigation\n    });\n    if (this.typeFilterController) {\n      this.typeFilterController.updateOptions(this._options);\n    }\n    this._onDidUpdateOptions.fire(this._options);\n    toggleClass(this.getHTMLElement(), 'always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n  };\n  Object.defineProperty(AbstractTree.prototype, \"options\", {\n    get: function get() {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // Widget\n  AbstractTree.prototype.getHTMLElement = function () {\n    return this.view.getHTMLElement();\n  };\n  Object.defineProperty(AbstractTree.prototype, \"scrollTop\", {\n    get: function get() {\n      return this.view.scrollTop;\n    },\n    set: function set(scrollTop) {\n      this.view.scrollTop = scrollTop;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AbstractTree.prototype.domFocus = function () {\n    this.view.domFocus();\n  };\n  AbstractTree.prototype.layout = function (height, width) {\n    this.view.layout(height, width);\n  };\n  AbstractTree.prototype.style = function (styles) {\n    var suffix = \".\" + this.view.domId;\n    var content = [];\n    if (styles.treeIndentGuidesStroke) {\n      content.push(\".monaco-list\" + suffix + \":hover .monaco-tl-indent > .indent-guide, .monaco-list\" + suffix + \".always .monaco-tl-indent > .indent-guide  { border-color: \" + styles.treeIndentGuidesStroke.transparent(0.4) + \"; }\");\n      content.push(\".monaco-list\" + suffix + \" .monaco-tl-indent > .indent-guide.active { border-color: \" + styles.treeIndentGuidesStroke + \"; }\");\n    }\n    var newStyles = content.join('\\n');\n    if (newStyles !== this.styleElement.innerHTML) {\n      this.styleElement.innerHTML = newStyles;\n    }\n    this.view.style(styles);\n  };\n  AbstractTree.prototype.collapse = function (location, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    return this.model.setCollapsed(location, true, recursive);\n  };\n  AbstractTree.prototype.expand = function (location, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    return this.model.setCollapsed(location, false, recursive);\n  };\n  AbstractTree.prototype.isCollapsible = function (location) {\n    return this.model.isCollapsible(location);\n  };\n  AbstractTree.prototype.setCollapsible = function (location, collapsible) {\n    return this.model.setCollapsible(location, collapsible);\n  };\n  AbstractTree.prototype.isCollapsed = function (location) {\n    return this.model.isCollapsed(location);\n  };\n  AbstractTree.prototype.refilter = function () {\n    this._onWillRefilter.fire(undefined);\n    this.model.refilter();\n  };\n  AbstractTree.prototype.setSelection = function (elements, browserEvent) {\n    var _this = this;\n    var nodes = elements.map(function (e) {\n      return _this.model.getNode(e);\n    });\n    this.selection.set(nodes, browserEvent);\n    var indexes = elements.map(function (e) {\n      return _this.model.getListIndex(e);\n    }).filter(function (i) {\n      return i > -1;\n    });\n    this.view.setSelection(indexes, browserEvent, true);\n  };\n  AbstractTree.prototype.getSelection = function () {\n    return this.selection.get();\n  };\n  AbstractTree.prototype.setFocus = function (elements, browserEvent) {\n    var _this = this;\n    var nodes = elements.map(function (e) {\n      return _this.model.getNode(e);\n    });\n    this.focus.set(nodes, browserEvent);\n    var indexes = elements.map(function (e) {\n      return _this.model.getListIndex(e);\n    }).filter(function (i) {\n      return i > -1;\n    });\n    this.view.setFocus(indexes, browserEvent, true);\n  };\n  AbstractTree.prototype.focusNext = function (n, loop, browserEvent, filter) {\n    if (n === void 0) {\n      n = 1;\n    }\n    if (loop === void 0) {\n      loop = false;\n    }\n    if (filter === void 0) {\n      filter = this.focusNavigationFilter;\n    }\n    this.view.focusNext(n, loop, browserEvent, filter);\n  };\n  AbstractTree.prototype.getFocus = function () {\n    return this.focus.get();\n  };\n  AbstractTree.prototype.reveal = function (location, relativeTop) {\n    this.model.expandTo(location);\n    var index = this.model.getListIndex(location);\n    if (index === -1) {\n      return;\n    }\n    this.view.reveal(index, relativeTop);\n  };\n  /**\r\n   * Returns the relative position of an element rendered in the list.\r\n   * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n   */\n  AbstractTree.prototype.getRelativeTop = function (location) {\n    var index = this.model.getListIndex(location);\n    if (index === -1) {\n      return null;\n    }\n    return this.view.getRelativeTop(index);\n  };\n  // List\n  AbstractTree.prototype.onLeftArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var nodes = this.view.getFocusedElements();\n    if (nodes.length === 0) {\n      return;\n    }\n    var node = nodes[0];\n    var location = this.model.getNodeLocation(node);\n    var didChange = this.model.setCollapsed(location, true);\n    if (!didChange) {\n      var parentLocation = this.model.getParentNodeLocation(location);\n      if (!parentLocation) {\n        return;\n      }\n      var parentListIndex = this.model.getListIndex(parentLocation);\n      this.view.reveal(parentListIndex);\n      this.view.setFocus([parentListIndex]);\n    }\n  };\n  AbstractTree.prototype.onRightArrow = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var nodes = this.view.getFocusedElements();\n    if (nodes.length === 0) {\n      return;\n    }\n    var node = nodes[0];\n    var location = this.model.getNodeLocation(node);\n    var didChange = this.model.setCollapsed(location, false);\n    if (!didChange) {\n      if (!node.children.some(function (child) {\n        return child.visible;\n      })) {\n        return;\n      }\n      var focusedIndex = this.view.getFocus()[0];\n      var firstChildIndex = focusedIndex + 1;\n      this.view.reveal(firstChildIndex);\n      this.view.setFocus([firstChildIndex]);\n    }\n  };\n  AbstractTree.prototype.onSpace = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var nodes = this.view.getFocusedElements();\n    if (nodes.length === 0) {\n      return;\n    }\n    var node = nodes[0];\n    var location = this.model.getNodeLocation(node);\n    var recursive = e.browserEvent.altKey;\n    this.model.setCollapsed(location, undefined, recursive);\n  };\n  AbstractTree.prototype.dispose = function () {\n    dispose(this.disposables);\n    this.view.dispose();\n  };\n  return AbstractTree;\n}();\nexport { AbstractTree };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__spreadArrays","il","r","k","a","j","jl","dispose","Disposable","toDisposable","DisposableStore","List","MouseController","DefaultKeyboardNavigationDelegate","append","$","toggleClass","getDomNodePagePosition","removeClass","addClass","hasClass","createStyleSheet","clearNode","addClasses","removeClasses","Event","Relay","Emitter","EventBufferer","StandardKeyboardEvent","StaticDND","DragAndDropData","range","equals","distinctES6","fromSet","ElementsDragAndDropData","domEvent","fuzzyScore","FuzzyScore","getVisibleState","isFilterResult","localize","disposableTimeout","isMacintosh","values","clamp","SetMap","TreeElementsDragAndDropData","_super","data","_this","elements","map","node","element","asTreeDragAndDropData","TreeNodeListDragAndDrop","modelProvider","dnd","autoExpandDisposable","None","getDragURI","getDragLabel","nodes","originalEvent","undefined","onDragStart","onDragOver","targetNode","targetIndex","raw","result","didChangeAutoExpandNode","autoExpandNode","autoExpand","model","ref","getNodeLocation","isCollapsed","setCollapsed","accept","bubble","feedback","effect","model_1","ref_1","parentRef","getParentNodeLocation","parentNode","getNode","parentIndex","getListIndex","start","getListRenderCount","drop","onDragEnd","asListOptions","options","identityProvider","getId","el","multipleSelectionController","isSelectionSingleChangeEvent","e","isSelectionRangeChangeEvent","accessibilityProvider","getAriaLabel","getAriaLevel","depth","getActiveDescendantId","keyboardNavigationLabelProvider","getKeyboardNavigationLabel","enableKeyboardNavigation","simpleKeyboardNavigation","ariaProvider","getSetSize","visibleChildrenCount","getPosInSet","visibleChildIndex","isChecked","getRole","ComposedTreeDelegate","delegate","getHeight","getTemplateId","hasDynamicHeight","setDynamicHeight","height","RenderIndentGuides","EventCollection","onDidChange","_elements","forEach","defineProperty","get","enumerable","configurable","TreeRenderer","renderer","onDidChangeCollapseState","activeNodes","renderedElements","Map","renderedNodes","indent","DefaultIndent","hideTwistiesOfChildlessElements","shouldRenderIndentGuides","renderedIndentGuides","activeIndentNodes","Set","indentGuidesDisposable","disposables","templateId","updateOptions","onDidChangeNodeTwistieState","onDidChangeTwistieState","renderIndentGuides","_onDidChangeActiveNodes","renderTemplate","container","twistie","contents","templateData","renderElement","index","set","style","paddingLeft","width","renderTwistie","disposeElement","delete","disposeTemplate","collapsible","collapsed","setAttribute","String","removeAttribute","target","disposableStore","_loop_1","parent_1","guide","this_1","has","childElementCount","appendChild","insertBefore","firstElementChild","add","state_1","children","_a","line","clear","TypeFilter","tree","_filter","_totalCount","_matchCount","_pattern","_lowercasePattern","onWillRefilter","reset","pattern","toLowerCase","filter","parentVisibility","visibility","Default","label","labelStr","toString","score","filterOnType","TypeFilterController","view","keyboardNavigationDelegate","_enabled","_empty","_onDidChangeEmptyState","positionClassName","automaticKeyboardNavigation","triggered","_onDidChangePattern","enabledDisposables","domNode","draggable","messageDomNode","getHTMLElement","labelDomNode","controls","_filterOnType","filterOnTypeDomNode","type","checked","tabIndex","updateFilterOnTypeTitle","onDidChangeFilterOnType","clearDomNode","title","keyboardNavigationEventFilter","onDidSplice","onDidSpliceModel","disable","enable","refilter","render","onEventOrInput","onKeyDown","chain","isInputElement","key","test","mightProducePrintableCharacter","keyCode","altKey","ctrlKey","metaKey","shiftKey","stopPropagation","preventDefault","event","onClear","any","remove","onInput","MouseEvent","substr","browserEvent","parentElement","domFocus","fire","focusNext","isDefault","filterData","focus","getFocus","getRelativeTop","reveal","left","containerWidth","clientWidth","midContainerWidth","updatePosition","top","x","screenX","dataTransfer","dropEffect","className","document","CurrentDragAndDropData","noMatches","totalCount","matchCount","textContent","innerHTML","shouldAllowFocus","enabled","tagName","asTreeEvent","dfs","fn","child","Trait","_onDidChange","_nodeSet","createNodeSet","_set","silent","that_1","getNodes","nodeSet","onDidModelSplice","insertedNodes","deletedNodes","set_1","visit_1","deletedNodesIdSet","deletedNodesVisitor","insertedNodesMap","insertedNodesVisitor","_i","_b","id","wasDeleted","push","insertedNode","TreeNodeListMouseController","list","onPointer","onTwistie","openOnSingleClick","detail","expandOnlyOnTwistieClick","location_1","recursive","onDoubleClick","TreeNodeList","user","virtualDelegate","renderers","focusTrait","selectionTrait","createMouseController","splice","deleteCount","additionalFocus","additionalSelection","setFocus","setSelection","getSelection","indexes","fromAPI","AbstractTree","_options","eventBufferer","_onWillRefilter","_onDidUpdateOptions","treeDelegate","onDidChangeCollapseStateRelay","onDidChangeActiveNodes","selection","createModel","input","bufferEvents","debounce","_c","keyboardSupport","on","onLeftArrow","onRightArrow","onSpace","delegate_1","typeFilterController","focusNavigationFilter","styleElement","Always","wrapEvent","onDidOpen","onDidFocus","onDidDispose","optionsUpdate","scrollTop","layout","styles","suffix","domId","content","treeIndentGuidesStroke","transparent","newStyles","join","collapse","location","expand","isCollapsible","setCollapsible","loop","relativeTop","expandTo","getFocusedElements","didChange","parentLocation","parentListIndex","some","visible","focusedIndex","firstChildIndex"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './media/tree.css';\r\nimport { dispose, Disposable, toDisposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { List, MouseController, DefaultKeyboardNavigationDelegate } from '../list/listWidget.js';\r\nimport { append, $, toggleClass, getDomNodePagePosition, removeClass, addClass, hasClass, createStyleSheet, clearNode, addClasses, removeClasses } from '../../dom.js';\r\nimport { Event, Relay, Emitter, EventBufferer } from '../../../common/event.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { StaticDND, DragAndDropData } from '../../dnd.js';\r\nimport { range, equals, distinctES6, fromSet } from '../../../common/arrays.js';\r\nimport { ElementsDragAndDropData } from '../list/listView.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\r\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { disposableTimeout } from '../../../common/async.js';\r\nimport { isMacintosh } from '../../../common/platform.js';\r\nimport { values } from '../../../common/map.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { SetMap } from '../../../common/collections.js';\r\nvar TreeElementsDragAndDropData = /** @class */ (function (_super) {\r\n    __extends(TreeElementsDragAndDropData, _super);\r\n    function TreeElementsDragAndDropData(data) {\r\n        var _this = _super.call(this, data.elements.map(function (node) { return node.element; })) || this;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    return TreeElementsDragAndDropData;\r\n}(ElementsDragAndDropData));\r\nfunction asTreeDragAndDropData(data) {\r\n    if (data instanceof ElementsDragAndDropData) {\r\n        return new TreeElementsDragAndDropData(data);\r\n    }\r\n    return data;\r\n}\r\nvar TreeNodeListDragAndDrop = /** @class */ (function () {\r\n    function TreeNodeListDragAndDrop(modelProvider, dnd) {\r\n        this.modelProvider = modelProvider;\r\n        this.dnd = dnd;\r\n        this.autoExpandDisposable = Disposable.None;\r\n    }\r\n    TreeNodeListDragAndDrop.prototype.getDragURI = function (node) {\r\n        return this.dnd.getDragURI(node.element);\r\n    };\r\n    TreeNodeListDragAndDrop.prototype.getDragLabel = function (nodes, originalEvent) {\r\n        if (this.dnd.getDragLabel) {\r\n            return this.dnd.getDragLabel(nodes.map(function (node) { return node.element; }), originalEvent);\r\n        }\r\n        return undefined;\r\n    };\r\n    TreeNodeListDragAndDrop.prototype.onDragStart = function (data, originalEvent) {\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(asTreeDragAndDropData(data), originalEvent);\r\n        }\r\n    };\r\n    TreeNodeListDragAndDrop.prototype.onDragOver = function (data, targetNode, targetIndex, originalEvent, raw) {\r\n        var _this = this;\r\n        if (raw === void 0) { raw = true; }\r\n        var result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\r\n        var didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\r\n        if (didChangeAutoExpandNode) {\r\n            this.autoExpandDisposable.dispose();\r\n            this.autoExpandNode = targetNode;\r\n        }\r\n        if (typeof targetNode === 'undefined') {\r\n            return result;\r\n        }\r\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\r\n            this.autoExpandDisposable = disposableTimeout(function () {\r\n                var model = _this.modelProvider();\r\n                var ref = model.getNodeLocation(targetNode);\r\n                if (model.isCollapsed(ref)) {\r\n                    model.setCollapsed(ref, false);\r\n                }\r\n                _this.autoExpandNode = undefined;\r\n            }, 500);\r\n        }\r\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\r\n            if (!raw) {\r\n                var accept = typeof result === 'boolean' ? result : result.accept;\r\n                var effect = typeof result === 'boolean' ? undefined : result.effect;\r\n                return { accept: accept, effect: effect, feedback: [targetIndex] };\r\n            }\r\n            return result;\r\n        }\r\n        if (result.bubble === 1 /* Up */) {\r\n            var model_1 = this.modelProvider();\r\n            var ref_1 = model_1.getNodeLocation(targetNode);\r\n            var parentRef = model_1.getParentNodeLocation(ref_1);\r\n            var parentNode = model_1.getNode(parentRef);\r\n            var parentIndex = parentRef && model_1.getListIndex(parentRef);\r\n            return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\r\n        }\r\n        var model = this.modelProvider();\r\n        var ref = model.getNodeLocation(targetNode);\r\n        var start = model.getListIndex(ref);\r\n        var length = model.getListRenderCount(ref);\r\n        return __assign(__assign({}, result), { feedback: range(start, start + length) });\r\n    };\r\n    TreeNodeListDragAndDrop.prototype.drop = function (data, targetNode, targetIndex, originalEvent) {\r\n        this.autoExpandDisposable.dispose();\r\n        this.autoExpandNode = undefined;\r\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\r\n    };\r\n    TreeNodeListDragAndDrop.prototype.onDragEnd = function (originalEvent) {\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(originalEvent);\r\n        }\r\n    };\r\n    return TreeNodeListDragAndDrop;\r\n}());\r\nfunction asListOptions(modelProvider, options) {\r\n    return options && __assign(__assign({}, options), { identityProvider: options.identityProvider && {\r\n            getId: function (el) {\r\n                return options.identityProvider.getId(el.element);\r\n            }\r\n        }, dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd), multipleSelectionController: options.multipleSelectionController && {\r\n            isSelectionSingleChangeEvent: function (e) {\r\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(__assign(__assign({}, e), { element: e.element }));\r\n            },\r\n            isSelectionRangeChangeEvent: function (e) {\r\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(__assign(__assign({}, e), { element: e.element }));\r\n            }\r\n        }, accessibilityProvider: options.accessibilityProvider && __assign(__assign({}, options.accessibilityProvider), { getAriaLabel: function (e) {\r\n                return options.accessibilityProvider.getAriaLabel(e.element);\r\n            },\r\n            getAriaLevel: function (node) {\r\n                return node.depth;\r\n            }, getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (function (node) {\r\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\r\n            }) }), keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && __assign(__assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel: function (node) {\r\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\r\n            } }), enableKeyboardNavigation: options.simpleKeyboardNavigation, ariaProvider: {\r\n            getSetSize: function (node) {\r\n                var model = modelProvider();\r\n                var ref = model.getNodeLocation(node);\r\n                var parentRef = model.getParentNodeLocation(ref);\r\n                var parentNode = model.getNode(parentRef);\r\n                return parentNode.visibleChildrenCount;\r\n            },\r\n            getPosInSet: function (node) {\r\n                return node.visibleChildIndex + 1;\r\n            },\r\n            isChecked: options.ariaProvider && options.ariaProvider.isChecked ? function (node) {\r\n                return options.ariaProvider.isChecked(node.element);\r\n            } : undefined,\r\n            getRole: options.ariaProvider && options.ariaProvider.getRole ? function (node) {\r\n                return options.ariaProvider.getRole(node.element);\r\n            } : undefined\r\n        } });\r\n}\r\nvar ComposedTreeDelegate = /** @class */ (function () {\r\n    function ComposedTreeDelegate(delegate) {\r\n        this.delegate = delegate;\r\n    }\r\n    ComposedTreeDelegate.prototype.getHeight = function (element) {\r\n        return this.delegate.getHeight(element.element);\r\n    };\r\n    ComposedTreeDelegate.prototype.getTemplateId = function (element) {\r\n        return this.delegate.getTemplateId(element.element);\r\n    };\r\n    ComposedTreeDelegate.prototype.hasDynamicHeight = function (element) {\r\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\r\n    };\r\n    ComposedTreeDelegate.prototype.setDynamicHeight = function (element, height) {\r\n        if (this.delegate.setDynamicHeight) {\r\n            this.delegate.setDynamicHeight(element.element, height);\r\n        }\r\n    };\r\n    return ComposedTreeDelegate;\r\n}());\r\nexport { ComposedTreeDelegate };\r\nexport var RenderIndentGuides;\r\n(function (RenderIndentGuides) {\r\n    RenderIndentGuides[\"None\"] = \"none\";\r\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\r\n    RenderIndentGuides[\"Always\"] = \"always\";\r\n})(RenderIndentGuides || (RenderIndentGuides = {}));\r\nvar EventCollection = /** @class */ (function () {\r\n    function EventCollection(onDidChange, _elements) {\r\n        var _this = this;\r\n        if (_elements === void 0) { _elements = []; }\r\n        this._elements = _elements;\r\n        this.onDidChange = Event.forEach(onDidChange, function (elements) { return _this._elements = elements; });\r\n    }\r\n    Object.defineProperty(EventCollection.prototype, \"elements\", {\r\n        get: function () {\r\n            return this._elements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EventCollection;\r\n}());\r\nvar TreeRenderer = /** @class */ (function () {\r\n    function TreeRenderer(renderer, modelProvider, onDidChangeCollapseState, activeNodes, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.renderer = renderer;\r\n        this.modelProvider = modelProvider;\r\n        this.activeNodes = activeNodes;\r\n        this.renderedElements = new Map();\r\n        this.renderedNodes = new Map();\r\n        this.indent = TreeRenderer.DefaultIndent;\r\n        this.hideTwistiesOfChildlessElements = false;\r\n        this.shouldRenderIndentGuides = false;\r\n        this.renderedIndentGuides = new SetMap();\r\n        this.activeIndentNodes = new Set();\r\n        this.indentGuidesDisposable = Disposable.None;\r\n        this.disposables = new DisposableStore();\r\n        this.templateId = renderer.templateId;\r\n        this.updateOptions(options);\r\n        Event.map(onDidChangeCollapseState, function (e) { return e.node; })(this.onDidChangeNodeTwistieState, this, this.disposables);\r\n        if (renderer.onDidChangeTwistieState) {\r\n            renderer.onDidChangeTwistieState(this.onDidChangeTwistieState, this, this.disposables);\r\n        }\r\n    }\r\n    TreeRenderer.prototype.updateOptions = function (options) {\r\n        if (options === void 0) { options = {}; }\r\n        if (typeof options.indent !== 'undefined') {\r\n            this.indent = clamp(options.indent, 0, 40);\r\n        }\r\n        if (typeof options.renderIndentGuides !== 'undefined') {\r\n            var shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\r\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\r\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\r\n                this.indentGuidesDisposable.dispose();\r\n                if (shouldRenderIndentGuides) {\r\n                    var disposables = new DisposableStore();\r\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\r\n                    this.indentGuidesDisposable = disposables;\r\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\r\n                }\r\n            }\r\n        }\r\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\r\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\r\n        }\r\n    };\r\n    TreeRenderer.prototype.renderTemplate = function (container) {\r\n        var el = append(container, $('.monaco-tl-row'));\r\n        var indent = append(el, $('.monaco-tl-indent'));\r\n        var twistie = append(el, $('.monaco-tl-twistie'));\r\n        var contents = append(el, $('.monaco-tl-contents'));\r\n        var templateData = this.renderer.renderTemplate(contents);\r\n        return { container: container, indent: indent, twistie: twistie, indentGuidesDisposable: Disposable.None, templateData: templateData };\r\n    };\r\n    TreeRenderer.prototype.renderElement = function (node, index, templateData, height) {\r\n        if (typeof height === 'number') {\r\n            this.renderedNodes.set(node, { templateData: templateData, height: height });\r\n            this.renderedElements.set(node.element, node);\r\n        }\r\n        var indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\r\n        templateData.twistie.style.paddingLeft = indent + \"px\";\r\n        templateData.indent.style.width = indent + this.indent - 16 + \"px\";\r\n        this.renderTwistie(node, templateData);\r\n        if (typeof height === 'number') {\r\n            this.renderIndentGuides(node, templateData);\r\n        }\r\n        this.renderer.renderElement(node, index, templateData.templateData, height);\r\n    };\r\n    TreeRenderer.prototype.disposeElement = function (node, index, templateData, height) {\r\n        templateData.indentGuidesDisposable.dispose();\r\n        if (this.renderer.disposeElement) {\r\n            this.renderer.disposeElement(node, index, templateData.templateData, height);\r\n        }\r\n        if (typeof height === 'number') {\r\n            this.renderedNodes.delete(node);\r\n            this.renderedElements.delete(node.element);\r\n        }\r\n    };\r\n    TreeRenderer.prototype.disposeTemplate = function (templateData) {\r\n        this.renderer.disposeTemplate(templateData.templateData);\r\n    };\r\n    TreeRenderer.prototype.onDidChangeTwistieState = function (element) {\r\n        var node = this.renderedElements.get(element);\r\n        if (!node) {\r\n            return;\r\n        }\r\n        this.onDidChangeNodeTwistieState(node);\r\n    };\r\n    TreeRenderer.prototype.onDidChangeNodeTwistieState = function (node) {\r\n        var data = this.renderedNodes.get(node);\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.renderTwistie(node, data.templateData);\r\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\r\n        this.renderIndentGuides(node, data.templateData);\r\n    };\r\n    TreeRenderer.prototype.renderTwistie = function (node, templateData) {\r\n        if (this.renderer.renderTwistie) {\r\n            this.renderer.renderTwistie(node.element, templateData.twistie);\r\n        }\r\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\r\n            addClasses(templateData.twistie, 'codicon', 'codicon-chevron-down', 'collapsible');\r\n            toggleClass(templateData.twistie, 'collapsed', node.collapsed);\r\n        }\r\n        else {\r\n            removeClasses(templateData.twistie, 'codicon', 'codicon-chevron-down', 'collapsible', 'collapsed');\r\n        }\r\n        if (node.collapsible) {\r\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\r\n        }\r\n        else {\r\n            templateData.container.removeAttribute('aria-expanded');\r\n        }\r\n    };\r\n    TreeRenderer.prototype.renderIndentGuides = function (target, templateData) {\r\n        var _this = this;\r\n        clearNode(templateData.indent);\r\n        templateData.indentGuidesDisposable.dispose();\r\n        if (!this.shouldRenderIndentGuides) {\r\n            return;\r\n        }\r\n        var disposableStore = new DisposableStore();\r\n        var model = this.modelProvider();\r\n        var node = target;\r\n        var _loop_1 = function () {\r\n            var ref = model.getNodeLocation(node);\r\n            var parentRef = model.getParentNodeLocation(ref);\r\n            if (!parentRef) {\r\n                return \"break\";\r\n            }\r\n            var parent_1 = model.getNode(parentRef);\r\n            var guide = $('.indent-guide', { style: \"width: \" + this_1.indent + \"px\" });\r\n            if (this_1.activeIndentNodes.has(parent_1)) {\r\n                addClass(guide, 'active');\r\n            }\r\n            if (templateData.indent.childElementCount === 0) {\r\n                templateData.indent.appendChild(guide);\r\n            }\r\n            else {\r\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\r\n            }\r\n            this_1.renderedIndentGuides.add(parent_1, guide);\r\n            disposableStore.add(toDisposable(function () { return _this.renderedIndentGuides.delete(parent_1, guide); }));\r\n            node = parent_1;\r\n        };\r\n        var this_1 = this;\r\n        while (true) {\r\n            var state_1 = _loop_1();\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n        templateData.indentGuidesDisposable = disposableStore;\r\n    };\r\n    TreeRenderer.prototype._onDidChangeActiveNodes = function (nodes) {\r\n        var _this = this;\r\n        if (!this.shouldRenderIndentGuides) {\r\n            return;\r\n        }\r\n        var set = new Set();\r\n        var model = this.modelProvider();\r\n        nodes.forEach(function (node) {\r\n            var ref = model.getNodeLocation(node);\r\n            try {\r\n                var parentRef = model.getParentNodeLocation(ref);\r\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\r\n                    set.add(node);\r\n                }\r\n                else if (parentRef) {\r\n                    set.add(model.getNode(parentRef));\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // noop\r\n            }\r\n        });\r\n        this.activeIndentNodes.forEach(function (node) {\r\n            if (!set.has(node)) {\r\n                _this.renderedIndentGuides.forEach(node, function (line) { return removeClass(line, 'active'); });\r\n            }\r\n        });\r\n        set.forEach(function (node) {\r\n            if (!_this.activeIndentNodes.has(node)) {\r\n                _this.renderedIndentGuides.forEach(node, function (line) { return addClass(line, 'active'); });\r\n            }\r\n        });\r\n        this.activeIndentNodes = set;\r\n    };\r\n    TreeRenderer.prototype.dispose = function () {\r\n        this.renderedNodes.clear();\r\n        this.renderedElements.clear();\r\n        this.indentGuidesDisposable.dispose();\r\n        dispose(this.disposables);\r\n    };\r\n    TreeRenderer.DefaultIndent = 8;\r\n    return TreeRenderer;\r\n}());\r\nvar TypeFilter = /** @class */ (function () {\r\n    function TypeFilter(tree, keyboardNavigationLabelProvider, _filter) {\r\n        this.tree = tree;\r\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\r\n        this._filter = _filter;\r\n        this._totalCount = 0;\r\n        this._matchCount = 0;\r\n        this._pattern = '';\r\n        this._lowercasePattern = '';\r\n        this.disposables = new DisposableStore();\r\n        tree.onWillRefilter(this.reset, this, this.disposables);\r\n    }\r\n    Object.defineProperty(TypeFilter.prototype, \"totalCount\", {\r\n        get: function () { return this._totalCount; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TypeFilter.prototype, \"matchCount\", {\r\n        get: function () { return this._matchCount; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TypeFilter.prototype, \"pattern\", {\r\n        set: function (pattern) {\r\n            this._pattern = pattern;\r\n            this._lowercasePattern = pattern.toLowerCase();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TypeFilter.prototype.filter = function (element, parentVisibility) {\r\n        if (this._filter) {\r\n            var result = this._filter.filter(element, parentVisibility);\r\n            if (this.tree.options.simpleKeyboardNavigation) {\r\n                return result;\r\n            }\r\n            var visibility = void 0;\r\n            if (typeof result === 'boolean') {\r\n                visibility = result ? 1 /* Visible */ : 0 /* Hidden */;\r\n            }\r\n            else if (isFilterResult(result)) {\r\n                visibility = getVisibleState(result.visibility);\r\n            }\r\n            else {\r\n                visibility = result;\r\n            }\r\n            if (visibility === 0 /* Hidden */) {\r\n                return false;\r\n            }\r\n        }\r\n        this._totalCount++;\r\n        if (this.tree.options.simpleKeyboardNavigation || !this._pattern) {\r\n            this._matchCount++;\r\n            return { data: FuzzyScore.Default, visibility: true };\r\n        }\r\n        var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\r\n        var labelStr = label && label.toString();\r\n        if (typeof labelStr === 'undefined') {\r\n            return { data: FuzzyScore.Default, visibility: true };\r\n        }\r\n        var score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, true);\r\n        if (!score) {\r\n            if (this.tree.options.filterOnType) {\r\n                return 2 /* Recurse */;\r\n            }\r\n            else {\r\n                return { data: FuzzyScore.Default, visibility: true };\r\n            }\r\n            // DEMO: smarter filter ?\r\n            // return parentVisibility === TreeVisibility.Visible ? true : TreeVisibility.Recurse;\r\n        }\r\n        this._matchCount++;\r\n        return { data: score, visibility: true };\r\n    };\r\n    TypeFilter.prototype.reset = function () {\r\n        this._totalCount = 0;\r\n        this._matchCount = 0;\r\n    };\r\n    TypeFilter.prototype.dispose = function () {\r\n        dispose(this.disposables);\r\n    };\r\n    return TypeFilter;\r\n}());\r\nvar TypeFilterController = /** @class */ (function () {\r\n    function TypeFilterController(tree, model, view, filter, keyboardNavigationDelegate) {\r\n        this.tree = tree;\r\n        this.view = view;\r\n        this.filter = filter;\r\n        this.keyboardNavigationDelegate = keyboardNavigationDelegate;\r\n        this._enabled = false;\r\n        this._pattern = '';\r\n        this._empty = false;\r\n        this._onDidChangeEmptyState = new Emitter();\r\n        this.positionClassName = 'ne';\r\n        this.automaticKeyboardNavigation = true;\r\n        this.triggered = false;\r\n        this._onDidChangePattern = new Emitter();\r\n        this.enabledDisposables = new DisposableStore();\r\n        this.disposables = new DisposableStore();\r\n        this.domNode = $(\".monaco-list-type-filter.\" + this.positionClassName);\r\n        this.domNode.draggable = true;\r\n        domEvent(this.domNode, 'dragstart')(this.onDragStart, this, this.disposables);\r\n        this.messageDomNode = append(view.getHTMLElement(), $(\".monaco-list-type-filter-message\"));\r\n        this.labelDomNode = append(this.domNode, $('span.label'));\r\n        var controls = append(this.domNode, $('.controls'));\r\n        this._filterOnType = !!tree.options.filterOnType;\r\n        this.filterOnTypeDomNode = append(controls, $('input.filter.codicon.codicon-list-selection'));\r\n        this.filterOnTypeDomNode.type = 'checkbox';\r\n        this.filterOnTypeDomNode.checked = this._filterOnType;\r\n        this.filterOnTypeDomNode.tabIndex = -1;\r\n        this.updateFilterOnTypeTitle();\r\n        domEvent(this.filterOnTypeDomNode, 'input')(this.onDidChangeFilterOnType, this, this.disposables);\r\n        this.clearDomNode = append(controls, $('button.clear.codicon.codicon-close'));\r\n        this.clearDomNode.tabIndex = -1;\r\n        this.clearDomNode.title = localize('clear', \"Clear\");\r\n        this.keyboardNavigationEventFilter = tree.options.keyboardNavigationEventFilter;\r\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\r\n        this.updateOptions(tree.options);\r\n    }\r\n    Object.defineProperty(TypeFilterController.prototype, \"enabled\", {\r\n        get: function () { return this._enabled; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TypeFilterController.prototype, \"pattern\", {\r\n        get: function () { return this._pattern; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TypeFilterController.prototype, \"filterOnType\", {\r\n        get: function () { return this._filterOnType; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TypeFilterController.prototype.updateOptions = function (options) {\r\n        if (options.simpleKeyboardNavigation) {\r\n            this.disable();\r\n        }\r\n        else {\r\n            this.enable();\r\n        }\r\n        if (typeof options.filterOnType !== 'undefined') {\r\n            this._filterOnType = !!options.filterOnType;\r\n            this.filterOnTypeDomNode.checked = this._filterOnType;\r\n        }\r\n        if (typeof options.automaticKeyboardNavigation !== 'undefined') {\r\n            this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\r\n        }\r\n        this.tree.refilter();\r\n        this.render();\r\n        if (!this.automaticKeyboardNavigation) {\r\n            this.onEventOrInput('');\r\n        }\r\n    };\r\n    TypeFilterController.prototype.enable = function () {\r\n        var _this = this;\r\n        if (this._enabled) {\r\n            return;\r\n        }\r\n        var onKeyDown = Event.chain(domEvent(this.view.getHTMLElement(), 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target) || e.target === _this.filterOnTypeDomNode; })\r\n            .filter(function (e) { return e.key !== 'Dead' && !/^Media/.test(e.key); })\r\n            .map(function (e) { return new StandardKeyboardEvent(e); })\r\n            .filter(this.keyboardNavigationEventFilter || (function () { return true; }))\r\n            .filter(function () { return _this.automaticKeyboardNavigation || _this.triggered; })\r\n            .filter(function (e) { return _this.keyboardNavigationDelegate.mightProducePrintableCharacter(e) || ((_this.pattern.length > 0 || _this.triggered) && ((e.keyCode === 9 /* Escape */ || e.keyCode === 1 /* Backspace */) && !e.altKey && !e.ctrlKey && !e.metaKey) || (e.keyCode === 1 /* Backspace */ && (isMacintosh ? (e.altKey && !e.metaKey) : e.ctrlKey) && !e.shiftKey)); })\r\n            .forEach(function (e) { e.stopPropagation(); e.preventDefault(); })\r\n            .event;\r\n        var onClear = domEvent(this.clearDomNode, 'click');\r\n        Event.chain(Event.any(onKeyDown, onClear))\r\n            .event(this.onEventOrInput, this, this.enabledDisposables);\r\n        this.filter.pattern = '';\r\n        this.tree.refilter();\r\n        this.render();\r\n        this._enabled = true;\r\n        this.triggered = false;\r\n    };\r\n    TypeFilterController.prototype.disable = function () {\r\n        if (!this._enabled) {\r\n            return;\r\n        }\r\n        this.domNode.remove();\r\n        this.enabledDisposables.clear();\r\n        this.tree.refilter();\r\n        this.render();\r\n        this._enabled = false;\r\n        this.triggered = false;\r\n    };\r\n    TypeFilterController.prototype.onEventOrInput = function (e) {\r\n        if (typeof e === 'string') {\r\n            this.onInput(e);\r\n        }\r\n        else if (e instanceof MouseEvent || e.keyCode === 9 /* Escape */ || (e.keyCode === 1 /* Backspace */ && (isMacintosh ? e.altKey : e.ctrlKey))) {\r\n            this.onInput('');\r\n        }\r\n        else if (e.keyCode === 1 /* Backspace */) {\r\n            this.onInput(this.pattern.length === 0 ? '' : this.pattern.substr(0, this.pattern.length - 1));\r\n        }\r\n        else {\r\n            this.onInput(this.pattern + e.browserEvent.key);\r\n        }\r\n    };\r\n    TypeFilterController.prototype.onInput = function (pattern) {\r\n        var container = this.view.getHTMLElement();\r\n        if (pattern && !this.domNode.parentElement) {\r\n            container.append(this.domNode);\r\n        }\r\n        else if (!pattern && this.domNode.parentElement) {\r\n            this.domNode.remove();\r\n            this.tree.domFocus();\r\n        }\r\n        this._pattern = pattern;\r\n        this._onDidChangePattern.fire(pattern);\r\n        this.filter.pattern = pattern;\r\n        this.tree.refilter();\r\n        if (pattern) {\r\n            this.tree.focusNext(0, true, undefined, function (node) { return !FuzzyScore.isDefault(node.filterData); });\r\n        }\r\n        var focus = this.tree.getFocus();\r\n        if (focus.length > 0) {\r\n            var element = focus[0];\r\n            if (this.tree.getRelativeTop(element) === null) {\r\n                this.tree.reveal(element, 0.5);\r\n            }\r\n        }\r\n        this.render();\r\n        if (!pattern) {\r\n            this.triggered = false;\r\n        }\r\n    };\r\n    TypeFilterController.prototype.onDragStart = function () {\r\n        var _this = this;\r\n        var container = this.view.getHTMLElement();\r\n        var left = getDomNodePagePosition(container).left;\r\n        var containerWidth = container.clientWidth;\r\n        var midContainerWidth = containerWidth / 2;\r\n        var width = this.domNode.clientWidth;\r\n        var disposables = new DisposableStore();\r\n        var positionClassName = this.positionClassName;\r\n        var updatePosition = function () {\r\n            switch (positionClassName) {\r\n                case 'nw':\r\n                    _this.domNode.style.top = \"4px\";\r\n                    _this.domNode.style.left = \"4px\";\r\n                    break;\r\n                case 'ne':\r\n                    _this.domNode.style.top = \"4px\";\r\n                    _this.domNode.style.left = containerWidth - width - 6 + \"px\";\r\n                    break;\r\n            }\r\n        };\r\n        var onDragOver = function (event) {\r\n            event.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\r\n            var x = event.screenX - left;\r\n            if (event.dataTransfer) {\r\n                event.dataTransfer.dropEffect = 'none';\r\n            }\r\n            if (x < midContainerWidth) {\r\n                positionClassName = 'nw';\r\n            }\r\n            else {\r\n                positionClassName = 'ne';\r\n            }\r\n            updatePosition();\r\n        };\r\n        var onDragEnd = function () {\r\n            _this.positionClassName = positionClassName;\r\n            _this.domNode.className = \"monaco-list-type-filter \" + _this.positionClassName;\r\n            _this.domNode.style.top = '';\r\n            _this.domNode.style.left = '';\r\n            dispose(disposables);\r\n        };\r\n        updatePosition();\r\n        removeClass(this.domNode, positionClassName);\r\n        addClass(this.domNode, 'dragging');\r\n        disposables.add(toDisposable(function () { return removeClass(_this.domNode, 'dragging'); }));\r\n        domEvent(document, 'dragover')(onDragOver, null, disposables);\r\n        domEvent(this.domNode, 'dragend')(onDragEnd, null, disposables);\r\n        StaticDND.CurrentDragAndDropData = new DragAndDropData('vscode-ui');\r\n        disposables.add(toDisposable(function () { return StaticDND.CurrentDragAndDropData = undefined; }));\r\n    };\r\n    TypeFilterController.prototype.onDidSpliceModel = function () {\r\n        if (!this._enabled || this.pattern.length === 0) {\r\n            return;\r\n        }\r\n        this.tree.refilter();\r\n        this.render();\r\n    };\r\n    TypeFilterController.prototype.onDidChangeFilterOnType = function () {\r\n        this.tree.updateOptions({ filterOnType: this.filterOnTypeDomNode.checked });\r\n        this.tree.refilter();\r\n        this.tree.domFocus();\r\n        this.render();\r\n        this.updateFilterOnTypeTitle();\r\n    };\r\n    TypeFilterController.prototype.updateFilterOnTypeTitle = function () {\r\n        if (this.filterOnType) {\r\n            this.filterOnTypeDomNode.title = localize('disable filter on type', \"Disable Filter on Type\");\r\n        }\r\n        else {\r\n            this.filterOnTypeDomNode.title = localize('enable filter on type', \"Enable Filter on Type\");\r\n        }\r\n    };\r\n    TypeFilterController.prototype.render = function () {\r\n        var noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\r\n        if (this.pattern && this.tree.options.filterOnType && noMatches) {\r\n            this.messageDomNode.textContent = localize('empty', \"No elements found\");\r\n            this._empty = true;\r\n        }\r\n        else {\r\n            this.messageDomNode.innerHTML = '';\r\n            this._empty = false;\r\n        }\r\n        toggleClass(this.domNode, 'no-matches', noMatches);\r\n        this.domNode.title = localize('found', \"Matched {0} out of {1} elements\", this.filter.matchCount, this.filter.totalCount);\r\n        this.labelDomNode.textContent = this.pattern.length > 16 ? '…' + this.pattern.substr(this.pattern.length - 16) : this.pattern;\r\n        this._onDidChangeEmptyState.fire(this._empty);\r\n    };\r\n    TypeFilterController.prototype.shouldAllowFocus = function (node) {\r\n        if (!this.enabled || !this.pattern || this.filterOnType) {\r\n            return true;\r\n        }\r\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\r\n            return true;\r\n        }\r\n        return !FuzzyScore.isDefault(node.filterData);\r\n    };\r\n    TypeFilterController.prototype.dispose = function () {\r\n        if (this._enabled) {\r\n            this.domNode.remove();\r\n            this.enabledDisposables.dispose();\r\n            this._enabled = false;\r\n            this.triggered = false;\r\n        }\r\n        this._onDidChangePattern.dispose();\r\n        dispose(this.disposables);\r\n    };\r\n    return TypeFilterController;\r\n}());\r\nfunction isInputElement(e) {\r\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\r\n}\r\nfunction asTreeEvent(event) {\r\n    return {\r\n        elements: event.elements.map(function (node) { return node.element; }),\r\n        browserEvent: event.browserEvent\r\n    };\r\n}\r\nfunction dfs(node, fn) {\r\n    fn(node);\r\n    node.children.forEach(function (child) { return dfs(child, fn); });\r\n}\r\n/**\r\n * The trait concept needs to exist at the tree level, because collapsed\r\n * tree nodes will not be known by the list.\r\n */\r\nvar Trait = /** @class */ (function () {\r\n    function Trait(identityProvider) {\r\n        this.identityProvider = identityProvider;\r\n        this.nodes = [];\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n    }\r\n    Object.defineProperty(Trait.prototype, \"nodeSet\", {\r\n        get: function () {\r\n            if (!this._nodeSet) {\r\n                this._nodeSet = this.createNodeSet();\r\n            }\r\n            return this._nodeSet;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Trait.prototype.set = function (nodes, browserEvent) {\r\n        if (equals(this.nodes, nodes)) {\r\n            return;\r\n        }\r\n        this._set(nodes, false, browserEvent);\r\n    };\r\n    Trait.prototype._set = function (nodes, silent, browserEvent) {\r\n        this.nodes = __spreadArrays(nodes);\r\n        this.elements = undefined;\r\n        this._nodeSet = undefined;\r\n        if (!silent) {\r\n            var that_1 = this;\r\n            this._onDidChange.fire({ get elements() { return that_1.get(); }, browserEvent: browserEvent });\r\n        }\r\n    };\r\n    Trait.prototype.get = function () {\r\n        if (!this.elements) {\r\n            this.elements = this.nodes.map(function (node) { return node.element; });\r\n        }\r\n        return __spreadArrays(this.elements);\r\n    };\r\n    Trait.prototype.getNodes = function () {\r\n        return this.nodes;\r\n    };\r\n    Trait.prototype.has = function (node) {\r\n        return this.nodeSet.has(node);\r\n    };\r\n    Trait.prototype.onDidModelSplice = function (_a) {\r\n        var _this = this;\r\n        var insertedNodes = _a.insertedNodes, deletedNodes = _a.deletedNodes;\r\n        if (!this.identityProvider) {\r\n            var set_1 = this.createNodeSet();\r\n            var visit_1 = function (node) { return set_1.delete(node); };\r\n            deletedNodes.forEach(function (node) { return dfs(node, visit_1); });\r\n            this.set(values(set_1));\r\n            return;\r\n        }\r\n        var deletedNodesIdSet = new Set();\r\n        var deletedNodesVisitor = function (node) { return deletedNodesIdSet.add(_this.identityProvider.getId(node.element).toString()); };\r\n        deletedNodes.forEach(function (node) { return dfs(node, deletedNodesVisitor); });\r\n        var insertedNodesMap = new Map();\r\n        var insertedNodesVisitor = function (node) { return insertedNodesMap.set(_this.identityProvider.getId(node.element).toString(), node); };\r\n        insertedNodes.forEach(function (node) { return dfs(node, insertedNodesVisitor); });\r\n        var nodes = [];\r\n        for (var _i = 0, _b = this.nodes; _i < _b.length; _i++) {\r\n            var node = _b[_i];\r\n            var id = this.identityProvider.getId(node.element).toString();\r\n            var wasDeleted = deletedNodesIdSet.has(id);\r\n            if (!wasDeleted) {\r\n                nodes.push(node);\r\n            }\r\n            else {\r\n                var insertedNode = insertedNodesMap.get(id);\r\n                if (insertedNode) {\r\n                    nodes.push(insertedNode);\r\n                }\r\n            }\r\n        }\r\n        this._set(nodes, true);\r\n    };\r\n    Trait.prototype.createNodeSet = function () {\r\n        var set = new Set();\r\n        for (var _i = 0, _a = this.nodes; _i < _a.length; _i++) {\r\n            var node = _a[_i];\r\n            set.add(node);\r\n        }\r\n        return set;\r\n    };\r\n    return Trait;\r\n}());\r\nvar TreeNodeListMouseController = /** @class */ (function (_super) {\r\n    __extends(TreeNodeListMouseController, _super);\r\n    function TreeNodeListMouseController(list, tree) {\r\n        var _this = _super.call(this, list) || this;\r\n        _this.tree = tree;\r\n        return _this;\r\n    }\r\n    TreeNodeListMouseController.prototype.onPointer = function (e) {\r\n        if (isInputElement(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        var node = e.element;\r\n        if (!node) {\r\n            return _super.prototype.onPointer.call(this, e);\r\n        }\r\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\r\n            return _super.prototype.onPointer.call(this, e);\r\n        }\r\n        var onTwistie = hasClass(e.browserEvent.target, 'monaco-tl-twistie');\r\n        if (!this.tree.openOnSingleClick && e.browserEvent.detail !== 2 && !onTwistie) {\r\n            return _super.prototype.onPointer.call(this, e);\r\n        }\r\n        var expandOnlyOnTwistieClick = false;\r\n        if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\r\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\r\n        }\r\n        else {\r\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\r\n        }\r\n        if (expandOnlyOnTwistieClick && !onTwistie) {\r\n            return _super.prototype.onPointer.call(this, e);\r\n        }\r\n        if (node.collapsible) {\r\n            var model = this.tree.model; // internal\r\n            var location_1 = model.getNodeLocation(node);\r\n            var recursive = e.browserEvent.altKey;\r\n            model.setCollapsed(location_1, undefined, recursive);\r\n            if (expandOnlyOnTwistieClick && onTwistie) {\r\n                return;\r\n            }\r\n        }\r\n        _super.prototype.onPointer.call(this, e);\r\n    };\r\n    TreeNodeListMouseController.prototype.onDoubleClick = function (e) {\r\n        var onTwistie = hasClass(e.browserEvent.target, 'monaco-tl-twistie');\r\n        if (onTwistie) {\r\n            return;\r\n        }\r\n        _super.prototype.onDoubleClick.call(this, e);\r\n    };\r\n    return TreeNodeListMouseController;\r\n}(MouseController));\r\n/**\r\n * We use this List subclass to restore selection and focus as nodes\r\n * get rendered in the list, possibly due to a node expand() call.\r\n */\r\nvar TreeNodeList = /** @class */ (function (_super) {\r\n    __extends(TreeNodeList, _super);\r\n    function TreeNodeList(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, options) {\r\n        var _this = _super.call(this, user, container, virtualDelegate, renderers, options) || this;\r\n        _this.focusTrait = focusTrait;\r\n        _this.selectionTrait = selectionTrait;\r\n        return _this;\r\n    }\r\n    TreeNodeList.prototype.createMouseController = function (options) {\r\n        return new TreeNodeListMouseController(this, options.tree);\r\n    };\r\n    TreeNodeList.prototype.splice = function (start, deleteCount, elements) {\r\n        var _this = this;\r\n        if (elements === void 0) { elements = []; }\r\n        _super.prototype.splice.call(this, start, deleteCount, elements);\r\n        if (elements.length === 0) {\r\n            return;\r\n        }\r\n        var additionalFocus = [];\r\n        var additionalSelection = [];\r\n        elements.forEach(function (node, index) {\r\n            if (_this.focusTrait.has(node)) {\r\n                additionalFocus.push(start + index);\r\n            }\r\n            if (_this.selectionTrait.has(node)) {\r\n                additionalSelection.push(start + index);\r\n            }\r\n        });\r\n        if (additionalFocus.length > 0) {\r\n            _super.prototype.setFocus.call(this, distinctES6(__spreadArrays(_super.prototype.getFocus.call(this), additionalFocus)));\r\n        }\r\n        if (additionalSelection.length > 0) {\r\n            _super.prototype.setSelection.call(this, distinctES6(__spreadArrays(_super.prototype.getSelection.call(this), additionalSelection)));\r\n        }\r\n    };\r\n    TreeNodeList.prototype.setFocus = function (indexes, browserEvent, fromAPI) {\r\n        var _this = this;\r\n        if (fromAPI === void 0) { fromAPI = false; }\r\n        _super.prototype.setFocus.call(this, indexes, browserEvent);\r\n        if (!fromAPI) {\r\n            this.focusTrait.set(indexes.map(function (i) { return _this.element(i); }), browserEvent);\r\n        }\r\n    };\r\n    TreeNodeList.prototype.setSelection = function (indexes, browserEvent, fromAPI) {\r\n        var _this = this;\r\n        if (fromAPI === void 0) { fromAPI = false; }\r\n        _super.prototype.setSelection.call(this, indexes, browserEvent);\r\n        if (!fromAPI) {\r\n            this.selectionTrait.set(indexes.map(function (i) { return _this.element(i); }), browserEvent);\r\n        }\r\n    };\r\n    return TreeNodeList;\r\n}(List));\r\nvar AbstractTree = /** @class */ (function () {\r\n    function AbstractTree(user, container, delegate, renderers, _options) {\r\n        var _this = this;\r\n        if (_options === void 0) { _options = {}; }\r\n        this._options = _options;\r\n        this.eventBufferer = new EventBufferer();\r\n        this.disposables = new DisposableStore();\r\n        this._onWillRefilter = new Emitter();\r\n        this.onWillRefilter = this._onWillRefilter.event;\r\n        this._onDidUpdateOptions = new Emitter();\r\n        var treeDelegate = new ComposedTreeDelegate(delegate);\r\n        var onDidChangeCollapseStateRelay = new Relay();\r\n        var onDidChangeActiveNodes = new Relay();\r\n        var activeNodes = new EventCollection(onDidChangeActiveNodes.event);\r\n        this.renderers = renderers.map(function (r) { return new TreeRenderer(r, function () { return _this.model; }, onDidChangeCollapseStateRelay.event, activeNodes, _options); });\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var r = _a[_i];\r\n            this.disposables.add(r);\r\n        }\r\n        var filter;\r\n        if (_options.keyboardNavigationLabelProvider) {\r\n            filter = new TypeFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\r\n            _options = __assign(__assign({}, _options), { filter: filter }); // TODO need typescript help here\r\n            this.disposables.add(filter);\r\n        }\r\n        this.focus = new Trait(_options.identityProvider);\r\n        this.selection = new Trait(_options.identityProvider);\r\n        this.view = new TreeNodeList(user, container, treeDelegate, this.renderers, this.focus, this.selection, __assign(__assign({}, asListOptions(function () { return _this.model; }, _options)), { tree: this }));\r\n        this.model = this.createModel(user, this.view, _options);\r\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\r\n        var onDidModelSplice = Event.forEach(this.model.onDidSplice, function (e) {\r\n            _this.eventBufferer.bufferEvents(function () {\r\n                _this.focus.onDidModelSplice(e);\r\n                _this.selection.onDidModelSplice(e);\r\n            });\r\n        });\r\n        // Make sure the `forEach` always runs\r\n        onDidModelSplice(function () { return null; }, null, this.disposables);\r\n        // Active nodes can change when the model changes or when focus or selection change.\r\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\r\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\r\n        // a nice to have UI feature.\r\n        onDidChangeActiveNodes.input = Event.chain(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange))\r\n            .debounce(function () { return null; }, 0)\r\n            .map(function () {\r\n            var set = new Set();\r\n            for (var _i = 0, _a = _this.focus.getNodes(); _i < _a.length; _i++) {\r\n                var node = _a[_i];\r\n                set.add(node);\r\n            }\r\n            for (var _b = 0, _c = _this.selection.getNodes(); _b < _c.length; _b++) {\r\n                var node = _c[_b];\r\n                set.add(node);\r\n            }\r\n            return fromSet(set);\r\n        }).event;\r\n        if (_options.keyboardSupport !== false) {\r\n            var onKeyDown = Event.chain(this.view.onKeyDown)\r\n                .filter(function (e) { return !isInputElement(e.target); })\r\n                .map(function (e) { return new StandardKeyboardEvent(e); });\r\n            onKeyDown.filter(function (e) { return e.keyCode === 15 /* LeftArrow */; }).on(this.onLeftArrow, this, this.disposables);\r\n            onKeyDown.filter(function (e) { return e.keyCode === 17 /* RightArrow */; }).on(this.onRightArrow, this, this.disposables);\r\n            onKeyDown.filter(function (e) { return e.keyCode === 10 /* Space */; }).on(this.onSpace, this, this.disposables);\r\n        }\r\n        if (_options.keyboardNavigationLabelProvider) {\r\n            var delegate_1 = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\r\n            this.typeFilterController = new TypeFilterController(this, this.model, this.view, filter, delegate_1);\r\n            this.focusNavigationFilter = function (node) { return _this.typeFilterController.shouldAllowFocus(node); };\r\n            this.disposables.add(this.typeFilterController);\r\n        }\r\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\r\n        toggleClass(this.getHTMLElement(), 'always', this._options.renderIndentGuides === RenderIndentGuides.Always);\r\n    }\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidChangeFocus\", {\r\n        get: function () { return this.eventBufferer.wrapEvent(this.focus.onDidChange); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidChangeSelection\", {\r\n        get: function () { return this.eventBufferer.wrapEvent(this.selection.onDidChange); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidOpen\", {\r\n        get: function () { return Event.map(this.view.onDidOpen, asTreeEvent); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidFocus\", {\r\n        get: function () { return this.view.onDidFocus; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidChangeCollapseState\", {\r\n        get: function () { return this.model.onDidChangeCollapseState; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"openOnSingleClick\", {\r\n        get: function () { return typeof this._options.openOnSingleClick === 'undefined' ? true : this._options.openOnSingleClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"expandOnlyOnTwistieClick\", {\r\n        get: function () { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? false : this._options.expandOnlyOnTwistieClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractTree.prototype, \"onDidDispose\", {\r\n        get: function () { return this.view.onDidDispose; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractTree.prototype.updateOptions = function (optionsUpdate) {\r\n        if (optionsUpdate === void 0) { optionsUpdate = {}; }\r\n        this._options = __assign(__assign({}, this._options), optionsUpdate);\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            renderer.updateOptions(optionsUpdate);\r\n        }\r\n        this.view.updateOptions({\r\n            enableKeyboardNavigation: this._options.simpleKeyboardNavigation,\r\n            automaticKeyboardNavigation: this._options.automaticKeyboardNavigation\r\n        });\r\n        if (this.typeFilterController) {\r\n            this.typeFilterController.updateOptions(this._options);\r\n        }\r\n        this._onDidUpdateOptions.fire(this._options);\r\n        toggleClass(this.getHTMLElement(), 'always', this._options.renderIndentGuides === RenderIndentGuides.Always);\r\n    };\r\n    Object.defineProperty(AbstractTree.prototype, \"options\", {\r\n        get: function () {\r\n            return this._options;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // Widget\r\n    AbstractTree.prototype.getHTMLElement = function () {\r\n        return this.view.getHTMLElement();\r\n    };\r\n    Object.defineProperty(AbstractTree.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            return this.view.scrollTop;\r\n        },\r\n        set: function (scrollTop) {\r\n            this.view.scrollTop = scrollTop;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractTree.prototype.domFocus = function () {\r\n        this.view.domFocus();\r\n    };\r\n    AbstractTree.prototype.layout = function (height, width) {\r\n        this.view.layout(height, width);\r\n    };\r\n    AbstractTree.prototype.style = function (styles) {\r\n        var suffix = \".\" + this.view.domId;\r\n        var content = [];\r\n        if (styles.treeIndentGuidesStroke) {\r\n            content.push(\".monaco-list\" + suffix + \":hover .monaco-tl-indent > .indent-guide, .monaco-list\" + suffix + \".always .monaco-tl-indent > .indent-guide  { border-color: \" + styles.treeIndentGuidesStroke.transparent(0.4) + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-tl-indent > .indent-guide.active { border-color: \" + styles.treeIndentGuidesStroke + \"; }\");\r\n        }\r\n        var newStyles = content.join('\\n');\r\n        if (newStyles !== this.styleElement.innerHTML) {\r\n            this.styleElement.innerHTML = newStyles;\r\n        }\r\n        this.view.style(styles);\r\n    };\r\n    AbstractTree.prototype.collapse = function (location, recursive) {\r\n        if (recursive === void 0) { recursive = false; }\r\n        return this.model.setCollapsed(location, true, recursive);\r\n    };\r\n    AbstractTree.prototype.expand = function (location, recursive) {\r\n        if (recursive === void 0) { recursive = false; }\r\n        return this.model.setCollapsed(location, false, recursive);\r\n    };\r\n    AbstractTree.prototype.isCollapsible = function (location) {\r\n        return this.model.isCollapsible(location);\r\n    };\r\n    AbstractTree.prototype.setCollapsible = function (location, collapsible) {\r\n        return this.model.setCollapsible(location, collapsible);\r\n    };\r\n    AbstractTree.prototype.isCollapsed = function (location) {\r\n        return this.model.isCollapsed(location);\r\n    };\r\n    AbstractTree.prototype.refilter = function () {\r\n        this._onWillRefilter.fire(undefined);\r\n        this.model.refilter();\r\n    };\r\n    AbstractTree.prototype.setSelection = function (elements, browserEvent) {\r\n        var _this = this;\r\n        var nodes = elements.map(function (e) { return _this.model.getNode(e); });\r\n        this.selection.set(nodes, browserEvent);\r\n        var indexes = elements.map(function (e) { return _this.model.getListIndex(e); }).filter(function (i) { return i > -1; });\r\n        this.view.setSelection(indexes, browserEvent, true);\r\n    };\r\n    AbstractTree.prototype.getSelection = function () {\r\n        return this.selection.get();\r\n    };\r\n    AbstractTree.prototype.setFocus = function (elements, browserEvent) {\r\n        var _this = this;\r\n        var nodes = elements.map(function (e) { return _this.model.getNode(e); });\r\n        this.focus.set(nodes, browserEvent);\r\n        var indexes = elements.map(function (e) { return _this.model.getListIndex(e); }).filter(function (i) { return i > -1; });\r\n        this.view.setFocus(indexes, browserEvent, true);\r\n    };\r\n    AbstractTree.prototype.focusNext = function (n, loop, browserEvent, filter) {\r\n        if (n === void 0) { n = 1; }\r\n        if (loop === void 0) { loop = false; }\r\n        if (filter === void 0) { filter = this.focusNavigationFilter; }\r\n        this.view.focusNext(n, loop, browserEvent, filter);\r\n    };\r\n    AbstractTree.prototype.getFocus = function () {\r\n        return this.focus.get();\r\n    };\r\n    AbstractTree.prototype.reveal = function (location, relativeTop) {\r\n        this.model.expandTo(location);\r\n        var index = this.model.getListIndex(location);\r\n        if (index === -1) {\r\n            return;\r\n        }\r\n        this.view.reveal(index, relativeTop);\r\n    };\r\n    /**\r\n     * Returns the relative position of an element rendered in the list.\r\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n     */\r\n    AbstractTree.prototype.getRelativeTop = function (location) {\r\n        var index = this.model.getListIndex(location);\r\n        if (index === -1) {\r\n            return null;\r\n        }\r\n        return this.view.getRelativeTop(index);\r\n    };\r\n    // List\r\n    AbstractTree.prototype.onLeftArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var nodes = this.view.getFocusedElements();\r\n        if (nodes.length === 0) {\r\n            return;\r\n        }\r\n        var node = nodes[0];\r\n        var location = this.model.getNodeLocation(node);\r\n        var didChange = this.model.setCollapsed(location, true);\r\n        if (!didChange) {\r\n            var parentLocation = this.model.getParentNodeLocation(location);\r\n            if (!parentLocation) {\r\n                return;\r\n            }\r\n            var parentListIndex = this.model.getListIndex(parentLocation);\r\n            this.view.reveal(parentListIndex);\r\n            this.view.setFocus([parentListIndex]);\r\n        }\r\n    };\r\n    AbstractTree.prototype.onRightArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var nodes = this.view.getFocusedElements();\r\n        if (nodes.length === 0) {\r\n            return;\r\n        }\r\n        var node = nodes[0];\r\n        var location = this.model.getNodeLocation(node);\r\n        var didChange = this.model.setCollapsed(location, false);\r\n        if (!didChange) {\r\n            if (!node.children.some(function (child) { return child.visible; })) {\r\n                return;\r\n            }\r\n            var focusedIndex = this.view.getFocus()[0];\r\n            var firstChildIndex = focusedIndex + 1;\r\n            this.view.reveal(firstChildIndex);\r\n            this.view.setFocus([firstChildIndex]);\r\n        }\r\n    };\r\n    AbstractTree.prototype.onSpace = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var nodes = this.view.getFocusedElements();\r\n        if (nodes.length === 0) {\r\n            return;\r\n        }\r\n        var node = nodes[0];\r\n        var location = this.model.getNodeLocation(node);\r\n        var recursive = e.browserEvent.altKey;\r\n        this.model.setCollapsed(location, undefined, recursive);\r\n    };\r\n    AbstractTree.prototype.dispose = function () {\r\n        dispose(this.disposables);\r\n        this.view.dispose();\r\n    };\r\n    return AbstractTree;\r\n}());\r\nexport { AbstractTree };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}