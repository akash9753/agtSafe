{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { HorizontalRange } from '../../../common/view/renderingContext.js';\nvar FloatHorizontalRange = /** @class */function () {\n  function FloatHorizontalRange(left, width) {\n    this.left = left;\n    this.width = width;\n  }\n  FloatHorizontalRange.prototype.toString = function () {\n    return \"[\" + this.left + \",\" + this.width + \"]\";\n  };\n  FloatHorizontalRange.compare = function (a, b) {\n    return a.left - b.left;\n  };\n  return FloatHorizontalRange;\n}();\nvar RangeUtil = /** @class */function () {\n  function RangeUtil() {}\n  RangeUtil._createRange = function () {\n    if (!this._handyReadyRange) {\n      this._handyReadyRange = document.createRange();\n    }\n    return this._handyReadyRange;\n  };\n  RangeUtil._detachRange = function (range, endNode) {\n    // Move range out of the span node, IE doesn't like having many ranges in\n    // the same spot and will act badly for lines containing dashes ('-')\n    range.selectNodeContents(endNode);\n  };\n  RangeUtil._readClientRects = function (startElement, startOffset, endElement, endOffset, endNode) {\n    var range = this._createRange();\n    try {\n      range.setStart(startElement, startOffset);\n      range.setEnd(endElement, endOffset);\n      return range.getClientRects();\n    } catch (e) {\n      // This is life ...\n      return null;\n    } finally {\n      this._detachRange(range, endNode);\n    }\n  };\n  RangeUtil._mergeAdjacentRanges = function (ranges) {\n    if (ranges.length === 1) {\n      // There is nothing to merge\n      return [new HorizontalRange(ranges[0].left, ranges[0].width)];\n    }\n    ranges.sort(FloatHorizontalRange.compare);\n    var result = [],\n      resultLen = 0;\n    var prevLeft = ranges[0].left;\n    var prevWidth = ranges[0].width;\n    for (var i = 1, len = ranges.length; i < len; i++) {\n      var range = ranges[i];\n      var myLeft = range.left;\n      var myWidth = range.width;\n      if (prevLeft + prevWidth + 0.9 /* account for browser's rounding errors*/ >= myLeft) {\n        prevWidth = Math.max(prevWidth, myLeft + myWidth - prevLeft);\n      } else {\n        result[resultLen++] = new HorizontalRange(prevLeft, prevWidth);\n        prevLeft = myLeft;\n        prevWidth = myWidth;\n      }\n    }\n    result[resultLen++] = new HorizontalRange(prevLeft, prevWidth);\n    return result;\n  };\n  RangeUtil._createHorizontalRangesFromClientRects = function (clientRects, clientRectDeltaLeft) {\n    if (!clientRects || clientRects.length === 0) {\n      return null;\n    }\n    // We go through FloatHorizontalRange because it has been observed in bi-di text\n    // that the clientRects are not coming in sorted from the browser\n    var result = [];\n    for (var i = 0, len = clientRects.length; i < len; i++) {\n      var clientRect = clientRects[i];\n      result[i] = new FloatHorizontalRange(Math.max(0, clientRect.left - clientRectDeltaLeft), clientRect.width);\n    }\n    return this._mergeAdjacentRanges(result);\n  };\n  RangeUtil.readHorizontalRanges = function (domNode, startChildIndex, startOffset, endChildIndex, endOffset, clientRectDeltaLeft, endNode) {\n    // Panic check\n    var min = 0;\n    var max = domNode.children.length - 1;\n    if (min > max) {\n      return null;\n    }\n    startChildIndex = Math.min(max, Math.max(min, startChildIndex));\n    endChildIndex = Math.min(max, Math.max(min, endChildIndex));\n    // If crossing over to a span only to select offset 0, then use the previous span's maximum offset\n    // Chrome is buggy and doesn't handle 0 offsets well sometimes.\n    if (startChildIndex !== endChildIndex) {\n      if (endChildIndex > 0 && endOffset === 0) {\n        endChildIndex--;\n        endOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n      }\n    }\n\n    var startElement = domNode.children[startChildIndex].firstChild;\n    var endElement = domNode.children[endChildIndex].firstChild;\n    if (!startElement || !endElement) {\n      // When having an empty <span> (without any text content), try to move to the previous <span>\n      if (!startElement && startOffset === 0 && startChildIndex > 0) {\n        startElement = domNode.children[startChildIndex - 1].firstChild;\n        startOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n      }\n\n      if (!endElement && endOffset === 0 && endChildIndex > 0) {\n        endElement = domNode.children[endChildIndex - 1].firstChild;\n        endOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n      }\n    }\n\n    if (!startElement || !endElement) {\n      return null;\n    }\n    startOffset = Math.min(startElement.textContent.length, Math.max(0, startOffset));\n    endOffset = Math.min(endElement.textContent.length, Math.max(0, endOffset));\n    var clientRects = this._readClientRects(startElement, startOffset, endElement, endOffset, endNode);\n    return this._createHorizontalRangesFromClientRects(clientRects, clientRectDeltaLeft);\n  };\n  return RangeUtil;\n}();\nexport { RangeUtil };","map":{"version":3,"names":["HorizontalRange","FloatHorizontalRange","left","width","prototype","toString","compare","a","b","RangeUtil","_createRange","_handyReadyRange","document","createRange","_detachRange","range","endNode","selectNodeContents","_readClientRects","startElement","startOffset","endElement","endOffset","setStart","setEnd","getClientRects","e","_mergeAdjacentRanges","ranges","length","sort","result","resultLen","prevLeft","prevWidth","i","len","myLeft","myWidth","Math","max","_createHorizontalRangesFromClientRects","clientRects","clientRectDeltaLeft","clientRect","readHorizontalRanges","domNode","startChildIndex","endChildIndex","min","children","firstChild","textContent"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/rangeUtil.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { HorizontalRange } from '../../../common/view/renderingContext.js';\r\nvar FloatHorizontalRange = /** @class */ (function () {\r\n    function FloatHorizontalRange(left, width) {\r\n        this.left = left;\r\n        this.width = width;\r\n    }\r\n    FloatHorizontalRange.prototype.toString = function () {\r\n        return \"[\" + this.left + \",\" + this.width + \"]\";\r\n    };\r\n    FloatHorizontalRange.compare = function (a, b) {\r\n        return a.left - b.left;\r\n    };\r\n    return FloatHorizontalRange;\r\n}());\r\nvar RangeUtil = /** @class */ (function () {\r\n    function RangeUtil() {\r\n    }\r\n    RangeUtil._createRange = function () {\r\n        if (!this._handyReadyRange) {\r\n            this._handyReadyRange = document.createRange();\r\n        }\r\n        return this._handyReadyRange;\r\n    };\r\n    RangeUtil._detachRange = function (range, endNode) {\r\n        // Move range out of the span node, IE doesn't like having many ranges in\r\n        // the same spot and will act badly for lines containing dashes ('-')\r\n        range.selectNodeContents(endNode);\r\n    };\r\n    RangeUtil._readClientRects = function (startElement, startOffset, endElement, endOffset, endNode) {\r\n        var range = this._createRange();\r\n        try {\r\n            range.setStart(startElement, startOffset);\r\n            range.setEnd(endElement, endOffset);\r\n            return range.getClientRects();\r\n        }\r\n        catch (e) {\r\n            // This is life ...\r\n            return null;\r\n        }\r\n        finally {\r\n            this._detachRange(range, endNode);\r\n        }\r\n    };\r\n    RangeUtil._mergeAdjacentRanges = function (ranges) {\r\n        if (ranges.length === 1) {\r\n            // There is nothing to merge\r\n            return [new HorizontalRange(ranges[0].left, ranges[0].width)];\r\n        }\r\n        ranges.sort(FloatHorizontalRange.compare);\r\n        var result = [], resultLen = 0;\r\n        var prevLeft = ranges[0].left;\r\n        var prevWidth = ranges[0].width;\r\n        for (var i = 1, len = ranges.length; i < len; i++) {\r\n            var range = ranges[i];\r\n            var myLeft = range.left;\r\n            var myWidth = range.width;\r\n            if (prevLeft + prevWidth + 0.9 /* account for browser's rounding errors*/ >= myLeft) {\r\n                prevWidth = Math.max(prevWidth, myLeft + myWidth - prevLeft);\r\n            }\r\n            else {\r\n                result[resultLen++] = new HorizontalRange(prevLeft, prevWidth);\r\n                prevLeft = myLeft;\r\n                prevWidth = myWidth;\r\n            }\r\n        }\r\n        result[resultLen++] = new HorizontalRange(prevLeft, prevWidth);\r\n        return result;\r\n    };\r\n    RangeUtil._createHorizontalRangesFromClientRects = function (clientRects, clientRectDeltaLeft) {\r\n        if (!clientRects || clientRects.length === 0) {\r\n            return null;\r\n        }\r\n        // We go through FloatHorizontalRange because it has been observed in bi-di text\r\n        // that the clientRects are not coming in sorted from the browser\r\n        var result = [];\r\n        for (var i = 0, len = clientRects.length; i < len; i++) {\r\n            var clientRect = clientRects[i];\r\n            result[i] = new FloatHorizontalRange(Math.max(0, clientRect.left - clientRectDeltaLeft), clientRect.width);\r\n        }\r\n        return this._mergeAdjacentRanges(result);\r\n    };\r\n    RangeUtil.readHorizontalRanges = function (domNode, startChildIndex, startOffset, endChildIndex, endOffset, clientRectDeltaLeft, endNode) {\r\n        // Panic check\r\n        var min = 0;\r\n        var max = domNode.children.length - 1;\r\n        if (min > max) {\r\n            return null;\r\n        }\r\n        startChildIndex = Math.min(max, Math.max(min, startChildIndex));\r\n        endChildIndex = Math.min(max, Math.max(min, endChildIndex));\r\n        // If crossing over to a span only to select offset 0, then use the previous span's maximum offset\r\n        // Chrome is buggy and doesn't handle 0 offsets well sometimes.\r\n        if (startChildIndex !== endChildIndex) {\r\n            if (endChildIndex > 0 && endOffset === 0) {\r\n                endChildIndex--;\r\n                endOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n            }\r\n        }\r\n        var startElement = domNode.children[startChildIndex].firstChild;\r\n        var endElement = domNode.children[endChildIndex].firstChild;\r\n        if (!startElement || !endElement) {\r\n            // When having an empty <span> (without any text content), try to move to the previous <span>\r\n            if (!startElement && startOffset === 0 && startChildIndex > 0) {\r\n                startElement = domNode.children[startChildIndex - 1].firstChild;\r\n                startOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n            }\r\n            if (!endElement && endOffset === 0 && endChildIndex > 0) {\r\n                endElement = domNode.children[endChildIndex - 1].firstChild;\r\n                endOffset = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n            }\r\n        }\r\n        if (!startElement || !endElement) {\r\n            return null;\r\n        }\r\n        startOffset = Math.min(startElement.textContent.length, Math.max(0, startOffset));\r\n        endOffset = Math.min(endElement.textContent.length, Math.max(0, endOffset));\r\n        var clientRects = this._readClientRects(startElement, startOffset, endElement, endOffset, endNode);\r\n        return this._createHorizontalRangesFromClientRects(clientRects, clientRectDeltaLeft);\r\n    };\r\n    return RangeUtil;\r\n}());\r\nexport { RangeUtil };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}