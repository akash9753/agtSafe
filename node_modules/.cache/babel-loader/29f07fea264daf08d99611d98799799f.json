{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nvar TrimTrailingWhitespaceCommand = /** @class */function () {\n  function TrimTrailingWhitespaceCommand(selection, cursors) {\n    this._selection = selection;\n    this._cursors = cursors;\n    this._selectionId = null;\n  }\n  TrimTrailingWhitespaceCommand.prototype.getEditOperations = function (model, builder) {\n    var ops = trimTrailingWhitespace(model, this._cursors);\n    for (var i = 0, len = ops.length; i < len; i++) {\n      var op = ops[i];\n      builder.addEditOperation(op.range, op.text);\n    }\n    this._selectionId = builder.trackSelection(this._selection);\n  };\n  TrimTrailingWhitespaceCommand.prototype.computeCursorState = function (model, helper) {\n    return helper.getTrackedSelection(this._selectionId);\n  };\n  return TrimTrailingWhitespaceCommand;\n}();\nexport { TrimTrailingWhitespaceCommand };\n/**\r\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\r\n */\nexport function trimTrailingWhitespace(model, cursors) {\n  // Sort cursors ascending\n  cursors.sort(function (a, b) {\n    if (a.lineNumber === b.lineNumber) {\n      return a.column - b.column;\n    }\n    return a.lineNumber - b.lineNumber;\n  });\n  // Reduce multiple cursors on the same line and only keep the last one on the line\n  for (var i = cursors.length - 2; i >= 0; i--) {\n    if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n      // Remove cursor at `i`\n      cursors.splice(i, 1);\n    }\n  }\n  var r = [];\n  var rLen = 0;\n  var cursorIndex = 0;\n  var cursorLen = cursors.length;\n  for (var lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n    var lineContent = model.getLineContent(lineNumber);\n    var maxLineColumn = lineContent.length + 1;\n    var minEditColumn = 0;\n    if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n      minEditColumn = cursors[cursorIndex].column;\n      cursorIndex++;\n      if (minEditColumn === maxLineColumn) {\n        // The cursor is at the end of the line => no edits for sure on this line\n        continue;\n      }\n    }\n    if (lineContent.length === 0) {\n      continue;\n    }\n    var lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n    var fromColumn = 0;\n    if (lastNonWhitespaceIndex === -1) {\n      // Entire line is whitespace\n      fromColumn = 1;\n    } else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n      // There is trailing whitespace\n      fromColumn = lastNonWhitespaceIndex + 2;\n    } else {\n      // There is no trailing whitespace\n      continue;\n    }\n    fromColumn = Math.max(minEditColumn, fromColumn);\n    r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n  }\n  return r;\n}","map":{"version":3,"names":["strings","EditOperation","Range","TrimTrailingWhitespaceCommand","selection","cursors","_selection","_cursors","_selectionId","prototype","getEditOperations","model","builder","ops","trimTrailingWhitespace","i","len","length","op","addEditOperation","range","text","trackSelection","computeCursorState","helper","getTrackedSelection","sort","a","b","lineNumber","column","splice","r","rLen","cursorIndex","cursorLen","lineCount","getLineCount","lineContent","getLineContent","maxLineColumn","minEditColumn","lastNonWhitespaceIndex","fromColumn","Math","max","delete"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { EditOperation } from '../core/editOperation.js';\r\nimport { Range } from '../core/range.js';\r\nvar TrimTrailingWhitespaceCommand = /** @class */ (function () {\r\n    function TrimTrailingWhitespaceCommand(selection, cursors) {\r\n        this._selection = selection;\r\n        this._cursors = cursors;\r\n        this._selectionId = null;\r\n    }\r\n    TrimTrailingWhitespaceCommand.prototype.getEditOperations = function (model, builder) {\r\n        var ops = trimTrailingWhitespace(model, this._cursors);\r\n        for (var i = 0, len = ops.length; i < len; i++) {\r\n            var op = ops[i];\r\n            builder.addEditOperation(op.range, op.text);\r\n        }\r\n        this._selectionId = builder.trackSelection(this._selection);\r\n    };\r\n    TrimTrailingWhitespaceCommand.prototype.computeCursorState = function (model, helper) {\r\n        return helper.getTrackedSelection(this._selectionId);\r\n    };\r\n    return TrimTrailingWhitespaceCommand;\r\n}());\r\nexport { TrimTrailingWhitespaceCommand };\r\n/**\r\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\r\n */\r\nexport function trimTrailingWhitespace(model, cursors) {\r\n    // Sort cursors ascending\r\n    cursors.sort(function (a, b) {\r\n        if (a.lineNumber === b.lineNumber) {\r\n            return a.column - b.column;\r\n        }\r\n        return a.lineNumber - b.lineNumber;\r\n    });\r\n    // Reduce multiple cursors on the same line and only keep the last one on the line\r\n    for (var i = cursors.length - 2; i >= 0; i--) {\r\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\r\n            // Remove cursor at `i`\r\n            cursors.splice(i, 1);\r\n        }\r\n    }\r\n    var r = [];\r\n    var rLen = 0;\r\n    var cursorIndex = 0;\r\n    var cursorLen = cursors.length;\r\n    for (var lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\r\n        var lineContent = model.getLineContent(lineNumber);\r\n        var maxLineColumn = lineContent.length + 1;\r\n        var minEditColumn = 0;\r\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\r\n            minEditColumn = cursors[cursorIndex].column;\r\n            cursorIndex++;\r\n            if (minEditColumn === maxLineColumn) {\r\n                // The cursor is at the end of the line => no edits for sure on this line\r\n                continue;\r\n            }\r\n        }\r\n        if (lineContent.length === 0) {\r\n            continue;\r\n        }\r\n        var lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\r\n        var fromColumn = 0;\r\n        if (lastNonWhitespaceIndex === -1) {\r\n            // Entire line is whitespace\r\n            fromColumn = 1;\r\n        }\r\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\r\n            // There is trailing whitespace\r\n            fromColumn = lastNonWhitespaceIndex + 2;\r\n        }\r\n        else {\r\n            // There is no trailing whitespace\r\n            continue;\r\n        }\r\n        fromColumn = Math.max(minEditColumn, fromColumn);\r\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\r\n    }\r\n    return r;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}