{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { SimpleKeybinding } from '../../../base/common/keyCodes.js';\nimport { dispose, DisposableStore, toDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../snippet/snippetController2.js';\nimport { SnippetParser } from '../snippet/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport * as nls from '../../../nls.js';\nimport { ICommandService, CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { IdleValue } from '../../../base/common/async.js';\nimport { isObject, assertType } from '../../../base/common/types.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { SuggestRangeHighlighter } from './suggestRangeHighlighter.js';\n/**\r\n * Stop suggest widget from disappearing when clicking into other areas\r\n * For development purpose only\r\n */\nvar _sticky = false;\nvar LineSuffix = /** @class */function () {\n  function LineSuffix(_model, _position) {\n    this._model = _model;\n    this._position = _position;\n    // spy on what's happening right of the cursor. two cases:\n    // 1. end of line -> check that it's still end of line\n    // 2. mid of line -> add a marker and compute the delta\n    var maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n    if (maxColumn !== _position.column) {\n      var offset = _model.getOffsetAt(_position);\n      var end = _model.getPositionAt(offset + 1);\n      this._marker = _model.deltaDecorations([], [{\n        range: Range.fromPositions(_position, end),\n        options: {\n          stickiness: 1 /* NeverGrowsWhenTypingAtEdges */\n        }\n      }]);\n    }\n  }\n\n  LineSuffix.prototype.dispose = function () {\n    if (this._marker && !this._model.isDisposed()) {\n      this._model.deltaDecorations(this._marker, []);\n    }\n  };\n  LineSuffix.prototype.delta = function (position) {\n    if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n      // bail out early if things seems fishy\n      return 0;\n    }\n    // read the marker (in case suggest was triggered at line end) or compare\n    // the cursor to the line end.\n    if (this._marker) {\n      var range = this._model.getDecorationRange(this._marker[0]);\n      var end = this._model.getOffsetAt(range.getStartPosition());\n      return end - this._model.getOffsetAt(position);\n    } else {\n      return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n    }\n  };\n  return LineSuffix;\n}();\nvar SuggestController = /** @class */function () {\n  function SuggestController(editor, editorWorker, _memoryService, _commandService, _contextKeyService, _instantiationService) {\n    var _this = this;\n    this._memoryService = _memoryService;\n    this._commandService = _commandService;\n    this._contextKeyService = _contextKeyService;\n    this._instantiationService = _instantiationService;\n    this._lineSuffix = new MutableDisposable();\n    this._toDispose = new DisposableStore();\n    this.editor = editor;\n    this.model = new SuggestModel(this.editor, editorWorker);\n    this.widget = this._toDispose.add(new IdleValue(function () {\n      var widget = _this._instantiationService.createInstance(SuggestWidget, _this.editor);\n      _this._toDispose.add(widget);\n      _this._toDispose.add(widget.onDidSelect(function (item) {\n        return _this._insertSuggestion(item, 0);\n      }, _this));\n      // Wire up logic to accept a suggestion on certain characters\n      var commitCharacterController = new CommitCharacterController(_this.editor, widget, function (item) {\n        return _this._insertSuggestion(item, 2 /* NoAfterUndoStop */);\n      });\n      _this._toDispose.add(commitCharacterController);\n      _this._toDispose.add(_this.model.onDidSuggest(function (e) {\n        if (e.completionModel.items.length === 0) {\n          commitCharacterController.reset();\n        }\n      }));\n      // Wire up makes text edit context key\n      var makesTextEdit = SuggestContext.MakesTextEdit.bindTo(_this._contextKeyService);\n      _this._toDispose.add(widget.onDidFocus(function (_a) {\n        var item = _a.item;\n        var position = _this.editor.getPosition();\n        var startColumn = item.editStart.column;\n        var endColumn = position.column;\n        var value = true;\n        if (_this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart' && _this.model.state === 2 /* Auto */ && !item.completion.command && !item.completion.additionalTextEdits && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */) && endColumn - startColumn === item.completion.insertText.length) {\n          var oldText = _this.editor.getModel().getValueInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: startColumn,\n            endLineNumber: position.lineNumber,\n            endColumn: endColumn\n          });\n          value = oldText !== item.completion.insertText;\n        }\n        makesTextEdit.set(value);\n      }));\n      _this._toDispose.add(toDisposable(function () {\n        return makesTextEdit.reset();\n      }));\n      _this._toDispose.add(widget.onDetailsKeyDown(function (e) {\n        // cmd + c on macOS, ctrl + c on Win / Linux\n        if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KEY_C */)) || platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KEY_C */))) {\n          e.stopPropagation();\n          return;\n        }\n        if (!e.toKeybinding().isModifierKey()) {\n          _this.editor.focus();\n        }\n      }));\n      return widget;\n    }));\n    this._alternatives = this._toDispose.add(new IdleValue(function () {\n      return _this._toDispose.add(new SuggestAlternatives(_this.editor, _this._contextKeyService));\n    }));\n    this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n    this._toDispose.add(this.model.onDidTrigger(function (e) {\n      _this.widget.getValue().showTriggered(e.auto, e.shy ? 250 : 50);\n      _this._lineSuffix.value = new LineSuffix(_this.editor.getModel(), e.position);\n    }));\n    this._toDispose.add(this.model.onDidSuggest(function (e) {\n      if (!e.shy) {\n        var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), e.completionModel.items);\n        _this.widget.getValue().showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n      }\n    }));\n    this._toDispose.add(this.model.onDidCancel(function (e) {\n      if (!e.retrigger) {\n        _this.widget.getValue().hideWidget();\n      }\n    }));\n    this._toDispose.add(this.editor.onDidBlurEditorWidget(function () {\n      if (!_sticky) {\n        _this.model.cancel();\n        _this.model.clear();\n      }\n    }));\n    // Manage the acceptSuggestionsOnEnter context key\n    var acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n    var updateFromConfig = function updateFromConfig() {\n      var acceptSuggestionOnEnter = _this.editor.getOption(1 /* acceptSuggestionOnEnter */);\n      acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n    };\n    this._toDispose.add(this.editor.onDidChangeConfiguration(function () {\n      return updateFromConfig();\n    }));\n    updateFromConfig();\n    // create range highlighter\n    this._toDispose.add(new SuggestRangeHighlighter(this));\n  }\n  SuggestController.get = function (editor) {\n    return editor.getContribution(SuggestController.ID);\n  };\n  SuggestController.prototype.dispose = function () {\n    this._alternatives.dispose();\n    this._toDispose.dispose();\n    this.widget.dispose();\n    this.model.dispose();\n    this._lineSuffix.dispose();\n  };\n  SuggestController.prototype._insertSuggestion = function (event, flags) {\n    var _a;\n    var _this = this;\n    if (!event || !event.item) {\n      this._alternatives.getValue().reset();\n      this.model.cancel();\n      this.model.clear();\n      return;\n    }\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    var model = this.editor.getModel();\n    var modelVersionNow = model.getAlternativeVersionId();\n    var item = event.item;\n    var suggestion = item.completion;\n    // pushing undo stops *before* additional text edits and\n    // *after* the main edit\n    if (!(flags & 1 /* NoBeforeUndoStop */)) {\n      this.editor.pushUndoStop();\n    }\n    // compute overwrite[Before|After] deltas BEFORE applying extra edits\n    var info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\n    // keep item in memory\n    this._memoryService.memorize(model, this.editor.getPosition(), item);\n    if (Array.isArray(suggestion.additionalTextEdits)) {\n      this.editor.executeEdits('suggestController.additionalTextEdits', suggestion.additionalTextEdits.map(function (edit) {\n        return EditOperation.replace(Range.lift(edit.range), edit.text);\n      }));\n    }\n    var insertText = suggestion.insertText;\n    if (!(suggestion.insertTextRules & 4 /* InsertAsSnippet */)) {\n      insertText = SnippetParser.escape(insertText);\n    }\n    SnippetController2.get(this.editor).insert(insertText, {\n      overwriteBefore: info.overwriteBefore,\n      overwriteAfter: info.overwriteAfter,\n      undoStopBefore: false,\n      undoStopAfter: false,\n      adjustWhitespace: !(suggestion.insertTextRules & 1 /* KeepWhitespace */)\n    });\n\n    if (!(flags & 2 /* NoAfterUndoStop */)) {\n      this.editor.pushUndoStop();\n    }\n    if (!suggestion.command) {\n      // done\n      this.model.cancel();\n      this.model.clear();\n    } else if (suggestion.command.id === TriggerSuggestAction.id) {\n      // retigger\n      this.model.trigger({\n        auto: true,\n        shy: false\n      }, true);\n    } else {\n      // exec command, done\n      (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([suggestion.command.id], suggestion.command.arguments ? __spreadArrays(suggestion.command.arguments) : [])).catch(onUnexpectedError).finally(function () {\n        return _this.model.clear();\n      }); // <- clear only now, keep commands alive\n      this.model.cancel();\n    }\n    if (flags & 4 /* KeepAlternativeSuggestions */) {\n      this._alternatives.getValue().set(event, function (next) {\n        // this is not so pretty. when inserting the 'next'\n        // suggestion we undo until we are at the state at\n        // which we were before inserting the previous suggestion...\n        while (model.canUndo()) {\n          if (modelVersionNow !== model.getAlternativeVersionId()) {\n            model.undo();\n          }\n          _this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\n          break;\n        }\n      });\n    }\n    this._alertCompletionItem(event.item);\n  };\n  SuggestController.prototype.getOverwriteInfo = function (item, toggleMode) {\n    assertType(this.editor.hasModel());\n    var replace = this.editor.getOption(89 /* suggest */).insertMode === 'replace';\n    if (toggleMode) {\n      replace = !replace;\n    }\n    var overwriteBefore = item.position.column - item.editStart.column;\n    var overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n    var columnDelta = this.editor.getPosition().column - item.position.column;\n    var suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n    return {\n      overwriteBefore: overwriteBefore + columnDelta,\n      overwriteAfter: overwriteAfter + suffixDelta\n    };\n  };\n  SuggestController.prototype._alertCompletionItem = function (_a) {\n    var suggestion = _a.completion;\n    var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\n    if (isNonEmptyArray(suggestion.additionalTextEdits)) {\n      var msg = nls.localize('arai.alert.snippet', \"Accepting '{0}' made {1} additional edits\", textLabel, suggestion.additionalTextEdits.length);\n      alert(msg);\n    }\n  };\n  SuggestController.prototype.triggerSuggest = function (onlyFrom) {\n    if (this.editor.hasModel()) {\n      this.model.trigger({\n        auto: false,\n        shy: false\n      }, false, onlyFrom);\n      this.editor.revealLine(this.editor.getPosition().lineNumber, 0 /* Smooth */);\n      this.editor.focus();\n    }\n  };\n  SuggestController.prototype.triggerSuggestAndAcceptBest = function (arg) {\n    var _this = this;\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    var positionNow = this.editor.getPosition();\n    var fallback = function fallback() {\n      if (positionNow.equals(_this.editor.getPosition())) {\n        _this._commandService.executeCommand(arg.fallback);\n      }\n    };\n    var makesTextEdit = function makesTextEdit(item) {\n      if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\n        // snippet, other editor -> makes edit\n        return true;\n      }\n      var position = _this.editor.getPosition();\n      var startColumn = item.editStart.column;\n      var endColumn = position.column;\n      if (endColumn - startColumn !== item.completion.insertText.length) {\n        // unequal lengths -> makes edit\n        return true;\n      }\n      var textNow = _this.editor.getModel().getValueInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: startColumn,\n        endLineNumber: position.lineNumber,\n        endColumn: endColumn\n      });\n      // unequal text -> makes edit\n      return textNow !== item.completion.insertText;\n    };\n    Event.once(this.model.onDidTrigger)(function (_) {\n      // wait for trigger because only then the cancel-event is trustworthy\n      var listener = [];\n      Event.any(_this.model.onDidTrigger, _this.model.onDidCancel)(function () {\n        // retrigger or cancel -> try to type default text\n        dispose(listener);\n        fallback();\n      }, undefined, listener);\n      _this.model.onDidSuggest(function (_a) {\n        var completionModel = _a.completionModel;\n        dispose(listener);\n        if (completionModel.items.length === 0) {\n          fallback();\n          return;\n        }\n        var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), completionModel.items);\n        var item = completionModel.items[index];\n        if (!makesTextEdit(item)) {\n          fallback();\n          return;\n        }\n        _this.editor.pushUndoStop();\n        _this._insertSuggestion({\n          index: index,\n          item: item,\n          model: completionModel\n        }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\n      }, undefined, listener);\n    });\n    this.model.trigger({\n      auto: false,\n      shy: true\n    });\n    this.editor.revealLine(positionNow.lineNumber, 0 /* Smooth */);\n    this.editor.focus();\n  };\n  SuggestController.prototype.acceptSelectedSuggestion = function (keepAlternativeSuggestions, alternativeOverwriteConfig) {\n    var item = this.widget.getValue().getFocusedItem();\n    var flags = 0;\n    if (keepAlternativeSuggestions) {\n      flags |= 4 /* KeepAlternativeSuggestions */;\n    }\n\n    if (alternativeOverwriteConfig) {\n      flags |= 8 /* AlternativeOverwriteConfig */;\n    }\n\n    this._insertSuggestion(item, flags);\n  };\n  SuggestController.prototype.acceptNextSuggestion = function () {\n    this._alternatives.getValue().next();\n  };\n  SuggestController.prototype.acceptPrevSuggestion = function () {\n    this._alternatives.getValue().prev();\n  };\n  SuggestController.prototype.cancelSuggestWidget = function () {\n    this.model.cancel();\n    this.model.clear();\n    this.widget.getValue().hideWidget();\n  };\n  SuggestController.prototype.selectNextSuggestion = function () {\n    this.widget.getValue().selectNext();\n  };\n  SuggestController.prototype.selectNextPageSuggestion = function () {\n    this.widget.getValue().selectNextPage();\n  };\n  SuggestController.prototype.selectLastSuggestion = function () {\n    this.widget.getValue().selectLast();\n  };\n  SuggestController.prototype.selectPrevSuggestion = function () {\n    this.widget.getValue().selectPrevious();\n  };\n  SuggestController.prototype.selectPrevPageSuggestion = function () {\n    this.widget.getValue().selectPreviousPage();\n  };\n  SuggestController.prototype.selectFirstSuggestion = function () {\n    this.widget.getValue().selectFirst();\n  };\n  SuggestController.prototype.toggleSuggestionDetails = function () {\n    this.widget.getValue().toggleDetails();\n  };\n  SuggestController.prototype.toggleExplainMode = function () {\n    this.widget.getValue().toggleExplainMode();\n  };\n  SuggestController.prototype.toggleSuggestionFocus = function () {\n    this.widget.getValue().toggleDetailsFocus();\n  };\n  SuggestController.ID = 'editor.contrib.suggestController';\n  SuggestController = __decorate([__param(1, IEditorWorkerService), __param(2, ISuggestMemoryService), __param(3, ICommandService), __param(4, IContextKeyService), __param(5, IInstantiationService)], SuggestController);\n  return SuggestController;\n}();\nexport { SuggestController };\nvar TriggerSuggestAction = /** @class */function (_super) {\n  __extends(TriggerSuggestAction, _super);\n  function TriggerSuggestAction() {\n    return _super.call(this, {\n      id: TriggerSuggestAction.id,\n      label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n      alias: 'Trigger Suggest',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n        mac: {\n          primary: 256 /* WinCtrl */ | 10 /* Space */,\n          secondary: [512 /* Alt */ | 9 /* Escape */]\n        },\n        weight: 100 /* EditorContrib */\n      }\n    }) || this;\n  }\n  TriggerSuggestAction.prototype.run = function (accessor, editor) {\n    var controller = SuggestController.get(editor);\n    if (!controller) {\n      return;\n    }\n    controller.triggerSuggest();\n  };\n  TriggerSuggestAction.id = 'editor.action.triggerSuggest';\n  return TriggerSuggestAction;\n}(EditorAction);\nexport { TriggerSuggestAction };\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nvar weight = 100 /* EditorContrib */ + 90;\nvar SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptSelectedSuggestion',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    x.acceptSelectedSuggestion(true, false);\n  }\n}));\n// normal tab\nKeybindingsRegistry.registerKeybindingRule({\n  id: 'acceptSelectedSuggestion',\n  when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n  primary: 2 /* Tab */,\n  weight: weight\n});\n// accept on enter has special rules\nKeybindingsRegistry.registerKeybindingRule({\n  id: 'acceptSelectedSuggestion',\n  when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n  primary: 3 /* Enter */,\n  weight: weight\n});\n// todo@joh control enablement via context key\n// shift+enter and shift+tab use the alternative-flag so that the suggest controller\n// is doing the opposite of the editor.suggest.overwriteOnAccept-configuration\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptAlternativeSelectedSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024 /* Shift */ | 3 /* Enter */,\n    secondary: [1024 /* Shift */ | 2 /* Tab */]\n  },\n\n  handler: function handler(x) {\n    x.acceptSelectedSuggestion(false, true);\n  }\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n  id: 'hideSuggestWidget',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.cancelSuggestWidget();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 9 /* Escape */,\n    secondary: [1024 /* Shift */ | 9 /* Escape */]\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectNextSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 18 /* DownArrow */,\n    secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\n    mac: {\n      primary: 18 /* DownArrow */,\n      secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KEY_N */]\n    }\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectNextPageSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 12 /* PageDown */,\n    secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectLastSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectLastSuggestion();\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectPrevSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 16 /* UpArrow */,\n    secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\n    mac: {\n      primary: 16 /* UpArrow */,\n      secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KEY_P */]\n    }\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectPrevPageSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 11 /* PageUp */,\n    secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectFirstSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectFirstSuggestion();\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionDetails',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.toggleSuggestionDetails();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n    mac: {\n      primary: 256 /* WinCtrl */ | 10 /* Space */\n    }\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleExplainMode',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.toggleExplainMode();\n  },\n  kbOpts: {\n    weight: 100 /* EditorContrib */,\n    primary: 2048 /* CtrlCmd */ | 85 /* US_SLASH */\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionFocus',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.toggleSuggestionFocus();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\n    mac: {\n      primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */\n    }\n  }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertBestCompletion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x, arg) {\n    x.triggerSuggestAndAcceptBest(isObject(arg) ? __assign({\n      fallback: 'tab'\n    }, arg) : {\n      fallback: 'tab'\n    });\n  },\n  kbOpts: {\n    weight: weight,\n    primary: 2 /* Tab */\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertNextSuggestion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x) {\n    return x.acceptNextSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2 /* Tab */\n  }\n}));\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertPrevSuggestion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x) {\n    return x.acceptPrevSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024 /* Shift */ | 2 /* Tab */\n  }\n}));","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__spreadArrays","il","k","a","j","jl","alert","isNonEmptyArray","onUnexpectedError","SimpleKeybinding","dispose","DisposableStore","toDisposable","MutableDisposable","EditorAction","EditorCommand","registerEditorAction","registerEditorCommand","registerEditorContribution","EditOperation","Range","EditorContextKeys","SnippetController2","SnippetParser","ISuggestMemoryService","nls","ICommandService","CommandsRegistry","ContextKeyExpr","IContextKeyService","IInstantiationService","KeybindingsRegistry","Context","SuggestContext","SuggestAlternatives","SuggestModel","SuggestWidget","WordContextKey","Event","IEditorWorkerService","IdleValue","isObject","assertType","CommitCharacterController","platform","SuggestRangeHighlighter","_sticky","LineSuffix","_model","_position","maxColumn","getLineMaxColumn","lineNumber","column","offset","getOffsetAt","end","getPositionAt","_marker","deltaDecorations","range","fromPositions","options","stickiness","isDisposed","delta","position","getDecorationRange","getStartPosition","SuggestController","editor","editorWorker","_memoryService","_commandService","_contextKeyService","_instantiationService","_this","_lineSuffix","_toDispose","model","widget","add","createInstance","onDidSelect","item","_insertSuggestion","commitCharacterController","onDidSuggest","e","completionModel","items","reset","makesTextEdit","MakesTextEdit","bindTo","onDidFocus","_a","getPosition","startColumn","editStart","endColumn","value","getOption","state","completion","command","additionalTextEdits","insertTextRules","insertText","oldText","getModel","getValueInRange","startLineNumber","endLineNumber","set","onDetailsKeyDown","toKeybinding","equals","isMacintosh","stopPropagation","isModifierKey","focus","_alternatives","onDidTrigger","getValue","showTriggered","auto","shy","index","select","showSuggestions","isFrozen","onDidCancel","retrigger","hideWidget","onDidBlurEditorWidget","cancel","clear","acceptSuggestionsOnEnter","AcceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","onDidChangeConfiguration","get","getContribution","ID","event","flags","hasModel","modelVersionNow","getAlternativeVersionId","suggestion","pushUndoStop","info","getOverwriteInfo","Boolean","memorize","isArray","executeEdits","map","edit","replace","lift","text","escape","insert","overwriteBefore","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","id","TriggerSuggestAction","trigger","executeCommand","catch","finally","next","canUndo","undo","_alertCompletionItem","toggleMode","insertMode","editReplaceEnd","editInsertEnd","columnDelta","suffixDelta","textLabel","label","name","msg","localize","triggerSuggest","onlyFrom","revealLine","triggerSuggestAndAcceptBest","arg","positionNow","fallback","textNow","once","_","listener","any","undefined","acceptSelectedSuggestion","keepAlternativeSuggestions","alternativeOverwriteConfig","getFocusedItem","acceptNextSuggestion","acceptPrevSuggestion","prev","cancelSuggestWidget","selectNextSuggestion","selectNext","selectNextPageSuggestion","selectNextPage","selectLastSuggestion","selectLast","selectPrevSuggestion","selectPrevious","selectPrevPageSuggestion","selectPreviousPage","selectFirstSuggestion","selectFirst","toggleSuggestionDetails","toggleDetails","toggleExplainMode","toggleSuggestionFocus","toggleDetailsFocus","_super","alias","precondition","and","writable","hasCompletionItemProvider","kbOpts","kbExpr","textInputFocus","primary","mac","secondary","weight","run","accessor","controller","SuggestCommand","bindToContribution","Visible","handler","x","registerKeybindingRule","when","registerCommandAlias","MultipleSuggestions","AtEnd","toNegated","OtherSuggestions","InSnippetMode"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { SimpleKeybinding } from '../../../base/common/keyCodes.js';\r\nimport { dispose, DisposableStore, toDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { SnippetController2 } from '../snippet/snippetController2.js';\r\nimport { SnippetParser } from '../snippet/snippetParser.js';\r\nimport { ISuggestMemoryService } from './suggestMemory.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { ICommandService, CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { Context as SuggestContext } from './suggest.js';\r\nimport { SuggestAlternatives } from './suggestAlternatives.js';\r\nimport { SuggestModel } from './suggestModel.js';\r\nimport { SuggestWidget } from './suggestWidget.js';\r\nimport { WordContextKey } from './wordContextKey.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { IdleValue } from '../../../base/common/async.js';\r\nimport { isObject, assertType } from '../../../base/common/types.js';\r\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { SuggestRangeHighlighter } from './suggestRangeHighlighter.js';\r\n/**\r\n * Stop suggest widget from disappearing when clicking into other areas\r\n * For development purpose only\r\n */\r\nvar _sticky = false;\r\nvar LineSuffix = /** @class */ (function () {\r\n    function LineSuffix(_model, _position) {\r\n        this._model = _model;\r\n        this._position = _position;\r\n        // spy on what's happening right of the cursor. two cases:\r\n        // 1. end of line -> check that it's still end of line\r\n        // 2. mid of line -> add a marker and compute the delta\r\n        var maxColumn = _model.getLineMaxColumn(_position.lineNumber);\r\n        if (maxColumn !== _position.column) {\r\n            var offset = _model.getOffsetAt(_position);\r\n            var end = _model.getPositionAt(offset + 1);\r\n            this._marker = _model.deltaDecorations([], [{\r\n                    range: Range.fromPositions(_position, end),\r\n                    options: { stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ }\r\n                }]);\r\n        }\r\n    }\r\n    LineSuffix.prototype.dispose = function () {\r\n        if (this._marker && !this._model.isDisposed()) {\r\n            this._model.deltaDecorations(this._marker, []);\r\n        }\r\n    };\r\n    LineSuffix.prototype.delta = function (position) {\r\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\r\n            // bail out early if things seems fishy\r\n            return 0;\r\n        }\r\n        // read the marker (in case suggest was triggered at line end) or compare\r\n        // the cursor to the line end.\r\n        if (this._marker) {\r\n            var range = this._model.getDecorationRange(this._marker[0]);\r\n            var end = this._model.getOffsetAt(range.getStartPosition());\r\n            return end - this._model.getOffsetAt(position);\r\n        }\r\n        else {\r\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\r\n        }\r\n    };\r\n    return LineSuffix;\r\n}());\r\nvar SuggestController = /** @class */ (function () {\r\n    function SuggestController(editor, editorWorker, _memoryService, _commandService, _contextKeyService, _instantiationService) {\r\n        var _this = this;\r\n        this._memoryService = _memoryService;\r\n        this._commandService = _commandService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._instantiationService = _instantiationService;\r\n        this._lineSuffix = new MutableDisposable();\r\n        this._toDispose = new DisposableStore();\r\n        this.editor = editor;\r\n        this.model = new SuggestModel(this.editor, editorWorker);\r\n        this.widget = this._toDispose.add(new IdleValue(function () {\r\n            var widget = _this._instantiationService.createInstance(SuggestWidget, _this.editor);\r\n            _this._toDispose.add(widget);\r\n            _this._toDispose.add(widget.onDidSelect(function (item) { return _this._insertSuggestion(item, 0); }, _this));\r\n            // Wire up logic to accept a suggestion on certain characters\r\n            var commitCharacterController = new CommitCharacterController(_this.editor, widget, function (item) { return _this._insertSuggestion(item, 2 /* NoAfterUndoStop */); });\r\n            _this._toDispose.add(commitCharacterController);\r\n            _this._toDispose.add(_this.model.onDidSuggest(function (e) {\r\n                if (e.completionModel.items.length === 0) {\r\n                    commitCharacterController.reset();\r\n                }\r\n            }));\r\n            // Wire up makes text edit context key\r\n            var makesTextEdit = SuggestContext.MakesTextEdit.bindTo(_this._contextKeyService);\r\n            _this._toDispose.add(widget.onDidFocus(function (_a) {\r\n                var item = _a.item;\r\n                var position = _this.editor.getPosition();\r\n                var startColumn = item.editStart.column;\r\n                var endColumn = position.column;\r\n                var value = true;\r\n                if (_this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart'\r\n                    && _this.model.state === 2 /* Auto */\r\n                    && !item.completion.command\r\n                    && !item.completion.additionalTextEdits\r\n                    && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */)\r\n                    && endColumn - startColumn === item.completion.insertText.length) {\r\n                    var oldText = _this.editor.getModel().getValueInRange({\r\n                        startLineNumber: position.lineNumber,\r\n                        startColumn: startColumn,\r\n                        endLineNumber: position.lineNumber,\r\n                        endColumn: endColumn\r\n                    });\r\n                    value = oldText !== item.completion.insertText;\r\n                }\r\n                makesTextEdit.set(value);\r\n            }));\r\n            _this._toDispose.add(toDisposable(function () { return makesTextEdit.reset(); }));\r\n            _this._toDispose.add(widget.onDetailsKeyDown(function (e) {\r\n                // cmd + c on macOS, ctrl + c on Win / Linux\r\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KEY_C */)) ||\r\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KEY_C */)))) {\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n                if (!e.toKeybinding().isModifierKey()) {\r\n                    _this.editor.focus();\r\n                }\r\n            }));\r\n            return widget;\r\n        }));\r\n        this._alternatives = this._toDispose.add(new IdleValue(function () {\r\n            return _this._toDispose.add(new SuggestAlternatives(_this.editor, _this._contextKeyService));\r\n        }));\r\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\r\n        this._toDispose.add(this.model.onDidTrigger(function (e) {\r\n            _this.widget.getValue().showTriggered(e.auto, e.shy ? 250 : 50);\r\n            _this._lineSuffix.value = new LineSuffix(_this.editor.getModel(), e.position);\r\n        }));\r\n        this._toDispose.add(this.model.onDidSuggest(function (e) {\r\n            if (!e.shy) {\r\n                var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), e.completionModel.items);\r\n                _this.widget.getValue().showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\r\n            }\r\n        }));\r\n        this._toDispose.add(this.model.onDidCancel(function (e) {\r\n            if (!e.retrigger) {\r\n                _this.widget.getValue().hideWidget();\r\n            }\r\n        }));\r\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(function () {\r\n            if (!_sticky) {\r\n                _this.model.cancel();\r\n                _this.model.clear();\r\n            }\r\n        }));\r\n        // Manage the acceptSuggestionsOnEnter context key\r\n        var acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\r\n        var updateFromConfig = function () {\r\n            var acceptSuggestionOnEnter = _this.editor.getOption(1 /* acceptSuggestionOnEnter */);\r\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\r\n        };\r\n        this._toDispose.add(this.editor.onDidChangeConfiguration(function () { return updateFromConfig(); }));\r\n        updateFromConfig();\r\n        // create range highlighter\r\n        this._toDispose.add(new SuggestRangeHighlighter(this));\r\n    }\r\n    SuggestController.get = function (editor) {\r\n        return editor.getContribution(SuggestController.ID);\r\n    };\r\n    SuggestController.prototype.dispose = function () {\r\n        this._alternatives.dispose();\r\n        this._toDispose.dispose();\r\n        this.widget.dispose();\r\n        this.model.dispose();\r\n        this._lineSuffix.dispose();\r\n    };\r\n    SuggestController.prototype._insertSuggestion = function (event, flags) {\r\n        var _a;\r\n        var _this = this;\r\n        if (!event || !event.item) {\r\n            this._alternatives.getValue().reset();\r\n            this.model.cancel();\r\n            this.model.clear();\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this.editor.getModel();\r\n        var modelVersionNow = model.getAlternativeVersionId();\r\n        var item = event.item;\r\n        var suggestion = item.completion;\r\n        // pushing undo stops *before* additional text edits and\r\n        // *after* the main edit\r\n        if (!(flags & 1 /* NoBeforeUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\r\n        var info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\r\n        // keep item in memory\r\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\r\n        if (Array.isArray(suggestion.additionalTextEdits)) {\r\n            this.editor.executeEdits('suggestController.additionalTextEdits', suggestion.additionalTextEdits.map(function (edit) { return EditOperation.replace(Range.lift(edit.range), edit.text); }));\r\n        }\r\n        var insertText = suggestion.insertText;\r\n        if (!(suggestion.insertTextRules & 4 /* InsertAsSnippet */)) {\r\n            insertText = SnippetParser.escape(insertText);\r\n        }\r\n        SnippetController2.get(this.editor).insert(insertText, {\r\n            overwriteBefore: info.overwriteBefore,\r\n            overwriteAfter: info.overwriteAfter,\r\n            undoStopBefore: false,\r\n            undoStopAfter: false,\r\n            adjustWhitespace: !(suggestion.insertTextRules & 1 /* KeepWhitespace */)\r\n        });\r\n        if (!(flags & 2 /* NoAfterUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        if (!suggestion.command) {\r\n            // done\r\n            this.model.cancel();\r\n            this.model.clear();\r\n        }\r\n        else if (suggestion.command.id === TriggerSuggestAction.id) {\r\n            // retigger\r\n            this.model.trigger({ auto: true, shy: false }, true);\r\n        }\r\n        else {\r\n            // exec command, done\r\n            (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([suggestion.command.id], (suggestion.command.arguments ? __spreadArrays(suggestion.command.arguments) : []))).catch(onUnexpectedError)\r\n                .finally(function () { return _this.model.clear(); }); // <- clear only now, keep commands alive\r\n            this.model.cancel();\r\n        }\r\n        if (flags & 4 /* KeepAlternativeSuggestions */) {\r\n            this._alternatives.getValue().set(event, function (next) {\r\n                // this is not so pretty. when inserting the 'next'\r\n                // suggestion we undo until we are at the state at\r\n                // which we were before inserting the previous suggestion...\r\n                while (model.canUndo()) {\r\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\r\n                        model.undo();\r\n                    }\r\n                    _this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\r\n                    break;\r\n                }\r\n            });\r\n        }\r\n        this._alertCompletionItem(event.item);\r\n    };\r\n    SuggestController.prototype.getOverwriteInfo = function (item, toggleMode) {\r\n        assertType(this.editor.hasModel());\r\n        var replace = this.editor.getOption(89 /* suggest */).insertMode === 'replace';\r\n        if (toggleMode) {\r\n            replace = !replace;\r\n        }\r\n        var overwriteBefore = item.position.column - item.editStart.column;\r\n        var overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\r\n        var columnDelta = this.editor.getPosition().column - item.position.column;\r\n        var suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\r\n        return {\r\n            overwriteBefore: overwriteBefore + columnDelta,\r\n            overwriteAfter: overwriteAfter + suffixDelta\r\n        };\r\n    };\r\n    SuggestController.prototype._alertCompletionItem = function (_a) {\r\n        var suggestion = _a.completion;\r\n        var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\r\n        if (isNonEmptyArray(suggestion.additionalTextEdits)) {\r\n            var msg = nls.localize('arai.alert.snippet', \"Accepting '{0}' made {1} additional edits\", textLabel, suggestion.additionalTextEdits.length);\r\n            alert(msg);\r\n        }\r\n    };\r\n    SuggestController.prototype.triggerSuggest = function (onlyFrom) {\r\n        if (this.editor.hasModel()) {\r\n            this.model.trigger({ auto: false, shy: false }, false, onlyFrom);\r\n            this.editor.revealLine(this.editor.getPosition().lineNumber, 0 /* Smooth */);\r\n            this.editor.focus();\r\n        }\r\n    };\r\n    SuggestController.prototype.triggerSuggestAndAcceptBest = function (arg) {\r\n        var _this = this;\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var positionNow = this.editor.getPosition();\r\n        var fallback = function () {\r\n            if (positionNow.equals(_this.editor.getPosition())) {\r\n                _this._commandService.executeCommand(arg.fallback);\r\n            }\r\n        };\r\n        var makesTextEdit = function (item) {\r\n            if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\r\n                // snippet, other editor -> makes edit\r\n                return true;\r\n            }\r\n            var position = _this.editor.getPosition();\r\n            var startColumn = item.editStart.column;\r\n            var endColumn = position.column;\r\n            if (endColumn - startColumn !== item.completion.insertText.length) {\r\n                // unequal lengths -> makes edit\r\n                return true;\r\n            }\r\n            var textNow = _this.editor.getModel().getValueInRange({\r\n                startLineNumber: position.lineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: position.lineNumber,\r\n                endColumn: endColumn\r\n            });\r\n            // unequal text -> makes edit\r\n            return textNow !== item.completion.insertText;\r\n        };\r\n        Event.once(this.model.onDidTrigger)(function (_) {\r\n            // wait for trigger because only then the cancel-event is trustworthy\r\n            var listener = [];\r\n            Event.any(_this.model.onDidTrigger, _this.model.onDidCancel)(function () {\r\n                // retrigger or cancel -> try to type default text\r\n                dispose(listener);\r\n                fallback();\r\n            }, undefined, listener);\r\n            _this.model.onDidSuggest(function (_a) {\r\n                var completionModel = _a.completionModel;\r\n                dispose(listener);\r\n                if (completionModel.items.length === 0) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), completionModel.items);\r\n                var item = completionModel.items[index];\r\n                if (!makesTextEdit(item)) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                _this.editor.pushUndoStop();\r\n                _this._insertSuggestion({ index: index, item: item, model: completionModel }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\r\n            }, undefined, listener);\r\n        });\r\n        this.model.trigger({ auto: false, shy: true });\r\n        this.editor.revealLine(positionNow.lineNumber, 0 /* Smooth */);\r\n        this.editor.focus();\r\n    };\r\n    SuggestController.prototype.acceptSelectedSuggestion = function (keepAlternativeSuggestions, alternativeOverwriteConfig) {\r\n        var item = this.widget.getValue().getFocusedItem();\r\n        var flags = 0;\r\n        if (keepAlternativeSuggestions) {\r\n            flags |= 4 /* KeepAlternativeSuggestions */;\r\n        }\r\n        if (alternativeOverwriteConfig) {\r\n            flags |= 8 /* AlternativeOverwriteConfig */;\r\n        }\r\n        this._insertSuggestion(item, flags);\r\n    };\r\n    SuggestController.prototype.acceptNextSuggestion = function () {\r\n        this._alternatives.getValue().next();\r\n    };\r\n    SuggestController.prototype.acceptPrevSuggestion = function () {\r\n        this._alternatives.getValue().prev();\r\n    };\r\n    SuggestController.prototype.cancelSuggestWidget = function () {\r\n        this.model.cancel();\r\n        this.model.clear();\r\n        this.widget.getValue().hideWidget();\r\n    };\r\n    SuggestController.prototype.selectNextSuggestion = function () {\r\n        this.widget.getValue().selectNext();\r\n    };\r\n    SuggestController.prototype.selectNextPageSuggestion = function () {\r\n        this.widget.getValue().selectNextPage();\r\n    };\r\n    SuggestController.prototype.selectLastSuggestion = function () {\r\n        this.widget.getValue().selectLast();\r\n    };\r\n    SuggestController.prototype.selectPrevSuggestion = function () {\r\n        this.widget.getValue().selectPrevious();\r\n    };\r\n    SuggestController.prototype.selectPrevPageSuggestion = function () {\r\n        this.widget.getValue().selectPreviousPage();\r\n    };\r\n    SuggestController.prototype.selectFirstSuggestion = function () {\r\n        this.widget.getValue().selectFirst();\r\n    };\r\n    SuggestController.prototype.toggleSuggestionDetails = function () {\r\n        this.widget.getValue().toggleDetails();\r\n    };\r\n    SuggestController.prototype.toggleExplainMode = function () {\r\n        this.widget.getValue().toggleExplainMode();\r\n    };\r\n    SuggestController.prototype.toggleSuggestionFocus = function () {\r\n        this.widget.getValue().toggleDetailsFocus();\r\n    };\r\n    SuggestController.ID = 'editor.contrib.suggestController';\r\n    SuggestController = __decorate([\r\n        __param(1, IEditorWorkerService),\r\n        __param(2, ISuggestMemoryService),\r\n        __param(3, ICommandService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IInstantiationService)\r\n    ], SuggestController);\r\n    return SuggestController;\r\n}());\r\nexport { SuggestController };\r\nvar TriggerSuggestAction = /** @class */ (function (_super) {\r\n    __extends(TriggerSuggestAction, _super);\r\n    function TriggerSuggestAction() {\r\n        return _super.call(this, {\r\n            id: TriggerSuggestAction.id,\r\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\r\n            alias: 'Trigger Suggest',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* CtrlCmd */ | 10 /* Space */,\r\n                mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [512 /* Alt */ | 9 /* Escape */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    TriggerSuggestAction.prototype.run = function (accessor, editor) {\r\n        var controller = SuggestController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.triggerSuggest();\r\n    };\r\n    TriggerSuggestAction.id = 'editor.action.triggerSuggest';\r\n    return TriggerSuggestAction;\r\n}(EditorAction));\r\nexport { TriggerSuggestAction };\r\nregisterEditorContribution(SuggestController.ID, SuggestController);\r\nregisterEditorAction(TriggerSuggestAction);\r\nvar weight = 100 /* EditorContrib */ + 90;\r\nvar SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'acceptSelectedSuggestion',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) {\r\n        x.acceptSelectedSuggestion(true, false);\r\n    }\r\n}));\r\n// normal tab\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'acceptSelectedSuggestion',\r\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\r\n    primary: 2 /* Tab */,\r\n    weight: weight\r\n});\r\n// accept on enter has special rules\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'acceptSelectedSuggestion',\r\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\r\n    primary: 3 /* Enter */,\r\n    weight: weight\r\n});\r\n// todo@joh control enablement via context key\r\n// shift+enter and shift+tab use the alternative-flag so that the suggest controller\r\n// is doing the opposite of the editor.suggest.overwriteOnAccept-configuration\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'acceptAlternativeSelectedSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 1024 /* Shift */ | 3 /* Enter */,\r\n        secondary: [1024 /* Shift */ | 2 /* Tab */],\r\n    },\r\n    handler: function (x) {\r\n        x.acceptSelectedSuggestion(false, true);\r\n    },\r\n}));\r\n// continue to support the old command\r\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'hideSuggestWidget',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.cancelSuggestWidget(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectNextSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 18 /* DownArrow */,\r\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\r\n        mac: { primary: 18 /* DownArrow */, secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KEY_N */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectNextPageSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 12 /* PageDown */,\r\n        secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectLastSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectLastSuggestion(); }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectPrevSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 16 /* UpArrow */,\r\n        secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\r\n        mac: { primary: 16 /* UpArrow */, secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KEY_P */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectPrevPageSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 11 /* PageUp */,\r\n        secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectFirstSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectFirstSuggestion(); }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionDetails',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleSuggestionDetails(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\r\n        mac: { primary: 256 /* WinCtrl */ | 10 /* Space */ }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleExplainMode',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleExplainMode(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */,\r\n        primary: 2048 /* CtrlCmd */ | 85 /* US_SLASH */,\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionFocus',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleSuggestionFocus(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\r\n        mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */ }\r\n    }\r\n}));\r\n//#region tab completions\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertBestCompletion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x, arg) {\r\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? __assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\r\n    },\r\n    kbOpts: {\r\n        weight: weight,\r\n        primary: 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertNextSuggestion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x) { return x.acceptNextSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x) { return x.acceptPrevSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 1024 /* Shift */ | 2 /* Tab */\r\n    }\r\n}));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}