{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\src\\\\containers\\\\Study\\\\workflowDropdown.js\";\nimport React from 'react';\nimport { Select, Menu, Dropdown, Button, Icon } from 'antd';\nimport ButtonWithToolTip from '../Tooltip/ButtonWithToolTip';\nimport { checkPermission } from '../Utility/sharedUtility';\nvar Option = Select.Option;\n//Permission\nvar permissionCheck = function permissionCheck(btnName, study, permissions) {\n  if (checkPermission(permissions, [btnName]) >= 1) {\n    if (!study.locked) {\n      return true;\n    }\n  }\n  return false;\n};\nexport function WorkflowDropdown(param) {\n  var _this = this;\n  var study = param.study,\n    permissions = param.permissions,\n    studyWorkFlow = param.studyWorkFlow,\n    isProjectInActive = param.isProjectInActive,\n    fnForComment = param.fnForComment,\n    fnForWorkflow = param.fnForWorkflow,\n    WorkflowActivityStatusTransition = param.WorkflowActivityStatusTransition,\n    ActivityWorkStatusflowByStudy = param.ActivityWorkStatusflowByStudy;\n  var MappingStatus = param.MappingStatus;\n  //Get workflowActivityStatusID of the Study\n  //study workflowActivityStatusID\n  if (typeof MappingStatus == \"undefined\" || MappingStatus == null) {\n    MappingStatus = \"\";\n  }\n  var workflowActivityStatusID = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusID;\n\n  //study workflowActivityID\n  var workflowActivityID = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusID;\n  var workflowStatusTxt = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusText;\n  if (studyWorkFlow === undefined) {\n    workflowStatusTxt = study.workflowActivityStatusText;\n  }\n\n  //Get workflows for the study by workflowActivityStatusID\n  //availableWorkflows for that study\n  var getSubmitForReview = function getSubmitForReview(wStatus) {\n    return \"Submit \" + wStatus.replace(\"UnderReview\", \"\") + \" for Review\";\n  };\n  var availableWorkflows = WorkflowActivityStatusTransition.filter(function (w) {\n    return w.sourceStatusID === workflowActivityStatusID;\n  });\n  var WFOptions = /*#__PURE__*/React.createElement(Menu, {\n    onClick: function onClick(e) {\n      fnForWorkflow(parseInt(e.key), study, studyWorkFlow, availableWorkflows);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, availableWorkflows.map(function (wrkflow) {\n    return /*#__PURE__*/React.createElement(Menu.Item, {\n      key: wrkflow.targetStatusID,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 24\n      }\n    }, wrkflow.targetStatusText.indexOf(\"UnderReview\") >= 0 ? getSubmitForReview(wrkflow.targetStatusText) : wrkflow.targetStatusText);\n  }));\n\n  //set disable\n  var checkDisable = function checkDisable() {\n    // study configured activity status by role\n    //for example - > if data analyst is loggedin ? you can get the define status in the following variable \n    var workflowActivityID = study.workflowActivityID,\n      workflowActivityStatusID = study.workflowActivityStatusID;\n    switch (workflowActivityID) {\n      case 4:\n      case \"4\":\n        {\n          //Don't allow define until mapping get complete\n          //Get Mapping Status Of The Study\n          var Study_Map_Activity = (ActivityWorkStatusflowByStudy || []).find(function (ws) {\n            return ws.workflowActivityID === 3;\n          });\n          var Sty_Mapping_Status = Study_Map_Activity ? Study_Map_Activity.workflowActivityStatusID : -1;\n          return (workflowActivityStatusID === 10 || workflowActivityStatusID === 20) && study.mappingRequried && Sty_Mapping_Status !== 9;\n        }\n      default:\n        return false;\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null,\n  /*#__PURE__*/\n  //    studyWorkFlow && permissionCheck(\"Workflow\", study, permissions) &&\n  //    <Select\n  //    style={{\n  //        width: \"80%\"\n  //    }}\n  //    id={\"workflowSelect\"}\n  //    defaultValue={-1}\n  //    disabled={isProjectInActive || study.locked}\n  //    onChange={(value) => {\n  //        value !== -1 &&\n  //            fnForWorkflow(value, study, studyWorkFlow, availableWorkflows);\n  //    }}\n  //>\n  //    <Option value={-1}>--Select--</Option>\n  //    {availableWorkflows.map(wrkflow => {\n  //        return <Option title={wrkflow.targetStatusText} value={wrkflow.targetStatusID}>{wrkflow.targetStatusText}</Option>\n  //    })}\n  //</Select>\n  React.createElement(Dropdown, {\n    overlay: WFOptions,\n    disabled: isProjectInActive || study.locked || availableWorkflows.length === 0 || checkDisable(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"ant-dropdown-link\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, workflowStatusTxt, \" \", /*#__PURE__*/React.createElement(Icon, {\n    type: \"down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }))));\n}","map":{"version":3,"names":["React","Select","Menu","Dropdown","Button","Icon","ButtonWithToolTip","checkPermission","Option","permissionCheck","btnName","study","permissions","locked","WorkflowDropdown","param","studyWorkFlow","isProjectInActive","fnForComment","fnForWorkflow","WorkflowActivityStatusTransition","ActivityWorkStatusflowByStudy","MappingStatus","workflowActivityStatusID","workflowActivityID","workflowStatusTxt","workflowActivityStatusText","undefined","getSubmitForReview","wStatus","replace","availableWorkflows","filter","w","sourceStatusID","WFOptions","e","parseInt","key","map","wrkflow","targetStatusID","targetStatusText","indexOf","checkDisable","Study_Map_Activity","find","ws","Sty_Mapping_Status","mappingRequried","length","preventDefault"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/src/containers/Study/workflowDropdown.js"],"sourcesContent":["import React from 'react';\nimport { Select, Menu, Dropdown, Button, Icon } from 'antd';\nimport ButtonWithToolTip from '../Tooltip/ButtonWithToolTip';\nimport {\n    checkPermission\n} from '../Utility/sharedUtility';\n\n\nlet Option = Select.Option;\n//Permission\nconst permissionCheck = (btnName, study, permissions) => {\n    if (checkPermission(permissions, [btnName]) >= 1) {\n        if (!study.locked) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport function WorkflowDropdown(param) {\n    const {\n        study,\n        permissions,\n        studyWorkFlow,\n        isProjectInActive,\n        fnForComment,\n        fnForWorkflow,\n        WorkflowActivityStatusTransition,\n        ActivityWorkStatusflowByStudy\n    } = param;\n\n    let { MappingStatus } = param;\n    //Get workflowActivityStatusID of the Study\n    //study workflowActivityStatusID\n    if (typeof (MappingStatus) == \"undefined\" || MappingStatus == null) {\n        MappingStatus = \"\";\n    }\n    const workflowActivityStatusID = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusID;\n\n    //study workflowActivityID\n    const workflowActivityID = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusID;\n\n    let workflowStatusTxt = typeof studyWorkFlow === \"object\" && studyWorkFlow.workflowActivityStatusText;\n    if (studyWorkFlow === undefined) {\n        workflowStatusTxt = study.workflowActivityStatusText;\r\n    }\n\n    //Get workflows for the study by workflowActivityStatusID\n    //availableWorkflows for that study\n    let getSubmitForReview = (wStatus) => \"Submit \" + wStatus.replace(\"UnderReview\", \"\") + \" for Review\";\n\n    const availableWorkflows = WorkflowActivityStatusTransition.filter(w => w.sourceStatusID === workflowActivityStatusID);\n    const WFOptions = (\n        <Menu onClick={(e) => { fnForWorkflow(parseInt(e.key), study, studyWorkFlow, availableWorkflows) }}>\n            {availableWorkflows.map(wrkflow => {\n                return <Menu.Item key={wrkflow.targetStatusID}>\n                    {wrkflow.targetStatusText.indexOf(\"UnderReview\") >= 0 ? getSubmitForReview(wrkflow.targetStatusText) : wrkflow.targetStatusText}\n                </Menu.Item>\r\n                })\n            }\n        </Menu>);\n\n    //set disable\n    let checkDisable = () =>\n    {\n        // study configured activity status by role\n        //for example - > if data analyst is loggedin ? you can get the define status in the following variable \n        let { workflowActivityID, workflowActivityStatusID } = study;\n\n        switch (workflowActivityID)\n        {\n            case 4:\r\n            case \"4\":\r\n                {\r\n                    //Don't allow define until mapping get complete\r\n                   //Get Mapping Status Of The Study\r\n                    let Study_Map_Activity = (ActivityWorkStatusflowByStudy || []).find(ws => ws.workflowActivityID === 3);\r\n                    let Sty_Mapping_Status = Study_Map_Activity ? Study_Map_Activity.workflowActivityStatusID : -1;\r\n                    return (workflowActivityStatusID === 10 || workflowActivityStatusID === 20) && (study.mappingRequried && Sty_Mapping_Status !== 9);\r\n                }\r\n            default:\r\n                return false;\r\n        }\n        \r\n    }\n    return <>\n        {\n        //    studyWorkFlow && permissionCheck(\"Workflow\", study, permissions) &&\n        //    <Select\n        //    style={{\n        //        width: \"80%\"\n        //    }}\n        //    id={\"workflowSelect\"}\n        //    defaultValue={-1}\n        //    disabled={isProjectInActive || study.locked}\n\n        //    onChange={(value) => {\n        //        value !== -1 &&\n        //            fnForWorkflow(value, study, studyWorkFlow, availableWorkflows);\n        //    }}\n        //>\n        //    <Option value={-1}>--Select--</Option>\n        //    {availableWorkflows.map(wrkflow => {\n        //        return <Option title={wrkflow.targetStatusText} value={wrkflow.targetStatusID}>{wrkflow.targetStatusText}</Option>\n        //    })}\n            //</Select>\n            <Dropdown overlay={WFOptions} disabled={isProjectInActive || study.locked || availableWorkflows.length === 0 || checkDisable() }>\r\n                <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\r\n                    {workflowStatusTxt} <Icon type=\"down\" />\r\n                </a>\r\n            </Dropdown>\n        }\n        \n    </>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}