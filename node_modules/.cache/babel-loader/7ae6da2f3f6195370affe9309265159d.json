{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\akash\\\\Desktop\\\\agat project\\\\CLientapp\\\\src\\\\containers\\\\MappingLibrary\\\\mappinglibrarylist.js\";\nimport React, { Component, useRef, useState, useEffect } from 'react';\nimport { Modal, Button, Row, Checkbox, Icon, Input, Breadcrumb } from 'antd';\nimport 'handsontable/dist/handsontable.full.css';\nimport { HotTable, HotColumn } from '@handsontable/react';\nimport LayoutContentWrapper from '../../components/utility/layoutWrapper';\nimport { errorModal, CallServerPost, showProgress, hideProgress, checkPermission, successModalCallback } from '../Utility/sharedUtility';\nimport ButtonWithToolTip from '../Tooltip/ButtonWithToolTip';\nimport { ActionColumn } from '../User/ActionColumn';\nimport ConfirmModal from '../Utility/ConfirmModal';\nimport moment from 'moment-timezone';\nexport default function MappingLibrary(props) {\n  var _this = this,\n    _React$createElement;\n  var Ref_Table = useRef();\n  var Ref_Search = useRef();\n  var ActionCell = function ActionCell(props) {\n    return props.value;\n  };\n  var maplibpermission = checkPermission(props.permissions, [\"self\"]) >= 4;\n  //if sow all is checkbox means table multiple select\n  //else single select\n  var type = \"checkbox\";\n  var ShowAll = true;\n  var hideCheckBox = false;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isChecked = _useState2[0],\n    setChecked = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showDeleteModal = _useState4[0],\n    setShowDeleteModal = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dataSource = _useState6[0],\n    setDataSource = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    dataSourceOrg = _useState8[0],\n    setDataSourceOrg = _useState8[1];\n  var _useState9 = useState(dataSource),\n    _useState10 = _slicedToArray(_useState9, 2),\n    filteredData = _useState10[0],\n    setFilteredData = _useState10[1];\n  var _useState11 = useState(\"\"),\n    _useState12 = _slicedToArray(_useState11, 2),\n    searchText = _useState12[0],\n    setSearchText = _useState12[1];\n  //console.log(checkPermission(props.permissions, [\"self\"]) >= 4)\n  var refreshList = function refreshList() {\n    var mappingOperation = false;\n    var permissions = props.permissions;\n    var data = [];\n    var inData = {};\n\n    //MappingLibrary\n    if (mappingOperation) {\n      var targetDataSet = mappingOperation.targetDataSet,\n        targetVariableName = mappingOperation.targetVariableName;\n      inData.targetDataSet = targetDataSet;\n      inData.targetVariableName = targetVariableName;\n      inData.mappingLibraryID = 0;\n    } else {\n      inData.mappingLibraryID = -1;\n    }\n    showProgress();\n    CallServerPost(\"MappingLibrary/GetAll\", inData).then(function (res) {\n      hideProgress();\n      if (res.status === 1) {\n        var libraryRecord = res.value;\n        var perLevel = checkPermission(permissions, [\"self\"]);\n        for (var i = 0; i < libraryRecord.length; i++) {\n          var source = libraryRecord[i].sourceDataset + \".\" + libraryRecord[i].sourceVariableName;\n          var target = libraryRecord[i].targetDataSet + \".\" + libraryRecord[i].targetVariableName;\n          var constructString = libraryRecord[i].constructString;\n          var mappingLibraryID = libraryRecord[i].mappingLibraryID;\n          data.push({\n            key: mappingLibraryID,\n            source: source,\n            target: target,\n            constructString: constructString\n          });\n        }\n        setDataSource(data);\n        setFilteredData(data);\n      } else {\n        setDataSource([]);\n        setFilteredData([]);\n      }\n      hideProgress();\n    }).catch(function (e) {\n      hideProgress();\n    });\n  };\n  useEffect(function () {\n    refreshList();\n  }, []);\n\n  //For Checkbox in Table\n  var getHTML = function getHTML(showall_loc) {\n    if (showall_loc) {\n      var checkbox = \"<input type='checkbox' class='checker parentimportcheckbox' \";\n      checkbox += isChecked ? 'checked=\"checked\"' : '';\n      checkbox += !(checkPermission(props.permissions, [\"self\"]) >= 4) || hideCheckBox ? 'disabled' : \"\";\n      checkbox += \">\";\n      return checkbox;\n    } else {\n      return \"Check\";\n    }\n  };\n  var getColumns = function getColumns(showall_loc) {\n    var Columns = [{\n      title: getHTML(showall_loc),\n      type: 'checkbox',\n      data: \"Row_Selection\",\n      readOnly: !(checkPermission(props.permissions, [\"self\"]) >= 4),\n      classname: \"htCenter htMiddle\"\n    }, {\n      title: \"Source\",\n      data: \"source\",\n      classname: \"htCenter htMiddle\"\n    }, {\n      title: \"Target\",\n      data: \"target\"\n    }, {\n      title: \"Rule\",\n      data: \"constructString\"\n    }];\n    if (!(checkPermission(props.permissions, [\"self\"]) >= 4)) {\n      Columns.shift();\n    }\n    return Columns;\n  };\n  //Columns\n\n  //Select All Record\n  //when parent checkbox clicked\n  var SelectAllRecord = function SelectAllRecord(event, coords) {\n    var totalRows = filteredData.length;\n    var check = !isChecked;\n    for (var index = 0; index < totalRows; index++) {\n      Ref_Table.current.hotInstance.getInstance().setDataAtCell(index, 0, check ? true : false);\n    }\n    setChecked(check);\n  };\n\n  //Is check selected mapping rule target is available in current study??\n  var checkIsTargetAval = function checkIsTargetAval(sel_lib_records) {\n    var Standards = props.Standards;\n    var target = [];\n    //Std Target Domain Variable\n    var Domain = Standards.Domain,\n      Variable = Standards.Variable;\n    var out = {\n      err: false,\n      emsg: [/*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }, \"Following targets are not available :\"))]\n    };\n    sel_lib_records.map(function (lr) {\n      //Domain aval for the study\n      var isDomainAval = Domain.find(function (dm) {\n        return dm.domain === lr.targetDataSet;\n      });\n      if (isDomainAval) {\n        lr.cdiscDataStdDomainMetadataID = isDomainAval.cdiscDataStdDomainMetadataID;\n        var isVariableAval = Variable.find(function (va) {\n          return va.variableName === lr.targetVariableName && va.cdiscDataStdDomainMetadataID === isDomainAval.cdiscDataStdDomainMetadataID;\n        });\n        if (isVariableAval) {\n          lr.cdiscDataStdVariableMetadataID = isVariableAval.cdiscDataStdVariableMetadataID;\n          return true;\n        }\n      }\n      out.err = true;\n      if (target.indexOf(lr.target) === -1) {\n        target.push(lr.target);\n        out.emsg.push( /*#__PURE__*/React.createElement(\"p\", {\n          className: \"errparatag\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 31\n          }\n        }, lr.target));\n      }\n    });\n    return out;\n  };\n  var checkisTarExistAlready = function checkisTarExistAlready(sel_lib_records) {\n    //Already exist variable\n    var MappingList = props.MappingList;\n    var target = [];\n    var out = {\n      err: false,\n      emsg: [/*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }\n      }, \"Following targets are already exist :\"))]\n    };\n    sel_lib_records.map(function (lr) {\n      //Domain aval for the study\n      var isTarExist = MappingList.some(function (ml) {\n        return ml.targetDataSet === lr.targetDataSet && ml.targetVariableName === lr.targetVariableName;\n      });\n      if (isTarExist && target.indexOf(lr.target) === -1) {\n        target.push(lr.target);\n        out.err = true;\n        out.emsg.push( /*#__PURE__*/React.createElement(\"p\", {\n          className: \"errparatag\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 31\n          }\n        }, lr.target));\n      }\n    });\n    return out;\n  };\n\n  //Delete selected rules\n  var DeleteRule = function DeleteRule() {\n    //let allrecord = Ref_Table.current.hotInstance.getSourceData();\n    var allrecord = filteredData;\n    if (allrecord.length > 0) {\n      //filter only selected record\n      var selected_records = allrecord.filter(function (rec) {\n        return rec.Row_Selection;\n      });\n      if (selected_records.length > 0) {\n        setShowDeleteModal(true);\n      } else {\n        errorModal(\"Select atleast one rule to delete\");\n      }\n    } else {\n      errorModal(\"No rule(s) available to delete\");\n    }\n  };\n  var DeleteBulk = function DeleteBulk(changeReason) {\n    setShowDeleteModal(false);\n\n    //filter only selected record\n    var selected_records = filteredData.filter(function (rec) {\n      return rec.Row_Selection;\n    });\n    if (selected_records.length > 0) {\n      showProgress();\n      var zones = moment.tz.guess();\n      var timezone = moment.tz(zones).zoneAbbr();\n      var userID = JSON.parse(sessionStorage.getItem(\"userProfile\")).userID;\n      var delList = [];\n      for (var i = 0; i < selected_records.length; i++) {\n        delList.push({\n          UpdatedBy: userID,\n          TimeZone: timezone,\n          MappingLibraryID: selected_records[i].key\n        });\n      }\n      CallServerPost(\"MappingLibrary/Delete\", delList).then(function (res) {\n        hideProgress();\n        if (res.status === 1) {\n          successModalCallback(res.message, refreshList);\n        } else {\n          errorModal(res.message);\n        }\n      }).catch(function (e) {\n        hideProgress();\n      });\n    } else {\n      errorModal(\"Select atleast one rule to delete\");\n    }\n  };\n\n  //on search\n  var onSearch = function onSearch(event) {\n    if (dataSource.length === 0) return;\n    var hiddenPlugin = Ref_Table.current.hotInstance.getPlugin('hiddenRows');\n    var searchTextval = event.currentTarget.value;\n    hiddenPlugin.showRows(_toConsumableArray(Array(filteredData.length).keys()));\n    if (searchTextval && searchTextval.length > 1) {\n      var searchresult = Ref_Table.current.hotInstance.getPlugin(\"search\").query(searchTextval);\n      var rowstohide = [];\n      filteredData.forEach(function (value, i) {\n        if (searchresult.filter(function (a) {\n          return a.row === i;\n        }).length === 0) {\n          rowstohide.push(i);\n        }\n      });\n      hiddenPlugin.hideRows(rowstohide);\n      hideCheckBox = searchresult.length === 0;\n      Ref_Table.current.hotInstance.render();\n    } else {\n      hideCheckBox = false;\n      Ref_Table.current.hotInstance.render();\n    }\n    if (searchTextval && searchTextval.length === 0) {\n      Ref_Search.current.input.value = \"\";\n    }\n  };\n\n  //on clearSearch\n  var clearSearch = function clearSearch() {\n    Ref_Search.current.input.value = \"\";\n    var hiddenPlugin = Ref_Table.current.hotInstance.getPlugin('hiddenRows');\n    hiddenPlugin.showRows(_toConsumableArray(Array(filteredData.length).keys()));\n    Ref_Table.current.hotInstance.render();\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-book\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 21\n    }\n  }, \" Mapping Library\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }, \"List\")), /*#__PURE__*/React.createElement(LayoutContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      width: \"100%\",\n      padding: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, (_React$createElement = {\n    ref: Ref_Search,\n    tabIndex: \"0\",\n    name: \"TableSearch\",\n    suffix: /*#__PURE__*/React.createElement(Icon, {\n      type: \"search\",\n      style: {\n        color: 'rgba(0,0,0,.25)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 33\n      }\n    })\n  }, _defineProperty(_React$createElement, \"suffix\", /*#__PURE__*/React.createElement(Icon, {\n    onClick: clearSearch,\n    type: \"close\",\n    style: {\n      color: 'rgba(0,0,0,.25)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 33\n    }\n  })), _defineProperty(_React$createElement, \"style\", {\n    width: '20%'\n  }), _defineProperty(_React$createElement, \"onChange\", onSearch), _defineProperty(_React$createElement, \"placeholder\", \"Search\"), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 21\n  }), _React$createElement))), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      width: \"100%\",\n      padding: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(HotTable, {\n    id: \"MappingLibraryList\",\n    licenseKey: \"non-commercial-and-evaluation\",\n    height: maplibpermission ? \"calc(100vh - 203px)\" : \"calc(100vh - 179px)\",\n    style: {\n      borderRadius: \"10px\"\n    },\n    viewportRowRenderingOffsetnumber: 10,\n    ref: Ref_Table,\n    settings: {\n      wordWrap: true,\n      stretchH: 'all',\n      data: dataSource,\n      columns: getColumns(ShowAll),\n      editable: false,\n      readOnly: true,\n      filters: true,\n      hiddenRows: true,\n      dropdownMenu: ['filter_by_condition', 'filter_by_value', 'filter_action_bar'],\n      afterFilter: function afterFilter(filter) {\n        var _this2 = this;\n        var filteredVal = this.getPlugin('trimRows').rowsMapper._arrayMap.map(function (r) {\n          return _this2.getSourceDataAtRow(r);\n        });\n        setFilteredData(filteredVal);\n      },\n      afterGetColHeader: function afterGetColHeader(col, TH) {\n        if (col === 0) {\n          var button = TH.children[0].children[0];\n          button.parentNode.removeChild(button);\n        }\n      },\n      afterOnCellMouseUp: function afterOnCellMouseUp(e, coords, td) {\n        e.preventDefault();\n        if (e.realTarget.classList.contains('checker')) {\n          //when parent checkbox clicked\n          SelectAllRecord(e, coords);\n        }\n      },\n      afterChange: function afterChange() {\n        if (filteredData.some(function (x) {\n          return !x.Row_Selection;\n        })) {\n          setChecked(false);\n        } else {\n          setChecked(true);\n        }\n      },\n      beforeChange: function beforeChange(changes, source) {\n        var _changes = _slicedToArray(changes, 1),\n          _changes$ = _slicedToArray(_changes[0], 4),\n          row = _changes$[0],\n          prop = _changes$[1],\n          oldVal = _changes$[2],\n          newVal = _changes$[3];\n        if (type === \"radio\" && prop === \"Row_Selection\" && oldVal != newVal) {\n          if (newVal) {\n            var allrow = this.getSourceData().filter(function (x) {\n              return x.Row_Selection == true;\n            });\n            allrow.map(function (r, i) {\n              r.Row_Selection = false;\n            });\n          }\n          this.setDataAtRowProp(row, this.propToCol(\"Row_Selection\"), newVal);\n        } else if (type === \"radio\" && prop === \"Row_Selection\" && oldVal) {\n          this.setDataAtRowProp(row, this.propToCol(\"Row_Selection\"), false);\n        }\n      },\n      cells: function cells(row, col, prop) {\n        var cellProperties = {};\n        if (prop === 'Row_Selection') {\n          cellProperties.className = 'htMiddle htCenter';\n        }\n        return cellProperties;\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"MetaDataNoFilter\",\n    style: {\n      display: dataSource.length > 0 ? \"none\" : \"block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 21\n    }\n  }, \"No data available\")), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 17\n    }\n  }, checkPermission(props.permissions, [\"self\"]) >= 4 && /*#__PURE__*/React.createElement(Button, {\n    style: {\n      float: \"right\"\n    },\n    type: \"danger\",\n    onClick: DeleteRule,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 75\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(ConfirmModal, {\n    title: \"Delete Mapping Rule(s)\",\n    SubmitButtonName: \"Delete\",\n    onSubmit: DeleteBulk,\n    visible: showDeleteModal,\n    handleCancel: function handleCancel() {\n      setShowDeleteModal(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"names":["React","Component","useRef","useState","useEffect","Modal","Button","Row","Checkbox","Icon","Input","Breadcrumb","HotTable","HotColumn","LayoutContentWrapper","errorModal","CallServerPost","showProgress","hideProgress","checkPermission","successModalCallback","ButtonWithToolTip","ActionColumn","ConfirmModal","moment","MappingLibrary","props","Ref_Table","Ref_Search","ActionCell","value","maplibpermission","permissions","type","ShowAll","hideCheckBox","isChecked","setChecked","showDeleteModal","setShowDeleteModal","dataSource","setDataSource","dataSourceOrg","setDataSourceOrg","filteredData","setFilteredData","searchText","setSearchText","refreshList","mappingOperation","data","inData","targetDataSet","targetVariableName","mappingLibraryID","then","res","status","libraryRecord","perLevel","i","length","source","sourceDataset","sourceVariableName","target","constructString","push","key","catch","e","getHTML","showall_loc","checkbox","getColumns","Columns","title","readOnly","classname","shift","SelectAllRecord","event","coords","totalRows","check","index","current","hotInstance","getInstance","setDataAtCell","checkIsTargetAval","sel_lib_records","Standards","Domain","Variable","out","err","emsg","map","lr","isDomainAval","find","dm","domain","cdiscDataStdDomainMetadataID","isVariableAval","va","variableName","cdiscDataStdVariableMetadataID","indexOf","checkisTarExistAlready","MappingList","isTarExist","some","ml","DeleteRule","allrecord","selected_records","filter","rec","Row_Selection","DeleteBulk","changeReason","zones","tz","guess","timezone","zoneAbbr","userID","JSON","parse","sessionStorage","getItem","delList","UpdatedBy","TimeZone","MappingLibraryID","message","onSearch","hiddenPlugin","getPlugin","searchTextval","currentTarget","showRows","Array","keys","searchresult","query","rowstohide","forEach","a","row","hideRows","render","input","clearSearch","width","padding","color","borderRadius","wordWrap","stretchH","columns","editable","filters","hiddenRows","dropdownMenu","afterFilter","filteredVal","rowsMapper","_arrayMap","r","getSourceDataAtRow","afterGetColHeader","col","TH","button","children","parentNode","removeChild","afterOnCellMouseUp","td","preventDefault","realTarget","classList","contains","afterChange","x","beforeChange","changes","prop","oldVal","newVal","allrow","getSourceData","setDataAtRowProp","propToCol","cells","cellProperties","className","display","float"],"sources":["C:/Users/akash/Desktop/agat project/CLientapp/src/containers/MappingLibrary/mappinglibrarylist.js"],"sourcesContent":["import React, { Component, useRef, useState, useEffect } from 'react';\nimport { Modal, Button, Row, Checkbox, Icon, Input, Breadcrumb } from 'antd';\nimport 'handsontable/dist/handsontable.full.css';\nimport { HotTable, HotColumn } from '@handsontable/react';\r\nimport LayoutContentWrapper from '../../components/utility/layoutWrapper';\nimport { errorModal, CallServerPost, showProgress, hideProgress, checkPermission, successModalCallback } from '../Utility/sharedUtility';\nimport ButtonWithToolTip from '../Tooltip/ButtonWithToolTip';\nimport { ActionColumn } from '../User/ActionColumn';\nimport ConfirmModal from '../Utility/ConfirmModal';\nimport moment from 'moment-timezone';\n\n\nexport default function MappingLibrary(props) {\n    let Ref_Table = useRef();\n    let Ref_Search = useRef();\n\n    const ActionCell = (props) => {\n        return props.value;\n    }\n    let maplibpermission = (checkPermission(props.permissions, [\"self\"]) >= 4);\n    //if sow all is checkbox means table multiple select\n    //else single select\n    let type = \"checkbox\";\n    let ShowAll = true;\n    let hideCheckBox = false;\n    let [isChecked, setChecked] = useState(false);\n    let [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [dataSource, setDataSource] = useState([]);\n    const [dataSourceOrg, setDataSourceOrg] = useState([]);\n    let [filteredData, setFilteredData] = useState(dataSource);\r\n    let [searchText, setSearchText] = useState(\"\");\r\n    //console.log(checkPermission(props.permissions, [\"self\"]) >= 4)\n    const refreshList = () => {\n        let mappingOperation = false;\n\n        const permissions = props.permissions;\n        let data = [];\n        let inData = {};\n\n        //MappingLibrary\n        if (mappingOperation) {\n            let { targetDataSet, targetVariableName } = mappingOperation;\n\n            inData.targetDataSet = targetDataSet;\n            inData.targetVariableName = targetVariableName\n            inData.mappingLibraryID = 0;\n\n        }\n        else {\n            inData.mappingLibraryID = -1;\n        }\n        showProgress();\n        CallServerPost(\"MappingLibrary/GetAll\", inData)\n            .then((res) => {\n                hideProgress();\n                if (res.status === 1) {\n\n                    let libraryRecord = res.value;\n\n                    const perLevel = checkPermission(permissions, [\"self\"]);\n                    for (var i = 0; i < libraryRecord.length; i++) {\n                        let source = libraryRecord[i].sourceDataset + \".\" + libraryRecord[i].sourceVariableName;\n                        let target = libraryRecord[i].targetDataSet + \".\" + libraryRecord[i].targetVariableName;\n                        let constructString = libraryRecord[i].constructString;\n                        const mappingLibraryID = libraryRecord[i].mappingLibraryID;\n\n                        data.push({\n                            key: mappingLibraryID,\n                            source: source,\n                            target: target,\n                            constructString: constructString\n                        });\n                    }\n\n                    setDataSource(data);\n                    setFilteredData(data);\n                }\n                else {\n                    setDataSource([]);\r\n                    setFilteredData([]);\r\n                }\n                hideProgress();\n            }).catch((e) => {\n                hideProgress();\n            });\r\n    }\n    useEffect(() => {\n        refreshList();\n    }, []);\n\n\n    //For Checkbox in Table\n    let getHTML = (showall_loc) => {\n        if (showall_loc) {\n\n            let checkbox = \"<input type='checkbox' class='checker parentimportcheckbox' \";\n            checkbox += isChecked ? 'checked=\"checked\"' : '';\n            checkbox += !(checkPermission(props.permissions, [\"self\"]) >= 4) || hideCheckBox ? 'disabled' : \"\";\n\n            checkbox += \">\";\n            return checkbox;\n        }\n        else {\n\n            return \"Check\";\n        }\n    }\n\n    let getColumns = (showall_loc) => {\n        const Columns = [\n            {\n                title: getHTML(showall_loc),\n                type: 'checkbox',\n                data: \"Row_Selection\",\n                readOnly: !(checkPermission(props.permissions, [\"self\"]) >= 4),\n                classname: \"htCenter htMiddle\"\n            },\n            {\n                title: \"Source\",\n                data: \"source\",\n                classname: \"htCenter htMiddle\"\n            },\n            {\n                title: \"Target\",\n                data: \"target\"\n            },\n            {\n                title: \"Rule\",\n                data: \"constructString\"\n            }\n\n        ]\n        if (!(checkPermission(props.permissions, [\"self\"]) >= 4)) {\n            Columns.shift();\r\n        }\n        return Columns;\n    }\n    //Columns\n    \n\n    //Select All Record\n    //when parent checkbox clicked\n    const SelectAllRecord = (event, coords) => {\n        const totalRows = filteredData.length;\n\n        let check = !isChecked;\n\n        for (let index = 0; index < totalRows; index++) {\n            Ref_Table.current.hotInstance.getInstance().setDataAtCell(index, 0, check ? true : false);\n        }\n        setChecked(check);\n    }\n\n\n    //Is check selected mapping rule target is available in current study??\n    let checkIsTargetAval = (sel_lib_records) => {\n        let { Standards } = props;\n        let target = [];\n        //Std Target Domain Variable\n        let { Domain, Variable } = Standards;\n        let out =\n        {\n            err: false,\n            emsg: [<div><h1>Following targets are not available :</h1></div>]\n        }\n\n        sel_lib_records.map((lr) => {\n            //Domain aval for the study\n            let isDomainAval = Domain.find(dm => dm.domain === lr.targetDataSet);\n            if (isDomainAval) {\n                lr.cdiscDataStdDomainMetadataID = isDomainAval.cdiscDataStdDomainMetadataID;\n                let isVariableAval = Variable.find(va => va.variableName === lr.targetVariableName &&\n                    va.cdiscDataStdDomainMetadataID === isDomainAval.cdiscDataStdDomainMetadataID);\n                if (isVariableAval) {\n                    lr.cdiscDataStdVariableMetadataID = isVariableAval.cdiscDataStdVariableMetadataID;\n                    return true;\n                }\n            }\n            out.err = true;\n\n            if (target.indexOf(lr.target) === -1) {\n                target.push(lr.target);\n                out.emsg.push(<p className=\"errparatag\">{lr.target}</p>);\n            }\n        });\n        return out;\n    }\n\n    let checkisTarExistAlready = (sel_lib_records) => {\n        //Already exist variable\n        let { MappingList } = props;\n        let target = [];\n        let out = {\n            err: false,\n            emsg: [<div><h1>Following targets are already exist :</h1></div>]\n\n        }\n\n        sel_lib_records.map((lr) => {\n            //Domain aval for the study\n            let isTarExist = MappingList.some(ml => ml.targetDataSet === lr.targetDataSet &&\n                ml.targetVariableName === lr.targetVariableName);\n\n            if (isTarExist && target.indexOf(lr.target) === -1) {\n                target.push(lr.target);\n                out.err = true;\n                out.emsg.push(<p className=\"errparatag\">{lr.target}</p>)\n            }\n\n        });\n\n        return out;\n    }\n\n    //Delete selected rules\n    let DeleteRule = () => {\r\n\n        //let allrecord = Ref_Table.current.hotInstance.getSourceData();\n        let allrecord = filteredData;\n\n        if (allrecord.length > 0) {\n            //filter only selected record\n            let selected_records = allrecord.filter(rec => rec.Row_Selection);\n\n            if (selected_records.length > 0) {\n                setShowDeleteModal(true);\n            }\n            else {\n                errorModal(\"Select atleast one rule to delete\");\n            }\r\n        }\n        else {\n            errorModal(\"No rule(s) available to delete\");\n        }\n    }\n\n    let DeleteBulk = (changeReason) => {\n        setShowDeleteModal(false);\r\n\n        //filter only selected record\n        let selected_records = filteredData.filter(rec => rec.Row_Selection);\r\n        if (selected_records.length > 0) {\n            showProgress();\n            const zones = moment.tz.guess();\r\n            const timezone = moment.tz(zones).zoneAbbr();\n            const userID = JSON.parse(sessionStorage.getItem(\"userProfile\")).userID;\n            let delList = [];\n            for (var i = 0; i < selected_records.length; i++) {\n                delList.push({\r\n                    UpdatedBy: userID,\r\n                    TimeZone: timezone,\r\n                    MappingLibraryID: selected_records[i].key\r\n                });\r\n            }\n\n            CallServerPost(\"MappingLibrary/Delete\", delList)\n                .then((res) => {\n                    hideProgress();\n                    if (res.status === 1) {\n                        successModalCallback(res.message, refreshList);\n\n                    } else {\n                        errorModal(res.message);\r\n                    }\n                }).catch((e) => {\n                    hideProgress();\n                });\n\n\n        }\n        else {\n            errorModal(\"Select atleast one rule to delete\");\n        }\r\n    }\n\n    //on search\n    let onSearch = (event) => {\n\n        if (dataSource.length === 0) return;\n        let hiddenPlugin = Ref_Table.current.hotInstance.getPlugin('hiddenRows');\n        const searchTextval = event.currentTarget.value;\r\n        hiddenPlugin.showRows([...Array(filteredData.length).keys()]);\n        \r\n        if (searchTextval && searchTextval.length > 1) {\r\n            const searchresult = Ref_Table.current.hotInstance.getPlugin(\"search\").query(searchTextval);\r\n\n            let rowstohide = [];\n            filteredData.forEach(function (value, i) {\r\n                if (searchresult.filter(a => a.row === i).length === 0) {\r\n                    rowstohide.push(i);\r\n                }\r\n            });\n            \n            hiddenPlugin.hideRows(rowstohide);\n            hideCheckBox = searchresult.length === 0;\n            Ref_Table.current.hotInstance.render();\r\n        } else {\r\n            hideCheckBox = false;\r\n            Ref_Table.current.hotInstance.render();\r\n        }\r\n        if (searchTextval && searchTextval.length === 0) {\r\n            Ref_Search.current.input.value = \"\";\r\n        }\r\n    }\n\n    //on clearSearch\n    let clearSearch = () => {\n        Ref_Search.current.input.value = \"\";\r\n        let hiddenPlugin = Ref_Table.current.hotInstance.getPlugin('hiddenRows');\r\n        hiddenPlugin.showRows([...Array(filteredData.length).keys()]);\r\n        Ref_Table.current.hotInstance.render();\r\n    }\n   \n    return (\n        <>\n            <Breadcrumb>\r\n                <Breadcrumb.Item>\r\n                    <i className=\"fas fa-book\" />\r\n                    <span> Mapping Library</span>\r\n                </Breadcrumb.Item>\r\n                <Breadcrumb.Item>\r\n                    List\r\n                </Breadcrumb.Item>\r\n            </Breadcrumb>\n            <LayoutContentWrapper>\n                <Row style={{ width: \"100%\", padding: \"5px\" }}>\n                    <Input\n                        ref={Ref_Search}\n                        tabIndex=\"0\"\n                        name=\"TableSearch\"\n                        suffix={<Icon type=\"search\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                        suffix={<Icon onClick={clearSearch} type=\"close\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                        style={{ width: '20%' }} onChange={onSearch} placeholder=\"Search\"\n                    />\n                </Row>\n                <Row style={{ width: \"100%\", padding: \"5px\" }}>\n                    <HotTable\n                        id=\"MappingLibraryList\"\n                        licenseKey=\"non-commercial-and-evaluation\"\n                        height={maplibpermission ? \"calc(100vh - 203px)\" : \"calc(100vh - 179px)\"}\n                        style={{ borderRadius: \"10px\" }}\n                        viewportRowRenderingOffsetnumber={10}\n                        ref={Ref_Table}\n                        settings=\n                        {\n                            {\n                                wordWrap: true,\n                                stretchH: 'all',\n                                data: dataSource,\n                                columns: getColumns(ShowAll),\n                                editable: false,\n                                readOnly: true,\n                                filters: true,\n                                hiddenRows: true,\n                                dropdownMenu: ['filter_by_condition', 'filter_by_value', 'filter_action_bar'],\n                                afterFilter: function (filter) {\r\n                                    let filteredVal = this.getPlugin('trimRows').rowsMapper._arrayMap.map(r => this.getSourceDataAtRow(r))\r\n                                    setFilteredData(filteredVal)\r\n                                },\n                                afterGetColHeader: function (col, TH) {\n                                    if (col === 0) {\n                                        const button = TH.children[0].children[0];\n                                        button.parentNode.removeChild(button);\n                                    }\n                                },\n                                afterOnCellMouseUp: function (e, coords, td) {\n                                    e.preventDefault();\n\n                                    if (e.realTarget.classList.contains('checker')) {\n                                        //when parent checkbox clicked\n                                        SelectAllRecord(e, coords);\n                                    }\n                                },\n                                afterChange: function () {\n                                    if (filteredData.some(x => !x.Row_Selection)) {\n                                        setChecked(false);\n                                    }\n                                    else {\n                                        setChecked(true);\n                                    }\n                                },\n                                beforeChange: function (changes, source) {\n                                    const [[row, prop, oldVal, newVal]] = changes;\n                                    if (type === \"radio\" && prop === \"Row_Selection\" && oldVal != newVal) {\n                                        if (newVal) {\n                                            let allrow = this.getSourceData().filter(x => x.Row_Selection == true);\n                                            allrow.map((r, i) => {\n                                                r.Row_Selection = false;\n                                            })\n                                        }\n                                        this.setDataAtRowProp(row, this.propToCol(\"Row_Selection\"), newVal);\n                                    }\n                                    else if (type === \"radio\" && prop === \"Row_Selection\" && oldVal) {\n                                        this.setDataAtRowProp(row, this.propToCol(\"Row_Selection\"), false);\n                                    }\n\n                                },\n                                cells: function (row, col, prop) {\n                                    var cellProperties = {};\n\n                                    if (prop === 'Row_Selection') {\n                                        cellProperties.className = 'htMiddle htCenter';\n                                    }\n                                    return cellProperties;\n                                }\n\n                            }\n                        }\n                    >\n\n                    </HotTable>\n\n                    <div id=\"MetaDataNoFilter\" style={{ display: dataSource.length > 0 ? \"none\" : \"block\" }}>No data available</div>\n                </Row>\n                <Row style={{ width: \"100%\" }} >\n                    {checkPermission(props.permissions,[\"self\"]) >= 4 &&  <Button\n                        style={{ float: \"right\" }}\n                        type={\"danger\"}\n                        onClick={DeleteRule}\n                    >\n                        {\"Delete\"}\n                    </Button>}\n                </Row>\n            </LayoutContentWrapper>\n\n            <ConfirmModal title=\"Delete Mapping Rule(s)\" SubmitButtonName=\"Delete\" onSubmit={DeleteBulk} visible={showDeleteModal} handleCancel={() => { setShowDeleteModal(false) }} />\n        </>\n    );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}